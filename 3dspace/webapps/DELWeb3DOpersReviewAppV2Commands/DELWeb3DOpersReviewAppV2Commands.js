define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERHomeCmd",["DS/Logger/Logger"],function(e){"use strict";const t=e.getLogger("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERHomeCmd");function n(e){this.ec=e.executionContext}return n.prototype.beginExecute=function(){if(this.ec){let e=this.ec.getComponent(WAfrStandardComponentKey.HandlerComponent),n=this.ec.getComponent("mod_WelcomeScreen");this.ec.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"onHome",data:{origin:"HomeCmd"}}),n&&n.showWelcomeScreen(),e.hasHandler("DELWebOERClean")?e.executeHandler({id:"DELWebOERClean"}):t.log("DELWebOERClean Handler not found, please include DELWebOERSessionModelActions package in your app id card")}this.endExecute()},n.prototype.endExecute=function(){this.destroy(),this.done()},n.prototype.destroy=function(){delete this.ec},n}),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERRelationalNavigatorCmd",["DS/PADUtils/PADUtilsServices","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/DELWebOERCommonUtils/utils/XSOManager"],function(e,t,n){"use strict";let o=function(e){return!(!e||!UWA.is(e.isOOCPLMNode))&&e.isOOCPLMNode()};function i(e){this.ec=e.executionContext}return i.prototype.beginExecute=function(){var i=n&&n.getCSO?n.getCSO().get():[],r=[];t.trackChanges({executionContext:this.ec,category:"ActionBarCommand",action:"ShowRelations",label:"DELWebOERRelationalNavigatorCmd"}),i.forEach(function(e){var t;t=e.pathElement?function(e){for(var t,n=e.getLastElement(!0);n&&!o(n);)n=n.parents[0];return n&&(t={options:{type:function(e){return e.getUserData&&e.getUserData()?e.getUserData().type:null}(n),grid:{"ds6w:type":""}},getID:function(){return n.getModelIdentification()},getLabel:function(){}}),t}(e.pathElement):function(e){return{options:{type:e.getReferenceType(),grid:{"ds6w:type":""}},getID:function(){return e.getReferenceId()},getLabel:function(){}}}(e),r.push(t)}),r.length&&(e.setObject_on_compass({nodes_2_open:r}),e.open_app({appId:"ENORIPE_AP"},function(){})),this.endExecute()},i.prototype.endExecute=function(){this.destroy(),this.done()},i.prototype.destroy=function(){delete this.ec},i}),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERPropertiesPanelCmd",["DS/ENOCollabSharingCmds/commands/EditPropCmd/EditPropCmdBase","DS/DELWebOERCommonUtils/utils/XSOManager","DS/DELWebOERCommonUtils/utils/NodeUtils"],function(e,t,n){"use strict";function o(e){this._ec=e.executionContext,this._csoTokens=[]}return o.prototype.beginExecute=function(){let o=this._ec.getComponent("DELCommonUtilsServices"),i=this._ec.getComponent("Viewer"),r={getSelectedNodes:function(){let e=t.getCSO().get()||[],r=[],s=[];if(e&&0===e.length&&i.isSelectiveLoadingActivated()){let e=i.getController().getOOCSelectedReferenceID();e&&r.push([e])}return e.forEach(e=>{r.push(n.getRirPath(e))}),s=r.map((e=[])=>{let t;return e&&e.length>0&&(t={id:e[e.length-1],tenant:o.getPlatformId(),source:"3DSpace",getID:function(){return e[e.length-1]},getRelationID:function(){let t;return e.length>1&&(t=e[e.length-2]),t}}),t})},getSecurityContext:function(){return{SecurityContext:o.getCurrentSecurityContext(),tenant:o.getPlatformId()}}};(new e).launchProperties(r),this.done()},o.prototype.endExecute=function(){this.done()},o.prototype.destroy=function(){delete this._csoTokens,delete this._ec},o}),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERGenerateIssueCmd",["DS/DELWebOERCommonUtils/utils/XSOManager","DS/DELWebOERCommonUtils/utils/TrackUtils"],function(e,t){"use strict";const n="ds6w:type",o="3DSpace";var i,r,s,a,c,l=[];let d=function(e,t,n){if((t=e.length)>1)for(;n=--t;)for(;n--;)e[t]===e[n]&&e.splice(n,1);return e};function u(e){this.ec=e.executionContext}return c=function(e,t){var n=t.getComponent("DELCommonUtilsServices"),o=t.getComponent("Widget"),a=o&&o.getSessionWidget?o.getSessionWidget():null;r?(s.getSecurityContext=function(){return n.getCurrentSecurityContext().replace("ctx::","")},s.getTenant=function(){return n.getPlatformId()},e()):require(["DS/IssueManagementWebInWin/ENOIssueGenerationWebPanel","DS/IssueServices/Contexts","DS/IssueServices/services/PlatformServices","DS/IssueServices/services/IssueServices"],function(t,o,c,l){i=t,s=c,l,(r=o).add("widget",a),s.getSecurityContext=function(){return n.getCurrentSecurityContext().replace("ctx::","")},s.getTenant=function(){return n.getPlatformId()},s.initPlatformServices().then(function(){e()})})},u.prototype.beginExecute=async function(){let r=this,s={reportedAgainst:[],contexts:[],attachments:[]},u=e&&e.getCSO?e.getCSO().get():[],p=this.ec.getComponent("DELCommonUtilsServices"),g=p&&p.PPRTYPES?p.PPRTYPES:{},m=this.ec.getComponent("SessionModel").get("roots"),h=m.some(e=>e.pprType===g.PROCESS),f=function(e,t){e=e||{},r._buildup={},!0===e.state&&t&&UWA.is(t.data.path,"array")&&t.data.path.length>0&&(r._buildup={state:!0,refId:t.data.path[t.data.path.length-1]})},E=function(){r._buildup&&(r._buildup={})},C=function(e){let t;if(e.pathElement){let n=function e(t,n){return n||(n=[]),1===t.parents.length&&"RootBag"===t.parents[0].name?(n.push(t),d(n)):(t.parents.forEach(function(t){e(t,n)}),d(n))}(e.pathElement.getLastElement());n.length>0&&(t=n[0].getModelIdentification())}else t=e.getRoot().getReferenceId();return t},D=function(){UWA.is(u,"array")&&u.length>0&&u.forEach(e=>{e.pathElement?s.reportedAgainst.push(function(e){var t,n,o=null;if(e){for(t=e;t&&!((n=t.getLastElement(!0))&&UWA.is(n.isOOCPLMNode)&&n.isOOCPLMNode());)t=t.getParentPath();o=t.getLastElement(!0).getModelIdentification()}return o}(e.pathElement)):(e.getReferenceType&&p.isWKIType(e.getReferenceType())&&e.getParent()&&s.contexts.push(e.getParent().getReferenceId()),s.reportedAgainst.push(e.getReferenceId()))})};var S;S=r.ec.getComponent(WAfrStandardComponentKey.ModelEvents),[{eventName:{event:"activateBuildup"},callback:f.bind(null,{state:!0}),handler:S},{eventName:{event:"deactivateBuildup"},callback:f.bind(null,{state:!1}),handler:S},{eventName:{event:"loadData"},callback:E,handler:S}].forEach(function(e){l.push(e.handler.subscribe(e.eventName,e.callback))}),t.trackChanges({executionContext:this.ec,category:"ActionBarCommand",action:"GenerateIssue",label:"DELWebOERGenerateIssueCmd"}),m&&(h&&this._buildup&&!0===this._buildup.state&&this._buildup.refId?s.reportedAgainst.push(this._buildup.refId):D(),(()=>{let e,t;h?e=m:(t=[...new Set(u.map(e=>C(e)))],e=m.filter(e=>-1!==t.indexOf(e.id))),e&&e.forEach(function(e){s.contexts.push(e.id),e.scopedMfg&&e.scopedMfg.id&&s.contexts.push(e.scopedMfg.id),e.resource&&e.resource.id&&s.contexts.push(e.resource.id)})})());let b=await async function(e){let t=[...new Set([...e.reportedAgainst,...e.contexts])],i=await p.getAttributeForIds(t,[n]),r=function(e){return{physicalId:e,serviceId:o,objectType:i&&i[e]?i[e][n]:null}};return e.reportedAgainst=e.reportedAgainst.map(r),e.contexts=e.contexts.map(r),e}(s);var v;v=b,c(function(){let e=r.ec.getComponent("Widget"),t=e&&e.getSessionWidget?e.getSessionWidget():null;a=new i({data:v,htmlContainer:t.body,onClose:r.endExecute.bind(r)})},r.ec)},u.prototype.endExecute=function(){a&&(a.destroy(),a=null);let e=this.ec.getComponent(WAfrStandardComponentKey.ModelEvents);l.forEach(t=>{e.unsubscribe(t)}),this.done(),this.destroy()},u.prototype.destroy=function(){delete this.ec},u}),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERLevelSelectorCmd",["DS/Logger/Logger","DS/Selection/HSOManager","DS/ENO3DCommands/ENO3DLevelSelectorCmd"],function(e,t,n){"use strict";const o="DELCommonUtilsServices",i=e.getLogger("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERLevelSelectorCmd");return class extends n{constructor(e){super(e),this.ec=e.executionContext,this._onDragStart=this._onDragStart.bind(this)}_onDragStart(e){let n=this.ec.getComponent(o),r=t.get().map(function(e={}){let t={contextId:n.getCurrentSecurityContext(),envId:n.getPlatformId(),serviceId:"3DSpace",path:[]};if(e.pathElement){let n=e.pathElement.externalPath;if(UWA.is(n,"array"))for(let e=1;e<n.length;e++){let o=n[e],i=o.getModelIdentification(),r=(o.getUserData()||{}).type;if(!i)break;t.path.push({resourceid:i,type:r}),t.objectId=i,t.objectType=r}else i.warn("Unable to build drag object, as externalPath property is not available in the path element")}return t}),s={biProxyCtx:{appId:n.getAppId(),widgetId:n.getWidgetId()},data:{items:r},protocol:"3DXContent",source:n.getAppId(),version:"1.1",widgetId:n.getWidgetId()};if(!(UWA.is(r,"array")&&r.length>0))return e.preventDefault(),!1;e.dataTransfer.setData("text/plain",JSON.stringify(s))}_setLevelDraggable(e){let t=widget.getElement("#LevelSelector");if(t){let n=t.getElements(".levels .level canvas");if(n){for(let t=0;t<n.length;t++){let o=n[t];o.setAttribute("draggable",e),o.style.cursor=e?"grab":"pointer"}!0===e?t.addEventListener("dragstart",this._onDragStart):t.removeEventListener("dragstart",this._onDragStart)}else i.error("No levels container available, please check the selector")}else i.error("No level selector container available, please check the selector")}beginExecute(){let e=this,t=this.ec.getComponent(WAfrStandardComponentKey.CommandsManagerComponent);t&&t.subscribeOnceToCmdState("DELWebOERLevelSelector","end",function(){e._setLevelDraggable(!0)}),super.beginExecute()}endExecute(){this._setLevelDraggable(!1),super.endExecute()}}}),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERCleanAllCmd",["DS/Logger/Logger","DS/DELWebOERCommonUtils/utils/TrackUtils"],function(e,t){"use strict";const n=e.getLogger("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERHomeCmd");function o(e){this.ec=e.executionContext}return o.prototype.beginExecute=function(){let e=this.ec.getComponent(WAfrStandardComponentKey.HandlerComponent);this.ec&&(e.hasHandler("DELWebOERClean")?e.executeHandler({id:"DELWebOERClean"}):n.log("DELWebOERClean Handler not found, please include DELWebOERSessionModelActions package in your app id card"),t.trackChanges({executionContext:this.ec,category:"ActionBarCommand",action:"RemoveAllObjects",label:"DELWebOERCleanAllCmd"})),this.endExecute()},o.prototype.endExecute=function(){this.destroy(),this.done()},o.prototype.destroy=function(){delete this.ec},o}),define("DS/DELWeb3DOpersReviewAppV2Commands/DELOERRightSidePanel",["DS/DEL3DViewer/commands/DELViewerRightSidePanel","DS/DELWebOERCommonUtils/utils/XSOManager","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/Selection/CSOManager"],function(e,t,n,o){"use strict";var i=e.extend({init:function(e){this._csoToken=[],this._parent(e)},getXSO:function(){return t.getCSO()},getID:function(e){return e.pathElement?this._parent(e):e.getReferenceId()},getRelationID:function(e){return e.pathElement?this._parent(e):e.getInstanceId()},getServiceId:function(e){return e.pathElement?this._parent(e):"3DSpace"},destroy:function(){this._parent()}});function r(e){this.ec=e.executionContext,this._modelEventToken=[];let t=this.ec.getComponent(WAfrStandardComponentKey.ModelEvents),o=this;this.cmd=new i({context:"DELWebOER",ID:"DELWebOERRightSidePanel",arguments:[{ID:"PropertiesReadOnly",Value:"true"}],isEnabled:!0}),n.trackChanges({executionContext:this.ec,category:"ActionBarCommand",action:"ShowsInformationPanel",label:"DELWebOERRightSidePanelCmd"}),t&&(this._modelEventToken.push(t.subscribe({event:"openRightSidePanel"},function(){o.cmd.setState(!0)})),this._modelEventToken.push(t.subscribe({event:"closeRightSidePanel"},function(){o.cmd.setState(!1)}))),this.cmd.onStateChange(function(){!1===o.cmd.getState()&&o.ec.getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:"DELWebOERRightSidePanelCmd",state:!1})})}return r.prototype.destroy=function(){let e=this.ec.getComponent(WAfrStandardComponentKey.ModelEvents);this._modelEventToken.forEach(t=>{e.unsubscribe(t)}),this._modelEventToken=[],this._parent(),delete this.ec,delete this.cmd},r}),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERRightSidePanelCmd",[],function(){"use strict";let e=function(e,t){if(e&&t){let n=e.getComponent(WAfrStandardComponentKey.ModelEvents);n&&n.publish({event:t,data:{origin:"DELWebOERRightSidePanelCmd"}})}};return{show:function(t,n){let o=n.executionContext;e(o,"openRightSidePanel"),t()},hide:function(t,n){let o=n.executionContext;e(o,"closeRightSidePanel"),t()}}}),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERToggleDataGridViewCmd",[],function(){"use strict";let e=function(e,t){if(e&&UWA.is(t,"boolean")){let n=e.getComponent(WAfrStandardComponentKey.ModelEvents);n&&n.publish({event:"onToggleDataGridview",data:{data:{state:t},origin:"ToggleDataGridViewCmd"}})}};return{show:function(t,n){let o=n.executionContext;e(o,!0),t()},hide:function(t,n){let o=n.executionContext;e(o,!1),t()}}});