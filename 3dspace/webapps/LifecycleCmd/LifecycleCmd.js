define("DS/LifecycleCmd/ImageUtil",["DS/LifecycleServices/LifecycleServicesSettings"],function(e){"use strict";function t(){this.data={}}return t.prototype={getTypeIconUrl:function(t){if("function"==typeof t.getIconUrl)return t.getIconUrl();var n="",i="",r=t.options||t.object&&t.object.options;return r&&r.icons&&null!=(i=r.icons[0])&&(i.hasOwnProperty("iconPath")?n=i.iconPath.substr(4,i.iconPath.length-5):"string"==typeof i&&(i.startsWith("/")?n=e.getServerURL()+i:i.startsWith("https")&&(n=i))),n},getTypeIconUrlFromExpandedAssembly:function(t){var n="",i=null;return null!=t&&t.hasOwnProperty("options")||t.hasOwnProperty("object")&&t.object.hasOwnProperty("options")?i=t.options||t.object.options:null!=t&&t.hasOwnProperty("attributes")&&(i=t.attributes),i&&i.icons?null!=(n=i.icons[0])&&n.startsWith("/")&&(n=e.getServerURL()+n):i&&i.type_icon_url&&null!=(n=i.type_icon_url)&&n.startsWith("/")&&(n=e.getServerURL()+n),n},createElement:function(e,t){var n=document.createElement("img");return n.src=e,t&&t.appendChild(n),n}},new t}),define("DS/LifecycleCmd/DocumentUtils",["UWA/Class"],function(e){"use strict";return e.extend({init:function(e){this.data=e},download:function(){this.execute("download")},preview:function(e){this.execute("preview")},execute:function(e){var t=this;require(["DS/DocumentManagement/DocumentManagement","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/CoreEvents/ModelEvents","DS/DocumentCommands/DocumentCommandsV2","DS/DocumentCommands/Constants"],function(n,i,r,o,s){n.getDocuments(t.data.docIDsArray,{tenant:t.data.platformUrls.platformId,tenantUrl:t.data.platformUrls["3DSpace"],additionalURLParams:"$fields=isDocumentType",onComplete:function(n){if(n.success){var i=new r;i.subscribe({event:"docv2-show-notification"},function(e){var n={title:e.title,subtitle:e.subtitle,message:e.message,className:e.lable};t.data.displayNotif&&t.data.displayNotif(n)});var c={fetchSecurityContext:function(){return t.data.securityContext},getSelectedNodes:function(){return n.data},getDocumentFromNodeModel:function(e){return e},platformUrls:t.data.platformUrls,isFromContextMenu:!0,events:i},a=new o(c).commands;"download"===e?a[s.DOWNLOAD].execute():"preview"===e&&a[s.PREVIEW].execute()}},onFailure:function(e){console.log(e)}})})}})}),define("DS/LifecycleCmd/CommandFactory",["UWA/Class"],function(e){"use strict";return e.singleton({create:async function(e,t){return async function(e,t){return new Promise(n=>{let i={context:t,cmdInstance:null,isAvailable:async function(){return new Promise(e=>{e(!0)})},start:async function(){return new Promise(async(e,t)=>{let n=await this._createCmd();n?(n.addEvent("ExecCompleted",()=>{e({})}),n.execute()):t("Could not create command!")})},_createCmd:async function(){return new Promise(e=>{this.cmdInstance?e(this.cmdInstance):require([this.cmd],t=>{e(new t(this.context))})})}};"delete"==e?(i.cmd="DS/LifecycleCmd/DeleteCmd",n(i)):"duplicate"==e?(i.cmd="DS/LifecycleCmd/DuplicateCmd",n(i)):"iterations"==e?(i.cmd="DS/LifecycleCmd/IterationsCmd",n(i)):"maturity"==e?(i.cmd="DS/LifecycleCmd/MaturityCmd",n(i)):"branch"==e?(i.cmd="DS/LifecycleCmd/NewBranchCmd",n(i)):"recycle"==e?(i.cmd="DS/LifecycleCmd/RecycleBinCmd",n(i)):"restore"==e?(i.cmd="DS/LifecycleCmd/RestoreDeletedItemsCmd",n(i)):"revise"==e?(i.cmd="DS/LifecycleCmd/ReviseCmd",n(i)):"revisefrom"==e?(i.cmd="DS/LifecycleCmd/ReviseFromCmd",n(i)):n(null)})}(e,t)}})}),define("DS/LifecycleCmd/Dictionary",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this.data={}},add:function(e,t){this.data[e]=t},find:function(e){return this.data[e]},remove:function(e){delete this.data[e]},contains:function(e){return null!=this.data[e]},count:function(){var e=0;return Object.keys(this.data).map(function(t){++e}),e},clear:function(){this.data={}},each:function(e){var t=this.data;Object.keys(this.data).map(function(n){e(n,t[n])})}})}),define("DS/LifecycleCmd/MessageMediator",["UWA/Class","UWA/Controls/Abstract"],function(e,t){"use strict";return e.singleton({init:function(){var e=t.extend({});this.mediator=new e},addEvent:function(e,t,n){this.mediator.addEvent(e,t,n)},removeEvent:function(e,t,n){this.mediator.removeEvent(e,t,n)},hasEvent:function(e){return this.mediator.hasEvent(e)},dispatchEvent:function(e,t){this.mediator.dispatchEvent(e,t)},clear:function(){var e=t.extend({});this.mediator=new e}})}),define("DS/LifecycleCmd/Queue",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this.data=[]},enqueue:function(e){this.data.push(e)},dequeue:function(){return this.data.shift()},front:function(){return this.data[0]},back:function(){return this.data[this.data.length-1]},length:function(){return this.data.length},clear:function(){this.data=[]}})}),define("DS/LifecycleCmd/TargetFolderUtil",["UWA/Class","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/LifecycleServices"],function(e,t,n){return new(e.extend({getTargetFolderId:function(e){if(this._isTargetFolderEnforced()||this._isContextFolderEditor(e)){try{t.setCurrentFolder(e.getCurrentFolder())}catch(e){}return t.getCurrentFolderID()}return null},_isTargetFolderEnforced:function(){return t.getEnforceFolderLinkSetting()},_isContextFolderEditor:function(e){if(!e)return!1;var t=!1,i=n.getCurrentAppName(e);return console.log(i),null!=i&&i.indexOf("ENOFOL")>=0&&(t=!0),t}}))}),define("DS/LifecycleCmd/Set",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this._values={},this._size=0,this._hashFn=JSON.stringify},add:function(e){this.contains(e)||(this._values[this._hashFn(e)]=e,this._size++)},remove:function(e){this.contains(e)&&(delete this._values[this._hashFn(e)],this._size--)},contains:function(e){return void 0!==this._values[this._hashFn(e)]},size:function(){return this._size},each:function(e,t){for(var n in this._values)e.call(t,this._values[n])}})}),define("DS/LifecycleCmd/PatchDisplayNotification",["DS/LifecycleServices/LifecycleServices"],function(e){"use strict";function t(){}return t.prototype={createFunction:function(t){var n=e.getCurrentAppName(t);"DELMFN_AP"===n?t.displayNotification||(t.displayNotification=function(e){"function"==typeof t.getAlertManager&&t.getAlertManager().add({className:e.eventID,message:e.msg})}):"DELMGA_AP"===n&&!t.displayNotification&&require.defined("DS/DELWebMfgAssetsDefUIServices/UIUtils")&&(t.displayNotification=function(e){var t=require("DS/DELWebMfgAssetsDefUIServices/UIUtils");t&&t.AlertManager&&t.AlertManager.add({className:e.eventID,message:e.msg})})}},new t}),define("DS/LifecycleCmd/Stack",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this.data=[],this.top=0},push:function(e){this.data[this.top++]=e},pop:function(){if(this.top<=0)throw new Error("Stack empty!");return this.data[--this.top]},peek:function(){if(this.top<=0)throw new Error("Stack empty!");return this.data[this.top-1]},length:function(){return this.top},clear:function(){this.data=[],this.top=0}})}),define("DS/LifecycleCmd/LifecycleCmd",[],function(){return{}}),define("DS/LifecycleCmd/CommandMediator",["UWA/Class","UWA/Controls/Abstract"],function(e,t){"use strict";return e.singleton({init:function(){var e=t.extend({});this.mediator=new e},addEvent:function(e,t,n){this.mediator.addEvent(e,t,n)},removeEvent:function(e,t,n){this.mediator.removeEvent(e,t,n)},hasEvent:function(e){return this.mediator.hasEvent(e)},dispatchEvent:function(e,t){this.mediator.dispatchEvent(e,t)},clear:function(){var e=t.extend({});this.mediator=new e}})}),define("DS/LifecycleCmd/CommandAPI",["DS/ApplicationFrame/CommandsManager","DS/WebappsUtils/WebappsUtils","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls"],function(e,t,n){var i={Properties:{fw:void 0,icon:"I_CATSSEditorDisplayInformation.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-info-open-in-a-new-window",family:WUXManagedFontIcons.Font3DS},title:n.information},Information:{fw:void 0,icon:"I_CATSSEditorDisplayInformation.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-info-open-in-a-new-window",family:WUXManagedFontIcons.Font3DS},title:n.information},DeleteHdr:{fw:"LifecycleCmd",icon:"I_StandardDelete_32.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash",family:WUXManagedFontIcons.Font3DS},title:n.delete_},MaturityHdr:{fw:"LifecycleCmd",icon:"I_LifeCycleManagement32x.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collaborative-lifecycle-management",family:WUXManagedFontIcons.Font3DS},title:n.maturity},RevisionHdr:{fw:"LifecycleCmd",icon:"I_Revise.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-line-add",family:WUXManagedFontIcons.Font3DS},title:n.newRevision},NewBranchHdr:{fw:"LifecycleCmd",icon:"I_NewBranch.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch-add",family:WUXManagedFontIcons.Font3DS},title:n.newBranch},ReviseFromHdr:{fw:"LifecycleCmd",icon:"I_NewRevisionFrom32.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch-add wux-ui-3ds-flip-vertical",family:WUXManagedFontIcons.Font3DS},title:n.newRevisionFrom},MergeHdr:{fw:"LifecycleCmd",icon:"I_ReviseFrom.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch wux-ui-3ds-flip-vertical",family:WUXManagedFontIcons.Font3DS},title:n.merge},DuplicateHdr:{fw:"LifecycleCmd",icon:"I_Duplicate.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",family:WUXManagedFontIcons.Font3DS},title:n.duplicate},DownloadHdr:{fw:"LifecycleCmd",icon:"I_DownloadDocument.png",fonticon:{content:"fonticon fonticon-2x fonticon-download",family:WUXManagedFontIcons.Font3DS},title:n.download},PreviewHdr:{fw:"LifecycleCmd",icon:"I_PreviewDocument.png",fonticon:{content:"fonticon fonticon-2x fonticon-eye",family:WUXManagedFontIcons.Font3DS},title:n.preview}};function r(e,n){return t.getWebappsBaseUrl()+(n||"RevisionFamily")+"/assets/icons/32/"+e}return{checkAvailability:function(t,n,r,o){if("Properties"===t)return!0;var s,c=!1;for(s in i)if(s===t){c=!0;break}return c&&(c=(s=e.getCommand(t,r))&&s.isTypesSupported([n[0].type])&&s.checkCIDAndSeeIfAllowed(n)),c},runCommand:function(t,n,i,r){if("Properties"===t)!function(e,t){var n={_context:t,_selection:[{getID:function(){return e}}],getSecurityContext:function(){return null!=this._context&&"function"==typeof this._context.getSecurityContext?this._context.getSecurityContext():this._context},getSelectedNodes:function(){return this._selection},displayNotification:function(){}};require(["DS/LifecycleControls/EditPropDialog"],function(e){(new e).launchProperties(n)})}(n[0].physicalid,r);else{var o=e.getCommand(t,i);o&&("function"==typeof r.getSecurityContext&&(o.context.getSecurityContext=r.getSecurityContext),o.execute(n))}},getFontIcon:function(e){return i[e].fonticon},getIcon:function(e){return"url("+r(i[e].icon,i[e].fw)+")"},getIconPath:function(e){return r(i[e].icon,i[e].fw)},getTitle:function(e){return i[e].title},commands:Object.keys(i),getCallbackFunction:function(e,t,n,i){var r=this,o=e,s=t,c=n,a=i;return function(){r.runCommand(o,s,c,a)}}}}),define("DS/LifecycleCmd/AssemblySelectionUtil",["UWA/Class","DS/LifecycleCmd/ImageUtil"],function(e,t){return e.extend({_context:null,getSelection:function(e,t){var n=[];if(!e)return n;this._context=e;var i=t,r=null;if(i)r=this._createSelObj4Node.bind(this);else{if("function"!=typeof e.getSelectedNodes)return n;if(!(i=e.getSelectedNodes()))return n;r=this._createSelObj.bind(this)}return i.forEach(function(e){var t=r(e);n.push(t)},this),n},_createSelObj:function(e){var n=this._getRevision(e),i=this._getType(e),r=void 0,o=void 0,s=void 0;return e.getAttribute&&(r=e.getAttribute("ds6w:type"),o=e.getAttribute("ds6w:status"),s=e.getAttribute("ds6w:cadMaster")),null==r&&(r=i),null==o&&e.hasOwnProperty("object")&&e.object&&(o=e.object.current),{physicalid:e.getID(),name:e.getLabel(),displayName:this._getDisplayName(e,n),type:i,typeDisplayName:r,current:o,revision:n,tenant:this._getTenant(e),cadMaster:s,imageUrl:t.getTypeIconUrl(e)}},_createSelObj4Node:function(e){var n=e.Title;return e.revision&&(n+=" "+e.revision),{physicalid:e.id||e.nodeID||e.physicalid,name:e.Title,displayName:n,type:e.type,revision:e.revision,tenant:this._getTenant(e),cadMaster:e.cadMaster,imageUrl:t.getTypeIconUrlFromExpandedAssembly(e)}},_getType:function(e){var t=null;try{void 0===(t=e.options.type)&&(t=e.options.grid["ds6w:type"]),void 0===t&&(t=e.options.grid["ds6wg:type"])}catch(n){e.object&&e.object.type?t=e.object.type:e.type&&(t=e.type)}return null==t&&null!=e.getType&&(t=e.getType()),t},_getRevision:function(e){var t;try{t=e.object.revision}catch(n){void 0===(t=e.options.grid["ds6wg:revision"])&&(t=e.options.grid["ds6w:revision"])}return null==t&&(t=""),t},_getDisplayName:function(e,t){var n;return"function"==typeof e.getDisplayName?n=e.getDisplayName():(n=e.options.display?e.options.display:e.getLabel(),""!==t&&(n=n+" "+t)),n},_getTenant:function(e){var t=null;try{t=e.getTenant?e.getTenant():widget.getValue("x3dPlatformId")}catch(e){}return t}})}),define("DS/LifecycleCmd/SelectionUtil",["UWA/Class","DS/LifecycleCmd/ImageUtil","DS/LifecycleServices/LifecycleServices","UWA/Promise","DS/LifecycleServices/LifecycleServicesSettings","DS/WAFData/WAFData"],function(e,t,n,i,r,o){var s=void 0,c=void 0;return e.extend({_context:null,getSelection:function(e,t){var n=[];if(!e)return n;this._context=e;var i=t,r=null;if(i)r=this._createSelObj4Node.bind(this);else{if("function"!=typeof e.getSelectedNodes)return n;if(!(i=e.getSelectedNodes()))return n;r=this._createSelObj.bind(this)}return"function"==typeof i.forEach&&i.forEach(function(e){this._addToNode(e,this._context);var t=r(e);n.push(t)},this),n},getSelectionAsync:async function(e,t){var n=[];if(!e)return n;this._context=e;var i=t,r=null;if(i)r=this._createSelObj4NodeAsync.bind(this);else{if("function"!=typeof e.getSelectedNodes)return n;if(!(i=e.getSelectedNodes()))return n;r=this._createSelObjAsync.bind(this)}for await(const e of i){this._addToNode(e,this._context);var o=await r(e);n.push(o)}return n},getAppSelectionRootPids:function(e){var t=[],i=n.getCurrentAppName(e);if(["ENOPSTE_AP","ENOPSTR_AP","ENOFOL4_AP"].indexOf(i)>-1&&"function"==typeof e.getSelectedNodes){var r=e.getSelectedNodes(),o=new Map(r.map(e=>[e.getID(),e]));r.forEach(function(e){var n=e.getPath(),i=e.getID(),r=!1;n.every(function(e,n){var s=e.getID(),c=o.has(s);return s===i?(r||-1!==t.indexOf(s)||t.push(s),!1):(r=c,!0)})})}return t},getAppSelectionRootsPerIds:function(e){let t=new Map;if(e&&"function"==typeof e.getSelectedNodes){let n=e.getSelectedNodes(),i=function(e){if(!e)return!1;if("function"!=typeof e.getID)return!1;let t=!1;return n.forEach(n=>{"function"==typeof n.getID&&e.getID()==n.getID()&&(t=!0)}),t},r=function(e){if("function"!=typeof e.getID)return e;if("function"!=typeof e.getParent)return e;if(t.has(e.getID()))return t.get(e.getID());let n=e.getParent();if(!n||"function"!=typeof n.getID)return t.set(e.getID(),e),e;if(i(n)){let i=r(n);return t.set(e.getID(),i),i}return t.set(e.getID(),e),e};n.forEach(e=>r(e))}return t},_addToNode:function(e,t){var n={};if(t&&"objects"in t&&"objectsPID"in t){var i=t.objectsPID.indexOf(e.physicalid);if(i>=0){var r=t.objects[i];"options"in r&&(n=r.options)}}e.type;var o="";if("ds6w:status"in e?e.currentDisplayName=e["ds6w:status"]:"ds6w:status"in n&&(e.currentDisplayName=n["ds6w:status"]),"ds6w:type"in e?e.typeDisplayName=e["ds6w:type"]:"ds6w:type"in n&&(e.typeDisplayName=n["ds6w:type"]),!("icon"in e)&&"icons"in n){o=n.icons[0];e.icon=o}},_getAttValue:function(e,t){var n=void 0;return"function"==typeof e.getAttribute?void 0===(n=e.getAttribute(t))&&e.options&&e.options.grid&&(n=e.options.grid[t]):e.options&&e.options.grid?n=e.options.grid[t]:e.object&&e.object.options&&(n=e.object.options[t]),!n&&e.object&&(n=e.object[t]),!n&&e.hasOwnProperty(t)&&(n=e[t]),void 0===n?"":n},_createSelObj:function(e){var n=this._getRevision(e),i=this._getType(e),r=this._getServiceId(e),o=this._getAttValue(e,"ds6w:type"),s=this._getAttValue(e,"ds6w:status"),c=this._getAttValue(e,"ds6w:cadMaster"),a=this._getAttValue(e,"ds6w:reserved");"TRUE"==a?a=!0:"FALSE"!=a&&""!==a||(a=!1);var u=this._getAttValue(e,"ds6w:reservedBy");u||(u=this._getAttValue(e,"reservedby")),u&&!a&&(a=!0);var d=void 0,l=void 0,f=this._getAttValue(e,"ds6w:status-original");if(f){if(f.contains("."))l=(p=f.split("."))[0],d=p[1];else d=f,l=this._getAttValue(e,"ds6w:policy")}else{var p,m=this._getAttValue(e,"ds6w:status");if(m)if(m.contains("."))l=(p=m.split("."))[0],s=d=p[1];else(d=this._getAttValue(e,"current"))||(d=this._getAttValue(e,"current_nonNls")),(l=this._getAttValue(e,"ds6w:policy-original"))||(l=this._getAttValue(e,"ds6w:policy")),l||(l=this._getAttValue(e,"policy"));else(d=this._getAttValue(e,"current"))||(d=this._getAttValue(e,"status")),l=this._getAttValue(e,"policy")}return null==o&&(o=i),null==s&&e.hasOwnProperty("object")&&e.object&&(s=e.object.current),{physicalid:"function"==typeof e.getID?e.getID():"",name:"function"==typeof e.getLabel?e.getLabel():"",displayName:this._getDisplayName(e,n),type:i,serviceId:r,typeDisplayName:o,current:s,current_internal:d,revision:n,tenant:this._getTenant(e),imageUrl:t.getTypeIconUrl(e),cadMaster:c,locked:a,lockedBy:u,policy:l}},_createSelObj4Node:function(e){var t=e.displayName;e.revision&&(t+=" "+e.revision);var n=null;"icon"in e&&(n=e.icon);var i=e.type;"typeDisplayName"in e&&(i=e.typeDisplayName);var r=this._getAttValue(e,"currentDisplayName"),o=null;"serviceurl"in e&&(o=e.serviceurl);var s=this._getAttValue(e,"ds6w:reserved");"TRUE"==s?s=!0:"FALSE"!=s&&""!==s||(s=!1);var c=this._getAttValue(e,"ds6w:reservedBy");c||(c=this._getAttValue(e,"reservedby")),c&&!s&&(s=!0);var a=void 0,u=void 0,d=this._getAttValue(e,"ds6w:status-original");if(d){if(d.contains("."))u=(l=d.split("."))[0],a=l[1];else a=d,u=this._getAttValue(e,"ds6w:policy")}else{var l,f=this._getAttValue(e,"ds6w:status");if(f)if(f.contains("."))u=(l=f.split("."))[0],r=a=l[1];else a=this._getAttValue(e,"current"),(u=this._getAttValue(e,"ds6w:policy"))||(u=this._getAttValue(e,"policy"));else(a=this._getAttValue(e,"current"))||(a=this._getAttValue(e,"status")),u=this._getAttValue(e,"policy")}var p={physicalid:e.id||e.nodeID||e.physicalid||e.physicalId,objectId:e.id||e.nodeID||e.objectId,name:e.displayName,displayName:t,type:e.type,typeDisplayName:i,current:r,current_internal:a,serviceurl:o,revision:e.revision,tenant:this._getTenant(e),imageUrl:n,locked:s,lockedBy:c,policy:u};return"maturityTitle"in e&&(p.externalMaturityTitle=e.maturityTitle),p},_createSelObjAsync:async function(e){var n=this._getRevision(e),i=this._getType(e),r=this._getServiceId(e),o=this._getAttValue(e,"ds6w:type"),s=this._getAttValue(e,"ds6w:status"),c=this._getAttValue(e,"ds6w:cadMaster"),a=this._getAttValue(e,"ds6w:reserved");"TRUE"==a?a=!0:"FALSE"!=a&&""!==a||(a=!1);var u=this._getAttValue(e,"ds6w:reservedBy");u||(u=this._getAttValue(e,"reservedby")),u&&!a&&(a=!0);var d=void 0,l=void 0,f=this._getAttValue(e,"ds6w:status-original");if(f)if(f.contains(".")){var p=f.split(".");l=p[0],d=p[1]}else d=f,l=this._getAttValue(e,"ds6w:policy");else{var m=this._getAttValue(e,"ds6w:status");if(m)if(m.contains(".")){p=m.split(".");l=p[0],d=p[1],s=d}else(d=this._getAttValue(e,"current"))||(d=this._getAttValue(e,"current_nonNls")),(l=this._getAttValue(e,"ds6w:policy-original"))||(l=this._getAttValue(e,"ds6w:policy")),l||(l=this._getAttValue(e,"policy"));else(d=this._getAttValue(e,"current"))||(d=this._getAttValue(e,"status")),l=this._getAttValue(e,"policy")}if(null==o&&(o=i),null==s&&e.hasOwnProperty("object")&&e.object&&(s=e.object.current),!d||!l){console.log("INSUFFICIENT SELECTION INFO FROM APP:"+widget.data.appId);var y=[],h=void 0;h="function"==typeof e.getID?e.getID():e.id||e.nodeID||e.physicalid||e.physicalId,y.push(h),await this.getMissingPropForSelection(y).then(e=>{console.log(e),e.results&&e.results.length>=1?(d=e.results[0].current,l=e.results[0].policy,s=e.results[0].options["ds6w:status"],"TRUE"==(a=e.results[0].reserved)?a=!0:"FALSE"!=a&&""!==a||(a=!1),null==(u=e.results[0].reservedby)&&(u=""),console.log("current:"+d),console.log("policy:"+l),console.log("currentDisplayName:"+s),console.log("locked:"+a),console.log("lockedBy:"+u)):console.log("getMissingPropForSelection failed")})}return{physicalid:"function"==typeof e.getID?e.getID():"",name:"function"==typeof e.getLabel?e.getLabel():"",displayName:this._getDisplayName(e,n),type:i,serviceId:r,typeDisplayName:o,current:s,current_internal:d,revision:n,tenant:this._getTenant(e),imageUrl:t.getTypeIconUrl(e),cadMaster:c,locked:a,lockedBy:u,policy:l}},_createSelObj4NodeAsync:async function(e){var t=e.displayName;e.revision&&(t+=" "+e.revision);var n=null;"icon"in e&&(n=e.icon);var i=e.type;"typeDisplayName"in e&&(i=e.typeDisplayName);var r=this._getAttValue(e,"currentDisplayName"),o=null;"serviceurl"in e&&(o=e.serviceurl);var s=this._getAttValue(e,"ds6w:reserved");"TRUE"==s?s=!0:"FALSE"!=s&&""!==s||(s=!1);var c=this._getAttValue(e,"ds6w:reservedBy");c||(c=this._getAttValue(e,"reservedby")),c&&!s&&(s=!0);var a=void 0,u=void 0,d=this._getAttValue(e,"ds6w:status-original");if(d)if(d.contains(".")){var l=d.split(".");u=l[0],a=l[1]}else a=d,u=this._getAttValue(e,"ds6w:policy");else{var f=this._getAttValue(e,"ds6w:status");if(f)if(f.contains(".")){l=f.split(".");u=l[0],a=l[1],r=a}else a=this._getAttValue(e,"current"),(u=this._getAttValue(e,"ds6w:policy"))||(u=this._getAttValue(e,"policy"));else(a=this._getAttValue(e,"current"))||(a=this._getAttValue(e,"status")),u=this._getAttValue(e,"policy")}if(!a||!u){console.log("INSUFFICIENT SELECTION INFO FROM APP:"+widget.data.appId);var p=[];p.push(e.id||e.nodeID||e.physicalid||e.physicalId),await this.getMissingPropForSelection(p).then(e=>{console.log(e),e.results&&e.results.length>=1?(a=e.results[0].current,u=e.results[0].policy,r=e.results[0].options["ds6w:status"],"TRUE"==(s=e.results[0].reserved)?s=!0:"FALSE"!=s&&""!==s||(s=!1),null==(c=e.results[0].reservedby)&&(c=""),console.log("current:"+a),console.log("policy:"+u),console.log("currentDisplayName:"+r),console.log("locked:"+s),console.log("lockedBy:"+c)):console.log("getMissingPropForSelection failed")})}var m={physicalid:e.id||e.nodeID||e.physicalid||e.physicalId,objectId:e.id||e.nodeID||e.objectId,name:e.displayName,displayName:t,type:e.type,typeDisplayName:i,current:r,current_internal:a,serviceurl:o,revision:e.revision,tenant:this._getTenant(e),imageUrl:n,locked:s,lockedBy:c,policy:u};return"maturityTitle"in e&&(m.externalMaturityTitle=e.maturityTitle),m},_getType:function(e){var t=null;try{void 0===(t=e.options.type)&&(t=e.options.grid["ds6w:type"]),void 0===t&&(t=e.options.grid["ds6wg:type"])}catch(n){e.object&&e.object.type?t=e.object.type:e.type&&(t=e.type)}return null==t&&null!=e.getType&&(t=e.getType()),t||""},_getServiceId:function(e){var t;return e.object&&e.object.serviceId&&(t=e.object.serviceId),t||(e.options&&e.options.grid&&(t=e.options.grid.serviceId),t||("function"==typeof e.getServiceId&&(t=e.getServiceId()),t||("function"==typeof e.getAttribute&&(t=e.getAttribute("serviceId")),t||(t||(t="3DSpace"),t))))},_getRevision:function(e){var t;return"function"==typeof e.getAttribute?t=e.getAttribute("ds6wg:revision"):e.object&&e.object.revision?t=e.object.revision:e.options&&e.options.grid&&null==(t=e.options.grid["ds6wg:revision"])&&(t=e.options.grid["ds6w:revision"]),null==t&&(t=""),t},_getDisplayName:function(e,t){var n;return"function"==typeof e.getDisplayName?n=e.getDisplayName():"function"==typeof e.getLabel?n=e.getLabel():(e.options&&e.options.display&&(n=e.options.display),""!==t&&(n=n+" "+t)),n||""},_getTenant:function(e){var t=null;try{t=e.getTenant?e.getTenant():widget.getValue("x3dPlatformId")}catch(e){}return t},getMissingPropForSelection:function(e){var t={data:[{physicalid:e[0]}],attributes:["physicalid","current","policy","reserved","reservedby"]},n={method:"POST",serviceURI:"/resources/lifecycle/product/attributeList",data:JSON.stringify(t)};return this._returnPromise(n)},_returnPromise:function(e){return new i(function(t,i){r.app_initialization(function(){!function(e,t,i){function a(n){var c,a=r.getHeaders(encodeURIComponent(n));e.serviceURI.contains("http")&&VESettings._RDF_SETTINGS._DEBUG_MODE?(c=e.serviceURI,"GET"===e.method&&delete a["Content-Type"]):e.serviceURI.contains("search")?c=r.getPlatformWSUrl("3DSearch",s||r.getTenant(),e.serviceURI,null):(c=r.get3DSpaceWSUrl(s||r.getTenant(),e.serviceURI,null),a.SecurityContext=encodeURIComponent(n)),"GET"===e.method&&(c+=(c.indexOf("?")>=0?"&":"?")+"timestamp="+Date.now().toString()),o.authenticatedRequest(c,{method:e.method,headers:a,timeout:6e5,data:void 0===e.data?"":e.data,type:"json",onComplete:function(e){"failure"===e.status||!1===e.success||101==e.errorID?i(e):t(e)},onTimeout:function(e){i(e)},onFailure:function(e){i(e)}})}"string"==typeof c&&c.length?a(c):n.getSecurityContextPromise(s||r.getTenant()).then(function(e){a(e)}).catch(function(e){i(e)})}(e,t,i)})})}})}),define("DS/LifecycleCmd/CommandMgr",["UWA/Class","DS/LifecycleCmd/SelectionUtil","DS/LifecycleCmd/MessageMediator","DS/LifecycleCmd/CommandMediator","DS/LifecycleCmd/Dictionary","DS/LifecycleCmd/Queue","DS/LifecycleServices/Refresh","DS/LifecycleCmd/PatchDisplayNotification","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/Utils","DS/PlatformAPI/PlatformAPI"],function(e,t,n,i,r,o,s,c,a,u,d){"use strict";return e.singleton({_initialized:!1,currentLocation:null,init:function(){this._commands=new r,this._runningCommands=new r,this.selUtil=new t,this._UIUpdateQueue=new o,this._PSEContextWithDisabledEdit=!1,s.init()},registerCommand:function(e,t){this._commands.add(e.name,e),this._initContext(t)},executeCmd:function(e,t,i){this._runningCommands.add(e.name,e),this._updateCmdUI(i.context);var r=function(){"function"==typeof i.onCompletedCallback&&i.onCompletedCallback(),e.dispatchEvent("ExecCompleted")};try{s.setContext(i.context),n.dispatchEvent("LC_CmdMgr_preExecCmd",{cmd:e});var o=this;if(window.__karma__||"maturity_command"==e.name){var c=this.selUtil.getSelection(i.context,i.targetNodes);t.executeCmd(c,i,function(){o._postCmdExec(e,i.context),r()})}else this.selUtil.getSelectionAsync(i.context,i.targetNodes).then(n=>{t.executeCmd(n,i,function(){o._postCmdExec(e,i.context),r()})})}catch(t){this._handleError(t,i.context),this._postCmdExec(e,i.context),r()}},_initContext:function(e){this._initialized||(this._initialized=!0,e?(this._initCmdMgr(e),n.dispatchEvent("LC_CmdMgr_Init"),i.dispatchEvent("init")):this._initPADContextAsync())},_initCmdMgr:function(e){a.app_initialization(function(){}),a.setFolderCommunicationChannel(e),c.createFunction(e);var t=function(t){var n=t||e;if(n&&"function"==typeof n.getSelectedNodes){var i=n.getSelectedNodes();this._updateUIState(i)}};i.addEvent("update",t,this),n.addEvent("LC_CmdMgr_UpdateUI",t,this),this._onSelChangePAD=u.debounce(this._onSelChangePADImpl.bind(this),100),setTimeout(function(){this._updateUIState([])}.bind(this))},_initPADContextAsync:function(){var e=this;require(["DS/PADUtils/PADContext"],function(t){var r=t.get();e._initCmdMgr(r),r.getPADTreeDocument().getXSO().onPostAdd(function(t){e._onSelChangePAD(r)}),r.getPADTreeDocument().getXSO().onPostRemove(function(t){e._onSelChangePAD(r)}),r.getPADTreeDocument().getXSO().onEmpty(function(t){e._onSelChangePAD(r)}),d.subscribe("FolderEditor.CurrentFolder",function(t){e._onCurrentFolderChange(r,t)}.bind(e)),r.addEvent("editModeModified",function(t){var n=!t;n!==e._PSEContextWithDisabledEdit&&(e._PSEContextWithDisabledEdit=n,e._onSelChangePAD(r))}),e._setCurrentLocation(r),e._PSEContextWithDisabledEdit="function"==typeof r.getEditMode&&!0!==r.getEditMode(),n.dispatchEvent("LC_CmdMgr_Init"),i.dispatchEvent("init")})},_getFolderSelectionObject:function(e){var t=this.selUtil.getSelection(e);return 1===t.length?t[0]:null},_inspectFolderLocation:function(e){var t={isTrashFolder:!1,isFavorite:!1},n="function"==typeof e.getCurrentFolder?e.getCurrentFolder():null,i=JSON.parse(n);return i&&(t.isTrashFolder=!!i.IsInDeletedItems&&i.IsInDeletedItems,t.isFavorite=!!i.IsFavorite&&i.IsFavorite),t},_setCurrentLocation:function(e){var t=this._inspectFolderLocation(e);this.currentLocation=this._getFolderSelectionObject(e),this.currentLocation&&(this.currentLocation.IsInDeletedItems=t.isTrashFolder,this.currentLocation.IsLink=t.isFavorite)},_onSelChangePADImpl:function(e){var t=e.getPADTreeDocument().getXSO().get();this._UIUpdateQueue.enqueue(t),setTimeout(function(){this._queuedUpdateUIState()}.bind(this))},_onCurrentFolderChange:function(e,t){this._setCurrentLocation(e),this._UIUpdateQueue.enqueue([]),setTimeout(function(){this._queuedUpdateUIState(),n.dispatchEvent("LC_CmdMgr_CurrentFolderChanged",t)}.bind(this))},_postCmdExec:function(e,t){this._runningCommands.remove(e.name,e),this._updateCmdUI(t),n.dispatchEvent("LC_CmdMgr_postExecCmd",{cmd:e})},_queuedUpdateUIState:function(){if(0!==this._UIUpdateQueue.length()){var e=this._UIUpdateQueue.dequeue();this._updateUIState(e)}},_updateUIState:function(e){var t="none";this.currentLocation&&(this.currentLocation.IsInDeletedItems?t="trash":this.currentLocation.type&&this._selectionContainsFolder([this.currentLocation.type])&&(t="standard"));var n=!1;0===e.length&&"standard"===t&&(e=[this.currentLocation],this.currentLocation.IsLink&&(n=!0));var i=e.length,r=this.getSelTypeArray(e),o=this._selectionContainsFolder(r),s=this._PSEContextWithDisabledEdit,c=function(c){return c.isSelCountSupported(i)&&(!1===o||c.isFolderSelSupported())&&c.isFolderContextSupported(t)&&c.shouldEnable()&&c.isTypesSupported(r)&&c.checkCIDAndSeeIfAllowed(e)&&(!1===s||c.isEnabledWhenPSEEditModeDisabled())&&!(n&&!1===c.isLinkSupported())&&c.remainEnabled()};this._commands.each(function(t,n){if(!n.options||!1!==n.options.checkByCommand){var i=n.getAsyncUpdate(e),r=!i&&c(n);r?n.enable():n.disable(),i&&i.then(function(){(r=c(n))?n.enable():n.disable()})}})},getSelTypeArray:function(e){var t=[];return e.forEach(function(e){var n=e.type?e.type:this.selUtil._getType(e);-1===t.indexOf(n)&&t.push(n)},this),t},_selectionContainsFolder:function(e){var t=!1;return e.every(function(e){return!(["Workspace","Workspace Vault","Personal Workspace","Folder","Personal Folder","RootFolder"].indexOf(e)>=0)||(t=!0,!1)},this),t},_updateCmdUI:function(e){var t=!1;if(this._runningCommands.each(function(e,n){!1===n.options.isAsynchronous&&(t=!0)}),t)this._commands.each(function(e,t){t.disable(),t.commandRunningNotify(!0)});else{var n=this.selUtil.getSelection(e);this._updateUIState(n),this._commands.each(function(e,t){t.options&&!1===t.options.checkByCommand&&t.enable(),t.commandRunningNotify(!1)})}},_handleError:function(e,t){if(console.log(e),t&&"function"==typeof t.displayNotification){var n=e;e.hasOwnProperty("message")&&(n=e.message);var i={eventID:"error",msg:n};t.displayNotification(i)}}})}),define("DS/LifecycleCmd/CommandBase",["UWA/Controls/Abstract","DS/LifecycleCmd/CommandMgr","DS/LifecycleCmd/TargetFolderUtil","DS/ApplicationFrame/Command"],function(e,t,n,i){"use strict";return i.extend({name:"",context:null,_shouldEnable:!0,init:function(n,i){this.name=i,null===(n=n||{ID:"dummyID",context:{}}).context?this._setPADContextAsync():this.context=n.context,this._parent(n,{mode:"exclusive",isAsynchronous:!1}),t.registerCommand(this,n.context);var r=e.extend({});this.mediator=new r},beginExecute:function(){},execute:function(){},endExecute:function(){},executeCmd:function(e,i,r){var o=null;o="function"==typeof this.getTargetFolderId?this.getTargetFolderId(this.context):n.getTargetFolderId(this.context),i&&"function"!=typeof i.forEach&&(i=[i]),t.executeCmd(this,e,{context:this.context,targetFolderId:o,name:this.name,onCompletedCallback:r,targetNodes:i})},isSelCountSupported:function(e){return!1},isFolderSelSupported:function(){return!1},isTypesSupported:function(e){return!0},shouldEnable:function(){return this._shouldEnable},setShouldEnable:function(e){this._shouldEnable=e},checkCIDAndSeeIfAllowed:function(e){var t=!0,n=e.length;if(n>0)if("function"==typeof e[0].getID){for(var i=0;i<n;i++)if(0===e[i].getID().indexOf("cid:")){t=!1;break}}else if(e[0].physicalid)for(i=0;i<n;i++)if(0===e[i].physicalid.indexOf("cid:")){t=!1;break}return t},isFolderContextSupported:function(e){return"trash"!==e},isEnabledWhenPSEEditModeDisabled:function(){return!1},isLinkSupported:function(){return!0},getAsyncUpdate:function(e){return null},_setPADContextAsync:function(){var e=this;require(["DS/PADUtils/PADContext"],function(t){e.context=t.get()})},remainEnabled:function(){return!0},commandRunningNotify:function(e){},addEvent:function(e,t){this.mediator.addEvent(e,t)},dispatchEvent:function(e){this.mediator.dispatchEvent(e)}})}),define("DS/LifecycleCmd/TilesLayoutCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"tileslayout_command")},execute:function(e){if(null!==this._ctx&&void 0!==this._ctx){this.context.tilesLayout()}},isSelCountSupported:function(e){return!0},isFolderSelSupported:function(){return!0},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/RestoreDeletedItemsCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"restore_deleteditems_command")},execute:function(){var e=this;require(["DS/DeleteWidget/DeleteWidget"],function(t){e.executeCmd(new t("restore"))})},isSelCountSupported:function(e){return 1===e},isTypesSupported:function(e){var t=!0;return e.every(function(e){return!(["CATIA Embedded Component","CATAnalysisResults","CATAnalysisComputations"].indexOf(e)>=0)||(t=!1,!1)},this),t},isFolderContextSupported:function(e){return"trash"===e}})}),define("DS/LifecycleCmd/DeleteDeletedItemsCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/LifecycleServices"],function(e,t,n){"use strict";return e.extend({init:function(e){this._parent(e,"delete_deleteditems_command")},execute:function(){var e=this;require(["DS/DeleteWidget/DeleteWidget"],function(t){e.executeCmd(new t("destroy"))})},isSelCountSupported:function(e){return 1===e},isTypesSupported:function(e){var t=!0;return e.every(function(e){return!(["CATIA Embedded Component","CATAnalysisResults","CATAnalysisComputations"].indexOf(e)>=0)||(t=!1,!1)},this),t},isFolderContextSupported:function(e){return!0}})}),define("DS/LifecycleCmd/ReviseFromCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleCmd/CommandMgr","DS/LifecycleCmd/CommandAPI","DS/LifecycleServices/DictionaryServices","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/Utils","DS/LifecycleServices/WebReq"],function(e,t,n,i,r,o,s,c){"use strict";return e.extend({init:function(e){this._parent(e,"reviseFrom_command"),this._useMerge=!1,this._useMergeNRF=!1,this._setupMergeUsageTypes()},_setupMergeUsageTypes:function(){var e=this;e.mergeTypeArray=e.mergeTypeArray.concat(e.mergeNRFTypeArray),this._checkUrlParamForMergeTypes(),e.NRFTypeArray=e.NRFTypeArray.filter(t=>-1===e.mergeTypeArray.indexOf(t))},_checkUrlParamForMergeTypes:function(){var e=s.getURLParamValue("mergeTypes");if(e){var t=e.split(",");this.mergeTypeArray=this.mergeTypeArray.concat(t)}},NRFTypeArray:["VPMReference"],mergeTypeArray:[],mergeNRFTypeArray:["RFLPLMFunctionalReference","RFLVPMLogicalReference","SoftwareLogicalItem"],_checkSelectionForMergeUsage:function(e){var n=this,r=new UWA.Promise(function(e,t){e()}),o=t.selUtil.getSelection(this.context,e),s=t.getSelTypeArray(o);if(s&&Array.isArray(s)&&s.length>0){var c=s[0];c&&(r=new UWA.Class.Promise(function(e,t){i.getIsKindOfPromise(o[0].tenant,n.mergeTypeArray,c).then(function(t){n._useMerge=!n._isNRFDerivedType(c)&&n._isMergeDerivedType(c),n._useMergeNRF=n._useMerge&&n._isMergeNRFDerivedType(c),e(t)})}))}return r},execute:function(e){var t=this;this._checkSelectionForMergeUsage(e).then(function(){if(t._useMerge){require(["DS/CompareCmd/CompareCmd"],function(i){var o={ID:t._useMergeNRF?"CompareNewRevFromHdr":"CompareMergeHdr",runOptions:{widgetTitle:t._useMergeNRF?n.getTitle("ReviseFromHdr"):n.getTitle("MergeHdr")}};if(e){var s=r._getSecurityContextFromContext(t.context);e.forEach(function(e){e.objIDType="modelID",e.objType=e.type,e.contextId=s}),o.disregardSelectedNodes=!0,o.CompareIds=e}t.mergeCmd=new i(o),t.mergeCmd.context=t.context,t.mergeCmd.begin()})}else require(["DS/ReviseFromWidget/ReviseFromWidget"],function(n){t.executeCmd(new n,e)})})},isSelCountSupported:function(e){return this._useMerge?1===e||2===e:1===e},_isNRFType:function(e){return this.NRFTypeArray.some(function(t){return t===e})},_isMergeType:function(e){return this.mergeTypeArray.some(function(t){return t===e})},_isMergeNRFType:function(e){return this.mergeNRFTypeArray.some(function(t){return t===e})},_isNRFDerivedType:function(e){return this._isNRFType(e)||i.isKindOfFromCache(this.NRFTypeArray,e)},_isMergeDerivedType:function(e){return this._isMergeType(e)||i.isKindOfFromCache(this.mergeTypeArray,e)},_isMergeNRFDerivedType:function(e){return this._isMergeNRFType(e)||i.isKindOfFromCache(this.mergeNRFTypeArray,e)},isTypesSupported:function(e){var t=this;return e.every(function(e){return t._isNRFType(e)||i.isKindOfFromCache(t.NRFTypeArray,e)?(t._useMerge=!1,!0):!!t._isMergeDerivedType(e)&&(t._useMerge=!0,!0)})},getAsyncUpdate:function(e){var n=this,r=t.getSelTypeArray(e);if(r.every(function(e){return!!n._isNRFType(e)||(!!n._isMergeType(e)||i.isTypeInCache(e))}))return null;var o=[];r.forEach(function(t){o.push(i.getIsKindOfPromise(e[0].tenant,n.NRFTypeArray,t))},this);return UWA.Class.Promise.all(o).then(function(e){return e.every(function(e){return e},this)})}})}),define("DS/LifecycleCmd/MergeCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleCmd/CommandMgr","DS/LifecycleCmd/CommandAPI","DS/LifecycleServices/DictionaryServices","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/Utils","DS/LifecycleServices/WebReq"],function(e,t,n,i,r,o,s,c){"use strict";return e.extend({init:function(e){this._parent(e,"merge_command"),this._setupMergeUsageTypes()},_setupMergeUsageTypes:function(){var e=this;this._checkUrlParamForMergeTypes(),this._getMergeUsageTypesFromExpression().then(function(t){e.mergeTypeArray=e.mergeTypeArray.concat(t)})},_getMergeUsageTypesFromExpression:function(){var e=this,t="OnPremise";return window&&window.widget&&window.widget.getValue("x3dPlatformId")&&(t=window.widget.getValue("x3dPlatformId")),new UWA.Promise(function(n,i){o.app_initialization(function(){r.getSecurityContextPromise(t,e.context).then(function(e){c.get("/resources/lifecycle/util/getExpression",{tenant:t,securityContext:e,params:{expression:"LifecycleMergeEnabledTypes"}}).then(function(e){if(e&&e.result){var t=e.result.split(",");n(t)}}).catch(e=>{})}).catch(e=>{})})})},_checkUrlParamForMergeTypes:function(){var e=s.getURLParamValue("mergeTypes");if(e){var t=e.split(",");this.mergeTypeArray=this.mergeTypeArray.concat(t)}},mergeTypeArray:["VPMReference","SemiconductorLogicalItem"],execute:function(e){var t=this;require(["DS/CompareCmd/CompareCmd"],function(i){var o={ID:"CompareMergeHdr",runOptions:{widgetTitle:n.getTitle("MergeHdr")}};if(e){var s=r._getSecurityContextFromContext(t.context);e.forEach(function(e){e.objIDType="modelID",e.objType=e.type,e.contextId=s}),o.disregardSelectedNodes=!0,o.CompareIds=e}t.mergeCmd=new i(o),t.mergeCmd.context=t.context,t.mergeCmd.begin()})},isSelCountSupported:function(e){return 1===e||2===e},_isMergeType:function(e){return this.mergeTypeArray.some(function(t){return t===e})},_isMergeDerivedType:function(e){return this._isMergeType(e)||i.isKindOfFromCache(this.mergeTypeArray,e)},isTypesSupported:function(e){var t=this;return e.every(function(e){return!!t._isMergeDerivedType(e)})},getAsyncUpdate:function(e){var n=this,r=t.getSelTypeArray(e);if(r.every(function(e){return!!n._isMergeType(e)||i.isTypeInCache(e)}))return null;var o=[];r.forEach(function(t){o.push(i.getIsKindOfPromise(e[0].tenant,n.mergeTypeArray,t))},this);return UWA.Class.Promise.all(o).then(function(e){return e.every(function(e){return e},this)})}})}),define("DS/LifecycleCmd/NewBranchCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleCmd/CommandMgr","DS/LifecycleServices/DictionaryServices"],function(e,t,n){"use strict";return e.extend({init:function(e){this._parent(e,"newbranch_command")},execute:function(e){var t=this;require(["DS/NewBranchWidget/NewBranchWidget"],function(n){t.executeCmd(new n,e)})},isSelCountSupported:function(e){return e>=1},listOfTypesToBlock:["XCADModelRepReference"],_isBlockedType:function(e){return this.listOfTypesToBlock.some(function(t){return t===e})},isTypesSupported:function(e){var t=this;return!e.some(function(e){return!(e&&!t._isBlockedType(e))||n.isKindOfFromCache(t.listOfTypesToBlock,e)})},checkCIDAndSeeIfAllowed:function(e){return!0},getAsyncUpdate:function(e){var i=this,r=t.getSelTypeArray(e);if(r.every(function(e){return!!i._isBlockedType(e)||n.isTypeInCache(e)}))return null;var o=[];r.forEach(function(t){o.push(n.getIsKindOfPromise(e[0].tenant,i.listOfTypesToBlock,t))},this);return UWA.Class.Promise.all(o).then(function(e){return!e.some(function(e){return e},this)})}})}),define("DS/LifecycleCmd/OSLCConsumerCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"oslc_command")},setup:function(e){this.oslcConsumerOptions=e},execute:function(){var e=this;require(["DS/OSLCConsumer/OSLCConsumer"],function(t){e.executeCmd(new t(e.oslcConsumerOptions))})},isSelCountSupported:function(e){return 1===e},isFolderSelSupported:function(){return!1}})}),define("DS/LifecycleCmd/DuplicateCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"duplicate_command")},execute:function(e){var t=this;require(["DS/DuplicateWidget/DuplicateWidget"],function(n){t.executeCmd(new n,e)})},isSelCountSupported:function(e){return e>=1},isTypesSupported:function(e){return e.every(function(e){return!(["Route Template","ENOCLG_LibraryReference","XCADModelRepReference","Group"].indexOf(e)>=0)},this)},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/DeleteCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"delete_command")},execute:function(e){var t=this;require(["DS/DeleteWidget/DeleteWidget"],function(n){t.executeCmd(new n("delete"),e)})},isSelCountSupported:function(e){return e>=1},isFolderSelSupported:function(){return!0},isTypesSupported:function(e){return e.every(function(e){return!0},this),!0},isLinkSupported:function(){return!1},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/ReviseCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"revise_command")},execute:function(e){var t=this;require(["DS/ReviseWidget/ReviseWidget"],function(n){t.executeCmd(new n,e)})},isSelCountSupported:function(e){return e>=1},isTypesSupported:function(e){var t=!1;return Array.isArray(e)&&e.length>0&&(t=e.every(function(e){return!!e&&!(["ENOCLG_LibraryReference"].indexOf(e)>=0)})),t},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/IterationsSWCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"iterations_sw_command")},execute:function(){var e=this;require(["DS/IterationsWidget/IterationsSWWidget"],function(t){e.executeCmd(new t)})},isSelCountSupported:function(e){return 1===e},isTypesSupported:function(e){var t=!1;Array.isArray(e)&&1==e.length&&(t=null!=e[0]);return t}})}),define("DS/LifecycleCmd/IterationsCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"iterations_command")},execute:function(e){var t=this;require(["DS/IterationsWidget/IterationsWidget"],function(n){t.executeCmd(new n,e)})},isSelCountSupported:function(e){return 1===e},isTypesSupported:function(e){var t=!1;if(e.every(function(e){["CATPart","3DShape","SystemModel"].indexOf(e)>=0&&(t=!0)},this),!t&&this.options&&this.options.hasOwnProperty("context")&&this.options.context&&this.options.context.selectedNodes&&1==this.options.context.selectedNodes.length){var n=null;if(this.options.context.selectedNodes[0].hasOwnProperty("object"))n=this.options.context.selectedNodes[0].object["attribute[PLMEntity.V_usage]"];"3DPart"!==n&&"3DShape"!==n||(t=!0)}return t},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/ThumbnailsLayoutCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"tileslayout_command")},execute:function(e){if(null!==this._ctx&&void 0!==this._ctx){this.context.thumbnailsLayout()}},isSelCountSupported:function(e){return!0},isFolderSelSupported:function(){return!0},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/PreviewCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/PADServices/utils/GlobalUtils"],function(e,t,n,i){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"preview_command")},isTypesSupported:e=>"Document"===e[0],execute:function(e){var r=this;require(["DS/LifecycleCmd/DocumentUtils","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(o,s){let c=e.map(e=>e.id);c=c.filter((e,t)=>c.indexOf(e)===t),s.getPlatformServices({platformId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",onComplete:function(e){n.app_initialization(function(){var n=widget.body;t.getSecurityContextPromise(e.platformId,r.context).then(function(t){var r=new o({docIDsArray:c,platformUrls:e,securityContext:t,displayNotif:i.displayNotif}),s=document.getElementsByClassName("history_popup");s.length>0&&(widget.body=s[0]),r.preview(),setTimeout(function(){widget.body=n},750)}).catch(e=>{})})}})})}})}),define("DS/LifecycleCmd/ClearAllCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"clearall_command")},execute:function(e){if(null!==this._ctx&&void 0!==this._ctx){this.context.ClearAllCmd()}},isSelCountSupported:function(e){return!0},isFolderSelSupported:function(){return!0},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/HistoryCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleServices/LifecycleServices","DS/ENOXVersionExplorerUtils/VersionExplorerSettings"],function(e,t,n){"use strict";return e.extend({init:function(e){var i=this;this.isEditMode=!0,this.lastEditModeFromPadContext=!0,this._parent(e,"history_command"),null==i.context&&require(["DS/PADUtils/PADContext"],function(e){var t=e.get();null!=t&&(null!=t.getEditMode&&!0!==t.getEditMode()&&(i.isEditMode=!1,i.lastEditModeFromPadContext=!1),t.addEvent("editModeModified",function(e){!0===e?(i.isEditMode=!0,i.lastEditModeFromPadContext=!0):(i.isEditMode=!1,i.lastEditModeFromPadContext=!1)}))}),t.getHistoryConfigPromise().then(function(e){n.historyConfig=e},function(){n.historyConfig=null})},execute:function(){var e,t=this;this.historyDlg||(this.disable(),require(["DS/HistoryExplorer/HistoryDialog"],function(n){t.historyDlg=new n,t.historyDlg.addEvent("onComplete",e=function(n){t.historyDlg.removeEvent("onComplete",e),t.historyDlg=null}),t.executeCmd(t.historyDlg)}))},isSelCountSupported:function(e){return 1===e},isFolderSelSupported:function(){return!1},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return null==this.historyDlg},commandRunningNotify:function(e){this.lastEditModeFromPadContext&&(this.isEditMode=!e)},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/MaturityCmd",["DS/LifecycleCmd/CommandBase","UWA/Class/Promise"],function(e,t){"use strict";return e.extend({init:function(e){this._parent(e,"maturity_command")},executeAsync:function(e){var t=this;return new UWA.Class.Promise(function(n,i){t.execute(e,function(){n()})})},execute:function(e,t){var n=this;require(["DS/MaturityWidget/MaturityWidget"],function(i){n.maturityWidget=new i(n.options),n.executeCmd(n.maturityWidget,e,t)})},executeCompactViewAsync:function(e,t,n,i){var r=this;return new UWA.Class.Promise(function(o,s){r.executeCompactView(e,t,n,i,function(){o()})})},executeCompactView:function(e,t,n,i,r){var o=this;require(["DS/ChangeMaturityWidget/ChangeMaturityWidget"],function(s){o.changeMaturityWidget=new s(e,t,n,i,r),o.changeMaturityWidget.inject(t)})},_onResize:function(){this.maturityWidget&&"function"==typeof this.maturityWidget.onResize&&this.maturityWidget.onResize()},isSelCountSupported:function(e){return e>=1},isFolderSelSupported:function(){return!0},getTargetFolderId:function(){return null},isTypesSupported:function(e){var t=!1;return Array.isArray(e)&&e.length>0&&(t=e.every(function(e){return!!e&&!(["CATPart","CATProduct","CATDrawing"].indexOf(e)>=0)})),t},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/DownloadCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/PADServices/utils/GlobalUtils"],function(e,t,n,i){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"download_command")},isTypesSupported:e=>"Document"===e[0],execute:function(e){var r=this;require(["DS/LifecycleCmd/DocumentUtils","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(o,s){let c=e.map(e=>e.id);c=c.filter((e,t)=>c.indexOf(e)===t),s.getPlatformServices({platformId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",onComplete:function(e){n.app_initialization(function(){t.getSecurityContextPromise(e.platformId,r.context).then(function(t){new o({docIDsArray:c,platformUrls:e,securityContext:t,displayNotif:i.displayNotif}).download()}).catch(e=>{})})}})})}})}),define("DS/LifecycleCmd/RecycleBinCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"recycle_bin")},execute:function(e){var t=this;require(["DS/LifecycleRecycleBinWidget/RecycleBinWidget"],function(n){t.executeCmd(new n("recycle_bin"),e)})},isSelCountSupported:function(e){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/LargeTilesLayoutCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"largetileslayout_command")},execute:function(e){if(null!==this._ctx&&void 0!==this._ctx){this.context.largeTilesLayout()}},isSelCountSupported:function(e){return!0},isFolderSelSupported:function(){return!0},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})});