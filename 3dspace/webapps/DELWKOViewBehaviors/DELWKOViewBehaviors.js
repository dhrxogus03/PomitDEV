define("DS/DELWKOViewBehaviors/DELWKOTreeContextualMenu",["UWA/Core","DS/DELWKOModelServices/DELWKOCollectionUtils"],function(e,t){"use strict";return function(n,i,o,a,l,r,s,u,d){var c,g,p,f,m,h,C=i.getComponent("WUXCommandsManager"),b=["Type","Reference","Column"],y=new Set(["CreateAssemblyAndScopeAltSubst","CreateProvideAndScopeAltSubst","CreateMaterialAndScopeAltSubst","CreateKitAndScopeAltSubst"]),I=new Set(["CreateAssemblyAndResultingProductAltSubst","CreateProvideAndResultingProductAltSubst","CreateMaterialAndResultingProductAltSubst","CreateKitAndResultingProductAltSubst"]);return f=function(t,i){var o,l,r,u,d,c,g,p,f,m=[],b=function(){return e.is(i.node)?i.selectedNodes[0].getNodeDepth()+1:0};switch(i=i||{},u=n.getAppContext(),t){case"SizeColumnToFit":i.handlers.onSizeColumnToFit(i.virtualColumnID);break;case"SortAToZ":n.getBehavior("WUXNodeModelBehavior").setSortOptions(i.virtualColumnID,"asc"),i.handlers.onSortColumnContentAsc(i.virtualColumnID);break;case"SortZToA":n.getBehavior("WUXNodeModelBehavior").setSortOptions(i.virtualColumnID,"desc"),i.handlers.onSortColumnContentDesc(i.virtualColumnID);break;case"ClearSort":n.getBehavior("WUXNodeModelBehavior"),i.handlers.onClearSort();break;case"HideColumn":i.handlers.onHideColumn(i.virtualColumnID);break;case"PinColumn":i.handlers.onPinColumn(i.virtualColumnID);break;case"UnpinColumn":i.handlers.onUnpinColumn(i.virtualColumnID);break;case"EditInstruction":n.notify("editWorkInstruction",i.infos.objectToBeModified);break;case"EditDataCollectRow":n.notify("editDataCollectRow",i.infos.objectToBeModified);break;case"DeleteDataCollectRow":n.notify("deleteDataCollectRow");break;case"Type":case"Reference":h=s.getGroupingAdditonalColumns(),l=b(),i.handlers.onGroupRows(h[t],l);break;case"Column":l=b(),i.handlers.onGroupRows(i.column.dataIndex,l);break;case"ClearGroupBy":i.handlers.onRemoveGrouping();break;case"GroupByCriteria":i.column.label?r="type":i.column.dataIndex.contains(".")&&(r=i.column.dataIndex.split(".")[0]),i.handlers.onGroupByCriteria(r);break;case"UngroupByCriteria":i.column.label?r="type":i.column.dataIndex.contains(".")&&(r=i.column.dataIndex.split(".")[0]),i.handlers.onUngroupByCriteria(r);break;case"Quantity":d=i.getColumnIDFromDataIndex("V_ContQuantity.instance"),c=i.getColumnOrGroup(d),i.infos=a.getNodeAndColumnInfos(i.node,c),g=e.clone(i.infos.attributeInfo),e.is(g,"object")&&e.owns(g,"Protection")&&(g.Protection=1,i.infos.attributeInfo=g),i.selectedNodes.forEach(function(e){m.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})}),n.notify(t,[m,i.infos]);break;case"LoadIn3DViewer":case"ReframeIn3DViewer":f={nodeId:(p=i.selectedNodes[0]).getInstancePID()||p.getReferencePID(),absPath:p.getAbsolutePath()},n.notify(t,f);break;case"CreatePartialScopeOnHeaderOperation":n.notify("CreatePartialScopeLinkOnHeaderOperation",[i.node.getAbsolutePath()]);break;case"FilterColumn":var y=n.getBehavior("TreeListViewBehavior").getDataGridView();n.notify("FilterColumn",[y,i.column]);break;case"ResetFilterColumn":y=n.getBehavior("TreeListViewBehavior").getDataGridView(),n.notify("ResetFilterColumn",[y,i.column]);break;default:o=C.getCommand(t,u),e.is(o)?(o.beginExecute(i),o.execute({sourceModuleId:n.getId()}),o.endExecute()):(o=C.getCommandCheckHeader(t,u),e.is(o)&&!1===o.getState()?(o.options.node={referencePID:i.node.getReferencePID(),instancePID:i.node.getInstancePID(),absPath:i.node.getAbsolutePath()},o.toggleState()):(i.selectedNodes.forEach(function(e){m.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})}),n.notify(t,[m,i.infos])))}},c=function(t,n){const i=n.options,o=i.restrictLinkCreation,a=i.mfgReferenceId,l=!!e.is(i.isContextMfgRoot,"boolean")&&i.isContextMfgRoot;let r="enabled";return"AddMfgItemToMBOMAltSub"===t?e.is(a)||(r="disabled"):"ReplaceByAlternate"===t?e.is(a)&&!l||(r="disabled"):e.is(o,"string")&&("ResultingProduct"===o?y.has(t)&&(r="disabled"):I.has(t)&&(r="disabled")),r},m=function(e){return{type:"TitleItem",title:o.getNLSValue(e,null,"ContextMenu.Header","Title")}},g=function(t,i,l,g){var p,m,v,D,V,T,w,S,L,M,A=!1;if(m="enabled",M=n.getAppContext(),e.is(t,"string"))V=t;else{if("object"!=typeof t)return void n.debug("Nodes should be an array of string or objects");e.is(t.text)&&e.is(t.command)&&(V=t.text,t=t.command)}if(v=o.getNLSValue(V,null,l,g),e.is(t))if("Refresh"===t&&s.isGroupingExist())m="disabled";else if("EditAttribute"===t)a.isReadOnly(i.infos.attributeInfo,i.infos.attributeDef)||!a.doesAttributeExist(i.infos.objectToBeModified,i.infos.dataIndex)&&!a.isAttrApplicableForType(i.infos.objectToBeModified,i.infos.dataIndex)||u.isReferencesHasReadOnlyType(i.infos.objectToBeModified)?m="disabled":"isCoProduct"===i.column.displayType&&(m="disabled");else if("HideIn3D"===t||"ShowIn3D"===t)T=i.selectedNodes,"HideIn3D"===t?m=T.every(function(e){return!1===e.options.hideShow3D})?"disabled":"enabled":"ShowIn3D"===t&&(m=T.every(function(e){return!0===e.options.hideShow3D})?"disabled":"enabled");else if("EditInstruction"===t){if(1!==(T=i.selectedNodes).length||!r.isWorkInstruction(i.infos.objectToBeModified))return;w="url("+o.getIconURLFromKey(i.infos.objectToBeModified.get("type"))+")",m="enabled"}else if("CreatePartialScopeOnHeaderOperation"===t){if(w="url("+o.getIconURLFromKey("PartialProcessImplementLink")+")",m="disabled",1===(T=i.selectedNodes).length&&!T[0].isRoot()){let t,n,i,o,a,l;if(t=T[0].getReferenceType(),(n=u.isAKindOf(t,"DELLmiHeaderOperationReference"))&&(a=d.findInstanceWhoseParentIsScoped(T[0].getAbsolutePath()),(l=e.is(a,"object")?a.scopeLinks:[]).length>0)){let e=l[0].get("from"),t=r.getReference(e);u.isAKindOf(t,"DELLmiWorkPlanSystemReference")&&(m=(o=(i=d.getImplLinksOfImplementing(T[0].getAbsolutePath())).length>0)?"disabled":"enabled")}}}else if("EditDataCollectRow"===t)m=1===(T=i.selectedNodes).length?"enabled":"disabled";else if("DeleteDataCollectRow"===t)m="enabled";else if(b.indexOf(t)>=0){if(h=s.getGroupingAdditonalColumns(),"Column"===t&&e.is(i.column)){if(!i.column.groupableFlag)return;v=i.column.text,L=i.column.dataIndex}else L=h[t];(S=s.getColumnsForGrouping(n.getId())).length>0&&S.includes(L)&&(A=!0),m=i.selectedNodes.length<=1&&!A?"enabled":"disabled",w="url("+o.getIconURLFromKey("GroupBy")+")"}else if("ClearGroupBy"===t)S=s.getColumnsForGrouping(n.getId()),v=o.getNLSValue(t,null,l,g),w="url("+o.getIconURLFromKey("ClearGroupBy")+")",m=S.length>0?"enabled":"disabled";else if("SetSequencingMode"===t)1===i.selectedNodes.length&&(u.isAKindOf(i.infos.objectToBeModified,"DELLmiGeneralSystemReference")||u.isAKindOf(i.infos.objectToBeModified,"DELLmiWorkPlanSystemReference")||u.isAKindOf(i.infos.objectToBeModified,"DELLmiQtyControlProcessReference")||u.isAKindOf(i.infos.objectToBeModified,"DELLmiTransformationSystemReference")||u.isAKindOf(i.infos.objectToBeModified,"DELLmiTransferSystemReference")||u.isAKindOf(i.infos.objectToBeModified,"SourceSystem")||u.isAKindOf(i.infos.objectToBeModified,"SinkSystem")||u.isAKindOf(i.infos.objectToBeModified,"BufferSystem")||u.isAKindOf(i.infos.objectToBeModified,"DELLmiHeaderOperationReference")||u.isAKindOf(i.infos.objectToBeModified,"DELLmiGeneralOperationReference"))||(m="disabled");else if(y.has(t)||I.has(t)||"AddMfgItemToMBOMAltSub"===t||"ReplaceByAlternate"===t)m=1===i.selectedNodes.length?c(t,i.selectedNodes[0]):"disabled";else if("Quantity"===t){if(1!==(T=i.selectedNodes).length||T[0].isRoot()||"ProcessContinuousProvide"!==i.node.object.type)return;m="enabled",w="url("+o.getIconURLFromKey("EditQuantity")+")"}else if("LoadIn3DViewer"===t){const e=i.selectedNodes[0];m=d.isScoped(e.getReferencePID())?"enabled":"disabled"}else p=C.getCommand(t,M),e.is(p)||(p=C.getCommandCheckHeader(t,M)),e.is(p)&&(m=p.isEnabled()?"enabled":"disabled");return D=f.bind(null,t,i),{icon:e.is(w)?w:"url("+o.getIconURLFromKey(t)+")",type:"PushItem",title:v,label:v,sensitivity:m,state:m,callback:D,action:{callback:D}}},p=function(e){var t=!0;return["ExploreInWebApp"].indexOf(e)>-1&&l.isCloud()&&(t=!1),t},{getDefaultContextualMenu:function(){return["showAuxiliaryView","ProcessView","ItemsView","ResourcesView"]},buildContextualMenu:function(i,a,r,s){var u=[];return r=r||"Cmd",s=s||"Title",e.is(i,"array")?(i.forEach(function(i){var d,c,f,h=[];if(e.is(i,"object")&&e.is(i.groupName)){if("DocumentsCmds"===i.groupName&&!l.displayDocumentManagementCmds())return;if("GroupBy"===i.groupName&&e.is(a.params)&&(f={insertRow:!1,expandCollapse:!1,pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!1,filter:!0},d=a.params.collectionView.buildDefaultContextualMenu(a.params,f),e.is(d[0])&&u.push(d[0])),"3DViewer"===i.groupName&&1!==a.selectedNodes.length)return;if(!Array.isArray(i.commands))return n.debug('"commands" in a group should be an array'),null;i.commands.forEach(function(t){var n;n="SEPARATOR"===t?{type:"SeparatorItem"}:g(t,a,r,s),e.is(n)&&h.push(n)}),c=o.getNLSValue(i.groupName,null,r,s),d={icon:"url("+o.getIconURLFromKey(i.groupName)+")",type:"PushItem",title:c,label:c,state:"enabled",submenu:h},u.push(d)}else if(e.is(i,"object")&&e.is(i.headerName))u.push(m(i.headerName));else if(e.is(i,"string")&&"SEPARATOR"===i)u.push({type:"SeparatorItem"});else if(e.is(i,"string")&&"ApplyConfiguration"===i){var C=t.getReferenceModel(a.node._referencePID);if(e.is(C)){var b=t.getImpactedConnections(C.get("PID"),void 0,{});if(e.is(b)){var y=void 0;b.forEach(e=>{"DELIsGeneratedFromProcessFilteredBy"===e.get("type")&&(y=e)}),e.is(y)&&(d=g(i,a,r,s),e.is(d)&&u.push(d))}}}else p(i)&&(d=g(i,a,r,s),e.is(d)&&u.push(d))},this),u):(n.debug("Nodes should be an array"),null)},onContextMenuCallback:function(e,t){return f(e,t)}}}}),define("DS/DELWKOViewBehaviors/DELWKORefreshBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","DocumentPlugin"],creator:function(t,n,i,o,a){var l,r=function(){var t=o.getNLSValue("View."+n.getId()+".Title"),i=l.getRoots(),a=n.getBehavior("TreeListViewBehavior"),r={action:[],parameters:[]};l.emptyNodeModel(),e.is(i,"array")&&i.length>0&&(i.forEach(function(e,t){r.action[t]="addRoot",r.parameters[t]={rootReferencePID:e}}),a.processDropEffect(r).then(function(){n.notify("onRefreshedAll",[i]),n.info(o.getNLSValue("RefreshAll.Success",{view:t}))}).catch(function(){n.warn(o.getNLSValue("RefreshAll.Failure",{view:t}))}))},s=function(t){var r,s,u,d,c,g={noTimeout:!0},p=!!e.is(t.impactedChildren),f=function(t){var n=e.clone(t.impactedChildren),i=e.clone(t.impactedObjects);l.withTransactionUpdate(function(){n.forEach(function(e){l.updateNode(e,{loadChildren:!0})}),i.forEach(function(e){l.updateNode(e)})})};if(p)s=e.clone(t);else if((r=l.getSelectedNodesInfo().map(function(e){return e.id})).length<1)return;n.notify("startProgress",g),p?(f(s),n.notify("stopProgress",g)):((s={impactedChildren:[],impactedObjects:[]}).impactedChildren=(u=[],d=[],c=[],r.forEach(function(t){var n=i.getReferenceModel(t);!function e(t){var n=i.getInstancesFromCollection(t);-1===u.indexOf(t)&&u.unshift(t),d=d.concat(n),n.forEach(function(t){var n,o=t.get("PID"),a=i.getReferenceModel(o);n=i.getImpacted(o,!1,{onlyInstanceRelations:!0}),c=c.concat(n),e(a.get("PID")),a.setAdditionalInfo({queriedForChildren:!1})})}(t);var o={excludeRelationTypes:["PartialProductImplementLink","ItemSpecOcc"]};i.getImpacted(t,null,o).forEach(function(e){c.push(e)}),e.is(a)&&a.removeDocumentConnections(t),n.setAdditionalInfo({queriedForDocuments:!1,queriedForChildren:!1,queriedForConnections:!1})}),i.removeInstance(d,{silent:!0}),i.removeConnection(c,{silent:!0}),n.notify("removeInstance",[d]),n.notify("removeConnection",[c]),u),i.getDescendantsFromServer(r,function(e){f(s),p||(n.notify("addConnection",[e.connections,{loadRelatedobjectsToView:!1}]),n.notify("refreshImpacted",[s])),n.info(o.getNLSValue("RefreshSelected.Success",{view:o.getNLSValue("View."+n.getId()+".Title")})),n.notify("stopProgress",g)},{fetchInverseRelations:!0,forceDBMode:!0,silentMode:!0}))};return{listenTo:function(){return{refreshAll:r,RefreshCmd:s,refreshImpacted:s}},onStart:function(){l=n.getBehavior("WUXNodeModelBehavior")},onStop:function(){},onRefreshSelected:s}}}}),define("DS/DELWKOViewBehaviors/DELWKOFormUI",["UWA/Core","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI"],function(e,t){"use strict";return function(n,i,o,a,l,r){var s,u=o.getComponent("Element"),d=o.getComponent("ComboBox"),c=o.getComponent("TreeDocument"),g=o.getComponent("TreeNodeModel"),p=o.getComponent("AutoComplete"),f=o.getComponent("LineEditor"),m=o.getComponent("Editor"),h=o.getComponent("Toggle"),C=o.getComponent("DatePicker"),b=o.getComponent("Accordeon"),y=o.getComponent("UnitsEditor"),I=o.getComponent("TooltipModel"),v=o.getComponent("RichTextEditor"),D=o.getComponent("InclusiveLineEditor"),V=o.getComponent("Chips"),T=!1,w=null,S=null,L={},M="inline-container",A=function(t,i){var o=new i({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:a.getNLSValue("FormUI.Placeholder.EnterAText")}),l=o.buildUI(n,t);return o._control.fieldType=t.fieldType,o._control.pattern=t.pattern,L[t.name]=o._control,l},E=function(t){var n=i.getPreferenceValue("separator"),o=new f({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:a.getNLSValue("FormUI.Placeholder.EnterAText")});return"Yes"===t.multiValue&&(o.placeholder=a.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:n}),o.autoCorrectFlag=!1),o.fieldType=t.fieldType,o.pattern=t.pattern,L[t.name]=o,o},x=function(t,n,i){var o,a,r,s=function(s){var u={};switch(s){case"magnitude":u.type="unitsEditor",u.value=l.getMagnitudeValue(n,i);break;case"multivalueRange":for(u.type="autoComplete",u.value=n,u.multiValue=!0,u.elementsList=[],o=0;o<i.AuthorizedValues.length;o++)r=l.getAuthorizedValueNLS(i,o),u.elementsList.push({label:r,value:l.getAuthorizedValueNLS(i,o)});i.labelMap=u.elementsList;break;case"range":for(u.type="select",u.value=l.isDate(i)?l.getFormattedDate(n):n,u.options=[],o=0;o<i.AuthorizedValues.length;o++)r=l.getAuthorizedValueNLS(i,o),u.options.push({label:r,value:l.getAuthorizedValueNLS(i,o)});break;case"multivalue":u.type="text",u.value=l.getValueAsString(n,l.getType(i),!1);break;case"date":u.type="date",u.value=e.is(n)&&"NULL"!==n&&""!==n?l.getDate(n):null,"datetime"===u.displayType&&(u.timePickerFlag=!0);break;case"multivalueDate":u.type="text",a=(a=l.getValueAsDateArray(n)).map(function(e){return l.getFormattedDate(e)}),u.value=l.getValueAsString(a,l.getType(i));break;case"boolean":u.type="checkbox",u.value="TRUE"===n||!0===n;break;case"multiLine":u.type="textarea",u.value="NULL"===n?"":n,u.pattern=l.getPattern(i),u.rows="6";break;case"richTextEditor":u.type="richTextEditor",u.value="NULL"===n?"":n;break;case"inclusiveLineEditor":u.type="inclusiveLineEditor",u.value=n,u.unit=i.unit,u.step=l.isDouble(i)?.1:1;break;case"chips":u.type="chips",u.value=n;break;case"search":u.type="search",u.value="";break;case"select":case"customselect":u.type="select",u.options=n;break;default:u.type="text",l.isDouble(i)||l.isInteger(i)?u.value=l.getValueAsString(n,l.getType(i),!1):u.value="NULL"===n?"":n}return e.extend(t,u)};return t=l.hasMagnitude(i)?s("magnitude"):l.isMultiValuated(i)?l.hasRangeDefined(i)?s("multivalueRange"):l.isDate(i)?s("multivalueDate"):s("multivalue"):l.hasRangeDefined(i)?s("range"):l.isBoolean(i)?s("boolean"):l.isDate(i)?s("date"):l.isMultiLine(i)?s("multiLine"):l.isString(i)&&"richTextEditor"===t.displayType?s("richTextEditor"):(l.isInteger(i)||l.isDouble(i))&&"inclusiveLineEditor"===t.displayType?s("inclusiveLineEditor"):"chips"===t.displayType?s("chips"):"search"===t.displayType?s("search"):"select"===t.displayType||"customselect"===t.displayType?s("select"):s("text")},P=function(t,n){var i=t,o=function(e){var t="",n=new Date(e);return isNaN(n.getTime())||(t=Math.floor(n.getTime()/1e3)),t.toString()};return l.isMultiValuated(n)?(i=l.getValueAsArray(t),l.isDate(n)&&(i=l.hasRangeDefined(n)?i.map(function(e){return t=e,n.labelMap.some(function(e){return t===e.label&&(i=e.value,!0)}),i;var t,i}):i.map(function(e){return o(e)}))):l.isBoolean(n)?i="true"===t?"TRUE":"FALSE":l.hasRangeDefined(n)?i=l.getAuthorizedValue(n,null,t):l.isDate(n)&&(t="NULL"!==t&&e.is(t)?t:"",i=o(t)),i},R=function(t){var n=new m({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:a.getNLSValue("FormUI.Placeholder.EnterAText")});return n.fieldType=t.fieldType,L[t.name]=n,n},N=function(e){var t=new h({type:"switch",checkFlag:e.value,value:e.value,disabled:e.disabled});return t.fieldType=e.fieldType,L[e.name]=t,t},O=function(t){var n=e.is(t)?new C(t):new C;return n.fieldType=t.fieldType,L[t.name]=n,n},F=function(e,t){var n,i=[];for(n=0;n<e.elementsList.length;n++)i[n]={labelItem:e.elementsList[n].label,valueItem:e.elementsList[n].value};var o=new t({elementsList:i,actionOnClickFlag:!1,enableSearchFlag:!1,value:e.value,disabled:e.disabled});return o.fieldType=e.fieldType,L[e.name]=o,o},B=function(t,n){var i,o,a=[];for(o=0;o<t.elementsList.length;o++)a[o]={labelItem:t.elementsList[o].label,valueItem:t.elementsList[o].value};return(i=new d({elementsList:a,actionOnClickFlag:!1,enableSearchFlag:!1,value:t.value,disabled:t.disabled})).fieldType=t.fieldType,L[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n.bind(null,L)),i},U=function(e,t){var i=new t,o=i.buildUI(n,e);return L[e.name]=i.getAutoComplete(),o},W=function(e,i){var o=new t,a=o.buildUI(n,e);return L[e.name]=o.getAutoComplete(),a},k=function(t,n){var i,o,a;return o=new c({}),t.elementsList.forEach(function(e){a=new g({label:e.label,value:e.value}),o.addChild(a)}),i=new p({elementsTree:o,actionOnClickFlag:!1,enableSearchFlag:!1,multiSearchMode:t.multiValue}),e.is(t.value,"array")&&t.value.length>0&&(i.value=t.value),i.fieldType=t.fieldType,L[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n),i},_=function(t){var n,o,l=i.getPreferenceValue("separator");return n="null"!==t.value?t.value:"",o=new y({value:n,requiredFlag:t.mandatory,disabled:t.disabled,placeholder:a.getNLSValue("FormUI.Placeholder.EnterANumber"),pattern:"^[-+e]?[0-9e]+(.[0-9e]+)?$",autoCorrectFlag:!1}),e.is(t.magnitudeText,"string")&&o.setUnit(t.magnitudeText),"Yes"===t.multiValue&&(o.placeholder=a.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:l}),o.pattern="^(([0-9])+(.[0-9]*){0,1}|)*((([0-9])*(.[0-9]*){0,1})[0-9])$",o.autoCorrectFlag=!1),o.fieldType=t.fieldType,L[t.name]=o,o},G=function(e){var t=new v;return""!==e.value&&t.setData(e.value),t.fieldType=e.fieldType,L[e.name]=t,t},H=function(e){var t=new D(e);return t.fieldType=e.fieldType,L[e.name]=t,t},j=function(t){var n=new V({value:t.value,uniqueValue:!0,disabled:t.disabled});return n.addEventListener("change",function(t){e.is(t)&&t.stopPropagation()}),n.fieldType=t.fieldType,L[t.name]=n,n},K=function(t,n){var i,o,a,l,r,s;for(e.is(t,"array")||(t=[t]),o=0;o<t.length;o++){switch(a=t[o],l=new e.Element("div",{class:"wux-field-container "+M}),new e.Element("h6",{class:"wux-textElement",text:a.label}).inject(l).tooltipInfos=new I({shortHelp:a.label}),r={name:a.name,value:a.value,mandatory:a.mandatory,disabled:a.disabled,fieldType:a.type,multiValue:a.multiValue,pattern:a.pattern},a.type){case"customtext":case"text":i=e.is(a.implementation)?A(r,a.customUI):E(r);break;case"textarea":i=R(r);break;case"checkbox":i=N(r);break;case"date":s={timePickerFlag:a.timePickerFlag||!1},e.extend(r,s),i=O(r);break;case"select":case"customselect":s={elementsList:a.options},e.extend(r,s),i=e.is(a.implementation)?F(r,a.customUI):B(r,a.attributeInfo.onChange);break;case"autoComplete":s={elementsList:a.elementsList},e.extend(r,s),i=k(r);break;case"search":r.url=a.url,r.precondition=a.precondition,r.listenCSOEvents=a.listenCSOEvents,r.populateCSOEvents=a.populateCSOEvents,r.serviceName=a.serviceName,r.entity=a.entity,e.extend(r,s),i=e.is(a.implementation)?U(r,a.customUI):W(r);break;case"unitsEditor":s={magnitudeText:a.magnitudeText,multiValue:a.multiValue},e.extend(r,s),i=_(r);break;case"richTextEditor":i=G(r);break;case"inclusiveLineEditor":r.unit=a.unit,r.stepValue=a.step,i=H(r);break;case"chips":i=j(r);break;default:i=E(r)}i.inject(l),l.inject(n)}},X=function(t,n){var i=a.getNLSValue(t),o=new e.Element("div",{class:"accordeon-section-container"}).inject(w);new b({items:[{header:"Wrong NLS key"!==i?i:t,content:n,expandedFlag:!0}],style:"filled-separate"}).inject(o)},z=function(t){var n,i,o,u,d,c,g,p,f,m=[],h=a.getNLSValue(S,null,"Type");for(e.is(t,"array")||(t=[t]),i=0;i<t.length;i++){if(n=t[i],o=e.is(n.attributeName)?n.attributeName:n.dicoType+"."+n.name,u=e.is(n.attributeInfo)?n.attributeInfo:r.getAttributeInfo(o),e.is(u)?(c=l.getFullName(u),p=e.is(a.getNLSValue(u.Name))&&u.Name!=a.getNLSValue(u.Name)?a.getNLSValue(u.Name):l.getNLS(u),f=l.getNLSForUnit(u)):(u="",c=o=n.name,p=a.getNLSValue(o),f=""),e.is(n.defaultValue))if(n.defaultValue.indexOf(",")>=0){d=[];for(var C=n.defaultValue.split(","),b=C.length,y=0;y<b;y++)d.push({label:a.getNLSValue(C[y]),value:C[y]})}else d=n.defaultValue;else d=e.is(s&&s[c])?s[c]:"PLMEntity.V_Name"===c&&S?h:l.getDefaultValue(u);g={name:c,mandatory:n.mandatory,label:p,attributeInfo:u,magnitudeText:f,multiValue:u.MultiValuated,disabled:n.disabled?1:n.readOnly||l.isReadOnly(u),defaultValue:d},e.is(n.value)?d=n.value:e.is(n.objectToBeModified)&&(d=n.objectToBeModified.get(n.dataIndex)),e.is(S)&&"ProcessContinuousProvide"===S&&e.is(n.readOnly)&&(g.disabled=n.readOnly),l.isDate(u)&&(g.displayType="DateTime"===n.displayType?"datetime":"date"),l.isString(u)&&e.is(n.displayType)&&"richText"===n.displayType?g.displayType="richTextEditor":(l.isInteger(u)||l.isDouble(u))&&e.is(n.displayType)&&"inclusiveEditor"===n.displayType?g.displayType="inclusiveLineEditor":e.is(n.displayType)&&"chips"===n.displayType?(g.displayType="chips",g.valueType=u.Type):e.is(n.displayType)&&"select"===n.displayType?g.displayType="select":e.is(n.displayType)&&"search"===n.displayType||"customsearch"===n.displayType?(g.displayType="search",g.url=n.defaultValue,g.dicoType=n.dicoType,g.precondition=n.precondition,g.listenCSOEvents=n.listenCSOEvents,g.populateCSOEvents=n.populateCSOEvents,g.serviceName=n.serviceName,g.entity=n.entity,g.implementation=n.implementation):e.is(n.displayType)&&"customselect"===n.displayType&&(g.implementation=n.implementation,g.displayType=n.displayType),g.implementation=n.implementation,g=x(g,d,u),m.push(g)}return m},q=function(t){return new e.Promise(function(n,i){var o=0,a=0;t.forEach(t=>{e.is(t.implementation)&&(o++,require([t.implementation],function(e){a++,t.customUI=e,a===o&&n()}))}),0===o&&n()})},Q=function(t,n){var o,a,l=new u("div",{class:"section-container"});for(o in!1===n.headerAccordean?l.inject(w):t.name||(t.name=""),t)if(e.is(o))switch(o.toLowerCase()){case"name":X(t[o],l);break;case"attribute":if(a=z(t[o]),e.is(a))q(a).then(t=>{e.is(a)?K(a,l):i.debug("attributeInfo is not available")});else{if(!e.is(a))return void i.debug("attributeInfo is not available");K(a,l)}}l.addEvent("resize",function(){var t,n,i,o;o=l.getElements(".wux-field-container"),(i=l.clientWidth)<290?(t="inline-container",n="block-container"):i>290&&"block-container"===M?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(o)&&o.forEach(function(e){e.removeClassName(t),e.addClassName(n)})})},J=function(t){var n,o=t.sections;for(n in o)if(e.is(n))switch(n.toLowerCase()){case"section":e.is(o[n])&&(Array.isArray(o[n])?o[n].forEach(Q):Q(o[n],t));break;case"formstyle":e.is(o[n])&&("Vertical"===o[n]?M="block-container":"Horizontal"===o[n]&&(M="inline-container"))}!0===T&&(T=!1,i.debug(a.getNLSValue("InsertCmd.WarningConfiguration")))};return{createUI:function(t){t=t||{},w=new u("div",{class:"data-collection-form-UI"}),e.is(t.renderTo)?(e.is(t.type)&&(S=t.type.split("/")[1]||""),e.is(t.defaultValues)&&(s=t.defaultValues),J(t),w.inject(t.renderTo)):i.debug("no parent container is present to inject the mainContainer")},getFormStyle:function(){return M},destroy:function(){e.is(w)&&w.destroy(),L={}},getValues:function(){var t,n,i,o={};for(n in L)Object.prototype.hasOwnProperty.call(L,n)&&(i=r.getAttributeInfo(n),e.is(n)&&("select"===L[n].fieldType||"customselect"===L[n].fieldType?t=P(L[n].currentValue,i):"autoComplete"===L[n].fieldType?t=L[n].value?P(L[n].value.join("|"),i):P(L[n].value,i):"checkbox"===L[n].fieldType?(t=(t=L[n].checkFlag).toString(),t=P(t,i)):"date"===L[n].fieldType?t=P(L[n].value,i):"richTextEditor"===L[n].fieldType?t=L[n].getData():"inclusiveLineEditor"===L[n].fieldType?t=L[n].getValue():"chips"===L[n].fieldType?0===(t=L[n].value).length&&(t=""):t="search"===L[n].fieldType?L[n].value:e.is(L[n].requiredFlag)&&!L[n].requiredFlag?void 0:P(L[n].valueToCommit,i),e.is(t)&&(o[n]=t)));return o},validate:function(){var t,n,i,o,s={result:!0,message:null,more:null},u=[],d=[];for(t in L)if(e.is(L[t])&&L[t].changeSelection)return{result:!1};for(t in L)if(e.is(L[t])){if(o=a.getNLSValue(t),!0===L[t].requiredFlag&&""===L[t].value&&(s.result=!1,u.push(o)),"DELLmiProductionPlanReference.ProductionPlan"!==t&&"DELLmiWorkPlanSystemReference.MfgProcess"!==t&&"DELFmiFunctionReference.MfgItem"!==t||void 0===L[t].value&&(d.push(a.getNLSValue(t.substring(t.indexOf(".")+1))),s.result=!1),"PLMEntity.V_Name"===t){var c=r.getAttributeInfo(t);L[t].pattern=l.getPattern(c)}"OrderQuantity"===t&&("EACH"===L.Magnitude.value?L[t].pattern="^[1-9][0-9]*$":L[t].pattern="^([+]?([1-9][0-9]*)|(0))([.,][0-9]+)?"),"UoM"===t&&"EACH"!=L.Magnitude.value&&(e.is(L[t].value)||(d.push(o),s.result=!1)),e.is(L[t].pattern)&&(n=new RegExp(L[t].pattern),""===(i=e.is(L[t].valueToCommit)?L[t].valueToCommit:"")||i.test(n)||(d.push(o),s.result=!1),"OrderQuantity"===t&&(L[t].pattern=""))}return s.result||(u.length>0&&d.length>0?s.message=a.getNLSValue("ModelBehavior.CreateReference.Failure.Multiple",{missingFields:u.join(", "),invalidFields:d.join(", ")}):u.length>0?s.message=a.getNLSValue("ModelBehavior.CreateReference.Failure.ValueMissing",{fields:u.join(", ")}):d.length>0&&(s.message=a.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidValue",{fields:d.join(", ")}))),s},updateToDefaultValues:function(t){var n;for(n in L)e.is(L[n])&&e.is(t[n])&&(L[n].value=t[n])},updateAuthorizedList:function(t,n){!function(t,n,i){var o,a,r,s,u=[];if(e.is(n)&&(r=L[n],e.is(r)&&"select"===r.fieldType)){for(a=0;a<t.AuthorizedValues.length;a++)o=l.getAuthorizedValueNLS(t,a),u.push({labelItem:o,valueItem:l.getAuthorizedValueNLS(t,a)});s=e.is(i)?i:"",r.setProperties({elementsList:u,value:s})}}(t,n)}}}}),define("DS/DELWKOViewBehaviors/DELWKOEditAttributeBehavior",["UWA/Core","text!DS/DELWKOViewBehaviors/assets/json/MockAttributeInfo.json","text!DS/DELWKOViewBehaviors/assets/json/DELLmiExecTimeConstraintRelation.json","text!DS/DELPPWViewBehaviors_FD02/assets/json/EditAttributeFormEvents.json"],function(e,t,n,i){"use strict";return{plugins:["UXComponentsPlugin","AttributePlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin"],creator:function(o,a,l,r,s,u,d){var c,g,p,f,m=l.getComponent("Button"),h=null,C=null,b=null,y=e.Json.decode(i),I=function(t,n){var i=g.createElement("div",{class:"section-container"}),o={attribute:t},a={};return e.is(n)&&e.is(n.formStyle)&&(a.formStyle=n.formStyle),a.section=o,C=g.create("FormUI",{sections:a,renderTo:i,headerAccordean:!1}),i},v=function(t,n){c=g.createElement("div",{class:"EditAttribute-Dialog"}),e.is(g)?(b=g.create("Dialog",e.merge(t,{domId:"EditAttributeUI-Dialog",content:c,resizableFlag:!0,modalFlag:!0,width:400,minWidth:290,buttons:{Cancel:new m({onClick:function(){b.close()}}),Ok:new m({disabled:!1,emphasize:"primary",onClick:function(){b.close()}})}}))).close=function(){this.destroy(),e.is(C)&&C.destroy(),e.is(c)&&c.destroy(),b=null}:a.debug("uxFactoryBehavior is not available.")},D=function(t){return new Promise(function(n,i){var o={},l=function(){a.notify("stopProgress",o),a.warn(s.getNLSValue("EditAttributeUI.retrieveDataFailure")),i()};if(!e.is(t))return a.debug("objectToBeModified is not available."),void i();a.notify("startProgress",o),u.fetchAttributes(t,{onComplete:function(){a.notify("stopProgress",o),n()},onFailure:l,onTimeout:l})})},V=function(t){var n=u.getReference(t);return e.is(n)||(n=u.getInstance(t)),e.is(n)||(n=u.getConnection(t)),n};return{name:"EditAttributeBehavior",onStart:function(i){var o;g=a.getBehavior("UXFactoryBehavior"),a.getBehavior("ModelBehavior"),p=a.getBehavior("LinkBehavior"),e.is(i.editFormAttributesXML)&&(o=d.getXMLValues(i.editFormAttributesXML),h=o.convert("AttributesDescriptionList.Type","name")),f=e.Json.decode(t),e.Json.decode(n)},onStop:function(){},hasEditConfiguration:function(t){var n=!1,i=null;return e.is(h)?(i=V(t),e.is(i)&&e.is(h[i.get("type")])&&(n=!0)):a.debug("_editFormAttrsConfig is not available."),n},editConfiguredAttributes:function(t){var n,i,l,d,g,m,C,b,T=null,w={};m=u.getConnection(t),C=e.is(m)?m.get("type"):null,e.is(h)?(T=V(t),e.is(T)?(n=h[T.get("type")],y[T.get("type")]&&(b=y[T.get("type")]),e.is(n)?(l=n.Attribute,e.is(n.formStyle)&&(w.formStyle=n.formStyle),(d=r.getObjectAndAttributeInfos(l)).forEach(function(n){"ProcessImplementLinkOcc"===C&&"V_usage"===n.dataIndex&&(n.attributeInfo=f[n.dataIndex],n.attributeInfo.AuthorizedValues=function(t){var n,i,a,l,r,u,d=[];return i=(n=o.getPlugins("ImplementPlugin").instance).getRolesForTargrtObject(t),a=p.getConnection(t),l=n.getRoleFromModelOrComputed(a.get("PID")),e.is(l)&&"NULL"!==l&&(u=l.replace("*",""),r=i.indexOf(u),i.splice(r,1),i.unshift(l)),i.forEach(function(e){d.push({NLS:s.getNLSValue("Role."+e),Name:e})}),d}(t)),"DELLmiExecTimeConstraintRelation"===C&&"kind"===n.dataIndex&&(n.attributeInfo.NLS=s.getNLSValue("DELLmiExecTimeConstraintRelation.kind"))}),d.forEach(function(t,n){t.objectToBeModified=T,e.is(l[n].displayType)&&(t.displayType=l[n].displayType)}),D(T).then(function(){var t;(t=d.filter(function(t,n){return t.readOnly=!0,e.is(t.attributeNLSTitle)?t.attributeNLSTitle:r.getNLS(t.attributeInfo),(r.doesAttributeExist(T,t.dataIndex)||r.isAttrApplicableForType(T,t.attributeName))&&e.is(b)&&e.is(b[t.dataIndex])&&(t.events=b[t.dataIndex]),!0})).length>0?(g=I(t,w),i={title:s.getNLSValue("AttributeUI.HeaderMulti")},u.isWorkInstruction(T)&&(i=e.merge({position:{my:"top",at:"top"},height:500,width:600},i)),v(i),g.inject(c)):a.warn(s.getNLSValue("EditAttributeUI.ConfigAttrNotAvilaibleOnObject"))})):a.warn(s.getNLSValue("EditAttributeUI.NoAttributesConfigured"))):a.debug("objectToBeModified is not available.")):a.debug("_editFormAttrsConfig is not available.")},editAttribute:function(t,n){var i,o,l,u,d,g;e.is(n,"array")||(n=[n]),e.is(t,"array")||(t=[t]),d=n[0].objectToBeModified,D(d).then(function(){var p=!0;n.forEach(function(c){r.doesAttributeExist(d,c.dataIndex)||r.isAttrApplicableForType(d,c.dataIndex)?(o=e.is(c.attributeNLSTitle)?c.attributeNLSTitle:r.getNLS(c.attributeInfo),l=[],t.forEach(function(t){i=null,i="reference"===c.instOrRef&&e.is(t.referencePID)?t.referencePID:"instance"===c.instOrRef&&e.is(t.instancePID)?t.instancePID:t.id,e.is(i)&&l.push(i)}),u=n.length>1?s.getNLSValue("EditAttributeUI.HeaderMulti"):s.getNLSValue("EditAttributeUI.Header",{attributeName:o})):(p=!1,a.warn(s.getNLSValue("TableView.AvailabilityFailure",{key:o})))}),p&&(e.is(b)||(g=I(n),v({title:u}),g.inject(c)))})}}}}}),define("DS/DELWKOViewBehaviors/DELWKOFilteringViewBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","PlatformPlugin","SelectionPlugin"],creator:function(e,t,n,i,o,a,l,r,s,u,d,c,g,p,f){var m=function(e){};return{listenTo:function(){return{FilterColumn:m}},onStart:function(e,t){t()},onStop:function(){}}}}}),define("DS/DELWKOViewBehaviors/DELWKOMfgProcessCrossHighlightBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin"],creator:function(t,n,i){var o,a,l,r,s,u,d,c,g,p,f,m,h,C,b,y,I,v="DELWKOMfgProcessCrossHighlightBehavior";return r=function(t){var i=n.getBehavior(t);return e.is(i)||n.debug(v+" : "+t+"behavior is not available "),i},u=function(){o=Object.create(null)},s=function(e,t){o[e.toString()]=t},d=function(e){delete o[e.toString()]},c=function(){return Object.keys(o).reduce(function(e,t){return e.concat(o[t])},[])},g=function(){var t=r("WUXNodeModelBehavior"),i=a;return i&&e.is(t)&&t.isDocumentEmpty()&&(i=!1,n.debug(v+" : Not computing crossHighlight as document is empty")),i},p=function(t,o){var a,s,u=r("LinkBehavior"),d=[];if(e.is(u))if(a=i.getPPRType(t),s=l[a],Array.isArray(s)){var c=u.getConnectedObjects(t,o,{relationTypes:s});if(d=d.concat(c),"PROCESS"===a&&d.length>0)d.forEach(function(e){var t=u.getConnectedObjects(e,[],{relationTypes:"DELIsSerializedFromOp"});d=d.concat(t)});else if(("WORKORDER"===a||"EXECHEADER"===a||"STEP"===a)&&d.length>0){d=[];var g=u.getConnectedObjects(t,[t],{relationTypes:s});(d=d.concat(g)).forEach(function(e){if(e instanceof Array){var t=e[0],n=i.getReferenceIdFromInstance(t),o=u.getConnectedObjects(n,[n],{relationTypes:s});d=d.concat(o);var a=u.getConnectedObjects(t,[t],{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]});d=d.concat(a)}else a=u.getConnectedObjects(e,[e],{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]}),d=d.concat(a)})}}else n.debug(v+" : Couldnt _computeConnectedObjs as crossHighLightLinkTypes config is not available for "+a);return d},f=function(t,n){var i,o,a,l,r;if(t.isVisible()){if(a=t,e.is(n))for(i=1;i<n.length&&(l=!1,r=a.getVisibleChildren(!1,!0),e.is(r)&&0!==r.length);i++){for(o=0;o<r.length;o++)if(r[o].getInstancePID()===n[i]){a=r[o],l=!0;break}if(!l)break}}else for(a=t.getParent();!a.isVisible();)a=a.getParent();return a},m=function(t){var n=r("WUXNodeModelBehavior"),o=[],a={},l={};return e.is(n)&&(n.getAllDescendants().forEach(function(t){var n,i,o;n=t.getReferencePID(),t.isRoot()?o=n:(i=t.getInstancePID(),o=t.getAbsolutePath().toString()),e.is(n)&&(e.is(a[n])||(a[n]=[]),a[n].push(o)),e.is(i)&&(e.is(a[i])||(a[i]=[]),a[i].push(o)),e.is(o)&&(l[o]=t)}),t.forEach(function(t){var n,r,s;Array.isArray(t)?(n=t[0],e.is(a[n])&&a[n].forEach(function(e){o.push(f(l[e],t))}),s=i.getInstance(n),e.is(s)&&(r=s.get("isAggregatedBy"),e.is(r)&&e.is(a[r])&&a[r].forEach(function(e){0===l[e].getChildren(!0).length&&o.push(f(l[e]))}))):e.is(a[t])&&a[t].forEach(function(e){o.push(f(l[e]))})})),o},h=function(e){var t,n=r("WUXNodeModelBehavior");n&&Array.isArray(e)&&e.length>0&&(t=m(e)).length>0&&n.withTransactionUpdate(function(){t.forEach(function(e){e.highlight()})})},C=function(){var e,t=r("WUXNodeModelBehavior");t&&(e=t.getHighlightedNodes(),Array.isArray(e)&&e.length>0&&t.withTransactionUpdate(function(){e.forEach(function(e){e.unhighlight()})}))},b=function(){u()},y=function(t){var n;g()&&e.is(t)&&((t=Array.isArray(t)?t:[t]).forEach(function(t){var n,i,o=t.nodeId,a=t.isSelected,l=t.absPath;e.is(o)&&e.is(a)&&e.is(l)&&(i=l.length>0?l:o,a?(n=p(o,l),s(i,n)):d(i))}),C(),n=c(),h(n))},I=function(t){var i,o=r("WUXNodeModelBehavior");g()&&e.is(o)&&e.is(t)&&e.is(t.sourceId)&&e.is(t.changed)&&(i=t.changed,t.sourceId!==n.getId()&&i.isSelected&&o.unSelectAll(),y(i))},{listenTo:function(){return{refreshAll:b,select:I,reComputeCrossHighlight:y,onNodeExpanded:this.reHighlightMyView,onNodeCollapsed:this.reHighlightMyView}},onStart:function(t){a=!!e.is(t.enableCrossHighlight)&&t.enableCrossHighlight,l=e.is(t.crossHighLightLinkTypes)?t.crossHighLightLinkTypes:{},u()},onStop:function(){o=null},reHighlightMyView:function(){var e;g()&&o&&Object.keys(o).length>0&&(C(),e=c(),h(e))}}}}}),define("DS/DELWKOViewBehaviors/DELWKOWUXNodeModelBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors_FD02/BulkTreeSearchHelper","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/TreeDocument","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/TreeNodeModel","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/Mutex"],function(e,t,n,i,o,a){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","ImplementPlugin","KeyBindingPlugin","RootsPlugin","CfgColumnsPlugin","PlatformPlugin","DicoPlugin"],creator:function(l,r,s,u,d,c,g,p,f,m,h){var C,b,y,I,v,D,V,T,w,S,L,M,A,E,x,P,R,N,O,F,B,U,W,k,_,G,H,j,K,X,z,q,Q,J,Z,Y,$,ee,te,ne,ie,oe,ae,le,re,se,ue,de,ce,ge,pe,fe,me="noChildren",he="expanding",Ce="partiallyExpanded",be="expanded",ye="collapsed",Ie={virtualColumnID:null,sortOrder:null},ve=[],De=0,Ve=new i({useAsyncPreExpand:!0,shouldAcceptDrag:function(t){return e.is(t.getReferencePID)},shouldAcceptDrop:function(t){var n=t.dropNode;return!e.is(n)||e.is(n.getReferencePID)}}),Te=new n(Ve,s);(C=Ve.getXSO())&&C.onChange(function(t){var n,i,o,a,l,s,u,c,g,p=[],f=[],m=r.getBehavior("ViewBehavior");if(!re(t)){for(s=t.getInstancePID()||t.getReferencePID(),u=t.isSelected(),c=Ve.getSelectedNodes(),g=t.getAbsolutePath(),i=0,o=c.length;i<o;i++)a=c[i],e.is(a)&&e.is(a.getReferencePID)&&(l=a.getInstancePID()||a.getReferencePID(),"MANAGECAPABLERESOURCESMOD"===r.getId()&&(l=a.getLinkPID()),p.push(l),f.push({id:l,path:a.getAbsolutePath()}));d.setSelection(r.getId(),f),n={sourceId:r.getId(),selectedNodeIds:p,changed:{nodeId:s,isSelected:u,absPath:g}},e.is(E)&&!0!==t.from3DViewer?E.crossHighlight(s,g,u):t.from3DViewer=null,e.is(m)&&!0===u&&m.setActiveView(),r.notify("select",n)}}),x=function(){var t,n,i=function(){};t=function(t){var n,i,o,a,l;if(t.preventDefault(),t.stopPropagation(),o=function(){var t,n=Ve.getRoots();e.is(n)&&(t=n[0],e.is(t)&&t.select())},n=Ve.getSelectedNodes())if(a=n[0])if(a.hasChildren()||a.getNextBrother())a.getNextVisibleNode().select(),a.unselect();else{if(a.isRoot(!0))return a.unselect(),void o();for(l=a.getParent();l&&!l.getNextBrother()&&!l.isRoot(!0);)l=l.getParent();if(i=l.getNextBrother())i.select(),a.unselect();else{if(!l.getPreviousBrother())return a.unselect(),void o();l.getPreviousBrother().select(),a.unselect()}}else o();else o()},n=function(t){var n,i,o=Ve.getSelectedNodes(),a=function(){var t,n,i;t=Ve.getRoots(),e.is(t,"array")&&t.length>0&&(i=(n=t[t.length-1]).getVisibleChildren(!1,!0),(e.is(i,"array")&&i.length>0?i[i.length-1]:n).select())};if(t.preventDefault(),t.stopPropagation(),o)if(n=o[0]){if(0===n._rowID)return n.unselect(),void a();i=n.getPreviousVisibleNode(),n.unselect(),i.select()}else a();else a()},g.createHandler({domElement:r.getElement(),onTab:t,onDownArrow:t,onShiftTab:n,onUpArrow:n,onCtrlA:function(e){Ve.selectAll(),e.preventDefault(),e.stopPropagation()},onCtrlC:i,onCtrlV:i,onCtrlX:i,onSuppr:i,onBackspace:i})},P=function(t,n){var i,o;return n=n||!1,o=function(t){var i=[],o=null;return o=Ve.getTreeNodeModel(t[0]),e.is(o)&&0!==o.length?("Installation"!==o[0]._type&&"Transform"!==o[0]._type||o[0]._referencePID!==t[t.length-1]||(n=!0,t=[t[0]]),1===t.length?n&&(o=o[0]):t.length>1&&(o.forEach(function(e){var n,o,a,l,r=e;for(n=1;n<t.length;n++){for(a=r.getChildren(!0),l=!1,o=0;o<a.length;o++)if(a[o].getInstancePID()===t[n]){r=a[o],l=!0;break}if(!l)break}l&&i.push(r)}),o=i.length>0?n?i[0]:i:null),o):null},Array.isArray(t)&&t.length>0?i=o(t):e.is(t,"string")?(i=Ve.getTreeNodeModel(t,{returnFirstOne:n}),Array.isArray(i)&&i.length<1&&(i=null)):(r.debug("nodeId is not valid."),i=null),i},R=function(e,t){return Te.getNodeModels(e,t)},N=function(e){var t,n,i=Ve.getRoots(!0),o=null;for(n=i.length,t=0;t<n;t++)if(i[t].getReferencePID()===e){o=i[t];break}return o},O=function(){var e=Ve.getRoots();return Array.isArray(e)&&e.length<=0},F=function(n,i,a,l){var s,u,d,c,g,f=r.getBehavior("TaggerBehavior"),m=r.getBehavior("BIBehavior"),h=r.getBehavior("ExpandFilterBehavior"),C=!1,y={nodeOptions:{},taggerOptions:{}};return e.is(i)?(d=""!==(g=i.getAbsolutePath().toString())?g.concat(",",n.instancePID):n.instancePID,c=i.getRIRpath().join(",")+","+n.instancePID+","+n.referencePID):(d=n.referencePID,c=n.referencePID),m&&(y=m.getNodeOptions(d,c),e.merge(n,y.nodeOptions)),u=new o(n),e.is(i)?(!0===l&&(a=De++,C=!0),i.addChild(u,a,C)):(Ve.addRoot(u),e.is(h)&&h.setTagsWithExpandSynthesis(u.getReferencePID()),!0!==O()&&(s=r.getBehavior("DropZoneViewBehavior"),e.is(s)&&s.hide()),!0===b&&p.addRoot(r.getId(),u.getID())),e.is(n.fromXEN)&&(u.stringIdentifier=n.referencePID,u.fromXEN=n.fromXEN),B(u),f&&f.getNodeUpdatePromise({PID:u.getID(),Path:u.isRoot(!0)?u.getReferencePID():u.getAbsolutePath().toString(),event:"add",externalTags:[y.taggerOptions]}).then(function(){t.resolve()}),u},B=function(t){var n=!1;e.is(t.fromXEN)&&t.fromXEN&&(n=t.fromXEN),(e.is(I)||e.is(D)||e.is(v))&&(c.getScopeLinksOfImplementing(t.getID(),n).length>0?U(t,I.badgeIcon):c.getPartialScopeLinksOfImplementing(t.getID(),n).length>0?U(t,D.badgeIcon):c.getResultingProductLinksOfImplementing(t.getID(),n).length>0&&U(t,v.badgeIcon))},le=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)||/[/]?((\.|\.\.)*?([/]))*?(([a-zA-Z0-9_ ]+)\/)*?([a-zA-Z0-9_ ]+)\.([a-z]{2,})/.test(e)},U=function(t,n){var i=e.is(n)?u.getIconURLFromKey(n):"",o={bottomLeft:le(i)?{iconPath:i,iconSize:{width:"16px",height:"16px"}}:""};Array.isArray(t)?t.forEach(function(e){e.updateBadge(o)}):t.updateBadge(o)},J=function(e,t){var n,i,o=null;if(t&&(i=t.getChildren(!0),Array.isArray(i)&&i.length>0))for(n=0;n<i.length;n++)if(e===i[n].options.instancePID){o=i[n];break}return o},de=function(t,n){var i,o,a,l=r.getBehavior("TreeListViewBehavior"),u=r.getBehavior("GraphViewBehavior");return n=n||{},i=o=l.getReferenceNodeOptions(t),e.is(u)&&(a=u.getReferenceNodeOptions(t),i.grid=e.merge(o.grid,a.grid)),e.is(n.fromXEN)&&(i.fromXEN=n.fromXEN),!n.fromXEN&&(s.needToQueryForChildren(t)||e.is(n.forceIntializeChildren)&&n.forceIntializeChildren)&&(i.children=[]),e.is(i.expandState===me)&&(i.children=[]),F(i)},ce=function(t,n,i,o,a){var l,u,d,c,g=r.getBehavior("TreeListViewBehavior"),p=r.getBehavior("GraphViewBehavior");return a=a||{},l=i.getAbsolutePath().concat(t.get("PID")),u=d=g.getInstanceNodeOptions(n,t,l),e.is(p)&&(c=p.getInstanceNodeOptions(n,t),u.grid=e.merge(d.grid,c.grid)),(s.needToQueryForChildren(n)||e.is(a.forceIntializeChildren)&&a.forceIntializeChildren)&&(u.children=[],e.is(a.fromXEN)&&(u.fromXEN=a.fromXEN)),P(u.referencePID,!0),a.isFlatView?F(u,null,o,a.isFlatView):F(u,i,o,a.isFlatView)},k=function(t,n,i){var o,a,l,u,d,c,g,p=i||{},f=r.getBehavior("TreeListViewBehavior"),m=e.is(p.onEndAddToNodeList,"function")?p.onEndAddToNodeList:null,C=!0;if(e.is(m)&&delete p.onEndAddToNodeList,g=function(t,n){l.getRoot(!0).isRootFiltered()?Y(l):s.needToQueryForChildren(t)?Y(l,Ce):Y(l),e.is(m)&&m(t,n)},!e.is(t,"string"))return r.debug("_addToNodeModelListRecursive: invalid PID."),void g(null,null);if(e.is(f)){if(c=function(){_(l,p),g(o,l)},e.is(n))if(a=s.getInstance(t),e.is(a)){if(o=s.getReferenceModelFromInstance(a),!e.is(o)||h.isAKindOf(o,"Document"))return;l=J(t,n),e.is(l)&&(l.getReferencePID()!==a.get("isInstanceOf")?(u=l._getLocalID(),n.removeChild(l)):(C=!1,d=f.getUpdateNodeOptions(a,l),X(t,d),W(a,l.getAbsolutePath()))),C&&(l=P(p.rootId,!0),p.rootNode=l,l=ce(a,o,n,u,p))}else o=s.getReference(t);else(o=s.getReference(t))&&(e.is(p.loadRootOnly)&&p.loadRootOnly&&(p.expandLevel=0),l=P(t,!0),e.is(l)&&(l.isRoot(!0)||e.is(p.updateItem)&&!0===p.updateItem)?(d=f.getUpdateNodeOptions(o),X(t,d)):l=de(o,p));p.loadChildren?a?c():!T&&s.needToQueryForChildren(o)?e.is(p.loadRootOnly)&&p.loadRootOnly&&!s.needToQueryForConnections(o)?c():l._expandState!=me&&(p=e.merge(p,{silentMode:!0}),Y(l,he),s.getDescendantsFromServer(o.get("PID"),c,p)):!T&&e.is(p.withLinksResolved)&&p.withLinksResolved&&s.needToQueryForConnections(o)&&!0!==p.isFlatView?(Y(l,he),s.findMissingLinkedObjects(o.get("PID"),c,p)):l.hasChildren()?c():g(me):g(o,l)}else r.debug("treeListViewBehavior is undefined")},_=function(t,n){var i,o=n||{},a=e.is(o.filterQuery)?o.filterQuery:null,l=r.getBehavior("TreeListViewBehavior");e.is(t)&&t.removeChildren(),Ve.prepareUpdate(),i=s.getFilteredInstancesFromCollection(t.getReferencePID(),a),e.is(Ie)&&e.is(Ie.virtualColumnID)&&e.is(Ie.sortOrder)?l.getDataGridView().reapplySortModel():i=(i=(i=i.map(function(e,t){return{position:t,data:e}})).sort(function(e,t){var n=e.data.get("V_TreeOrder"),i=t.data.get("V_TreeOrder");return n&&i?Number(n)-Number(i):e.position-t.position})).map(function(e){return e.data}),i.forEach(function(e){k(e.id,t,o)}),Ve.pushUpdate()},$=function(e){var t,n=!1,i=e.getReferencePID();return s.needToQueryForChildren(i)||(t=s.getInstancesFromCollection(i),n=e.getChildren(!0).length===t.length),n},G=function(t){var n,i,o,a,l,d,c,g,p,f,m=null,h=!1,C={};if(d=function(){r.notify("startProgress",C),m.prepareUpdate()},c=function(t){m.preExpandDone(),m.pushUpdate(),e.is(t)&&""!==t&&Y(m,t),r.notify("stopProgress",C),e.is(E)&&E.reHighlightMyView(),r.notify("onNodeExpanded")},o=function(){var t="";(!m.hasChildren()||!p||e.is(n.previousNodeState)&&n.previousNodeState[m.getReferencePID()]===Ce)&&_(m,{loadChildren:!0}),m.hasChildren()||(t=me),c(t);var i=r.getBehavior("TreeListViewBehavior").getDataGridView();if(e.is(i)){var o=i.getFilterViewManager();if(e.is(o)){var a=o.filterManager;if(e.is(a)){var l=a.getFilters().label.filterModel;e.is(l)&&e.is(l.nodes)&&l.nodes.length>0&&a.publish("filterModelChange",{propertyId:"label",filter:a.getFilters().label})}}}},a=function(){r.warn(u.getNLSValue("Error.ExpandFailed.Title")),g.setAdditionalInfo({queriedForChildren:!1}),c(h?ye:Ce)},l=function(){r.warn(u.getNLSValue("Info.ExpandCanceled.Title")),g.setAdditionalInfo({queriedForChildren:!1}),c(h?ye:Ce)},e.is(t)&&e.is(t.data)&&e.is(t.data.nodeModel)){if(re(t.data.nodeModel))return void t.target.preExpandDone();if(n=t.data,m=n.nodeModel,g=s.getReference(m.getReferencePID()),e.is(g))if(d(),h=m.getRoot(!0).isRootFiltered(),T)c();else if(h)c();else{f=!!e.is(n.expandAll,"boolean")&&n.expandAll,p=!s.needToQueryForChildren(g);const t=fe(),r=new Set;t.length>0&&t.forEach(function(e){r.add(e.getReferencePID())}),m.options.expandState!==me||m.hasChildren()?f&&r.size>0&&!r.has(g.get("PID"))||!f&&p?o():(i={ordered:!1,context:this,doNotExpand:!0,onFailure:a,onTimeout:a,onCancel:l},f&&(i.expandLevel=-1),s.getDescendantsFromServer(g.get("PID"),o,i)):m.hasChildren()||c(me)}}},H=function(){e.is(E)&&E.reHighlightMyView()},j=function(){r.notify("onNodeCollapsed")},K=function(t,n={}){if(e.is(n.label)&&t.setLabel(n.label),e.is(n.attributes))if(e.is(t._getRowID()))t.updateOptions({grid:n.attributes});else for(const[e,i]of Object.entries(n.attributes))t.options.grid[e]=i;B(t)},X=function(e,t){const n=t||{},i=Array.isArray(e)?P(e):P(e.split(","));if(Array.isArray(i)){Ve.prepareUpdate();for(let e of i)K(e,n);Ve.pushUpdate()}},z=function(e){e=e||{},Ve.withTransactionUpdate(function(){var t;for(t in e)Object.hasOwnProperty.call(e,t)&&X(t,{attributes:e[t]})})},q=function(e,t){var n;Array.isArray(e)&&e.length>0&&(n=Ve.searchTree(e)).length>0&&Ve.withTransactionUpdate(function(){n.forEach(function(e){e.removeAttribute(t)})})},W=function(t,n){var i,o,a,l=r.getBehavior("TreeListViewBehavior");if(Ve.prepareUpdate(),i=l.getRelationNodeOptions(t,n),e.is(i))for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a=i[o].attributes,e.is(a)&&X(o,{attributes:a}));Ve.pushUpdate()},Q=function(t){var n,i,o,a,l=s.getReference(t.getReferencePID()),u=r.getBehavior("TreeListViewBehavior"),d=r.getBehavior("GraphViewBehavior");(e.is(t)||e.is(u))&&(t.isRoot(!0)?(n=o=u.getReferenceNodeOptions(l),e.is(d)&&(a=d.getReferenceNodeOptions(l),n.grid=e.merge(o.grid,a.grid))):(i=s.getInstance(t.getInstancePID()),n=o=u.getInstanceNodeOptions(l,i,t.getAbsolutePath()),e.is(d)&&(a=d.getInstanceNodeOptions(l,i),n.grid=e.merge(o.grid,a.grid))),t.updateOptions(n),B(t))},Z=function(t,n){const i=(e=>t=>e.filter(e=>((e,t)=>e===t.getReferencePID())(t,e)||((e,t)=>!!(e=>!e.isRoot())(t)&&e===t.getInstancePID())(t,e)))(n),o=r.getBehavior("CfgColumnsBehavior");if(e.is(o)){let e={data:[],pids:[]};Ve.prepareUpdate();try{o.getCombinedEntriesFromUpdatedAttributesObj(t).forEach(([t,n])=>{const a=o.trimAttributesBasedOnVisibleDataIndices(n),l=i(t);for(let e of l)K(e,{attributes:a});e.data.push(n),e.pids.push(t)}),r.notify("updateEffectivity",e)}finally{Ve.pushUpdate()}}},Y=function(t,n){var i=n||null,o=t.getState();e.is(i)||(i=t.hasChildren()?t.isExpanded()?be:ye:me),!0===t.fromXEN?t.setState({state:me}):i!==o&&(i===he?t._expandState="expandingState":t.setState({state:i}))},ee=function(n){return new t(function(t,i){e.is(n,"function")?setTimeout(function(){e.is(V)?V.acquire().then(function(){const o=n();e.is(o.then,"function")?o.then(function(){V.release(),t()}).catch(function(e){V.release(),i(e)}):(V.release(),i("promiseSupplier is not returning a Promise"))}):i("_mutex is not initialized")},5):i("Given promiseSupplier is not a function")})},te=function(n){var i=r.getBehavior("TreeListViewBehavior");i.isInverseRelationColumnPresent()&&ee(()=>new t(function(t,i){var o,a,l,u=new Set,d=[];(o=n.filter(function(t){var n=!1;return!!e.is(t.options.areInverseRelationColumnsFilled,"boolean")&&t.options.areInverseRelationColumnsFilled||(s.needToQueryForConnections(t.getReferencePID())||e.is(t.getInstancePID())&&s.needToQueryForConnections(t.getInstancePID()))&&(n=!0),n})).length>0?(o.forEach(function(t){var n=t.getInstancePID();e.is(n)&&u.add(n),u.add(t.getReferencePID())}),u.forEach(function(e){d.push(e)}),l=R(d),(a=l.found).forEach(function(e){e.options.areInverseRelationColumnsFilled=!1}),s.getInverseConnectionsFromServer(d,{onComplete:function(){a.forEach(function(e){Q(e),e.options.areInverseRelationColumnsFilled=!0}),r.notify("nodesUpdatedInAsync",r.getId()),t()},onFailure:function(e){i(e)}})):t()})).catch(function(e){r.log("Inverse Relation Column update failed. Reason: "+e)})},ne=function(t,n){let i,o=null,a={};const l=function(){let t;return e.is(o)?t=o:(t=n.filter(function(e){return!re(e)}),o=t),t};m.isExpandFetchFetchEnabled()&&"Index"===r.getPreferenceValue("navigateOnIndex")&&!s.isAuthoringMode()&&te(l());const u=r.getBehavior("AltSubBIBehavior");e.is(u)&&u.isCmdActive()&&u.showBIStatus(l());const d=r.getBehavior("CfgColumnsBehavior");e.is(d)&&d.isAnyCfgColumnVisible()&&ie(l());const c=r.getBehavior("OperationTimeBehavior");e.is(c)&&c.isColumnVisible()&&(i=l().map(e=>e.getReferencePID()),a=e.extend(a,c.getUpdateOptionsForVisibleNodes(i),!0)),Object.keys(a).length>0&&z(a)};const we=e=>t=>{Ve.prepareUpdate();for(let n of t)n.updateOptions({areCfgColumnsFilled:e});return Ve.pushUpdate(),t};return ie=function(n){const i=we(!0),o=we(!1),a=r.getBehavior("CfgColumnsBehavior");e.is(a)&&ee(()=>(function(n,a){return new t((t,l)=>{const r=a.filter(t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled));if((e=>e.length>0)(r)){o(r);const e=n.getNodeIdsObjAsPerExternalSpec(r);n.updateAttributes(e).then(e=>{Z(e,r),i(r),t()}).catch(function(e){l("Something failed while updating Cfg attributes in Tree: "+e)})}else t()})})(a,n)).catch(function(e){r.log("Updating Configuration columns failed. Reason: "+e)})},oe=function(e){var t=P(e);Array.isArray(t)&&t.forEach(Q)},ae=function(){var t;r.getBehavior("TreeListViewBehavior").has3DHideShowColumn()&&(t=Ve.getMatchingNodeModels(function(t){var n=t.options.hideShow3D,i=!1;return e.is(n,"boolean")&&(i=!1===n),i})).length>0&&(Ve.prepareUpdate(),t.forEach(function(e){e.updateOptions({hideShow3D:!0})}),Ve.pushUpdate())},re=function(e){return e.getNodeSource()===o.NODE_SOURCE.GROUPING},se=function(e){return new o({label:u.getNLSValue(e),grid:{},useAsyncPreExpand:!1,referenceType:e+"Node",referencePID:e+"Node",hideShow3D:!0})},ue=function(e){return(e=>{const{found:t}=R([e]);return t})(e).filter(e=>!e.isRoot())},M=function(e){var t=this;t.withTransactionUpdate(function(){e.forEach(e=>{t.selectNode(e)})})},A=function(e){var t=this;t.withTransactionUpdate(function(){e.forEach(e=>{t.unSelectNode(e)})})},pe=function(e,t,n){var i=s.getReference(e);n&&(De=0),t.addNode(i,{forceDBMode:!1,isFlatView:n,rootId:e}),n||t.expandAllRoots(),Ve.reapplyFilterModel()},ge=function(e){const{found:t}=R(e);return t},fe=function(){return Ve._xso.get()},{listenTo:function(){return{changeSortIndex:this.onChangeSortIndex,Hide:this.onHideRootNode,HideAll:this.onHideAll,visibleNodesChanged:ne,updateRelationsColumn:oe,Filter3DApplied:ae,selectNodes:M,unSelectNodes:A,updateNodes:z,unsetNodeAttr:q}},onStart:function(t){var n=s.isNavigateOnDemand();b=!!e.is(t.registerRoots)&&t.registerRoots,y=e.is(t.withLinksResolved,"boolean")?t.withLinksResolved:!n,I=e.is(t.displayBadge)?t.displayBadge:null,v=e.is(t.displayBadgeRPL)?t.displayBadgeRPL:null,D=e.is(t.displayBadgePS)?t.displayBadgePS:null,w=Ve.onPreExpand(G),S=Ve.onPreCollapse(H),L=Ve.onPostCollapse(j),x(),E=r.getBehavior("CrossHighlightBehavior"),V=new a,T=!!e.is(t.noExpandServerCall,"boolean")&&t.noExpandServerCall},onStop:function(){Ve.empty(),e.is(S)&&(this.removeEventListener(S),S=void 0),e.is(L)&&(this.removeEventListener(L),L=void 0),this.removePreExpandListener(),V.destroy(),V=null},removePreExpandListener:function(){e.is(w)&&(this.removeEventListener(w),w=null)},validate:function(t){var n;return e.is(t)&&e.is(N(t.get("PID")))&&((n={}).key="AlreadyRoot",n.param="referenceName",n.paramValue=t.get("V_Name")),n},getNodeModel:function(e,t){return P(e,t)},getNodeInfo:function(t,n){var i,o=null,a=P(t,n);return i=function(e){return{label:e.getLabel(),referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),referenceType:e.getReferenceType(),absPath:e.getAbsolutePath()}},Array.isArray(a)?o=a.map(i):e.is(a,"object")&&(o=i(a)),o},addNodeModel:function(e,t){return F(e,t)},removeNode:function(t,n){var i=[],o=r.getBehavior("TaggerBehavior"),a=function(){var t=r.getBehavior("DropZoneViewBehavior");O()&&e.is(t)&&(t.setIcon(t.iconEnum.DROPHERE),t.show()),e.is(n,"function")&&n()};(e.is(t,"string")?Ve.searchTree(t):e.is(t,"array")?t:[t]).forEach(function(t){var n,a,l;e.is(o)&&(n=t.getAllDescendants(void 0,!0),e.is(n)&&(i=n.map(function(e){return{PID:e.getID(),Path:e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),event:"remove"}})),i.push({PID:t.getID(),Path:t.isRoot(!0)?t.getReferencePID():t.getAbsolutePath().toString(),event:"remove"})),t.isRoot(!0)?(l=t.getID(),Ve.removeRoot(t),!0===b&&p.removeRoot(r.getId(),l),r.notify("removeRoot",l)):(a=t.getParent())&&a.removeChild(t)}),e.is(o)?o.getNodeUpdatePromise(i).then(a).catch(a):a()},removeNodes:function(e,t){var n;Array.isArray(e)?(n=Ve.searchTree(e),this.removeNode(n,t)):t()},hideNodes:function(t){var n,i,o=[],a={};e.is(t,"array")&&t.length>0&&(n=r.getBehavior("ExpandFilterBehavior"),e.is(n)&&n.resetFilterUI(),o=t.filter(function(t){return e.is(t)&&t.isRoot(!0)}),a={callback:this.removeNode,globalArray:o,context:this,blockSize:50},Ve.prepareUpdate(),Ve.getXSO().empty(!1),s.getExecuteByBlockPromise(a).then(function(){var t=[];Ve.pushUpdate(),e.is(o,"array")&&o.length>0&&(o.forEach(function(e){var n=s.getReference(e.getID());t.push(n)}),r.notify("hideRootNode",[t])),i=p.getRoots(),e.is(i,"array")&&0===i.length&&s.resetCollections()}))},onHideRootNode:function(){this.hideNodes(Ve.getSelectedNodes())},onHideAll:function(){this.hideNodes(Ve.getRoots(!0))},updateCfgColumnsForCommandUpdates:function(e,n){const i=we(!0),o=ge(e);(e=>e.length>0)(o)&&ee(()=>(Z(n,o),i(o),t.resolve())).catch(function(e){r.log("Updating Configuration columns failed. Reason: "+e)})},onChangeSortIndex:function(t){var n=Ve.getTreeNodeModel(t.get("PID"));e.is(n)&&(n.setAttribute("sortIndex",t.get("sortIndex")),n.getParent().sortChildren({isRecursive:!1,sortFunction:function(e,t){return e.options.grid.sortIndex<t.options.grid.sortIndex?-1:1}}))},isSelected:function(t){var n=P(t,!1),i=!1;return e.is(n,"array")&&(i=n.some(function(e){return e.isSelected()})),i},isNodeAdded:function(t){var n=P(t,!0);return e.is(n)},selectNode:function(t){var n=P(t,!1);e.is(n,"array")&&n.forEach(function(e){e.isSelected()&&e.unselect(),e.select()})},unSelectNode:function(t){var n=P(t,!1);e.is(n,"array")&&n.forEach(function(e){e.isSelected()&&e.unselect()})},updateBadge:function(t,n){var i;Array.isArray(t)?(i=Ve.searchTree(t),e.is(i)&&U(i,n)):e.is(t)&&(i=P(t,!1),e.is(i)&&U(i,n))},getWUXNodeModel:function(){return Ve},unSelectAll:function(){Ve.unselectAll()},withTransactionUpdate:function(e){Ve.withTransactionUpdate(e)},prepareUpdate:function(){Ve.prepareUpdate()},pushUpdate:function(){Ve.pushUpdate()},getRoots:function(){return Ve.getRoots(!0).map(function(e){return e.getReferencePID()})},getRootNodes:function(){return Ve.getRoots(!0)},getChildren:function(t){var n=P(t,!0),i=[];return e.is(n)&&(i=n.getChildrenPID()),i},getAllDescendants:function(){return Ve.getAllDescendants(!0)},getVisibleNodesInViewport:function(){var t,n,i,o,a=r.getBehavior("TreeListViewBehavior").getTreeListViewManager(),l=[];if(e.is(a))for(i=(n=a.getDataGridViewLayout().getMinMaxVisibleRowIDs()).minRowID,t=a.getDataGridViewModel();i<=n.maxRowID;i++)o=t[i],re(o)||l.push(o);return l},getSelectedNodes:function(){return fe()},getHighlightedNodes:function(){return Ve.getHighlightedNodes()},getSelectedNodesInfo:function(){return this.getSelectedNodes().map(function(e){return{id:e.getID(),absPath:e.getAbsolutePath()}})},update3DNodeOptions:function(e){var t=this.getSelectedNodes();t.length>0&&(Ve.prepareUpdate(),t.forEach(function(t){t.updateOptions({hideShow3D:e})}),Ve.pushUpdate())},emptyNodeModel:function(){var t,n=r.getBehavior("ExpandFilterBehavior");if(e.is(n)&&n.clear(),Ve.prepareUpdate(),e.is(Ve)){const e=this.getSelectedNodes();Array.isArray(e)&&e.length>0&&Ve._xso.empty(),Ve.empty()}Ve.pushUpdate(),Ve._numberOfNodesInDocument<1&&(t=r.getBehavior("DropZoneViewBehavior"),e.is(t)&&t.show())},addEventListener:function(e,t){return Ve.getModelEvents().addEventListener(e,t)},removeEventListener:function(e){Ve.getModelEvents().unsubscribe(e)},addNode:function(t,n){var i,o,a,l,u,d=n||{},c=e.is(d.loadRootOnly,"boolean")?d.loadRootOnly:r.getPreferenceValue("loadRootOnly"),g=!e.is(d.loadChildren,"boolean")||d.loadChildren,p=!e.is(d.silentMode,"boolean")||d.silentMode,f=e.is(d.withLinksResolved,"boolean")?d.withLinksResolved:y,m=!!e.is(d.doNotExpand,"boolean")&&d.doNotExpand,h=!!e.is(d.forceDBMode,"boolean")&&d.forceDBMode,C=!!e.is(d.updateItem,"boolean")&&d.updateItem,b=e.is(d.onAddToTreeListFail,"function")?d.onAddToTreeListFail:null,I=e.is(d.onAddToTreeListComplete,"function")?d.onAddToTreeListComplete:null,v={noTimeout:!0},D=!!e.is(d.fromXEN,"boolean")&&d.fromXEN,V=!e.is(d.loadRelatedobjectsToView,"boolean")||d.loadRelatedobjectsToView;l=function(t,n){var i="";e.is(n)&&(i=n.getLabel(),g&&!n.isExpanded()&&n.expand(),Q(n),r.notify("addRootNode",[n.getID(),{loadRelatedobjectsToView:V}])),r.notify("stopProgress",v),e.is(I,"function")&&I(t,i)},u=function(n){var i=Ve.getTreeNodeModel(t.get("PID"));r.notify("stopProgress",v),Array.isArray(i)&&i.length>0&&i.forEach(function(e){e&&e.getState()===he&&(Y(e,ye),e.options.children=[])}),e.is(b,"function")&&b(n)},(d=e.merge(d,{loadChildren:g,silentMode:p,withLinksResolved:f,forceDBMode:h,updateItem:C,onFailure:u,loadRootOnly:c,fromXEN:D})).isFlatView=!!e.is(d.isFlatView,"boolean")&&d.isFlatView,Ve.prepareUpdate(),t.isReference()?(r.notify("startProgress",v),d.onEndAddToNodeList=l,k(t.get("PID"),null,d)):t.isInstance()&&(o=s.getAggregatingReferenceModelFromInstance(t),a=s.needToQueryForChildren(o),e.is(o)&&(i=Ve.searchTree(o.get("PID")),e.is(i)&&i.length>0&&i.forEach(function(e){var n,i={noTimeout:!0};r.notify("startProgress",i),n=e.getState(),k(t.get("PID"),e,d),a?(Y(e,Ce),m=!0):n===ye?$(e)||(Y(e,Ce),m=!0):n===Ce&&(Y(e,Ce),m=!0),m||e.isExpanded()||e.expand(),r.notify("stopProgress",i)}))),Ve.pushUpdate()},addOccurences:function(t){var n,i,o=[],a={},l=[],u=[];n=function(t,n){e.is(a[t])||(a[t]=[]),a[t].push(n)},i=function(t,n){var i=t.getState();e.is(n)&&n===Ce?Y(t,Ce):i===ye&&($(t)?t.expand():Y(t,Ce))},t.forEach(function(e){o=o.concat(e.filter(e=>o.indexOf(e)<0))}),Ve.searchTree(o).forEach(function(t){var i=t.getReferencePID(),o=t.getInstancePID();e.is(i)&&(n(i,t),l.indexOf(i)<0&&l.push(i)),e.is(o)&&u.indexOf(o)<0&&u.push(o)}),t.forEach(function(e){e.forEach(function(t,o){var d,c,g,p,f,m;0===o?(c=e[o],l.indexOf(c)<0?(p=s.getReference(c),m=de(p,{forceIntializeChildren:!0}),Y(m,Ce),n(c,m),l.push(c),r.notify("addRootNode",[c])):a[c].forEach(function(e){i(e)})):o%2!=0&&(u.indexOf(t)<0?(d=e[o-1],c=e[o+1],g=a[d],p=s.getReference(c),f=s.getInstance(t),g.forEach(function(e){var o=e.getState();m=ce(f,p,e,null,{forceIntializeChildren:!0}),Y(m,Ce),i(e,o),n(c,m),u.push(t),l.indexOf(c)<0&&l.push(c)})):(c=e[o+1],a[c].forEach(function(e){i(e.getParent())})))})})},updateNodeODM:function(t,n){var i=P(t);n=n||{},e.is(i,"array")&&(Ve.prepareUpdate(),i.forEach(function(e){e.setUpdatedByODM(!0)}),Ve.pushUpdate())},updateNode:function(t,n){var i=P(t);n=n||{},e.is(i,"array")&&(Ve.prepareUpdate(),i.forEach(function(t){e.is(n.loadChildren)&&n.loadChildren&&(_(t,n),(t.isSelected()||t.isRoot(!0))&&t.expand()),Q(t)}),Ve.pushUpdate())},updateAttributes:function(t){var n,i=r.getBehavior("TreeListViewBehavior");e.is(t)?(n=i.getUpdateNodeOptions(t),e.is(n)&&X(t.get("PID"),n),W(t)):r.debug("updateAttributes: Input model is undefined.")},updateDocAttributes:function(t){var n,i=r.getBehavior("TreeListViewBehavior");Ve.prepareUpdate(),n=i.getDocumentNodeOptions(t),e.is(n)&&X(t,n),Ve.pushUpdate()},reparent:function(t){var n,i,o,a,l,u,d,c=this,g={},p=function(e,t){return e.add(t)};e.is(t)&&(r.notify("startProgress",g),Ve.prepareUpdate(),a=t.formerParentsPIDArray,l=t.movedInstPIDArray,Array.isArray(a)&&(u=a.reduce(p,new Set),d=new Set,Array.isArray(l)&&(d=l.reduce(p,d)),u.forEach(function(e){var t;t=P(e),Array.isArray(t)&&t.forEach(function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.filter(function(e){return d.has(e.getInstancePID())}).forEach(function(t){e.removeChild(t)})})})),n=t.newParentPID,i=t.newInstPIDArray,e.is(n,"string")&&(o=P(n),Array.isArray(o)&&(o.forEach(function(e){e.removeChildren()}),Array.isArray(i)&&i.forEach(function(t){var n=s.getInstance(t);e.is(n)&&c.addNode(n)}))),Ve.pushUpdate(),r.notify("stopProgress",g))},expandNode:function(e){var t=Array.isArray(e)?e:[e];t.length>1&&(t=t.filter(function(e,t,n){return e.getParents().every(function(e){return-1===n.indexOf(e)})})),t.forEach(function(e){e.expandAll()})},collapseNode:function(e){var t,n;(Array.isArray(e)?e:[e]).forEach(function(e){n=e.getState(),e.hasChildren()&&n!==ye&&(t=n,e.collapseAll(),t===Ce&&(e.removeChildren(),Y(e,Ce)))})},expandAllRoots:function(){Ve.getRoots(!0).forEach(function(e){e.expandAll()})},isFilterAppliedInAnyRoot:function(){return Ve.getRoots(!0).some(function(e){return e.isRootFiltered()})},filterChildren:function(t,n){var i,o=this,a=n||null,l=!!e.is(a),r=l?{filterQuery:a}:{};i=N(t),e.is(i)&&(i.setRootFiltered(l),Ve.withTransactionUpdate(function(){i.hasChildren()&&i.getChildren(!0).slice().forEach(function(e){o.removeNode(e)}),s.getFilteredInstancesFromCollection(i.getReferencePID(),a).forEach(function(e){o.addNode(e,r)}),l?s.needToQueryForChildren(i.getReferencePID())&&i.getState()===Ce&&Y(i):s.needToQueryForChildren(i.getReferencePID())&&i.getState()!==Ce&&Y(i,Ce)}))},removeFilterFromAllRoots:function(){var t,n=this;return t=Ve.getRoots(!0).filter(function(e){return e.isRootFiltered()}),Ve.prepareUpdate(),t.forEach(function(e){e.setRootFiltered(!1)}),Te.traverseTreeListView(function(t){t.getState()===ye&&(t.getChildren(!0).slice().forEach(function(e){n.removeNode(e)}),e.is(t.options.children)||(t.options.children=[])),Y(t,Ce)}),Ve.pushUpdate(),t.map(function(e){return e.getReferencePID()})},isDocumentEmpty:function(){return O()},setTaggerColor:function(e,t){var n;Array.isArray(e)&&(n=R(e).found,Array.isArray(n)&&n.length>0&&(Ve.prepareUpdate(),n.forEach(function(e){e.updateOptions({color:t.color})}),Ve.pushUpdate()))},getMutex:function(){return V},updateNodeOptions:function(t,n){var i;(i=R(t).found).length>0&&(Ve.prepareUpdate(),i.forEach(function(t){var i=e.clone(n);t.updateOptions(i)}),Ve.pushUpdate())},setSortOptions:function(e,t){Ie.virtualColumnID=e,Ie.sortOrder=t},isFakeNodeModel:function(e){return re(e)},getGroupingNode:function(e){return se(e)},addGroupingNode:function t(n,i,a,l,d){var c,g=[],p=r.getBehavior("TreeListViewBehavior");return e.is(a)&&a.length>0?(g=a.map(function(e){var t;return t=e.isReference()?p.getReferenceNodeOptions(e):p.getInstanceNodeOptions(s.getReferenceModelFromInstance(e),e),new o(t)}),c=new o({label:u.getNLSValue(n),children:g,grid:{},useAsyncPreExpand:!1,referenceType:n+"Node",referencePID:n+"Node",hideShow3D:!1}),i.addChild(c)):e.is(l)&&l?(c=new o({label:u.getNLSValue(n),grid:{},icons:[u.getIconURLFromKey(d)]}),i.addChild(c)):(c=se(n),i.addChild(c),Object.keys(a).forEach(function(e){t(e,c,a[e])})),c.isExpanded()||c.expand(),c},addNodeToGroupNode:function(e,t,n){var i,a;return i=r.getBehavior("TreeListViewBehavior").getReferenceNodeOptions(e),a=new o(i),t.addChild(a,n),a},getTreeDocument:function(){return Ve},showOverlay:function(){var t,n,i=u.getNLSValue("View.WaitMessage"),o=r.getBehavior("TreeListViewBehavior");if(e.is(o)){for(t=o.getDataGridView();ve.length>0;)ve.shift().resolve();n=e.Promise.deferred(),ve.push(n),t.displayModalLoader(i,function(){n.promise.then(function(){t.removeModalLoader(i)})})}},removeOverlay:function(){1===ve.length&&ve.shift().resolve()},updateNodeState:function(e,t){Y(e,t)},getWhereUsedInstanceIds:function(e){return ue(e).map(e=>e.getInstancePID())},getWhereUsedInstanceIdsUnderParent:function(t){let n=[];const i=P(t);if(Array.isArray(i)&&i.length>0){const o=i.filter((t=>n=>e.equals(n.getAbsolutePath(),t))(t));if(1===o.length){const e=o[0];n=(e=>e.getBrothers())(e).concat(e).filter((e=>t=>t.getReferencePID()===e)(e.getReferencePID())).map(e=>e.getInstancePID())}}return n},resetConfigColumns:function(){const n=we(!1),i=(t,i)=>{const o=t.filter(t=>e.owns(t.options,"areCfgColumnsFilled"));o.length>0&&n(o),e.is(i,"function")&&i()},o=this;(e=>new t(n=>{ee(()=>(e=>new t(t=>{const n={callback:i,globalArray:e,context:null,blockSize:100};s.getExecuteByBlockPromise(n).then(()=>{t()}).catch(()=>{t()})}))(e)).then(function(){n()}).catch(function(e){r.log("Resetting Configuration columns failed. Reason: "+e),n()})}))(o.getAllDescendants()).then(function(){ie(o.getVisibleNodesInViewport())})},getFlattenNodeModel:function(t,n){var i=this;e.is(t)&&t.forEach(function(e){pe(e,i,n)})}}}}}),define("DS/DELWKOViewBehaviors/DELWKOCellManagerCloud",["UWA/Core","DS/Utilities/Utils","DS/DELPPWModelServices_FD02/BehaviorUtil"],function(e,t,n){"use strict";return function(i,o,a,l,r,s){var u=s.getGroupingAdditonalColumns(),d=i.getBehavior("ModelBehavior"),c=i.getBehavior("WUXNodeModelBehavior"),g=function(t){var n;return e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options,t.dataIndex)&&(n=t.nodeModel.options[t.dataIndex]),n},p=function(e,t){var n={};n.node=t.nodeModel;var o=t.nodeModel,l=a.getPPRType(o._referencePID);"WORKORDER"!==l&&"EXECHEADER"!==l&&"STEP"!==l||"AuxiliaryModule"!=i.getName()&&e.command&&s.executeCommand(e.command,n)},f=function(t,n){var i,a,r,s,u={cellValue:"",isAttrExists:!1,unit:""},d=l.getAttributeInfoFromColumn(t);if(e.is(t.dicoType,"array")&&t.dicoType.length>0)for(r=t.dicoType.length,i=0;i<r;i++)if(a=t.dicoType[i]+"."+t.dataIndex,e.is(n.nodeModel)&&Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a)){s=o.getAttributeInfo(t.dicoType[i]+"."+d.dataIndex),e.is(s)&&l.hasMagnitude(s)&&(u.unit=n.nodeModel.options.grid[a].replace(/[0-9\.]+/g,"")),u.cellValue=n.nodeModel.options.grid[a],u.isAttrExists=!0;break}return u};return{getBICellValue:function(e){return g(e).colorCode},getMultiTypeCellValue:function(e){var t=this.getColumnOrGroup(e.columnID);return f(t,e).cellValue},getMultiTypeCellSemantics:function(e){var t=this.getColumnOrGroup(e.columnID);return{units:f(t,e).unit}},getMultiTypeCellEditableState:function(e){var t,n;return s.areModuleColumnsImmutable(i.getId())?n=!1:(t=this.getColumnOrGroup(e.columnID),n=f(t,e).isAttrExists),n},getBICellValueForExport:function(t){var n="";return e.is(t.cellModel,"string")?n=t.cellModel:(n=g(t),n=e.is(n)?n.tooltip:""),n},setValue:t.debounce(function(t,o){var s,u,c,g,p,f,m=this,h=[];if(f=this.getColumnOrGroup(t.columnID),g=l.getNodeAndColumnInfos(t.nodeModel,f),p=l.isMultiValuated(g.attributeInfo),!l.doesAttributeExist(g.objectToBeModified,g.dataIndex)&&!l.isAttrApplicableForType(g.objectToBeModified,g.dataIndex))return i.warn(r.getNLSValue("TableView.AvailabilityFailure",{key:g.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(l.isBoolean(g.attributeInfo))p&&(o=l.getValueAsArray(o,l.getType(g.attributeInfo)));else if(l.hasRangeDefined(g.attributeInfo,g.attributeDef)){if(!e.is(o))return;o=l.getAuthorizedValue(g.attributeInfo,g.attributeDef,o)}else if(l.isDate(g.attributeInfo)){if(o=e.is(o)?o:"",p)for(h=l.getValueAsArray(o),o=[],c=0;c<h.length;c++){if(u=new Date(h[c]),isNaN(u.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:h[c]})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o.push(Math.floor(u.getTime()/1e3))}else if(u=new Date(o),n.isCloud())o=u.toISOString();else{if(isNaN(u.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:o})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o=Math.floor(u.getTime()/1e3)}t.nodeModel.setAttribute(t.dataIndex,o),this.updateRenderedRow(t.rowID)}else if(p)o=l.getValueAsArray(o,l.getType(g.attributeInfo));else if(e.is(t.cellModel)){if(l.isInteger(g.attributeInfo)&&!Number.isInteger(o))return void i.warn(r.getNLSValue("TableView.InvalidIntegerValue",{attr:g.attributeNLSTitle,value:o}))}else if((s=l.getMaxLength(g.attributeInfo))>0&&o.length>s)return void i.warn(r.getNLSValue("TableView.MaxLengthFailure",{length:o.length,maxLength:s}));"V_SequencingMode"===g.dataIndex?a.setSequencingMode(g.objectToBeModified.id,o,{onFailure:function(){i.warn(r.getNLSValue("SetSequencingModeUI.UpdateFailure"))},onComplete:function(){i.info(r.getNLSValue("SetSequencingModeUI.UpdateSuccess")),i.notify("setSequencingMode")}}):e.is(d)&&d.updateModelAttribute(g.objectToBeModified.id,g,o,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),m._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})},100,!0),getCellValue:function(t,n){var i=l.getNodeAndColumnInfos(n.nodeModel,t),o=l.isMultiValuated(i.attributeInfo),a=l.hasMagnitude(i.attributeInfo),s=l.hasRangeDefined(i.attributeInfo),u=n.nodeModel.options.grid[t.dataIndex];if("type"===i.attributeName&&(u=r.getNLSValue("Type."+u)),a)u=l.getMagnitudeValue(u,i.attributeInfo,!1);else if(o)l.isDate(i.attributeInfo)&&u&&(u=u.map(function(e){return l.getFormattedDate(e)})),u=l.getValueAsString(u,l.getType(i.attributeInfo));else if(l.isDate(i.attributeInfo))return u=s?e.is(u)?l.getFormattedDate(u):void 0:e.is(u)?l.getDate(u):void 0;return e.is(u)?u:""},getCustomStringCellValue:function(e){var t=e.nodeModel.getAttributeValue(e.dataIndex),n=r.getNLSValue("Column.MakeOrBuy.Make"),i=r.getNLSValue("Column.MakeOrBuy.Buy");return o.isAKindOf(t,"CreateKit")||o.isAKindOf(t,"CreateAssembly")||o.isAKindOf(t,"CreateMaterial")||o.isAKindOf(t,"Installation")?n:o.isAKindOf(t,"Provide")?i:""},getURLCellValue:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex);return(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=n.defaultValue),{label:i,func:p.bind(this,n,t),getLabel:function(){return this.label}}},getFullOwnerURL:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),o=e.is(i)?a.getReferenceModel(t.nodeModel._referencePID):null,l=e.is(o)?o.get("ds6w:responsible"):"";return{label:e.is(l)?l:e.is(i)?i:"",func:p.bind(this,n,t),getLabel:function(){return this.label}}},hasCellValue:function(t){var n,i,o,r,s,u;if(e.is(t.nodeModel)&&c.isFakeNodeModel(t.nodeModel)||!e.is(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"NonEditable":case"URL":o=!0;break;case"BIEssentials":case"BIEssentialsAltSub":r=g(t),o=!(!e.is(r)||"transparent"===r.colorCode);break;case"DocMgmt":r=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(r,"array")&&r.length>0;break;case"NonEditableMultiType":case"MultiType":o=(r=f(n,t)).isAttrExists;break;default:i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),u=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||u):o=!1}return o},getCellValueForDocMgt:function(e){var t;if(!e.isHeader&&(t=e.nodeModel.getAttributeValue(e.dataIndex),Array.isArray(t))){const e=t.length;if(1===e)return t[0].title;if(e>1)return`${t[0].title} ...`}return""},getURLCellValueForExport:function(t){var n=t.cellModel;return t.rowID>=0&&e.is(t.cellModel)&&(n=t.cellModel.getLabel()),n},getGroupingColumnCellValue:function(e){var t,n=this.getColumnOrGroup(e.columnID);return n.dataIndex===u.Type?(t=e.nodeModel.getReferenceType(),r.getNLSValue("Type."+t)):n.dataIndex===u.Reference?e.nodeModel.getReferencePID():void 0}}}}),define("DS/DELWKOViewBehaviors/DELWKOCellManager",["UWA/Core","DS/Utilities/Utils","DS/DELPPWModelServices_FD02/BehaviorUtil"],function(e,t,n){"use strict";return function(i,o,a,l,r,s){var u=s.getGroupingAdditonalColumns(),d=i.getBehavior("ModelBehavior"),c=i.getBehavior("WUXNodeModelBehavior"),g=function(t){var n;return e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options,t.dataIndex)&&(n=t.nodeModel.options[t.dataIndex]),n},p=function(e,t){var n={};n.node=t.nodeModel,e.command&&s.executeCommand(e.command,n)},f=function(t,n){var i,a,r,s,u={cellValue:"",isAttrExists:!1,unit:""},d=l.getAttributeInfoFromColumn(t);if(e.is(t.dicoType,"array")&&t.dicoType.length>0)for(r=t.dicoType.length,i=0;i<r;i++){var c=l.getNodeAndColumnInfos(n.nodeModel,t),g=l.isAttrApplicableForType(c.objectToBeModified,c.dataIndex);if(a=t.dicoType[i]+"."+t.dataIndex,e.is(n.nodeModel)&&Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a)){s=o.getAttributeInfo(t.dicoType[i]+"."+d.dataIndex),e.is(s)&&l.hasMagnitude(s)&&(u.unit=l.getNLSForUnit(s)),u.cellValue=n.nodeModel.options.grid[a],u.isAttrExists=!0;break}if("MultiType"===t.displayType&&!l.isDate(c.attributeInfo)&&(!e.is(n.nodeModel)||!Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a))&&g){a=t.dataIndex,u.cellValue=n.nodeModel.options.grid[a],u.isAttrExists=!0;break}}if(""===u.cellValue&&(c=l.getNodeAndColumnInfos(n.nodeModel,t),l.isDate(c.attributeInfo))){var p=l.hasRangeDefined(c.attributeInfo),f=n.nodeModel.options.grid[t.dataIndex];u.cellValue=p?e.is(f)?l.getFormattedDate(f):void 0:e.is(f)?l.getDate(f):void 0}return u};return{getBICellValue:function(e){return g(e).colorCode},getMultiTypeCellValue:function(e){var t=this.getColumnOrGroup(e.columnID);return f(t,e).cellValue},getMultiTypeCellSemantics:function(e){var t=this.getColumnOrGroup(e.columnID);return{units:f(t,e).unit}},getMultiTypeCellEditableState:function(e){var t,n;return s.areModuleColumnsImmutable(i.getId())?n=!1:(t=this.getColumnOrGroup(e.columnID),n=f(t,e).isAttrExists),n},getMultiTypeCellRepresentation:function(t){var n="float";return e.is(t)&&e.is(t.Type)&&"Date"===t.Type&&(n="datetime"),e.is(t)&&e.is(t.Type)&&"Integer"===t.Type&&(n="integer"),n},getBICellValueForExport:function(t){var n="";return e.is(t.cellModel,"string")?n=t.cellModel:(n=g(t),n=e.is(n)?n.tooltip:""),n},setValue:t.debounce(function(t,o){var s,u,c,g,p,f,m=this,h=[];if(f=this.getColumnOrGroup(t.columnID),g=l.getNodeAndColumnInfos(t.nodeModel,f),p=l.isMultiValuated(g.attributeInfo),!l.doesAttributeExist(g.objectToBeModified,g.dataIndex)&&!l.isAttrApplicableForType(g.objectToBeModified,g.dataIndex))return i.warn(r.getNLSValue("TableView.AvailabilityFailure",{key:g.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(l.isBoolean(g.attributeInfo))p&&(o=l.getValueAsArray(o,l.getType(g.attributeInfo)));else if(l.hasRangeDefined(g.attributeInfo,g.attributeDef)){if(!e.is(o))return;o=l.getAuthorizedValue(g.attributeInfo,g.attributeDef,o)}else if(l.isDate(g.attributeInfo)){if(o=e.is(o)?o:"",p)for(h=l.getValueAsArray(o),o=[],c=0;c<h.length;c++){if(u=new Date(h[c]),isNaN(u.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:h[c]})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o.push(Math.floor(u.getTime()/1e3))}else if(u=new Date(o),n.isCloud())o=u.toISOString();else{if(isNaN(u.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:o})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o=Math.floor(u.getTime()/1e3)}t.nodeModel.setAttribute(t.dataIndex,o),this.updateRenderedRow(t.rowID)}else if(p)o=l.getValueAsArray(o,l.getType(g.attributeInfo));else if(e.is(t.cellModel)){if(l.isInteger(g.attributeInfo)&&!Number.isInteger(o))return void i.warn(r.getNLSValue("TableView.InvalidIntegerValue",{attr:g.attributeNLSTitle,value:o}))}else if((s=l.getMaxLength(g.attributeInfo))>0&&o.length>s)return void i.warn(r.getNLSValue("TableView.MaxLengthFailure",{length:o.length,maxLength:s}));"V_SequencingMode"===g.dataIndex?a.setSequencingMode(g.objectToBeModified.id,o,{onFailure:function(){i.warn(r.getNLSValue("SetSequencingModeUI.UpdateFailure"))},onComplete:function(){i.info(r.getNLSValue("SetSequencingModeUI.UpdateSuccess")),i.notify("setSequencingMode")}}):e.is(d)&&d.updateModelAttribute(g.objectToBeModified.id,g,o,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),m._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})},100,!0),getCellValue:function(t,n){var i=l.getNodeAndColumnInfos(n.nodeModel,t),o=l.isMultiValuated(i.attributeInfo),a=l.hasMagnitude(i.attributeInfo),s=l.hasRangeDefined(i.attributeInfo),u=n.nodeModel.options.grid[t.dataIndex];if("type"===i.attributeName&&(u=r.getNLSValue("Type."+u)),a)u=l.getMagnitudeValue(u,i.attributeInfo,!1);else if(o)l.isDate(i.attributeInfo)&&u&&(u=u.map(function(e){return l.getFormattedDate(e)})),u=l.getValueAsString(u,l.getType(i.attributeInfo));else if(l.isDate(i.attributeInfo))return u=s?e.is(u)?l.getFormattedDate(u):void 0:e.is(u)?l.getDate(u):void 0;return e.is(u)?u:""},getCustomStringCellValue:function(e){var t=e.nodeModel.getAttributeValue(e.dataIndex),n=r.getNLSValue("Column.MakeOrBuy.Make"),i=r.getNLSValue("Column.MakeOrBuy.Buy");return o.isAKindOf(t,"CreateKit")||o.isAKindOf(t,"CreateAssembly")||o.isAKindOf(t,"CreateMaterial")||o.isAKindOf(t,"Installation")?n:o.isAKindOf(t,"Provide")?i:""},getURLCellValue:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex);return(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=n.defaultValue),{label:i,func:p.bind(this,n,t),getLabel:function(){return this.label}}},getFullOwnerURL:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),o=e.is(i)?a.getReferenceModel(t.nodeModel._referencePID):null,l=e.is(o)?o.get("ds6w:responsible"):"";return{label:e.is(l)?l:e.is(i)?i:"",func:p.bind(this,n,t),getLabel:function(){return this.label}}},hasCellValue:function(t){var n,i,o,r,s,u;if(e.is(t.nodeModel)&&c.isFakeNodeModel(t.nodeModel)||!e.is(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"NonEditable":case"URL":o=!0;break;case"BIEssentials":case"BIEssentialsAltSub":r=g(t),o=!(!e.is(r)||"transparent"===r.colorCode);break;case"DocMgmt":r=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(r,"array")&&r.length>0;break;case"NonEditableMultiType":case"MultiType":o=(r=f(n,t)).isAttrExists,i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),u=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||u):o=!1;break;default:i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),u=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||u):o=!1}return o},getCellValueForDocMgt:function(e){var t;if(!e.isHeader&&(t=e.nodeModel.getAttributeValue(e.dataIndex),Array.isArray(t))){const e=t.length;if(1===e)return t[0].title;if(e>1)return`${t[0].title} ...`}return""},getURLCellValueForExport:function(t){var n=t.cellModel;return t.rowID>=0&&e.is(t.cellModel)&&(n=t.cellModel.getLabel()),n},getGroupingColumnCellValue:function(e){var t,n=this.getColumnOrGroup(e.columnID);return n.dataIndex===u.Type?(t=e.nodeModel.getReferenceType(),r.getNLSValue("Type."+t)):n.dataIndex===u.Reference?e.nodeModel.getReferencePID():void 0}}}}),define("DS/DELWKOViewBehaviors/DELWKOExpandFilterBehavior",["UWA/Core","UWA/Promise"],function(e,t){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","ProxyPlugin","TreeViewPlugin","RootsPlugin","BIPlugin"],creator:function(n,i,o,a,l,r,s,u){var d,c,g,p,f,m,h,C,b,y,I,v,D,V,T,w,S,L,M=["union","intersection","minus"],A=["config_filter","sequence_filter","root_path_physicalid"],E=[];return f=function(t){var n;return n=i.getBehavior(t),e.is(n)||i.debug(t+"is not available"),n},m=function(t){var n=f("WUXNodeModelBehavior"),i=!1;return e.is(n)&&(i=n.getRoots().some(function(e){return-1!==t.indexOf(e)})),i},h=function(t){var n,o,a,l=t||null,s=null,u=[];r.getActiveView()===i.getId()&&(l=e.is(l,"string")?JSON.parse(l):l,n=e.is(l)?l.CVQueryV2:{},u=e.is(l.filterRootIds)?l.filterRootIds:[],a=!!e.is(l.empty)&&l.empty,o=u.reduce(function(t,n){var i;return i=e.is(n,"array")&&n.length>0?n[0]:n,e.is(i,"string")&&t.push(i),t},[]),m(o)&&(s=e.is(l.CVQuery3D)?l.CVQuery3D:null,a?b(o,n,s):C(o,n,s)))},C=function(n,l,r){var s={};i.notify("startProgress",s);var d=[];n.forEach(function(e){y(e,l),o.needToQueryForChildren(e)&&d.push(new t(function(t,n){var i=function(){n(a.getNLSValue("ExpandFilter.ApplyFilter.ExpandFailed"))},l={ordered:!1,context:this,doNotExpand:!0,expandLevel:-1,onFailure:i,onTimeout:i,onCancel:i};o.getDescendantsFromServer(e,function(e){t(e)},l)}))}),e.Promise.all(d).then(function(d){new t(function(t,i){var s,u=function(){i(a.getNLSValue("ExpandFilter.ApplyFilter.ExpandFailed"))};e.is(l)&&e.is(n)&&(s={ordered:!1,context:this,doNotExpand:!0,expandLevel:-1,filterQuery:l,filterQuery3d:r,onFailure:u,onTimeout:u,onCancel:u},o.getDescendantsFromServer(n,function(e){t(e)},s))}).then(function(t){var o;0===(e.is(t.instancesAndReferences)?t.instancesAndReferences:[]).length?i.warn(a.getNLSValue("ExpandFilter.EmptyResult.Message")):(o=f("Viewer3DBehavior"),e.is(o)&&(!0===p&&i.notify("Filter3DApplied"),!0===g&&o.unHideAll3D())),!0===u.getBICmdState()&&i.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),v(n,l),i.notify("stopProgress",s),i.notify("ExpandFilterApplied")},function(e){i.warn(e),i.notify("stopProgress",s)})})},b=function(t,n){var a=f("Viewer3DBehavior"),l={};0<t.length&&t.every(function(e){return""!==e})&&(i.notify("startProgress",l),t.forEach(function(e){I(e),o.removeFilterFromCollection(e,n)}),e.is(a)&&(!0===p&&i.notify("Filter3DApplied"),!0===g&&a.unHideAll3D()),!0===u.getBICmdState()&&i.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),v(t),i.notify("stopProgress",l),i.notify("ExpandFilterRemoved"))},y=function(t,n){var i,o,a={operator:null,filters:[]};i=function(e,t){var n,i=null;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)>-1){i=n;break}return i}(n,M),e.is(i)&&(a.operator=i,o=n[i].expand,Array.isArray(o)&&(a.filters=o.map(function(e){var n={};return Object.keys(e).filter(function(n){var i,o,a,l=!1;return(i=A.indexOf(n)>-1)&&"root_path_physicalid"===n&&(o=e[n],Array.isArray(o)&&o.length>0&&(a=o[0],Array.isArray(a)&&(l=1===a.length&&a[0]===t))),!l&&i}).forEach(function(t){n[t]=e[t]}),n}))),a.originalFilterQuery=n,s.addRootFilter(t,a)},I=function(e){s.removeRootFilter(e)},v=function(t,n){var i,o=f("WUXNodeModelBehavior");i=e.is(n)?n:null,e.is(o)&&t.forEach(function(e){o.filterChildren(e,i)})},D=function(){var t,n,i=f("WUXNodeModelBehavior");e.is(d)&&e.is(i)&&(n=c.appContext.widget,t=i.getRoots(),d.resetNGFilterUI({appId:n.data.app3DSharedId,widgetId:n.getId(),rootIds:t}))},V=function(){var t=o.isAuthoringMode(),n=f("WUXNodeModelBehavior"),l="ExpandFilter.AuthoringON.FilterDisabled";e.is(n)&&t&&n.isFilterAppliedInAnyRoot()&&(!0===u.getBICmdState()&&(i.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),l="ExpandFilter.AuthoringON.FilterAndBIDisabled"),D(),n.removeFilterFromAllRoots().forEach(function(e){I(e)}),i.info(a.getNLSValue(l)),i.notify("ExpandFilterRemovedOnAuthoring"))},T=function(e){f("TaggerBehavior").onColorize(e)},w=function(){f("TaggerBehavior").onUnColorize()},S=function(t){e.is(d)&&d.removeRoot(t)},L=function(){e.is(d)&&(r.getActiveView()!==i.getId()?d.deactivate():d.activate())},{listenTo:function(){return{authoringMode:V,removeRoot:S,activeViewChange:L}},onStart:function(t){var i,o;c=n.getConfig(),i=!!e.is(t.disableExpandFilter)&&t.disableExpandFilter,g=!!e.is(t.unhide3DOnFilterApplication,"boolean")&&t.unhide3DOnFilterApplication,p=!!e.is(t.support3DFilter,"boolean")&&t.support3DFilter,i||(o=c.appContext.widget.data,d=l.create(l.PROXY.FilterProxy,{processingMode:"appProcessing",appId:o.app3DSharedId,colorize:!0,volumeFilterAvailable:1,synthesis_priority:1,ExpandSynthesisON:!0,shareFilterSpec:!0}),e.is(d.setNGFilterOptions,"function")&&(d.setNGFilterOptions({expandServices:"progressive",appId:o.app3DSharedId}),d.setSynthesisMode("occurrence")),d.addEvent("ApplyNGFilter",h),d.addEvent("FilterBIColorize",T),d.addEvent("FilterBIUnColorize",w),E.push(n.addExternalListener("RemoveNGFilter",h)))},onStop:function(){var t,i;for(t=0,i=E.length;t<i;t++)n.removeExternalListener(E[t]);E=[],e.is(d)&&(d.removeEvent("ApplyNGFilter"),d.removeEvent("FilterBIColorize"),d.removeEvent("FilterBIUnColorize"),D(),d.destroy(),d=null)},resetFilterUI:function(){D()},clear:function(){var t=f("TaggerBehavior");e.is(d)&&(d.cleanProxy(),t.clear())},getFilterProxy:function(){return d},setTagsWithExpandSynthesis:function(t){var n,i=[t];e.is(d)&&(n={type_filter_bo:["PLMCoreReference"]},d.setTagsWithExpandSynthesis(i,n))},applyFilter:function(e,t){d.areRootsSharable(e.objIds,e.biProxyCtx).then(function(n){n.forEach(function(t){var n=t.rootId,i=t.hasFilter;d.removeRoot(n),!0===i&&d.shareFilterSpec({fromRootId:n,fromSourceCtx:e.biProxyCtx,fromDropOnFilter:!1,callback:function(e){1===e.success.length&&C([n],e.success[0].filter.CVQuery,null)}})}),t()})}}}}}),define("DS/DELWKOViewBehaviors/DELWKORelationsColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,i){var o,a,l={"SerializedFrom.relation":{command:"DELWKOWorkBookCmdHdr"},"AssetContext.relation":{command:"DELWKOFAMCmdHdr"},"Build.relation":{command:"DELWKOExploreInWebAppCmdHdr"}};return o=function(e){var n=t.getBehavior("LinkBehavior").getImpactedConnections(e.nodeModel.getReferencePID()),o={};l[e.dataIndex]?(o.cellInfos=e,o.connections=n,i.executeCommand_V2(l[e.dataIndex].command,o)):(o.node=e.nodeModel,i.executeCommand("Relations",o))},a=function(a){var l,r=void 0,s=this,u=[],d=this.getColumnOrGroup(a.columnID),c=a.nodeModel.getAttributeValue(d.dataIndex);return e.is(c,"array")&&c.length>0&&((l=c).forEach(function(e){u.push({icon:{iconPath:n.getIconURLFromKey(e.Icon),iconSize:{width:"22px",height:"22px"}},label:e.Value,iconName:e.Icon,func:i.areModuleColumnsImmutable(t.getId())?null:o.bind(s,a),relations:l})}),u.func=i.areModuleColumnsImmutable(t.getId())?null:o.bind(s,a),r=u),r},{getCellValueForExport:function(t){var n,i,o="";return t.rowID<0?t.cellModel:(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),e.is(i,"array")&&i.forEach(function(t,n){e.is(t.Value)?o+=t.Value:o+=t.toString(),n!==i.length-1&&(o+=", ")}),o)},getCellValue:function(e){return a.call(this,e)},hasCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.options.grid;return Array.isArray(n[t.dataIndex])&&0!==n[t.dataIndex].length},getCellClassName:function(t){var n,i="";return e.is(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(t.dataIndex),i=Array.isArray(n)&&n.length>1?"relation-column-multivalued":"relation-column"),i}}}}),define("DS/DELWKOViewBehaviors/DELWKOViewBehavior",["UWA/Core","DS/DELWKOViewBehaviors/DELWKOFormUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/SelectionControl","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/DataCollectionUI","DS/DELWKOComponentsFactory/DELWKOCreateWorkOrderFromProcessDataCollectionUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ImplementUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ImplementedRevChooserUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/MfgItemCreateReportUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ConfirmationDialog","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/MessageDialog"],function(e,t,n,i,o,a,l,r,s,u){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","WebServicePlugin","AttributePlugin","DicoPlugin","DatabasePlugin","SelectionPlugin","ImplementPlugin","PlatformPlugin"],creator:function(d,c,g,p,f,m,h,C,b,y,I){var v=function(e,t){var n=[null].concat(t),i=g.getComponent(e);return new(Function.prototype.bind.apply(i,n))};return{onStart:function(){},onStop:function(){},getComponent:function(e){return g.getComponent(e)},showConfirmation:function(e,t,n,i,o){new s(this,o).show(e,t,n,i)},showMessage:function(e,t){new u(this,c).show(e,t)},showWithMessage:function(e,t,n){new u(this,c).showWithMessage(e,t,n)},createElement:function(){var e=Array.prototype.slice.call(arguments);return v("Element",e)},create:function(s,u){var D,V,T,w,S,L=[],M=Array.prototype.slice.call(arguments,1);switch(s){case"Panel":S=this.getComponent("WUXDockAreaEnum"),(D=new(g.getComponent("Panel"))(u)).allowedDockAreas=S.LeftDockArea|S.RightDockArea;break;case"Tree":D=new(g.getComponent("Tree"))({height:"inherit",width:"100%",apiVersion:2,selection:{toggle:!1,canMultiSelect:!1},styles:{height:"100%",width:"100%"}});break;case"Dialog":T=g.getComponent("WUXFrameWindowsManager").getFrameWindow(c.getAppContext()),V={position:{my:"center",at:"center"},immersiveFrame:d.getConfig().isFacet?d.getConfig().immersiveFrame:T.getImmersiveFrame()},e.extend(u,V),(D=new(g.getComponent("CustomDialog"))(u)).addEventListener("contextmenu",function(e){e.preventDefault()}),e.is(D.buttons.Ok)?D.buttons.Ok._giveFocus():D.buttons.Cancel&&D.buttons.Cancel._giveFocus(),D.addEventListener("keypress",function(e){"Enter"===e.key&&(D.buttons.Ok&&!D.buttons.Ok.disabled&&D.buttons.Ok._isFocused()?D.buttons.Ok.onClick():D.buttons.Cancel&&!D.buttons.Cancel.disabled&&D.buttons.Cancel._isFocused()&&D.buttons.Cancel.onClick())});break;case"Filter":(Array.isArray(u.filterToolbarSections)?u.filterToolbarSections:["PROCESS","SYSTEM","RESOURCE","PART","PRODUCT","PARENT","PPLAN","BUILDS"]).forEach(function(e){"PARENT"===e?L.push({item:e,iconElemName:"CreateInstance",isSelected:!1}):L.push({item:e,iconElemName:e,isSelected:!0})}),w=L.reduce(function(t,n){var i=p.getNLSValue("PPRTYPE."+n.item),o=p.getIconElem(n.iconElemName),a=!!e.is(n.isSelected,"boolean")&&n.isSelected;return t[n.item]={text:i,tooltipText:i,title:o,pinned:a},t},{}),D=new(g.getComponent("Segmented"))({multiSelect:!0,data:w});break;case"SelectionControl":(D=new n(d,c,g,p,h)).createUI(u);break;case"FormUI":(D=new t(d,c,g,p,m,h)).createUI(u);break;case"DataCollectionUI":(D=new i(d,c,g,p,f,m,h)).createUI(u);break;case"DELWKOCreateWorkOrderFromProcessDataCollectionUI":(D=new o(d,c,g,p,f,m,h)).createUI(u);break;case"ImplementUI":(D=new a(d,c,this,p,C,b,y)).createUI(u);break;case"ImplementedRevChooserUI":(D=new l(d,c,this,p,C,I,b)).createUI(u);break;case"MfgItemCreateReportUI":(D=new r(d,c,this,p,C,g)).displayReport(u);break;default:D=v(s,M)}return D}}}}}),define("DS/DELWKOViewBehaviors/DELWKOColumnManager",["UWA/Core","DS/DELWKOViewBehaviors/DELWKOCellManager","DS/DELWKOViewBehaviors/DELWKORelationsColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManagerMFN","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RWU/RWUColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MCRColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MSOColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/DataCollectRowColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/HideShow3DColumnManager","DS/DELPPWViewBehaviors_FD02/CfgColumnsBehavior/CfgCellManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RPColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/CoProduct/CoProductColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeColumnManager"],function(e,t,n,i,o,a,l,r,s,u,d,c,g,p,f){"use strict";return function(m,h,C,b,y,I,v,D,V,T,w,S){var L,M,A,E,x,P,R,N,O,F=w.getGroupingAdditonalColumns(),B=h.getBehavior("WUXNodeModelBehavior"),U=new u(h,D),W=new t(h,I,y,v,D,w),k=new a(h,y,D,S,V),_=new c(h,I,y,D),G=new n(h,D,w),H=(new g(h,v,y,I,D),new p(h,v,y,I,D)),j=(new f(h,v,y,I),new r(h,I,y,v,D,w));return P=(P=(P=(P=(P=[]).concat(k.getNonModelDataIndexes())).concat(U.getNonModelDataIndexes())).concat(H.getNonModelDataIndexes())).concat(_.getNonModelDataIndexes()),M=function(t){var n,i,o,a,l={treeDataIndex:null,label:null,labelIsOnRef:null,dicoType:null},r=h.getPreferenceValue("separator");if(e.owns(t,"name")&&"Auxiliary"===t.name&&e.owns(t,"Label")&&e.is(t.Label.length)&&t.Label.length>1)for(l.treeDataIndex="",l.label="",l.dicoType="",o=t.Label,i=0;i<o.length;i++)l.treeDataIndex+=t.Label.dataIndex,l.dicoType+=t.Label.dicoType,n=l.treeDataIndex.split("."),l.label+=n[0],a=n[1],l.labelIsOnRef="instance"===a?!!e.is(l.labelIsOnRef)&&l.labelIsOnRef&&!1:!e.is(l.labelIsOnRef)||l.labelIsOnRef&&!0,i+1!==o.length&&(l.label+=r,l.type+=r,l.dicoType+=r,l.treeDataIndex+=r);else e.owns(t,"Label")&&(l.treeDataIndex=t.Label.dataIndex,l.dicoType=t.Label.dicoType,n=l.treeDataIndex.split("."),l.label=n[0],a=n[1],l.labelIsOnRef="instance"!==a);return l},A=function(t){var n=[];return e.is(t.dicoType,"array")&&(n=t.dicoType.map(function(t){return e.is(t,"object")&&e.owns(t,"dicoType")?t.dicoType:t})),n},E=function(t){let n=t;Array.isArray(n)||(n=[n]);const a=h.getBehavior("CfgColumnsBehavior");if(e.is(a)){const e=a.computeVisibleConfigColDataIndices(n);a.setVisibleCfgColDataIndices(e),n=a.filterCFGColumnsBasedOnAvailability(n)}return n.map(function(t){var n,a,r,u,c=!1,g=!1,p=!1,f={sortableFlag:!1,groupableFlag:!0,dataIndex:t.dataIndex,dicoType:t.dicoType,displayType:t.displayType,visibleFlag:!e.is(t.isHidden)||!t.isHidden,width:isNaN(t.width)?"auto":parseInt(t.width),minWidth:isNaN(t.minWidth)?100:parseInt(t.minWidth),text:v.getColumnDisplayValue(t),editionPolicy:"EditionOnClick",tooltipIndex:t.Tooltip,hasCellValue:W.hasCellValue,getCellValue:W.getCellValue.bind(W,t),getCellValueForExport:function(n){var i,o="",a=n.cellModel;return n.rowID<0?o=a:e.is(a)&&(c&&!g?(i=n.nodeModel.getAttributeValue(t.dataIndex),Array.isArray(i)&&(o=i.join())):o=e.is(a,"array")?a.join():a.toString()),o}};u=function(){return{units:a}};const m=v.getAttributeInfoFromColumn(t);var C=I.getAttributeInfo(m.attributeName);if(e.is(C)&&(g=v.hasRangeDefined(C),c=v.isMultiValuated(C),(p=v.hasMagnitude(C))&&(a=v.getNLSForUnit(C))),e.is(t.displayType)&&"MultiType"===t.displayType&&(C=I.getAttributeInfo(m.dataIndex)),e.is(t.displayType)&&t.displayType.contains("URL")&&(r=w.getURLColumnInfo(t.dataIndex))&&(t.command=r.command,e.owns(r,"defaultValue")?t.defaultValue=r.defaultValue:t.defaultValue=""),!e.is(t.displayType)&&e.is(m)&&v.isDate(C)&&!g&!c&&(t.displayType="Date"),e.is(t.displayType))switch(f.editableFlag=!1,t.displayType){case"FullOwnerURL":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.getCellValue=W.getFullOwnerURL,f.command=w.areModuleColumnsImmutable(h.getId())?null:t.command,f.getCellValueForExport=W.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"CustomString":f.typeRepresentation="string",f.getCellValue=W.getCustomStringCellValue;break;case"URL":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.getCellValue=W.getURLCellValue,f.command=w.areModuleColumnsImmutable(h.getId())?null:t.command,f.defaultValue=t.defaultValue,f.getCellValueForExport=W.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"IconText":f.typeRepresentation="url",f.className="icon-text-column",f.hasCellValue=function(){return!0},f.getCellValue=function(e){var t=e.nodeModel.options.grid;return{label:t[e.dataIndex],getLabel:function(){return this.label},icon:{iconPath:t.cellInfo.IconUrl,iconSize:{width:"22px",height:"22px"}}}};break;case"Relation":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=G.getCellValue,f.hasCellValue=G.hasCellValue,f.getCellValueForExport=G.getCellValueForExport;break;case"DocMgmt":f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=W.getCellValueForDocMgt,f.getCellValueForExport=function(t){return e.is(t.cellModel,"array")&&t.cellModel.join(", "),e.is(t.cellModel)?t.cellModel.toString():""};break;case"BIEssentials":case"BIEssentialsAltSub":f.typeRepresentation="color",f.className="biessentials",f.groupableFlag=!1,f.getCellValue=W.getBICellValue,f.getCellValueForExport=W.getBICellValueForExport;break;case"MIL":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=i.getCellTypeRepresentation,f.setCellValue=i.setMILValue.bind(null,t),f.getCellClassName=i.getCellClassName,f.getCellValue=i.getCellValue,f.getCellSemantics=i.getCellSemantics,f.hasCellValue=i.hasMILCellValue,f.getCellEditableState=i.getCellEditableState;break;case"MANAGECAPABLERESOURCESMOD":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=l.getCellTypeRepresentation,f.setCellValue=l.setValue.bind(null,t),f.getCellClassName=l.getCellClassName,f.getCellValue=l.getCellValue,f.getCellSemantics=l.getCellSemantics,f.hasCellValue=l.hasCellValue,f.getCellEditableState=l.getCellEditableState;break;case"MANAGESTEPOPERATIONSUI":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=j.getCellTypeRepresentation,f.setCellValue=j.setValue.bind(null,t),f.getCellClassName=j.getCellClassName,f.getCellValue=j.getCellValue,f.getCellSemantics=j.getCellSemantics,f.hasCellValue=j.hasCellValue,f.getCellEditableState=j.getCellEditableState;break;case"DataCollectRow":f.getCellTypeRepresentation=s.getCellTypeRepresentation,f.getCellClassName=s.getCellClassName,f.getCellValue=s.getCellValue,f.getCellSemantics=s.getCellSemantics,f.hasCellValue=s.hasCellValue;break;case"CIM":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=o.getCellTypeRepresentation,f.setCellValue=o.setMILValue.bind(null,t),f.getCellClassName=o.getCellClassName,f.getCellValue=o.getCellValue,f.getCellSemantics=o.getCellSemantics,f.hasCellValue=o.hasMILCellValue,f.getCellEditableState=o.getCellEditableState;break;case"RWU":f.editionPolicy="RWU_Replace"===t.dataIndex?null:"EditionInPlace",f.getCellTypeRepresentation=k.getCellTypeRepresentation,f.setCellValue=k.setRWUValue.bind(null,t),f.getCellClassName=k.getCellClassName,f.getCellValue=k.getCellValue,f.getCellSemantics=k.getCellSemantics,f.hasCellValue=k.hasRWUCellValue,f.getCellEditableState=k.getCellEditableState,f.getCellGroupingKey=k.getRWUGroupingKeyForURLColumn;break;case"MultiType":f.dicoType=A(t),f.editionPolicy="EditionOnOver",f.editableFlag=!v.isReadOnly(C),f.getCellTypeRepresentation=W.getMultiTypeCellRepresentation.bind(null,C),f.groupableFlag=!1,f.getCellValue=W.getMultiTypeCellValue,f.getCellSemantics=W.getMultiTypeCellSemantics,f.setCellValue=W.setValue;break;case"CFG":f.groupableFlag=!1,f.getCellTypeRepresentation=d.getCellTypeRepresentation,f.getCellValue=d.getCellValue,f.hasCellValue=d.hasCellValue;break;case"Date":case"DateTime":f.editionPolicy="EditionOnOver",f.editableFlag=!v.isReadOnly(C),f.typeRepresentation="datetime",f.setCellValue=W.setValue,f.getCellValueForExport=function(e){var n="",i=e.cellModel,o="DateTime"===t.displayType;return e.rowID<0?n=i:i&&(n=v.getFormattedDate(i,o)),n};break;case"NonEditable":f.editableFlag=!1,v.isBoolean(C)&&(f.typeRepresentation="boolean");break;case"NonEditableMultiType":f.editableFlag=!1,f.dicoType=A(t),f.typeRepresentation="float",f.groupableFlag=!1,f.getCellValue=W.getMultiTypeCellValue,f.getCellSemantics=W.getMultiTypeCellSemantics,f.setCellValue=W.setValue}else f.editableFlag=!v.isReadOnly(C),n=v.getNodeAndColumnInfos(null,t),c&&!g?(f.typeRepresentation="string",f.editionPolicy="EditionInPlace"):g?(f.allowResetToUndefinedByUIFlag=!0,f.hasRangeDefined=!0,f.editionPolicy="EditionInPlace",f.typeRepresentation=t.dataIndex.replaceAll(".",""),f.authorizedValues=v.getAuthorizedValuesNLSList(n.attributeInfo,n.attributeDef),p&&(f.getCellSemantics=u)):p?(f.typeRepresentation="number",f.getCellSemantics=u):v.isBoolean(C)?f.typeRepresentation="boolean":v.isInteger(n.attributeInfo)?f.typeRepresentation="integer":v.isDouble(n.attributeInfo)&&(f.typeRepresentation="float"),f.setCellValue=W.setValue;return w.areModuleColumnsImmutable(h.getId())&&(f.editableFlag=!1),f})},x=function(t,n){var i,o,a,l;return n=n||!1,O=t.Label.dataIndex,l=e.is(t.Label.minWidth)?t.Label.minWidth:null,o=w.getLabelInfo(h.getId()),a=e.is(t)&&e.is(t.name)?D.getNLSValue("Column."+t.name):v.getColumnDisplayValue(t.Label),(i={sortableFlag:!0,groupableFlag:!0,text:a,dataIndex:"tree",width:e.is(l)?"auto":n?"100%":"30%",minWidth:e.is(l)?l:150,dicoType:o.dicoType,label:o.attributeName,labelIsOnRef:o.labelIsOnRef,getCellValue:function(t){var n,i,o=t.nodeModel,a=null;return e.is(o)&&(B.isFakeNodeModel(o)&&o.getProperty()===F.Reference?(i=this.getColumnOrGroup(F.Reference),n=y.getReference(o.getIdentifier()),a=i.text+": "+n.get("V_Name")+" ("+o.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount+")"):a=o.getLabel()),a}}).editableFlag="NonEditable"!==t.Label.displayType,i.setCellValue=W.setValue,w.areModuleColumnsImmutable(h.getId())&&(i.editableFlag=!1),i},R=function(){var e,t,n=[];for(e in F)Object.prototype.hasOwnProperty.call(F,e)&&((t={sortableFlag:!1,editableFlag:!1,groupableFlag:!0,dataIndex:F[e],visibleFlag:!1,width:"auto",minWidth:100,editionPolicy:"EditionOnClick",hasCellValue:function(e){return!B.isFakeNodeModel(e.nodeModel)},getCellValue:W.getGroupingColumnCellValue}).text=v.getColumnDisplayValue(t),n.push(t));return n},N=function(){return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,dataIndex:"hide_show_3D",displayType:"hideShow3D",editionPolicy:"EditionOnOver",typeRepresentation:"visibility",alignment:"center",text:"",width:30,icon:D.getIconURLFromKey("3DColumnIcon"),hasCellValue:U.hasCellValue,getCellValue:U.getCellValue,setCellValue:U.setCellValue}},{getBlockAttributes:function(t){var n,i,o={boAttrName:[],roAttrName:[],otherAttrName:[]},a=!1,l=e.is(t.Columns)?t.Columns.Column:[],r=M(t),s=function(e,t){switch(t){case"reference":-1===o.boAttrName.indexOf(e)&&o.boAttrName.push(e);break;case"instance":-1===o.roAttrName.indexOf(e)&&o.roAttrName.push(e);break;default:-1===o.otherAttrName.indexOf(e)&&o.otherAttrName.push(e)}};return e.is(r.label)&&(e.is(r.labelIsOnRef,"boolean")?r.labelIsOnRef?s(r.label,"reference"):s(r.label,"instance"):s(r.label,null)),e.is(l,"array")||(l=[l]),l.forEach(function(t){var n=v.getAttributeInfoFromColumn(t),o=n.dataIndex,l=n.objType;if(!e.owns(t,"displayType")||"MultiType"!==t.displayType&&"NonEditableMultiType"!==t.displayType&&"OPTime"!==t.displayType)"instance"===l||"reference"===l?s(o,l):"relation"===l&&(a=!0,s(o,l));else switch(t.displayType){case"MultiType":case"NonEditableMultiType":t.dicoType=A(t),t.dicoType.forEach(function(e){s(i=e+"."+o,l)});break;case"OPTime":s(i,l)}}),a&&(n=T.getAllRelationDisplayAttributes(),e.is(n,"array")&&n.forEach(function(e){s(e,"reference")})),o},setReusablecontent:function(t){var n=function(n,i){var o,a={forceDBMode:!0,onComplete:function(){e.is(o)&&e.is(o.objectToBeModified)&&(o.objectToBeModified.setAdditionalInfo({isFetched:!0}),v.doesAttributeExist(o.objectToBeModified,o.dataIndex)||v.isAttrApplicableForType(o.objectToBeModified,o.dataIndex)||-1===P.indexOf(o.dataIndex)&&h.warn(D.getNLSValue("TableView.AvailabilityFailure",{key:o.attributeNLSTitle}))),e.is(i)&&e.is(i.cellView)&&t.updateRenderedRow(i.rowID,{updateCellContent:!0})}};n.preventDefault(),n.stopPropagation(),i&&(o=v.getNodeAndColumnInfos(i.nodeModel,i.cellView.collectionView.getColumnOrGroup(i.columnID)),!e.is(o.objectToBeModified)||v.doesAttributeExist(o.objectToBeModified,o.dataIndex)||o.objectToBeModified.getAdditionalInfo("isFetched")||("instance"===o.instOrRef?y.fetchInstance({PID:o.objectToBeModified.id},a):y.fetchRoot(o.objectToBeModified.id,a)))};b||(t.addEventListener("show",function(e,t){h.debug("onEventShow fired"),n(e,t)}),t.addEventListener("activeCellChange",function(t){const i=t.dsModel,o=i.getActiveCellID();if(o>=0&&i.isCellInEdition(o)){let a=i.getCellInfosAt(o);e.is(a)&&a.rowID>=0&&a.columnID>=0&&e.is(a.nodeModel)&&e.is(a.nodeModel.getReferencePID)&&(e.is(a.cellView)||(a.cellView={collectionView:i}),n(t,a))}h.debug("activeCellChange fired")}))},getColumnDataIndexByDisplayType:function(t,n){var i,o,a,l=[];if(!e.is(n))return this.getColumnsDataIndex(t);for(o=t.columns.length,i=1;i<o;i++)a=t.columns[i],e.is(a)&&e.owns(a,"dataIndex")&&e.owns(a,"displayType")&&a.displayType===n&&l.push(a.dataIndex);return l},getColumnsDataIndex:function(t,n){var i,o,a,l,r=[],s=!!e.is(n,"boolean")&&n;if(s||!e.is(L)){for(a=t.columns.length,e.is(t._treeDataIndex)&&r.push(t._treeDataIndex),i=1;i<a;i++)l=t.columns[i],o=!e.is(l.isExportable)||l.isExportable,e.is(l)&&e.owns(l,"dataIndex")&&o&&(s&&l.isHidden||(!e.owns(l,"displayType")||"MultiType"!==l.displayType&&"NonEditableMultiType"!==l.displayType?r.push(l.dataIndex):l.dicoType.forEach(function(e){r.push(e+"."+l.dataIndex)})));s||(L=r)}else r=L;return r},createTreeListViewColumns:function(t,n,i,o){var a,l,r=[];return t.Columns&&t.Columns.Column&&(r=E(t.Columns.Column)),t.Label&&((a=x(t,0===r.length)).isExportable=!1,r.splice(0,0,a)),Array.isArray(C)&&(l=r.filter(function(e){return C.includes(e.dataIndex)})).length>0&&(r=r.filter(function(e){return!C.includes(e.dataIndex)}),l.length>0&&r.unshift.apply(r,l)),(!e.is(t.addDefaultGroupingColumns)||e.is(t.addDefaultGroupingColumns,"boolean")&&!0===t.addDefaultGroupingColumns)&&(r=r.concat(R())),e.is(o)&&!0===o&&r.splice(0,0,N()),{columns:r,labelIsOnRef:e.is(t.Label)?a.labelIsOnRef:null,label:e.is(t.Label)?a.label:null}},manageColumn:function(e,t,n){n&&(!0===n.visible?e.showColumn(t):e.hideColumn(t))},getLabelColumnDataIndex:function(){return O}}}}),define("DS/DELWKOViewBehaviors/DELWKOTreeListViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXDragDrop","DS/DELWKOViewBehaviors/DELWKOTreeContextualMenu","DS/DELWKOViewBehaviors/DELWKOColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXActionDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXGenericLinksDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXManageCapableRscDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Relations/RelationsUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ToolTipManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/DataGridViewManager","DS/Utilities/Dom","DS/Core/PointerEvents","DS/DELWKOFilteringModule/DELWKOFilteringBaseFilter","DS/DELWKOFilteringModule/DELWKOFilteringSetFilterView"],function(e,t,n,i,o,a,l,r,s,u,d,c,g,p,f,m,h){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","PlatformPlugin","SelectionPlugin"],creator:function(C,b,y,I,v,D,V,T,w,S,L,M,A,E,x){var P,R,N,O,F,B,U,W,k,_,G,H,j,K,X,z,q,Q,J,Z,Y,$,ee,te,ne,ie,oe,ae,le,re,se,ue,de,ce,ge,pe,fe,me={},he=new s(b,v,T,A,y,E),Ce=new u(b,v,w),be=(new d(b,V,v,D),I.getComponent("DataGridView")),ye=new c(b,S,y,v,D,V),Ie={placeholder:"",apiVersion:2,showSelectionCheckBoxesFlag:!0,rowSelection:"multiple",cellSelection:"none",showRowIndexFlag:!1,defaultColumnDef:{sortableFlag:!0,editionPolicy:"EditionOnOver",typeRepresentation:"string"},isEditable:!1,selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",rowGroupingOptions:{depth:0,hideGroupedColumns:!1},getCellTooltip:function(t){var n,i,o,a,l=this.getColumnOrGroup(t.columnID),r={longHelp:""},s=[],u=V.getAttributeInfoFromColumn(l),d=D.getAttributeInfo(u.attributeName),c=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader&&e.is(t.nodeModel)&&!e.is(t.nodeModel.getReferencePID))return r;switch(!e.is(l.displayType)&&e.is(u)&&V.isMultiValuated(d)&&(l.displayType="Multivalue"),l.displayType){case"URL":!t.isHeader&&e.is(t.cellModel)?r.longHelp=t.cellModel.label:r.longHelp=t.cellModel;break;case"MIL":o=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?r.longHelp="object"===e.typeOf(o)?o.getLabel():o:(a=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(a)?e.is(a.tooltip)?a.tooltip:a.getLabel():"");break;case"RWU":o=t.cellModel,t.isHeader||"RWU_Action"!==t.dataIndex?r.longHelp="object"===e.typeOf(o)?o.getLabel():o:(a=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(a)?e.is(a.tooltip)?a.tooltip:e.is(a.getLabel)?a.getLabel():"":"");break;case"CIM":o=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?r.longHelp="object"===e.typeOf(o)?o.getLabel():o:(a=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(a)?e.is(a.tooltip)?a.tooltip:a.getLabel():"");break;case"Relation":case"Multivalue":if("Multivalue"!==l.displayType||t.isHeader||(c=V.getValueAsArray(t.nodeModel.options.grid[t.dataIndex])),"Relation"!==l.displayType||t.isHeader||(c=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(c)&&0!==c.length){for(V.isDate(d)&&(c=c.map(function(e){return V.getFormattedDate(e)})),i=0;i<c.length;i++)n=c[i],s.push(e.is(n.Value)?n.Value:n);r.longHelp=V.getValueAsString(s,V.getType(d)).split(b.getPreferenceValue("separator")).join("\n")}else t.isHeader&&(r.longHelp=c);break;case"DocMgmt":if(t.isHeader||(c=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(c)&&0!==c.length){s=c.reduce((e,t)=>("Reference Document"===t.type?e.Attachments.push(t.title):e.Specifications.push(t.title),e),{Specifications:[],Attachments:[]});let e="";for(const[t,n]of Object.entries(s))Array.isArray(n)&&n.length>0&&(e+=t+":",n.forEach(t=>{e+="\n\t"+t}),e+="\n");r.longHelp=e}else t.isHeader&&(r.longHelp=c);break;case"hideShow3D":t.isHeader?r.longHelp=y.getNLSValue("HideShow3D.tooltip"):(o=t.cellModel,e.is(o,"boolean")&&(r.longHelp=o?y.getNLSValue("HideShow3D.hide3D"):y.getNLSValue("HideShow3D.show3D")));break;case"BIEssentials":case"BIEssentialsAltSub":t.isHeader?r.longHelp=t.cellModel:(o=t.nodeModel.options[t.dataIndex],r.longHelp=e.is(o)?o.tooltip:"");break;case"OPTime":t.isHeader?r.longHelp=t.cellModel:(o=t.nodeModel.getAttributeValue("V_OperationTime"),r.longHelp="string"===e.typeOf(o)&&"FetchInProgress"!==o?o:"");break;default:o=t.cellModel,t.isHeader||(e.is(o)?"object"===e.typeOf(o)?o=o.getLabel():V.isBoolean(d)?o="TRUE"===o?y.getNLSValue("TRUE"):y.getNLSValue("FALSE"):V.isDate(d)?o=V.getFormattedDate(o):V.hasRangeDefined(d)?o=t.cellModel:(V.isDouble(d)||V.isInteger(d))&&(o=V.getValueAsString(o,V.getType(d))):o=""),r.longHelp=o}return!t.isHeader&&e.is(t.nodeModel)&&(o=ye.getTooltipValue(t),e.is(r.longHelp)&&(r.longHelp+=r.longHelp.length>0&&o.length>0?"\n\n":"",r.longHelp+=o)),r},getCellEditableState:function(e){var t,n=!0;return!0===e.isHeader?n=!1:"selection"===e.dataIndex?n=!0:(t=V.getNodeAndColumnInfos(e.nodeModel,e.parent.options.columns[e.virtualColumnID]),n=!V.isReadOnly(t.attributeInfo,t.attributeDef)),n}};return q=function(){var e=P.getTreeDocument();e.getFilterManager().registerFilter("wkoFilter",m);const t=P.getFilterViewManager();t.registerFilterView("wkoSet",h),t.registerFilterView("wkoFilter",t.FILTERVIEWS_MAP.wkoSet);let n={label:{filterId:"wkoFilter",filterOptions:{keepChildren:!0,ensureVisible:!0}}};const i=P.columns.length;for(let e=0;e<i;e++){var o;"url"===P.columns[e].typeRepresentation&&"current.reference"===(o=P.columns[e].dataIndex)&&(n[o]={filterId:"set"}),"datetime"===P.columns[e].typeRepresentation&&(n[o=P.columns[e].dataIndex]={filterId:"dateWithCondition"})}e.setFilterModel(n)},Q=function(s){var u;if(_=e.is(s.columnConfig)?s.columnConfig:M.getViewColumnPreferences(b.getId(),B),H=(s=s||{}).dataGridViewOptions?e.extend(Ie,s.dataGridViewOptions,!0):Ie,!e.is(_))throw new Error("_createTreeListView options not defined");if(H.contextualCommands&&(X=new n(b,I,y,V,E,v,M,D,A),H.onContextualEvent=function(t){var n,i,o,a,l=this,r=[],s={};if(e.is(t.cellInfos)&&(n=(o=t.cellInfos).nodeModel,a=o.manager,e.is(o.rowID))){if(-1===o.rowID){if(e.is(H.headerContextualCommands)){if(i=l.getColumnOrGroup(o.columnID),(s={node:n,selectedNodes:l.getTreeDocument().getXSO().get(),column:i,virtualColumnID:o.columnID,dataIndex:i.dataIndex,manager:a,handlers:{onSizeColumnToFit:function(e){a.sizeColumnToFit(e)},onSortColumnContentAsc:function(){a.sortColumn(i.dataIndex,"asc")},onSortColumnContentDesc:function(){a.sortColumn(i.dataIndex,"desc")},onClearSort:function(){a.clearSort()},onHideColumn:function(e){M.updateViewPreferences(b.getId(),i.dataIndex,{visibility:!1}),l.hideColumn(e,{isUserInteraction:!1})},onPinColumn:function(e){P.layout.columns[e].icon={},P.layout.columns[e].icon.iconName="pin",P.layout.columns[e].icon.fontIconFamily=WUXManagedFontIcons.Font3DS,P.layout.setColumnPinned(i.dataIndex,"left"),M.updateViewPreferences(b.getId(),i.dataIndex,{colPinned:"left"})},onUnpinColumn:function(e){P.layout.columns[e].icon={},P.layout.setColumnPinned(i.dataIndex,"unpinned"),M.updateViewPreferences(b.getId(),i.dataIndex,{colPinned:"unpinned"})},onGroupRows:function(e,t){var n;M.doesModuleHaveRecursiveGrouping(b.getId())?(n=i.dataIndex!==e?l.getColumnOrGroup(a.getColumnIndexByDataIndex(e)):i,ue(n)):ae(e,t)},onRemoveGrouping:function(){M.doesModuleHaveRecursiveGrouping(b.getId())?de():le()},onGroupByCriteria:function(e){b.getBehavior("GroupingViewBehavior").group(e)},onUngroupByCriteria:function(e){b.getBehavior("GroupingViewBehavior").ungroup(e)}}}).params=t,r=X.buildContextualMenu(H.headerContextualCommands,s),e.is(i.pinned)&&"unpinned"!=i.pinned){var u=-1,d=-1;r.forEach(e=>{u++,"PinColumn"!==e.title&&"Pin"!==e.title||(d=u)}),d>-1&&r.splice(d,1)}else u=-1,d=-1,r.forEach(e=>{u++,"UnpinColumn"!==e.title&&"Unpin"!==e.title||(d=u)}),d>-1&&r.splice(d,1);var c,g=l.getTreeDocument().getFilterManager().getFilters();if(e.is(g))"tree"!=s.dataIndex?e.is(g[s.dataIndex])&&(c=g[s.dataIndex].filterModel):e.is(g.label)&&(c=g.label.filterModel),e.is(c)?(u=-1,d=-1,r.forEach(e=>{u++,"FilterColumn"!==e.title&&"Apply Filter"!==e.title||(d=u)}),d>-1&&r.splice(d,1)):(u=-1,d=-1,r.forEach(e=>{u++,"ResetFilterColumn"!==e.title&&"Reset Filter"!==e.title||(d=u)}),d>-1&&r.splice(d,1));else u=-1,d=-1,r.forEach(e=>{u++,"FilterColumn"!==e.title&&"Apply Filter"!==e.title||(d=u)}),d>-1&&r.splice(d,1),u=-1,d=-1,r.forEach(e=>{u++,"ResetFilterColumn"!==e.title&&"Reset Filter"!==e.title||(d=u)}),d>-1&&r.splice(d,1)}"selection"===o.dataIndex||"taggerColor"===o.dataIndex||"hide_show_3D"===o.dataIndex?r.forEach(function(e){e.state="disabled"}):"tree"===o.dataIndex&&r.forEach(function(e){"Hide"===e.title&&(e.state="disabled")})}else if(0<=o.rowID){if(!e.is(n.getReferencePID))return;e.is(n)&&(n.isSelected()||n.select()),i=l.getColumnOrGroup(o.columnID),(s={node:n,selectedNodes:l.getTreeDocument().getXSO().get(),column:i,getColumnIDFromDataIndex:function(e){return a.getColumnIndexByDataIndex(e)},getColumnOrGroup:function(e){return o.cellView.collectionView.getColumnOrGroup(e)},handlers:{onGroupRows:function(e,t){ae(e,t)},onRemoveGrouping:function(){le()}}}).infos=V.getNodeAndColumnInfos(n,i),r=X.buildContextualMenu(H.contextualCommands,s)}return r}}),e.is(s.pinnedColumns)&&(H.pinnedColumns=s.pinnedColumns),e.is(s.dataGridViewOptions)&&e.is(s.dataGridViewOptions.enableDragAndDrop,"boolean")&&!0===s.dataGridViewOptions.enableDragAndDrop){switch(H.cellDragEnabledFlag=!0,H.rowDragEnabledFlag=!0,u={acceptedTypes:s.pprTypes,pprTypesWithSupportedViews:e.is(s.pprTypesWithSupportedViews)?s.pprTypesWithSupportedViews:[],pprTypesWithSupportedRoot:e.is(s.pprTypesWithSupportedRoot)?s.pprTypesWithSupportedRoot:[]},s.dragDropManager){case"WUXActionDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),F=new o(C,b,y,v,D,S,L,E);break;case"WUXGenericLinksDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),F=new a(C,b,y,v,D,S,L,I);break;case"WUXManageCapableRscDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),F=new l(C,b,y,v,D,S,L,I);break;case"WUXDataCollectRowDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),F=new r(C,b,y,S,v);break;default:F=new t(C,b,y,v,D,S,L,E)}F.init(u),H=e.extend(H,F.getDDBehavior())}H.filterModel=s.filterModel,N=new i(C,b,G,K,v,D,V,y,I,T,M,x),j=N.createTreeListViewColumns(_,H.showTagger,H.showSelection,H.show3DHideShow)},z=function(t){var n,i,o=b.getPreferenceValue("separator");if(O=t,e.is(j)&&e.is(j.columns,"array")?H.columns=j.columns:H.columns=[],e.is(P))P.setProperties({columns:H.columns});else{H.treeDocument=t,P=new be(H),R=new g(P),P.registerColumnsEnum();const n=b.getBehavior("CfgColumnsBehavior");if(e.is(n)){const e=n.getRequiredTypeRepresentations();P.registerColumnTypeRepresentations(e)}}if(p.addEventOnElement(P,P,f.POINTERUP,function(e,t){var n=b.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"desc")}),p.addEventOnElement(P,P,f.POINTERDOWN,function(e,t){var n=b.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"asc")}),e.is(H.toolbarOptions)&&Array.isArray(H.toolbarOptions.items)&&P.setToolbar(ce(H.toolbarOptions.items)),e.is(H.pinnedColumns)&&Array.isArray(H.pinnedColumns),_.Label)if("Auxiliary"===_.name&&e.is(_.Label.length)){for(P._treeDataIndex="",P._label="",P._types="",i=0;i<_.Label.length;i++)P._treeDataIndex+=i<_.Label.length-1?_.Label[i].dataIndex+o:_.Label[i].dataIndex,P._label+=i<_.Label.length-1?_.Label[i].dataIndex.split(".")[0]+o:_.Label[i].dataIndex.split(".")[0],P._types+=i<_.Label.length-1?_.Label[i].type+o:_.Label[i].type;P._labelIsOnRef=!0,P.isMultipleLabel=_.Label.length>1}else P._treeDataIndex=_.Label.dataIndex,P._label=j.label,P._labelIsOnRef=j.labelIsOnRef,P.isMultipleLabel=!1;e.is(H.setReusablecontent)&&!1===H.setReusablecontent||N.setReusablecontent(P),n=N.getBlockAttributes(_),v.setSelectPredicate(b.getId(),n)},Z=function(t){var n,i,o,a,l,r,s,u=t.type,d={icons:"",label:"",grid:{},useAsyncPreExpand:!0},c=b.getPreferenceValue("separator"),g=N.getColumnsDataIndex(P);if(P._labelIsOnRef){if(l="VPMReference"===u&&(e.is(t.V_usage,"array")&&t.V_usage.includes("3DPart")||e.is(t.V_usage,"string")&&"3DPart"===t.V_usage)?y.getIconURLFromKey("3DPart"):y.getIconURLFromKey(u),d.icons=[l],d.label="",e.is(P.isMultipleLabel)&&P.isMultipleLabel)for(o=P._label.split(c),a=P._types.split(c),s=0;s<o.length;s++)e.is(t.type)&&("undefined"===a[s]||"undefined"!==a[s]&&D.isAKindOf(t.type,a[s]))&&(r=""===d.label?"":c,e.owns(t,o[s])&&e.is(t[o[s]])&&(d.label+="NULL"!==t[o[s]]?r+t[o[s]]:""));e.owns(t,P._label)&&(d.label="NULL"!==t[P._label]?t[P._label]:"")}for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i=t[n],e.is(i)&&"NULL"!==i&&(e.is(g)&&g.forEach(e=>{e.includes(n+".reference")&&(d.grid[n+".reference"]=t[n])}),"PID"===n&&(d.referencePID=t[n]),"type"===n&&(d.referenceType=t[n]),"defType"===n&&(d.defType=i)));return he.fillNodeOptions(d,g),Ce.fillNodeOptions(d,g),e.is(me.show3DHideShow)&&!0===me.show3DHideShow&&(d.hideShow3D=!0),d},J=function(t,n,i){var o,a,l=N.getColumnsDataIndex(P),r=Z(t);for(o in!P._labelIsOnRef&&e.owns(n,P._label)&&(r.label="NULL"!==n[P._label]?n[P._label]:""),n)Object.prototype.hasOwnProperty.call(n,o)&&(a=n[o],e.is(a)&&"NULL"!==a&&(l&&l.indexOf(o+".instance")>=0?r.grid[o+".instance"]=n[o]:"PID"===o?r.instancePID=n[o]:"V_TreeOrder"===o&&(r.grid.V_TreeOrder=parseFloat(n[o]))));return he.fillNodeOptions(r,l,n,i),r},Y=function(t){var n,i,o,a=t.changedAttributes(),l=t.isInstance()?".instance":".reference",r=P._labelIsOnRef?".reference":".instance",s=N.getColumnsDataIndex(P),u={};if(!t.isConnection()&&e.is(a)){for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(o=n+l,e.is(s)&&s.forEach(e=>{e.includes(o)&&(u[o]="NULL"!==a[n]?a[n]:"")}),n===P._label&&r===l&&(i="NULL"!==a[n]?a[n]:""));return{label:i,attributes:u}}},$=function(){var e,t,n=[],i=R.getNumberOfRows();for(e=0;e<i;e++)t=R.getTreeNodeModelFromRowID(e),n.push(t.getReferencePID());return n},ee=function(){var t,n,i,o,a,l,r,s,u,d;if(W)for(i=M.getViewColumnPreferences(b.getId()),n=e.is(i)?i.Columns.Column:[],a=P.getColumnIndexByDataIndex("tree")+1,t=0;t<n.length;t++){if(s={},(o=n[t]).isHidden)P.isColumnHidden(o.dataIndex)||P.hideColumn(o.dataIndex);else{d=isNaN(o.width)?"auto":parseInt(o.width),P.getColumnWidth(o.dataIndex)!==d&&(s.width=d),d=isNaN(o.minWidth)?"100":parseInt(o.minWidth),P.getColumnMinWidth(o.dataIndex)!==d&&(s.minWidth=d),P.isColumnHidden(o.dataIndex)&&(s.visibleFlag=!0),e.Object.keys(s).length>0&&P.layout.setColumnOrGroupProperties(o.dataIndex,s),u=P.getColumnIndexByDataIndex(o.dataIndex),r=P.layout.getOrderedColumnsReverseIndexes(),l=P.layout.getOrderedColumnsIndexes();var c=P.layout.getColumnPinned(u);o.pinned!=c&&(P.layout.columns[u].icon={},"unpinned"!=o.pinned&&(P.layout.columns[u].icon.iconName="pin",P.layout.columns[u].icon.fontIconFamily=WUXManagedFontIcons.Font3DS),P.layout.setColumnPinned(u,o.pinned)),r[u]!==a&&P.moveColumn(o.dataIndex,l[a])}a++}},te=function(e){var t,n,i="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(63&n|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(63&n|128));return i},ne=function(e){return'"'+te(e).replace(/"/g,'""')+'"'},ie=function(e){H.showTagger&&P.updateNodeKPIColor(e)},oe=function(t){var n,i,o=[],a=t.collectionView;if(t.startNodeIndex>=0&&t.endNodeIndex>=0){for(n=t.startNodeIndex;n<=t.endNodeIndex;n++)i=a.model[n],e.is(i)&&o.push(i);o.length>0&&b.notify("visibleNodesChanged",[b.getId(),o])}},re=function(t){var n=M.getColumnsForGrouping(b.getId());((t=!!e.is(t,"boolean")&&t)||n.length>0)&&P.groupRows({dataIndexesToGroup:n})},se=function(t){var n;e.is(t.options)&&t.options.updateType===WUXModelUpdateTypes.Grouping&&(M.isGroupingExist()||b.notify("manageCommandsOnGrouping"),n=M.getColumnsForGrouping(b.getId()),e.is(U)&&0===n.length&&(b.getBehavior("WUXNodeModelBehavior").removeEventListener(U),U=void 0))},ae=function(t,n){var i;M.getColumnsForGrouping(b.getId(),!0).length>0&&P.rowGroupingOptions.depth!==n?b.warn(y.getNLSValue("TableView.InvalidGrouping")):(e.is(U)||(i=b.getBehavior("WUXNodeModelBehavior"),e.is(i)&&(U=i.addEventListener("pushUpdate",se))),P.rowGroupingOptions.depth=n,M.addColumnForGrouping(b.getId(),t),re(),b.notify("manageCommandsOnGrouping"))},le=function(){M.resetColumnsForGrouping(b.getId()),re(!0)},ue=function(t){var n,i=b.getBehavior("GroupingViewBehavior"),o=t.dataIndex;e.is(i)&&!0===t.groupableFlag&&(M.resetColumnsForGrouping(b.getId()),M.addColumnForGrouping(b.getId(),o),"tree"===o&&(o=N.getLabelColumnDataIndex()),o.endsWith(".group")&&(o=M.getCollectionSpecificDataIndex(o)),n={dataIndex:o,title:t.text},i.group(n))},de=function(){var t=b.getBehavior("GroupingViewBehavior");e.is(t)&&(M.resetColumnsForGrouping(b.getId()),t.clearGrouping())},ce=function(t){return{entries:t.map(function(t){var n,i=y.getIconURLFromKey(t.icon);return e.is(t.tooltip)&&(n={title:y.getNLSValue(t.tooltip.title),shortHelp:y.getNLSValue(t.tooltip.shortHelp)}),{id:t.id,dataElements:{typeRepresentation:e.is(t.typeRepresentation)?t.typeRepresentation:"functionIcon",position:e.is(t.position)?t.position:"far",category:e.is(t.category)?t.category:"0",icon:{iconPath:i,iconSize:{width:"22px",height:"22px"}},value:ge.bind(null,t.id),disabled:!!e.is(t.disabled)&&t.disabled,tooltip:n}}})}},fe=function(e,t){var n,i,o;i=X.buildContextualMenu(e.children),n={position:{x:(o=t.dsModel.elements.container.getBoundingClientRect()).left+5,y:o.top+(o.height-5)}},WUXMenu.show(i,n)},ge=function(t,n){var i;i=H.toolbarOptions.items.find(function(e){return t===e.id}),e.is(i)&&e.is(i.children)?fe(i,n):e.is(H.toolbarOptions.actionHandler,"function")?H.toolbarOptions.actionHandler.call(null,t,n):e.is(X)&&X.onContextMenuCallback(t)},pe=function(t){var n;t=Array.isArray(t)?t:[t],P&&(n=P.getToolbar(),e.is(n)&&n.items.getChildren().forEach(function(e){var n=e.options.id,i=t.indexOf(n);e.updateOptions({disabled:-1===i})}))},{viewName:"treeListView",listenTo:function(){return{TreeViewPrefModified:ee,LoadDropContent:this.processDropContent}},onStart:function(t,n){t=t||{},e.is(t.pprTypes)&&e.is(t.columnConfigName)&&(e.is(t.hasReadOnlyTypes,"boolean")&&t.hasReadOnlyTypes&&(Ie.defaultColumnDef.getCellEditableState=function(t){let n=null;return e.is(t)&&e.is(t.nodeModel)&&e.is(t.nodeModel.object)&&(n=t.nodeModel.object.type||null),(!e.is(n)||!D.isReferencesHasReadOnlyType(n))&&P.getColumnOrGroup(t.dataIndex).editableFlag}),e.is(t.views)&&e.is(t.views.treeListView)&&(me=t.views.treeListView,Object.prototype.hasOwnProperty.call(me,"show3DHideShow")&&E.isSuppressHideShow3DColumn()&&(me.show3DHideShow=!1)),e.is(t.views.treeListView.toolTipConfigXML)&&ye.init(t.views.treeListView.toolTipConfigXML),B=t.columnConfigName,(W=!!e.is(t.registerViewPreference)&&t.registerViewPreference)&&M.registerViewforColumnPref({viewID:b.getId(),columnConfigName:t.columnConfigName,viewIcon:t.moduleIcon}),G=Array.isArray(t.columnsBeforeTitle)?t.columnsBeforeTitle:null,!!e.is(t.immutableColumns,"boolean")&&t.immutableColumns&&M.registerModuleColumnsAsImmutable(b.getId()),K=!!e.is(t.noActiveCellChange,"boolean")&&t.noActiveCellChange,Q({pprTypes:t.pprTypes,dataGridViewOptions:e.merge(me,{isEditable:!!e.is(t.isAuthoringAllowed)&&t.isAuthoringAllowed}),dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,pprTypesWithSupportedViews:Array.isArray(t.pprTypesWithSupportedViews)?t.pprTypesWithSupportedViews:null,pprTypesWithSupportedRoot:Array.isArray(t.pprTypesWithSupportedRoot)?t.pprTypesWithSupportedRoot:null,pinnedColumns:Array.isArray(t.pinnedColumns)?t.pinnedColumns:null,filterModel:t.filterModel}),!0===(k=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&M.registerViewforWidgetLayout({viewID:b.getId(),viewType:this.viewName})),n()},onStop:function(){e.is(P)&&P.remove(),W&&M.unRegisterViewforColumnPref(b.getId()),!0===k&&M.unregisterViewforWidgetLayout(b.getId(),this.viewName)},has3DHideShowColumn:function(){return!!e.is(me.show3DHideShow,"boolean")&&me.show3DHideShow},createTreeListView:function(t){var n,i,o="",a=me;t=t||{},e.is(t.dataGridViewOptions.identifier)&&(o=t.dataGridViewOptions.identifier),e.is(t.columnConfig)&&(i=t.columnConfig),e.is(t.dataGridViewOptions)&&(a=t.dataGridViewOptions),Q({columnConfig:i,pprTypes:t.pprTypes,dataGridViewOptions:a,dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,identifier:o}),e.is(t.treeDocument)&&(z(t.treeDocument),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(t.treeListViewContainer)&&P.getContent().inject(t.treeListViewContainer),e.is(t.toolbarContainer)&&(n=P.getToolbar(),e.is(n)&&n.getContent().inject(t.toolbarContainer)))},getColumnsByDisplayType:function(e){var t,n,i=[],o=N.getColumnDataIndexByDisplayType(P,e),a=o.length;for(t=0;t<a;t++)n=o[t],i.push(n.split(".")[0]);return i},loadDocument:function(t){z(t),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(H)&&H.filterModel&&q()},getContent:function(){var t=void 0;return e.is(P)&&(t=P.getContent()),t},manageColumn:function(t,n){if("taggerColor"!==t)return e.is(P)&&e.is(N)?N.manageColumn(P,t,n):void 0;ie(n.visible)},processDropEffect:function(e){return F.processDropEffect(e)},processDropContent:function(e,t){var n=new Event("Drag");return n.dataTransfer=new DataTransfer,n.dataTransfer.setData("Text",e),F.onTreeListViewDrop(n,t)},getTreeListViewManager:function(){var t=null;return e.is(R)&&(t=R),t},getLabelAttribute:function(){return P._label},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=Z(t.toJSON())),n},getInstanceNodeOptions:function(t,n,i){var o;return e.is(t)&&e.is(n)&&(o=J(t.toJSON(),n.toJSON(),i)),o},getRelationNodeOptions:function(e,t){var n=N.getColumnsDataIndex(P);return he.getRelationAttributes(e,n,t)},getDocumentNodeOptions:function(e){var t=N.getColumnsDataIndex(P);return{attributes:Ce.getDocumentNodeOptions(e,t)}},getUpdateNodeOptions:function(t){var n;return e.is(t)&&(n=Y(t)),n},getVisibleTableContentAsCSV:function(e){return te(P.getAsCSV({columnSeparator:e,addLevelInformation:!0,allColumns:!1,forceQuotes:!0}))},getConfiguredAttributesAsCSV:function(t,n){var i,o,a,l,r,s=[],u="";function d(e,n){var i,o;for(i=t[n].Attribute,o=0;o<i.length;o++)if((l=i[o].name)===e)return!0;return!1}for(i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(o=t[i].Attribute,a=0;a<o.length;a++)l=o[a].name,-1===s.indexOf(l)&&s.push(l);for(r=0;r<s.length;r++)0!==r&&(u+=n),u+=ne(s[r]);return u+="\r\n",$().forEach(function(o){var a,l,c;if(a=v.getReference(o),e.is(a)&&function(e){return Object.prototype.hasOwnProperty.call(t,e)}(i=a.get("type"))){for(r=0;r<s.length;r++)0!==r&&(u+=n),c=d(l=s[r],i)&&e.is(a.get(l))?String(a.get(l)):"",u+=ne(c);u+="\r\n"}}),u},isInverseRelationColumnPresent:function(){var t,n=!1,i=T.getInverseRelationNameSet();return i.size>0&&e.is(N)&&(t=N.getColumnsDataIndex(P),e.is(t,"array")&&(n=t.some(function(e){return i.has(e)}))),n},getDataGridView:function(){return P},getTreeDocument:function(){return O},getToolBarContent:function(){var e,t=null;return P&&(e=P.getToolbar())&&(t=e.getContent()),t},enableToolBarItems:function(e){pe(e)}}}}}),define("DS/DELWKOViewBehaviors/DELWKOColumnManagerCloud",["UWA/Core","DS/DELWKOViewBehaviors/DELWKOCellManagerCloud","DS/DELWKOViewBehaviors/DELWKORelationsColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManagerMFN","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RWU/RWUColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MCRColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MSOColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/DataCollectRowColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/HideShow3DColumnManager","DS/DELPPWViewBehaviors_FD02/CfgColumnsBehavior/CfgCellManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RPColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/CoProduct/CoProductColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeColumnManager"],function(e,t,n,i,o,a,l,r,s,u,d,c,g,p,f){"use strict";return function(m,h,C,b,y,I,v,D,V,T,w,S){var L,M,A,E,x,P,R,N,O,F=w.getGroupingAdditonalColumns(),B=h.getBehavior("WUXNodeModelBehavior"),U=new u(h,D),W=new t(h,I,y,v,D,w),k=new a(h,y,D,S,V),_=new c(h,I,y,D),G=new n(h,D,w),H=(new g(h,v,y,I,D),new p(h,v,y,I,D)),j=(new f(h,v,y,I),new r(h,I,y,v,D,w));return P=(P=(P=(P=(P=[]).concat(k.getNonModelDataIndexes())).concat(U.getNonModelDataIndexes())).concat(H.getNonModelDataIndexes())).concat(_.getNonModelDataIndexes()),M=function(t){var n,i,o,a,l={treeDataIndex:null,label:null,labelIsOnRef:null,dicoType:null},r=h.getPreferenceValue("separator");if(e.owns(t,"name")&&"Auxiliary"===t.name&&e.owns(t,"Label")&&e.is(t.Label.length)&&t.Label.length>1)for(l.treeDataIndex="",l.label="",l.dicoType="",o=t.Label,i=0;i<o.length;i++)l.treeDataIndex+=t.Label.dataIndex,l.dicoType+=t.Label.dicoType,n=l.treeDataIndex.split("."),l.label+=n[0],a=n[1],l.labelIsOnRef="instance"===a?!!e.is(l.labelIsOnRef)&&l.labelIsOnRef&&!1:!e.is(l.labelIsOnRef)||l.labelIsOnRef&&!0,i+1!==o.length&&(l.label+=r,l.type+=r,l.dicoType+=r,l.treeDataIndex+=r);else e.owns(t,"Label")&&(l.treeDataIndex=t.Label.dataIndex,l.dicoType=t.Label.dicoType,n=l.treeDataIndex.split("."),l.label=n[0],a=n[1],l.labelIsOnRef="instance"!==a);return l},A=function(t){var n=[];return e.is(t.dicoType,"array")&&(n=t.dicoType.map(function(t){return e.is(t,"object")&&e.owns(t,"dicoType")?t.dicoType:t})),n},E=function(t){let n=t;Array.isArray(n)||(n=[n]);const a=h.getBehavior("CfgColumnsBehavior");if(e.is(a)){const e=a.computeVisibleConfigColDataIndices(n);a.setVisibleCfgColDataIndices(e),n=a.filterCFGColumnsBasedOnAvailability(n)}return n.map(function(t){var n,a,r,u,c=!1,g=!1,p=!1,f={sortableFlag:!1,groupableFlag:!0,dataIndex:t.dataIndex,dicoType:t.dicoType,displayType:t.displayType,visibleFlag:!e.is(t.isHidden)||!t.isHidden,width:isNaN(t.width)?"auto":parseInt(t.width),minWidth:isNaN(t.minWidth)?100:parseInt(t.minWidth),text:v.getColumnDisplayValue(t),editionPolicy:"EditionOnClick",tooltipIndex:t.Tooltip,hasCellValue:W.hasCellValue,getCellValue:W.getCellValue.bind(W,t),getCellValueForExport:function(n){var i,o="",a=n.cellModel;return n.rowID<0?o=a:e.is(a)&&(c&&!g?(i=n.nodeModel.getAttributeValue(t.dataIndex),Array.isArray(i)&&(o=i.join())):o=e.is(a,"array")?a.join():a.toString()),o}};u=function(){return{units:a}};const m=v.getAttributeInfoFromColumn(t),C=I.getAttributeInfo(m.attributeName);if(e.is(C)&&(g=v.hasRangeDefined(C),c=v.isMultiValuated(C),(p=v.hasMagnitude(C))&&(a=v.getNLSForUnit(C))),e.is(t.displayType)&&t.displayType.contains("URL")&&(r=w.getURLColumnInfo(t.dataIndex))&&(t.command=r.command,e.owns(r,"defaultValue")?t.defaultValue=r.defaultValue:t.defaultValue=""),!e.is(t.displayType)&&e.is(m)&&v.isDate(C)&&!g&!c&&(t.displayType="Date"),e.is(t.displayType))switch(f.editableFlag=!1,t.displayType){case"FullOwnerURL":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.getCellValue=W.getFullOwnerURL,f.command=w.areModuleColumnsImmutable(h.getId())?null:t.command,f.getCellValueForExport=W.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"CustomString":f.typeRepresentation="string",f.getCellValue=W.getCustomStringCellValue;break;case"URL":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.getCellValue=W.getURLCellValue,f.command=w.areModuleColumnsImmutable(h.getId())?null:t.command,f.defaultValue=t.defaultValue,f.getCellValueForExport=W.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"IconText":f.typeRepresentation="url",f.className="icon-text-column",f.hasCellValue=function(){return!0},f.getCellValue=function(e){var t=e.nodeModel.options.grid;return{label:t[e.dataIndex],getLabel:function(){return this.label},icon:{iconPath:t.cellInfo.IconUrl,iconSize:{width:"22px",height:"22px"}}}};break;case"Relation":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=G.getCellValue,f.hasCellValue=G.hasCellValue,f.getCellValueForExport=G.getCellValueForExport;break;case"DocMgmt":f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=W.getCellValueForDocMgt,f.getCellValueForExport=function(t){return e.is(t.cellModel,"array")&&t.cellModel.join(", "),e.is(t.cellModel)?t.cellModel.toString():""};break;case"BIEssentials":case"BIEssentialsAltSub":f.typeRepresentation="color",f.className="biessentials",f.groupableFlag=!1,f.getCellValue=W.getBICellValue,f.getCellValueForExport=W.getBICellValueForExport;break;case"MIL":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=i.getCellTypeRepresentation,f.setCellValue=i.setMILValue.bind(null,t),f.getCellClassName=i.getCellClassName,f.getCellValue=i.getCellValue,f.getCellSemantics=i.getCellSemantics,f.hasCellValue=i.hasMILCellValue,f.getCellEditableState=i.getCellEditableState;break;case"MANAGECAPABLERESOURCESMOD":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=l.getCellTypeRepresentation,f.setCellValue=l.setValue.bind(null,t),f.getCellClassName=l.getCellClassName,f.getCellValue=l.getCellValue,f.getCellSemantics=l.getCellSemantics,f.hasCellValue=l.hasCellValue,f.getCellEditableState=l.getCellEditableState;break;case"MANAGESTEPOPERATIONSUI":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=j.getCellTypeRepresentation,f.setCellValue=j.setValue.bind(null,t),f.getCellClassName=j.getCellClassName,f.getCellValue=j.getCellValue,f.getCellSemantics=j.getCellSemantics,f.hasCellValue=j.hasCellValue,f.getCellEditableState=j.getCellEditableState;break;case"DataCollectRow":f.getCellTypeRepresentation=s.getCellTypeRepresentation,f.getCellClassName=s.getCellClassName,f.getCellValue=s.getCellValue,f.getCellSemantics=s.getCellSemantics,f.hasCellValue=s.hasCellValue;break;case"CIM":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=o.getCellTypeRepresentation,f.setCellValue=o.setMILValue.bind(null,t),f.getCellClassName=o.getCellClassName,f.getCellValue=o.getCellValue,f.getCellSemantics=o.getCellSemantics,f.hasCellValue=o.hasMILCellValue,f.getCellEditableState=o.getCellEditableState;break;case"RWU":f.editionPolicy="RWU_Replace"===t.dataIndex?null:"EditionInPlace",f.getCellTypeRepresentation=k.getCellTypeRepresentation,f.setCellValue=k.setRWUValue.bind(null,t),f.getCellClassName=k.getCellClassName,f.getCellValue=k.getCellValue,f.getCellSemantics=k.getCellSemantics,f.hasCellValue=k.hasRWUCellValue,f.getCellEditableState=k.getCellEditableState,f.getCellGroupingKey=k.getRWUGroupingKeyForURLColumn;break;case"MultiType":f.dicoType=A(t),f.typeRepresentation="float",f.groupableFlag=!1,f.getCellValue=W.getMultiTypeCellValue,f.getCellSemantics=W.getMultiTypeCellSemantics,f.setCellValue=W.setValue,f.getCellEditableState=W.getMultiTypeCellEditableState;break;case"CFG":f.groupableFlag=!1,f.getCellTypeRepresentation=d.getCellTypeRepresentation,f.getCellValue=d.getCellValue,f.hasCellValue=d.hasCellValue;break;case"Date":case"DateTime":f.editionPolicy="EditionOnOver",f.editableFlag=!v.isReadOnly(C),f.typeRepresentation="datetime",f.setCellValue=W.setValue,f.getCellValueForExport=function(e){var n="",i=e.cellModel,o="DateTime"===t.displayType;return e.rowID<0?n=i:i&&(n=v.getFormattedDate(i,o)),n};break;case"NonEditable":f.editableFlag=!1,v.isBoolean(C)&&(f.typeRepresentation="boolean");break;case"NonEditableMultiType":f.editableFlag=!1,f.dicoType=A(t),f.typeRepresentation="float",f.groupableFlag=!1,f.getCellValue=W.getMultiTypeCellValue,f.getCellSemantics=W.getMultiTypeCellSemantics,f.setCellValue=W.setValue}else f.editableFlag=!v.isReadOnly(C),n=v.getNodeAndColumnInfos(null,t),c&&!g?(f.typeRepresentation="string",f.editionPolicy="EditionInPlace"):g?(f.allowResetToUndefinedByUIFlag=!0,f.hasRangeDefined=!0,f.editionPolicy="EditionInPlace",f.typeRepresentation=t.dataIndex.replaceAll(".",""),f.authorizedValues=v.getAuthorizedValuesNLSList(n.attributeInfo,n.attributeDef),p&&(f.getCellSemantics=u)):p?(f.typeRepresentation="number",f.getCellSemantics=u):v.isBoolean(C)?f.typeRepresentation="boolean":v.isInteger(n.attributeInfo)?f.typeRepresentation="integer":v.isDouble(n.attributeInfo)&&(f.typeRepresentation="float"),f.setCellValue=W.setValue;return w.areModuleColumnsImmutable(h.getId())&&(f.editableFlag=!1),f})},x=function(t,n){var i,o,a,l;return n=n||!1,O=t.Label.dataIndex,l=e.is(t.Label.minWidth)?t.Label.minWidth:null,o=w.getLabelInfo(h.getId()),a=e.is(t)&&e.is(t.name)?D.getNLSValue("Column."+t.name):v.getColumnDisplayValue(t.Label),(i={sortableFlag:!0,groupableFlag:!0,text:a,dataIndex:"tree",width:e.is(l)?"auto":n?"100%":"30%",minWidth:e.is(l)?l:150,dicoType:o.dicoType,label:o.attributeName,labelIsOnRef:o.labelIsOnRef,getCellValue:function(t){var n,i,o=t.nodeModel,a=null;return e.is(o)&&(B.isFakeNodeModel(o)&&o.getProperty()===F.Reference?(i=this.getColumnOrGroup(F.Reference),n=y.getReference(o.getIdentifier()),a=i.text+": "+n.get("V_Name")+" ("+o.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount+")"):a=o.getLabel()),a}}).editableFlag="NonEditable"!==t.Label.displayType,i.setCellValue=W.setValue,w.areModuleColumnsImmutable(h.getId())&&(i.editableFlag=!1),i},R=function(){var e,t,n=[];for(e in F)Object.prototype.hasOwnProperty.call(F,e)&&((t={sortableFlag:!1,editableFlag:!1,groupableFlag:!0,dataIndex:F[e],visibleFlag:!1,width:"auto",minWidth:100,editionPolicy:"EditionOnClick",hasCellValue:function(e){return!B.isFakeNodeModel(e.nodeModel)},getCellValue:W.getGroupingColumnCellValue}).text=v.getColumnDisplayValue(t),n.push(t));return n},N=function(){return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,dataIndex:"hide_show_3D",displayType:"hideShow3D",editionPolicy:"EditionOnOver",typeRepresentation:"visibility",alignment:"center",text:"",width:30,icon:D.getIconURLFromKey("3DColumnIcon"),hasCellValue:U.hasCellValue,getCellValue:U.getCellValue,setCellValue:U.setCellValue}},{getBlockAttributes:function(t){var n,i,o={boAttrName:[],roAttrName:[],otherAttrName:[]},a=!1,l=e.is(t.Columns)?t.Columns.Column:[],r=M(t),s=function(e,t){switch(t){case"reference":-1===o.boAttrName.indexOf(e)&&o.boAttrName.push(e);break;case"instance":-1===o.roAttrName.indexOf(e)&&o.roAttrName.push(e);break;default:-1===o.otherAttrName.indexOf(e)&&o.otherAttrName.push(e)}};return e.is(r.label)&&(e.is(r.labelIsOnRef,"boolean")?r.labelIsOnRef?s(r.label,"reference"):s(r.label,"instance"):s(r.label,null)),e.is(l,"array")||(l=[l]),l.forEach(function(t){var n=v.getAttributeInfoFromColumn(t),o=n.dataIndex,l=n.objType;if(!e.owns(t,"displayType")||"MultiType"!==t.displayType&&"NonEditableMultiType"!==t.displayType&&"OPTime"!==t.displayType)"instance"===l||"reference"===l?s(o,l):"relation"===l&&(a=!0,s(o,l));else switch(t.displayType){case"MultiType":case"NonEditableMultiType":t.dicoType=A(t),t.dicoType.forEach(function(e){s(i=e+"."+o,l)});break;case"OPTime":s(i,l)}}),a&&(n=T.getAllRelationDisplayAttributes(),e.is(n,"array")&&n.forEach(function(e){s(e,"reference")})),o},setReusablecontent:function(t){var n=function(n,i){var o,a={forceDBMode:!0,onComplete:function(){e.is(o)&&e.is(o.objectToBeModified)&&(o.objectToBeModified.setAdditionalInfo({isFetched:!0}),v.doesAttributeExist(o.objectToBeModified,o.dataIndex)||v.isAttrApplicableForType(o.objectToBeModified,o.dataIndex)||-1===P.indexOf(o.dataIndex)&&h.warn(D.getNLSValue("TableView.AvailabilityFailure",{key:o.attributeNLSTitle}))),e.is(i)&&e.is(i.cellView)&&t.updateRenderedRow(i.rowID,{updateCellContent:!0})}};n.preventDefault(),n.stopPropagation(),i&&(o=v.getNodeAndColumnInfos(i.nodeModel,i.cellView.collectionView.getColumnOrGroup(i.columnID)),!e.is(o.objectToBeModified)||v.doesAttributeExist(o.objectToBeModified,o.dataIndex)||o.objectToBeModified.getAdditionalInfo("isFetched")||("instance"===o.instOrRef?y.fetchInstance({PID:o.objectToBeModified.id},a):y.fetchRoot(o.objectToBeModified.id,a)))};b||(t.addEventListener("show",function(e,t){h.debug("onEventShow fired"),n(e,t)}),t.addEventListener("activeCellChange",function(t){const i=t.dsModel,o=i.getActiveCellID();if(o>=0&&i.isCellInEdition(o)){let a=i.getCellInfosAt(o);e.is(a)&&a.rowID>=0&&a.columnID>=0&&e.is(a.nodeModel)&&e.is(a.nodeModel.getReferencePID)&&(e.is(a.cellView)||(a.cellView={collectionView:i}),n(t,a))}h.debug("activeCellChange fired")}))},getColumnDataIndexByDisplayType:function(t,n){var i,o,a,l=[];if(!e.is(n))return this.getColumnsDataIndex(t);for(o=t.columns.length,i=1;i<o;i++)a=t.columns[i],e.is(a)&&e.owns(a,"dataIndex")&&e.owns(a,"displayType")&&a.displayType===n&&l.push(a.dataIndex);return l},getColumnsDataIndex:function(t,n){var i,o,a,l,r=[],s=!!e.is(n,"boolean")&&n;if(s||!e.is(L)){for(a=t.columns.length,e.is(t._treeDataIndex)&&r.push(t._treeDataIndex),i=1;i<a;i++)l=t.columns[i],o=!e.is(l.isExportable)||l.isExportable,e.is(l)&&e.owns(l,"dataIndex")&&o&&(s&&l.isHidden||(!e.owns(l,"displayType")||"MultiType"!==l.displayType&&"NonEditableMultiType"!==l.displayType?r.push(l.dataIndex):l.dicoType.forEach(function(e){r.push(e+"."+l.dataIndex)})));s||(L=r)}else r=L;return r},createTreeListViewColumns:function(t,n,i,o){var a,l,r=[];return t.Columns&&t.Columns.Column&&(r=E(t.Columns.Column)),t.Label&&((a=x(t,0===r.length)).isExportable=!1,r.splice(0,0,a)),Array.isArray(C)&&(l=r.filter(function(e){return C.includes(e.dataIndex)})).length>0&&(r=r.filter(function(e){return!C.includes(e.dataIndex)}),l.length>0&&r.unshift.apply(r,l)),(!e.is(t.addDefaultGroupingColumns)||e.is(t.addDefaultGroupingColumns,"boolean")&&!0===t.addDefaultGroupingColumns)&&(r=r.concat(R())),e.is(o)&&!0===o&&r.splice(0,0,N()),{columns:r,labelIsOnRef:e.is(t.Label)?a.labelIsOnRef:null,label:e.is(t.Label)?a.label:null}},manageColumn:function(e,t,n){n&&(!0===n.visible?e.showColumn(t):e.hideColumn(t))},getLabelColumnDataIndex:function(){return O}}}}),define("DS/DELWKOViewBehaviors/DELWKOTreeListViewBehaviorCloud",["UWA/Core","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXDragDrop","DS/DELWKOViewBehaviors/DELWKOTreeContextualMenu","DS/DELWKOViewBehaviors/DELWKOColumnManagerCloud","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXActionDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXGenericLinksDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXManageCapableRscDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Relations/RelationsUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ToolTipManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/DataGridViewManager","DS/Utilities/Dom","DS/Core/PointerEvents","DS/DELWKOFilteringModule/DELWKOFilteringBaseFilter","DS/DELWKOFilteringModule/DELWKOFilteringSetFilterView"],function(e,t,n,i,o,a,l,r,s,u,d,c,g,p,f,m,h){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","PlatformPlugin","SelectionPlugin"],creator:function(C,b,y,I,v,D,V,T,w,S,L,M,A,E,x){var P,R,N,O,F,B,U,W,k,_,G,H,j,K,X,z,q,Q,J,Z,Y,$,ee,te,ne,ie,oe,ae,le,re,se,ue,de,ce,ge,pe,fe,me={},he=new s(b,v,T,A,y,E),Ce=new u(b,v,w),be=(new d(b,V,v,D),I.getComponent("DataGridView")),ye=new c(b,S,y,v,D,V),Ie={placeholder:"",apiVersion:2,showSelectionCheckBoxesFlag:!0,rowSelection:"multiple",cellSelection:"none",showRowIndexFlag:!1,defaultColumnDef:{sortableFlag:!0,editionPolicy:"EditionOnOver",typeRepresentation:"string"},isEditable:!1,selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",rowGroupingOptions:{depth:0,hideGroupedColumns:!1},getCellTooltip:function(t){var n,i,o,a,l=this.getColumnOrGroup(t.columnID),r={longHelp:""},s=[],u=V.getAttributeInfoFromColumn(l),d=D.getAttributeInfo(u.attributeName),c=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader&&e.is(t.nodeModel)&&!e.is(t.nodeModel.getReferencePID))return r;switch(!e.is(l.displayType)&&e.is(u)&&V.isMultiValuated(d)&&(l.displayType="Multivalue"),l.displayType){case"URL":!t.isHeader&&e.is(t.cellModel)?r.longHelp=t.cellModel.label:r.longHelp=t.cellModel;break;case"MIL":o=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?r.longHelp="object"===e.typeOf(o)?o.getLabel():o:(a=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(a)?e.is(a.tooltip)?a.tooltip:a.getLabel():"");break;case"RWU":o=t.cellModel,t.isHeader||"RWU_Action"!==t.dataIndex?r.longHelp="object"===e.typeOf(o)?o.getLabel():o:(a=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(a)?e.is(a.tooltip)?a.tooltip:e.is(a.getLabel)?a.getLabel():"":"");break;case"CIM":o=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?r.longHelp="object"===e.typeOf(o)?o.getLabel():o:(a=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(a)?e.is(a.tooltip)?a.tooltip:a.getLabel():"");break;case"Relation":case"Multivalue":if("Multivalue"!==l.displayType||t.isHeader||(c=V.getValueAsArray(t.nodeModel.options.grid[t.dataIndex])),"Relation"!==l.displayType||t.isHeader||(c=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(c)&&0!==c.length){for(V.isDate(d)&&(c=c.map(function(e){return V.getFormattedDate(e)})),i=0;i<c.length;i++)n=c[i],s.push(e.is(n.Value)?n.Value:n);r.longHelp=V.getValueAsString(s,V.getType(d)).split(b.getPreferenceValue("separator")).join("\n")}else t.isHeader&&(r.longHelp=c);break;case"DocMgmt":if(t.isHeader||(c=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(c)&&0!==c.length){s=c.reduce((e,t)=>("Reference Document"===t.type?e.Attachments.push(t.title):e.Specifications.push(t.title),e),{Specifications:[],Attachments:[]});let e="";for(const[t,n]of Object.entries(s))Array.isArray(n)&&n.length>0&&(e+=t+":",n.forEach(t=>{e+="\n\t"+t}),e+="\n");r.longHelp=e}else t.isHeader&&(r.longHelp=c);break;case"hideShow3D":t.isHeader?r.longHelp=y.getNLSValue("HideShow3D.tooltip"):(o=t.cellModel,e.is(o,"boolean")&&(r.longHelp=o?y.getNLSValue("HideShow3D.hide3D"):y.getNLSValue("HideShow3D.show3D")));break;case"BIEssentials":case"BIEssentialsAltSub":t.isHeader?r.longHelp=t.cellModel:(o=t.nodeModel.options[t.dataIndex],r.longHelp=e.is(o)?o.tooltip:"");break;case"OPTime":t.isHeader?r.longHelp=t.cellModel:(o=t.nodeModel.getAttributeValue("V_OperationTime"),r.longHelp="string"===e.typeOf(o)&&"FetchInProgress"!==o?o:"");break;default:o=t.cellModel,t.isHeader||(e.is(o)?"object"===e.typeOf(o)?o=o.getLabel():V.isBoolean(d)?o="TRUE"===o?y.getNLSValue("TRUE"):y.getNLSValue("FALSE"):V.isDate(d)?o=V.getFormattedDate(o):V.hasRangeDefined(d)?o=t.cellModel:(V.isDouble(d)||V.isInteger(d))&&(o=V.getValueAsString(o,V.getType(d))):o=""),r.longHelp=o}return!t.isHeader&&e.is(t.nodeModel)&&(o=ye.getTooltipValue(t),e.is(r.longHelp)&&(r.longHelp+=r.longHelp.length>0&&o.length>0?"\n\n":"",r.longHelp+=o)),r},getCellEditableState:function(e){var t,n=!0;return!0===e.isHeader?n=!1:"selection"===e.dataIndex?n=!0:(t=V.getNodeAndColumnInfos(e.nodeModel,e.parent.options.columns[e.virtualColumnID]),n=!V.isReadOnly(t.attributeInfo,t.attributeDef)),n}};return q=function(){var e=P.getTreeDocument();e.getFilterManager().registerFilter("wkoFilter",m);const t=P.getFilterViewManager();t.registerFilterView("wkoSet",h),t.registerFilterView("wkoFilter",t.FILTERVIEWS_MAP.wkoSet);let n={label:{filterId:"wkoFilter",filterOptions:{keepChildren:!0,ensureVisible:!0}}};const i=P.columns.length;for(let e=0;e<i;e++){var o;"url"===P.columns[e].typeRepresentation&&"current.reference"===(o=P.columns[e].dataIndex)&&(n[o]={filterId:"set"}),"datetime"===P.columns[e].typeRepresentation&&(n[o=P.columns[e].dataIndex]={filterId:"dateWithCondition"})}e.setFilterModel(n)},Q=function(s){var u;if(_=e.is(s.columnConfig)?s.columnConfig:M.getViewColumnPreferences(b.getId(),B),H=(s=s||{}).dataGridViewOptions?e.extend(Ie,s.dataGridViewOptions,!0):Ie,!e.is(_))throw new Error("_createTreeListView options not defined");if(H.contextualCommands&&(X=new n(b,I,y,V,E,v,M,D,A),H.onContextualEvent=function(t){var n,i,o,a,l=this,r=[],s={};if(e.is(t.cellInfos)&&(n=(o=t.cellInfos).nodeModel,a=o.manager,e.is(o.rowID))){if(-1===o.rowID){if(e.is(H.headerContextualCommands)){if(i=l.getColumnOrGroup(o.columnID),(s={node:n,selectedNodes:l.getTreeDocument().getXSO().get(),column:i,virtualColumnID:o.columnID,dataIndex:i.dataIndex,manager:a,handlers:{onSizeColumnToFit:function(e){a.sizeColumnToFit(e)},onSortColumnContentAsc:function(){a.sortColumn(i.dataIndex,"asc")},onSortColumnContentDesc:function(){a.sortColumn(i.dataIndex,"desc")},onClearSort:function(){a.clearSort()},onHideColumn:function(e){M.updateViewPreferences(b.getId(),i.dataIndex,{visibility:!1}),l.hideColumn(e,{isUserInteraction:!1})},onPinColumn:function(e){P.layout.columns[e].icon={},P.layout.columns[e].icon.iconName="pin",P.layout.columns[e].icon.fontIconFamily=WUXManagedFontIcons.Font3DS,P.layout.setColumnPinned(i.dataIndex,"left"),M.updateViewPreferences(b.getId(),i.dataIndex,{colPinned:"left"})},onUnpinColumn:function(e){P.layout.columns[e].icon={},P.layout.setColumnPinned(i.dataIndex,"unpinned"),M.updateViewPreferences(b.getId(),i.dataIndex,{colPinned:"unpinned"})},onGroupRows:function(e,t){var n;M.doesModuleHaveRecursiveGrouping(b.getId())?(n=i.dataIndex!==e?l.getColumnOrGroup(a.getColumnIndexByDataIndex(e)):i,ue(n)):ae(e,t)},onRemoveGrouping:function(){M.doesModuleHaveRecursiveGrouping(b.getId())?de():le()},onGroupByCriteria:function(e){b.getBehavior("GroupingViewBehavior").group(e)},onUngroupByCriteria:function(e){b.getBehavior("GroupingViewBehavior").ungroup(e)}}}).params=t,r=X.buildContextualMenu(H.headerContextualCommands,s),e.is(i.pinned)&&"unpinned"!=i.pinned){var u=-1,d=-1;r.forEach(e=>{u++,"PinColumn"!==e.title&&"Pin"!==e.title||(d=u)}),d>-1&&r.splice(d,1)}else u=-1,d=-1,r.forEach(e=>{u++,"UnpinColumn"!==e.title&&"Unpin"!==e.title||(d=u)}),d>-1&&r.splice(d,1);var c,g=l.getTreeDocument().getFilterManager().getFilters(),p=i.dataIndex;if(e.is(i.dataIndex)&&"tree"===i.dataIndex&&(p="label"),e.is(g)&&Object.keys(g).includes(p))"tree"!=s.dataIndex?e.is(g[s.dataIndex])&&(c=g[s.dataIndex].filterModel):e.is(g.label)&&(c=g.label.filterModel),e.is(c)?(u=-1,d=-1,r.forEach(e=>{u++,"FilterColumn"!==e.title&&"Apply Filter"!==e.title||(d=u)}),d>-1&&r.splice(d,1)):(u=-1,d=-1,r.forEach(e=>{u++,"ResetFilterColumn"!==e.title&&"Reset Filter"!==e.title||(d=u)}),d>-1&&r.splice(d,1));else u=-1,d=-1,r.forEach(e=>{u++,"FilterColumn"!==e.title&&"Apply Filter"!==e.title||(d=u)}),d>-1&&r.splice(d,1),u=-1,d=-1,r.forEach(e=>{u++,"ResetFilterColumn"!==e.title&&"Reset Filter"!==e.title||(d=u)}),d>-1&&r.splice(d,1)}"selection"===o.dataIndex||"taggerColor"===o.dataIndex||"hide_show_3D"===o.dataIndex?r.forEach(function(e){e.state="disabled"}):"tree"===o.dataIndex&&r.forEach(function(e){"Hide"===e.title&&(e.state="disabled")})}else if(0<=o.rowID){if(!e.is(n.getReferencePID))return;e.is(n)&&(n.isSelected()||n.select()),i=l.getColumnOrGroup(o.columnID),(s={node:n,selectedNodes:l.getTreeDocument().getXSO().get(),column:i,getColumnIDFromDataIndex:function(e){return a.getColumnIndexByDataIndex(e)},getColumnOrGroup:function(e){return o.cellView.collectionView.getColumnOrGroup(e)},handlers:{onGroupRows:function(e,t){ae(e,t)},onRemoveGrouping:function(){le()}}}).infos=V.getNodeAndColumnInfos(n,i),r=X.buildContextualMenu(H.contextualCommands,s)}return r}}),e.is(s.pinnedColumns)&&(H.pinnedColumns=s.pinnedColumns),e.is(s.expandState)&&(H.expandState=s.expandState),e.is(s.dataGridViewOptions)&&e.is(s.dataGridViewOptions.enableDragAndDrop,"boolean")&&!0===s.dataGridViewOptions.enableDragAndDrop){switch(H.cellDragEnabledFlag=!0,H.rowDragEnabledFlag=!0,u={acceptedTypes:s.pprTypes,pprTypesWithSupportedViews:e.is(s.pprTypesWithSupportedViews)?s.pprTypesWithSupportedViews:[],pprTypesWithSupportedRoot:e.is(s.pprTypesWithSupportedRoot)?s.pprTypesWithSupportedRoot:[]},s.dragDropManager){case"WUXActionDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),F=new o(C,b,y,v,D,S,L,E);break;case"WUXGenericLinksDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),F=new a(C,b,y,v,D,S,L,I);break;case"WUXManageCapableRscDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),F=new l(C,b,y,v,D,S,L,I);break;case"WUXDataCollectRowDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),F=new r(C,b,y,S,v);break;default:F=new t(C,b,y,v,D,S,L,E)}F.init(u),H=e.extend(H,F.getDDBehavior())}H.filterModel=s.filterModel,N=new i(C,b,G,K,v,D,V,y,I,T,M,x),j=N.createTreeListViewColumns(_,H.showTagger,H.showSelection,H.show3DHideShow)},z=function(t){var n,i,o=b.getPreferenceValue("separator");if(O=t,e.is(j)&&e.is(j.columns,"array")?H.columns=j.columns:H.columns=[],e.is(P))P.setProperties({columns:H.columns});else{H.treeDocument=t,P=new be(H),R=new g(P),P.registerColumnsEnum();const n=b.getBehavior("CfgColumnsBehavior");if(e.is(n)){const e=n.getRequiredTypeRepresentations();P.registerColumnTypeRepresentations(e)}}if(p.addEventOnElement(P,P,f.POINTERUP,function(e,t){var n=b.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"desc")}),p.addEventOnElement(P,P,f.POINTERDOWN,function(e,t){var n=b.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"asc")}),e.is(H.toolbarOptions)&&Array.isArray(H.toolbarOptions.items)&&P.setToolbar(ce(H.toolbarOptions.items)),e.is(H.pinnedColumns)&&Array.isArray(H.pinnedColumns),_.Label)if("Auxiliary"===_.name&&e.is(_.Label.length)){for(P._treeDataIndex="",P._label="",P._types="",i=0;i<_.Label.length;i++)P._treeDataIndex+=i<_.Label.length-1?_.Label[i].dataIndex+o:_.Label[i].dataIndex,P._label+=i<_.Label.length-1?_.Label[i].dataIndex.split(".")[0]+o:_.Label[i].dataIndex.split(".")[0],P._types+=i<_.Label.length-1?_.Label[i].type+o:_.Label[i].type;P._labelIsOnRef=!0,P.isMultipleLabel=_.Label.length>1}else P._treeDataIndex=_.Label.dataIndex,P._label=j.label,P._labelIsOnRef=j.labelIsOnRef,P.isMultipleLabel=!1;e.is(H.setReusablecontent)&&!1===H.setReusablecontent||N.setReusablecontent(P),n=N.getBlockAttributes(_),v.setSelectPredicate(b.getId(),n)},Z=function(t){var n,i,o,a,l,r,s,u=t.type,d={icons:"",label:"",grid:{},useAsyncPreExpand:!0},c=b.getPreferenceValue("separator"),g=N.getColumnsDataIndex(P);if(P._labelIsOnRef){if(l="VPMReference"===u&&(e.is(t.V_usage,"array")&&t.V_usage.includes("3DPart")||e.is(t.V_usage,"string")&&"3DPart"===t.V_usage)?y.getIconURLFromKey("3DPart"):y.getIconURLFromKey(u),d.icons=[l],d.label="",e.is(P.isMultipleLabel)&&P.isMultipleLabel)for(o=P._label.split(c),a=P._types.split(c),s=0;s<o.length;s++)e.is(t.type)&&("undefined"===a[s]||"undefined"!==a[s]&&D.isAKindOf(t.type,a[s]))&&(r=""===d.label?"":c,e.owns(t,o[s])&&e.is(t[o[s]])&&(d.label+="NULL"!==t[o[s]]?r+t[o[s]]:""));e.owns(t,P._label)&&(d.label="NULL"!==t[P._label]?t[P._label]:"")}for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i=t[n],e.is(i)&&"NULL"!==i&&(g&&g.indexOf(n+".reference")>=0?d.grid[n+".reference"]=t[n]:"PID"===n&&(d.referencePID=t[n]),"type"===n&&(d.referenceType=t[n]),"defType"===n&&(d.defType=i)));return he.fillNodeOptions(d,g),Ce.fillNodeOptions(d,g),e.is(me.show3DHideShow)&&!0===me.show3DHideShow&&(d.hideShow3D=!0),d},J=function(t,n,i){var o,a,l=N.getColumnsDataIndex(P),r=Z(t);for(o in!P._labelIsOnRef&&e.owns(n,P._label)&&(r.label="NULL"!==n[P._label]?n[P._label]:""),n)Object.prototype.hasOwnProperty.call(n,o)&&(a=n[o],e.is(a)&&"NULL"!==a&&(l&&l.indexOf(o+".instance")>=0?r.grid[o+".instance"]=n[o]:"PID"===o?r.instancePID=n[o]:"V_TreeOrder"===o&&(r.grid.V_TreeOrder=parseFloat(n[o]))));return he.fillNodeOptions(r,l,n,i),r},Y=function(t){var n,i,o,a=t.changedAttributes(),l=t.isInstance()?".instance":".reference",r=P._labelIsOnRef?".reference":".instance",s=N.getColumnsDataIndex(P),u={};if(!t.isConnection()&&e.is(a)){for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(o=n+l,-1!==s.indexOf(o)&&(u[o]="NULL"!==a[n]?a[n]:""),n===P._label&&r===l&&(i="NULL"!==a[n]?a[n]:""));return{label:i,attributes:u}}},$=function(){var e,t,n=[],i=R.getNumberOfRows();for(e=0;e<i;e++)t=R.getTreeNodeModelFromRowID(e),n.push(t.getReferencePID());return n},ee=function(){var t,n,i,o,a,l,r,s,u,d;if(W)for(i=M.getViewColumnPreferences(b.getId()),n=e.is(i)?i.Columns.Column:[],a=P.getColumnIndexByDataIndex("tree")+1,t=0;t<n.length;t++){if(s={},(o=n[t]).isHidden)P.isColumnHidden(o.dataIndex)||P.hideColumn(o.dataIndex);else{d=isNaN(o.width)?"auto":parseInt(o.width),P.getColumnWidth(o.dataIndex)!==d&&(s.width=d),d=isNaN(o.minWidth)?"100":parseInt(o.minWidth),P.getColumnMinWidth(o.dataIndex)!==d&&(s.minWidth=d),P.isColumnHidden(o.dataIndex)&&(s.visibleFlag=!0),e.Object.keys(s).length>0&&P.layout.setColumnOrGroupProperties(o.dataIndex,s),u=P.getColumnIndexByDataIndex(o.dataIndex),r=P.layout.getOrderedColumnsReverseIndexes(),l=P.layout.getOrderedColumnsIndexes();var c=P.layout.getColumnPinned(u);o.pinned!=c&&(P.layout.columns[u].icon={},"unpinned"!=o.pinned&&(P.layout.columns[u].icon.iconName="pin",P.layout.columns[u].icon.fontIconFamily=WUXManagedFontIcons.Font3DS),P.layout.setColumnPinned(u,o.pinned)),r[u]!==a&&P.moveColumn(o.dataIndex,l[a])}a++}},te=function(e){var t,n,i="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(63&n|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(63&n|128));return i},ne=function(e){return'"'+te(e).replace(/"/g,'""')+'"'},ie=function(e){H.showTagger&&P.updateNodeKPIColor(e)},oe=function(t){var n,i,o=[],a=t.collectionView;if(t.startNodeIndex>=0&&t.endNodeIndex>=0){for(n=t.startNodeIndex;n<=t.endNodeIndex;n++)i=a.model[n],e.is(i)&&o.push(i);o.length>0&&b.notify("visibleNodesChanged",[b.getId(),o])}},re=function(t){var n=M.getColumnsForGrouping(b.getId());((t=!!e.is(t,"boolean")&&t)||n.length>0)&&P.groupRows({dataIndexesToGroup:n})},se=function(t){var n;e.is(t.options)&&t.options.updateType===WUXModelUpdateTypes.Grouping&&(M.isGroupingExist()||b.notify("manageCommandsOnGrouping"),n=M.getColumnsForGrouping(b.getId()),e.is(U)&&0===n.length&&(b.getBehavior("WUXNodeModelBehavior").removeEventListener(U),U=void 0))},ae=function(t,n){var i;M.getColumnsForGrouping(b.getId(),!0).length>0&&P.rowGroupingOptions.depth!==n?b.warn(y.getNLSValue("TableView.InvalidGrouping")):(e.is(U)||(i=b.getBehavior("WUXNodeModelBehavior"),e.is(i)&&(U=i.addEventListener("pushUpdate",se))),P.rowGroupingOptions.depth=n,M.addColumnForGrouping(b.getId(),t),re(),b.notify("manageCommandsOnGrouping"))},le=function(){M.resetColumnsForGrouping(b.getId()),re(!0)},ue=function(t){var n,i=b.getBehavior("GroupingViewBehavior"),o=t.dataIndex;e.is(i)&&!0===t.groupableFlag&&(M.resetColumnsForGrouping(b.getId()),M.addColumnForGrouping(b.getId(),o),"tree"===o&&(o=N.getLabelColumnDataIndex()),o.endsWith(".group")&&(o=M.getCollectionSpecificDataIndex(o)),n={dataIndex:o,title:t.text},i.group(n))},de=function(){var t=b.getBehavior("GroupingViewBehavior");e.is(t)&&(M.resetColumnsForGrouping(b.getId()),t.clearGrouping())},ce=function(t){return{entries:t.map(function(t){var n,i=y.getIconURLFromKey(t.icon);return e.is(t.tooltip)&&(n={title:y.getNLSValue(t.tooltip.title),shortHelp:y.getNLSValue(t.tooltip.shortHelp)}),{id:t.id,dataElements:{typeRepresentation:e.is(t.typeRepresentation)?t.typeRepresentation:"functionIcon",position:e.is(t.position)?t.position:"far",category:e.is(t.category)?t.category:"0",icon:{iconPath:i,iconSize:{width:"22px",height:"22px"}},value:ge.bind(null,t.id),disabled:!!e.is(t.disabled)&&t.disabled,tooltip:n}}})}},fe=function(e,t){var n,i,o;i=X.buildContextualMenu(e.children),n={position:{x:(o=t.dsModel.elements.container.getBoundingClientRect()).left+5,y:o.top+(o.height-5)}},WUXMenu.show(i,n)},ge=function(t,n){var i;i=H.toolbarOptions.items.find(function(e){return t===e.id}),e.is(i)&&e.is(i.children)?fe(i,n):e.is(H.toolbarOptions.actionHandler,"function")?H.toolbarOptions.actionHandler.call(null,t,n):e.is(X)&&X.onContextMenuCallback(t)},pe=function(t){var n;t=Array.isArray(t)?t:[t],P&&(n=P.getToolbar(),e.is(n)&&n.items.getChildren().forEach(function(e){var n=e.options.id,i=t.indexOf(n);e.updateOptions({disabled:-1===i})}))},{viewName:"treeListView",listenTo:function(){return{TreeViewPrefModified:ee,LoadDropContent:this.processDropContent}},onStart:function(t,n){t=t||{},e.is(t.pprTypes)&&e.is(t.columnConfigName)&&(e.is(t.hasReadOnlyTypes,"boolean")&&t.hasReadOnlyTypes&&(Ie.defaultColumnDef.getCellEditableState=function(t){let n=null;return e.is(t)&&e.is(t.nodeModel)&&e.is(t.nodeModel.object)&&(n=t.nodeModel.object.type||null),(!e.is(n)||!D.isReferencesHasReadOnlyType(n))&&P.getColumnOrGroup(t.dataIndex).editableFlag}),e.is(t.views)&&e.is(t.views.treeListView)&&(me=t.views.treeListView,Object.prototype.hasOwnProperty.call(me,"show3DHideShow")&&E.isSuppressHideShow3DColumn()&&(me.show3DHideShow=!1)),e.is(t.views.treeListView.toolTipConfigXML)&&ye.init(t.views.treeListView.toolTipConfigXML),B=t.columnConfigName,(W=!!e.is(t.registerViewPreference)&&t.registerViewPreference)&&M.registerViewforColumnPref({viewID:b.getId(),columnConfigName:t.columnConfigName,viewIcon:t.moduleIcon}),G=Array.isArray(t.columnsBeforeTitle)?t.columnsBeforeTitle:null,!!e.is(t.immutableColumns,"boolean")&&t.immutableColumns&&M.registerModuleColumnsAsImmutable(b.getId()),K=!!e.is(t.noActiveCellChange,"boolean")&&t.noActiveCellChange,Q({pprTypes:t.pprTypes,dataGridViewOptions:e.merge(me,{isEditable:!!e.is(t.isAuthoringAllowed)&&t.isAuthoringAllowed}),dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,pprTypesWithSupportedViews:Array.isArray(t.pprTypesWithSupportedViews)?t.pprTypesWithSupportedViews:null,pprTypesWithSupportedRoot:Array.isArray(t.pprTypesWithSupportedRoot)?t.pprTypesWithSupportedRoot:null,pinnedColumns:Array.isArray(t.pinnedColumns)?t.pinnedColumns:null,filterModel:t.filterModel,expandState:e.is(t.expandState)?t.expandState:void 0}),!0===(k=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&M.registerViewforWidgetLayout({viewID:b.getId(),viewType:this.viewName})),n()},onStop:function(){e.is(P)&&P.remove(),W&&M.unRegisterViewforColumnPref(b.getId()),!0===k&&M.unregisterViewforWidgetLayout(b.getId(),this.viewName)},has3DHideShowColumn:function(){return!!e.is(me.show3DHideShow,"boolean")&&me.show3DHideShow},createTreeListView:function(t){var n,i,o="",a=me;t=t||{},e.is(t.dataGridViewOptions.identifier)&&(o=t.dataGridViewOptions.identifier),e.is(t.columnConfig)&&(i=t.columnConfig),e.is(t.dataGridViewOptions)&&(a=t.dataGridViewOptions),Q({columnConfig:i,pprTypes:t.pprTypes,dataGridViewOptions:a,dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,identifier:o}),e.is(t.treeDocument)&&(z(t.treeDocument),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(t.treeListViewContainer)&&P.getContent().inject(t.treeListViewContainer),e.is(t.toolbarContainer)&&(n=P.getToolbar(),e.is(n)&&n.getContent().inject(t.toolbarContainer)))},getColumnsByDisplayType:function(e){var t,n,i=[],o=N.getColumnDataIndexByDisplayType(P,e),a=o.length;for(t=0;t<a;t++)n=o[t],i.push(n.split(".")[0]);return i},loadDocument:function(t){z(t),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(H)&&H.filterModel&&q()},getContent:function(){var t=void 0;return e.is(P)&&(t=P.getContent()),t},manageColumn:function(t,n){if("taggerColor"!==t)return e.is(P)&&e.is(N)?N.manageColumn(P,t,n):void 0;ie(n.visible)},processDropEffect:function(e){return F.processDropEffect(e)},processDropContent:function(e,t){var n=new Event("Drag");return n.dataTransfer=new DataTransfer,n.dataTransfer.setData("Text",e),F.onTreeListViewDrop(n,t)},getTreeListViewManager:function(){var t=null;return e.is(R)&&(t=R),t},getLabelAttribute:function(){return P._label},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=Z(t.toJSON()),e.is(H.expandState)&&(n.expandState=H.expandState)),n},getInstanceNodeOptions:function(t,n,i){var o;return e.is(t)&&e.is(n)&&(o=J(t.toJSON(),n.toJSON(),i)),o},getRelationNodeOptions:function(e,t){var n=N.getColumnsDataIndex(P);return he.getRelationAttributes(e,n,t)},getDocumentNodeOptions:function(e){var t=N.getColumnsDataIndex(P);return{attributes:Ce.getDocumentNodeOptions(e,t)}},getUpdateNodeOptions:function(t){var n;return e.is(t)&&(n=Y(t)),n},getVisibleTableContentAsCSV:function(e){return te(P.getAsCSV({columnSeparator:e,addLevelInformation:!0,allColumns:!1,forceQuotes:!0}))},getConfiguredAttributesAsCSV:function(t,n){var i,o,a,l,r,s=[],u="";function d(e,n){var i,o;for(i=t[n].Attribute,o=0;o<i.length;o++)if((l=i[o].name)===e)return!0;return!1}for(i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(o=t[i].Attribute,a=0;a<o.length;a++)l=o[a].name,-1===s.indexOf(l)&&s.push(l);for(r=0;r<s.length;r++)0!==r&&(u+=n),u+=ne(s[r]);return u+="\r\n",$().forEach(function(o){var a,l,c;if(a=v.getReference(o),e.is(a)&&function(e){return Object.prototype.hasOwnProperty.call(t,e)}(i=a.get("type"))){for(r=0;r<s.length;r++)0!==r&&(u+=n),c=d(l=s[r],i)&&e.is(a.get(l))?String(a.get(l)):"",u+=ne(c);u+="\r\n"}}),u},isInverseRelationColumnPresent:function(){var t,n=!1,i=T.getInverseRelationNameSet();return i.size>0&&e.is(N)&&(t=N.getColumnsDataIndex(P),e.is(t,"array")&&(n=t.some(function(e){return i.has(e)}))),n},getDataGridView:function(){return P},getTreeDocument:function(){return O},getToolBarContent:function(){var e,t=null;return P&&(e=P.getToolbar())&&(t=e.getContent()),t},enableToolBarItems:function(e){pe(e)}}}}});