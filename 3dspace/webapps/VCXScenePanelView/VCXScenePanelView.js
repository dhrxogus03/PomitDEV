define("DS/VCXScenePanelView/VCXImmersiveNavView",["UWA/Class","DS/Core/PointerEvents","DS/CoreEvents/Events","DS/Controls/Button","i18n!DS/VCXScenePanelView/assets/nls/VCXScenePanelView"],function(e,t,i,n,o){"use strict";return e.extend({init:function(e,t){e&&t?(this._state=!1,this._UIprevious=this.createUIArrow("Left").inject(e),this._UInext=this.createUIArrow("Right").inject(e),this.createUIDots(e),this._uiButtonsContainer=UWA.createElement("div",{html:"",id:"PreviewModeGUI__uiButtonsContainerID",class:"PreviewModeGUI__uiButtonsContainer"}),this._uiButtonsContainer.inject(t),this._createTogglePlayPauseButton().inject(this._uiButtonsContainer)):console.error("immersiveNav init failed")},unInitialize:function(){this.unregisterLeftArrowCB(),this.unregisterRightArrowCB(),this.unregisterPlayPauseCB(),this._UI_dot_Container.removeEventListener(t.POINTERUP,this.onPointerDownCB),this._UI_dot_Container.removeEventListener("mouseover",this.onMouseOverDotCB),this._UI_dot_Container.removeEventListener("mouseout",this.onMouseOverDotCB),this._UInext.remove(),this._UIprevious.remove(),this._UI_dot_Container.remove()},setImmersiveUIState:function(e){this._state=e,e?(this._UInext.removeClassName("hide"),this._UIprevious.removeClassName("hide"),this._UI_dot_Container.removeClassName("hide"),this._uiButtonsContainer.removeClassName("hide")):(this._UInext.addClassName("hide"),this._UIprevious.addClassName("hide"),this._UI_dot_Container.addClassName("hide"),this._uiButtonsContainer.addClassName("hide"))},togglePause:function(){this._togglePlayPauseButton.icon={iconName:"pause",fontIconFamily:WUXManagedFontIcons.Font3DS},this._togglePlayPauseButton.getContent().title=o.PreviewModeTooltipTogglePauseButton,this._togglePlayPauseButton.label=o.PreviewModeLabelTogglePauseButton},togglePlay:function(){this._togglePlayPauseButton.icon={iconName:"play",fontIconFamily:WUXManagedFontIcons.Font3DS},this._togglePlayPauseButton.getContent().title=o.PreviewModeTooltipTogglePlayButton,this._togglePlayPauseButton.label=o.PreviewModeLabelTogglePlayButton},_createTogglePlayPauseButton:function(){return this._togglePlayPauseButton=new n({label:o.PreviewModeLabelTogglePlayButton,icon:{iconName:"play",fontIconFamily:WUXManagedFontIcons.Font3DS},type:"check"}),this._togglePlayPauseButton.getContent().addClassName("PreviewModeGUI__togglePlayPauseButton"),this._togglePlayPauseButton.getContent().title=o.PreviewModeTooltipTogglePlayButton,this._togglePlayPauseButton},_destroyTogglePlayPauseButton:function(){this.event_VCX_SCENARIO_CHANGED&&(i.unsubscribe(this.event_VCX_SCENARIO_CHANGED),delete this.event_VCX_SCENARIO_CHANGED),this.event_onViewpointEndMove&&(i.unsubscribe(this.event_onViewpointEndMove),delete this.event_onViewpointEndMove),this._currentPlaytimer&&(clearTimeout(this._currentPlaytimer),this._currentPlaytimer=null),this._togglePlayPauseButton&&(this._togglePlayPauseButton.remove(),this._togglePlayPauseButton.removeEventListener("change",this._togglePlayPause),this._togglePlayPauseButton.destroy(),this._togglePlayPauseButton=null)},createUIArrow:function(e){if("Left"===e||"Right"===e){var t=new UWA.Element("div",{class:"VCXScenariosUIArrow VCX"+e+"Arrow hide","data-rec-id":"immersiveNav"+e+"Arrow",html:[]}),i=new UWA.Element("div",{class:"VCXScenarioUI_loading hide",html:[]}).inject(t);return new UWA.Element("div",{class:"VCXpie VCXspinner",html:[]}).inject(i),new UWA.Element("div",{class:"VCXpie VCXfiller",html:[]}).inject(i),t}},createUIDots:function(e){this._UI_dot_Container=new UWA.Element("div",{class:"VCXScenariosUIDots_container hide",html:[]}).inject(e),this._UI_dot_Container_clone=new UWA.Element("div",{class:"VCXScenariosUIDots_clone",html:[]}).inject(this._UI_dot_Container),this._UI_dot_Container_child=new UWA.Element("div",{html:[]}).inject(this._UI_dot_Container)},updateUIDots:function(e,t){var i=t.map(e=>e._ID);if(this.removeArrowFirstOrLastScene(e,i),this._UI_dot_Container_child.innerHTML&&(this._UI_dot_Container_child.innerHTML=""),void 0!==this._UI_dot_Container&&e&&""!==e&&t&&t.length&&!(t.length<=1))for(var n=0;n<t.length;n++){var o=t[n],s=new UWA.Element("span",{class:"VCXScenariosUIDots_dot","data-rec-id":"immersiveNavDot"+n,html:[]}).inject(this._UI_dot_Container_child);s.dataset.scenarioid=o.GetID(),e===s.dataset.scenarioid&&s.addClassName("active")}},startLoadingUI:function(e){e?this._UInext.getChildren()[0].removeClassName("hide"):this._UIprevious.getChildren()[0].removeClassName("hide")},updateAnimationStatus:function(e){var t="mask "+(e+.25)+"s steps(1, end) infinite, morepos "+(e+.25)+"s steps(1, end) infinite";this._UInext.getChildren()[0].style.animation=t,this._UIprevious.getChildren()[0].style.animation=t},stopLoadingUI:function(){this._UInext.getChildren()[0].addClassName("hide"),this._UIprevious.getChildren()[0].addClassName("hide")},registerLeftArrowCB:function(e){this.leftArrowCB=e,this._UIprevious.addEventListener(t.POINTERUP,this.leftArrowCB,!1)},unregisterLeftArrowCB:function(){this.leftArrowCB&&this._UIprevious&&(this._UIprevious.removeEventListener(t.POINTERUP,this.leftArrowCB),this.leftArrowCB=null)},registerRightArrowCB:function(e){this.rightArrowCB=e,this._UInext.addEventListener(t.POINTERUP,this.rightArrowCB,!1)},registerPlayPauseCB:function(e){this.playPauseCB=e,this._togglePlayPauseButton.addEventListener("change",e)},unregisterPlayPauseCB:function(){this.playPauseCB&&this._togglePlayPauseButton&&(this._togglePlayPauseButton.removeEventListener("change",this.playPauseCB),this.playPauseCB=null)},unregisterRightArrowCB:function(){this.rightArrowCB&&this._UInext&&(this._UInext.removeEventListener(t.POINTERUP,this.rightArrowCB),this.rightArrowCB=null)},registerDotClickCB:function(e){this.dotClickCB=e,this.onPointerDownCB=function(e){if(!e.currentTarget.hasClassName("forPlayGuidedTourCmd")){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();var t=e.target?e.target.dataset.scenarioid:void 0;void 0!==t&&this.dotClickCB(t)}}.bind(this),this._UI_dot_Container.addEventListener(t.POINTERUP,this.onPointerDownCB)},registerDotMouseOverCB:function(e){this.cloneDomThumbnailElementCB=e,this.onMouseOverDotCB=function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();var t=e.target.dataset.scenarioid;if(void 0!==t){var i=this.cloneDomThumbnailElementCB(t);this._UI_dot_Container_clone.innerHTML="",this._UI_dot_Container_clone.appendChild(i)}}.bind(this),this.onMouseOutCB=function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),void 0!==e.target.dataset.scenarioid&&(this._UI_dot_Container_clone.innerHTML="")}.bind(this),this._UI_dot_Container.addEventListener("mouseover",this.onMouseOverDotCB),this._UI_dot_Container.addEventListener("mouseout",this.onMouseOutCB)},removeArrowFirstOrLastScene:function(e,t){if(this._state){var i=t.length,n=t.indexOf(e);1===i?(this._UInext.addClassName("hide"),this._UIprevious.addClassName("hide")):n===i-1?(this._UInext.addClassName("hide"),this._UIprevious.removeClassName("hide")):0===n?(this._UInext.removeClassName("hide"),this._UIprevious.addClassName("hide")):(this._UInext.removeClassName("hide"),this._UIprevious.removeClassName("hide"))}}})});