define("DS/DELMGAApplicationServices/LayoutConfig",[],function(){"use strict";return{MANUFACTURING:{row:0,col:0,command:"ItemsView"},RESOURCE:{row:0,col:1,command:"ResourcesView"},ROUTINGS:{row:1,col:0,command:"ProcessView"}}}),define("DS/DELMGAApplicationServices/Commands/CommandsService",["UWA/Core","DS/CoreEvents/Events","DS/DELPPWModelServices/ModelUtils","DS/DELPPWServices/CommandsService/CommandsService"],function(e,n,t,i){"use strict";return function(s){var o,a=[],r=[],u="CommandsService",c=function(e,n){o.notifyApp(e,n)},d=function(e,n){o.toggleModule(e,n)},m=function(){o.initState()},l=function(){var e,n,t,i,a,r,c=s.getPlugins("SelectionPlugin");c?(n=(e=c.instance.getSelections("CMDS"))[0]||[],t=e[1]||[],a=e[2]||[],r=e[3]||[],i=[],o.manageCommandsAvailability(t,i,a,n,r)):s.getLogger().debug(u,"Selection Plugin is not available.")},C=function(e){o.toggleCmdCheckHeaderState(e)},g=function(){l()},f=function(){o.authoringCmdAvailability()},E=function(){var n=[],t=s.getPlugins("SelectionPlugin");e.is(t)&&t.isStarted&&(n=(n=t.instance.getSelectionsWithPaths("CMDS")).reduce(function(e,n){return e=e.concat(n)},[]),c("LoadRelations",[n]))},L=function(n){var t,i,a,r,c,d=s.getPlugins("InterWidgetComPlugin"),m=s.getPlugins("PlatformPlugin");m?d?(m=m.instance,d=d.instance,t=m.isCloud(),i=d.isOpsViewerWidgetLinked(),t?i&&e.is(n)?(a=!!e.is(n.auxLength,"number")&&n.auxLength>0,r=!!e.is(n.processViewLength,"number")&&n.processViewLength>0,c=!!e.is(n.resourceViewLength,"number")&&n.resourceViewLength>0,n.routingsViewLength<2&&!a&&!r&&!c?o.setCommandState("BuildUpReviewModeCmd",i):o.setCommandState("BuildUpReviewModeCmd",!i)):o.setCommandState("BuildUpReviewModeCmd",i):o.setCommandState("BuildUpReviewModeCmd",t)):s.getLogger().debug(u,"InterWidgetCom Plugin is not available."):s.getLogger().debug(u,"Platform Plugin is not available.")};return o=new i(s),e.extend(o,{manageConfigurationCommands:function(n){var t,i,s,a=n||{},r=!!e.is(a.isLicenseCFGValid,"boolean")&&a.isLicenseCFGValid,u=!!e.is(a.isRoot,"boolean")&&a.isRoot,c=e.is(a.auxLength,"number")?a.auxLength:0,d=e.is(a.processViewLength,"number")?a.processViewLength:0,m=e.is(a.routingsViewLength,"number")?a.routingsViewLength:0,l=e.is(a.resourceViewLength,"number")?a.resourceViewLength:0,C=e.is(a.selectedItemsCount,"number")?a.selectedItemsCount:0,g=!!e.is(a.isAuthoring,"boolean")&&a.isAuthoring,f=!!e.is(a.isCrossLevel,"boolean")&&a.isCrossLevel,E=c>0;t=!E&&!(l>0)&&(m>0||d>0),o.setCommandState("EditConfigurationContext",r&&t),1===C&&(o.setCommandState("DefineFilter",u&&!g&&!E),o.setEffectivityCmdState("DisplayEffectivity",r&&!u&&t)),o.setEffectivityCmdState("EditVariant",r&&!u&&t&&!f),1===C&&o.setEffectivityCmdState("CopyVariantEffectivity",r&&!u&&t&&!f),i=o.getCommand("CopyVariantEffectivity"),e.is(i)&&i.isVariantEffAvailable()&&o.setEffectivityCmdState("PasteVariantEffectivity",r&&!u&&t&&!f),1===C&&(o.setEffectivityCmdState("EditEvolution",r&&!u&&t),o.setEffectivityCmdState("CopyEvolutionEffectivity",r&&!u&&t)),s=o.getCommand("CopyEvolutionEffectivity"),e.is(s)&&s.isEvolutionEffAvailable()&&o.setEffectivityCmdState("PasteEvolutionEffectivity",r&&!u&&t),o.setEffectivityCmdState("ExtendEvolutionEffectivity",r&&!u&&t)},manageReplaceCommandsAvailablity:function(e){var n=e.isRoot,t=e.auxiliaryViewLength,i=e.routingsViewLength,s=e.mfgItemsViewLength,o=e.resourceViewLength;this.setCommandState("ReplaceByLatestRevision",!n&&t<1&&(i>0||s>0||o>0)),this.setCommandState("ReplaceByNewRevision",!n&&t<1&&(i>0||s>0||o>0)),this.setCommandState("ReplaceByExisting",!n&&t<1&&(1===i||1===s||1===o)),this.setCommandState("ReplaceByNewReference",!n&&t<1&&(1===i||1===s||1===o)),this.setCommandState("ReplaceWhereUsed",!n&&t<1&&s>0)},getInsertAsCommands:function(n){var t,i,o,a=[];return o=s.getPlugins("DatabasePlugin"),e.is(n)&&e.is(o)&&o.isStarted&&(t=o.instance.getValidChildTypes(n),e.is(t)&&t.length>0&&(i=n.get("PPRTYPE"),["SYSTEM","OPERATION"].indexOf(i)>-1&&a.push("InsertAsCopy"),["SYSTEM","OPERATION","PROCESS","RESOURCE"].indexOf(i)>-1&&a.push("SearchAndAddInstanceCommand"))),a},manageAdvDuplicateCmd:function(n){var i,s=n||{},o=t.isMFNLicenseAvailable(),a=!!e.is(s.auxLength,"number")&&s.auxLength>0,r=!!e.is(s.processViewLength,"number")&&s.processViewLength>0,u=!!e.is(s.resourceViewLength,"number")&&s.resourceViewLength>0,c=!!e.is(s.routingsViewLength,"number")&&s.routingsViewLength>0;i=!a&&!u&&!c&&r,this.setCommandState("DuplicateAdv",o&&i)},manageBuildUpCmdAvailabilty:function(e){L(e)},manageOrderBySequenceCmdAvailabilty:function(n){!function(n){e.is(n.auxLength,"number")&&n.auxLength>0&&o.setCommandState("OrderBySequence",!1)}(n)}}),{onStart:function(e){a.push(s.addExternalListener("select",g)),a.push(s.addExternalListener("toggleCmdCheckHeaderState",C)),a.push(s.addExternalListener("authoringMode",l)),a.push(s.addExternalListener("actionBarReady",m)),a.push(s.addExternalListener("endEdit",f)),a.push(s.addExternalListener("instanceCreated",l)),a.push(s.addExternalListener("editResourceParameterPlan",function(e){d("RPPMOD",e)})),a.push(s.addExternalListener("widgetLinked",L)),a.push(s.addExternalListener("widgetUnlinked",L)),r.push(n.subscribe({event:"DELPPWCommands/LandingPage"},function(e){c("ShowLandingPage",e)})),r.push(n.subscribe({event:"DELPPWCommands/Hide"},function(e){c("Hide",e)})),r.push(n.subscribe({event:"DELPPWCommands/HideAll"},function(e){c("HideAll",e)})),r.push(n.subscribe({event:"DELPPWCommands/Relations"},function(e){d("LINKS",e)})),r.push(n.subscribe({event:"DELPPWCommands/OrderBySequence"},function(e){c("orderBySequence",e)})),r.push(n.subscribe({event:"DELPPWCommands/ShowLogPanel"},function(e){c("ShowLogPanel",e)})),r.push(n.subscribe({event:"DELPPWCommands/DisplayProperties"},function(e){d("PROPERTIES",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateCapableResourceStructureLink"},function(e){c("CreateCapableResourceStructureLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateLink"},function(e){c("CreateLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateInstance"},function(e){c("CreateInstance",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateLinkOrInstance"},function(e){c("CreateLinkOrInstance",e)})),r.push(n.subscribe({event:"DELPPWCommands/InsertCmd"},function(e){c("InsertCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/DuplicateAdv"},function(e){c("DuplicateAdvCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/Delete"},function(e){c("Delete",e)})),r.push(n.subscribe({event:"DELPPWCommands/DetachInstance"},function(e){c("DetachInstance",e)})),r.push(n.subscribe({event:"DELPPWCommands/SearchAndAddInstanceCommand"},function(e){c("searchAndAddInstance",e)})),r.push(n.subscribe({event:"DELPPWCommands/InsertAsCopy"},function(e){c("InsertAsCopy",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceByLatestRevision"},function(e){c("ReplaceByLatestRevision",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceByExisting"},function(e){c("ReplaceByExisting",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceByNewRevision"},function(e){c("ReplaceByNewRevision",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceByNewReference"},function(e){c("ReplaceByNewReference",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceWhereUsed"},function(e){c("ReplaceWhereUsed",e)})),r.push(n.subscribe({event:"DELPPWCommands/ShowGraphView"},function(e){d("EGRAPHMOD",e)})),r.push(n.subscribe({event:"DELPPWCommands/ProductFlowCmd"},function(e){d("PRODUCTFLOWMOD",e)})),r.push(n.subscribe({event:"DELPPWCommands/ToggleAuxiliaryView"},function(e){c("toggleAuxPanel",e)})),r.push(n.subscribe({event:"DELPPWCommands/ManageCapableResources"},function(e){d("MANAGECAPABLERESOURCESMOD",e)})),r.push(n.subscribe({event:"DELPPWCommands/ItemsView"},function(e){c("ItemsView",e)})),r.push(n.subscribe({event:"DELPPWCommands/ResourcesView"},function(e){c("ResourcesView",e)})),r.push(n.subscribe({event:"DELPPWCommands/ProcessView"},function(e){c("ProcessView",e)})),r.push(n.subscribe({event:"DELPPWCommands/Requirement"},function(e){d("REQUIREMENT_VIEW",e)})),r.push(n.subscribe({event:"DELPPWCommands/EditViewPreferences"},function(e){c("EditViewPreferencesCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/LayoutPreferences"},function(e){c("LayoutPreferences",e)})),r.push(n.subscribe({event:"DELPPWCommands/ExportCSV"},function(e){c("ExportCSVCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/LoadRelations"},E)),r.push(n.subscribe({event:"DELPPWCommands/ExpandAll"},function(e){c("expandAll",e)})),r.push(n.subscribe({event:"DELPPWCommands/CollapseAll"},function(e){c("collapseAll",e)})),r.push(n.subscribe({event:"DELPPWCommands/RelationalExplorerCmd"},function(e){c("RelationalExplorerCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/Refresh"},function(e){c("RefreshCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/UserDefinedExplore"},function(e){c("UserDefExplore",e)})),r.push(n.subscribe({event:"DELPPWCommands/Show3DViewerCmd"},function(e){c("Show3DViewerCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/BuildUpReviewModeCmd"},function(e){c("BuildUpReviewModeCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/BIEssentialsCmd"},function(e){c("BIEssentialsCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/ManageInconsistentLinks"},function(e){d("MIL",e)})),o.onStart(e)},onStop:function(){var e,t;for(e=0,t=a.length;e<t;e++)s.removeExternalListener(a[e]);for(a=[],e=0,t=r.length;e<t;e++)n.unsubscribe(r[e]);r=[]}}}}),define("DS/DELMGAApplicationServices/Services",["UWA/Class"],function(e){"use strict";var n={CommandsService:"DS/DELMGAApplicationServices/Commands/CommandsService",LayoutService:"DS/DELMGAApplicationServices/LayoutService"};return e.singleton({getMap:function(){return n}})}),define("DS/DELMGAApplicationServices/LayoutService",["UWA/Core","DS/DELPPWServices/LayoutService/LayoutService","DS/DELMGAApplicationServices/LayoutConfig"],function(e,n,t){"use strict";return function(i){var s,o,a,r,u,c,d,m=new n(i),l=[];return c=function(){var n,s;m.isLayoutBuilt()?e.is(m.onActionBarReady,"function")&&m.onActionBarReady():(m.buildView({rows:[{columns:2},{columns:1}],actionBarReady:function(){e.is(s,"array")&&s.forEach(function(e){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:e.commandName,cmdState:e.state})}),m.showLayout()}}),m.removeDockingElement(WUXDockAreaEnum.TopDockArea),m.removeDockingElement(WUXDockAreaEnum.BottomDockArea),n=widget.getViewportDimensions(),m.setDockingElement(WUXDockAreaEnum.LeftDockArea,{dockingZoneSize:n.width/4,collapseDockingZoneFlag:!0}),m.setDockingElement(WUXDockAreaEnum.RightDockArea,{dockingZoneSize:n.width/4,collapseDockingZoneFlag:!0,resizableFlag:!0,visibleDockingZoneFlag:!1}),o=m.buildTreeListAuthoringDom(!0),a=m.buildTreeListAuthoringDom(!0),r=m.buildTreeListAuthoringDom(!0),u=m.buildAuxiliaryViewDom(),m.setBlocLayoutContent(t.MANUFACTURING.row,t.MANUFACTURING.col,a),m.setBlocLayoutContent(t.RESOURCE.row,t.RESOURCE.col,r),m.setBlocLayoutContent(t.ROUTINGS.row,t.ROUTINGS.col,o),s=m.setPreferredLayoutOnStartup(t))},d=function(){l.push(i.addExternalListener(t.MANUFACTURING.command,function(e){var n=m.isViewShown(t.MANUFACTURING.row,t.MANUFACTURING.col);n&&!0===e.state||!n&&!1===e.state||m.toggleView(t.MANUFACTURING.row,t.MANUFACTURING.col,e.state)})),l.push(i.addExternalListener(t.RESOURCE.command,function(e){var n=m.isViewShown(t.RESOURCE.row,t.RESOURCE.col);n&&!0===e.state||!n&&!1===e.state||m.toggleView(t.RESOURCE.row,t.RESOURCE.col,e.state)})),l.push(i.addExternalListener(t.ROUTINGS.command,function(e){var n=m.isViewShown(t.ROUTINGS.row,t.ROUTINGS.col);n&&!0===e.state||!n&&!1===e.state||m.toggleView(t.ROUTINGS.row,t.ROUTINGS.col,e.state)})),l.push(i.addExternalListener("widgetLayoutChanged",function(){var n,o,a;o=s.getPreference("widgetLayoutValues"),e.is(o)&&(n=e.Json.decode(o),(a=m.setPreferredLayout(n,t)).deferredPromise.promise.then(function(){a.columns.forEach(function(e){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:e.commandName,cmdState:e.state})}),i.getMediator().notify("LayoutCommandsToggled")}))}))},e.extend(m,{getContainer:function(n){switch(n){case"layoutContainer":return m.getUIContainer();case"manufacturing":return a;case"resource":return r;case"routings":return o;case"auxiliary":return u;case"alerts":return m.getAlertContainer();case"progressIndicator":return m.getProgressIndContainer();case"properties":return m.getPropertiesModuleContainer();case"requirement":return m.getRequirementModuleContainer();case"none":return e.createElement("div",{class:"empty-container"});default:i.getLogger().debug("MGA_LayoutService","Invalid side choice: %s",n)}},setProperties:function(e,n){},getLayoutConfig:function(){return e.clone(t)},onStart:function(e){s=i.getService("ConfigService"),c(),d(),e()},onStop:function(){var e,n;for(e=0,n=l.length;e<n;e++)i.removeExternalListener(l[e]);l=[]}})}});