define("DS/WAfrUIStandardComponents/mod_TreeModel",[],function(){"use strict";class e{constructor(e){this._model=e,this._idx=e._private._childrenOrder.length-1}next(){-1!==this._idx&&(--this._idx,-1===this._idx&&(this._model=null))}isValid(){return this._model&&-1!=this._idx}get(){if(!this.isValid())throw new Error("This iterator is invalid.");let e=this._model._private._childrenOrder[this._idx];return this._model.getChild(e)}}class t{constructor(e){this._model=e,this._idx=0,0===e._private._childrenOrder.length&&(this._idx=-1)}next(){-1!==this._idx&&(++this._idx,this._model._private._childrenOrder.length<=this._idx&&(this._idx=-1,this._model=null))}isValid(){return this._model&&-1!=this._idx}get(){let e=this._model._private._childrenOrder[this._idx];return this._model.getChild(e)}}class n{constructor(e){if(this._private=Object.create(null),this._private._children={},this._private._childrenOrder=[],!e.identifier)throw new Error("data must have an identifier property");this._private._data=e}getId(){return this._private._data?this._private._data.identifier:null}getData(){return this._private._data}addChild(e){let t=new n(e);return this._private._children[e.identifier]=t,this._private._childrenOrder.push(t.getId()),t}addChildNode(e){if(!(e instanceof n))throw new Error("childNode must be a TreeModel");let t=e.getId();if(!t)throw new Error("id must be defined and not empty");this._private._children[t]=e,this._private._childrenOrder.push(t)}getChild(e){return this._private._children[e]}getForwardIterator(){return new t(this)}getBackwardIterator(){return new e(this)}reorder(e){let t=!0;const n=this._private._childrenOrder;for(let o=0,r=e.length;o<r;++o)if(!n.includes(e[o])){t=!1;break}return t&&(n.length===e.length?this._private._childrenOrder=e:t=!1),t}}return{TreeModel:n}}),define("DS/WAfrUIStandardComponents/UIFrame",["UWA/Core","UWA/Element","DS/Controls/LayerSet","DS/Windows/ImmersiveFrame","DS/Utilities/TouchUtils","DS/Utilities/Css"],function(e,t,n,o,r,i,a){"use strict";function s(e){r.getTouchMode()?e.elements.container.addClassName("wafr-uiframe-touch"):e.elements.container.removeClassName("wafr-uiframe-touch")}var d=function(t){this.options=e.clone(e.extend({hasStatusBar:!1},t)),this.elements={},window.UIFRAME_DEBUG=this};return d.prototype._setHasStatusBar=function(e){this.options.hasStatusBar=e,this.elements.container&&(this.options.hasStatusBar?this.elements.container.addClassName("wafr-uiframe-statusbar"):this.elements.container.removeClassName("wafr-uiframe-statusbar"))},d.prototype._buildView=function(){var t=this;this.elements.container=e.Element.create("div",{class:"wafr-uiframe wux-afr-framewindow wux-ui-ambiance-light"}),this.options.hasStatusBar&&this.elements.container.addClassName("wafr-uiframe-statusbar"),s(this),this._onTouchChange=function(){s(this)}.bind(this),document.addEventListener("touchChange",this._onTouchChange),this.elements.viewerFrame=e.Element.create("div",{styles:{width:"100%",height:"100%"}}),this.elements.uiFrame=e.Element.create("div",{class:"wux-afr-framewindow-uiframe",dataType:"UI-Frame"}),this.elements.uiFrame3d=e.Element.create("div",{class:"wux-afr-framewindow-uiframe",dataType:"UI-Frame-3D"}),this.elements.layerSet=new n,this.elements.layerSet.inject(this.elements.container),this.elements.layerSet.addLayer(this.elements.viewerFrame).setAttribute("data-type","viewer"),this.elements.layerSet.addLayer(this.elements.uiFrame3d,{top:0,bottom:0,left:0,right:0,pointerEvents:"none"}).setAttribute("data-type","ui-frame-3d"),this.elements.layerSet.addLayer(this.elements.uiFrame,{top:0,bottom:0,left:0,right:0,pointerEvents:"none",overflow:"auto"}).setAttribute("data-type","ui-frame-2d"),setTimeout(function(){t.elements.container&&t.elements.container.addClassName("wux-ui-at-screen")},0);var r=this.getExecutionContext();this.elements._immersiveFrame=new o({identifier:r.getSourceApp()&&r.getSourceApp().getId()?r.getSourceApp().getId():r.getId(),_ActionBar_V3:!0,dockingElementsPriority:[WUXDockAreaEnum.TopDockArea,WUXDockAreaEnum.BottomDockArea,WUXDockAreaEnum.LeftDockArea,WUXDockAreaEnum.RightDockArea]}),this.elements._immersiveFrame.inject(this.elements.uiFrame),i.disableSelection(this.elements.container),i.disableSelection(this.getUIFrame()),this.elements._statusBarWrapper=new e.Element("div",{class:"wafr-statusbar-wrapper"}),this.elements._statusBarWrapper.classList.add("wafr-statusbar-wrapper"),this.elements._statusBarWrapper.inject(this.elements.container)},d.prototype.initialize=function(){var t=this.getExecutionContext();if(!t)throw new Error("Execution context cannot be null here");return this.elements.container||(this._buildView(),this.elements.container.inject(t.getUiContainer())),e.Class.Promise.resolve()},d.prototype._enableBusyMode=function(){this.elements.container.addClassName("wux-ui-state-busy")},d.prototype._disableBusyMode=function(){this.elements.container.removeClassName("wux-ui-state-busy")},d.prototype.getUIFrame=function(){return this.elements.uiFrame},d.prototype.getContainer=function(){return this.elements.container},d.prototype.isDisplayedActionBar=function(){return!1},d.prototype.getImmersiveFrame=function(){return this.elements._immersiveFrame},d.prototype.getExposedComponentCtor=function(){var e=function(){},t=this;return e.prototype.getImmersiveFrame=function(){return t.getImmersiveFrame()},e.prototype.getUIFrame=function(){return t.getUIFrame()},e.prototype.getViewerLayout=function(){return t.elements.viewerFrame},e.prototype.isDisplayedActionBar=function(){return t.isDisplayedActionBar()},e.prototype.addLayer=function(e,n){return t.elements.layerSet.addLayer(e,n)},e.prototype.addRootClassName=function(e){t.elements.container.addClassName(e)},e.prototype._privateGetStatusBarWrapper=function(){return t.elements._statusBarWrapper},e.prototype._privateSetStatusBarWrapperVisibility=d.prototype._privateSetStatusBarWrapperVisibility.bind(this),e},d.prototype._privateSetStatusBarWrapperVisibility=function(e){if(null==e||"boolean"!=typeof e)throw new Error("Invalid value");if(!this.elements.container.hasClassName("wafr-uiframe-statusbar"))throw new Error("Impossible to change the status bar visibility on an UIFrame which does not contain a status bar.");e?this.elements.container.removeClassName("wafr-statusbar-wrapper-hidden"):this.elements.container.addClassName("wafr-statusbar-wrapper-hidden")},d.prototype.destroy=function(){this.elements._immersiveFrame.destroy(),this.elements.container.destroy(),document.removeEventListener("touchChange",this._onTouchChange)},d.DEFAULT_COMPONENT_NAME="AFR_UIFrameManager",d}),define("DS/WAfrUIStandardComponents/WAfrWidgetProxy",[],function(){"use strict";function e(){return new Error("The function is not defined outside a Widget scope.")}var t=function(e){this.data={},this.bus={},this.metas={},this.title="",this.modelEvents=e,this.subscribeMap=new Map};return t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data[e]},t.prototype.setValues=function(e){var t={};for(var n in this.data)t[n]=this.data[n];for(var n in e)t[n]=e[n];this.data=t},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.addEvent=function(e,t,n,o){const r=this.modelEvents.subscribe({event:e},t),i={name:e,listener:t};this.subscribeMap.set(r,i)},t.prototype.removeEvent=function(e,t,n,o){e&&t?this.subscribeMap.forEach((n,o)=>{n.listener&&n.listener===t&&n.name===e&&this.modelEvents.unsubscribe(o)}):this.modelEvents.unsubscribeAll({event:e})},t.prototype.addEventOnce=function(e,t,n,o){this.modelEvents.subscribeOnce({event:e},t)},t.prototype.dispatchEvent=function(e,t,n){let o={};o.event=e,o.data=t,this.modelEvents.publish(o)},t.prototype.deleteValue=function(e){delete this.data[e]},t.prototype.getValues=function(){return this.data},t.prototype.getId=function(){return this.id},t.prototype.setIcon=function(e){this.icon=e},t.prototype.setMetas=function(e){this.metas=e},t.prototype.isApplicationInWidget=function(){return!1},t.prototype.initPreferences=e,t.prototype.hasPreference=e,t.prototype.hasPreferences=e,t.prototype.setPreferences=e,t.prototype.mergePreferences=e,t.prototype.getPreferences=e,t.prototype.addPreference=e,t.prototype.getPreference=e,t.prototype.setBrand=e,t.prototype.getTitleHeader=e,t.prototype.setTitleHeader=e,t.prototype.getLanguage=e,t.prototype.setDir=e,t.prototype.getView=e,t.prototype.getAvailableViews=e,t.prototype.getUrl=e,t.prototype.setOptions=e,t.prototype.setCounter=e,t.prototype.getViewportDimensions=e,t.prototype.setPlugins=e,t.prototype.initPlugins=e,t}),define("DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities",[],function(){"use strict";function e(e,t){t.getId=e.getId.bind(e),t.isAvailable=e.isAvailable.bind(e),t.onAvailabilityEvent=e.onAvailabilityEvent.bind(e),t.removeAvailabilityEventSubscription=e.removeAvailabilityEventSubscription.bind(e),t.getI18n=e.getI18n.bind(e),t.getAccelerator=e.getAccelerator.bind(e),t.isExecutable=e.isExecutable.bind(e),t.onIsEnabledChangeEvent=e.onIsEnabledChangeEvent.bind(e),t.removeIsEnabledChangeEventSubscription=e.removeIsEnabledChangeEventSubscription.bind(e)}function t(t,n){e(t,n),n.getIcon=t.getIcon.bind(t),n.onIconChangedEvent=t.onIconChangedEvent.bind(t),n.removeIconChangedEventSubscription=t.removeIconChangedEventSubscription.bind(t),n.execute=t.execute.bind(t),n.onLifeCycleEvent=t.onLifeCycleEvent.bind(t),n.removeLifeCycleEventSubscription=t.removeLifeCycleEventSubscription.bind(t),n.onI18nChangedEvent=t.onI18nChangedEvent.bind(t),n.removeI18nEventSubscription=t.removeI18nEventSubscription.bind(t)}function n(e){var n={};return t(e,n),n}function o(t){var o={};return function(t,o){e(t,o),o.onStateEvent=t.onStateEvent.bind(t),o.getState=t.getState.bind(t),o.setState=t.setState.bind(t);var r=t.getCheckHandler(),i=t.getUncheckHandler();o.onCheckHandler=r?n(r):null,o.onUncheckHandler=i?n(i):null,o.removeStateEventSubscription=t.removeStateEventSubscription.bind(t),o.accept=function(e){return e.visitCheckHandler(o)}}(t,o),o}return{createActionHandlerProxy:function(e){var n={};return function(e,n){t(e,n),n.accept=function(e){return e.visitActionHandler(n)}}(e,n),n},createCommandHandlerProxy:function(e){var n={};return function(e,n){t(e,n),n.getState=e.getState.bind(e),n.accept=function(e){return e.visitCommandHandler(n)}}(e,n),n},createCheckHandlerProxy:o,createRadioHandlerProxy:function(t){var n={};return function(t,n){e(t,n);for(var r=t.getElements(),i=r.length,a=0,s=[];a<i;++a)s.push(o(r[a]));n.items=s,n.isUnselectAuthorized=t.isUnselectAuthorized.bind(t),n.getSelectedItem=function(){var e=t.getSelectedItem(),n=null;return e&&(n=o(e)),n},n.getSelectedItemId=t.getSelectedItemId.bind(t),n.getRadioItemState=t.getRadioItemState.bind(t),n.setRadioItemState=t.setRadioItemState.bind(t),n.onItemStateEvent=t.onItemStateEvent.bind(t),n.removeItemStateEventSubscription=t.removeItemStateEventSubscription.bind(t)}(t,n),n}}}),define("DS/WAfrUIStandardComponents/NotificationManager",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],function(e,t){"use strict";var n=function(){t.setNotificationManager(e)};return n.prototype.notifyError=function(e){if(e){var t={level:"error",title:e.title,message:e.message,sticky:!1};this.addNotif(t)}},n.prototype.notifySuccess=function(e){var t={level:"success",title:e.title,message:e.message,sticky:!1};this.addNotif(t)},n.prototype.addNotif=function(t){e.addNotif(t)},n.prototype.createExposedComponent=function(){return{notifyError:this.notifyError.bind(this),notifySuccess:this.notifySuccess.bind(this),addNotif:this.addNotif.bind(this)}},n}),define("DS/WAfrUIStandardComponents/mod_WidgetProxyComponent",["DS/WAfrContainerAsWidget/ContainerViewProxy","DS/WAfrUIStandardComponents/WAfrWidgetProxy"],function(e,t){"use strict";var n=Object.create(null);n.DEFAULT_COMPONENT_NAME="AFR_WidgetProxyComponent";return n.WidgetProxyComponent=class{constructor(){this._private={}}initialize(){let n;const o=this.getExecutionContext();if(o){const t=o.getContainerView();if(!t)throw new Error("Error while creating the ContainerViewProxy. No container view retrieved");n=new e(t)}else n=new e;if(n.isApplicationInWidget())this.widgetProxy=n;else{let e=o.getComponent("AFR_ModelEvents");this.widgetProxy=new t(e)}return Promise.resolve()}clean(){return Promise.resolve()}destroy(){return Promise.resolve()}createExposedComponent(){const e=this,t=new Error("[WAfr- WidgetProxyComponent] WidgetProxy attribute is not defined");return{setValue:function(n,o){return e.widgetProxy?e.widgetProxy.setValue(n,o):t},getValue:function(n){return e.widgetProxy?e.widgetProxy.getValue(n):t},setValues:function(n){return e.widgetProxy?e.widgetProxy.setValues(n):t},getValues:function(){return e.widgetProxy?e.widgetProxy.getValues():t},getTitle:function(){return e.widgetProxy?e.widgetProxy.getTitle():t},setTitle:function(n){return e.widgetProxy?e.widgetProxy.setTitle(n):t},addEvent:function(n,o,r,i){return e.widgetProxy?e.widgetProxy.addEvent(n,o,r,i):t},addEventOnce:function(n,o,r,i){return e.widgetProxy?e.widgetProxy.addEventOnce(n,o,r,i):t},dispatchEvent:function(n,o,r){return e.widgetProxy?e.widgetProxy.dispatchEvent(n,o,r):t},deleteValue:function(n){return e.widgetProxy?e.widgetProxy.deleteValue(n):t},getId:function(){return e.widgetProxy?e.widgetProxy.getId():t},setIcon:function(n){return e.widgetProxy?e.widgetProxy.setIcon(n):t},setMetas:function(n){return e.widgetProxy?e.widgetProxy.setMetas(n):t},removeEvent:function(n,o,r,i){return e.widgetProxy?e.widgetProxy.removeEvent(n,o,r,i):t},initPreferences:function(){return e.widgetProxy?e.widgetProxy.initPreferences():t},hasPreference:function(n){return e.widgetProxy?e.widgetProxy.hasPreference(n):t},hasPreferences:function(){return e.widgetProxy?e.widgetProxy.hasPreferences():t},setPreferences:function(n){return e.widgetProxy?e.widgetProxy.setPreferences(n):t},mergePreferences:function(n){return e.widgetProxy?e.widgetProxy.mergePreferences(n):t},getPreferences:function(){return e.widgetProxy?e.widgetProxy.getPreferences():t},addPreference:function(n){return e.widgetProxy?e.widgetProxy.addPreference(n):t},getPreference:function(n){return e.widgetProxy?e.widgetProxy.getPreference(n):t},setBrand:function(n){return e.widgetProxy?e.widgetProxy.setBrand(n):t},getTitleHeader:function(){return e.widgetProxy?e.widgetProxy.getTitleHeader():t},setTitleHeader:function(n){return e.widgetProxy?e.widgetProxy.setTitleHeader(n):t},getLanguage:function(){return e.widgetProxy?e.widgetProxy.getLanguage():t},setDir:function(n){return e.widgetProxy?e.widgetProxy.setDir(n):t},getView:function(){return e.widgetProxy?e.widgetProxy.getView():t},getAvailableViews:function(){return e.widgetProxy?e.widgetProxy.getAvailableViews():t},getUrl:function(){return e.widgetProxy?e.widgetProxy.getUrl():t},setOptions:function(n){return e.widgetProxy?e.widgetProxy.setOptions(n):t},setCounter:function(n,o){return e.widgetProxy?e.widgetProxy.setCounter(n,o):t},getViewportDimensions:function(){return e.widgetProxy?e.widgetProxy.getViewportDimensions():t},setPlugins:function(n){return e.widgetProxy?e.widgetProxy.setPlugins(n):t},initPlugins:function(){return e.widgetProxy?e.widgetProxy.initPlugin():t},isApplicationInWidget:function(){return e.widgetProxy?e.widgetProxy.isApplicationInWidget():t}}}},n}),define("DS/WAfrUIStandardComponents/mod_UIComponent",["DS/WAfrUIStandardComponents/UIFrame","DS/Utilities/TouchUtils","DS/WAfrUIModelManagers/MainUIComponentManager","DS/WAfrUIModelManagers/ContextualUIComponentManager","DS/WAfrHandlers/mod_HandlerComponent","DS/WAfrTweakers/TweakerHandlerGenerateMethods","DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities"],function(e,t,n,o,r,i,a){"use strict";var s={DEFAULT_COMPONENT_NAME:"Afr_UIComponent"},d=a.createActionHandlerProxy,p=a.createCommandHandlerProxy,c=a.createCheckHandlerProxy,l=a.createRadioHandlerProxy;return s.UIComponent=function(){this._properties={},this._properties.components={panels:[]},this._properties._mainComponentAvailability=!0,this._properties._mainUIComponentManager=new n,this._properties._contextualUIComponentManager=new o},s.UIComponent.prototype.createDefaultHandlerRepresentation=function(e){var n=null;if(e||e.id){var o=this.getExecutionContext();if(o){var a=o.getComponent(r.DEFAULT_COMPONENT_NAME);if(a){var s=a.getLeafHandlerMaps(),c=null,l=null,u=s.actionHandlers[e.id];if(u?(c="actionHandler",l=d(u)):(u=s.commandHandlers[e.id])&&(c="commandHandler",l=p(u)),l&&e.representationType&&"WelcomeScreenButton"===e.representationType)return function(e,t){return new Promise((e,t)=>{require(["DS/WelcomeScreenView/WelcomeScreenButtonController"],t=>e(t),t)}).then(n=>{let o,r=function(e){return o.controller.subscribe({event:"REMOVE_CUSTOM_CONTENT"},e)},i=function(e){o.controller.unsubscribe(e)};return o=t.hasCustomContent?{id:t.id,hasCustomContent:!0,i18n:e.getI18n(),icon:e.getIcon().hasOwnProperty("fonticon")?e.getIcon().fonticon:"",controller:new n({onAction:t=>new Promise((t,n)=>{e.execute({args:{viewCallback:t,subscribeToCancelCustomContentFunction:r,unsubscribeToCancelCustomContentFunction:i}})})})}:{id:t.id,i18n:e.getI18n(),icon:e.getIcon().hasOwnProperty("fonticon")?e.getIcon().fonticon:"",controller:new n({onAction:t=>(e.execute(),Promise.resolve())})},Promise.resolve(o)})}(l,e);if(l&&e.representationType&&"AfrHomePage"===e.representationType)return function(e,t){return new Promise((e,t)=>{require(["DS/AfrHomePageV3/mod_AfrHomePageControllers"],t=>e(t),t)}).then(n=>{const o=n.HomePageButtonController;if(!t.id)throw new Error("[mod_UIComponent] Missing id");const r=t.id;if(!e.getI18n()||!e.getI18n().title)throw new Error("[mod_UIComponent] Missing Handler title");const i=e.getI18n().title,a=t.emphasize;if(!e.getIcon()||!e.getIcon().fonticon)throw new Error("[mod_UIComponent] Missing Handler icon");return{id:r,title:i,emphasize:a,icon:e.getIcon().fonticon,controller:new o({onAction:()=>e.execute()})}})}(l,e);if(l&&c){let e=i[c]({value:l,typePath:c,touchMode:t.getTouchMode()});n=Promise.resolve(e).then(function(e){return Promise.resolve(e.getContent())})}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.prototype.createCheckHandlerRepresentation=function(e){var n=null;if(e||e.id){var o=this.getExecutionContext();if(o){var a=o.getComponent(r.DEFAULT_COMPONENT_NAME);if(a){var s=a.getCheckHandlerMap()[e.id];if(s){var d=c(s);let e=i.checkHandlerButton({value:d,typePath:"checkHandlerButton",touchMode:t.getTouchMode()});n=Promise.resolve(e).then(function(e){return Promise.resolve(e.getContent())})}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.prototype.createRadioHandlerRepresentation=function(e){var n=null,o={default:"radioHandler",singleButton:"radioHandlerLoopButton"};if(e||e.id){var a=o.default;if(e.representationType&&(o.hasOwnProperty(e.representationType)?a=o[e.representationType]:n=Promise.reject(new Error("The specified representation type does not exist."))),null===n){var s=this.getExecutionContext();if(s){var d=s.getComponent(r.DEFAULT_COMPONENT_NAME);if(d){var p=d.getRadioHandlerMap()[e.id];if(p){var c=l(p);let e=i[a]({value:c,typePath:a,touchMode:t.getTouchMode()});n=Promise.resolve(e).then(function(e){return Promise.resolve(e.getContent())})}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.DEFAULT_COMPONENT_NAME=s.DEFAULT_COMPONENT_NAME,s.UIComponent.prototype.createExposedComponent=function(){return{deactivateMainComponent:this.deactivateMainComponent.bind(this),activateMainComponent:this.activateMainComponent.bind(this),hideMainComponent:this.hideMainComponent.bind(this),showMainComponent:this.showMainComponent.bind(this),getContextualUIComponentManager:this.getContextualUIComponentManager.bind(this),activateSection:this.activateSection.bind(this),getActiveSections:this.getActiveSections.bind(this),pinSection:this.pinSection.bind(this),unpinSection:this.unpinSection.bind(this),isSectionPinnedByUser:this.isSectionPinnedByUser.bind(this),createDefaultHandlerRepresentation:this.createDefaultHandlerRepresentation.bind(this),createCheckHandlerRepresentation:this.createCheckHandlerRepresentation.bind(this),createRadioHandlerRepresentation:this.createRadioHandlerRepresentation.bind(this)}},s.UIComponent.prototype.destroy=function(){return Promise.resolve()},s.UIComponent.prototype.initialize=function(){var n=[];this._properties._mainUIComponentManager.setContext({executionContext:this.getExecutionContext(),UIComponent:this.getExecutionContext().getComponent(this._private._identifier),UIFrame:this.getExecutionContext().getComponent(e.DEFAULT_COMPONENT_NAME)}),this._properties._mainComponentAvailability&&n.push(this._properties._mainUIComponentManager.generate({touchMode:t.getTouchMode()}));var o=this.getExecutionContext();return this._properties._contextualUIComponentManager.setContext({executionContext:o,UIComponent:void 0===o?void 0:o.getComponent(this._private._identifier),UIFrame:void 0===o?void 0:o.getComponent(e.DEFAULT_COMPONENT_NAME),Viewer:void 0===o?void 0:void 0===o.getApplicationComponent("Viewer")?void 0:o.getApplicationComponent("Viewer").get3DViewer()}),Promise.all(n)},s.UIComponent.prototype.configure=function(){return Promise.resolve()},s.UIComponent.prototype.clean=function(){var t,n=this;n._properties.flatModel=void 0,n._properties.tagList=void 0,n._properties._mainComponentAvailability=!0,n._properties._mainUIComponentManager.clean(),n._properties._contextualUIComponentManager.dispose();var o=n.getExecutionContext().getComponent(e.DEFAULT_COMPONENT_NAME);if(o&&(t=o.getImmersiveFrame()),t&&n._properties.components&&n._properties.components.panels)for(var r,i;0!==n._properties.components.panels.length||void 0!==n._properties.components.panels[0];)i=n._properties.components.panels[0],n._properties.components.panels.splice(0,1),(r=i.windowGroup)&&(t.removeWindow(r),r.destroy()),i&&(t.removeWindow(i),i.destroy());return Promise.resolve()},s.UIComponent.prototype.setGlobalFlatModel=function(e){this._properties.flatModel=e.model},s.UIComponent.prototype.setTagList=function(e){this._properties.tagList=e.tab},s.UIComponent.prototype.deactivateMainComponent=function(){this._properties._mainComponentAvailability=!1,this.hideMainComponent()},s.UIComponent.prototype.activateMainComponent=function(){this._properties._mainComponentAvailability=!0},s.UIComponent.prototype.activateSection=function(e){var t=this;void 0!==t&&void 0!==t._properties&&void 0!==t._properties._mainUIComponentManager&&(Array.isArray(e)?t._properties._mainUIComponentManager.activateSections(e):t._properties._mainUIComponentManager.activateSection(e))},s.UIComponent.prototype.getActiveSections=function(){return void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager?this._properties._mainUIComponentManager.getActiveSections():null},s.UIComponent.prototype.pinSection=function(e){if(void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager)return this._properties._mainUIComponentManager.pinSection(e)},s.UIComponent.prototype.unpinSection=function(e){if(void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager)return this._properties._mainUIComponentManager.unpinSection(e)},s.UIComponent.prototype.isSectionPinnedByUser=function(e){if(void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager)return this._properties._mainUIComponentManager.isSectionPinnedByUser(e)},s.UIComponent.prototype.hideMainComponent=function(){void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager&&this._properties._mainUIComponentManager.hide()},s.UIComponent.prototype.showMainComponent=function(){void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager&&this._properties._mainUIComponentManager.show()},s.UIComponent.prototype.setMainComponentActivatedCategory=function(e){void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager&&this._properties._mainUIComponentManager.setActivatedCategory(e)},s.UIComponent.prototype.setMainComponentCategoriesOrder=function(e){void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager&&this._properties._mainUIComponentManager.setCategoriesOrder(e)},s.UIComponent.prototype.getContextualUIComponentManager=function(){return this._properties._contextualUIComponentManager},s.UIComponent.prototype.setCategories=function(e){this._properties.categories=e},s.UIComponent.prototype.getCategories=function(){return this._properties.categories},s}),define("DS/WAfrUIStandardComponents/mod_UIInterpreter",["UWA/Class/Promise","DS/WAfrUIStandardComponents/mod_UIComponent","DS/WAfrHandlers/mod_HandlerComponent","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities","DS/WAfrUIStandardComponents/UIFrame"],function(e,t,n,o,r,i,a){"use strict";var s=i.createActionHandlerProxy,d=i.createCommandHandlerProxy,p=i.createCheckHandlerProxy,c=i.createRadioHandlerProxy;function l(){this._treeDocument=void 0,this._uiComponent=void 0,this._tagList=[]}function u(e,t){if(!e||!t)throw new Error("Missing parameters.");t.handlerList&&t.handlerList.forEach(function(t){for(var n in t)e._tagList.indexOf(n)<0&&e._tagList.push(n)})}function m(e,t){if(!e||!t)throw new Error("Missing parameters.");t.handlerList.forEach(function(t){var n,r,i={tagList:e._tagList,elem:t};e._treeDocument.addChild((r=new o({label:(n=i).elem.identifier,icon:"",grid:{label:n.elem.identifier,type:null,tweaker:null},useAsyncPreExpand:!1}),n.tagList.forEach(function(e){r.options.grid[e]=n.elem[e]}),r))})}function h(e,t){if(!e||!t)throw new Error("Missing parameters.");void 0===e._categories&&(e._categories={});let n=0;const o=t.categories.length;let r=null;for(;n<o;++n)r=t.categories[n],e._categories[r.identifier]=r}let g=!1;const f=localStorage.getItem("DEBUG_AFR_I18N");null!==f&&("string"==typeof f&&"true"===f||"boolean"==typeof f&&f)&&(console.warn("[DEBUG] DS/WAfrUIStandardComponents/mod_UIInterpreter: I18N Debug mode activated.","\n[DEBUG] DO NOT USE IN PRODUCTION.",'\n[DEBUG] Be sure to activate "Verbose" level in the DevTools to see all logs.'),g=!0);const y="font-weight:bold;",v="color:#368EC4;",C="color:#EA4F37;";function _(e){return new Promise((t,n)=>{require([e],t,n)})}function w(e,t,n){let o=Promise.resolve();if("string"==typeof e)if(void 0===n||n.includes(t))o=_("i18n!"+e);else{g&&console.debug(`%c[mod_UIInterpreter~getI18nFromPath][I18N]%c 🏳️🩹 Fallback I18n (runtime) for%c ${e}%c to %cen%c. Requested%c ${t}%c but filtered by%c [${n?n.join(", "):"en"}]`,`${y} ${v}`,`${v}`,`${y} ${v}`,`${v}`,`${y} ${v}`,`${v}`,`${y} ${v}`,`${v}`,`${y} ${v}`);const r="text!"+e+"_en.json";o=_(r).then(t=>{try{return JSON.parse(t)}catch(t){const n=new Error(`Internal Error. ${e} content is not a valid JSON.`);return g&&console.debug(`%c[mod_UIInterpreter~getI18nFromPath][I18N]%c 🏳️❌ Error computing I18n for%c ${r}%c. The content is not a valid JSON]`,`${y} ${C}`,`${C}`,`${y} ${C}`,`${C}`),Promise.reject(n)}})}else o=Promise.reject(new Error("path is not a string"));return o}l.prototype._fetchI18nData=function(e,t){let n=Promise.resolve();const o=function(e,t){let n;return e&&t&&e.stdConf&&e.stdConf[t]&&(n=e.stdConf[t]),n}(e,"i18n");if(!o||o&&"runtime"===o){if(g&&console.debug("%c[mod_UIInterpreter~_fetchI18nData][I18N]%c 🏳️ i18n title for UIModel categories are resolved dynamically at runtime.",`${y} ${v}`,`${v}`),e&&e.UIModel&&e.UIModel.categories){let o=e.UIModel,r=[];const i=o.categories.length;let a=null;const s=e&&e.internationalization?e.internationalization:void 0;for(let e=0;e<i;++e)(a=o.categories[e])&&a.internationalization&&a.internationalization.path?(g&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c 🏳️🔎 Compute I18n (runtime) for%c ${a.identifier}%c in%c ${t}%c filtered with the following array%c [${s?s.join(", "):"en"}]`,`${y} ${v}`,`${v}`,`${y} ${v}`,`${v}`,`${y} ${v}`,`${v}`,`${y} ${v}`),r.push(w(a.internationalization.path,t,s))):r.push(Promise.reject(new Error(`Category ${a.identifier} doesn't have a path property set for internationalization. Check the wafrapp file definition.`)));n=Promise.allSettled(r).then(e=>{if(o.categories.length===e.length)for(let t=0;t<e.length;++t){const n=e[t];let r=o.categories[t];if("fulfilled"===n.status){const e=n.value,t=r.identifier+".Title";g&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c 🏳️✔️ Retrieved I18n for%c ${r.identifier}%c.`,`${y} ${v}`,`${v}`,`${y} ${v}`,`${v}`,e),r.internationalization.title=e[t]}else g&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c 🏳️❌ Error computing I18n for%c ${r.identifier}%c. Identifier of the category will be used as a fallback instead of the title.`,`${y} ${C}`,`${C}`,`${y} ${C}`,`${C}`),g&&console.debug(n.reason)}})}}else g&&console.debug("%c[mod_UIInterpreter~_fetchI18nData][I18N]%c 🏳️ i18n title for UIModel categories are retrieved from buildtime data.",`${y} ${v}`,`${v}`);return n},l.prototype.interpret=function(e,n,o){let i=Promise.resolve();if(void 0===e||void 0===n)return i;this._executionContext=n;var s=t.DEFAULT_COMPONENT_NAME;this._uiComponent=n.getComponent(s);var d=e.UIModel;const p=window.widget?window.widget.lang:"en";return g&&console.debug(`%c[mod_UIInterpreter.interpret][I18N]%c 🏳️ Environment current lang:%c ${p}`,`${y} ${v}`,`${v}`,`${y} ${v}`),(i=this._fetchI18nData(e,p)).then(()=>{this._treeDocument=new r,this._treeDocument.options.shouldBeSelected=function(e){return!1},d&&d.handlerList&&(u(this,d),m(this,d),void 0!==d.mainComponent&&(this._mainComponentAvailability=d.mainComponent.mainComponentAvailability,this._mainComponentDefaultCategory=d.mainComponent.defaultActivatedCategory,this._mainComponentCategoriesOrder=d.mainComponent.categoriesOrder),d.categories&&h(this,d));var e=n.getComponent(a.DEFAULT_COMPONENT_NAME);if(!e)return Promise.reject(new Error("Cannot find the UIFrame component"));var t=!1;d&&d.statusComponent&&d.statusComponent._specialAuthorization&&(t=!0),e._setHasStatusBar(t)})},l.prototype.commit=function(){var t=this,o=n.DEFAULT_COMPONENT_NAME;t._handlerComponent=t._executionContext.getComponent(o);var r=t._handlerComponent._private._chkHdlrMap,i=t._handlerComponent._private._radioHdlrMap,a=t._handlerComponent.getLeafHandlerMaps(),l=a.actionHandlers,u=a.commandHandlers,m=!1;if(!this._handlerComponent)throw new Error("HandlerComponent not found");var h=this._treeDocument.getChildren();return this._treeDocument.prepareUpdate(),h.forEach(function(e){var t=e.options.grid.identifier,n="";if(l.hasOwnProperty(t))n=void 0!==e.options.grid.set?"commandFlyout":"actionHandler",Array.isArray(e.options.grid.category)&&e.options.grid.category.includes("WAfrFront")&&(m=!0),e.updateOptions({grid:{type:n,typeView:"actionHandler",handler:s(l[t])}});else if(u.hasOwnProperty(t))n=void 0!==e.options.grid.set?"commandFlyout":"commandHandler",Array.isArray(e.options.grid.category)&&e.options.grid.category.includes("WAfrFront")&&(m=!0),e.updateOptions({grid:{type:n,typeView:"commandHandler",handler:d(u[t])}});else if(r.hasOwnProperty(t))n=void 0!==e.options.grid.set?"commandFlyout":"checkHandlerButton",Array.isArray(e.options.grid.category)&&e.options.grid.category.includes("WAfrFront")&&(m=!0),e.updateOptions({grid:{type:n,typeView:"checkHandlerButton",handler:p(r[t])}});else if(i.hasOwnProperty(t)){n=void 0!==e.options.grid.set?"commandFlyout":"radioHandler",Array.isArray(e.options.grid.category)&&e.options.grid.category.includes("WAfrFront")&&(m=!0);let o="radioHandler";void 0!==e.options.grid.typeRepresentation&&(n=o=e.options.grid.typeRepresentation),e.updateOptions({grid:{type:n,typeView:o,handler:c(i[t])}})}}),t._treeDocument.pushUpdate(),t._uiComponent.setTagList({tab:t._tagList}),t._uiComponent.setGlobalFlatModel({model:t._treeDocument}),!1===t._mainComponentAvailability&&t._uiComponent.deactivateMainComponent(),t._uiComponent._isMABAvailable=m,t._uiComponent.setMainComponentCategoriesOrder(t._mainComponentCategoriesOrder),t._uiComponent.setCategories(t._categories),e.resolve()},l.prototype.enrich=function(e,t){if(!e||!t)throw new Error("Missing parameters");const n=e.UIModel;let o=Promise.resolve();return n&&n.handlerList&&(u(this,n),m(this,n),void 0!==n.mainComponent&&Array.isArray(n.mainComponent.categoriesOrder)&&(void 0===this._mainComponentCategoriesOrder?this._mainComponentCategoriesOrder=n.mainComponent.categoriesOrder:this._mainComponentCategoriesOrder=this._mainComponentCategoriesOrder.concat(n.mainComponent.categoriesOrder)),n.categories&&h(this,n),o=this.commit()),o};var I={generateInterpreter:function(e,t){return Promise.resolve(new l)}};return I});