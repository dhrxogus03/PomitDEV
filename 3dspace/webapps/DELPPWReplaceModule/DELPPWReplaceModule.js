define("DS/DELPPWReplaceModule/MfgProcessReplaceModule",["UWA/Core","DS/DELPPWInsertCmdModule/InsertUI"],function(e,t){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","LinkBehavior","ResourceBehavior","SelectionBehavior","SearchBehavior","MfgProcessReplaceBehavior","MfgItemReplaceBehavior","MfgProcessBehavior","WUXNodeModelBehavior","TreeListViewBehavior","MfgItemBehavior","ReplaceWhereUsedBehavior"],creator:function(i,n,r,o,a,c,s,l,g,f,d,u,h,p){var R,y,v,B,I,M,S={},T=null;return M=function(t,i){if(e.is(i.newRef)){let e=c.getSelectedInsts(),t=r.getAggregatingReferenceModelFromInstance(e[0]);t.isProcess()||t.isService()||t.isConstruction()?g.replace("replaceByNew",i.newRef.id):l.replace("replaceByNew",i.newRef.id)}},I=function(e,t){t.onComplete=M,t.silent=!0,r.createRefOrInst(e,null,t)},R=function(){o.getRelations().then(function(e){if(e.isRelationsLoaded){let e=c.getSelectedInsts(),t=r.getAggregatingReferenceModelFromInstance(e[0]);t.isProcess()||t.isService()||t.isConstruction()?g.replace("replaceByLatest"):l.replace("replaceByLatest")}})},v=function(){o.getRelations().then(function(e){if(e.isRelationsLoaded){let e=c.getSelectedInsts(),t=r.getAggregatingReferenceModelFromInstance(e[0]);t.isProcess()||t.isService()||t.isConstruction()?g.replace("replaceByNewRevision"):l.replace("replaceByNewRevision")}})},y=function(){var t,i,n,f,d=c.getSelectedInsts();t=function(t){e.is(t,"array")&&t.length>0&&(f.isProcess()||f.isService()||f.isConstruction()?g.replace("replaceByExisting",t[0].id):l.replace("replaceByExisting",t[0].id))},o.getRelations().then(function(e){var o,c,l;e.isRelationsLoaded&&1===d.length&&(i=d[0],l=(n=r.getReferenceModelFromInstance(i)).get("PPRTYPE"),f=r.getAggregatingReferenceModelFromInstance(i),o=r.getValidChildTypes(f),"OPERATION"!==l&&"SYSTEM"!==l||((c=r.getTypeHierarchy(n.get("type"))).unshift(n.get("type")),o=o.filter(function(e){return c.indexOf(e)>-1})),s.showSearchDialoguAndActivate(t,{title:a.getNLSValue("Dialog.ReplaceByExisting.Title"),searchTitle:a.getNLSValue("Search.ReplaceByExisting.Title"),types:o}))})},B=function(){var t,i,n,o,a,s,l,g=[],f=[];T.isActive()&&T.destroyUI(),t=c.getSelectedInsts(),e.is(t,"array")&&1===t.length&&(i=r.getReferenceModelFromInstance(t[0]).get("type"),a=i,"OPERATION"===(l=(n=r.getAggregatingReferenceModelFromInstance(t[0])).get("PPRTYPE"))||"SYSTEM"===l?(f=[a],s=[a]):((o=r.getValidChildTypes(n)).forEach(function(e){var t=r.getTypeHierarchy(e);-1!==t.indexOf(a)&&(a=e),t.forEach(function(e){-1===g.indexOf(e)&&g.push(e)})}),s=r.getAcceptedBaseTypesForCreation(),o.forEach(function(e){-1===g.indexOf(e)&&-1!==s.indexOf(e)&&f.push(e)})),f.length>0&&-1!==s.indexOf(a)&&T.createDialogForReplaceByNew(f,a,"Dummy/"+i,I))},{listenTo:function(){return{ReplaceByLatestRevision:R,ReplaceByExisting:y,ReplaceByNewRevision:v,ReplaceByNewReference:B,refreshAll:this.closeDialog}},onStart:function(o,c){S=e.extend(S,o),e.is(S.insertFormAttributeXML)||(i.debug("Insert Module loading failed : insertFormAttributeXML option is undefined"),c()),T=new t(i,n,a,r),c()},onStop:function(){T.isActive()&&T.destroyUI(),T=void 0},closeDialog:function(){e.is(T)&&T.destroyUI()}}}}}),define("DS/DELPPWReplaceModule/MfgItemReplaceModule",["UWA/Core","DS/DELPPWInsertCmdModule/InsertUI"],function(e,t){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","LinkBehavior","ResourceBehavior","SelectionBehavior","SearchBehavior","MfgItemReplaceBehavior","UXFactoryBehavior","WUXNodeModelBehavior","TreeListViewBehavior","MfgItemBehavior","ReplaceWhereUsedBehavior"],creator:function(i,n,r,o,a,c,s,l,g,f,d,u,h){var p,R,y,v,B,I,M={},S=null;return I=function(t,i){e.is(i.newRef)&&l.replace("replaceByNew",i.newRef.id)},B=function(e,t){t.onComplete=I,t.silent=!0,r.createRefOrInst(e,null,t)},p=function(){o.getRelations().then(function(e){e.isRelationsLoaded&&l.replace("replaceByLatest")})},y=function(){o.getRelations().then(function(e){e.isRelationsLoaded&&l.replace("replaceByNewRevision")})},R=function(){var t,i,n,g,f=c.getSelectedInsts();t=function(t){e.is(t,"array")&&t.length>0&&l.replace("replaceByExisting",t[0].id)},o.getRelations().then(function(e){var o,c,l;e.isRelationsLoaded&&1===f.length&&(i=f[0],l=(n=r.getReferenceModelFromInstance(i)).get("PPRTYPE"),g=r.getAggregatingReferenceModelFromInstance(i),o=r.getValidChildTypes(g),"OPERATION"!==l&&"SYSTEM"!==l||((c=r.getTypeHierarchy(n.get("type"))).unshift(n.get("type")),o=o.filter(function(e){return c.indexOf(e)>-1})),s.showSearchDialoguAndActivate(t,{title:a.getNLSValue("Dialog.ReplaceByExisting.Title"),searchTitle:a.getNLSValue("Search.ReplaceByExisting.Title"),types:o}))})},v=function(){var t,i,n,o,a,s,l,g=[],f=[];S.isActive()&&S.destroyUI(),t=c.getSelectedInsts(),e.is(t,"array")&&1===t.length&&(i=r.getReferenceModelFromInstance(t[0]).get("type"),a=i,"OPERATION"===(l=(n=r.getAggregatingReferenceModelFromInstance(t[0])).get("PPRTYPE"))||"SYSTEM"===l?(f=[a],s=[a]):((o=r.getValidChildTypes(n)).forEach(function(e){var t=r.getTypeHierarchy(e);-1!==t.indexOf(a)&&(a=e),t.forEach(function(e){-1===g.indexOf(e)&&g.push(e)})}),s=r.getAcceptedBaseTypesForCreation(),o.forEach(function(e){-1===g.indexOf(e)&&-1!==s.indexOf(e)&&f.push(e)})),f.length>0&&-1!==s.indexOf(a)&&S.createDialogForReplaceByNew(f,a,"Dummy/"+i,B))},{listenTo:function(){return{ReplaceByLatestRevision:p,ReplaceByExisting:R,ReplaceByNewRevision:y,ReplaceByNewReference:v,refreshAll:this.closeDialog}},onStart:function(o,c){M=e.extend(M,o),e.is(M.insertFormAttributeXML)||(i.debug("Insert Module loading failed : insertFormAttributeXML option is undefined"),c()),S=new t(i,n,a,r),c()},onStop:function(){S.isActive()&&S.destroyUI(),S=void 0},closeDialog:function(){e.is(S)&&S.destroyUI()}}}}});