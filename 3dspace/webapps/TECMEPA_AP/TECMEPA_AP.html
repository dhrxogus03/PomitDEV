<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:widget="http://www.netvibes.com/ns/">

<head>

    <!-- Application Metas -->
    <title>MePreferences control center</title>
    <meta name="author" content="Dassault SystÃ¨mes" />
    <meta name="brand" content="Technologies" />
    <meta name="autoRefresh" content="0" />
    <meta name="description" content="MePreferences Control center" />

    <script type="text/javascript" src="../AmdLoader/AmdLoader.js"></script>
    <link rel="stylesheet" type="text/css" href="../c/UWA/assets/css/standalone.css" />

    <script type="text/javascript" src="../c/UWA/js/UWA_Standalone_Alone.js"></script>

    <widget:preferences>
    </widget:preferences>
    <!-- Application JavaScript Source -->
    <script type="text/javascript">
        require(["DS/MePreferencesUIBuilder/MePreferencesAdminWidget"],
            function (MePreferencesAdminWidget) {
                'use strict';
                console.log("Html require");
                var platformId;
                var myWidget = {
                    onLoad: function () {
                        console.log("Inside Onload");
                        widget.body.innerHTML = "";
                        MePreferencesAdminWidget.createWidgetUI().then(function (UIObj) {
                            if (UIObj == null) {
                                console.log("UIObj null");
                            }
                            else {
                                UIObj.inject(widget.body);
                            }
                        });

                    },
                    onRefresh: function (e) {

                        var mainDiv = MePreferencesAdminWidget.getWidgetContent();
						
                        if (mainDiv) {
                           mainDiv.destroy(true);
						   MePreferencesAdminWidget.emptyMainDiv();
                        }
                
                        MePreferencesAdminWidget.createWidgetUI().then(function (UIObj) {
                            if (UIObj == null) {
                                console.log("UIObj null");
                            }
                            else {
                                UIObj.inject(widget.body);
                            }
                        });
                    },



                };

                widget.addEvent('onLoad', myWidget.onLoad);
                widget.addEvent('onRefresh', myWidget.onRefresh);
            });
    </script>
</head>

<body>
</body>

</html>
