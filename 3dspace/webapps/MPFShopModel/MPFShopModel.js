define("DS/MPFShopModel/BackgroundModel",["DS/MPFModel/MPFModel"],function(e){"use strict";return e.extend({setup:function(e,t){this._parent(e,t)}})}),define("DS/MPFShopModel/PublicShopDataProxyV9",["UWA/Core","DS/MPFUrl/UrlUtils","DS/MPFDataProxy/DataProxy"],function(e,t,r){"use strict";return r.extend({init:function(e){this._parent(e,"/mdshop/public/shopsv9")},urlGet:function(r,o){o=o||{};var n=new t(this._computeDefaultUrl(r)),i=new t(window.location.href),a=o.offers,s=o.quotation;if(e.is(a,"object"))for(var u=Object.keys(a),c=0;c<u.length;c++)n.addParameter("offers."+u[c],a[u[c]]);if(e.is(s,"object"))for(var l=Object.keys(s),d=0;d<l.length;d++)n.addParameter("quotation."+l[d],s[l[d]]);return!0===o.count&&n.addParameter("count","true"),!0===o.test&&n.addParameter("test","true"),i.hasParameter("coupon")&&n.addParameter("coupon","true"),n.getUrl()}})}),define("DS/MPFShopModel/PublicShopDataProxyV8",["DS/MPFDataProxy/DataProxy"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"/mdshop/public/shopsv8")}})}),define("DS/MPFShopModel/ShopCountModel",["DS/MPFModel/MPFModel"],function(e){"use strict";var t,r={TOTAL:"total",AVAILABLE_FOR_TENDER:"isAvailableForTender",DIRECT_PURCHASE:"direct",ORIGIN:"origine",TENDER_SHOPS_PER_AREA:"isAvailableForTenderArea"},o={ALL_REGIONS:"allRegions",EUROPE:"europe",NORTH_AMERICA:"north_america",SOUTH_AMERICA:"south_america",ASIA:"asia",AFRICA:"africa",MIDDLE_EAST:"middleEast"};return(t=e.extend({setup:function(e,t){this._type="ShopCountModel",this._parent(e,t)},fetchPromise:function(e){return e.count=!0,this._parent(e)},getTotal:function(){return this.get(r.TOTAL)},getAvailableForTender:function(){return this.get(r.AVAILABLE_FOR_TENDER)},getDirectPurchase:function(){return this.get(r.DIRECT_PURCHASE)},getTenderShopCountPerArea:function(){return this.get(r.TENDER_SHOPS_PER_AREA)},getTenderShopCountForArea:function(e){var t=this.getTenderShopCountPerArea();return t&&t[e]?t[e]:0}})).Areas=Object.freeze(o),t.Fields=Object.freeze(r),t}),define("DS/MPFShopModel/ProductDataProxy",["DS/MPFDataProxy/DataProxy"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"/mdshop/shop-services/{0}/products")},urlGet:function(){return this.connector.url(this.resourcePath)},urlPost:null,urlPut:null,urlPatch:null,urlDelete:null,doPost:null,doPut:null,doPatch:null,doDelete:null})}),define("DS/MPFShopModel/ShopPublicDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e,t){this._parent(e,"/mdshop/public/shopsv9?expand=false"),this.addESID=!1!==t},request:function(e,t){this._parent(e,t)},url:function(){return this.addESID?this.connector.url(this.resourcePath):this.connector.url(this.resourcePath,{addESID:!1})}})}),define("DS/MPFShopModel/ShopValidationModel",["DS/MPFModel/MPFModel"],function(e){"use strict";var t,r={FORCE:"force"},o={};return o[r.FORCE]="identification",(t=e.extend({defaults:o,setup:function(e,t){this._type="ShopValidationModel",this._parent(e,t)}})).Fields=Object.freeze(r),t}),define("DS/MPFShopModel/MediaModel",["DS/MPFModel/MPFModel"],function(e){"use strict";var t={IMAGE:"image"},r=e.extend({setup:function(e,t){this._parent(e,t)},getImage:function(){return this.get(t.IMAGE)}});return r.Fields=Object.freeze(t),r}),define("DS/MPFShopModel/PublicShopDataProxyV1",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/public/shops")}})}),define("DS/MPFShopModel/ShopNoPublicDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e,t){this._parent(e,"/mdshop/shops?expand=shop-services",t)},doPost:null,doPut:null,doPatch:null,doDelete:null})}),define("DS/MPFShopModel/ShopValidationDataProxy",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFError/BadArgumentError"],function(e,t,r,o){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/shops/{0}/kyc")},buildPath:function(t){return t&&t.get("id")?e.format(this.resourcePath,t.get("id")):new o("model id not defined")},urlPut:r.emit,urlGet:r.emit,urlPost:r.emit})}),define("DS/MPFShopModel/ProductModel",["DS/MPFModel/MPFModel"],function(e){"use strict";return e.extend({setup:function(e,t){this._parent(e,t)}})}),define("DS/MPFShopModel/ShopDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils"],function(e,t){"use strict";return e.extend({init:function(e){this._parent(e,"/mdshop/shops")},urlGet:function(e,r){let o;return r||(r={}),r.expand||(r.expand=["offers"]),o=this._parent(e,r),r.uc2&&(o=new t(o).addParameter("uc2",r.uc2).getUrl()),o}})}),define("DS/MPFShopModel/BackgroundDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/shop-services/{0}/background")},urlPost:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId))},urlPut:null,urlPatch:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId))},urlDelete:null,doPut:null,doPatch:null,doDelete:null})}),define("DS/MPFShopModel/ShippingOffersDataProxy",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFOfferModel/OfferDataProxy","DS/MPFError/NotImplementedError"],function(e,t,r,o){"use strict";return t.extend({init:function(e){var t;t=new r(e),this._parent(e,"/mdshop/shop-services/{0}/offers/shipping",t)},buildPath:function(t){return e.format(this.resourcePath,t.shopServiceId)},urlPatch:null,urlPut:o.emit,urlDelete:o.emit,urlPost:o.emit,doPatch:null,doPut:o.emit,doDelete:o.emit,doPost:o.emit})}),define("DS/MPFShopModel/LogoModel",["DS/MPFModel/MPFModel"],function(e){"use strict";return e.extend({setup:function(e,t){this._type="LogoModel",this._parent(e,t)}})}),define("DS/MPFShopModel/LogoDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/shops/{0}/logo")},urlPost:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId))},urlPatch:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId))},urlDelete:null,doPut:null,doPatch:null,doDelete:null})}),define("DS/MPFShopModel/CompanyShopDataProxyV2",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],(e,t,r)=>{"use strict";return t.extend({init(e,t){this._parent(e,"/api/v2/mdcompany/companies/{0}/shops",t)},buildPath:function(t){const r=t.parentResourceId||t.collection.parentResourceId;return e.format(this.resourcePath,r)},doDelete:r.emit,doPatch:r.emit,doPut:r.emit,urlDelete:r.emit,urlPatch:r.emit,urlPut:r.emit})}),define("DS/MPFShopModel/MediaDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/showcase-items/{0}/media")},urlDelete:null,urlGet:null,urlPatch:null,urlPost:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId))},urlPut:null,doDelete:null,doGet:null,doPatch:null,doPut:null})}),define("DS/MPFShopModel/ShopStatisticsModel",["DS/MPFModel/MPFModel","UWA/Core","DS/MPFError/BadArgumentError"],function(e,t,r){"use strict";return e.extend({defaults:function(){return{all:"0",confirmedOrder:"0",country:"",machines:"0",materials:"0",newRequests:"0",orders:"0"}},setup:function(e,o){if(!t.is(o.parentResourceId,"string"))throw new r("options.parentResourceId expected");this._type="ShopStatisticsModel",this._parent(e,o),this.setParentResourceId(o.parentResourceId)}})}),define("DS/MPFShopModel/ShopPublicPMPDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e,t){this._parent(e,"/mdshop/shopsPMP?expand=false",t)},doPost:null,doPut:null,doPatch:null,doDelete:null})}),define("DS/MPFShopModel/ShopStatisticsDataProxy",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],function(e,t,r){"use strict";return t.extend({init:function(e,t){this._parent(e,"/me/shops/{0}/countV2",t)},buildPath:function(t,r){return e.format(this.resourcePath,t.parentResourceId)}})}),define("DS/MPFShopModel/ShopAreasModel",["DS/MPFModel/MPFModel"],function(e){"use strict";var t,r={AREAS:"areas"},o={};return o[r.AREAS]=[],(t=e.extend({defaults:o,setup:function(e,t){this._type="ShopAreasModel",this._parent(e,t)},parse:function(e){var t={};return t[r.AREAS]=e,t},getAreas:function(){return this.get(r.AREAS)}})).Fields=Object.freeze(r),t}),define("DS/MPFShopModel/ShopServicesMapping",["DS/MPFServices/MarketplaceServices"],e=>{"use strict";const t={};return t[e.MAKE]="MP3DP_PrintShopService",t[e.PART_SUPPLY]="MP_PartSupplyShopService",t[e.ENGINEERING]="MP_EngineeringShopService",t[e.IFWELOOP]="MP_IfweloopShopService",t[e.INNOVATE]="MP_InnovateShopService",t}),define("DS/MPFShopModel/ShopAreasDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],function(e,t){"use strict";return e.extend({init:function(e){this._parent(e,"/mdshop/areas")},urlPut:t.emit,urlPost:t.emit,urlPatch:t.emit})}),define("DS/MPFShopModel/ShopServicesDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/shop-services")},request:function(e,t){this._parent(e,t)},urlDelete:function(e){return this.connector.url(this.delegate.resourcePath+"/"+e.get("id"))},urlPatch:function(e){return this.delegate?this.connector.url(this.delegate.resourcePath+"/"+e.get("id")):this._parent(e)}})}),define("DS/MPFShopModel/ShopStatisticsFactory",["DS/MPFModelFactory/Factory","DS/MPFShopModel/ShopStatisticsModel","DS/MPFShopModel/ShopStatisticsDataProxy","DS/MPFError/NotImplementedError"],function(e,t,r,o){"use strict";var n={SHOP_STATISTICS:"shopStatistics"},i=e.extend({createModel:function(e,r){return this._parent(t,"shopStatistics",e,r)},createCollection:o.emit,getDataProxy:function(e){return this.dataProxies[n.SHOP_STATISTICS]||(this.dataProxies[n.SHOP_STATISTICS]=new r(this.connector)),this.dataProxies[n.SHOP_STATISTICS]}});return i.Types=n,i}),define("DS/MPFShopModel/ShopAreasFactory",["DS/MPFModelFactory/Factory","DS/MPFShopModel/ShopAreasModel","DS/MPFShopModel/ShopAreasDataProxy","DS/MPFError/NotImplementedError"],function(e,t,r,o){"use strict";var n={GLOBAL:"Global"},i=e.extend({createModel:function(e,r,o){return e=e||n.GLOBAL,this._parent(t,e,r,o)},createCollection:o.emit,getDataProxy:function(){return this.dataProxies[n.SHOP_AREAS]||(this.dataProxies[n.SHOP_AREAS]=new r(this.connector)),this.dataProxies[n.SHOP_AREAS]}});return i.Types=n,i}),define("DS/MPFShopModel/BackgroundFactory",["DS/MPFModelFactory/Factory","DS/MPFShopModel/BackgroundModel","DS/MPFShopModel/BackgroundDataProxy","DS/MPFError/NotImplementedError"],function(e,t,r,o){"use strict";var n={BACKGROUND:"background"},i=e.extend({createModel:function(e,r){return this._parent(t,n.BACKGROUND,e,r)},createCollection:o.emit,getDataProxy:function(e){return n.BACKGROUND,this.dataProxies[n.BACKGROUND]||(this.dataProxies[n.BACKGROUND]=new r(this.connector)),this.dataProxies[n.BACKGROUND]}});return i.Types=Object.freeze(n),i}),define("DS/MPFShopModel/ShopCountFactory",["DS/MPFModelFactory/Factory","DS/MPFShopModel/ShopCountModel","DS/MPFShopModel/PublicShopDataProxyV9","DS/MPFError/NotImplementedError"],function(e,t,r,o){"use strict";var n={TENDER:"Tender"},i=e.extend({createModel:function(e,r,o){return e=e||n.TENDER,this._parent(t,e,r,o)},createCollection:o.emit,getDataProxy:function(){return this.dataProxies[n.TENDER]||(this.dataProxies[n.TENDER]=new r(this.connector)),this.dataProxies[n.TENDER]}});return i.Types=n,i}),define("DS/MPFShopModel/MediaFactory",["DS/MPFModelFactory/Factory","DS/MPFShopModel/MediaModel","DS/MPFShopModel/MediaDataProxy","DS/MPFError/NotImplementedError"],function(e,t,r,o){"use strict";var n={MEDIA:"media"},i=e.extend({createModel:function(e,r,o){return e=e||n.MEDIA,this._parent(t,e,r,o)},createCollection:o.emit,getDataProxy:function(e){return n.MEDIA,this.dataProxies[n.MEDIA]||(this.dataProxies[n.MEDIA]=new r(this.connector)),this.dataProxies[n.MEDIA]}});return i.Types=Object.freeze(n),i}),define("DS/MPFShopModel/LogoFactory",["DS/MPFModelFactory/Factory","DS/MPFShopModel/LogoModel","DS/MPFShopModel/LogoDataProxy","DS/MPFError/NotImplementedError"],function(e,t,r,o){"use strict";var n={LOGO:"logo"},i=e.extend({createModel:function(e,r){return this._parent(t,n.LOGO,e,r)},createCollection:o.emit,getDataProxy:function(e){return n.LOGO,this.dataProxies[n.LOGO]||(this.dataProxies[n.LOGO]=new r(this.connector)),this.dataProxies[n.LOGO]}});return i.Types=Object.freeze(n),i}),define("DS/MPFShopModel/ShopServiceModel",["DS/MPFModel/MPFModel","DS/MPFShopModel/ShopServicesMapping"],function(e,t){"use strict";var r={},o={},n={},i={};r.DESCRIPTION="description",r.BACKGROUND_IMAGE="background",r.CONTRACT_DOCUMENTS="contract-documents",r.STATE="currentState",r.VISIBILITY="visibility",r.MODIFICATION_REQUEST_STATUS="modificationRequestStatus",r.NUMBER_EMPLOYEES="employeeNumber",r.IS_AVAILABLE_FOR_TENDER="isAvailableForTender",r.EXTERNAL_PRICING_URL="ExternalPricingURL",r.EXTERNAL_PRICING_CONDITION="ExternalPricingCondition",i.MAKE="MP3DP_PrintShopService",i.ENGINEERING="MP_EngineeringShopService",i.PART_SUPPLY="MP_PartSupplyShopService",o.TO_BE_VALIDATED="TOBEVALIDATED",o.VALIDATED="VALIDATED",n.DRAFT="DRAFT",n.SUBMITTED="SUBMITTED",n.ACTIVE="ACTIVE",n.SUSPENDED="SUSPENDED";var a=e.extend({defaults:{invoice:!1,paint:!1,pickup:!1,polish:!1,postalDelivery:!1,visibility:"Community",employeeNumber:null},setup:function(e,t){this._parent(e,t)},parse:function(e){var o,n=["additionalEquipments","certification","skills","supportedFormats",r.NUMBER_EMPLOYEES],i=["invoice","paint","pickup","polish","postalDelivery","shopstatus","testOrderStatus"],a=["answeringDelay","printingDelay","turnAroundTime"];const s=Object.values(t).find(t=>Object.prototype.hasOwnProperty.call(e,t));for(s&&(e=e[s]),o=0;o<n.length;o++)e.hasOwnProperty(n[o])&&"string"==typeof e[n[o]]&&(e[n[o]]=[e[n[o]]]);for(o=0;o<i.length;o++)e.hasOwnProperty(i[o])&&"string"==typeof e[i[o]]&&(e[i[o]]="true"===e[i[o]].toLowerCase());for(o=0;o<a.length;o++)e.hasOwnProperty(a[o])&&"string"==typeof e[a[o]]&&(e[a[o]]=parseInt(e[a[o]]));return delete e.products,e},toJSON:function(){var e,t,o=["additionalEquipments","certification","skills","supportedFormats",r.NUMBER_EMPLOYEES],n=["invoice","paint","pickup","polish","postalDelivery","shopstatus","testOrderStatus"],i=["answeringDelay","printingDelay","turnAroundTime"],a=["visibility"];for(e=this._parent(),t=0;t<o.length;t++)this.has(o[t])&&(e[o[t]]=this.get(o[t]));for(t=0;t<n.length;t++)this.has(n[t])&&(e[n[t]]=this.get(n[t])?"TRUE":"FALSE");for(t=0;t<i.length;t++)this.has(i[t])&&(e[i[t]]=this.get(i[t]).toString());for(t=0;t<a.length;t++)this.has(a[t])&&(e[a[t]]=this.get(a[t]));return e},getBackgroundImage:function(){return this.get(r.BACKGROUND_IMAGE)},setBackgroundImage:function(e){return this.set(r.BACKGROUND_IMAGE,e)},getDescription:function(){return this.get(r.DESCRIPTION)},setDescription:function(e){return this.set(r.DESCRIPTION,e)},getState:function(){return this.get(r.STATE)},setState:function(e){return this.set(r.STATE,e)},getNumberEmployees:function(){return this.get(r.NUMBER_EMPLOYEES)},setNumberEmployees:function(e){return this.set(r.NUMBER_EMPLOYEES,e)}});return a.Fields=Object.freeze(r),a.RequestStatus=Object.freeze(o),a.States=Object.freeze(n),a.Types=Object.freeze(i),a}),define("DS/MPFShopModel/ShopModel",["UWA/Core","UWA/String","DS/MPFModel/MPFModel","DS/MPFModel/ModelValidator","DS/MPFServices/MarketplaceServices","DS/MPFShopModel/ShopServicesMapping","i18n!DS/MPFShopModel/assets/nls/ShopModel"],function(e,t,r,o,n,i,a){"use strict";const s={},u={},c={};s.NAME="shopName",s.LOGO="logo",s.DESCRIPTION="description",s.LONGITUDE="geolocLongitude",s.LATITUDE="geolocLatitude",s.OWNER="owner",s.STATE="currentState",s.EMAIL="email",s.CURRENCIES="supportedCurrencies",s.ADDRESS="postal-address",s.SERVICES="shopServices",s.DRUPAL_ID="drupalId",s.PHONE_NUMBER="phoneNumber",s.IS_COMPANY="isCompany",s.IS_INTERNAL="IsInternal",s.IS_AUTOMATIC_PRICING="isAutomaticPricing",s.KYC_STATUS="kycStatus",s.KYC_FORCED_STATUS="kycForcedStatus",s.COUNTRY="country",s.OFFER="offer",s.IS_AVAILABLE_FOR_TENDER="isAvailableForTender",s.EXTERNAL_PRICING_CONDITION="ExternalPricingCondition",s.CITY="city",s.AREA="area",s.MIGRATION_STATUS="migrationStatus",u.SUBMITTED="SUBMITTED",u.DRAFT="DRAFT",u.ACTIVE="ACTIVE",c.OFFERS="offers",c.SHOP_SERVICES="shop-services";const l=["Xometry","Xometry Europe"],d={};d[s.NAME]="",d[s.IS_COMPANY]=!0,d[s.EMAIL]="",d[s.PHONE_NUMBER]="",d[s.OWNER]="";const S=r.extend({setup:function(e,t){this.constraints=t.constraints||null,this._type="ShopModel",this._parent(e,t),this.validator=this._createValidator()},defaults:d,parse:function(t){return Object.prototype.hasOwnProperty.call(t,"shopServices")&&Object.prototype.hasOwnProperty.call(t.shopServices,"MP3DP_PrintShopService")&&(t.shopServices=t.shopServices.MP3DP_PrintShopService),Object.prototype.hasOwnProperty.call(t,"supportedCurrencies")&&"string"==typeof t.supportedCurrencies&&(t.supportedCurrencies=t.supportedCurrencies.split(",")),Object.prototype.hasOwnProperty.call(t,"owner")&&(t.owner=t.owner.substring(t.owner.lastIndexOf("/")+1,t.owner.length)),e.is(t[s.EXTERNAL_PRICING_CONDITION],"string")&&t[s.EXTERNAL_PRICING_CONDITION].length>0&&("none"===t[s.EXTERNAL_PRICING_CONDITION]?t[s.EXTERNAL_PRICING_CONDITION]=null:t[s.EXTERNAL_PRICING_CONDITION]=t[s.EXTERNAL_PRICING_CONDITION].split(",")),t["postal-address"]&&(t.address=t["postal-address"].substring(t["postal-address"].lastIndexOf("/")+1,t["postal-address"].length)),t},toJSON:function(){const e=this._parent();return Array.isArray(e[s.EXTERNAL_PRICING_CONDITION])&&(e[s.EXTERNAL_PRICING_CONDITION]=e[s.EXTERNAL_PRICING_CONDITION].join()),delete e.parentResourceId,e},validate:function(e){return this.validator.validate(e)},getName:function(){return this.get(s.NAME)},setName:function(e){return this.set(s.NAME,e)},getLogo:function(){return this.get("logoUrl")||this.get(s.LOGO)},isInternal:function(){const e=this.get(s.IS_INTERNAL);return"true"===e||"TRUE"===e||!0===e},getLatitude:function(){return this.get("latitude")||this.get(s.LATITUDE)},getLongitude:function(){return this.get("longitude")||this.get(s.LONGITUDE)},getOwner:function(){return this.get(s.OWNER)},setOwner:function(e){return this.set(s.OWNER,e)},getState:function(){return this.get(s.STATE)},setState:function(e){return this.set(s.STATE,e)},getEmail:function(){return this.get(s.EMAIL)},getSupportedCurrencies:function(){return this.get(s.CURRENCIES)},setSupportedCurrencies:function(e){return this.set(s.CURRENCIES,e)},getAddress:function(){return this.get(s.ADDRESS)},setAddress:function(e){return this.set(s.ADDRESS,e)},getServices:function(){return this.get(s.SERVICES)},getService:function(e){let t,r;const o=i[e],a=this.getServices();if(a)return(r=!Object.prototype.hasOwnProperty.call(a,"id"))?t=a[o]:e===n.MAKE&&(t=a),t},getDrupalId:function(){return this.get(s.DRUPAL_ID)},getPhoneNumber:function(){return this.get(s.PHONE_NUMBER)},isCompany:function(){return this.get(s.IS_COMPANY)},getCountry:function(){return this.get(s.COUNTRY)},hasAutomatedPricing:function(){return"TRUE"===this.get(s.IS_AUTOMATIC_PRICING)},getOffer:function(){return this.get(s.OFFER)},getExternalPricingCondition:function(){return this.get(s.EXTERNAL_PRICING_CONDITION)},hasExternalPricingCondition:function(){const e=this.getExternalPricingCondition();return!!(e&&e.length&&e.length>0&&"none"!==e)},hasExternalPricingForProcess:function(e){const t=this.getExternalPricingCondition();return!!t&&t.length>0&&t.indexOf(e)>-1},isPrime:function(){return l.indexOf(this.getName())>-1},getCity:function(){return this.get(s.CITY)},getMigrationStatus(){return this.get(s.MIGRATION_STATUS)},hasStripeMigrationStatus(){const e=this.getMigrationStatus();return"TO_MIGRATE"===e||"PENDING_MIGRATION"===e||"MIGRATION_OK"===e||"MIGRATION_NOK"===e},isMigrationComplete(){const e=this.getMigrationStatus();return e&&"MIGRATION_OK"===e},hasMigrationFailed(){const e=this.getMigrationStatus();return e&&"MIGRATION_NOK"===e},_createValidator:function(){return new o({model:this,validations:[{attribute:s.NAME,required:!0,requiredError:t.ucfirst(t.format(a.get("isRequired"),a.get("name")))},{attribute:s.EMAIL,pattern:/.+/,required:!0,requiredError:t.ucfirst(t.format(a.get("isRequired"),a.get("email"))),conditions:[[s.IS_INTERNAL,"TRUE",!0],[s.IS_INTERNAL,"true",!0],[s.IS_INTERNAL,!0,!0]]},{attribute:s.EMAIL,required:!1,isEmail:!0,invalidError:t.ucfirst(t.format(a.get("isInvalid"),a.get("email"))),conditions:[[s.IS_INTERNAL,"TRUE",!0],[s.IS_INTERNAL,"true",!0],[s.IS_INTERNAL,!0,!0]]},{attribute:s.CURRENCIES,required:!0,isArray:!0,requiredError:a.get("currencyError")},{attribute:s.PHONE_NUMBER,pattern:/^\+?[\d-. ]+$/,required:!1,invalidError:t.ucfirst(t.format(a.get("isInvalid"),a.get("phoneNumber")))}]})}});return S.Fields=Object.freeze(s),S.States=Object.freeze(u),S.Expands=Object.freeze(c),S}),define("DS/MPFShopModel/ShopSubmitor",["UWA/Class","DS/MPFShopModel/ShopModel","DS/MPFShopModel/ShopServiceModel","DS/MPFServices/ObjectService"],function(e,t,r,o){"use strict";var n=e.extend();return n.submit=function(e,n){return o.requiredOfPrototype(e,t,"shop must be a ShopModel"),o.requiredOfPrototype(n,r,"shopService must be a ShopServiceModel"),function(e){var t={};return t[r.Fields.MODIFICATION_REQUEST_STATUS]=r.RequestStatus.TO_BE_VALIDATED,e.savePromise(t,{patch:!0})}(n).then(function(e){return e.setState(t.States.SUBMITTED),e.savePromise()}.bind(null,e)).then(function(e){return e.setState(r.States.SUBMITTED),e.savePromise(e.pick(r.Fields.STATE),{patch:!0})}.bind(null,n))},n}),define("DS/MPFShopModel/ShopCollection",["DS/MPFModel/MPFCollection","DS/MPFShopModel/ShopModel","DS/MPFError/BadArgumentError"],function(e,t,r){"use strict";var o=e.extend({model:t,setup:function(e,t){this.constraints=t.constraints||null,this._parent(e,t)},create:function(e,t){return(t=t||{}).constraints=this.constraints,this._parent(e,t)},parse:function(e){var t=[];return Object.prototype.hasOwnProperty.call(e,"shops")?(e.shops.forEach(function(e){t.push(e)}),t):0===Object.keys(e).length?t:e}});return o.filterByName=function(e,t){var n;if(Object.prototype.isPrototypeOf.call(o.prototype,e))n=e.toArray();else{if(!Array.isArray(e))throw new r("shops must be a ShopCollection or an array");n=e}for(var i=[],a=t.toLowerCase(),s=0;s<n.length;s++){var u=n[s],c=u.getName().toLowerCase().indexOf(a);c>-1&&(u.sortIndex=c,i.push(u))}return i.sort(function(e,t){return e.sortIndex-t.sortIndex})},o}),define("DS/MPFShopModel/MeShopDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFShopModel/ShopDataProxy"],function(e,t){"use strict";return e.extend({init:function(e){this._parent(e,"/me/shops",new t(e))},buildPath:function(){return this.resourcePath},urlGet:function(e,t){return t||(t={}),t.expand||(t.expand=["offers"]),this._parent(e,t)},urlPut:e.delegate,urlPatch:e.delegate,urlDelete:e.delegate,doPut:e.delegate,doPatch:e.delegate,doDelete:e.delegate})}),define("DS/MPFShopModel/ShopFactory",["DS/MPFModelFactory/Factory","DS/MPFShopModel/ShopModel","DS/MPFShopModel/ShopCollection","DS/MPFShopModel/ShopDataProxy","DS/MPFShopModel/MeShopDataProxy","DS/MPFShopModel/ShopPublicDataProxy","DS/MPFShopModel/ShopPublicPMPDataProxy","DS/MPFShopModel/ShopNoPublicDataProxy","DS/MPFShopModel/PublicShopDataProxyV1","DS/MPFShopModel/PublicShopDataProxyV8","DS/MPFShopModel/PublicShopDataProxyV9","DS/MPFShopModel/CompanyShopDataProxyV2"],function(e,t,r,o,n,i,a,s,u,c,l,d){"use strict";const S=Object.freeze({SHOP:"shop",ME:"me",PUBLIC:"public",NO_PUBLIC:"noPublic",PUBLIC_NO_ESID:"publicNoESID",PUBLIC_EMP:"publicPMP",PUBLIC_V1:"publicV1",PUBLIC_V8:"publicV8",PUBLIC_V9:"publicV9",COMPANY_SHOP_V2:"companyShopV2"}),h=e.extend({createCollection:function(e,t,o){return this._parent(r,e,t,o)},createModel:function(e,r,o){return this._parent(t,e,r,o)},getDataProxy:function(e){let t=null;switch(e){case S.SHOP:t=this.getOrCreateDataProxyForType(e,o);break;case S.ME:t=this.getOrCreateDataProxyForType(e,n);break;case S.PUBLIC:t=this.getOrCreateDataProxyForType(e,i);break;case S.NO_PUBLIC:t=this.getOrCreateDataProxyForType(e,s);break;case S.PUBLIC_NO_ESID:t=this.getOrCreateDataProxyForType(e,i,!1);break;case S.PUBLIC_EMP:t=this.getOrCreateDataProxyForType(e,a,this.getDataProxy(S.SHOP));break;case S.PUBLIC_V1:t=this.getOrCreateDataProxyForType(e,u);break;case S.PUBLIC_V8:t=this.getOrCreateDataProxyForType(e,c);break;case S.PUBLIC_V9:t=this.getOrCreateDataProxyForType(e,l);break;case S.COMPANY_SHOP_V2:t=this.getOrCreateDataProxyForType(e,d)}return t}});return h.Types=S,h}),define("DS/MPFShopModel/ShopValidationFactory",["DS/MPFModelFactory/Factory","DS/MPFShopModel/ShopValidationModel","DS/MPFShopModel/ShopValidationDataProxy","DS/MPFError/NotImplementedError"],function(e,t,r,o){"use strict";var n={SHOP_VALIDATION:"shopValidation"},i=e.extend({createModel:function(e,r){var o=n.SHOP_VALIDATION;return this._parent(t,o,e,r)},createCollection:o.emit,getDataProxy:function(){return this.dataProxies[n.SHOP_VALIDATION]||(this.dataProxies[n.SHOP_VALIDATION]=new r(this.connector)),this.dataProxies[n.SHOP_VALIDATION]}});return i.Types=n,i}),define("DS/MPFShopModel/ForcedShopValidator",["UWA/Core","UWA/Class","UWA/Promise","DS/MPFServices/ObjectService","DS/MPFShopModel/ShopModel","DS/MPFShopModel/ShopServiceModel","DS/MPFShopModel/ShopValidationFactory"],function(e,t,r,o,n,i,a){"use strict";const s=t.extend();return s.validate=function(t,s,u){if(o.requiredOfPrototype(t,n,"options.shop must be a ShopModel"),o.requiredOfPrototype(s,i,"options.shopService must be a ShopServiceModel"),o.requiredOfPrototype(u,a,"options.shopValidationFactory must be a ShopValidationFactory"),!e.is(t.get("id"),"string"))return r.reject("Shop must have an id. New shops cannot be validated.");return u.createModel({id:t.get("id")}).savePromise(null,{patch:!0}).then(()=>(function(e){return e.set(n.Fields.STATE,n.States.ACTIVE),e.savePromise(e.pick(n.Fields.STATE),{patch:!0})})(t)).then(()=>(function(e){return e.set(i.Fields.STATE,i.States.ACTIVE),e.savePromise(e.pick(i.Fields.STATE),{patch:!0})})(s)).then(()=>[t,s])},s.validateLabDetails=function(e){return o.requiredOfPrototype(e,i,"shopService must be a ShopServicesModel"),function(e){return e.set(i.Fields.MODIFICATION_REQUEST_STATUS,i.RequestStatus.VALIDATED),e.savePromise(e.pick(i.Fields.MODIFICATION_REQUEST_STATUS),{patch:!0})}(e)},s}),define("DS/MPFShopModel/ShopServiceCollection",["DS/MPFModel/MPFCollection","DS/MPFShopModel/ShopServiceModel"],function(e,t){"use strict";return e.extend({model:t,setup:function(e,t){this._parent(e,t)},create:function(e,t){return this._parent(e,t||{})}})}),define("DS/MPFShopModel/ShopShopServiceDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFShopModel/ShopServicesDataProxy"],function(e,t,r){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/shops/{0}/shop-services",new r(e))},request:function(e,t){this._parent(e,t)},urlDelete:null,urlGet:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId||t.collection.parentResourceId))},urlPost:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId||t.collection.parentResourceId))},urlPatch:null})}),define("DS/MPFShopModel/ShopServiceFactory",["UWA/Core","UWA/Promise","DS/MPFModelFactory/Factory","DS/MPFShopModel/ShopServiceModel","DS/MPFShopModel/ShopServiceCollection","DS/MPFShopModel/ShopShopServiceDataProxy","DS/MPFShopModel/ShopServicesDataProxy"],function(e,t,r,o,n,i,a){"use strict";var s,u={SHOP_SERVICE:"shopService",SHOP_SHOP_SERVICE:"shop"};return(s=r.extend({createCollection:function(e,t,r){return this._parent(n,e,t,r)},createModel:function(e,t,r){return this._parent(o,e,t,r)},getDataProxy:function(e){var t=null;return e===u.SHOP_SHOP_SERVICE?(this.dataProxies[e]||(this.dataProxies[e]=new i(this.connector)),t=this.dataProxies[e]):(this.dataProxies[u.SHOP_SERVICE]||(this.dataProxies[u.SHOP_SERVICE]=new a(this.connector)),t=this.dataProxies[u.SHOP_SERVICE]),t}})).Types=Object.freeze(u),s});