define("DS/CATSolverCDSWeb/CATSolverCDSResultGenerator",[],function(){"use strict";return function(e,r,t){var i={},o=[];const n=function(e){return e===t.CATCDSMoveStatus.msEXACTLYMOVED?"exactlyMoved":e===t.CATCDSMoveStatus.msMOVED?"moved":e===t.CATCDSMoveStatus.msNOTMOVED?"notMoved":e===t.CATCDSMoveStatus.msFIXED?"fixed":void 0};for(let i=0;i<e.data.length;i++){let u,S=e.data[i];if(void 0===S.name)break;r.SetReplayFileName(S.name);let C=(new Date).getTime();r.Run();let f=(new Date).getTime(),g=r.GetEntities(t.CATCDSType.tpGEOMETRY),m=[];for(const e of g){let r={name:e.GetName()},t={line0:[1,0,0],line1:[0,1,0],line2:[0,0,1]};if(e.GetSketch()){let i=e.GetTransformation2D();void 0!==i?(t.line0=[i[0][0],i[0][1],0],t.line1=[i[1][0],i[1][1],0],r.matrix=t,r.vector=[i[0][2],i[1][2],0]):(r.matrix=t,r.vector=[0,0,0]),r.sketchName=e.GetSketch().GetName()}else{let i=e.GetTransformation();void 0!==i?(r.matrix={line0:[i.matrix[0][0],i.matrix[0][1],i.matrix[0][2]],line1:[i.matrix[1][0],i.matrix[1][1],i.matrix[1][2]],line2:[i.matrix[2][0],i.matrix[2][1],i.matrix[2][2]]},r.vector=i.vector):(r.matrix=t,r.vector=[0,0,0])}m.push(r)}let D=r.GetEntities(t.CATCDSType.tpRIGIDSET);var a=[];for(const e of D)if(e.HasTransformation()){let r={name:e.GetName()},t={line0:[1,0,0],line1:[0,1,0],line2:[0,0,1]};if(e.GetSketch()){var s=e.GetTransformation2D();void 0!==s?(t.line0=[s[0][0],s[0][1],0],t.line1=[s[1][0],s[1][1],0],r.matrix=t,r.vector=[s[0][2],s[1][2],0]):(r.matrix=t,r.vector=[0,0,0]),r.sketchName=e.GetSketch().GetName()}else{let i=e.GetTransformation();void 0!==i?(r.matrix={line0:[i.matrix[0][0],i.matrix[0][1],i.matrix[0][2]],line1:[i.matrix[1][0],i.matrix[1][1],i.matrix[1][2]],line2:[i.matrix[2][0],i.matrix[2][1],i.matrix[2][2]]},r.vector=i.vector):(r.matrix=t,r.vector=[0,0,0])}a.push(r)}let p=r.GetEntities(t.CATCDSType.tpVARIABLE),h=p.map(e=>({name:e.GetName(),value:e.GetValue()}));u={name:S.name,transformations:m,bodyTransformations:a,variableValues:h,time:f-C};var l=r.GetEntities(t.CATCDSType.tpSKETCH),d=r.GetEntities(t.CATCDSType.tpGEOMETRYLEAF),c=r.GetEntities(t.CATCDSType.tpRIGIDSET);let T=d.reduce(function(e,r){if(r.GetType()!==t.CATCDSType.tpSKETCH){let i=r.GetRigidSet();if(r.GetMoveStatus()!==t.CATCDSMoveStatus.msUNKNOWN&&(!i||i.GetMoveStatus()===t.CATCDSMoveStatus.msUNKNOWN)){let t={name:r.GetName(),movingStatus:n(r.GetMoveStatus())};r.GetSketch()&&(t.sketch=r.GetSketch().GetName()),e.push(t)}}return e},[]),y=l.reduce(function(e,r){let i=r.GetRigidSet();if(r.GetMoveStatus()!==t.CATCDSMoveStatus.msUNKNOWN&&(!i||i.GetMoveStatus()===t.CATCDSMoveStatus.msUNKNOWN)){let t={name:r.GetName(),movingStatus:n(r.GetMoveStatus())};e.push(t)}return e},[]),A=c.reduce(function(e,r){if(r.GetMoveStatus()!==t.CATCDSMoveStatus.msUNKNOWN){let t={name:r.GetName(),movingStatus:n(r.GetMoveStatus())};r.GetSketch()&&(t.sketch=r.GetSketch().GetName()),e.push(t)}return e},[]),x=p.reduce(function(e,r){return r.GetMoveStatus()!==t.CATCDSMoveStatus.msUNKNOWN&&e.push({name:r.GetName(),movingStatus:n(r.GetMoveStatus())}),e},[]);y.length&&(u.sketchMovingStates=y),x.length&&(u.variableMovingStates=x),T.length&&(u.objectMovingStates=T),A.length&&(u.rigidSetMovingStates=A);let M=(d=r.GetEntities(t.CATCDSType.tpGEOMETRYLEAF)).map(function(e){switch(e.GetType()){case t.CATCDSType.tpCYLINDER:case t.CATCDSType.tpCIRCLE:case t.CATCDSType.tpCIRCLE2D:case t.CATCDSType.tpSPHERE:return{name:e.GetName(),radius:e.GetRadius()};case t.CATCDSType.tpELLIPSE:case t.CATCDSType.tpELLIPSE2D:case t.CATCDSType.tpHYPERBOLA:case t.CATCDSType.tpHYPERBOLA2D:case t.CATCDSType.tpTORUS:return{name:e.GetName(),majorRadius:e.GetMajorRadius(),minorRadius:e.GetMinorRadius()};case t.CATCDSType.tpPARABOLA:case t.CATCDSType.tpPARABOLA2D:return{name:e.GetName(),vertexCurvature:e.GetVertexCurvature()};case t.CATCDSType.tpCONE:return{name:e.GetName(),angle:e.GetAngle()}}});M.length&&(u.objectParams=M);let b=r.GetEntities(t.CATCDSType.tpGEOMCONSTRAINT);for(const e of b){let t={},i=e.GetGeometries();for(const o of i){if(!o)continue;let i={},n=[],a=e.GetHelpParameter(o);void 0!==a?(n.push(a),i.helpParameter=n):void 0!==(n=e.GetHelpParameters(o))?i.helpParameters=n:r.GetSketch(o)?void 0!==(n=e.GetHelpPoint2D(o))&&(i.helpPoint2D=n):void 0!==(n=e.GetHelpPoint(o))&&(i.helpPoint=n),i&&(t[o.GetName()]=i)}t&&(u[e.GetName()]=t)}let N={};for(const e of g){let r={status:e.GetStatus().value,underdefinedStatus:t.CATICDSAdvanced.GetUnderdefinedStatus(e)};var v=e.GetName();void 0!==v&&(N[v]=r)}u.geometryStates=N;let O={};for(const e of p)O[e.GetName()]=r.GetStatus(e).value;p.length&&(u.variableStates=O);let I=r.GetEntities(t.CATCDSType.tpCONSTRAINT),E={};for(const e of I)E[e.GetName()]=e.GetStatus().value;I.length&&(u.constraintStates=E);let G=r.GetDependentVariables(),k={};for(let e=0;e<G.length;e++){let r=[];for(let t=0;t<G[e].length;t++)r.push(G[e][t].GetName());k["class"+e]=r}G.length&&(u.variableDependency=k),u.singularity=r.IsSingularityDetected();let L=[],R=r.GetEntities(t.CATCDSType.tpPROFILE2D);for(const e of R){let r=[],t=e.GetProfileIterator(),i=t.next(),o=0;for(;i;){let e={subElement:i.edge.GetName(),globalStart:i.start,globalEnd:i.end,localStart:i.localStart,orientation:i.orientation,hidden:i.hidden};o<i.end&&(o=i.end),r.push(e),i=t.next()}let n={name:e.GetName(),segments:r,upParam:o},a=e.GetVertices(),s=e.GetSubElements();n.closed=a.length===s.length,L.push(n)}u.profiles=L,o.push(u)}return o.length&&(i.JSONOutputs=o),{ObtainedOutputs:i,rc:0,tracesFileNames:[],tracesContents:[]}}}),define("DS/CATSolverCDSWeb/CATSolverCDSLoader",[],function(){"use strict";return new function(){function e(){Object.defineProperty(this,"length",{get:function(){var e=0;for(var r in this)e++;return e}})}var r,t,i,o,n,a,s,l;this.LoadJSONFile=function(l,d,c){c.SetReplayMode(d.CATCDSReplayMode.rmNONE);var v=0,u=c.GetFactory();if(r=new e,t=new e,i=new e,o=new e,n=new e,a=[],s=[],void 0!==l.rigidsets)for(const e of l.rigidsets){let t=e.name;if(""===t)return console.error("error loading rigidSets"),1;let i=d.CATICDSRigidSet.Create(u);i.SetName(t),r[t]=i,!0===e.fixed&&i.FixToggle(),!0===e.fixed2D&&i.FixToggle2D(),void 0!==e.softFixed&&i.SetFixationStiffness(e.softFixed),void 0!==e.softFixed2D&&i.SetFixationStiffness2D(e.softFixed2D)}if(void 0!==l.sketches)for(const e of l.sketches){let i=d.CATICDSSketch.Create(u,e.origin,e.axisOX,e.axisOY),o=e.name;i.SetName(o),n[o]=i,t[i.GetName()]=i;let a=e.rigidSet;if(void 0!==a){if(void 0===r[a])return console.error("error adding a sketch to a rigid set"),1;r[a].AddGeometry(i)}!0===e.fixed&&i.FixToggle(),void 0!==e.softFixed&&c.SetFixationStiffness(i,e.softFixed)}if(void 0!==l.variables)for(const e of l.variables)v+=this.LoadVariable(e,l,d,c);if(void 0!==l.objects)for(let e=0;e<l.objects.length;e++)v=this.LoadObject(e,l,d,c);if(void 0!==l.joints)for(const e of l.joints)v+=this.LoadJoint(e,d,c);if(void 0!==l.patterns)for(const e of l.patterns)v+=this.LoadPattern(e,d,c);if(v+=this.LoadConstraints(l,d,c),void 0!==l.equations)for(const e of l.equations)v+=this.LoadEquation(e,d,c);if(void 0!==l.offsetConstraints)for(const e of l.offsetConstraints)v+=this.LoadOffsetConstraint(e,d,c);if(void 0!==l.movingEntities){for(const e of l.movingEntities)v+=this.LoadMovingEntity(e,d,c);c.SetTargetValues(a,s)}if(void 0!==l.movedEntities)for(const e of l.movedEntities)v+=this.LoadMovedEntity(e,d,c);return void 0!==l.options&&(v+=this.LoadOption(l.options,d,c)),v},this.checkName=function(e){return e.name===l},this.LoadObject=function(e,i,o,a){let s=i.objects[e];if(void 0!==t[s.name])return 0;if(void 0===s.type)return console.error("error loading object type"),1;let l,d=a.GetFactory();if(void 0!==s.sketch){let e=n[s.sketch];if(void 0===e)return 1;a.SetSketch(e)}switch(s.type){case"point":if(a.SetSketch(null),void 0===s.coords.x||void 0===s.coords.y||void 0===s.coords.z)return console.error("error loading point"),1;l=o.CATICDSPoint.Create(d,s.coords.x,s.coords.y,s.coords.z);break;case"axis":if(a.SetSketch(null),void 0===s.origin.x||void 0===s.origin.y||void 0===s.origin.z)return console.error("error loading axis"),1;if(void 0===s.vector1.x||void 0===s.vector1.y||void 0===s.vector1.z)return console.error("error loading axis vector1"),1;if(void 0===s.vector2.x||void 0===s.vector2.y||void 0===s.vector2.z)return console.error("error loading axis vector2"),1;if(void 0===s.vector3.x||void 0===s.vector3.y||void 0===s.vector3.z)return console.error("error loading axis vector3"),1;l=o.CATICDSAxis.Create(d,s.origin.x,s.origin.y,s.origin.z,s.vector1.x,s.vector1.y,s.vector1.z,s.vector2.x,s.vector2.y,s.vector2.z,s.vector3.x,s.vector3.y,s.vector3.z);break;case"cylinder":if(a.SetSketch(null),void 0===s.origin.x||void 0===s.origin.y||void 0===s.origin.z)return console.error("error loading cylinder"),1;if(void 0===s.direction.x||void 0===s.direction.y||void 0===s.direction.z)return console.error("error loading cylinder direction"),1;if(void 0===s.radius)return console.error("error loading cylinder radius"),1;l=o.CATICDSCylinder.Create(d,s.origin.x,s.origin.y,s.origin.z,s.direction.x,s.direction.y,s.direction.z,s.radius);break;case"cone":if(a.SetSketch(null),void 0===s.origin.x||void 0===s.origin.y||void 0===s.origin.z)return console.error("error loading cone"),1;if(void 0===s.direction.x||void 0===s.direction.y||void 0===s.direction.z)return console.error("error loading cone direction"),1;if(void 0===s.angle)return console.error("error loading cone angle"),1;l=o.CATICDSCone.Create(d,s.origin.x,s.origin.y,s.origin.z,s.direction.x,s.direction.y,s.direction.z,s.angle);break;case"plane":if(a.SetSketch(null),void 0===s.origin.x||void 0===s.origin.y||void 0===s.origin.z)return console.error("error loading plane"),1;if(void 0===s.normal.x||void 0===s.normal.y||void 0===s.normal.z)return console.error("error loading plane normal"),1;l=o.CATICDSPlane.Create(d,s.origin.x,s.origin.y,s.origin.z,s.normal.x,s.normal.y,s.normal.z);break;case"sphere":if(a.SetSketch(null),void 0===s.center.x||void 0===s.center.y||void 0===s.center.z)return console.error("error loading sphere center"),1;if(void 0===s.radius)return console.error("error loading sphere radius"),1;l=o.CATICDSSphere.Create(d,s.center.x,s.center.y,s.center.z,s.radius);break;case"torus":if(a.SetSketch(null),void 0===s.center.x||void 0===s.center.y||void 0===s.center.z)return console.error("error loading torus center"),1;if(void 0===s.normal.x||void 0===s.normal.y||void 0===s.normal.z)return console.error("error loading torus normal"),1;if(void 0===s.majorRadius)return console.error("error loading torus major radius"),1;if(void 0===s.minorRadius)return console.error("error loading torus minor radius"),1;l=o.CATICDSTorus.Create(d,s.center.x,s.center.y,s.center.z,s.normal.x,s.normal.y,s.normal.z,s.majorRadius,s.minorRadius);break;case"line":if(a.SetSketch(null),void 0===s.origin.x||void 0===s.origin.y||void 0===s.origin.z)return console.error("error loading line origin"),1;if(void 0===s.direction.x||void 0===s.direction.y||void 0===s.direction.z)return console.error("error loading line direction"),1;l=o.CATICDSLine.Create(d,s.origin.x,s.origin.y,s.origin.z,s.direction.x,s.direction.y,s.direction.z);break;case"circle":if(a.SetSketch(null),void 0===s.center.x||void 0===s.center.y||void 0===s.center.z)return console.error("error loading circle center"),1;if(void 0===s.normal.x||void 0===s.normal.y||void 0===s.normal.z)return console.error("error loading circle normal"),1;if(void 0===s.radius)return console.error("error loading circle radius"),1;l=o.CATICDSCircle.Create(d,s.center.x,s.center.y,s.center.z,s.normal.x,s.normal.y,s.normal.z,s.radius);break;case"ellipse":if(a.SetSketch(null),void 0===s.center.x||void 0===s.center.y||void 0===s.center.z)return console.error("error loading ellipse center"),1;if(void 0===s.direction.x||void 0===s.direction.y||void 0===s.direction.z)return console.error("error loading ellipse direction"),1;if(void 0===s.normal.x||void 0===s.normal.y||void 0===s.normal.z)return console.error("error loading ellipse normal"),1;if(void 0===s.majorRadius)return console.error("error loading ellipse major radius"),1;if(void 0===s.minorRadius)return console.error("error loading ellipse minor radius"),1;l=o.CATICDSEllipse.Create(d,s.center.x,s.center.y,s.center.z,s.direction.x,s.direction.y,s.direction.z,s.normal.x,s.normal.y,s.normal.z,s.majorRadius,s.minorRadius);break;case"parabola":case"hyperbola":break;case"point2D":if(void 0===s.coords.x||void 0===s.coords.y)return console.error("error loading point2D"),1;l=o.CATICDSPoint2D.Create(d,s.coords.x,s.coords.y);break;case"line2D":if(void 0===s.origin.x||void 0===s.origin.y)return console.error("error loading line2D origin"),1;if(void 0===s.direction.x||void 0===s.direction.y)return console.error("error loading line2D direction"),1;l=o.CATICDSLine2D.Create(d,s.origin.x,s.origin.y,s.direction.x,s.direction.y);break;case"circle2D":if(void 0===s.center.x||void 0===s.center.y||void 0!==s.center.z)return console.error("error loading circle center"),1;if(void 0===s.radius)return console.error("error loading circle radius"),1;l=o.CATICDSCircle2D.Create(d,s.center.x,s.center.y,s.radius);break;case"ellipse2D":if(void 0===s.center.x||void 0===s.center.y)return console.error("error loading circle center"),1;if(void 0===s.direction.x||void 0===s.direction.y)return console.error("error loading ellipse direction"),1;if(void 0===s.majorRadius)return console.error("error loading ellipse major radius"),1;if(void 0===s.minorRadius)return console.error("error loading ellipse minor radius"),1;l=o.CATICDSEllipse2D.Create(d,s.center.x,s.center.y,s.direction.x,s.direction.y,s.majorRadius,s.minorRadius);break;case"axis2D":if(void 0===s.origin||void 0===s.vector1||void 0===s.vector2)return 1;l=o.CATICDSAxis2D.Create(d,s.origin.x,s.origin.y,s.vector1.x,s.vector1.y,s.vector2.x,s.vector2.y);break;case"interpolationNurbsCurve2D":l=this.LoadInterpol(s,o,a,!0);break;case"interpolationNurbsCurve":a.SetSketch(null),l=this.LoadInterpol(s,o,a,!1);break;case"conicarc2D":l=this.LoadNurbsConicArc2D(s,o,a);break;case"nurbsCurve2D":l=this.LoadNurbsCurve2DOr3D(s,o,a,!0);break;case"nurbsCurve":a.SetSketch(null),l=this.LoadNurbsCurve2DOr3D(s,o,a,!1);break;case"profile2D":l=this.LoadProfile(e,i,o,a);break;case"offsetCurve2D":l=this.LoadOffsetCurve2D(s,o,a)}if(!l)return 1;if(void 0!==s.fixed&&l.FixToggle(),void 0!==s.fixed2D&&l.FixToggle2D(),void 0!==s.softFixed&&a.SetFixationStiffness(l,s.softFixed),void 0!==s.softFixed2D&&a.SetFixationStiffness2D(l,s.softFixed2D),void 0!==s.rigidSet){if(void 0===r[s.rigidSet])return console.error("error adding an object to a rigid set"),1;r[s.rigidSet].AddGeometry(l)}var c=s.name;return void 0!==c&&(l.SetName(c),t[c]=l),0},this.LoadVariable=function(e,r,t,i){if(void 0===e.type)return console.error("error loading variable"),1;let n=i.GetFactory();var a;switch(e.type){case"free":a=t.CATCDSVariableType.vtFREE;break;case"angle":a=t.CATCDSVariableType.vtANGLE;break;case"distance":a=t.CATCDSVariableType.vtDISTANCE;break;case"curvature":a=t.CATCDSVariableType.vtCURVATURE}var s=t.CATICDSVariable.Create(n,a);if(!s)return console.error("error  : could not create variable"),1;s.SetValue(e.value),s.SetTolerance(e.tolerance),void 0!==e.fixed&&s.Fix();var l=!1,d=!1,c=0,v=0;if(void 0!==e.low&&(l=!0,c=e.low),void 0!==e.up&&(d=!0,v=e.up),s.SetLimitsActivity(l,d),s.SetLimits(c,v),void 0!==e.name){var u=e.name;s.SetName(u),o[u]=s}return 0},this.LoadJoint=function(e,r,i){if(void 0===e.type||void 0===e.name||void 0===e.axis1||void 0===e.axis2)return console.error("error loading joint"),1;if(!t[e.axis1]||!t[e.axis2])return 1;let n;if("fullDOF"===e.type){if(void 0===e.length1||void 0===e.length2||void 0===e.length3||void 0===e.angle1||void 0===e.angle2||void 0===e.sphType)return console.error("error loading joint"),1;o[e.length1]&&o[e.length2]&&o[e.length3]&&o[e.angle1]&&o[e.angle2]&&o[e.angle3]&&("zxy"===e.sphType?n=r.CATICDSFullDOFJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],r.CATCDSSphericalType.stZXY,o[e.length1],o[e.length2],o[e.length3],o[e.angle1],o[e.angle2],o[e.angle3]):"zyx"===e.sphType?n=r.CATICDSFullDOFJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],r.CATCDSSphericalType.stZYX,o[e.length1],o[e.length2],o[e.length3],o[e.angle1],o[e.angle2],o[e.angle3]):"zxz"===e.sphType?n=r.CATICDSFullDOFJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],r.CATCDSSphericalType.stZXZ,o[e.length1],o[e.length2],o[e.length3],o[e.angle1],o[e.angle2],o[e.angle3]):"pointpoint"===e.sphType&&(n=r.CATICDSFullDOFJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],r.CATCDSSphericalType.stPOINTPOINT,o[e.length1],o[e.length2],o[e.length3],o[e.angle1],o[e.angle2],o[e.angle3])))}else if("cylindrical"===e.type){if(void 0===e.length||void 0===e.angle)return console.error("error loading joint"),1;o[e.length]&&o[e.angle]&&(n=r.CATICDSCylindricalJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],o[e.angle],o[e.length]))}else if("revolute"===e.type){if(void 0===e.angle)return console.error("error loading joint"),1;o[e.angle]&&(n=r.CATICDSRevoluteJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],o[e.angle]))}else if("prismatic"===e.type){if(void 0===e.length)return console.error("error loading joint"),1;o[e.length]&&(n=r.CATICDSPrismaticJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],o[e.length]))}else if("spherical"===e.type){if(void 0===e.angle1||void 0===e.angle2||void 0===e.angle3||void 0===e.sphType)return console.error("error loading joint"),1;o[e.angle1]&&o[e.angle2]&&o[e.angle3]&&("zxy"===e.sphType?n=r.CATICDSSphericalJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],r.CATCDSSphericalType.stZXY,o[e.angle1],o[e.angle2],o[e.angle3]):"zyx"===e.sphType?n=r.CATICDSSphericalJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],r.CATCDSSphericalType.stZYX,o[e.angle1],o[e.angle2],o[e.angle3]):"zxz"===e.sphType?n=r.CATICDSSphericalJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],r.CATCDSSphericalType.stZXZ,o[e.angle1],o[e.angle2],o[e.angle3]):"pointpoint"===e.sphType&&(n=r.CATICDSSphericalJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2],r.CATCDSSphericalType.stPOINTPOINT,o[e.angle1],o[e.angle2],o[e.angle3])))}else"planar"===e.type?n=r.CATICDSPlanarJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2]):"U"===e.type&&(n=r.CATICDSUJoint.Create(i.GetFactory(),t[e.axis1],t[e.axis2]));return n?(void 0!==e.softness&&i.SetConstraintStiffness(n,e.softness),n.SetName(e.name),0):(console.error("error creating joint"),1)},this.LoadInterpol=function(e,r,i,a){if(void 0===e.interpolationData||void 0===e.degree||void 0===e.periodic)return null;let s,l,d=i.GetFactory();if(a){var c=e.sketch;if(void 0===c||void 0===n[c])return console.error("error loading sketch of nurbs2D"),null;s=n[c],i.SetSketch(s),l=r.CATICDSInterpolationNURBSCurve2D.Create(d)}else l=r.CATICDSInterpolationNURBSCurve.Create(d);if(!l)return null;l.SetPeriodic(e.periodic),l.SetDegree(e.degree);for(let r=0;r<e.interpolationData.length;r++){var v=e.interpolationData[r],u=v.name;if(void 0===u||void 0===t[u])return console.error("error loading interpolation point"),null;var S=t[u];if(l.AddInterpolationPoint(r,S),void 0!==v.firstDerivativeDir){let e=t[v.firstDerivativeDir];if(void 0===e)return console.error("error loading first derivative direction"),null;l.SetFirstDerivativeDirection(r,e)}if(void 0!==v.firstDerivativeNormVariable){let e=o[v.firstDerivativeNormVariable];if(void 0===e)return console.error("error loading first derivative norm variable"),null;l.SetFirstDerivativeNormVariable(r,e)}if(void 0!==v.firstDerivativeNormValue&&l.SetFirstDerivativeNorm(r,v.firstDerivativeNormValue),void 0!==v.secondDerivativeDir){let e=t[v.secondDerivativeDir];if(void 0===e)return console.error("error loading second derivative direction"),null;l.SetSecondDerivativeDirection(r,e)}if(void 0!==v.secondDerivativeNormVariable){let e=t[v.secondDerivativeNormVariable];if(void 0===e)return console.error("error loading second derivative norm variable"),null;l.SetSecondDerivativeNormVariable(r,e)}if(void 0!==v.secondDerivativeNormValue&&l.SetSecondDerivativeNorm(r,v.secondDerivativeNormValue),void 0!==v.curvatureVariable){var C=t[v.curvatureVariable];if(void 0===C)return console.error("error loading curvature variable"),null;l.SetCurvatureVariable(r,C)}void 0!==v.curvatureValue&&l.SetCurvature(r,v.curvatureValue)}return l},this.LoadNurbsCurve2DOr3D=function(e,r,i,o){let a=i.GetFactory(),s=[],l=[],d=null;for(let r=0;r<e.controlPoints.length;r++){let i=e.controlPoints[r];if(!t[i])return console.error("error loading control points of nurbsCurve"),1;s.push(t[i]),void 0!==e.weights&&l.push(e.weights[r])}if(0===l.length&&(l=null),o){let t=e.sketch;if(void 0===t||void 0===n[t])return console.error("error loading sketch of nurbs2D"),null;i.SetSketch(n[t]),d=r.CATICDSNURBSCurve2D.Create(a,e.degree,e.knots,s,l)}else d=r.CATICDSNURBSCurve.Create(a,e.degree,e.knots,s,l);return d},this.LoadNurbsConicArc2D=function(e,r,i){let a=i.GetFactory(),s=[],l=null;for(const r of e.controlPoints){if(!t[r])return console.error("error loading control points of nurbsCurve"),1;s.push(t[r])}let d=o[e.rho];if(void 0===d)return console.error("error loading rho"),null;let c=e.sketch;if(void 0===c||void 0===n[c])return console.error("error loading sketch of nurbs2D"),null;let v=n[c];return i.SetSketch(v),l=r.CATICDSNURBSConicArc2D.Create(a,s,d)},this.LoadOffsetCurve2D=function(e,r,i){let a=null,s=i.GetFactory();return void 0===e.baseCurve||"undefined"===e.sketch||"undefined"===n[e.sketch]||void 0===e.offsetVariable&&void 0===e.offsetValue?(console.error("error loading offsetCurve2D"),null):"undefined"!==e.offsetVariable&&"undefined"===o[e.offsetVariable]?(console.error("error loading variable for offsetCurve2D"),null):void 0===t[e.baseCurve]?(console.error("error loading base for offsetCurve2D"),null):(i.SetSketch(n[e.sketch]),a=void 0!==e.offsetValue?r.CATICDSOffsetCurve2D.CreateFixOffset(s,t[e.baseCurve],e.offsetValue):r.CATICDSOffsetCurve2D.CreateVariableOffset(s,t[e.baseCurve],o[e.offsetVariable]))},this.LoadPattern=function(e,r,i){if("undefined"===e.type)return console.error("error loading pattern"),1;let n=i.GetFactory(),a=null,s=null,l=null;if(void 0!==e.objects){a=[];for(const r of e.objects){if(void 0===t[r])return console.error("error loading pattern object"),1;if(a.push(t[r]),!t[r])return console.error("error loading pattern geometry"),1}}if(void 0!==e.variables){s=[];for(const r of e.variables){if(void 0===o[r])return console.error("error loading pattern variable"),1;s.push(o[r])}}if(void 0!==e.alignments){l=[];for(const t of e.alignments)switch(t){case"align":l.push(r.CATCAlignment.caALIGN);break;case"antiAlign":l.push(r.CATCAlignment.caANTIALIGN);break;default:l.push(r.CATCAlignment.caNOTSPECIFIED)}}let d=null;if(void 0===t[e.axis])return console.error("error loading pattern axis"),1;var c=t[e.axis];if(!c)return console.error("error loading pattern axis"),1;switch(e.type){case"linear":d=r.CATICDSLinearPattern.Create(n,c,a,s,void 0!==l?l:0);break;case"circular":d=r.CATICDSCircularPattern.Create(n,c,a,s,void 0!==l?l:0);break;case"full2D":d=r.CATICDSFullPattern2D.Create(n,c,a,s)}return d?(void 0!==e.softness&&i.SetConstraintStiffness(d,e.softness),d.SetName(e.name),0):(console.error("error loading pattern"),1)},this.LoadConstraints=function(e,r,t){var i=0;if(void 0!==e.constraints)for(const o of e.constraints)i+=this.LoadConstraint(o,r,t);return i},this.LoadConstraintsWithIndexCondition=function(e,r,t,o){let a=!0;for(let d=0;d<r.constraints.length;d++){var s=r.constraints[d];if(void 0===i[s.name]){for(let t=0;t<s.args.length;t++){l=s.args[t];let i=r.objects.findIndex(this.checkName);if(!n[l]&&i>e){a=!1;break}}if(!a)break;if(0!==this.LoadConstraint(r.constraints[d],t,o))return console.error("error during load of constraint with index condition"),!1}}return!0},this.LoadConstraint=function(e,r,n){if(void 0===e.name)return 1;if(void 0!==i[e.name])return 0;if(void 0===e.args||void 0===t[e.args[0]])return console.error("error loading constraint argument"),1;let a=n.GetFactory(),s=t[e.args[0]];if(!s)return 0;let l=null,d=null;if(e.args.length>=2){if(!t[e.args[1]])return 0;l=t[e.args[1]]}if(e.args.length>=3){if(!t[e.args[2]])return 0;d=t[e.args[2]]}let c,v=!1;switch(e.type){case"coincidence":if(l&&(c=r.CATICDSCoincidence.Create(a,s,l)),!c)return 1;"parallel"===e.circleTorusOrientation?c.SetCircleTorusOrientation(r.CATCDSTorusOrientation.toPARALLEL):"perpendicular"===e.circleTorusOrientation&&c.SetCircleTorusOrientation(r.CATCDSTorusOrientation.toPERPENDICULAR);break;case"distance":if(l&&(c=r.CATICDSDistance.Create(a,s,l,d)),v=!0,!c)return 1;break;case"angle":if(l&&(c=r.CATICDSAngle.Create(a,s,l,d)),!c)return 1;v=!0,void 0!==e.dimensional&&!1===e.dimensional?c.SetAlignment(r.CATCAlignment.caNOTSPECIFIED):c.SetAlignment(r.CATCAlignment.caSPECIFIED);break;case"apexAngle":c=r.CATICDSApexAngle.Create(a,s),v=!0;break;case"parallelism":l&&(c=r.CATICDSParallelism.Create(a,s,l));break;case"perpendicularity":l&&(c=r.CATICDSPerpendicularity.Create(a,s,l));break;case"tangency":l&&(c=r.CATICDSTangency.Create(a,s,l,d));break;case"antitangency":l&&(c=r.CATICDSAntiTangency.Create(a,s,l,d));break;case"concentricity":l&&(c=r.CATICDSConcentricity.Create(a,s,l));break;case"coaxiality":c=r.CATICDSCoaxiality.Create(a,s,l);break;case"midpoint":l&&(c=r.CATICDSMidpoint.Create(a,s,l,d));break;case"symmetry":l&&(c=r.CATICDSSymmetry.Create(a,s,l,d));break;case"curvature":(c=r.CATICDSCurvature.Create(a,s,l))&&void 0!==e.absolute&&c.SetUseAbsoluteValue(e.absolute),v=!0;break;case"cotangency":c=r.CATICDSCoTangency.Create(a,s,l);break;case"focus":c=r.CATICDSFocus.Create(a,s,l);break;case"radius":c=r.CATICDSRadius.Create(a,s),v=!0;break;case"majorRadius":c=r.CATICDSMajorRadius.Create(a,s),v=!0;break;case"minorRadius":c=r.CATICDSMinorRadius.Create(a,s),v=!0;break;case"segmentLength":c=r.CATICDSSegmentLength.Create(a,s,l,d),v=!0;break;case"vertexCurvature":c=r.CATICDSVertexCurvature.Create(a,s),v=!0}if(!c)return console.error("error creating constraint"),1;if(void 0!==e.value&&c.SetValue(e.value),void 0!==e.softness&&n.SetConstraintStiffness(c,e.softness),void 0!==e.alignment&&("align"===e.alignment?c.SetAlignment(r.CATCAlignment.caALIGN):"antiAlign"===e.alignment&&c.SetAlignment(r.CATCAlignment.caANTIALIGN)),void 0!==e.helpParameters)for(let r=0;r<e.args.length;r++){var u=e.args[r],S=t[u];if(void 0===S)return console.error("error loading constraint parameter"),1;var C=e.helpParameters[u];if(void 0!==C){var f,g=C.helpParameter;void 0!==g&&c.SetHelpParameter(S,g[0]),void 0!==(g=C.helpParameters)&&c.SetHelpParameters(S,g[0],g[1]),void 0!==(f=C.helpPoint)&&3===f.length&&c.SetHelpPoint(S,f),void 0!==(f=C.helpPoint2D)&&2===f.length&&c.SetHelpPoint2D(S,f);var m=o[C.helpParameterVar1],D=o[C.helpParameterVar2];void 0!==m&&(c.SetHelpParameters(S,C.var1Value,void 0!==C.var2Value?C.var2Value:0),c.SetHelpParameterVariables(S,m,void 0!==D?D:null))}}if(void 0!==e.changeChirality&&!0===e.changeChirality&&c.ChangeChirality(),void 0!==e.orientations&&("+"===e.orientations[0]?c.SetHalfSpace(s,r.CATCDSHalfSpace.hsPOSITIVE):"-"===e.orientations[0]&&c.SetHalfSpace(s,r.CATCDSHalfSpace.hsNEGATIVE),l&&("+"===e.orientations[1]?c.SetHalfSpace(l,r.CATCDSHalfSpace.hsPOSITIVE):"-"===e.orientations[1]&&c.SetHalfSpace(l,r.CATCDSHalfSpace.hsNEGATIVE)),d&&("+"===e.orientations[2]?c.SetHalfSpace(d,r.CATCDSHalfSpace.hsPOSITIVE):"-"===e.orientations[2]&&c.SetHalfSpace(d,r.CATCDSHalfSpace.hsNEGATIVE))),v&&void 0!==e.variable){let r=o[e.variable];void 0!==r&&c.SetVariable(r)}return c.SetName(e.name),i[e.name]=c,0},this.LoadEquation=function(e,r,t){if(void 0===e.type)return console.error("error loading equation"),1;let i=t.GetFactory(),n=null;switch(e.type){case"linear":if(void 0===e.terms||void 0===e.tolerance||void 0===e.constant)return console.error("error loading linear equation"),1;var a=[],s=[];for(let r=0;r<e.terms.length;r++){if(void 0===o[e.terms[r].name]||void 0===o[e.terms[r].name])return console.error("error loading linear equation"),1;a.push(o[e.terms[r].name]),s.push(e.terms[r].linear)}n=r.CATICDSLinearEquation.Create(i,a,s,e.constant)}return n?(n.SetName(e.name),n.SetTolerance(e.tolerance),0):(console.error("error creating equation"),1)},this.LoadProfile=function(e,i,o,a){var s=i.objects[e];if(void 0===s.subElements||void 0===s.vertices)return console.error("error loading profile"),null;if("undefined"!==s.sketch){let e=n[s.sketch];if(void 0===e)return console.error("error loading profile sketch"),null;a.SetSketch(e)}let d=a.GetFactory(),c=[],v=[];for(let e=0;e<s.subElements.length;e++){let r=s.subElements[e].name,n=t[r];l=r;let d=i.objects.findIndex(this.checkName);if(d<0)return null;if(void 0===n&&(n=this.LoadObject(d,i,o,a)),null===n)return console.error("error loading profile"),null;if(c.push(n),v.push(s.subElements[e].orientation),!this.LoadConstraintsWithIndexCondition(d,i,o,a))return null}let u=[];for(let e=0;e<s.vertices.length;e++){let r=t[s.vertices[e].name];l=s.vertices[e].name;let n=i.objects.findIndex(this.checkName);if(n<0)return null;if(void 0===r&&(r=this.LoadObject(n,i,o,a)),null===r)return console.error("error loading profile"),null;if(u.push(r),!this.LoadConstraintsWithIndexCondition(n,i,o,a))return null}let S=o.CATICDSProfile2D.Create(d,c,u,v,s.closed);if(!S)return console.error("error creating profile"),null;if("autotrim"===s.selfIntersectionMode&&S.SetSelfIntersectionMode(o.CATCDSSelfIntersectionMode.simAUTOTRIM),void 0!==s.rigidSet){if(void 0===r[s.rigidSet])return console.error("error adding a profile to a rigid set"),null;r[s.rigidSet].AddGeometry(S)}return void 0!==s.segment&&S.SetTrimmingInfo(s.segment),S},this.LoadOffsetConstraint=function(e,r,i){if("undefined"===e.name||"undefined"===e.base||"undefined"===e.offset||"undefined"===e.variables)return console.error("error loading offsetConstraint"),1;let n=i.GetFactory(),a=t[e.base],s=t[e.offset];if(!a||!s)return console.error("error loading offsetConstraint profiles"),1;let l=o[e.variable];if(!l)return console.error("error loading offsetConstraint variable"),1;let d=r.CATICDSOffsetConstraint.Create(n,a,s,l);return d?(void 0!==e.variables&&d.SetBorderVerticesAlignment(!0),void 0!==e.softness&&i.SetConstraintStiffness(d,e.softness),d.SetName(e.name),0):(console.error("error creating offsetConstraint"),1)},this.LoadOption=function(e,r,t){return void 0===e.CDSLevel||void 0===e.outputMode||void 0===e.linearTolerance||void 0===e.angularTolerance||void 0===e.dynamicMoveMode||void 0===e.diagnosticsMode||void 0===e.DOFMode||void 0===e.partialSolvingMode||void 0===e.solvingMode||void 0===e.preserveChiralityMode||void 0===e.overdefinedDiagnosticsMode||void 0===e.varDependencyMode||void 0===e.updateMode||void 0===e.rigidSetDiagnosticsMode||void 0===e.initialDataOnInconsistentGeomComponentMode?(console.error("error loading options"),1):("rootElements"===e.outputMode?t.SetOutputMode(r.CATCDSOutputMode.omCALLBACK_ROOT_ELEMENTS):"allElements"===e.outputMode&&t.SetOutputMode(r.CATCDSOutputMode.omCALLBACK_ALL_ELEMENTS),t.SetTolerances(e.linearTolerance,e.angularTolerance),"standard"===e.dynamicMoveMode?t.SetDynamicMoveMode(r.CATCDSMoveMode.mmSTANDARD):"perturbation"===e.dynamicMoveMode?t.SetDynamicMoveMode(r.CATCDSMoveMode.mmPERTURBATION):"minimum"===e.dynamicMoveMode?t.SetDynamicMoveMode(r.CATCDSMoveMode.mmMINIMUM_MOVE):"accurate"===e.dynamicMoveMode&&t.SetDynamicMoveMode(r.CATCDSMoveMode.mmACCURATE_MOVE),"always"===e.diagnosticsMode?t.SetDiagnosticsMode(r.CATCDSDiagMode.dmALWAYS):"never"===e.diagnosticsMode?t.SetDiagnosticsMode(r.CATCDSDiagMode.dmNEVER):"notsolved"===e.diagnosticsMode?t.SetDiagnosticsMode(r.CATCDSDiagMode.dmNOTSOLVED):"oldAlways"===e.diagnosticsMode&&t.SetDiagnosticsMode(r.CATCDSDiagMode.dmOLDALWAYS),"full"===e.DOFMode?t.SetDegreesOfFreedomMode(r.CATCDSDOFMode.dmFULL):"withoutDOS"===e.DOFMode&&t.SetDegreesOfFreedomMode(r.CATCDSDOFMode.dmWITHOUTDOS),"always"===e.partialSolvingMode?t.SetPartialSolvingMode(r.CATCDSPartialSolvingMode.psALWAYS):"fail_if_inconsistent"===e.partialSolvingMode&&t.SetPartialSolvingMode(r.CATCDSPartialSolvingMode.psFAIL_IF_INCONSISTENT),"standard"===e.solvingMode?t.SetSolvingMode(r.CATCDSSolvingMode.slSTANDARD):"minimumMove"===e.solvingMode&&t.SetSolvingMode(r.CATCDSSolvingMode.slMINIMUM_MOVE),"free"===e.preserveChiralityMode?t.SetPreserveChiralityMode(r.CATCDSChiralityMode.cmFREE):"keep"===e.preserveChiralityMode&&t.SetPreserveChiralityMode(r.CATCDSChiralityMode.cmKEEP),"dimensional"===e.overdefinedDiagnosticsMode?t.SetOverdefinedDiagnosticsMode(r.CATCDSOverdefinedDiagMode.odDIMENSIONAL):"full"===e.overdefinedDiagnosticsMode&&t.SetOverdefinedDiagnosticsMode(r.CATCDSOverdefinedDiagMode.odFULL),"never"===e.varDependencyMode?t.SetVarDependencyMode(r.CATCDSVarDepMode.vmNEVER):"solved"===e.varDependencyMode&&t.SetVarDependencyMode(r.CATCDSVarDepMode.vmSOLVED),"evaluate"===e.updateMode?t.SetUpdateMode(r.CATCDSUpdateMode.umEVALUATE):"reevaluate"===e.updateMode?t.SetUpdateMode(r.CATCDSUpdateMode.umREEVALUATE):"evalTransform"===e.updateMode&&t.SetUpdateMode(r.CATCDSUpdateMode.umEVALTRANSFORM),"withoutDOS"===e.rigidSetDiagnosticsMode?t.SetRigidSetDiagnosticMode(r.CATRigidSetDiagMode.rdWITHOUTDOS):"full"===e.rigidSetDiagnosticsMode?t.SetRigidSetDiagnosticMode(r.CATRigidSetDiagMode.rdFULL):"extraDof"===e.rigidSetDiagnosticsMode&&t.SetRigidSetDiagnosticMode(r.CATRigidSetDiagMode.rdEXTRADOF),void 0!==e.new3DRigidificationHeuristic&&(!1===e.new3DRigidificationHeuristic?t.UseNew3DRigidificationHeuristic(!1):t.UseNew3DRigidificationHeuristic(!0)),void 0!==e.checkUnsolvableConstraintsMode&&(!1===e.checkUnsolvableConstraintsMode?t.SetCheckUnsolvableConstraintsMode(!1):t.SetCheckUnsolvableConstraintsMode(!0)),t.SetInitialDataOnInconsistentGeomComponentMode(e.initialDataOnInconsistentGeomComponentMode),t.SetPerturbationMove(!1),t.SetAccurateMove(!1),0)},this.LoadMovingEntity=function(e,i,l){if(void 0===e.name)return console.error("error loading moving entity"),1;let d=e.name;var c=t[d];if(void 0===c&&void 0===(c=n[d])&&void 0===(c=r[d])&&void 0===(c=o[d]))return console.error("error creating moving entity"),1;let v=e.vector,u=e.matrix;if(void 0!==v&&void 0!==u){let r;!0===e.transfo2D?(r=[u.line0,u.line1],c.SetDynamicMove2D(r,v)):(r=[u.line0,u.line1,u.line2],c.SetDynamicMove(r,v))}let S=0,C=0,f=!1;if(void 0!==e.moveMajorRadius&&(S=e.moveMajorRadius,f=!0),void 0!==e.moveMinorRadius&&(C=e.moveMinorRadius,f=!0),f&&c.MoveRadii(S,C),void 0!==e.moveValue&&(a.push(c),s.push(e.moveValue)),void 0!==e.moveByLineOrigin&&void 0!==e.moveByLineDirection){let r=[e.moveByLineOrigin.x,e.moveByLineOrigin.y,e.moveByLineOrigin.z],t=[e.moveByLineDirection.x,e.moveByLineDirection.y,e.moveByLineDirection.z];l.SetDynamicMove(c,r,t)}return 0},this.LoadMovedEntity=function(e,r,i){if(void 0===e.name||void 0===e.matrix||void 0===e.vector)return console.error("error loading moved entity"),1;let o=t[e.name];if(void 0===o)return 1;let n=[[],[]];n[0][0]=e.matrix.line0[0],n[0][1]=e.matrix.line0[1],n[1][0]=e.matrix.line1[0],n[1][1]=e.matrix.line1[1];let a=e.vector;return i.SetAppliedTransformation2D(o,n,a),0}}}),define("DS/CATSolverCDSWeb/CATSolverCDSSolver",["UWA/Core","DS/CATCDSJS/CATCDS","DS/CATSolverCDSWeb/CATSolverCDSResultGenerator","DS/CATSolverCDSWeb/CATSolverCDSLoader","DS/Visualization/ThreeJS_DS"],function(e,r,t,i,o){"use strict";return e.Class.extend({init:function(e){this._parent(e),this._originalJSON=null,this._currentJSON=null,this._cdsSolver=r.CATICDSAdvanced.Create(),null===this._cdsSolver?console.error("CDS solver could not be instantiated."):this._cdsSolver.Run(),this._moveType="undefined"},initialize:function(e){this._originalJSON=JSON.parse(e),this._currentJSON=JSON.parse(e),void 0===this._originalJSON.data[0].name&&(this._originalJSON.data[0].name="xDesign",this._currentJSON.data[0].name="xDesign"),this._currentJSON.data[0].options.dynamicMoveMode="minimum"},load:function(){0!==i.LoadJSONFile(this._currentJSON.data[0],r,this._cdsSolver)&&console.warn("error occured during loading of "+this._currentJSON.data[0].name)},isSolveSupported:function(){return 0===this._currentJSON.data[0].JSONstreamStatus.status},clean:function(){this._currentJSON=JSON.parse(JSON.stringify(this._originalJSON)),r.CATICDSAdvanced.Remove(this._cdsSolver)},setMovingEntity:function(e,r){if(!this._currentJSON||!this._currentJSON.data)return;const t=this._currentJSON.data[0];if(!t)return void console.warn("solver doesn't contain data.");let i=this.getRigidSetByUsername(e);if(i){let e=[{name:r?"pickingPoint":i.name,userName:i.userName}];if(r){let e={coords:{x:r[0],y:r[1],z:r[2]},id:0,name:"pickingPoint",rigidSet:i.name,type:"point"};t.objects.length===this._originalJSON.data[0].objects.length?t.objects.push(e):t.objects[t.objects.length-1]=e}t.movingEntities=e}else{for(const i of t.rigidsets){let o=e.split("\\u0005");for(let e=o.length-1;e>=0;e--){let n=o[e];if(i.userName===n){let e=[{name:null,userName:i.userName}];if(r){e[0].name="pickingPoint";let o={coords:{x:r[0],y:r[1],z:r[2]},id:0,name:"pickingPoint",rigidSet:i.name,type:"point"};t.objects.length===this._originalJSON.data[0].objects.length?t.objects.push(o):t.objects[t.objects.length-1]=o}else e[0].name=i.name;return void(t.movingEntities=e)}}}console.warn("instance to move not found in solver's data.")}},setTarget:function(e){let t=this._currentJSON.data[0];if(t.movingEntities&&t.movingEntities.length&&this._cdsSolver){if("movebytransfo"===this._moveType){let r=[e.matrix[9],e.matrix[10],e.matrix[11]],i={line0:[e.matrix[0],e.matrix[3],e.matrix[6]],line1:[e.matrix[1],e.matrix[4],e.matrix[7]],line2:[e.matrix[2],e.matrix[5],e.matrix[8]]};t.movingEntities[0].matrix=i,t.movingEntities[0].vector=r,delete t.movingEntities[0].moveByLineDirection,delete t.movingEntities[0].moveByLineOrigin}else{if("movebyray"!==this._moveType)return void console.warn("unsupported move type.");{let r={x:e.line[0],y:e.line[1],z:e.line[2]},i={x:e.line[3],y:e.line[4],z:e.line[5]};t.movingEntities[0].moveByLineDirection=i,t.movingEntities[0].moveByLineOrigin=r,delete t.movingEntities[0].matrix,delete t.movingEntities[0].vector}}this._cdsSolver.Reset(),0!==i.LoadMovingEntity(t.movingEntities[0],r,this._cdsSolver)&&console.warn("error occured during loading of moving entity of "+t.name);let o=[],n=[];this._cdsSolver.SetTargetValues(o,n)}else console.warn("moving entity not found in solver.")},setMoveType:function(e){this._moveType=e},getMoveType:function(){return this._moveType},getRigidSetByName:function(e){return this._currentJSON.data[0].rigidsets.find(r=>r.name===e)},getRigidSetByUsername:function(e){return this._currentJSON.data[0].rigidsets.find(r=>r.userName===e)},run:function(){let e=[],i=new t(this._currentJSON,this._cdsSolver,r);if(0===i.rc){let r=[],t=i.ObtainedOutputs.JSONOutputs;if(t.length>0){r=t[0].bodyTransformations.map(e=>e)}for(const t of r){let r=this.getRigidSetByName(t.name),i=r?r.userName:"",n=new o.Matrix4(t.matrix.line0[0],t.matrix.line0[1],t.matrix.line0[2],t.vector[0],t.matrix.line1[0],t.matrix.line1[1],t.matrix.line1[2],t.vector[1],t.matrix.line2[0],t.matrix.line2[1],t.matrix.line2[2],t.vector[2],0,0,0,1);e.push({path:i,transfo:n})}}return{results:e,status:i.rc}}})});