define("DS/VCXWebGUIInfra/VCXContainerDivider",["UWA/Controls/Abstract","css!DS/VCXWebGUIInfra/VCXWebGUIInfra"],function(t,e){"use strict";return t.extend({init:function(t){this._parent(t),this.container=UWA.Element("div",{class:"vcxcontainerdivider"}),this.containerhandlebar=UWA.Element("div",{class:"handlebar-vcxcontainerdivider"}),this.containerhandle=UWA.Element("div",{class:"handle-vcxcontainerdivider"}),this.containerhandlebar.inject(this.containerhandle),t.firstElement.inject(this.container),t.firstElement.addClassName("first-vcxcontainerdivider"),this.containerhandle.inject(this.container),t.secondElement.inject(this.container),t.secondElement.addClassName("second-vcxcontainerdivider"),this.enable=!0,this.defaultPlacement=t.defaultPlacement?t.defaultPlacement:.75,this.resize(this.defaultPlacement),this.isDragging=!1,this.containerhandle.addEventListener("mousedown",t=>{!this.isDragging&&this.container.parentElement&&this.enable&&this.container.parentElement.addEventListener("mousemove",this.onMouseEvent.bind(this)),this.isDragging=!0,t.preventDefault()}),document.body.addEvent("mouseup",t=>{this.isDragging=!1,this.container.parentElement&&this.container.parentElement.removeEventListener("mousemove",this.onMouseEvent.bind(this))})},onMouseEvent:function(t){if(this.isDragging){let e=this.container.getBoundingClientRect();this.resize((t.clientY-e.y)/this.container.clientHeight)}},resize:function(t){this.options.firstElement.style.height="calc("+100*t+"%)",this.options.secondElement.style.height="calc("+100*(1-t)+"% - "+this.containerhandle.clientHeight+"px)"},setEnableDrag:function(t){this.enable=t}})}),define("DS/VCXWebGUIInfra/VCXArcBar",["UWA/Controls/Abstract","DS/Core/PointerEvents","DS/CoreEvents/Events","DS/WebappsUtils/WebappsUtils"],function(t,e,i,n){"use strict";var s=t.extend({defaultOptions:{body:void 0,actionBar:void 0,frmWindow:void 0,heightElem:32,widthElem:32,padding:4,title:"",updateOpacity:!0,minOpacity:Math.pow(.1,2),maxOpacity:1,typeSeparator:"bubble",lJsonElement:[],classpanel:"",Idpanel:"",heightOffset:0,curve:!0,startAngle:void 0,clockwise:!0,center:void 0,startLinearPosition:void 0,radius:500,experienceBase:void 0},init:function(t){if(this._parent(t),this._relatedOpacity=1,this._state=s.State.Visible,this._tokenWindowResized=null,this._listbutton=[],this._panel=null,this._panelInfos={},t.experienceBase){var e=t.experienceBase.getManager("VCXContextManager");e&&e.loadCssFile("VCXWebGUIInfra/VCXArcBar.css",1)}if(this._testUniciyIdFromJson()?(this._createFilter(),this.updateLayout(),this.updateCommandState()):alert("Error: ID not unique"),!t.center&&t.experienceBase){var n=this;this._usableAreaUpdateEvent=i.subscribe({event:"VCX_GUI_USABLEAREA_UPDATE"},function(t){n._updateSize(),n._updatePosition()})}},clear:function(){this._usableAreaUpdateEvent&&(i.unsubscribe(this._usableAreaUpdateEvent),delete this._usableAreaUpdateEvent),this._listbutton=[],this._panel&&(this._panel.destroy(),this._panel=null),this.stopMouseMoveEvent(),this._tokenWindowResized&&(i.unsubscribe(this._tokenWindowResized),this._tokenWindowResized=null)},getPositioningMethod:function(){return!this.options.curve&&this.options.startLinearPosition?s.PositioningMethod.Position:this.options.center?s.PositioningMethod.Center:s.PositioningMethod.Bottom},_findDuplicates:function(t){for(var e=t.length,i=[],n={},s=0;s<e;s++){n[a=t[s]]=n[a]>=1?n[a]+1:1}for(var a in n)n[a]>1&&i.push(a);return i},_testUniciyIdFromJson:function(){for(var t=[],e=0;e<this.options.lJsonElement.length;e++)"element"===this.options.lJsonElement[e].type&&t.push(this.options.lJsonElement[e].id);var i=this._findDuplicates(t);return!i||0===i.length},_setStyleChecked:function(t,e){e?t.addClassName("vcx-ui-state-checked"):t.removeClassName("vcx-ui-state-checked")},_setStyleEnabled:function(t,e){e?(t.removeClassName("vcx-ui-state-disabled"),t.icon.removeClassName("vcx-ui-state-disabled")):(t.addClassName("vcx-ui-state-disabled"),t.icon.addClassName("vcx-ui-state-disabled"))},_inputDiv:function(t,e){var i=UWA.createElement("div",{html:"",id:t,class:t}).inject(e);return i.style.display="block",i},_createButton:function(t,i,n,s){var a=UWA.createElement("div",{class:"vcx-filter-Button",id:t.id,title:t.nls,styles:{display:"inline-block",position:"absolute",background:"rgb(255,255,255)",opacity:"1",top:n+"px",left:s+"px",borderRadius:"50%",width:this.options.widthElem+"px",height:this.options.heightElem+"px",cursor:"pointer"}}).inject(i),o=this._createButtonIcon(t.url).inject(a);a.icon=o,void 0===t.userdata&&(t.userdata=t.id);var l={button:a,userdata:t.userdata,callback:t.callback,callbackUpdate:t.callbackUpdate};this._listbutton.push(l);var r=this;return a.addEvent(e.POINTERUP,function(t){if(l.callback){var e={enable:!0,check:void 0};l.callbackUpdate&&l.callbackUpdate.call(a,e,l.userdata),e.enable&&l.callback.call(a,l.userdata)}r.updateCommandState()}),a},_createButtonIcon:function(t){var e=UWA.createElement("img",{});return e.src=t,e.setStyles({position:"absolute",display:"block",width:"100%",height:"100%",padding:this.options.padding+"px"}),e},_createPanel:function(){var t=UWA.createElement("div",{id:"vcx-filter-panel "+this.options.Idpanel,class:"vcx-filter-panel "+this.options.classpanel,styles:{position:"fixed",pointerEvents:"none",width:"auto",transition:"opacity 0.3s ease-in-out"}});return t.addEvent("dragstart",function(t){t.preventDefault()}),t},_createSeparator:function(t,e,i,n,s){var a;(a="bubble"===e?UWA.createElement("div",{class:"vcx-filter-Separator",styles:{position:"absolute",display:"inline-block",width:2*s+"px",height:2*s+"px",opacity:"0.45",borderRadius:"50%",background:"black"}}).inject(t):UWA.createElement("div",{class:"vcx-filter-Separator",styles:{position:"absolute",opacity:"1",width:2*s+"px",height:this.options.heightElem+"px",background:"-webkit-radial-gradient(50% 50%, circle, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.3) 40%, rgba(0, 0, 0, 0) 80%)"}}).inject(t)).style.top=i+"px",a.style.left=n+"px";var o={button:a,userdata:null,callback:null,callbackUpdate:null};return this._listbutton.push(o),a},_updateSize:function(){for(var t,e,i=0;i<this._listbutton.length;i++){var n=this._listbutton[i];if(n){var s=n.button.getBoundingClientRect();this._panelInfos.top=void 0===this._panelInfos.top?s.top:Math.min(this._panelInfos.top,s.top),this._panelInfos.left=void 0===this._panelInfos.left?s.left:Math.min(this._panelInfos.left,s.left),t=void 0===t?s.right:Math.max(t,s.right),e=void 0===e?s.bottom:Math.max(e,s.bottom)}}this._panelInfos.width=t-this._panelInfos.left,this._panelInfos.height=e-this._panelInfos.top,this._panel.style.width=this._panelInfos.width+"px",this._panel.style.height=this._panelInfos.height+"px"},_calcBottomPosition:function(){if(null!==this.options.body){if(this.options.experienceBase){var t=this.options.experienceBase.getManager("VCXGUIManager"),e=t&&t.getUsableArea(),i=e&&e.getBoundingClientRect();this._panelInfos.left=i.left+(i.width-this._panelInfos.width)/2}else this._panelInfos.left=(parseInt(this.options.body.offsetWidth)-this._panelInfos.width)/2;this._panelInfos.left+=this.options.widthElem/2;var n=parseInt(this.options.frmWindow.getContent().offsetHeight);if(this.options.actionBar&&this.options.actionBar.elements&&this.options.actionBar.elements.container){var s=parseInt(this.options.actionBar.elements.container.offsetHeight);this._panelInfos.top=n-2*s}else this._panelInfos.top=n-145}},_calcStartLinearPosition:function(){this._panelInfos.left=this.options.startLinearPosition.x,this._panelInfos.top=this.options.startLinearPosition.y},_calcCenterPosition:function(){var t=0;void 0!==this.options.startAngle&&(t=Math.PI*this.options.startAngle/180);var e=Math.cos(t)*this.options.radius,i=Math.sin(t)*this.options.radius;this._panelInfos.left=this.options.center.x+e,this._panelInfos.top=this.options.center.y-i},_updatePosition:function(){switch(this.getPositioningMethod()){case s.PositioningMethod.Position:this._calcStartLinearPosition();break;case s.PositioningMethod.Center:this._calcCenterPosition();break;case s.PositioningMethod.Bottom:this._calcBottomPosition()}this._panelInfos.top-=this.options.heightElem/2,this._panelInfos.left-=this.options.widthElem/2,this._panelInfos.top-=this.options.heightOffset,this._panel.style.top=this._panelInfos.top+"px",this._panel.style.left=this._panelInfos.left+"px"},_getElementRadius:function(t){return"separator"===t.type?"bubble"===this.options.typeSeparator?1.5:3:this.options.widthElem/2},_calcDemiAngle:function(t){var e=this.options.radius;return Math.asin(t/e)},_calcElementDemiAngle:function(t){var e=this._getElementRadius(t);return this._calcDemiAngle(e)},_calcStartAngle:function(t){if(null!=this.options.startAngle){var e=Math.PI*this.options.startAngle/180;return this.options.curve||(e-=Math.PI/2),e}for(var i=0,n=this.options.lJsonElement.length,s=0;s<n;s++){i+=2*this._calcElementDemiAngle(this.options.lJsonElement[s]),s!=n-1&&(i+=t)}return e=1.5*Math.PI-i/2},_createFilter:function(){this._panel=this._createPanel();for(var t=this.options.lJsonElement.length,e=0;e<t;e++){var n=this.options.lJsonElement[e];switch(n.type){case"separator":var s=this._getElementRadius(n);this._createSeparator(this._panel,this.options.typeSeparator,0,0,s);break;case"element":var a=this._createButton(n,this._panel,0,0);a&&(a.setAttribute("data-rec-id",this.options.Idpanel+"_"+n.id),a.icon&&a.icon.setAttribute("data-rec-id",this.options.Idpanel+"_img_"+n.id));break;case"spacer":this._listbutton.push(null);break;default:console.error("element type not known")}}if(this.startMouseMoveEvent(),this.options.body){this._panel.inject(this.options.body);var o=this;this._tokenWindowResized=i.subscribe({event:"/VISU/onWindowResized"},function(t){"@onWindowResized"===t.eventType&&o.options.updateOpacity&&o._updatePosition()})}},updateLayout:function(t,e){if(this._panel){t&&(this.options.center=t),e&&(this.options.radius=e);var i=this.options.lJsonElement.length;!this.options.center&&i<=3&&(this.options.curve=!1),this.options.curve||(this.options.radius=1e6);var n=this._calcDemiAngle(10),s=0,a=0,o=this._calcStartAngle(n),l=this.options.radius,r=1;this.options.clockwise||(r=-1);s=0,a=0;for(var h=0;h<i;h++){var c=this.options.lJsonElement[h];if("spacer"!==c.type){var p=this._calcElementDemiAngle(c);(!this.options.startAngle||h>0)&&(o+=p*r);var d=Math.cos(o)*l,u=Math.sin(o)*l;0===h&&(s=d,a=-u);var f=d-s,v=-u-a,_=this._getElementRadius(c),b=v-("separator"===c.type&&"bubble"===this.options.typeSeparator?_:this.options.heightElem/2),m=f-_,g=this._listbutton[h].button;if("separator"===c.type){var y=g;if("bubble"!==this.options.typeSeparator){var E=90-180*o/Math.PI;y.style.transform="rotate("+E+"deg) rotateY(85deg)"}}b+=this.options.heightElem/2,m+=this.options.widthElem/2,g.style.top=b+"px",g.style.left=m+"px",o+=(p+n)*r}else{void 0!==c.spacerAngle?o+=Math.PI*c.spacerAngle/180*r:null!=c.spacerStartAngle&&(o=Math.PI*c.spacerStartAngle/180),void 0!==c.spacerClockwise&&(r=c.spacerClockwise?1:-1)}}this._updateSize(),this._updatePosition()}},updateCommandState:function(){for(var t=0;t<this._listbutton.length;t++){var e=this._listbutton[t];if(e){var i=e.button,n=e.callbackUpdate;if(n){var s={enable:!0,check:void 0};n.call(i,s,e.userdata),void 0!==s.enable&&this._setStyleEnabled(i,s.enable),void 0!==s.check&&this._setStyleChecked(i,s.check)}}}},startMouseMoveEvent:function(){var t=this.options.minOpacity,i=this.options.maxOpacity,n=this;this._callbackMouseMove=function(e){if(n._mouseX=e.clientX,n._mouseY=e.clientY,n.options.updateOpacity){var s=1*n._panelInfos.height,a=2*n._panelInfos.height,o=e.clientY,l=(Math.abs(n._panelInfos.top-o)*(i-t)-a+t*s)/(s-a);l=Math.max(l,t),l=Math.min(l,i),l=Math.sqrt(l),n._panel.style.opacity=l}else{var r=n.isInCircle();n.setMouseOn(r),n.updateVisibilityStyle()}},this.options.frmWindow.getContent().addEvent(e.POINTERMOVE,this._callbackMouseMove)},stopMouseMoveEvent:function(){this._callbackMouseMove&&this.options.frmWindow.getContent().removeEvent(e.POINTERMOVE,this._callbackMouseMove)},setRelatedOpacity:function(t){this._relatedOpacity=t},getRelatedOpacity:function(){return this._relatedOpacity},setState:function(t,e){t?this._state|=e:this._state&=~e},setVisible:function(t){this.setState(t,s.State.Visible)},isVisible:function(){return this._state&s.State.Visible},setSelected:function(t){this.setState(t,s.State.Selected)},isSelected:function(){return this._state&s.State.Selected},setMouseOn:function(t){this.setState(t,s.State.MouseOn)},isMouseOn:function(){return this._state&s.State.MouseOn},setInManipulation:function(t){this.setState(t,s.State.InManipulation)},isInManipulation:function(){return this._state&s.State.InManipulation},_show:function(t){this._panel.style.opacity=t?1:0},updateVisibilityStyle:function(){this._panel&&(this.isVisible()&&!this.isInManipulation()?this._panel.style.display="block":this._panel.style.display="none",this.isSelected()?this._show(this.getRelatedOpacity()&&!0):this._show(this.getRelatedOpacity()&&this.isMouseOn()))},isInCircle:function(){var t=this.options.center,e=this.options.radius,i=this.options.widthElem,n=this._mouseX-t.x,s=this._mouseY-t.y;return Math.sqrt(n*n+s*s)<=e+i}});return s.PositioningMethod={Position:1,Center:2,Bottom:3},s.State={Visible:1,Opacity:2,Selected:4,MouseOn:8,InManipulation:16},s.Separator={type:"separator"},s});