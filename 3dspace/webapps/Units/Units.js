define("DS/Units/Units",["UWA/Controls/Abstract"],function(n){"use strict";var t={usi:[{unit:"g",useSubUnits:!0},{unit:"m",useSubUnits:!0},{unit:"deg",useSubUnits:!1},{unit:"rad",useSubUnits:!1}],listOfUnits:{},usiConversion:{from:["rad","deg"],to:["deg","radian"],factor:[180/Math.PI,Math.PI/180]}},i={from:["miles","radian","degree","degree","degree"],to:["kilometer","degree","grade","quadrant","radian"],factor:[1.609344,180/Math.PI,1,1111,Math.PI/180]},e=["k","h","da","","d","c","m"],o={k:1e3,h:100,da:10,d:.1,c:.01,m:.001};function r(n,t){var i=n.charAt(n.indexOf("value")+1),e=parseFloat(n.substr(n.indexOf(i)+1));switch(i){case"*":return t*e;case"/":return t/e;default:window.console.log("Operateur non reconnu")}}t.usi.forEach(function(n){n.useSubUnits?e.forEach(function(i){var e=i+n.unit;t.listOfUnits[e]=n.unit}):t.listOfUnits[n.unit]=n.unit});var s=n.extend({defaultOptions:{unit:"",_unitIndex:null,value:null},init:function(n){this._parent(n),this.options.unit=this.options.unit.toLowerCase()},to:function(n){var i=this.options.unit,e=n,r=t.listOfUnits[i],u=t.listOfUnits[e],a=parseFloat(this.options.value,10);if(r){let n=1;if(i!==e){if(i!==r){var f=i.replace(new RegExp(r+"$"),"");0,n*=o[f]}if(r!==u){for(var d,c,l=0;l<t.usiConversion.from.length&&!c;l++)t.usiConversion.from[l]===r&&t.usiConversion.to[l]===u&&(d=l,c=!0);if(!c)throw new Error("Conversion factor not found for : "+r+"--\x3e"+u);d>=0&&(n*=t.usiConversion.factor[d])}if(u!==e){var h=e.replace(new RegExp(u+"$"),"");0,n/=o[h]}}return new s({value:parseFloat((a*n).toFixed(13)),unit:e})}throw new Error("unit√© non reconnu : "+n)},toString:function(){return this.options.value+" "+this.options.unit},_getUnitIndex:function(n){var i=t[void 0].units_names.indexOf(n),e=t[void 0].units_names_short.indexOf(n);return-1!==i?i:e},convert:function(n,t){var i=this.options.knowledge;for(var e in i.UNITS_KNOWLEDGE)n===e.description&&r(e.description,t)},addUnitRule:function(n,t,e){i.from.push(n),i.to.push(t),i.factor.push(e)}});return s});