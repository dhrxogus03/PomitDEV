define("DS/Menu/Menu",["DS/WebRecordEnabler/Adapter","DS/Core/PointerEvents","DS/Utilities/TouchUtils","DS/Utilities/Dom","DS/Utilities/Utils","DS/Controls/TooltipModel","DS/Utilities/KeyboardUtils","css!DS/Menu/assets/css/Menu.css"],function(t,e,i,n,o,s,u){"use strict";var a=document.createElement("div");a.innerHTML=['<div class="wux-menu">','<div class="wux-menu-parent">','<div class="wux-menu-parent-up wux-menu-push wux-ui-3ds wux-ui-3ds-chevron-left"></div>','<div class="wux-menu-parent-title"></div>',"</div>",'<div class="wux-menu-scroll-up wux-ui-3ds wux-ui-3ds-chevron-up wux-menu-scroll-disabled"></div>','<div class="wux-menu-scrollable">','<div class="wux-menu-container">','<div class="wux-menu-column wux-menu-column-left"></div>','<div class="wux-menu-column wux-menu-column-icon"></div>','<div class="wux-menu-column wux-menu-column-title"></div>','<div class="wux-menu-column wux-menu-column-accelerator"></div>','<div class="wux-menu-column wux-menu-column-submenu"></div>',"</div>","</div>",'<div class="wux-menu-scroll-down wux-ui-3ds wux-ui-3ds-chevron-down"></div>',"</div>",'<div class="wux-menu-cell"></div>','<div class="wux-menu-overlap"></div>','<div class="wux-menu-overlap-submenu"></div>','<div class="wux-menu-collection-item"></div>'].join("");var r=a.querySelector(".wux-menu"),c=a.querySelector(".wux-menu-cell"),d=a.querySelector(".wux-menu-overlap"),l=(a.querySelector(".wux-menu-overlap-submenu"),a.querySelector(".wux-menu-collection-item")),h={},m=[],f=-1,p=-1,w=-1,v=-1,g=50,b=void 0,x=void 0,y=-1,E=-1,_=0,I=0,S=0,M=!1;const L=2;var T=0,C=[],R=function(t,e){this.content=t,this.menu_uid=e,this.previous_uid=-1,this.next_uid=-1,this.submenu_uid=-1,this.cells=[],this.uid=C.push(this)-1},N=function(t,e,i,n,o,s){this.parent=t,this.parentRecId=i,this.parentTitle=n,this.content=o,this.config=s,this.parent_item_uid=e?e.uid:-1,this.first_uid=-1,this.focus_uid=-1,this.uid=m.push(this)-1,this.loadingSubMenuFromMenuItemUid=void 0};function O(){var e=void 0;return(t.isRecording()||t.isReplaying())&&((e=document.getElementById("menu_record"))||((e=document.createElement("div")).setAttribute("id","menu_record"),e.setAttribute("data-rec-id","menu_record"),e.style.display="none",document.body.appendChild(e),t.register(e,"DS/MenuRec/MenuRec"))),e}function D(t,e,i){if(t.tooltip)if("string"==typeof t.tooltip){let i=new s({shortHelp:t.tooltip});e.tooltipInfos=i}else"object"==typeof t.tooltip&&(e.tooltipInfos=new s(t.tooltip));else t.title&&i&&(e.tooltipInfos=new s({getAllInformationCB:()=>{if(n.computeStringWidth(t.title,12,"Arial",!1,!1)>i.offsetWidth)return{model:{shortHelp:t.title}}}}))}function U(t){var e=C[t].cells,i=e.length>1||e[0].classList.contains("wux-menu-collection-item")||"disabled"===C[t].content.state?e[0]:C[C[t].previous_uid].cells[0],n=e[e.length-1],o=i.getBoundingClientRect(),s=n.getBoundingClientRect(),u=null!==i.previousElementSibling?o.height-i.clientHeight:0,a={};return a.top=o.top-u,a.right=s.right,a.bottom=o.bottom,a.left=o.left,a.width=s.right-o.left,a.height=o.height+u,a}function A(t){return t?t.dataset&&void 0!==t.dataset.wuxMenuUid?Number(t.dataset.wuxMenuUid):A(t.parentNode):-1}function k(t){if(t>=0)return m[C[t].menu_uid]}function H(t,e){if(t<0)return;if(!e)return;const i=C[t];if(!i)return;if(i.submenu_uid>=0&&!m[i.submenu_uid])return;let n={};if(i.submenu_uid<0){let t={};const n=m[i.menu_uid];n&&(t=n.config);const o=new N(n,i,i.content.recId,i.content.title,e,t);o.buildView(),i.submenu_uid=o.uid}else m[i.submenu_uid]&&(m[i.submenu_uid].content=e,m[i.submenu_uid].buildView());n.parentItemRect=U(t),m[i.submenu_uid].show(n)}function B(t){var e=t.target.dataset.wuxMenuItemUid;if(e>=0){var i=k(e);i&&(i.setHoverState(m[C[e].menu_uid].focus_uid,!1),i.setHoverState(e,!0)),v=e}else v=-1;-1!=(p=A(t.target))&&(w=p)}function F(t){var e=t.target.dataset.wuxMenuItemUid;if(e>=0){var i=k(e);i&&i.setHoverState(e,!1)}}function q(t){t.clientX==y&&t.clientY==E||(y=t.clientX,E=t.clientY,-1==A(t.target)?void 0===x&&(x=window.setTimeout(G,g)):void 0!==x&&(window.clearTimeout(x),x=void 0),void 0!==b&&(window.clearTimeout(b),b=void 0),b=window.setTimeout(K,g))}function P(t){if(e.isTouchEvent(t)&&(B(t),t.target.style.cursor="pointer"),t.touches&&1===t.touches.length){var i=(new Date).getTime(),n=i-_,o=Math.abs(I-t.touches[0].clientX),s=Math.abs(S-t.touches[0].clientY);o<10&&s<10&&n<500&&t.preventDefault(),I=t.touches[0].clientX,S=t.touches[0].clientY,_=i}-1==A(t.target)&&h.hide()}function W(t){if(0===t.button||e.isTouchEvent(t)){var i=t.target.dataset.wuxMenuItemUid;if(i>=0){var n=C[i];if(n)if(-1!=n.submenu_uid){for(var o=f;o!=n.menu_uid&&void 0!==m[o].parent;)m[o].hide(),o=m[o].parent.uid;var s={};s.parentItemRect=U(i),m[n.submenu_uid].show(s)}else{if("CheckItem"!==n.content.type&&"RadioItem"!==n.content.type&&n.content.submenu instanceof Function&&(K(),!item.content.action))return;z(n)}}else t.target.classList.contains("wux-menu-scroll-up")?j({deltaY:-20,target:t.target}):t.target.classList.contains("wux-menu-scroll-down")?j({deltaY:20,target:t.target}):t.target.classList.contains("wux-menu-parent-up")&&-1!=f&&m[f].hide();const e=t.target.dataset.wuxDynamicMenuItemUid;if(e>=0){const i=C[e],n={};if(n.info={target:t.target},n.data={event:t,target:t.target,targetPosition:{x:t.offsetX,y:t.offsetY},windowPosition:{x:t.clientX,y:t.clientY}},i.content.submenu instanceof(async()=>{}).constructor)i.content.submenu(n).then(t=>H(e,t));else if(i.content.submenu instanceof Function){const t=i.content.submenu(n);H(e,t)}}}}function V(t){-1!=f&&(m[f].onKeyDown(t.keyCode||t.location),u.isMoveKey(t.keyCode)&&t.stopPropagation())}function Y(t){t.stopPropagation(),t.preventDefault()}function z(e){var i=O();if(t.isRecording()&&i){var n=e.content.recId;if(n)for(var s=m[e.menu_uid];s.uid>0;){if(!s.parentRecId){t.TraceManager.error('Menu item "'+s.parentTitle+"\" doesn't have a record identifier, this is not compatible with WebRecord"),n=void 0;break}n=s.parentRecId+"/"+n,s=s.parent}else t.TraceManager.error('Menu item "'+e.content.title+"\" doesn't have a record identifier, this is not compatible with WebRecord");n&&t.addCustomInteraction(i,{recVersion:1,recType:"MenuAction",recIdPath:n},"DS/MenuRec/MenuRec",{checkVisibility:!1})}let u;if(e){const t=k(e.uid);t&&t.config&&(u=t.config.doNotHideOnAction)}u||h.hide(!0),e&&e.content&&e.content.action&&(e.content.action.callback?e.content.action.callback.call(e.content.action.this,{context:e.content.action.context}):e.content.action.func&&o.attachSimpleCallback(e.content.action.module,e.content.action.func,e.content.action.argument,e.content.action.context))}function X(t){h.hide()}function j(t){for(var e=t.target;e&&e.dataset&&void 0===e.dataset.wuxMenuUid;)e=e.parentNode;if(e&&e.dataset){var i=e.dataset.wuxMenuUid;if(i>=0){var n=m[i];if(n&&n.view&&n.view.classList.contains("wux-menu-with-scroll")){var o=n.view.querySelector(".wux-menu-scroll-up"),s=n.view.querySelector(".wux-menu-scrollable"),u=n.view.querySelector(".wux-menu-scroll-down"),a=n.view.querySelector(".wux-menu-container"),r=s.getBoundingClientRect(),c=a.getBoundingClientRect();c.height,r.height;if(t.deltaY>0){var d=c.top-r.top-20;r.height-d>=c.height&&(d=r.height-c.height,u.classList.add("wux-menu-scroll-disabled")),a.style.top=d+"px",o.classList.remove("wux-menu-scroll-disabled")}else{(d=c.top-r.top+20)>=0&&(d=0,o.classList.add("wux-menu-scroll-disabled")),a.style.top=d+"px",u.classList.remove("wux-menu-scroll-disabled")}}}}}function K(){if(b=void 0,p<0){for(var t=w>=0?w:0,e=f;e!=t&&void 0!==m[e].parent;)m[e].hide(),e=m[e].parent.uid;f=t}else if(T!==L){var i=-1;v>=0&&(i=C[v].submenu_uid);for(e=f;e!=p&&e!=i&&void 0!==m[e].parent;)m[e].hide(),e=m[e].parent.uid;const t=v>=0?C[v]:void 0;if(t&&e!=i)if(t.content&&t.content.submenu instanceof Function){if("CheckItem"!==t.content.type&&"RadioItem"!==t.content.type)if(t.content.submenu instanceof(async()=>{}).constructor){m[e].loadingSubMenuFromMenuItemUid=t.uid;const n=v;t.content.submenu().then(o=>{if(!o||e<0||!m[e])return;const s=m[e].loadingSubMenuFromMenuItemUid;m[e].loadingSubMenuFromMenuItemUid=void 0,void 0!==s&&t.uid===s&&(H(n,o),i=t.submenu_uid)})}else if(t.content.submenu instanceof Function){const e=t.content.submenu();H(v,e),i=t.submenu_uid}}else if(i>=0){const t={};t.parentItemRect=U(v),m[i].show(t)}f=i>=0?i:p}}function G(){x=void 0;for(var t=w>=0?w:0,e=f;e!=t&&void 0!==m[e].parent;)m[e].hide(),e=m[e].parent.uid;f=t}return N.prototype.buildView=function(){if(this.parent&&!(this.parent instanceof N))throw new Error("Invalid parent, parent must be a Menu instance.");if(this.useTouchInput=i.getTouchMode()||this.config&&this.config.forceTouchMode,!this.content||!this.content.length)throw new Error("Invalid content, menu must contain at least one item.");this.showIcons=!1,this.showTitles=!1,this.showAccelerators=!1,this.showSubMenuSeparators=!1,this.showSubMenus=!1,this.view=r.cloneNode(!0),this.view.dataset.wuxMenuUid=this.uid;var t=O();t&&(this.view.dataset.recId="menu_"+this.uid,t.markForRecord(this.view)),this.uid>0&&T===L&&(this.view.classList.add("wux-menu-replace"),this.view.querySelector(".wux-menu-parent-title").textContent=this.parentTitle);var e=this.view.querySelector(".wux-menu-column-left"),o=this.view.querySelector(".wux-menu-column-icon"),s=this.view.querySelector(".wux-menu-column-title"),u=this.view.querySelector(".wux-menu-column-accelerator"),a=this.view.querySelector(".wux-menu-column-submenu"),h=this,m=-1;this.content.forEach(function(t,i,r){!function(t){if(!t||!t.type)throw new Error("Invalid item, 'type' property is mandatory.");if(t.icon&&t.fonticon)throw new Error("Invalid item, 'icon' and 'fonticon' properties cannot be set together.");if(t.icon&&!("string"==typeof t.icon||t.icon instanceof Object&&("string"==typeof t.icon.iconClasses||"string"==typeof t.icon.iconPath||"string"==typeof t.icon.iconName)))throw new Error("Invalid item, 'icon' property must be a string or an object compliant with an icon definition");if(t.fonticon&&(!(t.fonticon instanceof Object)||!t.fonticon.content||"string"!=typeof t.fonticon.content))throw new Error("Invalid item, 'fonticon' property must be an object with a 'content' string property.");if(t.submenu&&(!(t.submenu instanceof Array)||!t.submenu.length)&&!(t.submenu instanceof Function))throw new Error("Invalid item, 'submenu' property must be an non empty array of menu items or a function");if(t.action&&!t.action.callback&&!t.action.func)throw new Error("Invalid item, 'action' property must be defined.");if(t.action&&t.action.callback&&"function"!=typeof t.action.callback)throw new Error("Invalid item, 'action.callback' property must be a function.");if(t.action&&(t.action.func&&"string"!=typeof t.action.func||t.action.module&&"string"!=typeof t.action.module))throw new Error("Invalid item, 'action.func' and 'action.module' properties must be strings.")}(t);var f=!1,p=!1;if(t.state){var w=t.state.toLowerCase().split("|");f=w.indexOf("disabled")>=0,p=w.indexOf("selected")>=0}var v=e.appendChild(c.cloneNode(!0)),g=o.appendChild(c.cloneNode(!0)),b=s.appendChild(c.cloneNode(!0)),x=u.appendChild(c.cloneNode(!0)),y=a.appendChild(c.cloneNode(!0)),E=v.appendChild(d.cloneNode(!0)),_=[v,g,b,x,y];if("SeparatorItem"===t.type)_.forEach(function(t,e,i){t.classList.add("wux-menu-separator")});else if("TitleItem"===t.type)_.forEach(function(t,e,i){t.classList.add("wux-menu-title"),f&&t.classList.add("wux-menu-disabled")}),t.title&&(E.textContent=t.title),D(t,E,E);else if("PushItem"===t.type){var I;if(f||(S=new R(t,h.uid),-1!=m&&(S.previous_uid=m,C[m].next_uid=S.uid),m=S.uid,E.dataset.wuxMenuItemUid=S.uid,S.cells.push(v,g,b,x)),!t.submenu||t.submenu instanceof Function||!t.action?S&&S.cells.push(y):(I=new R(t,h.uid),-1!=m&&(I.previous_uid=m,C[m].next_uid=I.uid),m=I.uid,I.cells.push(y),y.dataset.wuxMenuItemUid=I.uid),-1==this.first_uid&&(S||I)&&(this.first_uid=S?S.uid:I.uid),_.forEach(function(t,e,i){t.classList.add("wux-menu-push"),f&&t.classList.add("wux-menu-disabled")}),t.icon)this.showIcons=!0,g.appendChild(n.generateIcon(t.icon));else if(t.fonticon){if(this.showIcons=!0,"&#"===t.fonticon.content.substr(0,2))g.innerHTML=t.fonticon.content;else t.fonticon.content.split(" ").forEach(function(t,e,i){g.classList.add(t)});t.fonticon.family&&(g.style.fontFamily=t.fonticon.family)}if(t.title&&(this.showTitles=!0,b.textContent=t.title),t.accelerator&&(this.showAccelerators=!0,x.textContent=t.accelerator),t.submenu)if(this.showSubMenus=!0,t.action&&(this.showSubMenuSeparators=!0,E.classList.add("wux-menu-submenu-separator"),y.classList.add("wux-menu-submenu-separator")),y.classList.add("wux-menu-submenu","wux-ui-3ds","wux-ui-3ds-chevron-right"),!(t.submenu instanceof Function))(M=new N(this,I||S,t.recId,t.title,t.submenu,this.config)).buildView(),I?I.submenu_uid=M.uid:S&&(S.submenu_uid=M.uid);D(t,E,b)}else if("CheckItem"===t.type||"RadioItem"===t.type){var S,M;if(f||(S=new R(t,h.uid),-1!=m&&(S.previous_uid=m,C[m].next_uid=S.uid),m=S.uid,S.cells.push(v,g,b,x),E.dataset.wuxMenuItemUid=S.uid,t.submenu?t.submenu instanceof Function?(S.cells.push(y),y.dataset.wuxDynamicMenuItemUid=S.uid):t.action?((I=new R(t,h.uid)).previous_uid=m,C[m].next_uid=I.uid,m=I.uid,I.cells.push(y),y.dataset.wuxMenuItemUid=I.uid):S.cells.push(y):S.cells.push(y),-1==this.first_uid&&(this.first_uid=S.uid)),_.forEach(function(e,i,n){e.classList.add("CheckItem"===t.type?"wux-menu-check":"wux-menu-radio"),f&&e.classList.add("wux-menu-disabled"),p&&e.classList.add("wux-menu-selected")}),t.icon)this.showIcons=!0,g.appendChild(n.generateIcon(t.icon));else if(t.fonticon){if(this.showIcons=!0,"&#"===t.fonticon.content.substr(0,2))g.innerHTML=t.fonticon.content;else t.fonticon.content.split(" ").forEach(function(t,e,i){g.classList.add(t)});t.fonticon.family&&(g.style.fontFamily=t.fonticon.family)}if(t.title&&(this.showTitles=!0,b.textContent=t.title),t.accelerator&&(this.showAccelerators=!0,x.textContent=t.accelerator),t.submenu)if(this.showSubMenus=!0,t.action&&(this.showSubMenuSeparators=!0,E.classList.add("wux-menu-submenu-separator"),y.classList.add("wux-menu-submenu-separator")),y.classList.add("wux-menu-submenu","wux-ui-3ds","wux-ui-3ds-chevron-right"),!(t.submenu instanceof Function))(M=new N(this,I||S,t.recId,t.title,t.submenu,this.config)).buildView(),I?I.submenu_uid=M.uid:S&&(S.submenu_uid=M.uid);D(t,E,b)}else{if("CollectionItem"!==t.type)throw new Error("Invalid item, '"+t.type+"' is an unsupported 'type' property.");_.forEach(function(t,e,i){t.classList.add("wux-menu-collection"),f&&t.classList.add("wux-menu-disabled")}),t.items&&t.items.forEach(function(t,e,i){if(t.icon&&t.fonticon)throw new Error("Invalid item, 'icon' and 'fonticon' properties cannot be set together.");if(t.icon&&"string"!=typeof t.icon)throw new Error("Invalid item, 'icon' property must be a string.");if(t.fonticon&&(!(t.fonticon instanceof Object)||!t.fonticon.content||"string"!=typeof t.fonticon.content))throw new Error("Invalid item, 'fonticon' property must be an object with a 'content' string property.");if(t.action&&"function"!=typeof t.action.callback)throw new Error("Invalid item, 'action.callback' property must be a function.");var n=!1;t.state&&(n=t.state.toLowerCase().split("|").indexOf("disabled")>=0);var o,s,u=l.cloneNode(!0);if((f||n)&&u.classList.add("wux-menu-disabled"),t.icon)u.style.backgroundImage="url("===(o=t.icon).substr(0,4)?o:'url("'+o+'")';else if(t.fonticon){if("&#"===t.fonticon.content.substr(0,2))u.innerHTML=t.fonticon.content;else t.fonticon.content.split(" ").forEach(function(t,e,i){u.classList.add(t)});t.fonticon.family&&(u.style.fontFamily=t.fonticon.family)}D(t,u),f||n||(s=new R(t,h.uid),-1!=m&&(s.previous_uid=m,C[m].next_uid=s.uid),m=s.uid,s.cells.push(u),u.dataset.wuxMenuItemUid=s.uid,-1==this.first_uid&&(this.first_uid=s.uid)),this.appendChild(u)},E)}},this),-1!=this.first_uid&&(C[this.first_uid].previous_uid=m,C[m].next_uid=this.first_uid),this.useTouchInput?this.view.classList.add("wux-menu-touch"):this.view.classList.add("wux-menu-mouse"),this.showIcons||o.parentNode.removeChild(o),this.showTitles||s.parentNode.removeChild(s),this.showAccelerators||u.parentNode.removeChild(u),this.showSubMenus||a.parentNode.removeChild(a),this.showIcons||s.classList.add("wux-menu-column-left-margin"),(this.showAccelerators||!this.showSubMenus||this.showSubMenuSeparators)&&(this.showTitles?s.classList.add("wux-menu-column-right-margin"):o.classList.add("wux-menu-column-right-margin")),!this.showAccelerators||this.showSubMenus&&!this.showSubMenuSeparators||u.classList.add("wux-menu-column-right-margin")},N.prototype.updateSize=function(){const t=this.config&&this.config.targetDocument||document;var e=!0;if(this.view){var i=this.view.getBoundingClientRect().width;if(i<160||i>320){var n=this.view.querySelector(".wux-menu-column-title");if(n){var o=n.getBoundingClientRect().width;o+=i>320?320-i:160-i,n.style.width=o+"px",i=this.view.getBoundingClientRect().width}}for(var s=this.view.querySelectorAll(".wux-menu-overlap"),u=0;u<s.length;u++)if(s[u].classList.contains("wux-menu-submenu-separator")){var a=this.view.querySelector(".wux-menu-column-submenu"),r=a?a.getBoundingClientRect().width:0;s[u].style.width=i-r+"px"}else s[u].style.width=i+"px";var c=this.view.querySelectorAll(".wux-menu-column"),d=this.view.querySelectorAll(".wux-menu-collection .wux-menu-overlap");for(u=0;u<d.length;u++)for(var l=Array.prototype.indexOf.call(d[u].parentNode.parentNode.children,d[u].parentNode),h=d[u].getBoundingClientRect().height,m=0;m<c.length;m++)c[m].children[l].style.height=h+"px";var f=t.documentElement.clientWidth;this.config&&this.config.display&&(this.config.display.paddingLeft&&(f-=this.config.display.paddingLeft),this.config.display.paddingRight&&(f-=this.config.display.paddingRight)),i+320>f&&(e=!1)}return e},N.prototype.setHoverState=function(t,e){if(t>=0&&t<C.length){e&&(this.focus_uid=t,this.parent&&this.parent_item_uid>=0&&this.parent.setHoverState(this.parent_item_uid,!0));const i=C[t].cells;for(const t of i)e?t.classList.add("wux-menu-hover"):t.classList.remove("wux-menu-hover")}e||this.focus_uid!=t||(this.focus_uid=-1)},N.prototype.makeItemVisible=function(t){if(this.view&&this.view.classList.contains("wux-menu-with-scroll")){var e=U(t),i=this.view.querySelector(".wux-menu-scroll-up"),n=this.view.querySelector(".wux-menu-scrollable"),o=this.view.querySelector(".wux-menu-scroll-down"),s=this.view.querySelector(".wux-menu-container"),u=n.getBoundingClientRect(),a=s.getBoundingClientRect();a.height,u.height;if(e.top<u.top)(r=a.top-e.top)>=0&&(r=0,i.classList.add("wux-menu-scroll-disabled")),s.style.top=r+"px",o.classList.remove("wux-menu-scroll-disabled");else if(e.bottom>u.bottom){var r=a.top-u.top-(e.bottom-u.bottom);u.height-r>=a.height&&(r=u.height-a.height,o.classList.add("wux-menu-scroll-disabled")),s.style.top=r+"px",i.classList.remove("wux-menu-scroll-disabled")}}},N.prototype.onKeyDown=function(t){if(-1!=this.first_uid){var e=this.focus_uid,i=this.focus_uid,n=!1;if(13==t){if(-1!=this.focus_uid)if(-1!=(o=C[this.focus_uid].submenu_uid))(s={}).parentItemRect=U(this.focus_uid),m[o].show(s),n=!0;else z(C[this.focus_uid])}else if(27==t)this.parent?(this.hide(),f=this.parent.uid):h.hide();else if(37==t)0==f?n=!0:(this.hide(),f=this.parent.uid);else if(38==t)(i=-1==this.focus_uid?C[this.first_uid].previous_uid:C[this.focus_uid].previous_uid)===e&&(n=!0);else if(39==t){if(-1!=this.focus_uid){var o,s;if(-1!=(o=C[this.focus_uid].submenu_uid))(s={}).parentItemRect=U(this.focus_uid),m[o].show(s);n=!0}}else 40==t&&(i=-1==this.focus_uid?this.first_uid:C[this.focus_uid].next_uid)===e&&(n=!0);n||this.setHoverState(e,!1),i!==e&&(this.setHoverState(i,!0),this.makeItemVisible(i))}},N.prototype.show=function(t){let e;if(this.view){const s=t&&t.targetDocument||document,u=this.view,a=o.getElementTranslation(s.body),r=function(t,e){a.length>=2&&(t-=a[0],e-=a[1]),u.style.left=t+"px",u.style.top=e+"px"};let c=0,d=0;const l=s.documentElement.clientWidth,m=s.documentElement.clientHeight;let p=!1;if(this.uid>0&&T===L){p=!0;const t=this.parent.view.getBoundingClientRect();c=t.left,d=t.top}else t&&t.position&&(c=t.position.x,d=t.position.y),t&&t.parentItemRect&&!M&&(c=t.parentItemRect.right,d=t.parentItemRect.top);if(r(c,d),s.body.appendChild(this.view),!this.updateSize()&&0===T&&0===this.uid){T=L;const t=this.config||{};t.submenu="replace",h.show(this.content,t,h._callbacks),e=!0}let v=this.view.getBoundingClientRect();!p&&t&&t.parentItemRect&&M&&(r(c=t.parentItemRect.left-v.width,d=t.parentItemRect.top),v=this.view.getBoundingClientRect());let g=0,b=0,x=l,y=m;t&&t.display&&(t.display.paddingLeft&&(g=t.display.paddingLeft),t.display.paddingTop&&(b=t.display.paddingTop),t.display.paddingRight&&(x-=t.display.paddingRight),t.display.paddingBottom&&(y-=t.display.paddingBottom));const E=y-b;if(!p&&t&&t.layout)for(var i=t.layout.toLowerCase().split("|"),n=0;n<i.length&&("topleft"===i[n]?r(c,d):"topright"===i[n]?r(c-v.width,d):"bottomleft"===i[n]?r(c,d-v.height):"bottomright"===i[n]&&r(c-v.width,d-v.height),!((v=this.view.getBoundingClientRect()).left>=g&&v.right<x&&v.top>=b&&v.bottom<y));n++);if(v.left<g||v.right>=x||v.top<b||v.bottom>=y){let e=v.left,i=v.top;v.right>x&&(T!==L&&t&&t.parentItemRect&&!M&&t.parentItemRect.left-v.width>=g?(e=t.parentItemRect.left-v.width,i=t.parentItemRect.top,M=!0):e=x-v.width),v.bottom>y&&(i=y-v.height),e<g&&(e=g),i<b&&(i=b),r(e,i),v.height>y-i&&(this.view.style.height=E+"px",this.view.classList.add("wux-menu-with-scroll"))}f=this.uid,p&&(this.parent.view.style.display="none",w=this.uid)}return e},N.prototype.hide=function(){if(this.view&&this.view.parentNode&&(this.view.parentNode.removeChild(this.view),this.setHoverState(-1,!1),this.parent&&"none"===this.parent.view.style.display&&(this.parent.view.style.display="",f=this.parent.uid,w=this.parent.uid,this.parent.focus_uid>=0))){var t=U(this.parent.focus_uid);(y<t.left||y>t.right||E<t.top||E>t.bottom)&&this.parent.setHoverState(this.parent.focus_uid,!1)}},h.show=function(t,i,o){const s=i&&i.targetDocument||document;h.hide(),h._callbacks=o,T=0,i&&"replace"===i.submenu?T=L:i&&"outside"===i.submenu&&(T=1);var u=new N(void 0,void 0,void 0,void 0,t,i);if(u.buildView(),!u.show(i)){var a=O();return a&&m.length>0&&(a.menus=m[0].content),n.addEventOnElement(this,s,"mouseover",B,!0),n.addEventOnElement(this,s,e.POINTEROUT,F),n.addEventOnElement(this,s,e.POINTERMOVE,q),n.addEventOnElement(this,s,e.POINTERDOWN,P),n.addEventOnElement(this,s,e.POINTERHIT,W),n.addEventOnElement(this,s,"keydown",V,!0),n.addEventOnElement(this,s,"resize",X,!1),n.addEventOnElement(this,s,"contextmenu",Y,!1),n.addEventOnElement(this,s,"wheel",j,!0),h._callbacks&&h._callbacks.onShow&&h._callbacks.onShow(),this._onShow(),m&&m.length&&(u._resizeAndScrollEvtsHandler=n.addScrollAndResizeListener(m[0],m[0].view,this.hide.bind(this))),u.view.getBoundingClientRect()}},h.hide=function(i){if(m&&m.length>0){const a=m[0]&&m[0].config&&m[0].config.targetDocument||document;m[0]&&m[0]._resizeAndScrollEvtsHandler&&(n.removeScrollAndResizeListener(m[0]._resizeAndScrollEvtsHandler),delete m[0]._resizeAndScrollEvtsHandler);var o=O();t.isRecording()&&o&&t.addCustomInteraction(o,{recVersion:1,recType:"MenuHide"},"DS/MenuRec/MenuRec",{checkVisibility:!1}),n.removeEventOnElement(this,a,"mouseover",B,!0),n.removeEventOnElement(this,a,e.POINTEROUT,F),n.removeEventOnElement(this,a,e.POINTERMOVE,q),n.removeEventOnElement(this,a,e.POINTERDOWN,P),n.removeEventOnElement(this,a,e.POINTERHIT,W),n.removeEventOnElement(this,a,"keydown",V,!0),n.removeEventOnElement(this,a,"resize",X,!1),n.removeEventOnElement(this,a,"contextmenu",Y,!1),n.removeEventOnElement(this,a,"wheel",j,!0),void 0!==b&&(window.clearTimeout(b),b=void 0),void 0!==x&&(window.clearTimeout(x),x=void 0);for(var s=0;s<m.length;s++)if(m[s].view){var u=m[s].view.parentNode;u&&u.removeChild(m[s].view)}m=[],f=-1,p=-1,w=-1,v=-1,C=[],M=!1,h._callbacks&&h._callbacks.onHide&&h._callbacks.onHide(i)}},h._onShow=function(){},h.updateModel=function(t){for(const e of t)for(const t of C)if(t&&t.content&&"CheckItem"===t.content.type&&e.title===t.content.title){t.content.state=e.state;for(const e of t.cells){h.getItemState(t.content)&h.MENU_STATE_SELECTED?e.classList.add("wux-menu-selected"):e.classList.remove("wux-menu-selected")}}},h.MENU_STATE_NONE=0,h.MENU_STATE_SELECTED=1,h.MENU_STATE_DISABLED=2,h.translateStateStringToBitField=(t=>{let e=h.MENU_STATE_NONE;const i=t.toLowerCase().split("|");return-1===i.indexOf("unselected")&&i.indexOf("selected")>=0&&(e|=h.MENU_STATE_SELECTED),i.indexOf("disabled")>=0&&(e|=h.MENU_STATE_DISABLED),e}),h.translateStateBitFieldToString=(t=>{let e=!1,i=!1;return t&h.MENU_STATE_SELECTED&&(e=!0),t&h.MENU_STATE_DISABLED&&(i=!0),`${e?"selected":""}${e&&i?"|":""}${i?"disabled":""}`}),h.getItemState=(t=>{let e=h.MENU_STATE_NONE;return t&&void 0!==t.state&&null!==t.state&&(e=h.translateStateStringToBitField(t.state)),e}),h.setItemState=((t,e)=>{t&&null!=e&&(t.state=h.translateStateBitFieldToString(e))}),h.getMenuItemUidFromNode=(t=>t&&t.dataset?void 0!==t.dataset.wuxDynamicMenuItemUid&&null!==t.dataset.wuxDynamicMenuItemUid?t.dataset.wuxDynamicMenuItemUid:void 0!==t.dataset.wuxMenuItemUid&&null!==t.dataset.wuxMenuItemUid?t.dataset.wuxMenuItemUid:void 0:-1),h.getMenuDescriptionFromUid=(t=>{if(C[t])return C[t].content}),h}),define("DS/Menu/ContextualMenu",["DS/Menu/Menu","DS/WebRecordEnabler/Adapter","UWA/Class/Promise","DS/Core/PointerEvents","DS/Utilities/Utils","DS/Utilities/Dom"],function(t,e,i,n,o,s){"use strict";var u=void 0,a="mouse",r="auto";function c(t){n.isTouchEvent(t)&&d(t)}function d(n){t.hide();for(var s=[],c=n.target;c;){if(c["wux-data-contextual"])for(var d=c.getBoundingClientRect?c.getBoundingClientRect():{left:0,top:0},l=n.pageX-d.left,h=n.pageY-d.top,m=c["wux-data-contextual"],f=0;f<m.length;f++){var p=m[f].params.callback.call(m[f].params.this,{context:m[f].params.context,info:{position:{x:l,y:h},target:n.target},data:{event:n,listener:c,listenerPosition:{x:l,y:h},target:n.target,targetPosition:{x:n.offsetX,y:n.offsetY},windowPosition:{x:n.clientX,y:n.clientY}}});p&&p instanceof Promise?s.push(p):p&&p.length>0&&s.push(i.resolve(p))}c=c===window?void 0:c.parentNode?c.parentNode:window}if((s.length>0||!n.target||"input"!==n.target.tagName.toLowerCase()&&"textarea"!==n.target.tagName.toLowerCase()&&!n.target.isContentEditable)&&n.preventDefault(),s&&s.length>0){n.actionPerformed=!0;var w=e.WaitManager.addWaitCondition(2e4,"Wait context menu to be displayed");i.allSettled(s).then(function(i){var s=[],c=0;if(i&&i.length>0)for(var d=0;d<i.length;d++)i[d].value&&i[d].value.length>0&&(s.length>c&&(s.push({type:"SeparatorItem"}),c=s.length),s=s.concat(i[d].value));if(s&&s.length>0){const e=o.getDocumentOwner(n.target);t.show(s,{display:u,input:a,position:{x:n.pageX,y:n.pageY},submenu:r,targetDocument:e},{onShow:()=>{n.target&&n.target.setAttributeNode(e.createAttribute("is-displaying-menu"))},onHide:t=>{if(n.target){n.target.removeAttribute("is-displaying-menu");for(var e=n.target["wux-data-contextual"],i=0;Array.isArray(e)&&i<e.length;i++)e[i]&&e[i].params&&e[i].params.onHideCB&&e[i].params&&e[i].params.onHideCB(t)}}})}e.WaitManager.removeWaitCondition(w)})}return!1}var l={setGlobalConfig:function(t){if(!t)throw new Error("Invalid configuration.");if(t.display&&(u=t.display),t.input){if("mouse"!==t.input&&"touch"!==t.input)throw new Error("Invalid input configuration, expected values are 'mouse' or 'touch'.");a=t.input}if(t.submenu){if("replace"!==t.submenu&&"outside"!==t.submenu&&"auto"!==t.submenu)throw new Error("Invalid submenu configuration, expected values are 'replace', 'outside' or 'auto'.");r=t.submenu}},addEventListener:function(t,e){if(!t||!e)throw new Error("Invalid parameters.");if(t!==window&&!s.isInstanceOfHTMLElementOrElement(t,"HTMLElement"))throw new Error("Invalid parameters, 'target' must be the window or an HTMLElement.");if(!(e.callback&&e.callback instanceof Function))throw new Error("Invalid parameters, 'params.callback' must be a function.");var i=t["wux-data-contextual"];return i||((i=[]).next=0,t["wux-data-contextual"]=i,e&&e.noDOMEvents||(t.addEventListener("contextmenu",d),t.addEventListener(n.LONGHOLD,c))),i.push({uid:i.next,params:e}),i.next++}};return l.removeEventListener=function(t,e){if(!t||(i=e,isNaN(parseFloat(i))||!isFinite(i)))throw new Error("Invalid parameters.");var i,o=t["wux-data-contextual"];if(!o)throw new Error("Invalid target.");for(var s=0;s<o.length&&o[s].uid!=e;)s++;if(s>=o.length)throw new Error("Invalid uid.");o.length>1?(o.splice(s,1),o.next=o[o.length-1].uid+1):(t.removeEventListener("contextmenu",d),t.removeEventListener(n.LONGHOLD,c),delete t["wux-data-contextual"])},l.buildAndDisplayContextualMenu=((t,e)=>{const i=new MouseEvent("contextmenu",e);Object.defineProperty(i,"target",{writable:!1,value:t}),d(i)}),l});