define("DS/DELWeb3DViewerV2/CGRHelper",["DS/DEL3DViewer/CGRHelper"],function(e){"use strict";return e}),define("DS/DELWeb3DViewerV2/ColoringBehavior",["DS/DEL3DViewer/ColoringBehavior"],function(e){"use strict";return e}),define("DS/DELWeb3DViewerV2/NodeUtil",["DS/DEL3DViewer/NodeUtil"],function(e){"use strict";return e}),define("DS/DELWeb3DViewerV2/HideShowBehavior",["DS/DEL3DViewer/HideShowBehavior"],function(e){"use strict";return e}),define("DS/DELWeb3DViewerV2/ToolBar",["DS/DEL3DViewer/ToolBar"],function(e){"use strict";return e}),define("DS/DELWeb3DViewerV2/DELOrientationViewer",["DS/DEL3DViewer/DELOrientationViewer"],function(e){"use strict";return e}),define("DS/DELWeb3DViewerV2/ToggleBehavior",["UWA/Core","DS/Selection/CSOManager","DS/Selection/HSOManager","DS/Selection/PSOManager","DS/DELWebViewerPerformaceLogger/PerformaceLogger","DS/DELWeb3DViewerV2/NodeUtil"],function(e,t,r,n,i,o){"use strict";return function(i,a){var s,u="select",l="unSelect",c="highlight",g="unhighlight",d="preHighlight",h="unPreHighlight",f=a.getOption("logger"),p=a.getOption("eventCollection").getViewerCtrlEventHnd(),w=function(t){var r=[],n=i.getPathsFromInput(t);return e.is(n,"array")&&n.forEach(function(e){var t=i.getPathElement(e);t?r.push({pathElement:t}):f.debug("Unable to get the pathElement for the path ",e)}),r},V=function(o,a){var s;if(e.is(o,"array")&&o.length>0)switch(s=function(t){var r=[];return t.forEach(function(t){var n=i.getPathWithType(t.pathElement?t.pathElement:t);n&&e.is(n.paths,"array")&&n.paths.length>0&&r.push(n)}),r}(o),a){case u:t.options.fromAPI||p.publish(p.events.onSelectNode,s);break;case l:t.options.fromAPI||p.publish(p.events.onUnSelectNode,s);break;case c:r.options.fromAPI||p.publish(p.events.onHighlightNode,s);break;case g:r.options.fromAPI||p.publish(p.events.onUnHighlightNode,s);break;case d:n.options.fromAPI||p.publish(p.events.onPreHighlightNode,s);break;case h:n.options.fromAPI||p.publish(p.events.onUnPreHighlightNode,s)}},E=[],P=[],v=[],D=function(t,r){return new e.Promise(function(n,i){var o=!(!r||!e.is(r.clear,"boolean"))&&r.clear,s=r&&e.is(r.highlight,"boolean")?r.highlight:null,u=r.pathElements?r.pathElements:w(r);null!==s?(t.options.fromAPI=!0,o&&s&&t.empty(),e.is(u,"array")&&u.length>0&&(s?t.add(u):t.remove(u)),delete t.options.fromAPI,n()):i(a.getNLSValue("Error.InvalidInput.Message"))})};return f.info("ToggleBehavior initialized"),P.push(t.onPostAdd(function(e){V(e,u)})),P.push(t.onPostRemove(function(e){V(e,l)})),E.push(r.onPostAdd(function(e){V(e,c)})),E.push(r.onPostRemove(function(e){V(e,g)})),v.push(n.onPostAdd(function(e){V(e,d)})),v.push(n.onPostRemove(function(e){V(e,h)})),{removeRoots:function(t){var r,n,s=[];return t=t||{},f.info("ToggleBehavior::removeRoots API invoked with parameters : %o",t),new e.Promise(function(u,l){if(e.is(t.pids,"array")){if(0===(s=t.pids.slice()).length&&(r=i.getRootBag(),e.is(r)&&(r.getChildren().forEach(function(e){s.push(o.getNodeID(e))}),0===s.length)))return void u();n=i.getEnoPadController().getModelEvents().subscribe({event:"onEndRootRemoved"},function(t){e.equals(t.ids,s)&&(p.publish(p.events.onRemoveRootsComplete,t),i.getEnoPadController().getModelEvents().unsubscribe(n),u())}),i.getEnoPadviewer().removeRoots({pids:s})}else f.error("ToggleBehavior::removeRoots API input is invalid"),l(a.getNLSValue("Error.InvalidInput.Message"))})},selectNode:function(n){return new e.Promise(function(i,o){var s=!(!n||!e.is(n.clear,"boolean"))&&n.clear,u=n&&e.is(n.select,"boolean")?n.select:null,l=n.pathElements?n.pathElements:w(n);null!==u?(t.options.fromAPI=!0,s&&u&&(t.empty(),r.empty()),e.is(l,"array")&&l.length>0&&(u?t.add(l):t.remove(l),u?r.add(l):r.remove(l)),delete t.options.fromAPI,i()):o(a.getNLSValue("Error.InvalidInput.Message"))})},highlightNode:function(e){return D(r,e).then(function(){p.publish(p.events.onHighlightComplete,e)})},preHighlightNode:function(e){return D(n,e)},destroy:function(){s&&(i.getEnoPadviewer().unsubscribe(s),s=null),E.forEach(e=>{r.unsubscribe(e)}),v.forEach(e=>{n.unsubscribe(e)}),P.forEach(e=>{t.unsubscribe(e)}),v=[],E=[],P=[],f=p=V=null}}}}),define("DS/DELWeb3DViewerV2/BaseViewer",["UWA/Core","DS/Visualization/ThreeJS_DS","DS/Mesh/MeshUtils","DS/Visualization/Node3D","DS/SceneGraphNodes/FixedSizeArrowNode","DS/Visualization/LoaderUtils","DS/DELWeb3DViewerV2/NodeUtil","DS/DELWeb3DViewerV2/CGRHelper"],function(e,t,r,n,i,o,a,s){"use strict";return function(u,l){const c=l.getOption("mappingKeys");var g,d,h=l.getOption("logger"),f=new e.Element("div",{id:"delmia_3d_viewer",class:"delmia-3d-viewer"});try{g=u}catch(e){h.error("DELPAD3DViewer initialization failed due to : %o",e)}return d={getViewerElement:function(){return f},render:function(){return g.render().inject(f)},getEnoPadController:function(){return g.getController()},getEnoPadviewer:function(){return g},getEnoPadModelEvents:function(){return this.getEnoPadController().getModelEvents()},getRootBag:function(){var e,t;return g&&(t=g.getRootBagPath())&&(e=t.getLastElement()),e},getNode:function(e){return this.getEnoPadController().getNode(e)},getWebGLViewer:function(){return g.getViewer()},reframe:function(e){return g.reframe(e)},isRegistered:function(t){var r,n,i=!1;if(e.is(t,"array")&&t.length>=1)for(n=t.length,i=!0,r=0;r<n;r=0===r?1:r+2)if(!this.getEnoPadController().isRegistered(t[r])){i=!1;break}return i},getPathElement:function(t){var r;return h.debug("BaseViewer::getPathElement API is invoked with parameters : %o",t),e.is(t,"array")&&t.length>=1&&(r=g.unstreamPath(t)),r},getPath:function(e){var t=[];return e&&(t=g.streamPath(e)),t},getPathWithType:function(e){var t=[],r={};return e&&g.streamPathWithType(e,t,r),{paths:t,attributes:r}},search:function(e){g.search(e)},refresh:function(){g.refresh()},destroy:function(){[g,f].forEach(e=>{e&&e.destroy()}),h=g=f=null},createNode:function(e){var r,i,o,a,s=new n(e.id);return s.setModelIdentification(e.id),s.setUserData({type:e.type,custom:!0}),s.setMatrix((r=e.matrix,a=null,r&&12===(i=r.split(",")).length&&(o=[parseFloat(i[0]),parseFloat(i[3]),parseFloat(i[6]),parseFloat(i[1]),parseFloat(i[4]),parseFloat(i[7]),parseFloat(i[2]),parseFloat(i[5]),parseFloat(i[8])],a=(new t.Matrix4).setRotation(o).setPosition(new t.Vector3(parseFloat(i[9]),parseFloat(i[10]),parseFloat(i[11])))),a)),s.setNodeUsage(e.usage),s},createArrowNode:function(t){return t.color&&e.is(t.color.R,"number")&&e.is(t.color.G,"number")&&e.is(t.color.B,"number")&&(t.color=new r.Color(t.color.R,t.color.G,t.color.B)),new i(t)},addVisualizationToNode:function(e,t,r){e&&t&&o.processData([e],s.decodeRep(t,{processText:!1,withBlankingRep:!0}),null,!0,r)},getRoots:function(){return d.getEnoPadviewer().getRoots()},getNodeFromPath:function(e){let t=d.getRoots().find(t=>t.getModelIdentification()===e[0]);if(t)for(let r=1;r<e.length;r++)t&&(t=t.getChildren().find(t=>t.getModelIdentification()===e[r]));return t},getPathsFromInput:function(e){var t=[];return e&&(t=e.path&&e.path.length>0?Array.isArray(e.path[0])?e.path:[e.path]:e.id?a.getPathsFromNode(d.getNode({id:e.id})):[]),t},createRefIterator:function(e){return d.getEnoPadController().createReferenceIterator(e)},getIdPathesLeadingToReference:function(e){return d.getEnoPadController().getIdPathesLeadingToReference(e)},getShapePaths:function(e){let t=e.length-1,r=d.createRefIterator(e[t]),n=[];return a.collect3DShapePaths(r,e.slice(0,t),n),n},getType:function(e){return(d.getEnoPadController().getUserData({id:e})||{}).type},getPathElementV2:function(t){let r=g.getRootBagPath();if(e.is(t,"array"))for(let e=0;e<t.length;e++){let n=d.getNodeFromPath(t.slice(0,e+1));if(!n){h.debug(`Unable to find the node for the id ${t[e]}`),h.warn(`Unable to find the path element for path ${t}`),r=null;break}r.addElement(n)}return r},setPickability:function(e){!function(e){return Object.values(c.PICKABILITY).some(t=>t===e)}(e)?h.error("Invalid pickability value, please check MAPPINGKEYS.PICKABILITY"):l.setOption(c.OPTIONS.CURRENTPICKABILITY,e===c.PICKABILITY.DEFAULT?l.getOption(c.OPTIONS.DEFAULTPICKABILITY):e)},getPickability:function(){let e=l.getOption(c.OPTIONS.CURRENTPICKABILITY);return e||(e=l.getOption(c.OPTIONS.DEFAULTPICKABILITY)),e},getPathsFromInputV2:function(t){var r=[];if(t)if(t.path&&t.path.length>0)r=Array.isArray(t.path[0])?t.path:[t.path];else if(t.id){let n=d.getIdPathesLeadingToReference(t.id);e.is(n,"array")&&(r=n.map(e=>e.ids))}return r},getWidget:function(){let e;return e=g.getWidget?g.getWidget():widget}}}}),define("DS/DELWeb3DViewerV2/Viewer",["UWA/Core","DS/ApplicationFrame/CommandsManager","DS/DELWeb3DViewerV2/BaseViewer","DS/DELWeb3DViewerV2/ToggleBehavior","DS/DELWeb3DViewerV2/ColoringBehavior","DS/DELWeb3DViewerV2/HideShowBehavior","DS/DELWeb3DViewerV2/ToolBar","DS/DELWebUiComponent/ControlFactory","DS/DELWebViewerUtils/DELWebViewerSettingsMgt","css!DS/DELWeb3DViewerV2/assets/css/DEL3DViewer.css"],function(e,t,r,n,i,o,a,s,u){"use strict";return function(t,l){var c,g,d,h,f,p,w,V,E=l.getOption("logger"),P=l.getOption("eventCollection").getViewerCtrlEventHnd();try{c=new r(t,l),E.debug("BaseViewer initialized with options : %o",d)}catch(e){throw E.error("BaseViewer Initialization failed due to : %o",e),new Error("BaseViewer Initialization failed due to : %o",e)}if(e.is(l.getOption("sharedSettings"),"array")&&(u.addSharedSettings(l.getOption("sharedSettings")),widget.addEvent("endEdit",u.updateWidgetPreferences()),u.updateWidgetPreferences()()),l.getOption("quickToolBar")&&(f=new a(l,c.getViewerElement())),w&&w.orientationViewer&&w.orientationViewer.enable&&require(["DS/DELWeb3DViewerV2/DELOrientationViewer"],function(e){c&&(h=new e(c,l))}),p=function(t){return new e.Promise(function(r,n){e.is(t,"boolean")?e.is(h)?(h.setNodeVisibility(t),r()):n(l.getNLSValue("Error.OVNotInitialized.Message")):n(l.getNLSValue("Error.InvalidInput.Message"))})},V=c.getWebGLViewer().currentViewpoint.onMove(function(){P.publish(P.events.onViewPointMove,this.orientation)}),e.is(h))try{h.loadModel()}catch(e){E.error(e)}return g=new i(c,l),{baseViewer:c,displayOrientationViewer:p,toolbar:f,toggleBehavior:new n(c,l),coloringBehavior:g,hideShowBehavior:new o(c,g,l),controlFactory:new s(c),destroy:function(){V&&c&&c.getWebGLViewer().currentViewpoint.unsubscribe(V),this.coloringBehavior.destroy(),this.toggleBehavior.destroy(),this.controlFactory.destroy(),[h,c].forEach(e=>{e&&e.destroy()}),h=c=E=d=P=MAPPINGKEYS=_propertiesFacet=null,w=null,u.dispose()}}}}),define("DS/DELWeb3DViewerV2/ViewerInterface",["UWA/Core","DS/DELWeb3DViewerV2/Viewer"],function(e,t){"use strict";return function(e,r){var n,i=r.getOption("logger"),o=r.getOption("mappingKeys");try{n=new t(e,r)}catch(e){i.error("Viewer initialization failed due to : %o",e)}return{getViewerElement:function(){return n.baseViewer.getViewerElement()},addRoots:function(e,t,r){return n.baseViewer.getEnoPadviewer().addRoots(e,t,r)},selectNode:function(e){return n.toggleBehavior.selectNode(e)},highlightNode:function(e){return n.toggleBehavior.highlightNode(e)},preHighlightNode:function(e){return n.toggleBehavior.preHighlightNode(e)},removeRoots:function(e){return n.toggleBehavior.removeRoots(e)},setGraphicProperties:function(e,t){return n.coloringBehavior.setGraphicProperties(e,t)},removeGraphicProperties:function(e,t){return n.coloringBehavior.removeGraphicProperties(e,t)},resetGraphicProperties:function(){Object.values(o.SCENEGRAPHKEYS).forEach(function(e){n.coloringBehavior.removeSceneGraphOverrideSet(e)})},removeSceneGraphOverrideSet:function(e){n.coloringBehavior.removeSceneGraphOverrideSet(e)},render:function(){n.baseViewer.getWebGLViewer().render()},getGraphicPropertiesEnum:function(){return n.coloringBehavior.getGraphicPropertiesEnum()},getHideShowBehavior:function(){return n.hideShowBehavior},deleteOverrides:function(e){n.coloringBehavior.deleteOverrides(e)},getContext:function(){return n.baseViewer.getEnoPadviewer()},setAutomaticReframePolicy:function(e){this.getContext().setAutomaticReframePolicy(e)},getFrameWindow:function(){return n.baseViewer.getEnoPadviewer().getFrameWindow()},resetCameraOrientation:function(){n.baseViewer.getEnoPadviewer().getFrameWindow().getViewpoint().resetCameraOrientation()},isRegistered:function(e){return n.baseViewer.isRegistered(e)},getComponentPromise:function(e,t){return n.controlFactory.getComponentPromise(e,t)},setReframe:function(e){return n.coloringBehavior.setReframe(e)},setViewPoint:function(e){return n.coloringBehavior.setViewPoint(e)},getViewPoint:function(){return n.coloringBehavior.getViewPoint()},getBoundingBox:function(e){return n.coloringBehavior.getBoundingBox(e)},displayOrientationViewer:function(e){return n.displayOrientationViewer(e)},subscribe:function(e,t){return n.baseViewer.getEnoPadModelEvents().subscribe({event:e},t)},unSubscribe:function(e){n.baseViewer.getEnoPadModelEvents().unsubscribe(e)},getMode:function(){var e=r.getOption(o.OPTIONS.DEFAULTVIEWERMODE)?r.getOption(o.OPTIONS.DEFAULTVIEWERMODE):o.VIWERDEFAULTMODE;return r.getOption(o.OPTIONS.VIEWERMODE)?r.getOption(o.OPTIONS.VIEWERMODE):e},search:function(e){n.baseViewer.search(e)},getToolBar:function(){return n.toolbar},getRoots:function(){return n.baseViewer.getRoots()},refresh:function(){this.resetGraphicProperties(),n.baseViewer.refresh()},destroy:function(){n&&n.destroy(),n=i=o=null},createNode:function(e){return n.baseViewer.createNode(e)},addVisualizationToNode:function(e,t,r){n.baseViewer.addVisualizationToNode(e,t,r)},createArrowNode:function(e){return n.baseViewer.createArrowNode(e)},getNodeFromPath:function(e){return n.baseViewer.getNodeFromPath(e)},getNode:function(e){return n.baseViewer.getNode(e)},getPathElement:function(e){return n.baseViewer.getPathElement(e)},getRIRPath:function(e){return n.baseViewer.getPath(e)},getShapePaths:function(e){return n.baseViewer.getShapePaths(e)},getPathElementV2:function(e){return n.baseViewer.getPathElementV2(e)},getFilterSpec:function(e){return n.baseViewer.getEnoPadController().getBIProxy().getFilterSpec(e.id,{V2:{}})},getIdPathesLeadingToReference:function(e){return n.baseViewer.getIdPathesLeadingToReference(e)},setPickability:function(e){return n.baseViewer.setPickability(e)},getPickability:function(){return n.baseViewer.getPickability()},reframeOn:function(e){return n.coloringBehavior.reframeOn(e)}}}});