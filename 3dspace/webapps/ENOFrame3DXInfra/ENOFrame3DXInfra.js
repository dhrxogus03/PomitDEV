define("DS/ENOFrame3DXInfra/Frame3DXController",["UWA/Class","UWA/Core","DS/PlatformAPI/PlatformAPI","DS/Logger/Logger","DS/PubSub/PubSub"],function(e,n,i,t,a){"use strict";var o=null,r=null,l=null;return e.singleton({init:function(e){if(!e.container||"function"!=typeof e.open||"function"!=typeof e.close)return void t.error("Frame3DXController ...... Initialze failure \n\t container = "+e.container+", open = "+e.open+", close = "+e.close);this._isFirstOpen=!0,e.container,r=e.open,l=e.close,i.subscribe("Frame3DXInfra.Open",this._onOpen.bind(this)),i.subscribe("Frame3DXInfra.Close",this._onClose.bind(this));require(["DS/TopFrame/TopFrame"],function(e){(o=e).addEvents({onLeftPanelClosed:function(e,n,t){"dataFilterPanelCtn"===t&&i.publish("Frame3DXInfra.onPanelClose",{panel:n,tag:t})},onLeftPanelHidden:function(e,n,t){"dataFilterPanelCtn"===t&&(o._isDataFilterPanelVisible||i.publish("Frame3DXInfra.onPanelClose",{panel:n,tag:t}))}})},function(e){}),a.add("onViewChange",this._onViewChange.bind(this));a.add("widget:remove",function(e){i.publish("Frame3DXInfra.WidgetRemoved",{id:e.id})});let n=document.body.getElement(".column.left");if(n){let e=n.getElement(".panel-action.minimize-action"),t=n.getElement(".panel-action.maximize-action");e&&t&&(e.addEventListener("click",e=>{i.publish("Frame3DXInfra.LeftPanelExpanded",0)}),t.addEventListener("click",e=>{i.publish("Frame3DXInfra.LeftPanelExpanded",1)}))}},_onOpen:function(e){let n=this;if(this._isFirstOpen){this._isFirstOpen=!1;["tab:change","tab:add","tab:duplicate"].forEach(function(e){a.add(e,function(e){l()})})}var i=e?e.identifier:void 0;if(o){let e=1;o._isDataFilterPanelVisible?this._openerId?this._openerId===i?(l(),e=0):(r(),this._openerId=i):this._openerId!==i&&(r(),this._openerId=i):(r(),this._openerId=i),e&&setTimeout(()=>{n._openerId=void 0},5e3)}},_onClose:function(){l(),this._openerId=void 0},_onViewChange:function(e){i.publish("Frame3DXInfra.ViewChange",e)}})});