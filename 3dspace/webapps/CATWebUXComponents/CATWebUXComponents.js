/*!  Copyright 2014 Dassault Systemes. All rights reserved. */
define("DS/CATWebUXComponents/CATWebUXButtonExpander",["require","exports","DS/VisuEvents/EventsManager","UWA/Core","DS/Utilities/TouchUtils","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,n,i,o){"use strict";return class{constructor(e){let t,a,s,l,r,c=this;function d(t){e.onClickCB&&e.onClickCB({target:e.onClickData,data:t,div:c})}function u(){s&&s.removeEventListener("transitionend",u),t&&s&&!t.hasClassName("expanded")&&s.setStyle("display","none")}function m(){t&&s&&l&&(t.hasClassName("expanded")?(s.addEventListener("transitionend",u),t.removeClassName("expanded"),l.removeClassName("wux-ui-3ds-expand-down"),l.addClassName("wux-ui-3ds-expand-right")):(s.setStyle("display",""),window.requestAnimationFrame(()=>{t&&l&&(t.addClassName("expanded"),l.removeClassName("wux-ui-3ds-expand-right"),l.addClassName("wux-ui-3ds-expand-down"))})),e.onExpandCB&&e.onExpandCB())}t=i.createElement("div",{class:"DMUButtonExpanderMainDiv"});let h=i.createElement("div",{class:"ButtonExpanderHeaderDiv","disable-selection":e.disableSelection||!1}).inject(t);if(a=i.createElement("div",{class:"DMUButtonExpanderExpanderDiv",styles:{visibility:e.displayExpander?"inherit":"hidden"}}).inject(h),o.getTouchMode()&&h.addClassName("touchMode"),e.displayExpander&&n.addEvent(e.disableSelection?h:a,"onPrimaryPointerClick",m),s=i.createElement("div",{class:"ButtonExpanderContentDiv",styles:{display:"none"}}).inject(t),l=i.createElement("i",{class:"wux-ui-3ds wux-ui-3ds-expand-right"}).inject(a),e.icon){let t=i.createElement("img",{class:"DMUButtonExpanderIcon",src:e.icon,events:{error:function(){h&&t&&h.removeChild(t)}}}).inject(h)}r=i.createElement("div",{class:"DMUButtonExpanderTitleDiv",text:e.title,"disable-selection":e.disableSelection||!1,styles:{"font-size":e.fontSize,"font-weight":e.bold?"bold":"normal","font-style":e.italic?"italic":"normal"}}).inject(h),e.customHeader&&i.createElement("div",{class:"DMUButtonExpanderCustomHeaderDiv"}).inject(h).appendChild(e.customHeader),e.onClickCB&&n.addEvent(r,"onPrimaryPointerClick",d),this.getMainDiv=function(){return t},this.setTitle=function(e){r&&(r.innerText=e)},this.getHeaderDiv=function(){return h},this.getContentDiv=function(){return s},this.isExpanded=function(){return!!t&&t.hasClassName("expanded")},this.setExpanded=function(n){e.displayExpander&&t&&s&&l&&(!n&&t.hasClassName("expanded")?(s.addEventListener("transitionend",u),t.removeClassName("expanded"),l.removeClassName("wux-ui-3ds-expand-down"),l.addClassName("wux-ui-3ds-expand-right")):n&&!t.hasClassName("expanded")&&(s.setStyle("display",""),window.requestAnimationFrame(()=>{t&&l&&(t.addClassName("expanded"),l.removeClassName("wux-ui-3ds-expand-right"),l.addClassName("wux-ui-3ds-expand-down"))})))},this.setHighlight=function(e){t&&(e&&!t.hasClassName("DMUButtonExpanderHighlighted")?t.addClassName("DMUButtonExpanderHighlighted"):!e&&t.hasClassName("DMUButtonExpanderHighlighted")&&t.removeClassName("DMUButtonExpanderHighlighted"))},this.remove=function(){e.displayExpander&&n.removeEvent(e.disableSelection?h:a,"onPrimaryPointerClick",m),e.onClickCB&&n.removeEvent(r,"onPrimaryPointerClick",d),t&&t.remove(),a=t=s=l=null}}}}),
/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
define("DS/CATWebUXComponents/CATWebUXNotifBar",["UWA/Core","UWA/Controls/Abstract","UWA/Utils","DS/UIKIT/Spinner","css!DS/UIKIT/UIKIT","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,n,i){"use strict";return t.extend({defaultOptions:{className:"",msgType:"primary",icon:!0,autoHide:!1,hideDelay:2e3,closable:!0},init:function(t){var n=t||{};n.className=n.className||"",this._parent(n),this.transitionTime=n.animationOff||this._debugmode?0:200,this.elements.container=e.createElement("ul",{class:"CATWebUXNotifBar alert "+this.options.className})},add:function(t){var o,a,s,l,r=this,c=n.getUUID();return t.msgType=t.msgType||this.options.msgType,t.icon="boolean"==typeof t.icon?t.icon:this.options.icon,t.autoHide="boolean"==typeof t.autoHide?t.autoHide:this.options.autoHide,t.closable="boolean"==typeof t.closable?t.closable:this.options.closable,t.buttons=t.buttons||[],t.buttons=n.splat(t.buttons),l="fade in alert-message alert-"+t.msgType+(0===this.transitionTime?" odtreplay":""),o=e.createElement("li",{id:c,class:l,html:{tag:"p",class:"msg",text:t.message}}),t.icon&&(o.addClassName("alert-has-icon"),e.createElement("span",{class:"icon fonticon"}).inject(o,"top")),a=e.createElement("div",{class:"btn-grp-sep"}).inject(o),s={id:c,show:function(){o.show()},hide:function(){o.hide()},remove:function(){r.remove(c)},buttons:[]},t.buttons.length>0&&t.buttons.forEach(function(t){var n;t.label&&t.onClick?(t.className=t.className||"default",t.doClose=t.doClose||!1,n=e.createElement("button",{class:"btn btn-sm btn-"+t.className,text:t.label,events:{click:function(){t.onClick(),t.doClose&&r.remove(c)}}}),s.buttons.push({label:t.label,show:function(){n.show()},hide:function(){n.hide()}}),n.inject(a)):"spinner"===t.className?(n=new i({visible:!0,animate:!1}),s.buttons.push({label:"spinner",show:function(){n.spin(),n.show()},hide:function(){n.stop(),n.hide()}}),n.inject(a)):s.buttons.push(null)}),t.closable&&(o.addClassName("alert-closable"),e.createElement("span",{class:"fonticon fonticon-cancel close",events:{click:function(){r.remove(c)}}}).inject(a,"bottom")),this.elements[c]=o,o.inject(this.elements.container),t.autoHide&&(this._toggleAutoHide(!0,c),o.addEvents({mouseover:r._toggleAutoHide.bind(r,!1),mouseleave:r._toggleAutoHide.bind(r,!0,c)})),s},removeAll:function(e){var t,n=0,i=function(){0===--n&&"function"==typeof e&&e()};for(t in this.elements)"container"!==t&&this.elements.hasOwnProperty(t)&&(n++,this.remove(t,i));0===n&&"function"==typeof e&&e()},remove:function(e,t){var n=this,i=this.elements[e];i&&"container"!==e?(i.removeClassName("in"),setTimeout(function(){i.destroy(),delete n.elements[e],"function"==typeof t&&t()},n.transitionTime)):"function"==typeof t&&t()},getContainer:function(){return this.elements.container},_toggleAutoHide:function(e,t){var n=this;e&&t?this.hidingIntervalId=setTimeout(function(){n.remove(t)},n.options.hideDelay):clearInterval(this.hidingIntervalId)}})}),define("DS/CATWebUXComponents/CATWebUXPanel",["UWA/Core","DS/Windows/Panel","DS/UIKIT/Spinner","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,n){"use strict";return t.extend({init:function(t){var i=t||{};i.identifier=i.identifier?i.identifier:i.id,i.floatableFlag="boolean"!=typeof i.floatableFlag||i.floatableFlag,i.autoCloseFlag="boolean"!=typeof i.autoCloseFlag||i.autoCloseFlag,i.resizableFlag="boolean"!=typeof i.resizableFlag||i.resizableFlag,i.allowMaximizeFlag="boolean"!=typeof i.allowMaximizeFlag||i.allowMaximizeFlag,i.maximizeButtonFlag="boolean"!=typeof i.maximizeButtonFlag||i.maximizeButtonFlag,i.horizontallyStretchableFlag="boolean"!=typeof i.horizontallyStretchableFlag||i.horizontallyStretchableFlag,i.verticallyStretchableFlag="boolean"!=typeof i.verticallyStretchableFlag||i.verticallyStretchableFlag,i.ensureHeightDefinitionOnHierarchy=!0,i.currentDockArea="number"==typeof i.currentDockArea?i.currentDockArea:WUXDockAreaEnum.NoneDockArea,i.allowedDockAreas="number"==typeof i.allowedDockAreas?i.allowedDockAreas:WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea|WUXDockAreaEnum.TopDockArea,i.floatableFlag="boolean"!=typeof i.floatableFlag||i.floatableFlag,i.icon&&!i.icon.endsWith(".png")&&(i.icon+=" CATWebUXPanelIcon"),this._parent(i);var o,a=!0,s=this,l=!1,r=e.createElement("div",{id:"CATWebUXPanelDisabledDiv",class:"CATWebUXPanelDisabledDiv"}).inject(this.elements.container),c=new n({visible:!0}),d=i.widthStep;c.inject(r),c.getContent().addClassName("CATWebUXPanelSpinner");var u,m,h,g,C=550,f={width:i.width,height:i.height,minWidth:i.minWidth,minHeight:i.minHeight,currentDockArea:i.currentDockArea,allowedDockAreas:i.allowedDockAreas,allowMaximizeFlag:i.allowMaximizeFlag,maximizeButtonFlag:i.maximizeButtonFlag,resizableFlag:i.resizableFlag,floatableFlag:i.floatableFlag};function p(){var e=i.immersiveFrame.getContent().getSize(),t=e.width>0&&e.width<C;if(t){if(t!==u){u=t;var n=s._getDimensionsFromPreferences()||s._getDockedDimensionsFromPreferences();f.width=n&&n.width?n.width:s.getWidth(),f.minWidth=s.getMinWidth()||f.minWidth,f.height=n&&n.height?n.height:s.getHeight(),f.minHeight=s.getMinHeight()||f.minHeight,f.currentDockArea=s.currentDockArea,f.allowMaximizeFlag=s.allowMaximizeFlag,f.maximizeButtonFlag=s.maximizeButtonFlag,f.resizableFlag="boolean"==typeof s.resizableFlag?s.resizableFlag:i.resizableFlag,f.floatableFlag="boolean"==typeof s.floatableFlag?s.floatableFlag:i.floatableFlag,s.setProperties({allowMaximizeFlag:!1,maximizeButtonFlag:!1,resizableFlag:!1,allowedDockAreas:WUXDockAreaEnum.LeftDockArea,floatableFlag:!1}),s._saveDetachedInPreferences(),s.currentDockArea!==WUXDockAreaEnum.LeftDockArea&&(m&&(clearTimeout(m),m=null),m=setTimeout(function(){i.immersiveFrame.dockWindow(s,WUXDockAreaEnum.LeftDockArea,{attachToOtherDockedWindow:!0,ignorePreferences:!0})}))}var o=i.immersiveFrame.getDockingElement(WUXDockAreaEnum.LeftDockArea)._collapserSize;s.setProperties({minWidth:e.width-o}),s.setWidth(e.width-o)}else t!==u&&(u=t,s.setProperties({allowedDockAreas:f.allowedDockAreas,minWidth:f.minWidth,minHeight:f.minHeight,allowMaximizeFlag:f.allowMaximizeFlag,maximizeButtonFlag:f.maximizeButtonFlag,resizableFlag:f.resizableFlag,floatableFlag:f.floatableFlag}),i.immersiveFrame.dockWindow(s,f.currentDockArea,{attachToOtherDockedWindow:!0,ignorePreferences:!0}),h&&(clearTimeout(h),h=null),h=setTimeout(function(){f.width>0&&s.setWidth(f.width),f.height>0&&s.setHeight(f.height)}))}if(this.setPanelVisibilityFlag=function(e,t){if(e!==s.visibleFlag||t)if(s.visibleFlag=e,s.visibleFlag){if(i.viewerFrame&&(i.viewerFrame.addEvent("resize",p),p()),s.getDockedFlag()&&t){var n=i.immersiveFrame.getDockingElement(s.currentDockArea).getContainedWindows();1===n.length&&n[0].isAWindowGroup()&&(n[0].currentWindows=[s]);var o=i.immersiveFrame.getDockingElement(s.currentDockArea);o.collapseDockingZoneFlag&&(o.collapseDockingZoneFlag=!1)}}else i.viewerFrame&&i.viewerFrame.removeEvent("resize",p)},this.getPanelVisibilityFlag=function(){return s.visibleFlag},this.isSmallWidth=function(){return u},this.collapsePanel=function(){var e=i.immersiveFrame.getDockingElement(s.currentDockArea);e&&e.setProperties({collapseDockingZoneFlag:!0})},this._parentDestroy=this.destroy,this.destroy=function(){l=!0,g&&(clearTimeout(g),g=null),m&&(clearTimeout(m),m=null),h&&(clearTimeout(h),h=null),i.viewerFrame&&i.viewerFrame.removeEvent("resize",p),s.visibleFlag=!1,s._parentDestroy()},this.clean=function(){s.destroy()},this.getPanelID=function(){return i.identifier},this.setWidth=function(e){if(d){var t=e,n=s.getMinWidth(),o=(t-n)/d,a=Math.floor(o);t=o-a<.7?n+a*d:n+(a+1)*d,!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.LeftDockArea&&s.currentDockArea!==WUXDockAreaEnum.RightDockArea||(i.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize=t),s.width=t}else!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.LeftDockArea&&s.currentDockArea!==WUXDockAreaEnum.RightDockArea||(i.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize=e),s.width=e},this.getWidth=function(){return!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.LeftDockArea&&s.currentDockArea!==WUXDockAreaEnum.RightDockArea?s.width:i.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize},this.setMinWidth=function(e){s.minWidth=e,s.minWidth>s.getWidth()&&s.setWidth(s.minWidth)},this.getMinWidth=function(){return s.minWidth},this.setWidthStep=function(e){d=e,s.setWidth(s.getWidth())},this.getWidthStep=function(){return d},this.setHeight=function(e){if(i.heightStep){var t=e,n=s.getMinHeight(),o=(t-n)/i.heightStep,a=Math.floor(o);t=o-a<.7?n+a*i.heightStep:n+(a+1)*i.heightStep,!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.BottomDockArea&&s.currentDockArea!==WUXDockAreaEnum.TopDockArea||(i.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize=e),s.height=t}else i.heightStep||(!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.BottomDockArea&&s.currentDockArea!==WUXDockAreaEnum.TopDockArea||(i.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize=e),s.height=e)},this.getHeight=function(){return!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.BottomDockArea&&s.currentDockArea!==WUXDockAreaEnum.TopDockArea?s.height:i.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize},this.setMinHeight=function(e){s.minHeight=e,s.minHeight>s.getHeight()&&s.setHeight(s.minHeight)},this.getMinHeight=function(){return s.minHeight},this.setEnableFlag=function(e){a!==e&&(a=e,r.setStyles({display:a?"none":"block"}),o&&clearTimeout(o),o=setTimeout(()=>{l||(r.setStyles({opacity:a?"0":"1"}),o=null)},100))},this.getEnableFlag=function(){return a},this.setResizableFlag=function(e){s.resizableFlag!==e&&(e||(s.setWidth(s.getMinWidth()),s.setHeight(s.getMinHeight())),s.resizableFlag=e)},this.getResizableFlag=function(){return s.resizableFlag},this.setPanelPosition=function(e){e&&(s.position=e)},i.width&&this.setWidth(i.width),i.height&&this.setHeight(i.height),i.minWidth&&this.setMinWidth(i.minWidth),i.minHeight&&this.setMinHeight(i.minHeight),s.getDockedFlag()&&i.immersiveFrame.getDockingElement(this.currentDockArea)&&i.immersiveFrame.dockWindow(s,this.currentDockArea,{attachToOtherDockedWindow:!0,ignorePreferences:!0}),s.isSmallWidth()||s._saveDockAreaInPreferences(),i.className&&this.elements.container.addClassName(i.className),this.addEventListener("placeChange",function(){s.isSmallWidth()||l||(g&&(clearTimeout(g),g=null),g=setTimeout(function(){if(g=null,s.visibleFlag&&!l&&(s._saveDockAreaInPreferences(),i.onPlaceChangedCB&&i.onPlaceChangedCB({currentDockArea:s.currentDockArea}),i.onPanelResizedCB))try{let e=window.getComputedStyle(s.getContent());i.onPanelResizedCB({width:Math.round(parseInt(e.width)),height:Math.round(parseInt(e.height)),widthModifiedInteractively:!0,currentDockArea:s.currentDockArea})}catch(e){window.console.log(e)}}))}),i.viewerFrame&&(i.viewerFrame.addEvent("resize",p),p()),d||i.heightStep||i.onPanelResizedCB){var b={width:0,height:0};this.addEventListener("startResize",function(){b.width=s.getWidth(),b.height=s.getHeight(),s.visibleFlag&&i.onBeforePanelResizeCB&&i.onBeforePanelResizeCB({width:s.getWidth(),height:s.getHeight(),widthModifiedInteractively:!0,currentDockArea:s.currentDockArea})}),this.addEventListener("resize",function(){s.visibleFlag&&i.onPanelResizeCB&&i.onPanelResizeCB({width:s.getWidth(),height:s.getHeight(),widthModifiedInteractively:!0,currentDockArea:s.currentDockArea})}),this.addEventListener("stopResize",function(){s.visibleFlag&&(d&&s.setWidth(s.getWidth()),i.heightStep&&s.setHeight(s.getHeight()),b.width===s.getWidth()&&b.height===s.getHeight()||!i.onPanelResizedCB||i.onPanelResizedCB({width:s.getWidth(),height:s.getHeight(),widthModifiedInteractively:!0,currentDockArea:s.currentDockArea})),b={width:0,height:0}})}i.closePanelCB&&this.addEventListener("close",i.closePanelCB),setTimeout(function(){s.visibleFlag&&!l&&s.ensureVisible()})}})}),define("DS/CATWebUXComponents/CATWebUXUtils",[],function(){"use strict";var e,t={};return t._sendUsageProbe=function(t,n,i){if(e){var o=e.getPADTracker({eventCategory:"usage",eventAction:t}),a={eventLabel:n};void 0!==i&&(a.eventValue=i),o.setEventData(a),o.trackPageEvent()}else require(["DS/PADServices/utils/PADTrackerManager"].concat([]),function(t,n,i,o){e=o,this._sendUsageProbe(t,n,i)}.bind(this,t,n,i))},t.isMobile=function(){return navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},Object.freeze(t)}),define("DS/CATWebUXComponents/CATWebUXNotification",["UWA/Class","UWA/Core","DS/Visualization/ThreeJS_DS","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Alert","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/VisuEvents/EventsManager","css!DS/UIKIT/UIKIT.css","DS/Controls/Abstract","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,n,i,o,a,s,l){"use strict";var r;return e.extend({init:function(){var e,c,d,u,m;this._parent();var h,g,C,f,p="left",b=!1,y=i.getWebappsAssetUrl("CATWebUXComponents","graphics")+"/I_Expander.png",v="BasicNotification",S=function(){var t=0;if(h){var n=h.getImmersiveFrame().getDockingElement("left"===p?WUXDockAreaEnum.LeftDockArea:WUXDockAreaEnum.RightDockArea);(n.getContainedVisibleWindows().length>0||n.interactiveDockAreaVisibleFlag)&&(t=n.dockingZoneSize,n.collapseDockingZoneFlag||(t+=n._collapserSize)),t+=20,e&&e.setStyles("left"===p?{left:t+"px"}:{right:t+"px"})}};function A(){var t=document.querySelectorAll(".CATWebUXNotification");if(h&&d&&(h.getImmersiveFrame().removeEventListener("freeZoneResize",S),h.getViewer().unsubscribe(u),d=u=null),m&&(l.removeEventFromToken(m),m=null),t.length)for(var n=0;n<t.length;n++)t[n]!==e&&t[n].dsModel!==e||(c&&(clearTimeout(c),c=0),t[n].remove?t[n].remove():t[n].destroy(),e=null)}function D(e){if(C){var t=255*new n.Color(e).getHSL().l;C.childNodes.forEach(function(e){e.setStyles({color:t>120?"":"white"})})}}this.build=function(n){if(A(),n){var i="number"==typeof n.duration?n.duration:3e3;if(v=n.notificationType||"BasicNotification",n.message)if("HelpNotification"===v){(e=new o({className:"CATWebUXNotification",visible:!0,hideDelay:n.autoHide?i:void 0,autoHide:n.autoHide,maximumVisibleMessages:1,messages:[{message:n.message,className:n.type||"primary"}]}).inject(n.body,"top")).notifType=n.type||"primary",e.elements.container.dsModel=e;var T=0;e.elements.container.childNodes[0].offsetWidth&&0!==e.elements.container.childNodes[0].offsetWidth?T=e.elements.container.childNodes[0].offsetWidth:e.elements.container.childNodes[0].style.pixelWidth&&0!==e.elements.container.childNodes[0].style.pixelWidth&&(T=e.elements.container.childNodes[0].style.pixelWidth);var k=T+35,x=parseFloat(n.body.getStyle("width"));e.elements.container.childNodes[0].setStyles({left:((x-k)/2<=0?10:(x-k)/2)+"px"}),n.autoHide&&(c&&(clearTimeout(c),c=0),c=setTimeout(A,1.5*i))}else if("CustomNotification"===v){e=new t.Element("div",{class:"CATWebUXNotification CATWebUXNotificationMainDiv"}),n.webInWinFrame||e.setStyles({"max-width":"calc(100% - 120px)"}),g=new t.Element("div",{class:"CATWebUXNotificationIconBody"}).inject(e),C=new t.Element("div",{class:"CATWebUXNotificationTextBody"}).inject(e),n.webInWinFrame||C.setStyles({"max-width":"calc(100% - 52px)"});var E=new t.Element("p",{class:"CATWebUXNotificationPrimaryText"}).inject(C);if(E.innerText=n.message,n.secondary)new t.Element("p",{class:"CATWebUXNotificationSecondaryText"}).inject(C).innerText=n.secondary;else E.setStyles({position:"relative",top:"6px"}),C.setStyle("margin","5px");if(n.icon&&n.icon.length?new t.Element("img",{src:n.icon}).inject(g):new t.Element("span",{class:"CATWebUXNotificationDefaultIcon wux-ui-3ds wux-ui-3ds-1x "+(n.fontIcon?n.fontIcon:"wux-ui-3ds-info")}).inject(g),n.hidden){f=new t.Element("div",{class:"CATWebUXNotificationHiddenTextBody"}).inject(C),new t.Element("p",{class:"CATWebUXNotificationHiddenText"}).inject(f).innerText=n.hidden;var w=new t.Element("div",{class:"CATWebUXNotificationExpBody"}).inject(e),W=new t.Element("img",{class:"CATWebUXNotificationExpDiv",src:y}).inject(w),U=function(){W.setStyles({transform:b?"rotate(180deg)":"rotate(0deg)",opacity:b?"0.5":""}),f.setStyle("display",b?"":"none"),n.onNotificationSizeChanged&&n.onNotificationSizeChanged()};U(),m=l.addEvent(w,"onPrimaryPointerClick",function(){b=!b,U()}),C.setStyles({width:"calc(100 % - 90px)"})}else C.setStyles({width:"calc(100 % - 60px)"});p=n.dockingSide?n.dockingSide:"left",e.setStyle("right"===p?"right":"left","20px"),d||n.frmWindow&&((h=n.frmWindow).getImmersiveFrame().addEventListener("freeZoneResize",S),d=1,u=h.getViewer().onBackgroundModify(D),D(h.getViewer().backgroundColor)),e.inject(n.body,"top"),n.autoHide&&(c&&(clearTimeout(c),c=0),c=setTimeout(A,i))}else if("BasicNotification"===v){r||(r=a,s.setNotificationManager(r));var F="info";t.is(n.type)&&"primary"!==n.type&&(F=n.type),r.addNotif({level:F,message:n.message,sticky:!1})}}},this.getDimensions=function(){var t={width:0,height:0};if(!e)return t;if("CustomNotification"===v){var n=g.getDimensions();t.width+=n.outerWidth,n=C.getDimensions(),t.width+=n.outerWidth,f&&(t.width+=32),t.width+=22,t.height+=n.outerHeight,t.height+=22}else t.width=e.elements.container.childNodes[0].offsetWidth,t.width+=e.elements.container.childNodes[0].style.left,t.height=e.elements.container.childNodes[0].offsetHeight,t.height+=e.elements.container.childNodes[0].style.top;return t},this.destroy=function(){A()}}})}),define("DS/CATWebUXComponents/CATWebUXThumbnail",["UWA/Core","UWA/Class","DS/VisuEvents/EventsManager","DS/UIKIT/Spinner","DS/Controls/Toggle","DS/Utilities/TouchUtils","DS/Controls/ProgressBar","DS/Menu/ContextualMenu","i18n!DS/CATWebUXComponents/assets/nls/CATWebUXComponents","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,n,i,o,a,s,l,r){"use strict";var c=0,d=t.extend({init:function(t){var d=t||{};this._parent(d);var u,m,h=this,g=new Image,C=!0,f="number"==typeof d.width?d.width:144,p="number"==typeof d.height?d.height:108;let b=d.displayMode||"normal";var y,v,S,A,D,T,k=f,x=p,E=!1,w=!1,W=!1,U=!1,F=d.isCheckable,P=!1,H=0,I=!1,N=d.title,X="#368ec4",B=!0,M=!0,_=!1;let j=!1;var R,z,L,K,V,O,Z,G;let q,Q,J,Y,$,ee,te,ne,ie,oe,ae,se,le,re,ce,de,ue,me;var he,ge,Ce,fe,pe,be=!1;let ye,ve,Se,Ae=t.enableDrag,De=t.readOnly,Te=t.markedAsDeleted;var ke={},xe={userName:null,userColor:null,userPic:null,defaultUserPic:null,date:null};c++;let Ee,we={},We=!1;function Ue(e){"Enter"===e.key||13===e.keyCode?He(e):"Escape"!==e.key&&27!==e.keyCode||Ie(e)}function Fe(e){" "!==e.key&&32!==e.keyCode||e.stopPropagation()}function Pe(){if(I&&E&&!re&&!_){re=!0,O.setAttributes({contenteditable:!0}),window.getSelection().removeAllRanges();var e=document.createRange();e.selectNodeContents(O),window.getSelection().addRange(e),O.focus(),N=Ne(O),O.setStyles({textOverflow:"initial"}),O.addEventListener("blur",He),O.addEventListener("keydown",Ue),O.addEventListener("keyup",Fe)}}function He(e){if(re){re=!1,O.removeEventListener("blur",He),O.removeEventListener("keydown",Ue),O.removeEventListener("keyup",Fe),O.setAttributes({contenteditable:!1});var t=Ne(O);t||(O.innerText=N,t=N),t!==N&&d.onTitleEditedCB({title:t,id:d.id}),ke.title=t,_e()}e&&(e.preventDefault(),e.stopPropagation())}function Ie(e){O.innerText=N,He(e)}function Ne(e){for(var t="",n=(e.innerText||"").split("\n"),i=0;i<n.length;i++)(n[i]||i!==n.length-1)&&(n[i]=n[i].replace("\r",""),t+=n[i]);return t}function Xe(){if(V){var e=P?22:0;e=25+e,d.icon&&(e+=20),ge&&ge.fontIcon&&(e+=20),V.setStyles({width:"calc(100% - "+e+"px)","margin-left":ge&&ge.fontIcon?"5px":d.icon?"0":"15px"})}}function Be(){K&&(L.removeChild(K),K=null),(d.icon||ge&&ge.fontIcon)&&(K=e.createElement("div",{id:"thumbImg"+c+"_"+d.id,class:"CATWebUXThumbnailIcon"}).inject(L),L.firstChild?L.insertBefore(K,L.firstChild):K.inject(L),ge&&ge.fontIcon?((S=e.createElement("span",{class:"CATWebUXThumbnailClickableIcon "+ge.fontIcon}).inject(K)).setStyles({fontSize:"18px",color:"white",marginLeft:"10px",marginTop:"6px",transition:"all 0.5s"}),K.setStyles({backgroundColor:"#42a2da",width:"36px",height:"31px",margin:"0",border:"1px solid #368ec4"})):K.setStyles({backgroundImage:'url("'+d.icon+'")'})),K&&K.setStyles({display:M||_?"":"none"}),Xe()}function Me(){k=Math.floor(0===m?f:277),x=Math.floor(0===m?p:82),1===m?(ie&&ie.hasClassName("CATWebUXThumbnailPreviewThumbDiv")&&ie.removeClassName("CATWebUXThumbnailPreviewThumbDiv"),L&&L.hasClassName("CATWebUXThumbnailThumbContentDiv")&&L.removeClassName("CATWebUXThumbnailThumbContentDiv"),ie&&ie.addClassName("CATWebUXThumbnailPreviewTileDiv"),L&&(L.addClassName("CATWebUXThumbnailTileContentDiv"),L.setStyles({top:""})),G&&G.setStyles({display:""})):(ie&&ie.hasClassName("CATWebUXThumbnailPreviewTileDiv")&&ie.removeClassName("CATWebUXThumbnailPreviewTileDiv"),L&&L.hasClassName("CATWebUXThumbnailTileContentDiv")&&L.removeClassName("CATWebUXThumbnailTileContentDiv"),ie&&ie.addClassName("CATWebUXThumbnailPreviewThumbDiv"),L&&(L.addClassName("CATWebUXThumbnailThumbContentDiv"),L.setStyles({top:x-("none"===$.style.display?40:60)+"px",height:"100px"})),G&&G.setStyles({display:"none"}),te&&te.setStyles({outline:""})),"light"!==b&&q.setStyles({width:k+"px",height:x+"px"}),(Y&&"none"!==$.style.display||A)&&Y.setStyles({width:"calc(100% - "+(d.userPic?"65px":"30px")+")"}),$&&""===$.style.display&&te.setStyles({height:"calc(100% - 20px)"})}function _e(){if("light"!==b){if(V||(V=e.createElement("div",{class:"CATWebUXThumbnailTextDiv"}).inject(L),Xe()),O&&(d.onTitleEditedCB&&n.removeEvent(O,"onPrimaryPointerClick",Pe),V.removeChild(O)),Z&&V.removeChild(Z),G&&V.removeChild(G),ge&&ge.title)(O=e.createElement("p",{id:"thumbTitle"+d.id,class:"CATWebUXThumbnailText CATWebUXThumbnailTitle",contenteditable:!1}).inject(V)).innerText=ge.title;else{if(ke.title&&((O=e.createElement("p",{id:"thumbTitle"+d.id,class:"CATWebUXThumbnailText CATWebUXThumbnailTitle",contenteditable:!1}).inject(V)).innerText=ke.title||" ",O.title=ke.title,ke.titleIcon)){var t,i=e.createElement("img",{src:ke.titleIcon}).inject(V);i.onerror=function(){i.destroy(),clearInterval(t)},t=setInterval(function(){i.naturalWidth>0&&(clearInterval(t),i.destroy(),O&&O.setStyles({"background-image":"url("+ke.titleIcon+")","background-size":i.naturalWidth+"px "+i.naturalHeight+"px","background-repeat":"no-repeat","background-position":"left center","padding-left":i.naturalWidth+5+"px"}))},10)}ke.subtitle&&((Z=e.createElement("p",{id:"thumbSubTitle"+d.id,class:"CATWebUXThumbnailText CATWebUXThumbnailSubtitle"}).inject(V)).innerText=ke.subtitle,Z.title=ke.subtitle),ke.additionalText&&((G=e.createElement("p",{class:"CATWebUXThumbnailText CATWebUXThumbnailAddText"}).inject(V)).innerText=ke.additionalText,G.title=ke.additionalText)}O&&V.appendChild(O),Z?(V.appendChild(Z),te.setStyle("overflow","hidden")):te.setStyle("overflow",""),G&&(V.appendChild(G),te.setStyle("overflow","hidden")),L.setStyles({height:Z||G?"100px":""}),d.onTitleEditedCB&&n.addEvent(O,"onPrimaryPointerClick",Pe),h.highlightThumbnail(D),V.setStyles({display:M||_?"":"none"})}else pe.set({title:ke.title,text:ke.title})}function je(){if("normal"===b?(q||(q=e.createElement("div",{id:"thumbnailView_"+c+"_"+d.id,class:"CATWebUXThumbnailThumbContainer"+(Te?" CATWebUXThumbnailDeleted":"")})),Q=e.createElement("div",{id:"thumbnailPrefixMainDiv_"+c+"_"+d.id,class:"CATWebUXThumbnailPrefixContainer"}).inject(q),(J=e.createElement("img",{id:"thumbUserPic"+c+"_"+d.id,class:"CATWebUXThumbnailInfoPic"}).inject(Q)).setStyles({opacity:"0"}),d.displayPrefix&&(A=e.createElement("div",{class:"CATWebUXThumbnailPrefixDiv"}).inject(Q)),Se||(Se=e.createElement("div",{class:"CATWebUXThumbnailProgressDiv",styles:{display:"none"}}).inject(Q),new s({emphasize:"info",shape:"circular",height:20,infiniteFlag:!0}).inject(Se)),Y=e.createElement("div",{id:"thumbSubContainer"+c+"_"+d.id,class:"CATWebUXThumbnailSubContainer"}).inject(q),$=e.createElement("div",{id:"thumbUserInfo"+c+"_"+d.id,class:"CATWebUXThumbnailInfoContent"}).inject(Y),le=e.createElement("p",{id:"thumbUserName"+c+"_"+d.id,class:"CATWebUXThumbnailInfoName"}).inject($),(ee=e.createElement("p",{id:"thumbCreationDate"+c+"_"+d.id,class:"CATWebUXThumbnailCreationDate"}).inject($)).setStyles({display:"none"}),te=e.createElement("div",{id:"thumbMainDiv"+c+"_"+d.id,class:"CATWebUXThumbnailThumbMainDiv"}).inject(Y),ne=e.createElement("div",{id:"thumbShading"+c+"_"+d.id,class:"CATWebUXThumbnailColorDiv"}).inject(te),ie=e.createElement("div",{id:"thumbAppIcon"+c+"_"+d.id,class:"CATWebUXThumbnailPreviewDiv"}).inject(te),oe=e.createElement("div",{class:"CATWebUXThumbnailDisabledDiv"}),ie.appendChild(oe),Te&&e.createElement("i",{class:"CATWebUXThumbnailDeletedDiv wux-ui-3ds-presentation-slide-delete wux-ui-3ds",title:r.slideDeleted}).inject(te),(L=e.createElement("div",{id:"thumbContent"+c+"_"+d.id,class:"CATWebUXThumbnailContent"}).inject(te)).addEventListener("mouseenter",function(){_&&(O&&O.setStyles({color:X,"text-decoration":"underline"}),S&&S.setStyles({transform:"rotate(180deg)"}))}),L.addEventListener("mouseleave",function(){_&&(O&&O.setStyles({color:"","text-decoration":""}),S&&S.setStyles({transform:""}))}),Be(),L.setStyles({display:d.icon||d.title||d.subtitle||d.onCtxMenuCB?"":"none"}),ae=e.createElement("div",{id:d.id+"_checkBoxDiv"+c+"_",class:"CATWebUXThumbnailCheckBoxDiv"}).inject(ie),(se=new o({checkFlag:!1}).inject(ae)).elements.container.addClassName("CATWebUXThumbnailCheckDiv")):"light"===b&&(q||(q=e.createElement("div",{id:"thumbnailView_"+c+"_"+d.id,class:"CATWebUXThumbnailLightContainer"})),e.createElement("i",{class:"wux-ui-3ds wux-ui-3ds-presentation-slide"}).inject(q),pe=e.createElement("div",{class:"CATWebUXThumbnailLightTextDiv",title:d.title,text:d.title}).inject(q)),(d.title||d.subtitle||d.additionalText||d.text)&&(ke={title:d.title?d.title:d.text,subtitle:d.subtitle,additionalText:d.additionalText,titleIcon:d.titleIcon},_e()),re=!1,me=!1,ce=!1,d.clickCB&&(de=function(e){re||setTimeout(function(){if(!ce&&!me){if(e&&e.from&&e.from.length&&e.from[0].event&&e.from[0].event.eventAlreadyConsumed)return ce=!1,void(me=!1);U||0!==H||d.clickCB({id:d.id,data:d.data,event:e}),U=!1,H>0&&H--}ce=!1,me=!1},d.doubleClickCB?200:10)},n.addEvent(q,"onPrimaryPointerClick",de)),q.addEventListener("mouseenter",function(){a.getTouchMode()||(W=!0,ee&&ee.getText()&&ee.setStyles({display:""}),J&&xe.userPic&&J.setStyles({opacity:"1"}),ae&&ae.setStyles({display:F?"":"none"}),fe&&j&&!We&&(he&&he.setStyle("display","none"),fe.setStyles({display:""}))),d.onEnterCB&&d.onEnterCB({id:d.id,prehighlightedFlag:!0})}),q.addEventListener("mouseleave",function(){a.getTouchMode()||(W=!1,ee&&ee.getText()&&!y&&ee.setStyles({display:"none"}),J&&xe.userPic&&!y&&J.setStyles({opacity:"0"}),ae&&ae.setStyles({display:F&&y?"":"none"}),fe&&j&&!y&&(he&&he.setStyle("display",""),fe.setStyles({display:"none"}))),d.onLeaveCB&&d.onLeaveCB({id:d.id,prehighlightedFlag:!1})}),a.getTouchMode()&&(d.onEnterCB&&q.addEventListener("touchstart",function(){d.onEnterCB({id:d.id,prehighlightedFlag:!0})}),d.onLeaveCB&&q.addEventListener("touchend",function(){d.onLeaveCB({id:d.id,prehighlightedFlag:!0})})),a.getTouchMode()&&(ae&&ae.setStyles({display:F?"":"none"}),fe&&fe.setStyles({display:""}),J&&J.setStyles({opacity:"1"}),ee&&ee.setStyles({display:""})),d.doubleClickCB&&(ue=function(e){setTimeout(function(){U||(H=2,d.doubleClickCB({id:d.id,data:d.data,event:e})),U=!1},5)},n.addEvent(q,"onPrimaryPointerDoubleClick",ue)),se){if(se.addEventListener("buttonclick",function(){setTimeout(function(){se&&F&&(se.checkFlag=y)},0)}),Z||G){var t=0;L.addEventListener("mouseenter",function(){t=setTimeout(function(){L&&0===m&&L.setStyles({top:x-("none"===$.style.display?66:86)+"px"})},500)}),L.addEventListener("mouseleave",function(){0===m&&(t&&(clearTimeout(t),t=0),L.setStyles({top:x-("none"===$.style.display?40:60)+"px"}))})}}}function Re(e){if(e)!u&&oe&&((u=new i({visible:!0})).inject(oe),u.getContent().addClassName("CATWebUXThumbnailSpinner"),oe.setStyles({opacity:"1",visibility:"unset"}));else{if(u){for(;oe.firstChild;)oe.removeChild(oe.firstChild);u.destroy(),u=null}oe&&oe.setStyles({opacity:"0",visibility:"hidden"})}}this.displayProgress=(()=>{Ee||(Ee=setTimeout(()=>{Ee=null,Se&&Se.setStyle("display","")},500))}),this.hideProgress=(()=>{Ee&&(clearTimeout(Ee),Ee=null),Se&&Se.setStyle("display","none")}),this.updateDisplayMode=(e=>{if(e!==b){if(b=e,h.clear(),q)for(;q.firstElementChild;)q.removeChild(q.firstElementChild);je()}}),this.setVisibleFlag=function(e){C=e,q&&q.setStyle("display",C?"":"none")},this.getVisibleFlag=function(){return C},this.setDimensions=function(e,t){e&&t&&(e===f&&t===p||(f=e,p=t,Me()))},this.setPreview=function(e,t){e&&ie?(v=e,g.src=v,t&&ie.setStyles({"background-color":t}),ie.setStyles({backgroundImage:'url("'+v+'")',"background-size":"cover"}),Re(!1)):Re(!0)},this.setThumbnailTexts=function(e){Object.assign(ke,e),_e()},this.setDisplayFlag=function(e,t){var n;w=t,n=!(E=e)||B&&!Te?E&&w?"rgb(87, 184, 71)":E?X:"rgba(255, 255, 255, 0)":"#77797c",ne&&ne.setStyle("background-color",n)},this.setThumbnailActiveFlag=function(e){B=e,h.highlightThumbnail(D),h.setDisplayFlag(E,w)},this.getThumbnailActiveFlag=function(){return B},this.setThumbnailPrefix=function(e){A&&(A.innerText=e)},this.getThumbnailPrefix=function(){return A?A.innerText:""},this.highlightThumbnail=function(e){if(D!==e){D=e;var t=B?X:"#77797c";O&&O.setStyles({color:e?t:"","text-decoration":e?"underline":""}),A&&A.setStyles({color:e?t:""})}},this.getDisplayFlag=function(){return E},this.getData=function(){return d.data},this.setThumbnailID=function(e){d.id=e},this.getThumbnailID=function(){return d.id},this.allowTitleEdition=function(e){!(I=e)&&re&&Ie()},this.isInEdition=function(){return re},this.getContent=function(){return q},this.inject=function(e){return q.inject(e),h},this.clear=function(){ae&&ze&&n.removeEvent(ae,"onPrimaryPointerClick",ze),de&&n.removeEvent(q,"onPrimaryPointerClick",de),ue&&n.removeEvent(q,"onPrimaryPointerDoubleClick",ue),O&&Pe&&n.removeEvent(O,"onPrimaryPointerClick",Pe),R&&z&&n.removeEvent(R,"onPrimaryPointerClick",z),q&&z&&ve&&(l.removeEventListener(q,ve),ve=null),Ce&&n.removeEventFromToken(Ce),Re(!1),g=ue=de=ze=Ce=null,Se=te=ne=ie=oe=L=K=V=O=Z=G=null,ae=se=null},this.setDisplayType=function(e){e!==m&&(m=e,Me(),v&&(g.src=v))},this.addInformationIcon=(({id:t,fontIcon:i,color:o,onClick:a})=>{he||(he=e.createElement("div",{class:"CATWebUXThumbnailInformationIconsDiv"}).inject(te)),he&&(we[t]?(we[t].iconDiv.setStyle("color",o||"rgb(119, 121, 124)"),we[t].iconDiv.className="DMUInformationIcon wux-ui-3ds "+i+(a?" DMUInformationIconHoverable":""),we[t].onClickToken&&(n.removeEventFromToken(we[t].onClickToken),we[t].onClickToken=void 0),a&&(we[t].onClickToken=n.addEvent(we[t].iconDiv,"onPrimaryPointerClick",()=>a()))):(we[t]={iconDiv:e.createElement("i",{class:"DMUInformationIcon wux-ui-3ds "+i+(a?" DMUInformationIconHoverable":""),styles:{color:o||"rgb(119, 121, 124)"}})},a&&(we[t].onClickToken=n.addEvent(we[t].iconDiv,"onPrimaryPointerClick",()=>a())),he.appendChild(we[t].iconDiv)))}),this.hideReplyButton=(e=>{We=e,fe&&fe.setStyle("display",e?"none":"")}),this.removeInformationIcon=(e=>{he&&we[e]&&(we[e].onClickToken&&n.removeEventFromToken(we[e].onClickToken),he.removeChild(we[e].iconDiv),delete we[e])}),this.setIsDraggable=function(e){be=e,te&&te.getAttribute("draggable")!==be.toString()&&(te.setAttributes({draggable:be}),ie&&ie.setAttributes({draggable:be}),ne&&ne.setAttributes({draggable:be}),R&&R.setAttributes({draggable:be}),O&&O.setAttributes({draggable:be}),te.ondragstart=be?function(e){if((e.shiftKey&&Ae||!e.shiftKey&&!Ae)&&!De)return!1;let t=e.target.id;ye&&(t=ye),e.dataTransfer.setData("text",t),e.dataTransfer.setDragImage(ie,e.offsetX,e.offsetY)}:null)},this.setReadOnlyFlag=function(e){De=e},this.enableDragContent=function(e){Ae=e},this.isDraggable=function(){return be},this.setSlideViewTransferDragContent=function(e){ye=e},this.setTitleAndIconSectionVisibleFlag=function(e){M=e,L&&L.setStyles({borderTopWidth:M||_||d.onlyText?"":"0px",backgroundColor:M||_||d.onlyText?"":"rgba(255, 255, 255, 0)"}),_e(),Be()},this.getDisplayType=function(){return m},this.setIsCheckableFlag=function(e){F=e,ae&&ae.setStyles({display:F&&(a.getTouchMode()||W)?"":"none"})},this.getIsCheckableFlag=function(){return F},this.setCheckFlag=function(e,t,n){e!==y&&(y=e,se&&(se.checkFlag=e,!n&&d.checkFlagChangedCB&&F&&d.checkFlagChangedCB({id:d.id,checkFlag:e,data:d.data,event:t})),y||!d.showCheckBoxOnMouseEvt||a.getTouchMode()||ae.setStyles({display:"none"}),ae&&ae.setStyles({display:y&&F?"":F&&(a.getTouchMode()||W)?"":"none"}),a.getTouchMode()||(J&&J.setStyles({opacity:y||W?"1":"0"}),ee&&ee.setStyles({display:y||W?"":"none"}))),fe&&(fe.setStyles({display:y?"":"none",color:y?"#77797c":""}),he&&he.setStyle("display",y?"none":"")),"1"===m&&te.setStyle("outline",F&&e?"4px solid #368ec4":"")},this.isChecked=function(){return!!F&&y},this.setCtxMenuAvailability=function(t){t!==P&&((P=t)&&(R||(R=e.createElement("div",{class:"CATWebUXThumbnailCtxMenuDiv"}).inject(ie)),d.onCtxMenuCB&&!z&&(z=function(e){P&&("@onPrimaryPointerClickEvent"===e.eventType&&(me=!0),d.onCtxMenuCB({id:d.id,event:e.data?e.data.event:e.from[0].event,openFromButton:"@onPrimaryPointerClickEvent"===e.eventType}))},n.addEvent(R,"onPrimaryPointerClick",z),ve=l.addEventListener(q,{callback:z}))),R&&R.setStyle("display",P?"":"none"),Xe())},this.getCtxMenuAvailability=function(){return P},this.setThumbnailLabelClickableFlag=function(e,t){if(e!==_){if(_=e,!d.onLabelContentClickCB)return;(d.icon||d.title||d.subtitle||d.onCtxMenuCB)&&(_?(L.addClassName("CATWebUXThumbnailClickableDiv"),t&&(ge=t),T=n.addEvent(L,"onPrimaryPointerClick",function(e){if(e&&e.from&&e.from.length&&e.from[0].event){if(e.from[0].event.eventAlreadyConsumed)return;e.from[0].event.eventAlreadyConsumed=!0}d.onLabelContentClickCB({id:d.id})})):(L.removeClassName("CATWebUXThumbnailClickableDiv"),ge=null,T&&(n.removeEventFromToken(T),T=null)),h.setTitleAndIconSectionVisibleFlag(M))}},this.getThumbnailLabelClickableFlag=function(){return _},this.setReplyButtonVisibility=function(t){j=t,d.onReplyCB&&j&&!fe?(fe=e.createElement("p",{id:"thumbReplyDiv"+c+"_"+d.id,class:"CATWebUXThumbnailReplyDiv wux-ui-3ds wux-ui-3ds-reply"}).inject(ie),he&&fe.setStyle("margin-right","28px"),fe.setStyle("display",a.getTouchMode()||W?"":"none"),Ce=n.addEvent(fe,"onPrimaryPointerClick",function(){ce=!0,d.onReplyCB({id:d.id})})):!j&&fe&&(ie.removeChild(fe),Ce&&n.removeEventFromToken(Ce),fe=null,Ce=null)},this.updateUserCredentials=function(e){if(e){void 0!==e.userName&&xe.userName!==e.userName&&(xe.userName=e.userName,xe.userName&&(t=!0),le&&(le.setText(xe.userName?xe.userName:""),le.title=xe.userName?xe.userName:"")),xe.defaultUserPic=e.defaultUserPic?e.defaultUserPic:xe.defaultUserPic,(void 0!==e.userColor&&xe.userColor!==e.userColor||void 0!==e.userPic&&xe.userPic!==e.userPic)&&(xe.userColor=e.userColor,xe.userPic=e.userPic,(xe.userPic||xe.userColor)&&(t=!0),J&&(xe.defaultUserPic&&J.addEventListener("error",function(){J.src=xe.defaultUserPic?xe.defaultUserPic:""}),J.src=xe.userPic,J.setStyles({"border-color":xe.userColor?"rgb("+xe.userColor.r+","+xe.userColor.g+","+xe.userColor.b+")":""}))),void 0!==e.date&&xe.date!==e.date&&(xe.date=e.date,xe.date&&(t=!0),ee&&(ee.setText(xe.date?xe.date:""),ee.title=xe.date?xe.date:""));var t=xe.userName||xe.date||xe.userPic||xe.userColor;$&&$.setStyle("display",xe.userName||xe.date?"":"none"),J&&J.setStyle("display",xe.userPic||xe.userColor?"":"none"),Q&&Q.setStyle("display",d.displayPrefix||t?"":"none"),t&&te&&te.setStyles({outline:""}),Y&&(t&&!Y.hasClassName("CATWebUXThumbnailSubContainerBackground")?Y.addClassName("CATWebUXThumbnailSubContainerBackground"):!t&&Y.hasClassName("CATWebUXThumbnailSubContainerBackground")&&Y.removeClassName("CATWebUXThumbnailSubContainerBackground"))}},je();var ze=function(e){F&&(U=!0,h.setCheckFlag(!y,e.from[0].event))};n.addEvent(ae,"onPrimaryPointerClick",ze),this.setIsCheckableFlag("boolean"==typeof d.isCheckable&&d.isCheckable),this.setCheckFlag("boolean"==typeof d.checkFlag&&d.checkFlag,null,!0),this.setDisplayFlag("boolean"==typeof d.displayFlag&&d.displayFlag),this.setPreview(d.preview,d.backgroundColor),this.allowTitleEdition("boolean"==typeof d.allowTitleEdition&&d.allowTitleEdition),this.setCtxMenuAvailability("boolean"==typeof d.allowCtxMenu&&d.allowCtxMenu),this.setTitleAndIconSectionVisibleFlag("boolean"!=typeof d.displayTitleAndIcon||d.displayTitleAndIcon),this.setThumbnailLabelClickableFlag("boolean"==typeof d.contentDivClickableFlag&&d.contentDivClickableFlag),this.updateUserCredentials({userName:d.userName,userColor:d.userColor,userPic:d.userPic,defaultUserPic:d.defaultUserPic,date:d.date}),this.setDisplayType("number"==typeof d.displayType?d.displayType:0),this.setReplyButtonVisibility("boolean"==typeof d.showReplyButton&&d.showReplyButton),d.isFavorite&&this.addInformationIcon({id:"favoriteSlide",fontIcon:"wux-ui-3ds-favorite-on"})}});return d.THUMBNAIL=0,d.TILE=1,d}),define("DS/CATWebUXComponents/CATWebUXInfoFlag",["UWA/Core","UWA/Class","DS/Visualization/ThreeJS_DS","DS/VisuEvents/EventsManager","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,n,i){"use strict";return t.extend({init:function(t){var o=t||{};if(o.frameWindow&&o.viewer){var a,s,l,r,c,d;this._parent(o);var u,m=0,h={},g=!1,C=!0,f=!o.dockingSide||"left"!==o.dockingSide&&"right"!==o.dockingSide?"right":o.dockingSide,p="";this.display=function(t){if(!t.dockingSide||t.dockingSide===f||"left"!==t.dockingSide&&"right"!==t.dockingSide||(f=t.dockingSide),p=t.style||"",u="function"==typeof t.compactDisplay?t.compactDisplay:null,a||(a=e.createElement("div",{class:"CATWebUXInfoFlag"}),o.frameWindow.getUIFrame().appendChild(a),s=e.createElement("div",{class:"CATWebUXInfoFlagMainDiv"}).inject(a),r=e.createElement("div",{class:"CATWebUXInfoFlagIcon"}).inject(s),l=e.createElement("p",{class:"CATWebUXInfoFlagParagraph"}).inject(s),c=e.createElement("div",{class:"CATWebUXInfoFlagIconDiv"}).inject(s),d=e.createElement("span",{class:"fonticon CATWebUXInfoFlagIconButton"}).inject(c),h.onBackgroundMod||(h.onBackgroundMod=o.viewer.onBackgroundModify(v)),h.onFreeZoneResize||(o.frameWindow.getImmersiveFrame().addEventListener("freeZoneResize",S),h.onFreeZoneResize=1)),this.hide(),t.className&&!a.hasClassName(t.className)&&a.addClassName(t.className),t.label?(l.setStyles({display:""}),l.innerText=t.label,l.title="",setTimeout(function(){l&&l.offsetWidth>190&&(s.title=t.title?t.title:t.label)},50)):(l.setStyles({display:"none"}),s.title=t.title||""),t.icon)r.setStyles({display:"",backgroundImage:'url("'+t.icon+'")'});else if(t.fontIcon){e.createElement("span",{class:t.fontIcon}).inject(r).setStyles({fontSize:"18px",color:"white",marginTop:"6px"}),r.setStyles({backgroundColor:"#368ec4",marginTop:0,"border-top-left-radius":"3px","border-bottom-left-radius":"3px"})}else r.setStyles({display:"none"});"Accept"===t.widgetType?(d.hasClassName("fonticon-cancel")&&d.removeClassName("fonticon-cancel"),d.addClassName("fonticon-check"),d.setStyles({color:"rgb(30, 163, 98)"})):"Cancel"===t.widgetType&&(d.hasClassName("fonticon-check")&&d.removeClassName("fonticon-check"),d.addClassName("fonticon-cancel"),d.setStyles({color:"rgb(255, 50, 50)"})),h.onPointerDownCB=i.addEvent(a,"onPrimaryPointerDownUnique",function(e){"touch"===(e.type?e.type:e.from[0].type).indexOf!==-1&&(b(),setTimeout(y,1e3))}),t.onClickCB?(h.onClickCB=i.addEvent(a,"onPrimaryPointerClick",t.onClickCB),s.addEventListener("mouseenter",b),s.addEventListener("mouseleave",y),y()):b(),v(o.viewer.backgroundColor),S(),a.setStyles({display:C?"":"none",opacity:1}),g=!0,"webUXStyle"===p&&(s.setStyles({"background-color":"rgb(226, 228, 227)","border-color":"rgb(204, 204, 204)",padding:0}),l.setStyles({fontSize:"16px",marginTop:"0px"}))},this.hide=function(){a&&g&&(g=!1,a.setStyles({opacity:0}),h.onClickCB&&(i.removeEventFromToken(h.onClickCB),h.onClickCB=null,s.removeEventListener("mouseenter",b),s.removeEventListener("mouseleave",y)),h.onPointerDownCB&&(i.removeEventFromToken(h.onPointerDownCB),h.onPointerDownCB=null),setTimeout(function(){!g&&a&&a.setStyles({display:"none"})},200))},this.isDisplayed=function(){return g},this.setVisibleFlag=function(e){C=e,a&&a.setStyles({display:C&&g?"":"none"})},this.getVisibleFlag=function(){return C},this.clean=function(){this.hide(),o&&o.frameWindow&&o.frameWindow.getUIFrame()&&a&&o.frameWindow.getUIFrame().removeChild(a),h.onBackgroundMod&&o.viewer&&o.viewer.unsubscribe(h.onBackgroundMod),h.onFreeZoneResize&&o.frameWindow&&o.frameWindow.getImmersiveFrame().removeEventListener("freeZoneResize",S),a=l=r=c=d=u=null,h={}}}function b(){""===p?c&&c.setStyles({opacity:1}):s.setStyles({"background-color":"rgb(216, 218, 217)"})}function y(){""===p?c&&c.setStyles({opacity:0}):s.setStyles({"background-color":"rgb(226, 228, 227)"})}function v(e){if(l&&""===p){var t=255*new n.Color(e).getHSL().l;l.setStyles({color:t>120?"rgb(0,0,0)":"rgb(255, 255, 255)"})}}function S(){m=0;var e=o.frameWindow.getImmersiveFrame();let t=e.getDockingElement("left"===f?WUXDockAreaEnum.LeftDockArea:WUXDockAreaEnum.RightDockArea);if(t.getContainedVisibleWindows().length>0&&!t.collapseDockingZoneFlag?(m=t.dockingZoneSize+t._collapserSize,o.frameWindow.getExecutionContext&&(m+=20)):t.interactiveDockAreaVisibleFlag&&(m=t.dockingZoneSize),m+=20,a&&(a.setStyles("left"===f?{left:m+"px"}:{right:m+"px"}),u&&r&&l)){l.setStyle("display","");var n=u({freeZoneWidth:e.getFreeZone().getSize().width,flagOffset:m,flagWidth:a.getSize().width});l.setStyle("display",n?"none":""),r.setStyles({"border-top-right-radius":n?"3px":"","border-bottom-right-radius":n?"3px":""})}}}})}),define("DS/CATWebUXComponents/CATWebUXSectionHeader",["UWA/Core","UWA/Class","DS/VisuEvents/EventsManager","DS/Controls/Toggle","DS/Utilities/TouchUtils","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,n,i,o){"use strict";var a=t.extend({init:function(t){var i,o,a=t||{};this._parent(a);var s,l,r,c=a.cmdData.id,d=!1,u=!1;if(this.getid=function(){return c},this.setCheckFlag=function(e){e?i.getElementsByClassName("checkComponent")[0].setStyles({"background-color":"rgb(54,142,196)"}):i.getElementsByClassName("checkComponent")[0].setStyles({"background-color":"rgb(255,255,255)"}),u=e},this.isCheckable=function(){return d},this.getContent=function(){return i},this.inject=function(e){return i.inject(e),this},this.clear=function(){n.removeEvent(i,"onPrimaryPointerClick",o)},a.type&&"subCommand"===a.type){if(i=e.createElement("div",{class:"CATWebUXSectionHeaderCheckOptions"}),a.checkable)r=a.checkable,d=r,new e.Element("div",{class:"checkComponent"}).inject(i).setStyles({width:"6px",height:"40px",float:"left","background-color":a.defaultCheckValue?"rgb(54,142,196)":"rgb(255,255,255)"});a.cmdData&&a.cmdData.icon?((s=e.createElement("img",{src:a.cmdData.icon}).inject(i)).setStyles({width:"22px",height:"22px"}),s.ondragstart=function(){return!1}):a.cmdData&&a.cmdData.fontIcon&&((s=e.createElement("span",{class:a.cmdData.fontIcon}).inject(i)).setStyles({float:"left","margin-top":"9px","margin-left":"10px","font-size":"18px"}),a.cmdData&&a.cmdData.fontIconColor&&s.setStyles({color:a.cmdData.fontIconColor}),s.setStyles({width:"22px",height:"22px"}),s.ondragstart=function(){return!1}),(l=e.createElement("p").inject(i)).innerHTML=a.cmdData?a.cmdData.nls:"",l.title=a.cmdData?a.cmdData.nls:"",o=function(){d&&a.updateSubMenuCheckState(u,c),a.cmdData.cb(),a.toggleFunc()}}else a.type&&"subMenuDisplayButton"===a.type?(i=e.createElement("div",{class:"CATWebUXSectionHeaderCheckOptions"}),(l=e.createElement("p").inject(i)).innerHTML=a.cmdData?a.cmdData.nls:"",l.title=a.cmdData?a.cmdData.nls:"",(s=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-chevron-right"}).inject(i)).setStyles({"font-size":"18px","margin-top":"11px"}),o=function(){a.displaySubMenuFunc(c)}):a.type&&"subMenuHideButton"===a.type?(i=e.createElement("div",{class:"CATWebUXSectionHeaderCheckOptions"}),(s=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-chevron-left"}).inject(i)).setStyles({"font-size":"18px","margin-top":"11px","margin-left":"11px"}),(l=e.createElement("p").inject(i)).innerHTML=a.cmdData?a.cmdData.nls:"",l.title=a.cmdData?a.cmdData.nls:"",l.setStyles({float:"right"}),o=function(){a.hideSubMenuFunc(c)}):a.cmdData&&"button"===a.cmdData.type&&(i=e.createElement("div",{class:"CATWebUXSectionHeaderCheckOptions"}),a.cmdData&&a.cmdData.icon?((s=e.createElement("img",{src:a.cmdData.icon}).inject(i)).setStyles({width:"22px",height:"22px"}),s.ondragstart=function(){return!1}):a.cmdData&&a.cmdData.fontIcon&&((s=e.createElement("span",{class:a.cmdData.fontIcon}).inject(i)).setStyles({float:"left","margin-top":"9px","margin-left":"10px","font-size":"18px"}),a.cmdData&&a.cmdData.fontIconColor&&s.setStyles({color:a.cmdData.fontIconColor}),s.setStyles({width:"22px",height:"22px"}),s.ondragstart=function(){return!1}),o=function(){a.cmdData.cb(),a.toggleFunc()},(l=e.createElement("p").inject(i)).innerHTML=a.cmdData?a.cmdData.nls:"",l.title=a.cmdData?a.cmdData.nls:"");n.addEvent(i,"onPrimaryPointerClick",function(){o()})}});return t.extend({init:function(t){var s=t||{};this._parent(s);var l,r,c,d,u,m,h,g,C,f=this,p=!0,b=!0,y=[],v=[],S=[],A=[],D=[];function T(){h&&!h.hasClassName("CATWebUXSectionHeaderSectionBulletsActivated")?(h.addClassName("CATWebUXSectionHeaderSectionBulletsActivated"),S.length&&S.forEach(e=>{e.setStyles({height:"0px"})}),g&&(g.setStyle("height",String(40*y.length)+"px"),g.setStyles({border:"1px solid rgba(0, 0, 0, 0.15)","box-shadow":"0 1px 2px rgba(0, 0, 0, 0.175)"}))):f.closeContextualSectionHeader()}this.displayMainContextualSectionHeader=function(){S.length&&S.forEach(e=>{e.setStyles({height:"0px"})}),g&&g.setStyle("height",String(40*y.length)+"px")},this.inject=function(e){return l.inject(e),this},this.getContent=function(){return l},this.clear=function(){var e;for(s.doubleClickCB&&n.removeEvent(r,"onPrimaryPointerDoubleClick",s.doubleClickCB),e=0;e<y.length;e++)y[e].clear();for(y.splice(0,y.length),e=0;e<v.length;e++)v[e].clear();if(v.splice(0,v.length),h&&n.removeEvent(h,"onPrimaryPointerClick",T),D&&D.length)for(e=0;e<D.length;e++)n.removeEventFromToken(D[e])},this.closeContextualSectionHeader=function(){h&&h.hasClassName("CATWebUXSectionHeaderSectionBulletsActivated")&&(g.setStyles({"border-bottom":"1px solid rgba(0, 0, 0, 0.1)","border-top":"none","box-shadow":"none"}),h.removeClassName("CATWebUXSectionHeaderSectionBulletsActivated"),g&&g.setStyle("height","0px"),S.length&&S.forEach(e=>{e.setStyles({height:"0px"})}))},this.displayContextualSubSection=function(e){g&&g.setStyle("height","0px");for(let t=0;t<S.length;t++)S[t].id===e&&S[t].setStyle("height",String(40*v.length)+"px")},this.updateSubMenuCheckState=function(e,t){for(let n=0;n<v.length;n++)v[n].isCheckable()&&(v[n].getid()!==t?v[n].setCheckFlag(!1):!1===e&&v[n].setCheckFlag(!0))},this.setHeaderLabel=function(e){d&&(d.innerHTML=e,void 0!==s.displayTooltip&&!0!==s.displayTooltip||(d.title=e))},this.setSubMenuCommands=function(t){var n;if(y.length){for(f.closeContextualSectionHeader(),n=0;n<y.length;n++)y[n].clear();for(y.splice(0,y.length),n=0;n<v.length;n++)v[n].clear();for(v.splice(0,v.length),g&&(r.removeChild(g),g=null),n=0;n<S.length;n++)r.removeChild(S[n]),S[n]=null;S=[]}if(t&&t.length)for((g=e.createElement("div",{class:"CATWebUXSectionHeaderContextualCmdSection"}).inject(r)).setStyles({height:"0px"}),n=0;n<t.length;n++){var i=new a({cmdData:t[n],toggleFunc:f.closeContextualSectionHeader,displaySubMenuFunc:f.displayContextualSubSection,type:t[n].type});if(i.inject(g),n!==t.length-1&&i.getContent().setStyles({"border-bottom":t[n].separator?"2px solid #E2E4E3":"1px solid #E2E4E3"}),y.push(i),t[n].subCommands){var o,s=t[n].subCommands,l=e.createElement("div",{class:"CATWebUXSectionHeaderContextualCmdSection",id:t[n].id}).inject(r);for(l.setStyle("height","0px"),S.push(l),v.push(new a({cmdData:t[n],hideSubMenuFunc:f.displayMainContextualSectionHeader,type:"subMenuHideButton"}).inject(l)),o=0;o<s.length;o++){var c=new a({cmdData:s[o],toggleFunc:f.closeContextualSectionHeader,type:"subCommand",checkable:t[n].subCommandsCheckable,defaultCheckValue:s[o].defaultCheckValue,updateSubMenuCheckState:f.updateSubMenuCheckState}).inject(l);v.push(c),t[n].subCommandsCheckable&&s[o].defaultCheckValue&&c.setCheckFlag(s[o].defaultCheckValue)}}}f.setSubMenuCommandsVisibility(p)},this.setSubMenuCommandsVisibility=function(e){p=e,h.setStyles({display:y.length&&p?"":"none"})},this.setQuickAccessCommands=function(t){var o;for(o=0;o<D.length;o++)n.removeEventFromToken(D[o]);for(D.length=0;c.firstChild;)c.removeChild(c.firstChild);A.length=0,t&&t.length&&t.forEach(function(t){if("switch"===t.type){var o=new i({value:t.id,type:"switch",checkFlag:"boolean"==typeof t.checkFlag&&t.checkFlag}).inject(c);o.elements.container.title=t.title,o.quickBtnType=t.type,A.push(o),o.addEventListener("change",function(e){!C&&t.cb&&t.cb(e),C=!1})}else if("dropZone"===t.type){var a=new e.Element("div",{text:t.zoneText,class:"infoReq"}),s=new e.Element("div",{class:"dropCheckObjZone"}).inject(c);a.inject(s);let n=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"}).inject(s);n.addClassName("objPlusIcon checksPanel-checkObjPlusIcon"),n.hide(),s.ondrop=function(e){e.preventDefault(),e.stopPropagation(),t.cb&&t.cb(e),this.getElementsByClassName("objPlusIcon")[0].hide(),this.getElementsByClassName("infoReq")[0].show()},s.ondragenter=function(e){e.preventDefault(),e.stopPropagation(),this.getElementsByClassName("objPlusIcon")[0].show(),this.getElementsByClassName("infoReq")[0].hide(),this.addClassName("valDropZoneDrag")},s.ondragleave=function(){this.getElementsByClassName("objPlusIcon")[0].hide(),this.getElementsByClassName("infoReq")[0].show(),this.removeClassName("valDropZoneDrag")},s.ondragover=function(e){e.preventDefault(),e.stopPropagation()},s.ondragend=function(e){e.preventDefault(),e.stopPropagation()}}else{var l=e.createElement("span",{id:"DMUQuickAccess"+t.id,class:(t.fontIcon||t.initialFontIcon||"")+" CATWebUXSectionHeaderSectionBullets"}).inject(c);"checkbox"===t.type&&(l.checkFlag=Boolean(t.checkFlag),l.checkFlag&&l.setStyles({color:"rgb(47, 166, 204)"})),l.quickBtnType=t.type,l.title=t.title,t.label&&l.setText(t.label),t.className&&l.addClassName(t.className),A.push(l),t.cb&&D.push(n.addEvent(l,"onPrimaryPointerClick",function(e){"checkbox"===t.type?(l.checkFlag=!l.checkFlag,l.setStyles({color:l.checkFlag?"rgb(47, 166, 204)":""})):"toggle"===t.type&&(l.hasClassName(t.initialFontIcon)?(l.removeClassName(t.initialFontIcon),l.addClassName(t.alternativeFontIcon)):(l.removeClassName(t.alternativeFontIcon),l.addClassName(t.initialFontIcon))),l.hasClassName("disable")||("toggle"===t.type?t.cb(l.hasClassName(t.alternativeFontIcon)):t.cb(e.from[0].event))}))}}),f.setQuickAccessCommandsVisibility(b)},this.setQuickAccessCommandsVisibility=function(e){b=e,c.setStyles({display:A.length&&b?"":"none"})},this.setAdditionalCommandsVisibility=function(e){f.setSubMenuCommandsVisibility(e),f.setQuickAccessCommandsVisibility(e)},this.enableHeaderDrag=function(e){u&&(u.setAttribute("draggable",e),e?o.getTouchMode()&&m.setStyle("visibility",""):m.setStyle("visibility","hidden"))},this.setAdditionalCheckBoxActiveFlag=function(e,t){e>=0&&e<A.length&&"boolean"==typeof A[e].checkFlag&&A[e].checkFlag!==t&&("switch"!==A[e].quickBtnType?A[e].setStyles({color:t?"rgb(47, 166, 204)":""}):C=!0,A[e].checkFlag=t)},this.setQuickAccessCommandActiveFlag=function(e,t){var n=A.findIndex(function(t){return t.id&&t.id.includes(e)});n>=0&&A[n].hasClassName("CATWebUXSectionHeaderSectionBullets")&&(t&&A[n].hasClassName("disable")?A[n].removeClassName("disable"):t||A[n].hasClassName("disable")||A[n].addClassName("disable"))},l=e.createElement("div",{class:"CATWebUXSectionHeaderMainDiv"}),r=e.createElement("div",{class:"CATWebUXSectionHeader"}).inject(l),s.fontIcon?e.createElement("div",{class:"CATWebUXSectionHeaderIcon "+s.fontIcon}).inject(r):s.draggable&&(u=e.createElement("div",{class:"CATWebUXSectionHeaderDraggableDiv",draggable:!0}).inject(r),m=e.createElement("div",{class:"CATWebUXSectionHeaderDraggableIcon wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-drag-grip"}).inject(u),u.ondragstart=function(e){var t=e.target.id;s.onDragStart&&((t=s.onDragStart())||(t=e.target.id)),e.dataTransfer.setData("text",t)},o.getTouchMode()||(u.addEventListener("mouseenter",function(){"true"===u.getAttribute("draggable")&&m.setStyle("visibility","")}),u.addEventListener("mouseleave",function(){"true"===u.getAttribute("draggable")&&m.setStyle("visibility","hidden")}),m.setStyle("visibility","hidden"))),d=e.createElement("p",{class:"CATWebUXSectionHeaderLabel"}).inject(u||r),c=e.createElement("div",{class:"CATWebUXSectionHeaderQuickAccessDiv"}).inject(r),h=e.createElement("span",{class:"fonticon fonticon-menu CATWebUXSectionHeaderSectionBullets"}).inject(r),this.setSubMenuCommands(s.cmdList),this.setQuickAccessCommands(s.quickAccessBtnList),this.setHeaderLabel(s.sectionLabel),s.doubleClickCB&&n.addEvent(r,"onPrimaryPointerDoubleClick",s.doubleClickCB),n.addEvent(h,"onPrimaryPointerClick",T)}})}),define("DS/CATWebUXComponents/DMUCommandsManager",["require","exports","DS/ApplicationFrame/CommandsManager","DS/CoreEvents/Events"],function(e,t,n,i){"use strict";let o,a,s,l=function(){let e=Boolean("wafr"===window.require("DS/PADUtils/PADSettingsMgt").getSetting("eno3dviewer_infrastructure_version"));return localStorage.setItem("WebAfr_v2_activated",e.toString()),e},r=[],c=[{oldKey:"CAT3DAnnotInsightWidgetDefaultHdr",newKey:"CAT3DAnnotationWidgetDefaultHdr"},{oldKey:"CAT3DAnnotationSwitchOnOffHdr",newKey:"AnnotationSwitchOnOff",localStorageValue:"CAT3DAnnotationSwitchOnOffCmd"},{oldKey:"CAT3DAnnotSemanticAttrBrowserHdr",newKey:"AnnotationSemanticBrowser",localStorageValue:"CAT3DAnnotSemanticAttrBrowserCmd"},{oldKey:"CAT3DAnnotationBrowserHdr",newKey:"AnnotationBrowser",localStorageValue:"CAT3DAnnotationBrowserCmd"},{oldKey:"CAT3DAnnotationFilterHdr",newKey:"AnnotationFilter",localStorageValue:"CAT3DAnnotationFilterCmd"},{oldKey:"CAT3DAnnotShowAttrRelatedInfosHdr",newKey:"AttrRelatedInfos"},{oldKey:"CAT3DAnnotationBlankingHdr",newKey:"AnnotationBlanking"},{oldKey:"VisuReframeView",newKey:"VisuReframeViewCmd"},{oldKey:"VisuVisibleSpace",newKey:"VisuVisibleSpaceCmd"},{oldKey:"CleanAll",newKey:"ENO3DCleanViewCmd"},{oldKey:"HideShowHdr",newKey:"ENO3DHideShowCmd"},{oldKey:"Home",newKey:"OpenLandingPageCmd"},{oldKey:"RemoveRootHdr",newKey:"ENO3DRemoveRootCmd"}],d=function(e){let t=e;return c.forEach(n=>{n.oldKey===e&&(t=n.newKey)}),t},u=function(e){if(!l())return;let t=!1;for(let n=0;n<r.length;n++)if(e===r[n])return t=!0},m=function(e){if(!l())return;if(!e)return;if(!e.getSourceApp)return;let t=e.getSourceApp()?e.getSourceApp().options.appConfig.handlers:e.getTargetApp().options.appConfig.handlers;t&&t.defaultCommand&&(s=t.defaultCommand)},h=function(e){if(!l())return;if(!e)return;if(!e.getSourceApp)return;let t=e.getSourceApp()?e.getSourceApp().options.appConfig.handlers:e.getTargetApp().options.appConfig.handlers;if(t){if(t.check)for(let e=0;e<t.check.length;e++)t.check[e].identifier&&r.push(t.check[e].identifier);if(t.default)for(let e=0;e<t.default.length;e++)t.default[e].identifier&&r.push(t.default[e].identifier)}},g=function(e,t){if(!l())return;if(!e)return;if(!e.getSourceApp)return;let n=e.getSourceApp()?e.getSourceApp().options.appConfig.handlers:e.getTargetApp().options.appConfig.handlers;if(n){let e;if(n.check)for(let i=0;i<n.check.length;i++)if(n.check[i].identifier===t){if((e=n.check[i]).arguments={},e.argument){let t=Object.entries(e.argument),n=[];for(let e=0;e<t.length;e++){let i={};i[t[e][0]]=t[e][1],n.push(i)}e.arguments=n}return e}if(n.default)for(let i=0;i<n.default.length;i++)if(n.default[i].identifier===t){if((e=n.default[i]).arguments={},e.argument){let t=Object.entries(e.argument),n=[];for(let e=0;e<t.length;e++){let i={};i[t[e][0]]=t[e][1],n.push(i)}e.arguments=n}return e}}};return{...n.__proto__,get _commands(){return n._commands},get _cmdCheckHeader(){return n._cmdCheckHeader},get _commandsState(){return n._commandsState},dmuSetExecutionContext:e=>{l()&&(o=e,r.length&&s||(h(e),m(e)))},dmuSetHandlerComponent:function(e){l()&&(r.length&&s||(h(e),m(e)))},getCommand:function(e,t){if(!l())return n.getCommand(e,t);if(!e)return;!o&&t&&(o=t),r.length||h(t),s||m(t);let c=null;return e.replace("Format_",""),e=function(e){if(!(a=window.widget.data.afrAppId?window.widget.data.afrAppId:window.widget.data.appId).includes("ENOI3"))return e;let t=e;return"CATWebUXGenerateIssueHdr"===e?t="PIMWebUXGenerateIssueHdr":"CATWebUXGenerateIssueTemplateHdr"===e?t="PIMWebUXGenerateIssueTemplateHdr":"CATWebUXGenerateCAHdr"===e&&(t="PIMWebUXGenerateCAHdr"),t}(e=function(e){a=window.widget.data.afrAppId?window.widget.data.afrAppId:window.widget.data.appId;let t=e;return"CATWebUXSlideShowNextHdr"===e?a.includes("CATA3")?t="AnnotSlideShowNextHdr":a.includes("ENOR3")?t="SlideShowNextHdr":a.includes("ENOI3")&&(t="PIMSlideShowNextHdr"):"CATWebUXSlideShowPreviousHdr"===e?a.includes("CATA3")?t="AnnotSlideShowPreviousHdr":a.includes("ENOR3")?t="SlideShowPreviousHdr":a.includes("ENOI3")&&(t="PIMSlideShowPreviousHdr"):"CATWebUXSlideShowExitHdr"===e&&(a.includes("CATA3")?t="AnnotSlideShowExitHdr":a.includes("ENOR3")?t="SlideShowExitHdr":a.includes("ENOI3")&&(t="PIMSlideShowExitHdr")),t}(e=d(e))),u(e)&&(c={id:e,options:g(o,e),_isEnabled:!0,_isDisabled:!1,_isRunning:!1,_isEnding:!1,_isPaused:!1,_isResuming:!1,_isCancelling:!1,begin:function(t){return this._isRunning=!0,this._isEnding=this._isPaused=this._isCancelling=!1,i.publish({event:"onCommandStart/BEGIN",data:e}),o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:e,args:t})},beginExecute:function(){return this._isRunning=!0,this._isEnding=this._isPaused=this._isCancelling=!1,i.publish({event:"onCommandStart/BEGIN",data:e}),o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:e})},execute:function(){return this._isRunning=!0,this._isEnding=this._isPaused=this._isCancelling=!1,i.publish({event:"onCommandStart/BEGIN",data:e}),o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:e})},enable:function(){this._isEnabled=!0,this._isDisabled=!1;let t=o.getComponent(WAfrStandardComponentKey.HandlerComponent);if(t)return t.hasHandler(e)?t.enableHandler(e):t.hasCheckHandler(e)?t.enableCheck(e):!!t.hasRadioHandler(e)&&t.enableRadio(e)},activate:function(){return!0},disable:function(){this._isDisabled=!0,this._isEnabled=!1,i.publish({event:e+"/DISABLED",data:this});let t=o.getComponent(WAfrStandardComponentKey.HandlerComponent);if(t)return t.hasHandler(e)?t.disableHandler(e):t.hasCheckHandler(e)?t.disableCheck(e):!!t.hasRadioHandler(e)&&t.disableRadio(e)},deactivate:function(){return!0},isEnabled:function(){let t=o.getComponent(WAfrStandardComponentKey.HandlerComponent);if(t)return"CATRelatedData3DGridHdr"===e?t.isCheckExecutable("CATRelatedData3DGridHdr"):t.isHandlerExecutable(e)},isRunning:function(){return o.getComponent(WAfrStandardComponentKey.CommandsManagerComponent).getRunningCommand()===e},isPaused:function(){return this._isPaused},isEnding:function(){return o.getComponent(WAfrStandardComponentKey.CommandsManagerComponent).getRunningCommand()===e},pauseExecute:function(){return this._isPaused=!0,!0},resumeExecute:function(){return this._isResuming=!0,!0},cancel:function(){this._isCancelling=!0,this._isRunning=!1,s&&o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:s})},cancelExecute:function(){this._isCancelling=!0,this._isRunning=!1,s&&o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:s})},end:function(){this._isEnding=!0,this._isRunning=!1,s&&o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:s})},endExecute:function(){this._isEnding=!0,this._isRunning=!1,s&&o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:s})},onCommandStart:function(e,t){t||(t="");let n="/WUX/AFR/CMD/"+t+"/BEGIN";return i.subscribe({event:n},e)},onBeginExecute:function(t){return i.subscribe({event:e+"/BEGIN"},t)},onEnd:function(t){return i.subscribe({event:e+"/END"},t)},onEndExecute:function(t){return i.subscribe({event:e+"/END"},t)},getExecutionContext:function(){if(o)return o;window.console.log("No execution context found")}}),c},getCommandCheckHeader:function(e,t){if(!l())return n.getCommandCheckHeader(e,t);if(!e)return;!o&&t&&(o=t),r.length||h(t),s||m(t);let a=null;e.replace("Format_",""),"RootPanel"===e&&(e="ToggleLeftSidePanel");let C=function(e){let t;return c.forEach(n=>{n.oldKey===e&&(t=n.localStorageValue)}),t}(e);return e=d(e),u(e)&&(a={id:e,options:g(o,e),_isEnabled:!0,_isDisabled:!1,_isRunning:!1,_isEnding:!1,_isPaused:!1,_isResuming:!1,_isCancelling:!1,begin:async function(t){this._isRunning=!0,this._isEnding=this._isPaused=this._isCancelling=!1,await new Promise(e=>setTimeout(e,100)),o.getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:e,state:!0,args:t}),i.publish({event:"onCommandStart/BEGIN",data:e})},beginExecute:async function(){this._isRunning=!0,this._isEnding=this._isPaused=this._isCancelling=!1,await new Promise(e=>setTimeout(e,100)),o.getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:e,state:!0}),i.publish({event:"onCommandStart/BEGIN",data:e})},execute:async function(){this._isRunning=!0,this._isEnding=this._isPaused=this._isCancelling=!1,await new Promise(e=>setTimeout(e,100)),o.getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:e,state:!0}),i.publish({event:"onCommandStart/BEGIN",data:e})},enable:function(){this._isEnabled=!0,this._isDisabled=!1;let t=o.getComponent(WAfrStandardComponentKey.HandlerComponent);if(t)return t.hasHandler(e)?t.enableHandler(e):t.hasCheckHandler(e)?t.enableCheck(e):!!t.hasRadioHandler(e)&&t.enableRadio(e)},activate:function(){return!0},disable:function(){this._isDisabled=!0,this._isEnabled=!1;let t=o.getComponent(WAfrStandardComponentKey.HandlerComponent);if(t)return t.hasHandler(e)?t.disableHandler(e):t.hasCheckHandler(e)?t.disableCheck(e):!!t.hasRadioHandler(e)&&t.disableRadio(e)},deactivate:function(){return!0},isEnabled:function(){let t=o.getComponent(WAfrStandardComponentKey.HandlerComponent);if("CATRelatedData3DGridHdr"===e&&(e="Display3DGrid"),t)return t.isCheckExecutable(e)},isRunning:function(){return o.getComponent(WAfrStandardComponentKey.CommandsManagerComponent).getRunningCommand()===e},isPaused:function(){return this._isPaused},pauseExecute:function(){return this._isPaused=!0,!0},resumeExecute:function(){return this._isResuming=!0,!0},cancel:function(){this._isCancelling=!0,this._isRunning=!1,s&&o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:s})},cancelExecute:function(){this._isCancelling=!0,this._isRunning=!1,s&&o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:s})},end:function(){this._isEnding=!0,this._isRunning=!1,o.getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:e,state:!1})},endExecute:function(){this._isEnding=!0,this._isRunning=!1,o.getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:e,state:!1})},onCommandStart:function(e,t){t||(t="");let n="/WUX/AFR/CMD/"+t+"/BEGIN";return i.subscribe({event:n},e)},getState:function(){return o.getComponent(WAfrStandardComponentKey.HandlerComponent).getCheckState({id:e})},setState:function(t){let n=o.getComponent(WAfrStandardComponentKey.HandlerComponent);C&&localStorage.setItem(C,t.toString()),n.setCheckState({id:e,state:t})},toggleState:function(){this.setState(!this.getState())},onStateChange:function(t){let n=e+"/TOGGLECHECK";return i.subscribe({event:n},t)}}),a},_getCurrent:function(e){return l()?null:n._getCurrent(e)},_getDefaultCommand:function(e){return l()?{id:s,options:g(o,s),begin:function(e){o.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:s,args:e})},enable:function(){o.getComponent(WAfrStandardComponentKey.HandlerComponent).enableHandler(s)},disable:function(){o.getComponent(WAfrStandardComponentKey.HandlerComponent).disableHandler(s)},isRunning:function(){return!0},isPaused:function(){return!1}}:n._getDefaultCommand(e)},setDefaultCommand:function(e){if(!l())return n.setDefaultCommand(e);let t=e.ID;(e.context?e.context:o).getComponent(WAfrStandardComponentKey.CommandsManagerComponent).setDefaultCommand(t)},resetDefaultCommand:function(e){if(!l())return n.resetDefaultCommand(e);m(o);let t=s;o.getComponent(WAfrStandardComponentKey.CommandsManagerComponent).setDefaultCommand(t)},onCommandStart:function(e,t){if(!l())return n.onCommandStart(e,t);return i.subscribe({event:"onCommandStart/BEGIN"},e)},refreshCommandsManager:function(e,t){r=[],h(o=e),s=t||s}}}),define("DS/CATWebUXComponents/DMUFrameWindow",["require","exports"],function(e,t){"use strict";let n,i,o=!1;return class{static init(e,t){o=Boolean("ENO3DView"===e.name||(null==t?void 0:t.executionContext)),t&&t.executionContext&&(i||o||(i=e.getFrameWindow()),e.getFrameWindow=function(){return n||((n={}).getExecutionContext=function(){return t.executionContext},n.getImmersiveFrame=function(){return o?t.executionContext.getComponent(WAfrStandardComponentKey.UIFrame).getImmersiveFrame():i.getImmersiveFrame()},n.getUIFrame=function(){return o?t.executionContext.getComponent(WAfrStandardComponentKey.UIFrame).getUIFrame():i.getUIFrame()},n.getViewer=function(){return o?t.executionContext.getComponent("Viewer").get3DViewer():i.getViewer()},n.getViewers=function(){return o?[t.executionContext.getComponent("Viewer").get3DViewer()]:i.getViewers()},n.getContextualUIManager=function(){let e=o?t.executionContext.getComponent(WAfrStandardComponentKey.UIComponent).getContextualUIComponentManager():i.getContextualUIManager();if(o){let t=e.getContextualBar();t&&(t.getPosition=function(){if(t._isShown)return{x:t.options.x?t.options.x:t.options.Xposition,y:t.options.y?t.options.y:t.options.Yposition}})}return e},n.getViewerFrame=function(){return o?t.executionContext.getComponent(WAfrStandardComponentKey.UIFrame).getViewerLayout():i.getViewerFrame()},n.getTree=function(){return o?null:i.getTree()},n.getActionBar=function(){return o?null:i.getActionBar()},n.loadActionBar=function(e){return o?null:i.loadActionBar(e)},n.getContent=function(){return o?t.executionContext.getComponent("Viewer").getContent():i.getContent()},n.getViewpoint=function(){return o?t.executionContext.getComponent("Viewer").getViewpoint():i.getViewpoint()},n)})}static reset(){n=void 0}}}),define("DS/CATWebUXComponents/DMUStateCommand",["require","exports","DS/StateCommandEngine/StateCommand","DS/WAfrStateCommands/StateEngine","DS/CATWebUXComponents/DMUFrameWindow"],function(e,t,n,i,o){"use strict";return n.extend({init:function(e,t){this._parent(e,t),this.options=e,this.executionContext=e.executionContext;let n=this;function a(e){"27"!==e.code&&"Escape"!==e.key||n.cancelExecute()}this.executionContext&&(o.init(this,e),this.isPaused=function(){return!1},this.isRunning=function(){return n.options.ID===n.getId()},i&&i.createGraph.apply(n),document.addEventListener("keydown",a),this.destroy=function(){document.removeEventListener("keydown",a)})}})}),define("DS/CATWebUXComponents/DMUCommand",["require","exports","UWA/Class","DS/ApplicationFrame/Command","DS/CoreEvents/Events","DS/CATWebUXComponents/DMUFrameWindow"],function(e,t,n,i,o,a){"use strict";return i.extend({init:function(e,t){this._parent(e,t);let n=this;if(n&&n.options&&n.options.executionContext){a.init(this,e);let t=function(e){"27"!==e.code&&"Escape"!==e.key||n.cancelExecute()};this.isRunning=function(){return n.options.executionContext.getComponent(WAfrStandardComponentKey.CommandsManagerComponent).getRunningCommand()===n.getId()},this.cancel=function(){return n.done()},this.end=function(){return n.done()},this.enable=function(){n.options.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent).enableHandler(n.getId())},this.disable=function(){n.options.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent).disableHandler(n.getId())},this.publish=function(e){o.publish(e)},document.addEventListener("keydown",t),this.destroy=function(){document.removeEventListener("keydown",t)}}}})}),define("DS/CATWebUXComponents/DMUCommandCheckHeader",["require","exports","DS/ApplicationFrame/CommandCheckHeader","DS/CATWebUXComponents/DMUFrameWindow"],function(e,t,n,i){"use strict";return n.extend({init:function(e,t){this._parent(e,t);let n=this;n&&n.options&&n.options.executionContext&&(i.init(this,e),this.isRunning=function(){return n.options.executionContext.getComponent(WAfrStandardComponentKey.CommandsManagerComponent).getRunningCommand()===n.getId()},this.enable=function(){n.options.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent).enableHandler(n.getId())},this.disable=function(){n.options.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent).disableHandler(n.getId())})}})}),define("DS/CATWebUXComponents/CATWebUXValidationPanel",["UWA/Core","UWA/Class","DS/CATWebUXComponents/CATWebUXNotifBar","i18n!DS/CATWebUXComponents/assets/nls/CATWebUXComponents"],function(e,t,n,i){"use strict";return t.extend({init:function(t){var o,a,s,l=null,r=null;o=t.message,a=i.validationPanelOk,s=i.validationPanelCancel,this.display=function(t,i){return l=new e.Element("div",{class:"CATWebUXValidationPanel","data-rec-id":"WebUXValidationPanel",styles:{position:"absolute",display:"inline-block"}}),r||((r=new n({className:"WebUXValidationPanel"}).inject(l)).add({msgType:"primary",message:o,closable:!1,buttons:[{className:"primary",label:a,onClick:t},{className:"default",label:s,onClick:i}]}),r.show()),l},this.show=function(){l&&l.setStyle("display","inline-block")},this.hide=function(){l&&l.setStyle("display","none")},this.setButtonEnableFlag=function(e){var t=document.getElementsByClassName("CATWebUXNotifBar"),n=e.btnId,i=e.enableFlag,o=null;"Ok"===n?o=t[0].getElementsByClassName("btn-primary"):"Cancel"===n&&(o=t[0].getElementsByClassName("btn-default")),o&&o[0]&&(!0===i?o[0].disabled=!1:!1===i&&(o[0].disabled=!0))},this.destroy=function(){r&&r.destroy(),r=l=null}}})});