define("DS/DMUReviewFacets/DMUR3MReviewController",["UWA/Core","UWA/Class","DS/Controls/Expander","DS/Controls/Button","DS/DMUControls/DMUReviewExpander","DS/DMUValidationPersistence/DMUValidationPersistenceServices","DS/PlatformAPI/PlatformAPI","i18n!DS/DMUReviewFacets/assets/nls/DMUReviewFacets","css!DS/DMUReviewFacets/DMUReviewFacets.css"],function(e,t,n,i,s,l,a,o){"use strict";var c=t.extend({init:function(t){this._parent(t);var c=[];c.statusOK={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-check",fonticonColor:"rgb(71,119,56)"},c.statusKO={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-wrong",fonticonColor:"rgb(234,79,55)"},c.statusUNK={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-i-question",fonticonColor:"#007DA3"},c.statusTBA={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-attention",fonticonColor:"#007DA3"},c.requirement={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-requirement",fonticonColor:"black"},c.highlight_urgent={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-alert",fonticonColor:"rgb(153, 7, 7)"},c.highlight_high={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high",fonticonColor:"rgb(234,79,55)"},c.highlight_medium={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium",fonticonColor:"rgb(232,123,0)"},c.highlight_low={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low",fonticonColor:"rgb(71,119,56)"},c.ca_high={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change",fonticonColor:"rgb(234,79,55)"},c.ca_medium={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change",fonticonColor:"rgb(232,123,0)"},c.ca_low={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change",fonticonColor:"rgb(71,119,56)"};var d,h,r,g,u=[c.statusUNK,c.statusOK,c.statusKO,c.requirement],p=[c.statusTBA,c.highlight_low,c.highlight_medium,c.highlight_high,c.statusOK,c.highlight_urgent],m=[],f=[],C=!1,v=!1,x=[],w=[],y=[],E=[],D=function(){},M=function(e){var t=!1;e.stopPropagation();var n,i=this.getParents();for(let e=0;e<i.length;e++){if(i[e].hasClassName("highlightsPanel-highlightsExpanders")){t=!0,n=i[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.expand()}if(i[e].hasClassName("checksPanel-checksExpanders")){t=!0,n=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.expand()}}if(!1===t)for(let e=0;e<i.length;e++){if(i[e].hasClassName("highlightsContent")){n=i[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.expand()}if(i[e].hasClassName("checksContent")){n=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.expand()}}},k=function(e){var t=!1;e.stopPropagation();var n,i=this.getParents();for(let e=0;e<i.length;e++){if(i[e].hasClassName("highlightsPanel-highlightsExpanders")){t=!0,n=i[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.collapse()}if(i[e].hasClassName("checksPanel-checksExpanders")){t=!0,n=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.collapse()}}if(!1===t)for(let e=0;e<i.length;e++){if(i[e].hasClassName("highlightsContent")){n=i[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.collapse()}if(i[e].hasClassName("checksContent")){n=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.collapse()}}},I=function(e,t,n){var i=[];t&&t.length>0&&t.forEach(function(e){var t=e.objectId;t||(t=e.object.getPlmID()),i.push({sObjectId:t,sListOfAttributesToModify:e.attributesList})}),l.updateAttributes({validationId:e,objectsToModify:i,platform:d,onAttributesSaveCompleted:function(e){var t,i,s,l=e.modifiedObjects[0];if(t=[l.pId],l.sName&&(t[l.pId]={title:l.sName},g(t)),l.sDescription&&(t[l.pId]={description:l.sDescription},g(t)),"Check"===n){l.iCheckState&&(t[l.pId]={iCheckState:l.iCheckState},g(t));for(let e=0;e<f.length;e++)f[e].updateImpactedCheckDisplay({id:l.pId,status:l.iCheckState?l.iCheckState:void 0,name:l.sName?l.sName:void 0});for(let e=0;e<w.length;e++){var a=y[w[e]].checks[l.pId];if(a&&l.iCheckState?a.status=l.iCheckState:a&&l.sName?a.name=l.sName:a&&l.sDescription&&(a.description=l.sDescription),x[w[e]]&&x[w[e]][l.pId].length){i=x[w[e]][l.pId];for(let t=0;t<i.length;t++){s=x[w[e]][i[t].id];for(let e=0;e<s.length;e++)s[e].id===l.pId&&(l.iCheckState?s[e].status=l.iCheckState:l.sName&&(s[e].name=l.sName))}}}}if("Highlight"===n){for(let e=0;e<m.length;e++)m[e].updateAssociatedHighlightsDisplay({id:l.pId,rating:l.iPresentationRating?l.iPresentationRating:void 0,name:l.sName?l.sName:void 0});for(let e=0;e<w.length;e++){var o=y[w[e]].highlights[l.pId];if(o&&l.iPresentationRating?o.rating=parseInt(l.iPresentationRating):o&&l.sName?o.name=l.sName:o&&l.sDescription&&(o.description=l.sDescription),x[w[e]]&&x[w[e]][l.pId].length){s=x[w[e]][l.pId];for(let t=0;t<s.length;t++){i=x[w[e]][s[t].id];for(let e=0;e<i.length;e++)i[e].id===l.pId&&(l.iPresentationRating?i[e].rating=l.iPresentationRating:l.sName&&(i[e].name=l.sName))}}}}},onAttributesSaveFailed:function(){}})},b=function(e,t,n){var i,s=[];"status"===t&&s.push({iCheckState:n}),"name"===t&&s.push({sName:n}),"description"===t&&s.push({sDescription:n});var l=[];l.push({attributesList:s,objectId:e});for(let t=0;t<w.length;t++)y[w[t]].checks[e]&&(i=w[t]);if(I(i,l,"Check"),"status"===t){let t;switch(n){case 1:t="InProgress";break;case 2:t="Passed";break;case 3:t="Failed"}a.publish("DS/PADUtils/PADCommandProxy/validationState",{validationId:i,checkId:e,checkStatus:t})}},N=function(e,t,n){var i,s=[];"rating"===t&&s.push({iPresentationRating:n}),"name"===t&&s.push({sName:n}),"description"===t&&s.push({sDescription:n});var l=[];l.push({attributesList:s,objectId:e});for(let t=0;t<w.length;t++)y[w[t]].highlights[e]&&(i=w[t]);I(i,l,"Highlight")},A=function(e){var t,n;if(e&&e.length)for(let i=0;i<e.length;i++)if(!y[e[i].id]){w.push(e[i].id),y[e[i].id]={highlights:[],checks:[],name:e[i].name},E[e[i].id]={highlights:[],checks:[]},t=e[i].children;for(let s=0;s<t.length;s++)n=t[s].id,"DMUValidationExposedPresentation"===t[s].type&&(y[e[i].id].highlights[n]={id:n,rating:parseInt(t[s].rating),name:t[s].name,description:t[s].description,associatedCheck:t[s].associatedCheck,issues:t[s].Issue,changeAction:t[s].ChangeAction},E[e[i].id].highlights.push({id:n,rating:parseInt(t[s].rating),name:t[s].name,description:t[s].description,associatedCheck:t[s].associatedCheck,issues:t[s].Issue,changeAction:t[s].ChangeAction})),"DMUValidationCheck"===t[s].type&&(y[e[i].id].checks[n]={id:n,status:parseInt(t[s].state),name:t[s].name,description:t[s].description,requirements:t[s].children?t[s].children:void 0},E[e[i].id].checks.push({id:n,status:parseInt(t[s].state),name:t[s].name,description:t[s].description,requirements:t[s].children?t[s].children:void 0}))}},S=function(e){var t,n,i,s;if(e&&e.length)for(let l=0;l<e.length;l++)if(n=e[l].id,!x[n]){t=E[n].highlights;for(let e=0;e<t.length;e++)if(i=t[e].id,t[e].associatedCheck&&t[e].associatedCheck.length){s=t[e].associatedCheck;for(let e=0;e<s.length;e++)x[n]||(x[n]=[]),x[n][i]||(x[n][i]=[]),x[n][s[e]]||(x[n][s[e]]=[]),x[n][i].push({id:y[n].checks[s[e]].id,status:y[n].checks[s[e]].status,name:y[n].checks[s[e]].name}),x[n][s[e]].push({id:y[n].highlights[i].id,rating:y[n].highlights[i].rating,name:y[n].highlights[i].name})}}},j=function(e,t){var n=new s({objectData:{id:e.id,rating:e.rating,name:e.name,description:e.description?e.description:"",changeAction:e.changeAction?e.changeAction:void 0,issues:e.issues?e.issues:void 0},editionMode:!1,readOnly:!1,onHighlightAttributeChanged:N,icons:p,checkIcons:u,impChecksInfos:x[t]?x[t]:[],type:"Highlight",panelType:{type:"facet"},highlightEditMode:R(t).highlight});return n.getMainDiv().getContent().addClassName("highlightFacetExpander"),n.getMainDiv().expand(),f.push(n),n},R=e=>{const t=(()=>JSON.parse(localStorage.getItem("r3mValidationObjects")))()[e];let n;const i=t.validState,s=t.maturityDisp;n=t.restrictedEdition?t.restrictedEdition:"Deactivated";const l={Deactivated:"stateEdit",Draft:"readOnly","In Work":"inprogress"===i.toLowerCase()&&(()=>{let e=window.widget.getValue("xPref_CREDENTIAL"),n=e.split(".");e=n[0]?n[0]:"";return(()=>{var e=a.getUser(),t="";return e&&(t=e.login),t})()===t.ownerid||["VPLMProjectLeader","VPLMAdmin"].includes(e)})()?"stateEdit":"readOnly",Frozen:"readOnly",Released:"readOnly",Obsolete:"readOnly"};let o=l[n]||l[s]||"readOnly";return{check:{canCreate:!1,canEditDef:!1,canEditState:"stateEdit"===o,canDelete:!1},highlight:{canCreate:!1,canEditDef:!1,canEditPriority:"stateEdit"===o,canDelete:!1}}},U=function(e,t){var n=new s({objectData:{id:e.id,status:e.status,name:e.name,description:e.description?e.description:"",requirements:e.requirements?e.requirements:void 0},editionMode:!1,readOnly:!1,onCheckAttributeChanged:b,icons:u,highlightIcons:p,impChecksInfos:x[t]?x[t]:[],type:"Check",panelType:{type:"facet"},checkEditMode:R(t).check});return n.getMainDiv().getContent().addClassName("checkFacetExpander"),n.getMainDiv().expand(),m.push(n),n};this.getValidations=function(t,s,l,c,u,p,m){d=c,g=u;var f=function(t){var s,a,c,d,h,g,u;r=new e.Element("div",{class:"highlightsContent"});var p,f=[];let C=o.noHighlight?o.noHighlight:"The selected Review does not contain any Highlight";if(t&&t.validations&&(A(t.validations),S(t.validations)),t.validations&&t.validations.length&&t.validations.length>1)for(let i=0;i<t.validations.length;i++){var x=new e.Element("div",{class:"highlightExpanderContent"});if(s=t.validations[i].id,l.length&&t.objects){a=[],u=!1;for(let e=0;e<t.objects.length;e++)(g=t.objects[e].validationId)===s&&(a.push(y[g].highlights[t.objects[e].highlightId]),u=!0);u||(a=E[s].highlights),u=!1}else a=E[s].highlights;if(0===a.length)new e.Element("div",{text:C,class:"noHighlight"}).inject(x).setStyles({"padding-top":"10px"});else for(let t=0;t<a.length;t++)v=!0,p=new e.Element("div",{class:"flowContainer"}).inject(x),j(a[t],s).inject(p).getContent().setStyles({"margin-left":"5px"});c=new e.Element("div",{class:"CollapseExpandAll"}),h=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-expand-all expandAllIcon"}).inject(c),(d=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collapse-all collapseAllIcon"}).inject(c)).onclick=k,h.onclick=M;var w=new n({header:y[s].name,body:x,style:"simple",customHeader:c}).inject(r);w.expand(),w.elements.bodyContainer.setStyles({"padding-top":"0px"}),w.getContent().setStyles({"padding-bottom":"8px"}),w.getContent().addClassName("highlightsPanel-highlightsExpanders")}else if(t.validations.length&&1===t.validations.length){if(l.length&&t.objects){a=[],u=!1;for(let e=0;e<t.objects.length;e++)g=t.objects[e].validationId,f.push(g),a.push(y[g].highlights[t.objects[e].highlightId])}else s=t.validations[0].id,a=E[s].highlights;if(a.length>0){var D=new e.Element("div",{class:"globalDiv"}).inject(r);c=new e.Element("div",{class:"CollapseExpandAll"}).inject(D);var I=new e.Element("div",{class:"expandIconPlaceholder"}).inject(c);(h=new i({displayStyle:"lite",label:"expand All",icon:{iconName:"expand-all",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(I)).getContent().addClassName("expandAllIcon");var b=new e.Element("div",{class:"expandIconPlaceholder"}).inject(c);(d=new i({displayStyle:"lite",label:"collapse All",icon:{iconName:"collapse-all",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(b)).getContent().addClassName("collapseAllIcon"),d.getContent().onclick=k,h.getContent().onclick=M}for(let t=0;t<a.length;t++)v=!0,p=new e.Element("div",{class:"flowContainer"}).inject(r),j(a[t],f.length?f[0]:s).inject(p).getContent().setStyles({"margin-left":"5px"})}v||new e.Element("div",{text:C,class:"noHighlight"}).inject(r),v=!1,m(r)},x=function(t){var l,a,c,d,r,g,u;h=new e.Element("div",{class:"checksContent"});var p,f=[];let v=o.noCheck?o.noCheck:"The selected Review does not contain any Check";if(t&&t.validations&&(A(t.validations),S(t.validations)),t.validations&&t.validations.length&&t.validations.length>1)for(let i=0;i<t.validations.length;i++){l=t.validations[i].id;var x=new e.Element("div",{class:"highlightExpanderContent"});if(s.length&&t.objects){a=[],u=!1;for(let e=0;e<t.objects.length;e++)(g=t.objects[e].validationId)===l&&(a.push(y[g].checks[t.objects[e].checkId]),u=!0);u||(a=E[l].checks)}else a=E[l].checks;if(0===a.length)new e.Element("div",{text:v,class:"noCheck"}).inject(x).setStyles({"padding-top":"10px"});else for(let t=0;t<a.length;t++)C=!0,p=new e.Element("div",{class:"flowContainer"}).inject(x),U(a[t],l).inject(p).getContent().setStyles({"margin-left":"5px"});c=new e.Element("div",{class:"CollapseExpandAll"}),r=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-expand-all expandAllIcon"}).inject(c),(d=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collapse-all collapseAllIcon"}).inject(c)).onclick=k,r.onclick=M;var w=new n({header:y[l].name,body:x,style:"simple",customHeader:c}).inject(h);w.expand(),w.elements.bodyContainer.setStyles({"padding-top":"0px"}),w.getContent().setStyles({"padding-bottom":"8px"}),w.getContent().addClassName("checksPanel-checksExpanders")}else if(t.validations&&t.validations.length&&1===t.validations.length){if(s.length&&t.objects){a=[];for(let e=0;e<t.objects.length;e++)g=t.objects[e].validationId,f.push(g),a.push(y[g].checks[t.objects[e].checkId])}else l=t.validations[0].id,a=E[l].checks;if(a.length>0){var D=new e.Element("div",{class:"globalDiv"}).inject(h);c=new e.Element("div",{class:"CollapseExpandAll"}).inject(D);var I=new e.Element("div",{class:"expandIconPlaceholder"}).inject(c);(r=new i({displayStyle:"lite",label:"expand All",icon:{iconName:"expand-all",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(I)).getContent().addClassName("expandAllIcon");var b=new e.Element("div",{class:"collapseIconPlaceholder"}).inject(c);(d=new i({displayStyle:"lite",label:"collapse All",icon:{iconName:"collapse-all",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(b)).getContent().addClassName("collapseAllIcon"),d.getContent().onclick=k,r.getContent().onclick=M}for(let t=0;t<a.length;t++)C=!0,p=new e.Element("div",{class:"flowContainer"}).inject(h),U(a[t],f.length?f[0]:l).inject(p).getContent().setStyles({"margin-left":"5px"})}C||new e.Element("div",{text:v,class:"noCheck"}).inject(h),C=!1,m(h)};const w=()=>{require(["DS/DMUReadPersistence/DMUValidationReadServices"].concat([]),function(e){(new e).getValidationsFromObjectsIds({highlightIds:l,checkIds:s,validationIds:t,onSuccess:"Highlight"===p?f:x,onFailure:D,platform:c})})};a.subscribe("DS/DMUwebR3Mctrl/R3MObjectModified",e=>{"maturity"!==e.modified&&"validationState"!==e.modified||h&&h.destroy(),r&&r.destroy(),w()}),(l.length||s.length||t.length)&&w()},this.clearView=function(e){var t;if("Highlight"===e&&r){f=[];var n=r.getElementsByClassName("highlightsPanel-highlightsExpanders");if(n.length)for(let e=0;e<n.length;e++){n[e].getElementsByClassName("expandAllIcon").length&&n[e].getElementsByClassName("expandAllIcon")[0].destroy(),n[e].getElementsByClassName("collapseAllIcon").length&&n[e].getElementsByClassName("collapseAllIcon")[0].destroy(),t=n[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<t.length;e++)t[e].dsModel.clear(),t[e].destroy();n[e].getElementsByClassName("noHighlight").length&&n[e].getElementsByClassName("noHighlight")[0].destroy(),n[e].destroy()}else{r.getElementsByClassName("expandAllIcon").length&&r.getElementsByClassName("expandAllIcon")[0].destroy(),r.getElementsByClassName("collapseAllIcon").length&&r.getElementsByClassName("collapseAllIcon")[0].destroy(),t=r.getElementsByClassName("highlightFacetExpander");for(let e=0;e<t.length;e++)t[e].dsModel.clear(),t[e].destroy()}r.destroy()}if("Check"===e&&h){m=[];var i=h.getElementsByClassName("checksPanel-checksExpanders");if(i.length)for(let e=0;e<i.length;e++){i[e].getElementsByClassName("expandAllIcon").length&&i[e].getElementsByClassName("expandAllIcon")[0].destroy(),i[e].getElementsByClassName("collapseAllIcon").length&&i[e].getElementsByClassName("collapseAllIcon")[0].destroy(),t=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<t.length;e++)t[e].dsModel.clear(),t[e].destroy();i[e].getElementsByClassName("noCheck").length&&i[e].getElementsByClassName("noCheck")[0].destroy(),i[e].destroy()}else{h.getElementsByClassName("expandAllIcon").length&&h.getElementsByClassName("expandAllIcon")[0].destroy(),h.getElementsByClassName("collapseAllIcon").length&&h.getElementsByClassName("collapseAllIcon")[0].destroy(),t=h.getElementsByClassName("checkFacetExpander");for(let e=0;e<t.length;e++)t[e].dsModel.clear(),t[e].destroy()}h.destroy()}w=[],E=[],y=[]}}}),d=[];return t.singleton({init:function(){},getDMUR3MReviewController:function(){for(var e,t=0;t<d.length;t++){d[t].counter++,e=d[t].reviewController;break}if(!e){var n=new c;e={getValidations:function(e,t,i,s,l,a,o){if(n)return n.getValidations(e,t,i,s,l,a,o)},clearView:function(e){if(n)return n.clearView(e)}},d.push({reviewController:e,counter:1})}return e?Object.freeze(e):e},giveDMUR3MReviewController:function(){for(var e,t=0;t<d.length;t++){e=d[t].reviewController;break}return e?Object.freeze(e):e},unreferenceDMUR3MReviewController:function(){for(var e=0;e<d.length;e++){d[e].counter--,d[e].counter<=0&&(d[e].reviewController.clear(),d.splice(e,1));break}}})}),define("DS/DMUReviewFacets/DMUwebR3MinfoRvwHighlightTab",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","UWA/Controls/ThemedScroller","DS/DMUReviewFacets/DMUR3MReviewController"],function(e,t,n,i){"use strict";return t.extend({init:function(t){this._parent(t);var s,l=t.requestUtils,a=this;this.elements={},this.elements.container=e.createElement("div",{class:"infoRvwHighlight"});var o=[],c=[],d=function(e){var t=e.getElementsByClassName("reviewExpander"),i=e.getElementsByClassName("highlightsPanel-highlightsExpanders");for(let e=0;e<t.length;e++)o.push(t[e].dsModel);for(let e=0;e<i.length;e++)c.push(i[e].dsModel);s||(s=(new n).inject(a.elements.container)).getContent().setStyle("height","100%"),s.getInnerElement().setContent(e),a.hideLoader()};this.updateFacet=function(){var e,n,s=this.getModel(),a=s.get("objectId"),o=s.get("_DS_ATTR_type");o=o&&o.valueDB?o.valueDB:s.get("_DS_ATTR_type");var c=[],h=[],r=[],g=i.giveDMUR3MReviewController();if(g||(g=i.getDMUR3MReviewController()),g.clearView("Highlight"),this.showLoader(),!s)return!1;if(s.getMergingModels){e=s.getMergedModelIds(),n=s.getMergingModels();for(let t=0;t<e.length;t++)"DMUValidationValidation"===(o=(o=n[e[t]].get("_DS_ATTR_type"))&&o.valueDB?o.valueDB:n[e[t]].get("_DS_ATTR_type"))?c.push(e[t]):"DMUValidationCheck"===o?h.push(e[t]):"DMUValidationExposedPresentation"===o&&r.push(e[t])}else"DMUValidationValidation"===o?c.push(a):"DMUValidationCheck"===o?h.push(a):"DMUValidationExposedPresentation"===o&&r.push(a);g.getValidations(c,h,r,l,t.onFacetModification,"Highlight",d)},this.destroyComponent=function(){},this.clearFacet=function(){for(let e=0;e<o.length;e++)o[e].destroy();for(let e=0;e<c.length;e++)c[e].destroy();o=[],c=[]},this.onResize=function(){},this.onRefresh=function(){this.clearFacet(),this.updateFacet()}}})}),define("DS/DMUReviewFacets/DMUwebR3MinfoRvwCheckTab",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","UWA/Controls/ThemedScroller","DS/DMUReviewFacets/DMUR3MReviewController"],function(e,t,n,i){"use strict";return t.extend({init:function(t){this._parent(t);var s,l=t.requestUtils,a=this;this.elements={},this.elements.container=e.createElement("div",{class:"infoRvwCheckTab"});var o=[],c=[],d=function(e){var t=e.getElementsByClassName("reviewExpander"),i=e.getElementsByClassName("checksPanel-checksExpanders");for(let e=0;e<t.length;e++)o.push(t[e].dsModel);for(let e=0;e<i.length;e++)c.push(i[e].dsModel);s||(s=(new n).inject(a.elements.container)).getContent().setStyle("height","100%"),s.getInnerElement().setContent(e),a.hideLoader()};this.updateFacet=function(){var e,n,s=this.getModel(),a=s.get("objectId"),o=s.get("_DS_ATTR_type");o=o&&o.valueDB?o.valueDB:s.get("_DS_ATTR_type");var c=[],h=[],r=[],g=i.giveDMUR3MReviewController();if(g||(g=i.getDMUR3MReviewController()),g.clearView("Check"),this.showLoader(),!s)return!1;if(s.getMergingModels){e=s.getMergedModelIds(),n=s.getMergingModels();for(let t=0;t<e.length;t++)"DMUValidationValidation"===(o=(o=n[e[t]].get("_DS_ATTR_type"))&&o.valueDB?o.valueDB:n[e[t]].get("_DS_ATTR_type"))?c.push(e[t]):"DMUValidationCheck"===o?h.push(e[t]):"DMUExposedPresentation"===o&&r.push(e[t])}else"DMUValidationValidation"===o?c.push(a):"DMUValidationCheck"===o?h.push(a):"DMUExposedPresentation"===o&&r.push(a);g.getValidations(c,h,r,l,t.onFacetModification,"Check",d)},this.destroyComponent=function(){},this.onResize=function(){},this.onRefresh=function(){this.updateFacet()}}})});