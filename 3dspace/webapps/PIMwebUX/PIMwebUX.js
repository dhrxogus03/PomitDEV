/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/PIMwebUX/PIMwebGroupDefinitionPanelView",["UWA/Core","UWA/Class","DS/Controls/LineEditor"],function(e,t,i){"use strict";return t.extend({init:function(t){var n=t.parent,l=t.editorText?t.editorText:"",a=e.createElement("div"),s=new i({disabled:!0,value:l,requiredFlag:!0,selectAllOnFocus:!0,autoCommitFlag:!0}).inject(a);s.elements.container.setStyles({width:"100%"}),s.elements.container.childNodes[0].setStyles({width:"100%"}),n.content=a,this.setEditorText=function(e){s.value=e},this.destroy=function(){a&&a.parentNode&&a.parentNode.removeChild(a),a=s=null}}})}),define("DS/PIMwebUX/PIMwebIsrContextGroupView",["UWA/Core","UWA/Class","DS/UIKIT/Iconbar","DS/CoreEvents/Events","DS/DataGridView/DataGridView","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/LineEditor","DS/WebappsUtils/WebappsUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrContextGroupView","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,i,n,l,a,s,o,r,d,u,c){"use strict";return t.extend({init:function(t){this.groupTitle=t.groupTitle,this.dialog=t.dialog,this.htmlParent=t.htmlParent,this.id=t.id;var o=t.productContext,r=t.ctrl,d=this;d.tokenCSO={},d.groupDefinitionDialog=null,d.isFilter=!!t.isFilter&&t.isFilter;var u=!!t.readOnly&&t.readOnly;d.isEmpty=!0;var f,g,p;var h=function(){d.model&&(d.model.removeRoots(),d.model=null),d.dataGridListViewDiv&&d.dataGridListViewDiv.remove(),d.dataGridListViewDiv=null,d.groupContent&&d.groupContent.remove(),d.groupContent=null,d._groupDefinitionDialog&&(d._groupDefinitionDialog.editor&&(d._groupDefinitionDialog.editor.remove(),d._groupDefinitionDialog.editor=null),d._groupDefinitionDialog.remove(),d._groupDefinitionDialog=null),n.publish({event:"onContextGroupRemoved",data:d})};this.removeGroupView=function(){h()},this.addInfoInGroup=function(e){!function(e){if(e&&e.length){d.model.prepareUpdate(),d.isFilter&&(d.model.removeRoots(),0!==d.model.getRoots().length&&1!==e.length&&(d.isFilter=!1));for(var t=0;t<e.length;t++){var i=new a({id:e[t].id,label:e[t].label,icons:e[t].icons,pathElement:e[t].pathElement});d.model.addRoot(i)}d.model.pushUpdate(),d.isEmpty=!1,f.getElementsByTagName("h6")[0].getElementsByTagName("span")[0].hide(),n.publish({event:"onElemAddedInGroup",data:d})}}(e)},this.getGroupInfo=function(){var e,t={},i=d.model.getRoots();if(!i.length)return t;for(t.isFilter=d.isFilter,t.Elements=[],e=0;e<i.length;e++)t.Elements.push({id:i[e]._options.id,label:i[e]._options.label,icons:i[e]._options.icons,pathElement:i[e]._options.pathElement});return t},f=e.createElement("div",{class:"PIMwebGroupTitleWithIconbar",html:[{tag:"h6",html:[d.groupTitle+" # "+this.id+"  ",{tag:"span",class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}]}]}),u||(g=new i({renderTo:f,items:[{id:"product",fonticon:"product",text:c.isrCtxGroupSelectProduct,handler:function(){r&&r.addElementsInGroup(o.id,d)}},{id:"filter",text:c.isrCtxGroupSelectFilter,fonticon:"filter",handler:function(){r&&r.searchFilters(o.id).then(function(e){!function(e){if(e){d.model.prepareUpdate(),d.model.removeRoots(),d.isFilter=!0;var t=new a({label:e[0].alias,id:e[0].id,icons:e[0].icons});d.model.addRoot(t),d.model.pushUpdate(),d.isEmpty=!1,f.getElementsByTagName("h6")[0].getElementsByTagName("span")[0].hide(),n.publish({event:"onFilterAddedInGroup",data:d})}}(e)})}},{id:"remove",text:c.isrCtxGroupElemRemove,fonticon:"remove",handler:function(){g.getItem("remove").elements.container.addClassName("disabled");var e=p.getNodesXSO().get(),t=e.length;if(t){d.model.prepareUpdate();for(var i=0;i<t;i++)d.model.removeRoot(e[i]);d.model.pushUpdate(),d.model.getRoots().length||(d.isEmpty=!0,d.isFilter=!1,f.getElementsByTagName("span")[0].show(),n.publish({event:"onEmptyGroup",data:d}))}}},{id:"delete",text:c.isrCtxGroupDelete,fonticon:"trash",handler:function(){h()}}]})).getItem("remove").elements.container.addClassName("disabled"),d.dataGridListViewDiv=new e.Element("div"),d.model=new s;var I=(p=new l({identifier:"DataGridViewContext",treeDocument:d.model,columns:[{text:"Tree",dataIndex:"tree"}],rowSelection:"multiple",cellSelection:"none",height:100,width:500,minWidth:100,minHeight:500,showRowBorderFlag:!0,showColumnBorderFlag:!0,placeholder:c.isrCtxGroupEmptyGroup,showOutlineFlag:!0})).getNodesXSO();I.options.getElementID=void 0,I.onPostAdd(function(e){g&&g.getItem("remove").elements.container.hasClassName("disabled")&&g.getItem("remove").elements.container.removeClassName("disabled"),r&&r.onPostRowSelect(e)}),I.onPostRemove(function(e){!p.getNodesXSO().get().length&&g&&g.getItem("remove").elements.container.addClassName("disabled"),r&&r.onPostRowUnselect(e)}),p.layout.columnsHeader=!1,p.inject(d.dataGridListViewDiv),d.groupContent=e.createElement("div",{class:"PIMwebGroupView",html:[e.createElement("div",{class:".PIMwebGroupElement",html:[{tag:"div",class:"PIMwebGroupField",html:[f,d.dataGridListViewDiv]}]})]}),d.groupContent.inject(d.htmlParent),n.publish({event:"onGroupViewCreated",data:d})}})}),define("DS/PIMwebUX/PIMwebOpacitySlider",["UWA/Core","UWA/Class","DS/Controls/Slider","DS/Controls/Button","DS/WebappsUtils/WebappsUtils"],function(e,t,i,n,l){"use strict";var a=l.getWebappsAssetUrl("PIMwebUX","icons/32/");return t.extend({init:function(t){var l,s,o,r,d=this,u=t.parent,c=!1,f=t.userValue,g=1===t.checkedButton?1:2===t.checkedButton?2:0,p=1===g?0:2===g?100:f;l=new e.Element("div",{class:"pimWebOpacitySlider","data-rec-id":"pimWebOpacitySlider",styles:{position:"absolute",display:"none",margin:"1px auto"}}),u.appendChild(l),(s=new n({label:"",checkFlag:1===g,icon:a+"I_PIMOpacity0.png",displayStyle:"icon",recId:"btn1"}).inject(l)).onClick=function(){s.checkFlag=!s.checkFlag,g=s.checkFlag?1:0,o.checkFlag=!1,c=!0,r.value=s.checkFlag?0:f},(r=new i({minValue:0,maxValue:100,stepValue:1,value:p,disabled:!1,valuePopupFlag:!1,recId:"slider"}).inject(l)).elements.container.setStyle("display","inline-flex"),r.elements.container.setStyle("margin","1px 10px 2px 10px"),r.elements.container.setStyle("width","300px"),l.setStyle("display","none"),r.addEventListener("change",function(e){if(c||(o.checkFlag=!1,s.checkFlag=!1,g=0,f=e.dsModel.value),c=!1,p!==e.dsModel.value){var t=p;p=e.dsModel.value,"function"==typeof d.onOpacityChange&&d.onOpacityChange({oldValue:t,newValue:p,userValue:f,checkedButton:g})}r.elements.container.getChildren()[0].setStyle("width","100%"),r.elements.container.getChildren()[0].setStyle("width","100%")}),(o=new n({label:"",checkFlag:2===g,icon:a+"I_PIMOpacity1.png",displayStyle:"icon",recId:"btn2"}).inject(l)).onClick=function(){o.checkFlag=!o.checkFlag,g=o.checkFlag?2:0,s.checkFlag=!1,c=!0,r.value=o.checkFlag?100:f},this.show=function(){l.setStyle("display","inline-flex")},this.hide=function(){l.setStyle("display","none")},this.onOpacityChange=null,this.getSize=function(){return l.getSize()},this.setPosition=function(e){l.setStyles(e)},this.destroy=function(){l&&l.parentNode&&l.parentNode.removeChild(l),d.onOpacityChange=null,d=l=u=s=o=r=null}}})}),define("DS/PIMwebUX/PIMwebUnitsUX",[],function(){"use strict";var e=1/12*(1/.0254),t=1/3*e;return Object.freeze({length:{mm:1e3,m:1,cm:100,km:.001,in:1/.0254,ft:e,micron:1e6,yard:t,mile:1/1609.344,nm:1e9,hm:.01,nmi:1/1852,dm:10,ang:1e10,cmm:1e5,mil:1/.0254*1e3},volume:{mm3:1e9,cm3:1e6,dm3:1e3,m3:1,km3:1e-9,L:1e3,in3:61023.74409473229,ft3:35.31466672148859,gal:1/.003785411784,brl:6.289810770432104,yard3:1.3079506193143924}})}),define("DS/PIMwebUX/PIMwebIsrPanelSpecTab",["UWA/Core","UWA/Class","DS/CATWebUXPreferences/CATWebUXPreferencesUtils","DS/Controls/LineEditor","DS/Controls/Toggle","DS/Controls/Button","DS/Controls/Expander","DS/Controls/ComboBox","DS/Controls/SpinBox","DS/CoreEvents/Events","DS/Controls/ButtonGroup","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelSpecTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,i,n,l,a,s,o,r,d,u,c){"use strict";return t.extend({init:function(t){var f,g=this,p=t.parent,h=t.type,I=t.ctrl,b=t.lengthUnit?t.lengthUnit:{unit:"Millimeter",decimalPlace:3,TrailingZero:!1},m=!!t.isNonPersistIsr&&t.isNonPersistIsr,w=!!t.readOnly&&t.readOnly,C={};localStorage.getItem("PIMwebIsrSpecs")&&(C=JSON.parse(localStorage.getItem("PIMwebIsrSpecs")));var v,S,x,y,F,M,P,L,R,E,D,O,V,T,A,k,N,U,j,G,_,W,B,Q,X,z,H,K,q,J,Y,Z,$,ee,te,ie,ne,le,ae={ComputationMode:{Clash:!0,Contact:!1,Clearance:!1,ClearanceValMeter:.01},Fasteners:{FstChecked:!1,CheckItfWithFastenedParts:!1},EngineeringCnx:{EnggCnxChecked:!1,CheckNoClash:!0,CheckContact:!0,CheckClearance:!0,NoCheck:!0},KnwRulesChecked:!1,ElecChecked:!1,PathwaysChecked:!1,ReuseExistingItf:{RecomputeOnlyModItf:!0,DeleteOutOfScopeItf:!1},ComputeQuantifer:{PenVolume:!1,PenVector:!0,MinDist:!1},StoredResults:{ClashQuantifier:1,ClearanceQuantifier:1,GeometryDetail:1,ClashGeometry:1,ContactGeometry:1,ClearanceGeometry:1,Accuracy:{valMeter:.01,units:"mm"}},AppRulesExpanded:!0,UsrDefRulesExpanded:!1,UpdateRulesExpanded:!1,StoredQuantifExpanded:!1,StoredResultsExpanded:!1};function se(e){g.ruleSet=e,k.value=e.alias}function oe(){"customFacetMode"!==h&&(S.checkFlag||A&&A.checkFlag||E.checkFlag?d.publish({event:"onSpecInfoChange",data:"SpecInfoSufficient"}):d.publish({event:"onSpecInfoChange",data:"SpecInfoInsufficient"}))}function re(){if("customFacetMode"!==h&&I.isUpdateSimulationAllowed()){var e={};e.computationRuleActive=A&&A.checkFlag||E&&E.checkFlag||M&&M.checkFlag||L&&L.checkFlag||R&&R.checkFlag,e.volumeOrClearanceAreaStored=$&&(2===$.selectedIndex||3===$.selectedIndex)||te&&(2===te.selectedIndex||3===te.selectedIndex)||ne&&2===ne.selectedIndex,d.publish({event:"onSpecInfoChangeToComputeToken",data:e})}}function de(){"customFacetMode"!==h&&(!E.checkFlag||D.checkFlag||O.checkFlag||V.checkFlag||T.checkFlag?(Y.hide(),d.publish({event:"onEngCnxInfoChange",data:"EngCnxInfoSufficient"})):(Y.show(),d.publish({event:"onEngCnxInfoChange",data:"EngCnxInfoInsufficient"})))}function ue(e){return e||(e=.01),i.convertUnitValueToString(e,"Length",b.unit,b.decimalPlace,b.TrailingZero,{displaySymbol:!0,displaySpace:!0})}function ce(e){let t=parseFloat(e);return!e||t<=0||""===e.trim()?.01:i.convert(t,"Length",b.unit,"Meter")}function fe(){for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].hasClassName("wux-controls-expander")||e[t].hasClassName("wux-controls-expander-container")||e[t].hasClassName("wux-controls-expander-header")||(e[t].style.pointerEvents="none",e[t].style.userSelect="none",e[t].setAttribute("disabled",!0)),e[t].hasClassName("fonticon-remove")&&e[t].getParent().addClassName("disabled")}localStorage.getItem("PIMwebIsrSpecs")&&(v=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),f=e.createElement("div",{class:"PIMwebIsrPanelSpecTabContent"}).inject(p);var ge=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection  PIMwebFirstTitle"}).inject(f),pe=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(ge);S=new l({type:"checkbox",label:c.isrSpecClash}).inject(pe),x=new l({type:"checkbox",label:c.isrSpecContact,checkFlag:v?v.ComputationMode.Contact:ae.ComputationMode.Contact}).inject(pe),(y=new l({type:"checkbox",label:c.isrSpecClearance})).inject(pe),F=new n({disabled:!0,selectAllOnFocus:!0}).inject(pe),ge.setStyles({borderBottom:"1px solid #d1d4d4"}),F.elements.container.setStyles({marginRight:"15px"}),F.elements.container.childNodes[0].setStyles({marginRight:"15px"}),F.addEventListener("change",function(){let e=ce(F.value);F.value=ue(e)}),F.value=ue(v?v.ComputationMode.ClearanceValMeter:ae.ComputationMode.ClearanceValMeter),S.addEventListener("change",function(){oe()}),x.addEventListener("change",function(){x.checkFlag?S.checkFlag=S.disabled=!0:S.disabled=!1}),y.addEventListener("change",function(){y.checkFlag?(S.checkFlag=x.checkFlag=S.disabled=x.disabled=!0,F.disabled=!1):(F.disabled=!0,x.disabled=!1)}),S.checkFlag=v?v.ComputationMode.Clash:ae.ComputationMode.Clash,x.checkFlag=v?v.ComputationMode.Contact:ae.ComputationMode.Contact,y.checkFlag=v?v.ComputationMode.Clearance:ae.ComputationMode.Clearance;var he=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"});(M=new l({type:"checkbox",label:c.isrSpecFasteners})).inject(he),(P=new l({type:"checkbox",label:c.isrSpecCheckItfWithFastenedParts,disabled:!0})).inject(he),P.elements.container.setStyles({marginLeft:"28px"}),M.addEventListener("change",function(){M.checkFlag?P.disabled=!1:P.disabled=!0,re()}),(L=new l({type:"checkbox",label:c.isrSpecPathways})).inject(he),(R=new l({type:"checkbox",label:c.isrSpecElecBranches})).inject(he),M.checkFlag=v?v.Fasteners.FstChecked:ae.Fasteners.FstChecked,P.checkFlag=v?v.Fasteners.CheckItfWithFastenedParts:ae.Fasteners.CheckItfWithFastenedParts,L.checkFlag=v?v.PathwaysChecked:ae.PathwaysChecked,R.checkFlag=v?v.ElecChecked:ae.ElecChecked,L.addEventListener("change",function(){re()}),R.addEventListener("change",function(){re()}),(X=new s({header:c.isrSpecAppRulesHeader,body:he,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),X.expandedFlag=v?v.AppRulesExpanded:ae.AppRulesExpanded;var Ie=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f);if(!m){var be=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(Ie);(A=new l({type:"checkbox",label:c.isrSpecKnwRule}).inject(be)).elements.container.setStyles({marginRight:"5px"}),(J=e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(be)).setStyles({marginLeft:"5px",marginRight:"5px"}),J.hide(),k=new n({disabled:!0,selectAllOnFocus:!0,autoCommitFlag:!0,placeholder:c.isrSpecSelectRuleSet}).inject(be),w||(W=new a({icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",disabled:!0,onClick:function(){require("DS/PADServices/views/LandingPage").launchSearch({title:c.isrSpecRuleSetSearchPageTitle,precondition:'flattenedtaxonomies:"types/PLMRuleset"',showApplyButton:!0,ok:function(e){se.call(this,e.map(function(e){return{id:e.resourceid,type:e["ds6w:type_value"],alias:e["ds6w:label"]}}))}.bind(g)})}}).inject(be),A.addEventListener("change",function(){oe(),re(),A.checkFlag?(W.disabled=!1,""===k.value?(d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoInsufficient"}),J.show()):(d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoSufficient"}),J.hide())):(k.disabled=W.disabled=!0,d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoSufficient"}),J.hide())})),A.checkFlag=ae.KnwRulesChecked}var me=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(Ie);E=new l({type:"checkbox",label:c.isrSpecEnggCnx}).inject(me),(Y=e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(me)).setStyles({marginLeft:"10px"}),Y.hide();var we=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(Ie),Ce=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap PIMwebIsrPanelFlexEngCnx"}).inject(we),ve=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap PIMwebIsrPanelFlexEngCnx"}).inject(we);(D=new l({type:"checkbox",label:c.isrSpecEnggCnxNoClash,disabled:!0}).inject(Ce)).elements.container.setStyles({marginLeft:"28px"}),(O=new l({type:"checkbox",label:c.isrSpecEnggCnxContact,disabled:!0}).inject(ve)).elements.container.setStyles({marginLeft:"28px"}),(V=new l({type:"checkbox",label:c.isrSpecEnggCnxClearance,disabled:!0}).inject(Ce)).elements.container.setStyles({marginLeft:"28px"}),(T=new l({type:"checkbox",label:c.isrSpecEnggCnxNoCheck,disabled:!0}).inject(ve)).elements.container.setStyles({marginLeft:"28px"}),E.addEventListener("change",function(){oe(),re(),E.checkFlag?D.disabled=O.disabled=V.disabled=T.disabled=!1:D.disabled=O.disabled=V.disabled=T.disabled=!0,de()}),D.addEventListener("change",function(){de()}),O.addEventListener("change",function(){de()}),V.addEventListener("change",function(){de()}),T.addEventListener("change",function(){de()}),E.setPropertyFromUIInteraction("checkFlag",ae.EngineeringCnx.EnggCnxChecked),D.checkFlag=ae.EngineeringCnx.CheckNoClash,O.checkFlag=ae.EngineeringCnx.CheckContact,V.checkFlag=ae.EngineeringCnx.CheckClearance,T.checkFlag=ae.EngineeringCnx.NoCheck;var Se=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(Ie);(B=new l({type:"checkbox",label:c.isrChkIntermediateReps,value:0,checkFlag:!1})).inject(Se);var xe,ye,Fe=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(Ie),Me=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(Fe);if((Q=new l({type:"checkbox",label:c.isrComputeBetweenIntermediateReps,value:0,disabled:!0,checkFlag:!1})).inject(Me),Me.setStyles({marginLeft:"10px"}),Me.inject(Fe),B.addEventListener("change",function(){B.checkFlag?Q.disabled=!1:Q.disabled=!0}),(z=new s({header:c.isrUserDefinedRulesHeader,body:Ie,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),z.expandedFlag=v?v.UsrDefRulesExpanded:ae.UsrDefRulesExpanded,m||(xe=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f),(N=new l({type:"checkbox",label:c.isrSpecRecomputeOnlyModified})).inject(xe),(U=new l({type:"checkbox",label:c.isrSpecDeleteOutOfScopeIsr})).inject(xe),U.elements.container.setStyles({marginLeft:"28px"}),(H=new s({header:c.isrUpdateRulesHeader,body:xe,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),H.expandedFlag=v?v.UpdateRulesExpanded:ae.UpdateRulesExpanded,N.addEventListener("change",function(){N.checkFlag?U.disabled=!1:(U.disabled=!0,U.checkFlag=!1)}),N.checkFlag=ae.ReuseExistingItf.RecomputeOnlyModItf,U.checkFlag=ae.ReuseExistingItf.DeleteOutOfScopeItf),m){var Pe=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"});(j=new l({type:"checkbox",label:c.isrSpecPenVol})).inject(Pe),(G=new l({type:"checkbox",label:c.isrSpecPenVec})).inject(Pe),(_=new l({type:"checkbox",label:c.isrSpecMinDist})).inject(Pe),(K=new s({header:c.isrNonPersistQuantifiersHeader,body:Pe,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),K.expandedFlag=v?v.StoredQuantifExpanded:ae.StoredQuantifExpanded,j.checkFlag=v&&v.ComputeQuantifer?v.ComputeQuantifer.PenVolume:ae.ComputeQuantifer.PenVolume,G.checkFlag=v&&v.ComputeQuantifer?v.ComputeQuantifer.PenVector:ae.ComputeQuantifer.PenVector,_.checkFlag=v&&v.ComputeQuantifer?v.ComputeQuantifer.MinDist:ae.ComputeQuantifer.MinDist}else!function(){var t=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}),n=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(t);n.innerHTML=c.isrSpecStoredResQuantifiers,n.setStyles({fontWeight:"normal"});var a=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t),d=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(a);d.innerHTML=c.isrSpecStoredResClash,d.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),($=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecPenVec,c.isrSpecPenVol,c.isrSpecStoredResVecAndVol],enableSearchFlag:!1,selectedIndex:v&&v.StoredResults?v.StoredResults.ClashQuantifier:ae.StoredResults.ClashQuantifier,displayStyle:"normal"})).inject(a),$.elements.container.setStyles({width:"30%"});var g=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t);$.addEventListener("change",function(){re()}),g.setStyles({paddingTop:"5px"});var p=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(g);p.innerHTML=c.isrSpecStoredResClearance,p.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(ie=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecMinDist],enableSearchFlag:!1,selectedIndex:v&&v.StoredResults?v.StoredResults.ClearanceQuantifier:ae.StoredResults.ClearanceQuantifier,displayStyle:"normal"})).inject(g),ie.elements.container.setStyles({width:"30%"});var h=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(t);h.innerHTML=c.isrSpecStoredResGeometries,h.setStyles({fontWeight:"normal"}),(ee=new u({type:"radio"})).addChild(new l({type:"radio",label:c.isrSpecMainIsrType,value:1,checkFlag:v&&v.StoredResults?1===v.StoredResults.GeometryDetail:1===ae.StoredResults.GeometryDetail})),ee.addChild(new l({type:"radio",label:c.isrSpecAllForEachIsr,value:2,checkFlag:v&&v.StoredResults?2===v.StoredResults.GeometryDetail:2===ae.StoredResults.GeometryDetail})),ee.inject(t),ee.elements.container.setStyles({marginLeft:"25px"});var I=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t),m=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(I);m.innerHTML=c.isrSpecStoredResClash,m.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(te=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResCurve,c.isrSpecStoredResVolume,c.isrSpecStoredResCurveAndVol],enableSearchFlag:!1,selectedIndex:v&&v.StoredResults?v.StoredResults.ClashGeometry:ae.StoredResults.ClashGeometry,displayStyle:"normal"})).inject(I),te.elements.container.setStyles({width:"30%"}),te.addEventListener("change",function(){re()});var w=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t);w.setStyles({paddingTop:"5px"});var C=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(w);C.innerHTML=c.isrSpecStoredResContact,C.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(Z=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResTriangles],enableSearchFlag:!1,selectedIndex:v&&v.StoredResults?v.StoredResults.ContactGeometry:ae.StoredResults.ContactGeometry,displayStyle:"normal"})).inject(w),Z.elements.container.setStyles({width:"30%"});var S=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t);S.setStyles({paddingTop:"5px"});var x=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(S);x.innerHTML=c.isrSpecStoredResClearance,x.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(ne=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResTriangles,c.isrSpecStoredResArea],enableSearchFlag:!1,displayStyle:"normal"})).inject(S),ne.elements.container.setStyles({width:"30%"});var y=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(S);y.innerHTML=c.isrSpecStoredResAccuracy,y.setStyles({width:"16%",fontWeight:"normal",marginRight:"5px",textAlign:"right"}),(le=new r({value:v&&v.StoredResults.Accuracy.valMeter?i.convert(v.StoredResults.Accuracy.valMeter,"Length","Meter",b.unit):i.convert(ae.StoredResults.Accuracy.valMeter,"Length","Meter",b.unit),units:v&&v.StoredResults?v.StoredResults.Accuracy.units:ae.StoredResults.Accuracy.units,stepValue:1})).inject(S),le.elements.container.setStyles({width:"20%"}),ne.addEventListener("change",function(){re(),le.disabled=!(ne.value===c.isrSpecStoredResArea)}),ne.selectedIndex=v&&v.StoredResults?v.StoredResults.ClearanceGeometry:ae.StoredResults.ClearanceGeometry,(q=new s({header:c.isrStoredResultsHeader,body:t,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),q.expandedFlag=v&&v.StoredResultsExpanded?v.StoredResultsExpanded:ae.StoredResultsExpanded}();"Create"!==t.type&&t.specInfo&&(ye=t.specInfo,S.checkFlag=ye.ComputationMode.Clash,x.checkFlag=ye.ComputationMode.Contact,y.checkFlag=ye.ComputationMode.Clearance,F.value=ue(ye.ComputationMode.ClearanceValMeter),M.checkFlag=ye.Fasteners.FstChecked,P.checkFlag=ye.Fasteners.CheckItfWithFastenedParts,E.checkFlag=ye.EngineeringCnx.EnggCnxChecked,D.checkFlag=ye.EngineeringCnx.CheckNoClash,O.checkFlag=ye.EngineeringCnx.CheckContact,V.checkFlag=ye.EngineeringCnx.CheckClearance,T.checkFlag=ye.EngineeringCnx.NoCheck,m||(A.checkFlag=ye.KnowledgeRule.KnwRulesChecked),ye.KnowledgeRule.RuleSet&&se(ye.KnowledgeRule.RuleSet),R.checkFlag=ye.checkElec,L.checkFlag=ye.checkPathways,B.checkFlag=ye.CheckInterRep,Q.checkFlag=ye.CompBetweenIntermediateReps,m?(j.checkFlag=ye.ComputeQuantifer.PenVolume,G.checkFlag=ye.ComputeQuantifer.PenVector,_.checkFlag=ye.ComputeQuantifer.MinDist):(N.checkFlag=ye.ReuseExistingItf.RecomputeOnlyModItf,U.checkFlag=ye.ReuseExistingItf.DeleteOutOfScopeItf,$.selectedIndex=ye.StoredResults.ClashQuantifier,ie.selectedIndex=ye.StoredResults.ClearanceQuantifier,te.selectedIndex=ye.StoredResults.ClashGeometry,ne.selectedIndex=ye.StoredResults.ClearanceGeometry,Z.selectedIndex=ye.StoredResults.ContactGeometry,le.value=i.convert(ye.StoredResults.Accuracy.valMeter,"Length","Meter",b.unit),le.units=i.Length[b.unit].symbol,ee.value=ye.StoredResults.GeometryDetail?[ye.StoredResults.GeometryDetail]:[ae.StoredResults.GeometryDetail]),d.publish({event:"onSpecTabComplete"})),w&&fe(),this.getSpecInfo=function(){var e={};return e.ComputationMode={Clash:S.checkFlag,Contact:x.checkFlag,Clearance:y.checkFlag,ClearanceValMeter:ce(F.value)},e.Fasteners={FstChecked:M.checkFlag,CheckItfWithFastenedParts:P.checkFlag},e.EngineeringCnx={EnggCnxChecked:E.checkFlag,CheckNoClash:D.checkFlag,CheckContact:O.checkFlag,CheckClearance:V.checkFlag,NoCheck:T.checkFlag},e.checkPathways=L.checkFlag,e.CheckElec=R.checkFlag,m||(e.KnowledgeRule={KnwRulesChecked:A.checkFlag,RuleSet:g.ruleSet},e.ReuseExistingItf={RecomputeOnlyModItf:N.checkFlag,DeleteOutOfScopeItf:U.checkFlag}),m?e.ComputeQuantifer={PenVolume:j.checkFlag,PenVector:G.checkFlag,MinDist:_.checkFlag}:e.StoredResults={ClashQuantifier:$.selectedIndex,ClearanceQuantifier:ie.selectedIndex,GeometryDetail:ee.value[0],ClashGeometry:te.selectedIndex,ContactGeometry:Z.selectedIndex,ClearanceGeometry:ne.selectedIndex,Accuracy:{valMeter:i.convert(le.value,"Length",b.unit,"Meter"),units:le.units}},e.CheckInterRep=!!B&&B.checkFlag,e.CompBetweenIntermediateReps=!!Q&&Q.checkFlag,e},this.getPIMwebIsrSpecPrefs=function(){var e={ComputationMode:{Clash:S.checkFlag,Contact:x.checkFlag,Clearance:y.checkFlag,ClearanceValMeter:ce(F.value)},Fasteners:{FstChecked:M.checkFlag,CheckItfWithFastenedParts:P.checkFlag},PathwaysChecked:L.checkFlag,ElecChecked:R.checkFlag,ComputeQuantifer:!m&&C&&C.ComputeQuantifer?C.ComputeQuantifer:m?{PenVolume:j.checkFlag,PenVector:G.checkFlag,MinDist:_.checkFlag}:ae.ComputeQuantifer,AppRulesExpanded:X.expandedFlag,UsrDefRulesExpanded:z.expandedFlag,UpdateRulesExpanded:H.expandedFlag,StoredResultsExpanded:q?q.expandedFlag:C&&C.StoredResultsExpanded?C.StoredResultsExpanded:ae.StoredResultsExpanded,StoredQuantifExpanded:K?K.expandedFlag:C&&C.StoredQuantifExpanded?C.StoredQuantifExpanded:ae.StoredQuantifExpanded};return m||(e.StoredResults={ClashQuantifier:$.selectedIndex,ClearanceQuantifier:ie.selectedIndex,GeometryDetail:ee.value[0],ClashGeometry:te.selectedIndex,ContactGeometry:Z.selectedIndex,ClearanceGeometry:ne.selectedIndex,Accuracy:{valMeter:i.convert(le.value,"Length",b.unit,"Meter"),units:i.Length[b.unit].symbol}}),e},this.disableTab=function(){fe()},this.enableTab=function(){!function(){if(f)for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].hasClassName("wux-controls-expander")||e[t].hasClassName("wux-controls-expander-container")||e[t].hasClassName("wux-controls-expander-header")||(e[t].style.pointerEvents="",e[t].style.userSelect="",e[t].removeAttribute("disabled")),e[t].hasClassName("fonticon-remove")&&e[t].getParent().removeAttribute("disabled")}()}}})}),define("DS/PIMwebUX/PIMwebItfServices",["UWA/Class/Promise","UWA/Core","css!DS/PIMwebUX/assets/css/PIMwebItfListUI"],function(e,t){"use strict";var i,n,l,a,s=!1;return{initIssueServices:function(){if(n)l.getSecurityContext=function(){return require("DS/PADUtils/PADSettingsMgt").getSetting("pad_security_ctx").replace("ctx::","")},l.getTenant=function(){return require("DS/PADUtils/PADUtilsServices").getPlatformId()};else{require(["DS/WAFData/WAFData","DS/IssueServices/Contexts","DS/IssueServices/services/PlatformServices","DS/IssueServices/services/IssueServices"],function(e,t,o,r){i=e,l=o,a=r,(n=t).add("widget",window.widget),l.getSecurityContext=function(){return require("DS/PADUtils/PADSettingsMgt").getSetting("pad_security_ctx").replace("ctx::","")},l.getTenant=function(){return require("DS/PADUtils/PADUtilsServices").getPlatformId()},l.initPlatformServices().then(function(){s=!0})})}},get3DSwymUrl:function(){return s&&l&&""!==l.get3DSwymUrl()?l.get3DSwymUrl():void 0},getEnoviaModelRelations:function(t){return new e(function(e){var n=l.get3DSpaceUrl()+"/resources/enorelnav/v2/navigate/getEcosystem?tenant="+l.getTenant(),a=[];a.push(t.itfuid);var s={ids:a,trueREST:!1,direction:"in",restrictedMode:!1,relations:["v6_annexdoc_from"],responseMode:"ObjectsAndLinks",label:[t.itfuid]+"relations_request_"+window.widget.id,widgetId:"Reveal-"+window.widget.id+"-"+Date.now()},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",SecurityContext:l.getSecurityContext()},type:"json",data:JSON.stringify(s),onComplete:function(t){const i=t.objects.filter(function(e){return"Issue"===e.type}).map(function(e){return e.id});e({status:"OK",issueIds:i})},onFailure:function(){e({status:"KO",issueIds:[]})}};i.authenticatedRequest(n,o)})},computeSharedIssuesURL:function(e){var i=l.get3DDashboardUrl()+"#dashboard:/tab:/app:ENXISSU_AP/content:XSharedContentId=";return i+=encodeURIComponent(JSON.stringify({issues:t.clone(e)}))},evalIssues:function(e,t){var i=this;this.getEnoviaModelRelations(e).then(function(n){let l=[];if(sessionStorage){let t=sessionStorage.getItem("PIMItfNewIssue"),i=t&&void 0!==t?JSON.parse(t):{};void 0!==i[e.itfuid]&&i[e.itfuid].forEach(function(e){(Date.now()-e.time)/1e3<300&&-1===n.issueIds.indexOf(e.id)&&n.issueIds.push(e.id)})}if(n.issueIds.forEach(function(e){l.push({physicalId:e})}),0===l.length){let i={itfuid:e.itfuid,itfIssueTitle:"-",itfIssueTitleUrl:"",itfIssueState:"",itfIssuePriority:"",itfIssueDesc:"",itfIssueName:""};i.itfIssueApprovals=i.itfIssueAssignees=i.itfIssueResolvedBy=i.itfIssueOwner=i.itfIssueModified="",t({status:"OK",grid:i})}else if(1===l.length)a.issues.retrieve({data:{objects:l}}).then(function(l){if(l.results.length>=1){let s=l.results[0].body,o=1===l.results.length?s.title:l.results.length.toString()+" Issues",r=i.computeSharedIssuesURL(n.issueIds),d={itfuid:e.itfuid,itfIssueTitle:o,itfIssueTitleUrl:r};d.itfIssueState=1===l.results.length?s.state:"",d.itfIssuePriority=1===l.results.length?s.priority:"",d.itfIssueDesc=1===l.results.length?s.description:"",d.itfIssueName=1===l.results.length?s.name:"",d.itfIssueModified=1===l.results.length?s.modified:"",d.itfIssueApprovals=1===l.results.length?!("Unassigned"===s.waitingOn||""===s.waitingOn):"";var a=[];s.assignees.forEach(function(e){a.push({label:e.fullName,userID:e.user})}),d.itfIssueAssignees=a.length>=1?a:"",d.itfIssueResolvedBy=1===l.results.length?0===s.resolvedBy.length?"No":"Yes("+s.resolvedBy.length.toString()+")":"",d.itfIssueOwner=1===l.results.length?[{label:s.owner.fullName,userID:s.owner.user}]:"",t({status:"OK",grid:d})}else{let i={itfuid:e.itfuid,itfIssueTitle:"-",itfIssueTitleUrl:"",itfIssueState:"",itfIssuePriority:"",itfIssueDesc:"",itfIssueName:""};i.itfIssueApprovals=i.itfIssueAssignees=i.itfIssueResolvedBy=i.itfIssueOwner=i.itfIssueModified="",t({status:"OK",grid:i})}});else if(l.length>1){let l=n.issueIds.length.toString()+" Issues",a=i.computeSharedIssuesURL(n.issueIds),s={itfuid:e.itfuid,itfIssueTitle:l,itfIssueTitleUrl:a,itfIssueState:"",itfIssuePriority:"",itfIssueDesc:"",itfIssueName:""};s.itfIssueApprovals=s.itfIssueAssignees=s.itfIssueResolvedBy=s.itfIssueOwner=s.itfIssueModified="",t({status:"OK",grid:s})}})}}}),define("DS/PIMwebUX/PIMwebIsrPanelIsrTab",["UWA/Core","UWA/Class","DS/Controls/LineEditor","DS/Controls/Editor","DS/CoreEvents/Events","DS/Controls/ComboBox","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelIsrTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,i,n,l,a,s){"use strict";return t.extend({init:function(t){var o,r,d,u,c,f,g=t.parent,p=t.ctrl,h=t.dialog,I=!!t.readOnly&&t.readOnly;function b(){if(f)for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].hasClassName("wux-ui-state-undefined")&&e[t].setAttribute("disabled",!0)}var m=[];p.getCreationParams().then(function(t){if(t&&t.types&&t.title&&t.name){d=t.name?t.name:"";var w=Object.keys(t.types).length;if(w){for(var C=0;C<w;C++)m.push(t.types[Object.keys(t.types)[C]]);if(l.publish({event:"onIsrTypeInitDone",data:m[0]}),p.setAllNlsType(t.types),f=e.createElement("div",{class:"PIMwebIsrPanelContextTabContent"}).inject(g),m.length>1){h.height=h.height+25,h.minHeight=h.minHeight+25;var v=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebFirstTitle"}).inject(f),S=e.createElement("div").inject(v);e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(S).innerHTML=s.isrType,(u=new a({elementsList:m,enableSearchFlag:!1})).inject(v),u.elements.container.setStyles({width:"100%"}),u.addEventListener("change",function(){l.publish({event:"onIsrTypeChange",data:u.value})})}var x;x=u?e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f):e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection  PIMwebFirstTitle"}).inject(f);var y=e.createElement("div").inject(x),F=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(y);F.innerHTML=s.isrTitle,F.setStyles({marginRight:"5px"}),c=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(y),e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(c),c.hide(),(o=new i({placeholder:s.titlePlaceholder,value:t.title?t.title:"",selectAllOnFocus:!0,autoCommitFlag:!0}).inject(x)).elements.container.setStyles({width:"100%"}),o.elements.container.childNodes[0].setStyles({width:"100%"}),o.addEventListener("change",function(){l.publish({event:"onTitleChange",data:o.value})}),l.publish({event:"onTitleChange",data:o.value});var M,P=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f),L=e.createElement("div").inject(P);e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(L).innerHTML=s.isrDescription,(r=new n({nbRows:7,newLineMode:"shiftEnter",placeholder:s.descriptionPlaceholder,value:"",selectAllOnFocus:!0,autoCommitFlag:!0}).inject(P)).elements.container.setStyles({width:"100%",resize:"both"}),r.elements.container.childNodes[0].setStyles({width:"100%",resize:"both"}),localStorage.getItem("PIMwebIsrSpecs")&&(M=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),M&&M.descWidth&&M.descHeight&&r.elements.container.childNodes[0].setStyles({width:M.descWidth,height:M.descHeight}),I&&b()}}}),this.getIsrInfo=function(){return{isrType:u?u.value:1===m.length?m[0]:null,isrTitle:o.value,isrName:d,isrDesc:r.value}},this.getPIMwebIsrTabPrefs=function(){var e={};return r&&(e.descWidth=r.elements.container.childNodes[0].getSize().width,e.descHeight=r.elements.container.childNodes[0].getSize().height),e},this.setIsrTitleValidity=function(e){e?c.hide():c.show()},this.disableTab=function(){b()},this.enableTab=function(){!function(){if(f)for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].hasClassName("wux-ui-state-undefined")&&e[t].removeAttribute("disabled")}()}}})}),define("DS/PIMwebUX/PIMwebDetailedItfListUI",["UWA/Core","UWA/Class","DS/DataGridView/DataGridView","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PIMwebUX/PIMwebItfServices","DS/PIMwebUX/PIMwebUnitsUX","DS/WebappsUtils/WebappsUtils","DS/CATWebUXPreferences/CATWebUXPreferencesUtils","UWA/Utils/Client","i18n!DS/PIMwebUX/assets/nls/PIMwebItfListUI","css!DS/PIMwebUX/assets/css/PIMwebItfListUI"],function(e,t,i,n,l,a,s,o,r,d,u){"use strict";var c,f="NotAnalyzed",g="OK",p="KO",h={},I="Clash",b="Contact",m="Clearance",w="NoInterference",C="Undefined",v="rgb(204, 9, 47)",S="rgb(255, 138, 46)",x="rgb(111, 188, 75)",y="rgb(0, 157, 219)",F="rgb(254, 224, 0)",M="rgb(111, 188, 75)",P="rgb(204, 9, 47)",L="rgb(254, 224, 0)",R={iconName:"presentation-slide",fontIconFamily:window.WUXManagedFontIcons.Font3DS},E=o.getWebappsAssetUrl("PIMwebUX","icons/22/"),D=["itfQuantifier","itfPenVec","itfMinDist","itfPenVol","itfTolerance"],O=["itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblFstType1","itfLblFstType2","itfLblCollabSpace1Ref","itfLblCollabSpace2Ref","itfLblCollabSpace1Shape","itfLblCollabSpace2Shape","itfLblOrganization1Ref","itfLblOrganization2Ref","itfLblOrganization1Shape","itfLblOrganization2Shape","itfLblMaturity1Ref","itfLblMaturity2Ref","itfLblMaturity1Shape","itfIssueState","itfIssuePriority","itfIssueApprovals","itfLblMaturity2Shape","itfLblRevision1Ref","itfLblRevision2Ref","itfLblRevision1Shape","itfLblRevision2Shape","itfOwner","itfOwnerID","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblShape1OwnerID","itfLblShape2OwnerID","current","organization","project","revision","policy","owner","itfCurrent","V_Context_Validity_Status","ISUPTODATE"],V={itfLblSlide:"M:itfLblSlide",tree:"M:Name",itfCtxName:"M:V_Name",itfDescription:"M:description",itfAnalysis:"M:V_Itf_Analysis",itfPrevAnalysis:"M:V_Itf_Previous_Analysis",itfSystemType:"M:V_Itf_Type",itfUserType:"M:V_Itf_User_Type",itfTolerance:"M:V_Itf_Real_Tolerance_Used_For_Computation",itfClearVal:"M:V_Itf_Spec_Clearance_value",itfPenVec:"M:V_Itf_Penetration_Value",itfPenVol:"M:V_Itf_Clash_Volume",itfMinDist:"M:V_Itf_Distance_Min",itfFeat1:"M:V_Itf_Feature_UUID_1",itfFeat2:"M:V_Itf_Feature_UUID_2",itfFeatName1:"M:V_Itf_Feature_Name_1",itfFeatName2:"M:V_Itf_Feature_Name_2",itfIssueTitle:"M:itfIssueTitle",itfIssueState:"M:itfIssueState",itfIssueDesc:"M:itfIssueDesc",itfIssueName:"M:itfIssueName",itfIssuePriority:"M:itfIssuePriority",itfIssueApprovals:"M:itfIssueApprovals",itfIssueAssignees:"M:itfIssueAssignees",itfIssueOwner:"M:itfIssueOwner",itfIssueResolvedBy:"M:itfIssueResolvedBy",itfIssueModified:"M:itfIssueModified",itfOwner:"M:responsible",itfOwnerID:"M:owner",itfCurrent:"M:status",itfQuantifier:"M:V_Quantifier",itfLblRef1:"R1:V_Name",itfLblRef2:"R2:V_Name",itfLblRef1Owner:"R1:owner",itfLblRef2Owner:"R2:owner",itfLblMaturity1Ref:"R1:current",itfLblMaturity2Ref:"R2:current",itfLblOrganization1Ref:"R1:organization",itfLblOrganization2Ref:"R2:organization",itfLblCollabSpace1Ref:"R1:project",itfLblCollabSpace2Ref:"R2:project",itfLblRef1OwnerID:"R1:ownerID",itfLblRef2OwnerID:"R2:ownerID",itfLblRevision1Ref:"R1:revision",itfLblRevision2Ref:"R2:revision",itfLblShape1:"S1:V_Name",itfLblShape2:"S2:V_Name",itfLblShape2Owner:"S1:owner",itfLblShape1Owner:"S2:owner",itfLblMaturity1Shape:"S1:current",itfLblMaturity2Shape:"S2:current",itfLblOrganization1Shape:"S1:organization",itfLblOrganization2Shape:"S2:organization",itfLblCollabSpace1Shape:"S1:project",itfLblCollabSpace2Shape:"S2:project",itfLblShape1OwnerID:"S1:ownerID",itfLblShape2OwnerID:"S2:ownerID",itfLblRevision1Shape:"S1:revision",itfLblRevision2Shape:"S2:revision",itfLblInst1:"I1:PLM_ExternalID",itfLblInst2:"I2:PLM_ExternalID",itfLblInst1Owner:"I1:owner",itfLblInst2Owner:"I2:owner",itfLblInst1OwnerID:"I1:ownerID",itfLblInst2OwnerID:"I2:ownerID",itfLblFstInst1:"F1:PLM_ExternalID",itfLblFstInst2:"F2:PLM_ExternalID",itfLblFstRef1:"F1:V_Name",itfLblFstRef2:"F2:V_Name",itfLblFstType1:"F1:V_Type",itfLblFstType2:"F2:V_Type",itfLblInst1Path:"I1:V_Path_to_Instance",itfLblInst2Path:"I2:V_Path_to_Instance",itfLblRef1Path:"R1:V_Path_to_Reference",itfLblRef2Path:"R2:V_Path_to_Reference"},T={EnumItfType:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus1:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus2:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}}};T.EnumItfType.semantics.possibleValues[u.Clash]=I,T.EnumItfType.semantics.possibleValues[u.Contact]=b,T.EnumItfType.semantics.possibleValues[u.Clearance]=m,T.EnumItfType.semantics.possibleValues[u.NoInterference]=w,T.EnumItfType.semantics.possibleValues[u.Undefined]=C,T.EnumItfStatus1.semantics.possibleValues[u.itfOK]=g,T.EnumItfStatus1.semantics.possibleValues[u.itfKO]=p,T.EnumItfStatus1.semantics.possibleValues[u.itfToAnalyze]=f,T.EnumItfStatus2.semantics.possibleValues[u.itfOK]=g,T.EnumItfStatus2.semantics.possibleValues[u.itfKO]=p,T.EnumItfStatus2.semantics.possibleValues[u.itfToReAnalyze]=f;var A,k,N,U,j,G=function(e,t){var i=u[e],n=u[t];return i===n?0:i<n?-1:1},_=function(e,t,i,n){return A=i.options.grid.itfPrevAnalysis,k=n.options.grid.itfPrevAnalysis,N=t===f?""===k||void 0===k?"itfToAnalyze":"itfToReAnalyze":t===g?"itfOK":"itfKO",U=u[e===f?""===A||void 0===A?"itfToAnalyze":"itfToReAnalyze":e===g?"itfOK":"itfKO"],j=u[N],U===j?0:U<j?-1:1};function W(e,t){return e||t?e?t?e===t?0:e<t?-1:1:1:-1:0}function B(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfUserType)return"EnumItfType"}function Q(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfAnalysis){var t=e.nodeModel.options.grid.itfPrevAnalysis;return""===t||void 0===t?"EnumItfStatus1":"EnumItfStatus2"}}function X(e){if(e&&-1!==e.rowID&&e.nodeModel)return e.nodeModel.options.grid.itfLblSlide?"url":void 0}function z(e){var t=e.cellModel;return t===I?v:t===b?S:t===m?x:t===w?y:t===C?F:null}function H(e){var t=e.cellModel;return t===g?M:t===p?P:t===f?L:null}function K(e,t){return e<t?-1:e>t?1:0}return t.extend({init:function(t){var o,d,p={},I=null,b=t.readOnly,m=t.cbDnD?t.cbDnD:{},w=t.parent,C=this,v=!1,S="PIMwebItfListColPref"+(t.suffix?t.suffix:""),x=!1,y=t.deforder,F=t.defCols,M={},P=!0,L=0,A={pending:[],running:[]};if(D=D.concat(t.filterCols?t.filterCols.addColswithNumber:[]),O=O.concat(t.filterCols?t.filterCols.addColsWithSet:[]),a.initIssueServices(),t.isWebInWin)x=!0;else if(t.filterCols&&!F&&!t.filterCols.addColsWithSet){const e=O.indexOf("label");e>-1&&O.splice(e,1)}function k(e){(e||e.length||e.volume)&&(x?(e.length.unit&&s.length[e.length.unit]&&(M.length={val:e.length.unit,ratio:s.length[e.length.unit],decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&s.volume[e.volume.unit]&&(M.volume={val:e.volume.unit,ratio:s.volume[e.volume.unit],decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO})):(e.length.unit&&(M.length={val:e.length.unit,decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&(M.volume={val:e.volume.unit,decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO})),e.highExponent&&(M.highExponent=e.highExponent),e.lowExponent&&(M.lowExponent=e.lowExponent))}function N(e,t){if(!("number"!=typeof e||e<=0)){var i,n=t?M.volume:M.length,l=e,a=1-Math.floor(Math.log(l)/Math.log(10)+1),s=n.decimalRW+a+M.highExponent+1;if(x)l=0!==(i=Number((l*(t?1:.001)*n.ratio).toFixed(n.decimalRW)))?i:Number((l*(t?1:.001)*n.ratio).toFixed(s));else if(l){let e=t?r.convert(l,"Volume","CubMet",n.val):r.convert(l,"Length","Millimeter",n.val);l=Number(e.toFixed(n.decimalRW))}return l}}function U(e){if("itfLblSlide"===e)return this.grid[e]?this.grid[e]:0;if("label"===e)return this.label;if(D.indexOf(e)>-1){var t="itfPenVol"===e||P&&"itfQuantifier"===e&&"Clash"===this.grid.itfSystemType;return this.grid[e]?N(this.grid[e],t):void 0}if("itfUserType"===e)return u[this.grid[e]];if("itfAnalysis"===e){var i=this.grid[e]===f?""===this.grid.itfPrevAnalysis?"itfToAnalyze":"itfToReAnalyze":this.grid[e]===g?"itfOK":"itfKO";return u[i]}return"itfIssueState"===e?u["itfIssueMaturity"+this.grid[e]]:"itfIssuePriority"===e?u["itfIssuePriorities"+this.grid[e]]:u[this.grid[e]]?u[this.grid[e]]:this.grid[e]}function j(e){if(e.nodeModel){var t=I.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===t)return e.nodeModel.options.grid[t]?{icon:R,label:e.nodeModel.options.grid[t]}:void 0;var i="itfPenVol"===t||P&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return N(e.nodeModel.options.grid[t],i)}}function q(e){if(e.nodeModel){var t=I.layout.getDataIndexFromColumnIndex(e.columnID);return void 0===e.nodeModel.options.grid[t]?u.itfCustErrorMsg:e.nodeModel.options.grid[t]}}function J(e){if(e.nodeModel){var t=I.layout.getDataIndexFromColumnIndex(e.columnID);return u[e.nodeModel.options.grid[t]]||""}}function Y(e){if(e.nodeModel){var t=I.layout.getDataIndexFromColumnIndex(e.columnID);return u["itf"+e.nodeModel.options.grid[t]]||""}}function Z(e){if("number"==typeof e.cellModel){var t=I.layout.getDataIndexFromColumnIndex(e.columnID),i="itfPenVol"===t||P&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return x?{units:(i?M.volume:M.length).val}:i?{units:r.Volume[M.volume.val].symbol}:{units:r.Length[M.length.val].symbol}}}function $(e){if(-1!==e.rowID&&e.cellModel)return j(e)+" "+Z(e).units}function ee(e){return!e.cellModel}function te(e){var t="",i=I.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===i)return-1===e.rowID?u.itfLblSlide:e.nodeModel.options.grid.itfLblSlide?String(e.nodeModel.options.grid.itfLblSlide):"";if(-1!==e.rowID&&e.cellModel){if("tree"===i)t+=e.nodeModel.options.label,e.nodeModel.getParents().forEach(function(e){t=e.options.label+"|"+t});else if("itfUserType"===i)t=u[e.cellModel];else if("itfAnalysis"===i){var n=e.nodeModel.options.grid.itfPrevAnalysis,l=e.cellModel;t=u[l===f?""===n?"itfToAnalyze":"itfToReAnalyze":l===g?"itfOK":"itfKO"]}else if("itfOwner"===i||"itfOwner"===i)t=e.cellModel&&""!==e.cellModel?e.cellModel.label:e.cellModel;else if("itfIssueOwner"===i||"itfIssueAssignees"===i)t=e.cellModel.map(e=>e.label).toString();else if("itfLblInst1Owner"===i||"itfLblInst2Owner"===i||"itfLblRef1Owner"===i||"itfLblRef2Owner"===i||"itfLblShape1Owner"===i||"itfLblShape2Owner"===i||"itfOwner"===i)t=e.cellModel&&""!==e.cellModel?e.cellModel.label:e.cellModel;else if("itfIssueTitle"===i)t=e.cellModel.label;else{if("itfIssueState"===i)return u["itfIssueMaturity"+e.cellModel];if("itfIssuePriority"===i)return u["itfIssuePriorities"+e.cellModel]}return t}}function ie(){setTimeout(function(){I.reapplySortModel();var t=JSON.parse(localStorage.getItem(S));t&&t.filterModel&&!e.equals(t.filterModel,{})&&(d.setFilterModel({}),d.setFilterModel(t.filterModel),Object.keys(t.filterModel).forEach(function(e){var t=d.getFilterManager().getFilters()[e];t&&t.defaultFilterModel&&(t.defaultFilterModel=void 0)}))},10)}function ne(e){return!b&&(!("itfCtxName"===I.columns[e.columnID].dataIndex&&e.nodeModel&&e.nodeModel.getNumberOfChildren()>0)&&((!e.nodeModel||!e.nodeModel.options.grid.isNonEditable&&!e.nodeModel.options.grid.isNonPersistentPIM)&&(!x||(void 0===I.columns[e.columnID].editableFlag||I.columns[e.columnID].editableFlag))))}function le(e){var t=I.columns[e.columnID].dataIndex,i=[];(i=I.getTreeDocument().getSelectedNodes().filter(function(e){return e.options.grid.itfuid&&!e.options.grid.isNonEditable})).length||i.push(e.nodeModel),d.withTransactionUpdate(function(){i.forEach(function(e){if(e.options.grid.hasOwnProperty(t)){var i={};i[t]=e.options.grid.itfIssueApprovals,e.updateOptions({grid:i})}})})}function ae(e,t){if(!b){var i=I.columns[e.columnID].dataIndex,n=[];"tree"===i&&e.nodeModel.updateOptions({label:t}),(n=I.getTreeDocument().getSelectedNodes().filter(function(e){return e.options.grid.itfuid&&!e.options.grid.isNonEditable})).length||n.push(e.nodeModel),d.withTransactionUpdate(function(){n.forEach(function(e){if(e.options.grid.hasOwnProperty(i)){var n={};n[i]=t,e.options.grid.tree===e.options.grid.itfCtxName&&(n["tree"===i?"itfCtxName":"tree"]=e.options.grid.itfName=t,"itfCtxName"===i&&e.updateOptions({label:t})),e.updateOptions({grid:n})}})}),n.forEach(function(e){if(C.onCellEdit&&e.options.grid.hasOwnProperty(i)){var n=e.options.grid,l="tree"===i?n.tree!==n.itfCtxName?"itfMetricName":"itfCtxName":i,a=e.getChildren()&&e.getChildren().length&&!x?e.getChildren()[0].options.grid.itfuid:n.itfuid;C.onCellEdit({id:a,actualId:n.itfuid,param:l,newValue:t})}})}}function se(t){let i=e.createElement("div",{class:""});return i.value=t,i.getStringFromValue=function(e){return e||""},i.computeContentSize=function(){let e=15;for(let t=i.childNodes.length-1;t>=0;--t)e+=i.childNodes[t].getDimensions().width;return e},i}function oe(t){var i=e.createElement("div",{class:"spinner spinning",styles:{display:"flex","justify-content":"center",transform:"translate3d(0,0,0)"}}).inject(t);e.createElement("span",{class:"spinner-bar"}).inject(i),e.createElement("span",{class:"spinner-bar spinner-bar1"}).inject(i),e.createElement("span",{class:"spinner-bar spinner-bar2"}).inject(i),e.createElement("span",{class:"spinner-bar spinner-bar3"}).inject(i)}function re(t,i,n){let l=se(i);if(n.contains("itfIssueState_Blank"))return l;if(n.contains("itfCellIssue_QueryRunning"))oe(l);else{var a=I.layout.getDataIndexFromColumnIndex(t.columnID);if("itfIssueState"===a){let t=u["itfIssueMaturity"+i],n=e.createElement("span",{html:t,class:"itfCellsPadding itfIssueState"+i});n.style.color="white",n.inject(l)}else if("itfIssuePriority"===a){let t="";"High"===i?t="high wux-ui-3ds wux-ui-3ds-level-high":"Low"===i?t="low wux-ui-3ds wux-ui-3ds-level-low":"Medium"===i?t="medium wux-ui-3ds wux-ui-3ds-level-medium":"Urgent"===i&&(t="urgent wux-ui-3ds wux-ui-3ds-alert"),e.createElement("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-lg wux-ui-3ds-"+t+" itfIssuePriority"+i+" itfCellsPadding"}).inject(l);let n=u["itfIssuePriorities"+i];e.createElement("span",{html:n}).inject(l)}}return l}function de(e,t,i,n){let l,a;"itfCellIssue_QueryRunning"===t?(a="itfCellIssue_QueryRunning"+t,e.cellView&&e.cellView.elements&&e.cellView.elements.KPIColorDiv&&e.cellView.elements.KPIColorDiv.hide()):a="itfCellState_"+t+i,I._reusableCellContentManager.isRegistered(a)||I.registerReusableCellContent({id:a,buildContent:n.bind(null,e,i,t)}),l=I.reuseCellContent(a),e.cellView._setReusableContent(l),e.cellView.getContent().removeAttribute("no-tweaker")}function ue(e){d.withTransactionUpdate(function(){d.search({match:function(t){e.grid.itfuid&&t.nodeModel.options.grid.itfuid===e.grid.itfuid&&(t.nodeModel.updateOptions({grid:e.grid}),function(e){let t=A.pending.indexOf(e);t>-1&&A.pending.splice(t,1),(t=A.running.indexOf(e))>-1&&A.running.splice(t,1),A.pending.length>0&&A.pending.forEach(function(e){d.search({match:function(t){if(t.nodeModel.options.grid.itfuid===e){let e=t.nodeModel.options.grid,i=e.itfuid;for(;A.running.length<40&&-1===A.running.indexOf(i);)-1===A.running.indexOf(i)&&(A.running.push(i),a.evalIssues(e,ue))}}})})}(e.grid.itfuid))}})})}function ce(e){let t=e.nodeModel.options.grid;if(t.itfIssueTitle=t.itfIssueTitle?t.itfIssueTitle:"running","running"!==t.itfIssueTitle)return{icon:"-"===t.itfIssueTitle?void 0:E+"I_DMUIssueSmall.png",label:t.itfIssueTitle,url:t.itfIssueTitleUrl}}function fe(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfIssueApprovals;return void 0!==t&&"running"!==t&&""!==t?"independantBoolean":void 0}function ge(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfIssueAssignees;return void 0!==t&&"running"!==t&&""!==t?"user":void 0}function pe(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfIssueOwner;return void 0!==t&&"running"!==t&&""!==t?"user":void 0}function he(e){if(e){if(h.hasOwnProperty(e))return h[e];var t=a.get3DSwymUrl();return h[e]=t?t+"/api/user/getpicture/login/"+e+"/format/mini":""}}function Ie(e){let t=e.nodeModel.options.grid;if(t.itfIssueAssignees=void 0!==t.itfIssueAssignees?t.itfIssueAssignees:"running","running"!==t.itfIssueAssignees)return""===t.itfIssueAssignees?t.itfIssueAssignees:t.itfIssueAssignees.map(function(e){return{label:e.label.trim(),url:he(e.userID)?"":void 0}})}function be(e){let t=e.nodeModel.options.grid;if(t.itfIssueOwner=void 0!==t.itfIssueOwner?t.itfIssueOwner:"running","running"!==t.itfIssueOwner)return""===t.itfIssueOwner?t.itfIssueOwner:t.itfIssueOwner.map(function(e){return{label:e.label.trim(),url:he(e.userID)?"":void 0}})}function me(e,t){let i=void 0!==t?t:"running";if("running"!==i)return I.defaultOnCellRequest(e);de(e,"running"===i?"itfCellIssue_QueryRunning":i,i,re)}function we(e){if(!(I&&e&&e.nodeModel&&e.cellView))return;let t=e.nodeModel.options.grid;t.mID||(t.itfIssueTitle=t.itfIssueDesc=t.itfIssueName=t.itfIssueApprovals=t.itfIssueAssignees="",t.itfIssueOwner=t.itfIssuePriority=t.itfIssueState=t.itfIssueResolvedBy=t.itfIssueModified="");var i=I.layout.getDataIndexFromColumnIndex(e.columnID);if("itfIssueTitle"===i)me(e,t.itfIssueTitle);else if("itfIssueDesc"===i)me(e,t.itfIssueDesc);else if("itfIssueName"===i)me(e,t.itfIssueName);else if("itfIssueOwner"===i)me(e,t.itfIssueOwner);else if("itfIssueAssignees"===i)me(e,t.itfIssueAssignees);else if("itfIssueApprovals"===i)me(e,t.itfIssueApprovals);else if("itfIssueResolvedBy"===i)me(e,t.itfIssueResolvedBy);else if("itfIssueModified"===i)me(e,t.itfIssueModified);else if("itfIssuePriority"===i){t.itfIssuePriority=void 0!==t.itfIssuePriority?t.itfIssuePriority:"running",de(e,"running"===t.itfIssuePriority?"itfCellIssue_QueryRunning":t.itfIssuePriority,t.itfIssuePriority,re)}else if("itfIssueState"===i){t.itfIssueState=void 0!==t.itfIssueState?t.itfIssueState:"running",de(e,"running"===t.itfIssueState?"itfCellIssue_QueryRunning":""===t.itfIssueState?"itfIssueState_Blank":t.itfIssueState,t.itfIssueState,re)}if(t.mID&&(!t.itfIssueTitle||"running"===t.itfIssueTitle)&&-1===A.running.indexOf(t.itfuid)){let e=t.itfuid;for(-1===A.pending.indexOf(e)&&A.pending.push(e);A.running.length<40&&-1===A.running.indexOf(e);)a.evalIssues(t,ue),-1===A.running.indexOf(e)&&A.running.push(e)}}function Ce(e,t,i){let n=se(t);return i.contains("itfCellCust_QueryRunning")&&oe(n),n}function ve(e){if(!I||!e||!e.nodeModel)return;let t=I.layout.getDataIndexFromColumnIndex(e.columnID);return Boolean(e.nodeModel.options.grid[t])}function Se(e){if(!I||!e||!e.nodeModel)return;let t=I.layout.getDataIndexFromColumnIndex(e.columnID),i=e.nodeModel.options.grid[t];return i?{url:he(e.nodeModel.options.grid[t+"ID"])?"":void 0,label:i}:void 0}function xe(e,t){if("running"!==t)return I.defaultOnCellRequest(e);!function(e,t,i,n){let l,a;"itfCellCust_QueryRunning"===t?(a="itfCellCust_QueryRunning"+t,e.cellView&&e.cellView.elements&&e.cellView.elements.KPIColorDiv&&e.cellView.elements.KPIColorDiv.hide()):a="itfCellState_"+t+i,I._reusableCellContentManager.isRegistered(a)||I.registerReusableCellContent({id:a,buildContent:n.bind(null,e,i,t)}),l=I.reuseCellContent(a),e.cellView._setReusableContent(l),e.cellView.getContent().removeAttribute("no-tweaker")}(e,"running"===t?"itfCellCust_QueryRunning":t,t,Ce)}function ye(e){let t;if(!(I&&e&&e.nodeModel&&e.cellView))return;var i=I.layout.getDataIndexFromColumnIndex(e.columnID);let n=e.nodeModel.options.grid;xe(e,t=i in n&&!0===n.isQueryValueFetched?n[i]:i in n==!1&&!0===n.isQueryValueFetched?u.itfCustErrorMsg:"running")}function Fe(e){if(Array.isArray(e)&&"function"==typeof C.onSelect){var t=[],i=[];e.forEach(function(e){e.hasChildren()||-1!==t.indexOf(e.options.grid.itfuid)?e.processDescendants({processNode:function(e){var i=e.nodeModel;-1!==t.indexOf(i.options.grid.itfuid)||i.getChildren()||i.isFiltered()||i.isSelected()||t.push(e.nodeModel.options.grid.itfuid)}}):t.push(e.options.grid.itfuid),e.options.grid&&e.options.grid.itfuid&&i.push(e.options.grid.itfuid)}),C.onSelect({idsSelected:t,actualIdsSelected:i})}}function Me(e){if(Array.isArray(e)&&"function"==typeof C.onUnselect){var t=[],i=[];e.forEach(function(e){0===e.getParents().filter(function(e){return e.isSelected()}).length&&(e.hasChildren()||-1!==t.indexOf(e.options.grid.itfuid)?e.processDescendants({processNode:function(e){var i=e.nodeModel,n=i&&i.getParents().some(function(e){return e.isSelected()});!i||n||-1!==t.indexOf(i.options.grid.itfuid)||i.getChildren()||i.isSelected()||t.push(e.nodeModel.options.grid.itfuid)}}):t.push(e.options.grid.itfuid)),e.options.grid&&e.options.grid.itfuid&&i.push(e.options.grid.itfuid)}),x?C.onUnselect(t,i):C.onUnselect(t,null,i)}}function Pe(e){e&&(e.itfQuantifier=void 0,"Clash"===e.itfSystemType?e.itfQuantifier=P?e.itfPenVol:e.itfPenVec:"Clearance"===e.itfSystemType&&(e.itfQuantifier=e.itfMinDist))}function Le(e){Object.keys(e).forEach(function(t){var i=e[t];i&&i.itfuid&&"Clash"===i.itfSystemType&&(i.itfPenVol&&i.itfPenVec?L=3:i.itfPenVol?L=2===L?3:1:i.itfPenVec&&(L=1===L?3:2),P=3===L||1===L),3!==L&&e[t]&&("object"==typeof e[t]||Array.isArray(e[t]))&&Le(e[t])})}function Re(e,t){if(void 0!==e.itfuid){Pe(e);var i={label:e.itfName,grid:e,getAttributeValueForFiltering:U};e.icons&&e.itfName&&(i.icons=e.icons.map(e=>E+e));var n=new l(i);return p[e.itfuid]=n,window.__karma__&&(n.toChangeValueForODT=ae),t&&t.addChild(n),n}}function Ee(e){3!==L&&Le(e);var t=[];Object.keys(e).forEach(function(i){!function e(i,n){var l=n,a=l===d;if(i.hasOwnProperty("row")&&(l=Re(i.row,a?void 0:l),a&&t.push(l)),i.hasOwnProperty("children")){var s=i.children;Object.keys(s).forEach(function(t){s[t].hasOwnProperty("row")&&e(s[t],l)})}}(e[i],d)}),t.length&&d.addRoot(t)}k(e.extend({length:{unit:"mm",decimalRW:3,decimalRO:3},volume:{unit:"mm3",decimalRW:3,decimalRO:3}},t.units)),this.onIssueSuccess=function(e,t){d.withTransactionUpdate(function(){d.search({match:function(i){if(e.itfuid&&i.nodeModel.options.grid.itfuid===e.itfuid){e.itfIssueTitle=e.itfIssueState=e.itfIssueDesc=e.itfIssueName=e.itfIssuePriority=e.itfIssueApprovals=e.itfIssueAssignees=e.itfIssueOwner=e.itfIssueResolvedBy=e.itfIssueModified="running";let n=A.running.indexOf(e.itfuid);if(n>=0&&A.running.splice(n,1),sessionStorage){let i=sessionStorage.getItem("PIMItfNewIssue"),n=i&&void 0!==i?JSON.parse(i):{};void 0===n[e.itfuid]?(n[e.itfuid]=[{time:Date.now(),id:t}],sessionStorage.setItem("PIMItfNewIssue",JSON.stringify(n))):-1===n[e.itfuid].indexOf(t)&&(n[e.itfuid].push({time:Date.now(),id:t}),sessionStorage.setItem("PIMItfNewIssue",JSON.stringify(n)))}i.nodeModel.updateOptions({grid:e})}}})})},this.updateInterferences=function(e){0===Object.keys(p).length?Ee(e):d.withTransactionUpdate(function(){function t(e,t){!e.search({match:function(e){if(e.nodeModel.options.grid.itfuid===t)return!0}}).length&&p[t]&&(e.addChild(p[t]),3!==L&&Le([p[t].options.grid]))}Object.keys(e).forEach(function(i){e[i].hasOwnProperty("row")&&function e(i){Object.keys(i).forEach(function(n){if(i[n]&&i[n].itfuid&&"object"==typeof i[n]){var l=i[n];3!==L&&Le([l.itfuid]),p.hasOwnProperty(l.itfuid)&&(Pe(l),p[l.itfuid].updateOptions({label:l.itfName,grid:l})),p[l.itfuid]||Re(l,l.childOf?void 0:d),l.childIds&&i.children&&l.childIds.length===Object.keys(i.children).length&&Object.keys(i.children).forEach(function(e){p[l.childIds[e]]?i.children[e]&&i.children[e].row&&t(p[l.itfuid],i.children[e].row.itfuid):Re(i.children[e],p[l.itfuid])}),l.childOf&&p[l.childOf]&&t(p[l.childOf],l.itfuid)}if(i.hasOwnProperty("row")&&e(i[n]),i.hasOwnProperty("children")){var a=i.children;Object.keys(a).forEach(function(t){a[t].hasOwnProperty("row")&&e(a[t])})}})}(e[i])})}),ie()},this.showSlideColumn=function(e){o.forEach(function(t){"itfLblSlide"===t.dataIndex&&I.layout.setColumnVisibleFlag(t.dataIndex,e,{isUserInteraction:!0})})},this.removeInterferences=function(){L=0,P=!0,I.getNodesXSO().empty(),d.empty(),p={}},this.getSelectedInterferences=function(e){return e?I.getTreeDocument().getSelectedNodes().map(function(e){return e.options.grid.itfuid}).filter(function(e){return e}):this.getLeafNodeIds(!0)},this.getSelectedRows=function(){var e=[];return I.getNodesXSO().get().forEach(function(t){var i=I.layout.getCellsFromNodeModel(t,!0);i&&e.push(I.getCellInfosAt(i[0]).rowID)}),e.sort(K)},this.selectRows=function(e){var t=e.map(function(e){return I.model[e]});d.withTransactionUpdate(function(){I.unselectAll(),I.setActiveCell(-1,!1,!1),t.forEach(function(e){I.selectNodeModel(e,!0,!1)}),I.ensureNodeModelVisible(t[0],!1,!0)})},this.selectRowsByUID=function(e,t){var i,n=this.getSelectedInterferences();if(!t&&n.length===e.length&&e.every(function(e,t){return e===n[t]}))return 1;I.unselectAll(),I.setActiveCell(-1,!1,!1),e.forEach(function(e){e&&d.search({match:function(t){var n=t.nodeModel.options.grid;(n.itfuid===e||n.childIds&&1===n.childIds.length&&n.childIds.indexOf(e)>-1)&&(I.selectNodeModel(t.nodeModel,!0,!1),i||(i=t.nodeModel))}})}),i&&I.ensureNodeModelVisible(i,!1,!0)},this.selectOrUnselectAll=function(e){e?I.selectAllVisibleNodes():I.unselectAll()},this.selectOrUnselectRows=function(e,t,i,n){var l=e.map(function(e){return I.model[e]});d.withTransactionUpdate(function(){l.forEach(function(e){t?I.selectNodeModel(e,i,n):I.unselectNodeModel(e)})}),I.ensureNodeModelVisible(l[0],!1,!0),n||I.setActiveCell(I.layout.getCellsFromNodeModel(l[0],!0)[0],!1,!0)},this.getNumberOfRows=function(){return I.model.length},this.removeCustoColoumn=function(){for(var e=I.layout.columns.length;e>c;e--)I.layout.columns.pop()},this.addCustoColumn=function(e){!function(e){var t=!1;for(let n=0;n<I.layout.columns.length;n++){var i=I.layout.columns[n];if(i&&i.dataIndex===e.dataIndex&&i.text===e.text){t=!0;break}}if(!t){let t={dataIndex:e.dataIndex,text:e.text,editableFlag:e.editableFlag&&!b,visibleFlag:!0,width:"auto",getCellValue:q,onCellRequest:ye};e.editableFlag&&Object.assign(t,{setCellValue:ae}),I.addColumnOrGroup(t)}}(e)},this.addColsFromDefaultView=function(e){var t=[];e.forEach(function(e){t.push(void 0===Object.keys(V).find(t=>V[t]===e)?e:Object.keys(V).find(t=>V[t]===e))});const i=t.filter(e=>e);!function(e){var t=I.getCustomViewsManager().getCustomViews().length>0?I.getCustomViewsManager().getCustomViews()[0]:I.getCustomViewsManager().getCustomViews();o.forEach(function(i){var n=e.includes(i.dataIndex);if(void 0!==t.columnsVisibleFlag&&t.columnsVisibleFlag.hasOwnProperty(i.dataIndex))t.columnsVisibleFlag[i.dataIndex]=n;else{var l={};void 0===t.columnsVisibleFlag&&(t.columnsVisibleFlag={}),l[i.dataIndex]=n,Object.assign(t.columnsVisibleFlag,l)}})}(i),function(e){var t=I.layout.getVisibleOrderedLeafColumns().map(function(e){return e.dataIndex});if(!(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((e,i)=>e===t[i]))){for(var i=0;i<e.length;i++)if(void 0!==I.getColumnOrGroup(e[i])){var n=I.getColumnOrGroup(e[i]);I.removeColumnOrGroup(e[i]),I.addColumnOrGroup(n,i)}(I.getCustomViewsManager().getCurrentCustomView()&&"Default View"===I.getCustomViewsManager().getCurrentCustomView().identifier||void 0===I.getCustomViewsManager().getCurrentCustomView())&&I.getCustomViewsManager().setCustomViews(I.getCustomViewsManager()._customViews,"Default View",!0,!0)}}(i)},this.addCustomAttrKeyAndName=function(e){var t={};t[e]=e,Object.assign(V,t)},this.getVisibleRows=function(){if(I)return I.model.map(function(e){return e.options.grid.itfuid})},this.setListUIReadyOnlyFlag=function(e){b="pending"===e||"running"===e},this.getInternalChildInfo=function(e){var t;if(e)return d.search({match:function(i){var n=i.nodeModel.options.grid;(n.itfuid===e||n.childIds&&1===n.childIds.length&&n.childIds.indexOf(e)>-1)&&(t=n)}}),t},this.IsPenVolInQuantCol=function(){return P},this.toggleReadOnly=function(){d.withTransactionUpdate(function(){b=!b;var e=["tree","itfCtxName","itfDescription","itfUserType","itfAnalysis"];o.forEach(function(t){e.indexOf(t.dataIndex)>-1&&(t[I?"editableFlag":"isEditable"]=!b)})})},this.getRowInternalData=function(e){return e<=I.model.length?I.model[e].options.grid:{}},this.getColumns=function(){if(!I)return{};var e=[];return I.columns.forEach(function(t){e.push({dataIndex:t.dataIndex,text:t.text,editableFlag:t.editableFlag,visibleFlag:t.visibleFlag})}),e},this.getRowData=function(e,t,i){if(e>I.model.length)return[];var n=[],l=I.model[e].options.grid,a=I.layout.getLeafColumns();return t||(a=I.layout.getVisibleOrderedColumnsIndexes().map(function(e){return a[e]})),a.forEach(function(t){if(l[t.dataIndex]){var a=i?t.text:t.dataIndex;if("function"==typeof t.getCellValueForExport){var s=I.layout.getCellIDFromCoordinates({rowID:e,columnID:I.layout.getColumnIndex(t.dataIndex)});if(void 0!==I.getCellInfosAt(s).cellModel){var o=t.getCellValueForExport(I.getCellInfosAt(s));n[a]=o||" "}}else"time"===t.typeRepresentation?n[a]=new Date(l[t.dataIndex]).toLocaleString():n[a]=l[t.dataIndex]?l[t.dataIndex]:" "}}),i||(n.itfuid=l.itfuid?l.itfuid:void 0),n},this.getRowInfosFromMousePosition=function(e){var t=I.layout.getCellIDFromPositionInView(e),i=I.getCellInfosAt(t).rowID;return i>=0?C.getRowData(i,!1,!0):[]},this.ensureSelectedLineVisibility=function(){var e=I.getNodesXSO().get();e&&0!==e.length&&I.ensureNodeModelVisible(e[0],!1,!0)},this.setUnits=k,this.exportAsCSV=function(e){return I.getAsCSV(e)},this.isDataGridReady=function(){return v},this.switchQuantifierColumnVal=function(e){P=e.isPenVolume,d.getAllDescendants().forEach(function(t){"Clash"===t.options.grid.itfSystemType&&(t.options.grid.itfQuantifier=e.isPenVolume?t.options.grid.itfPenVol:t.options.grid.itfPenVec,t.updateOptions({grid:t.options.grid}))}),ie()},this.reApplyFilterAndSort=ie,this.updateDataGridView=function(e){setTimeout(function(){I.invalidateLayout(e)},0)},this.getLeafNodeIds=function(e){var t=e?I.getTreeDocument().getSelectedNodes():[d],i=[];return 1!==t.length||t[0].getChildren()?t.forEach(function(e){!e.getChildren()&&e.options.grid.itfuid?i.push(e.options.grid.itfuid):e.processDescendants({processNode:function(e){e.nodeModel.getChildren()||e.nodeModel.isFiltered()||!e.nodeModel.options.grid.itfuid||i.push(e.nodeModel.options.grid.itfuid)}})}):i.push(t[0].options.grid.itfuid),i},this.updateModel=function(e,t,i){var n={},l=[];n[t]=i,d.search({match:function(a){e&&a.nodeModel.options.grid.itfuid===e&&("tree"===t&&a.nodeModel.updateOptions({label:i}),a.nodeModel.updateOptions({grid:n}),l.push(a.nodeModel))}}),l.forEach(function(e){"function"==typeof e.onAttributeChangeFromUI&&e.onAttributeChangeFromUI({dataIndex:t,newValue:i})})},this.expandOrCollapse=function(e,t,i,n){var l=e?I.model:i||t.map(function(e){return I.model[e]}),a=[];return l.forEach(function(e){e.canBeExpanded()&&(n&&!e.isExpanded()||!n&&e.isExpanded())&&(i||e.getAllDescendants().forEach(function(e){e.canBeExpanded()&&e.options.grid.itfuid&&(n&&!e.isExpanded()||!n&&e.isExpanded())&&(a.push(e),n?e.expand():e.collapse())}),a.push(e),n?e.expand():e.collapse())}),a},this.onSelect=null,this.onUnselect=null,this.onCellEdit=null,this.onHideShowOpaSlider=null,this.contextualEvent=null,function(){!function(){if(!o){var e={itfLblSlide:{dataIndex:"itfLblSlide",icon:R,editableFlag:!1,getCellValue:j,getCellTypeRepresentation:X,getCellValueForExport:te,compareFunction:W,getCellSelectableState:ee,pinned:"left",visibleFlag:!1,width:"50"},tree:{dataIndex:"tree",text:u.itfName,editableFlag:!b,getCellEditableState:ne,setCellValue:ae,getCellValueForExport:te,alwaysVisibleFlag:!0,width:"15%"},itfCtxName:{dataIndex:"itfCtxName",text:u.itfCtxName,editableFlag:!b,getCellEditableState:ne,setCellValue:ae,visibleFlag:!1,width:"auto"},itfSystemType:{dataIndex:"itfSystemType",text:u.itfSystemType,getCellValue:J,editableFlag:!1,width:"auto"},itfUserType:{dataIndex:"itfUserType",text:u.itfUserType,editableFlag:!b,getCellEditableState:ne,setCellValue:ae,width:"auto",compareFunction:G,getCellKPIColor:z,getCellTypeRepresentation:B,editionPolicy:"EditionOnOver",getCellValueForExport:te},itfAnalysis:{dataIndex:"itfAnalysis",text:u.itfAnalysis,editableFlag:!b,getCellEditableState:ne,setCellValue:ae,width:"auto",compareFunction:_,getCellKPIColor:H,getCellTypeRepresentation:Q,editionPolicy:"EditionOnOver",getCellValueForExport:te},itfPrevAnalysis:{dataIndex:"itfPrevAnalysis",text:u.itfPrevAnalysis,getCellValue:Y,editableFlag:!1,width:"auto"},itfLblInst1Path:{dataIndex:"itfLblInst1Path",text:u.itfLblInst1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Path:{dataIndex:"itfLblInst2Path",text:u.itfLblInst2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Path:{dataIndex:"itfLblRef1Path",text:u.itfLblRef1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2Path:{dataIndex:"itfLblRef2Path",text:u.itfLblRef2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst1:{dataIndex:"itfLblFstInst1",text:u.itfLblFstInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1:{dataIndex:"itfLblInst1",text:u.itfLblInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst2:{dataIndex:"itfLblFstInst2",text:u.itfLblFstInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2:{dataIndex:"itfLblInst2",text:u.itfLblInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstType1:{dataIndex:"itfLblFstType1",text:u.itfLblFstType1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef1:{dataIndex:"itfLblFstRef1",text:u.itfLblFstRef1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1:{dataIndex:"itfLblRef1",text:u.itfLblRef1,editableFlag:!1,width:"auto"},itfLblFstType2:{dataIndex:"itfLblFstType2",text:u.itfLblFstType2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef2:{dataIndex:"itfLblFstRef2",text:u.itfLblFstRef2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2:{dataIndex:"itfLblRef2",text:u.itfLblRef2,editableFlag:!1,width:"auto"},itfFeatName1:{dataIndex:"itfFeatName1",text:u.itfFeatName1,editableFlag:!1,width:"auto",visibleFlag:!1},itfFeatName2:{dataIndex:"itfFeatName2",text:u.itfFeatName2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1:{dataIndex:"itfLblShape1",text:u.itfLblShape1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2:{dataIndex:"itfLblShape2",text:u.itfLblShape2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1Owner:{dataIndex:"itfLblInst1Owner",text:u.itfLblInst1Owner,typeRepresentation:"user",hasCellValue:ve,getCellValue:Se,getCellValueForExport:te,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Owner:{dataIndex:"itfLblInst2Owner",text:u.itfLblInst2Owner,typeRepresentation:"user",hasCellValue:ve,getCellValue:Se,getCellValueForExport:te,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Owner:{dataIndex:"itfLblRef1Owner",text:u.itfLblRef1Owner,typeRepresentation:"user",hasCellValue:ve,getCellValue:Se,getCellValueForExport:te,editableFlag:!1,width:"auto"},itfLblRef2Owner:{dataIndex:"itfLblRef2Owner",text:u.itfLblRef2Owner,typeRepresentation:"user",hasCellValue:ve,getCellValue:Se,getCellValueForExport:te,editableFlag:!1,width:"auto"},itfLblShape1Owner:{dataIndex:"itfLblShape1Owner",text:u.itfLblShape1Owner,typeRepresentation:"user",hasCellValue:ve,getCellValue:Se,getCellValueForExport:te,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2Owner:{dataIndex:"itfLblShape2Owner",text:u.itfLblShape2Owner,typeRepresentation:"user",hasCellValue:ve,getCellValue:Se,getCellValueForExport:te,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1OwnerID:{dataIndex:"itfLblInst1OwnerID",text:u.itfLblInst1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2OwnerID:{dataIndex:"itfLblInst2OwnerID",text:u.itfLblInst2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity1Ref:{dataIndex:"itfLblMaturity1Ref",text:u.itfLblMaturity1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity2Ref:{dataIndex:"itfLblMaturity2Ref",text:u.itfLblMaturity2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization1Ref:{dataIndex:"itfLblOrganization1Ref",text:u.itfLblOrganization1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization2Ref:{dataIndex:"itfLblOrganization2Ref",text:u.itfLblOrganization2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace1Ref:{dataIndex:"itfLblCollabSpace1Ref",text:u.itfLblCollabSpace1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace2Ref:{dataIndex:"itfLblCollabSpace2Ref",text:u.itfLblCollabSpace2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1OwnerID:{dataIndex:"itfLblRef1OwnerID",text:u.itfLblRef1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2OwnerID:{dataIndex:"itfLblRef2OwnerID",text:u.itfLblRef2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision1Ref:{dataIndex:"itfLblRevision1Ref",text:u.itfLblRevision1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision2Ref:{dataIndex:"itfLblRevision2Ref",text:u.itfLblRevision2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity1Shape:{dataIndex:"itfLblMaturity1Shape",text:u.itfLblMaturity1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity2Shape:{dataIndex:"itfLblMaturity2Shape",text:u.itfLblMaturity2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization1Shape:{dataIndex:"itfLblOrganization1Shape",text:u.itfLblOrganization1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization2Shape:{dataIndex:"itfLblOrganization2Shape",text:u.itfLblOrganization2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace1Shape:{dataIndex:"itfLblCollabSpace1Shape",text:u.itfLblCollabSpace1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace2Shape:{dataIndex:"itfLblCollabSpace2Shape",text:u.itfLblCollabSpace2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1OwnerID:{dataIndex:"itfLblShape1OwnerID",text:u.itfLblShape1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2OwnerID:{dataIndex:"itfLblShape2OwnerID",text:u.itfLblShape2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision1Shape:{dataIndex:"itfLblRevision1Shape",text:u.itfLblRevision1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision2Shape:{dataIndex:"itfLblRevision2Shape",text:u.itfLblRevision2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfQuantifier:{dataIndex:"itfQuantifier",text:u.itfQuantifier,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:j,getCellSemantics:Z,getCellValueForExport:$},itfPenVol:{dataIndex:"itfPenVol",text:u.itfPenVol,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:j,getCellSemantics:Z,getCellValueForExport:$},itfPenVec:{dataIndex:"itfPenVec",text:u.itfPenVec,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:j,getCellSemantics:Z,getCellValueForExport:$},itfMinDist:{dataIndex:"itfMinDist",text:u.itfMinDist,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:j,getCellSemantics:Z,getCellValueForExport:$},itfDescription:{dataIndex:"itfDescription",text:u.itfDescription,editableFlag:!b,getCellEditableState:ne,setCellValue:ae,width:"auto"},itfTolerance:{dataIndex:"itfTolerance",text:u.itfTolerance,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:j,getCellSemantics:Z,getCellValueForExport:$},itfOwner:{dataIndex:"itfOwner",text:u.itfOwner,typeRepresentation:"user",hasCellValue:ve,getCellValue:Se,getCellValueForExport:te,editableFlag:!1,width:"auto"},itfOwnerID:{dataIndex:"itfOwnerID",text:u.itfOwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfCurrent:{dataIndex:"itfCurrent",text:u.itfCurrent,editableFlag:!1,width:"auto",visibleFlag:!1},itfIssueTitle:{dataIndex:"itfIssueTitle",text:u.itfIssueTitle,onCellRequest:we,getCellValue:ce,typeRepresentation:"url",getCellValueForExport:te,editableFlag:!1,visibleFlag:!1,width:"auto"},itfIssueState:{dataIndex:"itfIssueState",text:u.itfIssueState,onCellRequest:we,editableFlag:!1,visibleFlag:!1,width:"auto",getCellValueForExport:te},itfIssueDesc:{dataIndex:"itfIssueDesc",text:u.itfIssueDesc,onCellRequest:we,editableFlag:!1,visibleFlag:!1,width:"auto"},itfIssueName:{dataIndex:"itfIssueName",text:u.itfIssueName,onCellRequest:we,editableFlag:!1,visibleFlag:!1,width:"auto"},itfIssuePriority:{dataIndex:"itfIssuePriority",text:u.itfIssuePriority,onCellRequest:we,typeRepresentation:"url",editableFlag:!1,visibleFlag:!1,width:"auto",getCellValueForExport:te},itfIssueApprovals:{dataIndex:"itfIssueApprovals",text:u.itfIssueApprovals,editionPolicy:"EditionInPlace",setCellValue:le,getCellTypeRepresentation:fe,onCellRequest:we,editableFlag:!0,visibleFlag:!1},itfIssueAssignees:{dataIndex:"itfIssueAssignees",text:u.itfIssueAssignees,getCellTypeRepresentation:ge,onCellRequest:we,getCellValue:Ie,getCellValueForExport:te,editableFlag:!1,visibleFlag:!1},itfIssueOwner:{dataIndex:"itfIssueOwner",text:u.itfIssueOwner,getCellTypeRepresentation:pe,onCellRequest:we,getCellValue:be,getCellValueForExport:te,editableFlag:!1,visibleFlag:!1},itfIssueResolvedBy:{dataIndex:"itfIssueResolvedBy",text:u.itfIssueResolvedBy,onCellRequest:we,editableFlag:!1,visibleFlag:!1},itfIssueModified:{dataIndex:"itfIssueModified",typeRepresentation:"datetime",text:u.itfIssueModified,onCellRequest:we,editableFlag:!1,visibleFlag:!1}},t=y||["itfLblSlide","tree","itfCtxName","itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblInst1Path","itfLblInst2Path","itfLblRef1Path","itfLblRef2Path","itfLblFstInst1","itfLblInst1","itfLblFstInst2","itfLblInst2","itfLblFstType1","itfLblFstRef1","itfLblRef1","itfLblFstType2","itfLblFstRef2","itfLblRef2","itfFeatName1","itfFeatName2","itfLblShape1","itfLblShape2","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblMaturity1Ref","itfLblMaturity2Ref","itfLblOrganization1Ref","itfLblOrganization2Ref","itfLblCollabSpace1Ref","itfLblCollabSpace2Ref","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblRevision1Ref","itfLblRevision2Ref","itfLblMaturity1Shape","itfLblMaturity2Shape","itfLblOrganization1Shape","itfLblOrganization2Shape","itfLblCollabSpace1Shape","itfLblCollabSpace2Shape","itfLblShape1OwnerID","itfLblShape2OwnerID","itfLblRevision1Shape","itfLblRevision2Shape","itfQuantifier","itfPenVol","itfPenVec","itfMinDist","itfDescription","itfTolerance","itfOwner","itfOwnerID","itfCurrent","itfIssueTitle","itfIssueName","itfIssueState","itfIssueDesc","itfIssuePriority","itfIssueApprovals","itfIssueResolvedBy","itfIssueAssignees","itfIssueOwner","itfIssueModified"];c=Object.keys(e).length,F&&(Object.assign(e.tree,F.tree),t.forEach(function(t){e[t]?Object.assign(e[t],F[t]):e[t]=F[t]})),o=t.map(function(t){return e[t]})}}();var t=Object.keys(m),l=t.length>0;d=new n({useAsyncPreExpand:!1,shouldAcceptDrag:function(){return l},shouldAcceptDrop:function(){return!1}});var a={identifier:S,treeDocument:d,defaultColumnDef:{width:"auto",height:80},columns:o,rowSelection:"multiple",cellSelection:{defaultValue:"none"},sortModel:[{dataIndex:"tree",sort:"asc"}],rowDragEnabledFlag:!x&&l,allowUnsafeHTMLContent:!1,cellDragEnabledFlag:!x&&l,activateAllCellsRenderedEventFlag:!0,placeholder:u.NoInterference,recId:"pimItfList",onContextualEvent:function(t){var i=[],n=t.cellInfos;if(t&&t.collectionView&&n){if(-1===n.rowID){if(-1===n.columnID)return[];var l,a=I.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID);if("tree"===a&&(a="label"),l=D.indexOf(a)>-1||"itfLblSlide"===a?"number":O.indexOf(a)>-1?"set":"itfIssueModified"===a?"date":"string",d.getFilterManager().getFilters().hasOwnProperty(a)){var s=d.getFilterManager().getFilters()[a];s&&s.defaultFilterModel&&(s.defaultFilterModel=void 0)}else d.getFilterManager().setPropertyFilterModel(a,{filterId:l},{isUserInteraction:!0});var o=(i=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!1,columnsManagement:!0,sizeColumnToFit:!0})).splice(i.length-1,1)[0];i.push({title:u.itfExpandAllRows,type:"PushItem",icon:{iconName:"flow-tree-expand-down",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){d.withTransactionUpdate(function(){d.expandAll()})}}}),i.push({title:u.itfCollapseAllRows,type:"PushItem",icon:{iconName:"flow-tree-expand-up",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){d.withTransactionUpdate(function(){d.collapseAll()})}}}),I.layout.getColumnAlwaysVisibleFlag(a)||i.push({title:u.itfHideColumn,type:"PushItem",action:{callback:function(){I.layout.setColumnVisibleFlag(I.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID),!1,{isUserInteraction:!0})}}}),i.push({type:"SeparatorItem",title:""}),x?i.push(Object.assign({},o,{id:"customView",action:{context:t.collectionView}})):i.push(o),"itfQuantifier"===I.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID)&&3===L&&i.push({title:u.itfClashVal,type:"PushItem",submenu:[{title:u.itfPenVol,type:"RadioItem",state:P?"selected":"unselected",action:{callback:function(){P||C.switchQuantifierColumnVal({isPenVolume:!0})}}},{title:u.itfPenVec,type:"RadioItem",state:P?"unselected":"selected",action:{callback:function(){P&&C.switchQuantifierColumnVal({isPenVolume:!1})}}}]})}else{if(!C.getSelectedInterferences().length)return[];var r=I.getNodesXSO().get();r.some(function(e){return e.canBeExpanded()&&(!e.isExpanded()||e.getAllDescendants().some(function(e){return e.canBeExpanded()&&!e.isExpanded()}))})&&i.push({title:u.itfExpandAll,type:"PushItem",icon:{iconName:"flow-tree-expand-down",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){d.withTransactionUpdate(function(){I.getNodesXSO().get().forEach(function(e){e.expandAll()})})}}}),r.some(function(e){return e.canBeExpanded()&&(e.isExpanded()||e.getAllDescendants().some(function(e){return e.canBeExpanded()&&e.isExpanded()}))})&&i.push({title:u.itfCollapseAll,type:"PushItem",icon:{iconName:"flow-tree-expand-up",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){d.withTransactionUpdate(function(){I.getNodesXSO().get().forEach(function(e){e.collapseAll()})})}}}),b||x?b&&!x&&"X3DPLAW_AP"===window.widget.getValue("appId")&&(i=i.concat(C.onContextualEvent())):i=i.concat(C.onContextualEvent())}if(x){var c={isHeaderMenu:-1===n.rowID,isRowMenu:n.rowID>=0},f=e.clone(i,!1);C.contextualEvent(c,f),i=[]}}return i}};if(t.forEach(function(e){a[e]=m[e]}),m=null,(I=new i(a)).getContent().addClassName("pimWebTreeListView"),I.getTypeRepresentationFactory().registerTypeRepresentations(T),window.__karma__&&(I.layout.addCellCoordinates=!0),x){var s=new e.createElement("div");I.inject(s),w.appendChild(s)}else w.content=I;I.addEventListener("DSpointerup",function(){setTimeout(function(){let e=C.getSelectedInterferences();C.onHideShowOpaSlider(e&&0===e.length)},100)}),I.addEventListener("DSpointerhit",function(e,t){var i=t&&t.columnID>=0?I.columns[t.columnID].dataIndex:null;if("itfLblSlide"===i){var n=t.nodeModel.options.grid.itfuid;C.onSelect({idsSelected:[n],cellClickedIdx:"itfLblSlide",idCellClicked:n})}i&&w&&w.isSmallWidth&&w.isSmallWidth()&&(b||"itfAnalysis"!==i&&"itfUserType"!==i&&"itfDescription"!==i&&"itfMetricName"!==i)&&w.collapsePanel()}),d.getFilterManager().subscribe("filterModelChange",function(){setTimeout(function(){!function(){let t=e.clone(d.getFilterManager().filterModel,!0);t=Object.keys(t).reduce((e,i)=>(t[i].filterModel&&Object.keys(t[i].filterModel).length>0&&(e[i]=t[i]),e),{}),localStorage.setItem(S,JSON.stringify({filterModel:t}))}(),C.ensureSelectedLineVisibility()},10)});var r=I.getNodesXSO();r.options.getElementID=void 0,r.onPostAdd(Fe),r.onPostRemove(Me),d.getModelEvents().subscribe({event:"sortChildren"},function(){setTimeout(function(){C.ensureSelectedLineVisibility()},0)}),d.getModelEvents().subscribe({event:"READY"},function(){setTimeout(function(){C.ensureSelectedLineVisibility()},0)}),I.onReady(function(){setTimeout(function(){v=!0},200)}),d.onPostCollapse(function(){C.updateDataGridView({updateCellLayout:!0,freePool:!0})}),d.onPostExpand(function(){C.updateDataGridView({updateCellLayout:!0,freePool:!0})})}()}})}),define("DS/PIMwebUX/PIMwebIsrPanelContextTab",["UWA/Core","UWA/Class","DS/Controls/Button","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/CoreEvents/Events","DS/PIMwebUX/PIMwebIsrContextGroupView","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelContextTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,i,n,l,a,s,o){"use strict";return t.extend({init:function(t){if(t){var r=this;r.productContext={},r.groups=[];var d,u,c,f,g,p,h,I,b,m,w,C,v,S,x,y=!!t.readOnly&&t.readOnly,F=t.parent,M=t.dialog,P=t.ctrl?t.ctrl:null,L=t.type,R=t.isNonPersistIsr,E=t.contextInfo?t.contextInfo:null,D=t.pad3DViewer,O=[],V=[],T=0,A={},k=null,N=!1;P?P.getAddedVPMRefRoots().then(function(e){(O=e).length?P.getLoadedVPMRefRootData(O).then(function(e){(V=e).length&&Y()}):Y()}):Y(),this.getContextInfo=function(){var e="betweenAllComponents";return c&&(c.value===o.isrBetweenAllComponents?e="betweenAllComponents":c.value===o.isrInsideGroups?e="insideGroups":c.value===o.isrGroupsAgainstContext?e="groupsAgainstContext":c.value===o.isrGroupsAgainstGroups&&(e="groupsAgainstGroups")),{ProductContext:r.productContext,FilterContext:A,Config:e,Groups:function(){for(var e=[],t=0;t<r.groups.length;t++)e.push(r.groups[t].getGroupInfo());return e}()}},this.createGroupViewWithInfo=function(e,t){q(e,t)},this.addInfoInGroup=function(e,t){!function(e,t){if(e&&e.model){for(var i=0;i<r.groups.length;i++)r.groups[i].id===e.id&&r.groups[i].addInfoInGroup(t);B()}}(e,t)},this.disableTab=function(){J()},this.enableTab=function(){!function(){if(S)for(var e=S.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].style.userSelect="",e[t].removeAttribute("disabled"),e[t].style.pointerEvents="",(e[t].hasClassName("fonticon-product")||e[t].hasClassName("fonticon-filter")||e[t].hasClassName("fonticon-remove")||e[t].hasClassName("fonticon-trash"))&&e[t].getParent().removeAttribute("disabled")}()}}function U(){"customFacetMode"===L||R||(r.productContext&&Object.keys(r.productContext).length?(w.hide(),a.publish({event:"onContextInfoChange",data:"ContextInfoSufficient"})):(w.show(),a.publish({event:"onContextInfoChange",data:"ContextInfoInsufficient"})))}function j(e){if(e&&0!==e.length&&e[0]!==k){var t=[];if(k){for(var i=0;i<d.elementsList.length;i++)d.elementsList[i]!==k.alias&&t.push(d.elementsList[i]);k=null}else t=d.elementsList;if(P)-1===P.getLoadedRoots().indexOf(e[0].id)&&(N=!0,k=e[0]);-1===t.indexOf(e[0].alias)&&t.push(e[0].alias),d.elementsList=[],d.elementsList=t.map(function(e){return e}),d.value=e[0].alias,d.selectedIndex=t.indexOf(e[0].alias),N=!1,f&&(f.disabled=!1),1===d.elementsList.length&&(d.disabled=!0),U()}}function G(e){e&&0!==e.length&&(A=e[0],u.value=A.alias,g&&(g.disabled=!1))}function _(){A={},u.value="",g&&(g.disabled=!0)}function W(){r.groups.splice(0,r.groups.length),T=0,a.unsubscribe(x),x=void 0,b.innerHTML=o.isrCtxNoGroupDefine,C.show()}function B(){!function(){for(var e=0;e<r.groups.length;e++)if(r.groups[e].isEmpty)return!1;return!0}()?((c.value===o.isrInsideGroups||c.value===o.isrGroupsAgainstContext)&&r.groups.length>=1||c.value===o.isrGroupsAgainstGroups&&r.groups.length>=2||c.value===o.isrBetweenAllComponents?C.hide():C.show(),a.publish({event:"onGroupInfoChange",data:"GroupInfoInsufficient"})):(c.value===o.isrInsideGroups||c.value===o.isrGroupsAgainstContext)&&r.groups.length>=1||c.value===o.isrGroupsAgainstGroups&&r.groups.length>=2||c.value===o.isrBetweenAllComponents?(C.hide(),a.publish({event:"onGroupInfoChange",data:"GroupInfoSufficient"})):(C.show(),a.publish({event:"onGroupInfoChange",data:"GroupInfoInsufficient"}))}function Q(){for(x=a.subscribe({event:"onAllContextGroupRemoved"},W);r.groups.length;)r.groups[r.groups.length-1].removeGroupView();a.publish({event:"onAllContextGroupRemoved"}),B()}function X(){N?r.productContext=k:d.value&&""!==d.value&&(k&&k.alias===d.value?r.productContext=k:(k&&k.alias!==d.value&&(k=null,d.elementsList=V.map(function(e){return e.alias})),V.map(function(e){d.value===e.alias&&(r.productContext=e,e.filterAlias?G([{id:e.filterId,alias:e.filterAlias,type:e.filterType,icon:e.filterIcon}]):u.value="",f&&(f.disabled=!1))}))),1===d.elementsList.length&&(d.disabled=!0),U();for(var e=!0,t=0;t<V.length;t++){var i=V[t];if(d.value===i.alias&&u.value===i.filterAlias){e=!1;break}}e&&_(),Q()}function z(e){for(var t=0;t<r.groups.length;t++)if(r.groups[t]===e)return r.groups.splice(t,1),0===r.groups.length?(T=0,b.innerHTML=o.isrCtxNoGroupDefine,C.show()):b.innerHTML=r.groups.length.toString().concat(" ",r.groups.length>1?o.isrCtxGroupsDefined:o.isrCtxGroupDefined),void B()}function H(e){for(var t=0;t<r.groups.length;t++)r.groups[t].id===e.id&&(r.groups[t]=e);B()}function K(e){var t={htmlParent:I,parentTab:r,groupTitle:"Group",dialog:M,pad3DViewer:D,productContext:r.productContext,ctrl:P,id:++T,readOnly:y};e&&(t.isFilter=e);var i=new s(t);r.groups.push(i),b.innerHTML=r.groups.length.toString().concat(" ",r.groups.length>1?o.isrCtxGroupsDefined:o.isrCtxGroupDefined),a.subscribe({event:"onEmptyGroup"},H),a.subscribe({event:"onFilterAddedInGroup"},H),a.subscribe({event:"onElemAddedInGroup"},H),a.subscribe({event:"onGroupViewCreated"},H),a.subscribe({event:"onContextGroupRemoved"},z),B()}function q(e,t){K(t),r.groups[r.groups.length-1].addInfoInGroup(e),B()}function J(){for(var e=S.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].style.userSelect="none",e[t].setAttribute("disabled",!0),e[t].style.pointerEvents="none",(e[t].hasClassName("fonticon-product")||e[t].hasClassName("fonticon-filter")||e[t].hasClassName("fonticon-remove")||e[t].hasClassName("fonticon-trash"))&&e[t].getParent().addClassName("disabled")}function Y(){var s,x,M,D;S=e.createElement("div",{class:"PIMwebIsrPanelContextTabContent"}).inject(F),R||(!function(){var n=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebFirstTitle"}).inject(S),a=e.createElement("div").inject(n);(m=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(a)).innerHTML=o.isrCtxProduct,m.setStyles({marginRight:"5px"}),w=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(a),e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(w),w.hide();var s=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(n);(d=new l({elementsList:V.map(function(e){return e.alias}),enableSearchFlag:!1,placeholder:o.isrSelectProductCtx})).inject(s),d.elements.container.setStyles({width:"100%"}),d.addEventListener("change",function(){X()}),1===d.elementsList.length&&(d.disabled=!0),"Create"===t.type&&new i({icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){P&&P.searchProducts().then(function(e){j(e)})}}).inject(s)}(),s=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(S),x=e.createElement("div").inject(s),M=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(x),D=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(s),M.innerHTML=o.isrCtxFilter,(u=new n({disabled:!0,selectAllOnFocus:!0,autoCommitFlag:!0,placeholder:o.isrSelectFilterCtx}).inject(D)).elements.container.setStyles({width:"100%"}),u.elements.container.childNodes[0].setStyles({width:"100%"}),y||(g=new i({disabled:!0,icon:{iconName:"remove",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){_()}}).inject(D),f=new i({disabled:!0,icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){P&&P.searchFilters(r.productContext.id).then(function(e){G(e)})}}).inject(D)),d.value&&""!==d.value&&V.map(function(e){d.value===e.alias&&(r.productContext=e,e.filterAlias?G([{id:e.filterId,alias:e.filterAlias,type:e.filterType,icon:e.filterIcon}]):u.value="",f&&(f.disabled=!1))}),U()),function(){var t=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebGroupHdrSection"}).inject(S),n=e.createElement("div").inject(t);(v=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(n)).innerHTML=o.isrCtxGroups,v.setStyles({marginRight:"5px"}),C=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(n),e.createElement("span",{class:"PIMwebIsrPanelLabel wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(C),C.hide();var a=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(t),s=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(a);s.innerHTML=o.isrCtxLblCheck,s.setStyles({marginRight:"5px",fontWeight:"normal"}),(c=new l({elementsList:[o.isrInsideGroups,o.isrGroupsAgainstGroups,o.isrGroupsAgainstContext,o.isrBetweenAllComponents],enableSearchFlag:!1,value:o.isrBetweenAllComponents,displayStyle:"normal"})).inject(a),c.elements.container.setStyles({width:"90%"}),c.addEventListener("change",function(){c.value===o.isrInsideGroups||c.value===o.isrGroupsAgainstGroups||c.value===o.isrGroupsAgainstContext?(h.inject(p),b.show()):(b.hide(),Q(),h.remove()),B()});var d=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t);if(e.createElement("div").inject(d).setStyles({width:"10%"}),(b=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(d)).setStyles({width:"90%",fontWeight:"normal"}),b.hide(),p=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebGroupsMainSection"}).inject(S),h=e.createElement("div"),b.innerHTML=o.isrCtxNoGroupDefine,I=e.createElement("div").inject(h),!y){var u=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(h);new i({label:o.isrCtxAddNewGroup,icon:{iconName:"group-add",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){K()}}).inject(u).elements.container.setStyles({marginRight:"5px",paddingLeft:"5px",paddingRight:"5px"}),new i({label:o.isrCtxAddMoreGroups,icon:{iconName:"group-add",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){P&&P.addMoreGroups(r.productContext.id)}}).inject(u).elements.container.setStyles({marginRight:"5px",paddingLeft:"5px",paddingRight:"5px"}),new i({label:o.isrCtxDeleteAllGroups,icon:{iconName:"group-delete ",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){Q()}}).inject(u).elements.container.setStyles({marginRight:"0px",paddingLeft:"5px",paddingRight:"5px"})}}(),"Create"!==L&&E&&(!function(e){if(e&&(R||(e.ProductContext&&j([e.ProductContext]),d.disabled=!0,e.FilterContext&&G([e.FilterContext])),"betweenAllComponents"===e.Config?c.value=o.isrBetweenAllComponents:"insideGroups"===e.Config?c.value=o.isrInsideGroups:"groupsAgainstContext"===e.Config?c.value=o.isrGroupsAgainstContext:"groupsAgainstGroups"===e.Config&&(c.value=o.isrGroupsAgainstGroups),e.Groups))for(var t=0;t<e.Groups.length;t++)e.Groups[t].Elements&&q(e.Groups[t].Elements,e.Groups[t].isFilter)}(E),R||a.publish({event:"onContextTabComplete"})),y&&J()}}})}),define("DS/PIMwebUX/PIMwebIsrPanelView",["UWA/Core","UWA/Class","DS/PIMwebUX/PIMwebIsrPanelIsrTab","DS/PIMwebUX/PIMwebIsrPanelContextTab","DS/PIMwebUX/PIMwebIsrPanelSpecTab","DS/Controls/Tab","DS/CoreEvents/Events","DS/Controls/Toggle","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelView","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,i,n,l,a,s,o,r){"use strict";return t.extend({init:function(t){var d=e.createElement("div",{class:"PIMwebIsrPanelMainDiv"});t.isWeb?t.parent.content=d:t.parent.appendChild(d);var u,c,f,g,p,h,I=t.type,b=t.pad3DViewer,m=t.parent,w=t.ctrl,C=t.lengthUnit,v=!!t.isNonPersistIsr&&t.isNonPersistIsr,S=!!t.readOnly&&t.readOnly,x=t.isrAlreadyLoaded,y=-1,F=-1,M=-1,P=null,L=[],R=1,E="OnPremise"!==window.widget.getValue("x3dPlatformId")&&1===window.top.__PIM_CSIExecute;function D(e){return{nbToken:e.toString(),msg:1===e?r.tokenStr:r.tokensStr}}function O(e){y<0||!P.tabBar.getButtonFromValue(y)||(P.tabBar.getButtonFromValue(y).label=e)}"Create"!==I?(g=t.contextInfo,p=t.specInfo,F=0,M=1,L=["6w-what","6w-how"]):(y=0,F=1,M=2,L=["interference-simulation","6w-what","6w-how"]),m.addEventListener("stopResize",function(){P.tabPanelContainer.setStyles({width:m.width-20+"px",height:m.height-(E?130:90)+"px"})});s.subscribe({event:"onSpecInfoChangeToComputeToken"},function(e){var t=R;if(e.computationRuleActive&&e.volumeOrClearanceAreaStored?t=3:e.computationRuleActive||e.volumeOrClearanceAreaStored?t=2:e.computationRuleActive||e.volumeOrClearanceAreaStored||(t=1),t!==R&&(R=t,h)){var i=D(R),n=r.replace(r.isrChkExecute,{label1:i.nbToken,label2:i.msg}).replace(/"/g,"'");h.label=n}});var V,T,A,k,N,U,j=e.createElement("div",{class:"PIMwebIsrPanelTabSection"}).inject(d);(E&&j.setStyles({"margin-bottom":"50px"}),(P=new a({displayStyle:"strip"})).tabBar.pinFlag=!1,P.tabPanelContainer.setStyles({width:m.width-20+"px",height:m.height-(E?130:90)+"px",overflow:"auto"}),"Create"===I&&(s.subscribe({event:"onIsrTypeInitDone"},function(e){O(e),s.unsubscribe({event:"onIsrTypeInitDone"})}),P.add({label:r.isrTabTitle,content:(V=e.createElement("div",{class:"PIMwebIsrPanelIsrTab"}),u=new i({type:I,parent:V,pad3DViewer:b,dialog:m,ctrl:w,readOnly:S}),V),icon:{iconName:"interference-simulation",fontIconFamily:WUXManagedFontIcons.Font3DS}})),P.add({label:r.contextTabTitle,content:(T=e.createElement("div",{class:"PIMwebIsrPanelContextTab"}),A={type:I,parent:T,pad3DViewer:b,dialog:m,ctrl:w,readOnly:S,isNonPersistIsr:v},"Create"!==I&&(A.contextInfo=g),c=new n(A),T),icon:{iconName:"6w-what",fontIconFamily:WUXManagedFontIcons.Font3DS}}),P.add({label:r.specTabTitle,content:(k=e.createElement("div",{class:"PIMwebIsrPanelSpecTab"}),N={type:I,parent:k,pad3DViewer:b,dialog:m,ctrl:w,readOnly:S,isNonPersistIsr:v,lengthUnit:C},"Create"!==I&&(N.specInfo=p),f=new l(N),k),icon:{iconName:"6w-how",fontIconFamily:WUXManagedFontIcons.Font3DS}}),P.inject(j),P.value=[0],P.tabBar.centeredFlag=!1,E)?(e.createElement("div",{id:"Dummy"}).inject(j).setStyles({left:"5",right:"5",position:"absolute","margin-top":"50px"}),(U=e.createElement("div",{id:"Footer"}).inject(d)).setStyles({bottom:"0",left:"5",right:"5",position:"absolute"})):((U=e.createElement("div",{id:"Footer"}).inject(P.tabPanelContainer)).innerHTML="                                                                                         ",U.setStyles({color:"#FFFFFF","font-weight":"bold",margin:"0","margin-top":"35px"}));if(w.isUpdateSimulationAllowed()){var G=e.createElement("div",{class:"PIMwebIsrPanelExecIsrSection"});G.inject(U);var _=e.createElement("div",{class:"PIMwebIsrRunSimulationSection"}),W=D(R),B=r.replace(r.isrChkExecute,{label1:W.nbToken,label2:W.msg}).replace(/"/g,"'");(h=new o({type:"checkbox",label:B,value:0,checkFlag:!1})).inject(_),_.setStyles({borderTop:"1px solid #d1d4d4"}),_.inject(G);let t={};localStorage.getItem("PIMwebIsrSpecs")&&(t=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),h.checkFlag=!!t.ExecuteIsr&&t.ExecuteIsr,h.disabled=!!S}if("Create"===I&&x){var Q=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(E?U:P.tabPanelContainer);Q.innerHTML=r.warningMessage,Q.setStyles({color:"#e87b00","font-weight":"normal","font-style":"italic",margin:"0","margin-top":"2px"}),m.height=m.height+15,m.minHeight=m.minHeight+15}function X(e,t){if(!(e<0)&&P.tabBar.buttonGroup.getButton(e)){var i=t?L[e]:"required";P.tabBar.buttonGroup.getButton(e).icon={iconName:i,fontIconFamily:WUXManagedFontIcons.Font3DS},t||P.tabBar.buttonGroup.getButton(e).elements.button.getChildren()[0].getChildren()[0].addClassName("PIMwebInvalidIcon")}}this.getIsrInfo=function(){if(u)return u.getIsrInfo()},this.getContextInfo=function(){return c.getContextInfo()},this.getSpecInfo=function(){return f.getSpecInfo()},this.setIsrTabValidity=function(e){X(y,e)},this.setContextTabValidity=function(e){X(F,e)},this.setSpecTabValidity=function(e){X(M,e)},this.setIsrTitleValidity=function(e){u&&u.setIsrTitleValidity(e)},this.checkContextInfoValidity=function(){var e;e=c.getContextInfo(),Object.keys(e.ProductContext).length||X(F,!1)},this.writePIMwebIsrPrefs=function(){var e=f.getPIMwebIsrSpecPrefs();let t={},i={},n={};n.ExecuteIsr=!!h&&h.checkFlag,u&&(t=u.getPIMwebIsrTabPrefs()),localStorage.getItem("PIMwebIsrSpecs")&&(i=JSON.parse(localStorage.getItem("PIMwebIsrSpecs")));var l=Object.assign(i,e,t,n);localStorage.setItem("PIMwebIsrSpecs",JSON.stringify(l))},this.createGroupViewWithInfo=function(e){c.createGroupViewWithInfo(e)},this.addInfoInGroup=function(e,t){c.addInfoInGroup(e,t)},this.setIsrTabTitle=function(e){O(e)},this.disableAllTabs=function(){c&&c.disableTab(),f&&f.disableTab(),"Create"===I&&u&&u.disableTab()},this.enableAllTabs=function(){c&&c.enableTab(),f&&f.enableTab(),"Create"===I&&u&&u.enableTab()},this.destroy=function(){s.unsubscribe({event:"onSpecInfoChangeToComputeToken"}),s.unsubscribe({event:"onIsrTypeInitDone"}),u=f=c=null,b.getFrameWindow().getContextualUIManager().activateContextualBarOnLeftClic()}}})});