define("DS/DELWeb3DOpersReviewAppV2/components/LinkManagerComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/ENOXInterWdgCom/LinkManager"],function(e,t,i){"use strict";const n="DS/WidgetLink/WidgetLink",o={link:"link",unlink:"unlink",onAppReady:"onAppReady",onGetAppStatus:"onGetAppStatus",onWidgetLinked:"onWidgetLinked",onWidgetUnLinked:"onWidgetUnlinked"};return class extends e{constructor(e){super(e),this._widgetLink=null,this._attemptedCustomSubscriptions=new Map,this._matchingFeatures=[],this._widgetsToUnlink=[],this._appReady=!1,this.configModulePath=e.appConfigPath}async initialize(){let e=this;await super.initialize();const t=parent.require;return this.compOptions=await this.loadJson(this.configModulePath),new Promise(i=>{window.__karma__?(this.logger.warn("We are in karma test environment, thus preventing the use of WidgetLink."),i()):t([n],t=>{this._widgetLink=t.get(widget),widget&&(this._widgetLink.setLinkability(e.compOptions.widget_linkability),this._setMatchingFeatures(this._widgetLink.getLinked()),this._widgetLink=t.get(widget),widget.link=this._widgetLink),this._appReady=!1,this._widgetLink.addEventListener(o.link,this._onLink.bind(this)),this._widgetLink.addEventListener(o.unlink,this._onUnLink.bind(this)),this._setUpLinkEvents(),i()})})}async clean(){await super.clean()}async destroy(){await super.destroy()}_subscribeToModelEvents(){const e=[{eventName:"onDelWebOERAppReady",callback:this._onAppReady.bind(this)},{eventName:"getAppStatus",callback:this._onGetAppStatus.bind(this)}];let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents);e.forEach(e=>{t.subscribe({event:e.eventName},e.callback)})}_publish(e,t){this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents).publish({event:e,data:{data:t},origin:this.name})}_onAppReady(){this._appReady=!0,this._publish(o.onAppReady,{status:!0}),this._notifyUnLink(),this._notifyLink()}_onGetAppStatus(){this._publish(o.onGetAppStatus,{status:this._appReady})}_setUpLinkEvents(){var e,i=this,n=i.compOptions.eventsPrefix,o=i.compOptions.eventsToSubscribe,s=i.compOptions.eventsToPublish;e=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents);for(let s in o)Object.prototype.hasOwnProperty.call(o,s)&&i.subscribe(n+s,a=>{switch(i.logger.debug(`Widget Link Event ${n+s} invoked with params`,a),o[s].type){case"ModelEvent":e.publish({event:o[s].internalEvent,data:a});break;case"handler":i.executeCommand({handlerId:o[s].handlerId,args:a});break;case"API":i.getComponentFromIdentifier(o[s].componentId)[o[s].func](a)}t.trackChanges({executionContext:i.getExecutionContext(),category:"LinkabilityEvents",action:s,label:s})});for(let t in s)if(Object.prototype.hasOwnProperty.call(s,t)){let a=s[t].internalEvent?s[t].internalEvent:t;e.subscribe({event:a},function(e){if(e){let a=s[t].externalEvent?o[t].externalEvent:t;i.logger.debug(`Widget Link Event ${n+t} published with params`,e.data),i.publish(n+a,e.data)}})}this._subscribeToModelEvents()}_getFeature(e,t){let i,n,o;return t&&(o=e[n=(i=t.split("/"))[i.length-1]].feature),o}_setMatchingFeatures(e){let t=[];e&&e.forEach(e=>{t=[...t,...e.matchLinkability().matchingFeatures]}),this.logger.debug(`Widget Linked with matching features ${t}`),this._matchingFeatures=t}_notify(e,t){let i=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents);!0===this._appReady&&e.forEach(e=>{i.publish({event:t,data:{data:e,origin:this.name}})})}_notifyLink(){let e=this._widgetLink.getLinked();e.forEach(e=>{this.setSourceWidgetId(e.id)}),this._notify(e,o.onWidgetLinked)}_notifyUnLink(){this.setSourceWidgetId(this.getComponentFromIdentifier("DELCommonUtilsServices").getWidgetId()),this._notify(this._widgetsToUnlink,o.onWidgetUnLinked),this._widgetsToUnlink=[]}_onLink(e){this.logger.debug("Widget Linked - ",e.link.id,e.link.appId,e.link.isLinked()),t.trackChanges({executionContext:this.getExecutionContext(),category:"LinkApp",action:"LinkApp",label:"LinkApp",dims:{pd1:e.link.appId}}),this._setMatchingFeatures(this._widgetLink.getLinked()),this._subscribeAfterLink(),this._notifyLink()}_onUnLink(e){let t=e.link;this.logger.debug("Widget Linked - ",e.link.id,e.link.appId,e.link.isLinked()),t&&(this._setMatchingFeatures(this._widgetLink.getLinked()),this._subscribeAfterLink(),this._widgetsToUnlink.push(t),this._notifyUnLink())}_subscribeAfterLink(){for(const[e,t]of this._attemptedCustomSubscriptions)this.unsubscribe(e),this.subscribe(e,t)}setSourceWidgetId(e){i.setSourceWidgetId(e)}getSourceWidgetId(){return i.getSourceWidgetId()}subscribe(e,t){if(this._widgetLink){let i=this._getFeature(this.compOptions.eventsToSubscribe,e);if(this._attemptedCustomSubscriptions.set(e,t),this._matchingFeatures.includes(i))return this.logger.debug(`Subscribe Widget Link ${e} of feature ${i} in widget ${widget.id}`),this._widgetLink.subscribe(e,t)}}unsubscribe(e){if(this._widgetLink)return this._widgetLink.unsubscribe(e)}publish(e,t){if(this._widgetLink&&this._widgetLink.getLinked().length>0){let i=this._getFeature(this.compOptions.eventsToPublish,e);this._matchingFeatures.includes(i)&&(this.logger.debug(`Publish Widget Link ${e} of feature ${i} in widget ${widget.id}`),this._widgetLink.publish(e,t))}}isLinked(){let e,t=!1;return this._widgetLink&&(t=!!((e=this._widgetLink.getLinked())&&e.length>0)),t}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.isLinked=this.isLinked.bind(this),this.publicAPI}}}),define("DS/DELWeb3DOpersReviewAppV2/AppMain",["DS/WAfrAppManager/App","DS/UIKIT/Mask","DS/Logger/Logger"],function(e,t,i){"use strict";return class extends e{constructor(e){super(e),this._showMask(),this.logger=i.getLogger("AppMain")}setUp(e){this.logger.log("OER: SetUp Done"),this.getExecutionContext().getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:"DELWebOERToggleDataGridViewCmd",state:!0}),this.getExecutionContext().setContext("DELWebOERAppReady",!0),this.modelEvents.publish({event:"onDelWebOERAppReady",data:{data:{appReady:!0},origin:"DELWeb3DOpersReviewAppV2"}}),e.done()}setUpWS(e){let t=this;this.modelEvents=this.getExecutionContext().getComponent(WAfrStandardComponentKey.ModelEvents),this.homePageCpt=this.getExecutionContext().getComponent("mod_WelcomeScreen"),this.homePageCpt.showWelcomeScreen(),this.logger.log("OER: Welcome Screen Displayed"),t.modelEvents.subscribe({event:"START_TPB"},e=>{t.homePageCpt.createTaskProgressBar(e)}),t.modelEvents.subscribe({event:"SET_STEP_TPB"},e=>{t.homePageCpt.setTaskProgressBarValue(e)}),t.modelEvents.subscribe({event:"COMPLETE_TPB"},()=>{t.homePageCpt.completeTaskProgressBar()}),this.getExecutionContext().getComponent("Application").loadDataFromCache(),window.localStorage.setItem("ENO3DViewStatusBarExpandState",!1),this.getExecutionContext().getComponent(WAfrStandardComponentKey.UIComponent).showMainComponent(),this._removeMask(),this.getExecutionContext().gotoApp().then(function(){t.logger.log("OER: GotoApp Done")}),e.done()}_showMask(){t.mask(document.getElementsByClassName("wux-applicationframe-execution-context")[0])}_removeMask(){t.unmask(document.getElementsByClassName("wux-applicationframe-execution-context")[0])}}}),define("DS/DELWeb3DOpersReviewAppV2/mixins/HideShowColumnMixin",["UWA/Core"],function(e){"use strict";const t="hideShow3D";return{updateHideShowColumn:function(e,i){let n=this.getTableView();n&&(n.updateColumn(t,{disabled:!e,visibleFlag:e}),i&&this.getModel().reset3DVisibility())}}}),define("DS/DELWeb3DOpersReviewAppV2/components/WidgetProxyComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent"],function(e){"use strict";function t(t){e.call(this,t)}return t.prototype=Object.create(e.prototype),t.prototype.getSessionWidget=function(){return widget||this.getWidgetComponent()},t.prototype.getWidgetDOM=function(){return widget?widget.body.firstChild:null},t.prototype.getExposedComponent=function(){},t}),define("DS/DELWeb3DOpersReviewAppV2/mixins/CommandsAvailabilityMixin",["UWA/Core","DS/DELWebOERCommonUtils/utils/XSOManager"],function(e,t){"use strict";const i="pprTypes";let n=function(e){this.publish({event:"updateCommandAvailability",data:e})},o=function(){this.publish({event:"resetCommandAvailability"})},s=function(){let e=this.cso.get().length>0;n.call(this,{data:{selection:{selection:e}}})},a=function(){var t=this,s=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents),a=[{eventName:{event:"onModelChange:roots"},callback:function(t){let s=this;t&&e.is(t.data,"array")&&t.data.length>0?t.data.forEach(function(e){n.call(s,{data:{[i]:{[e.pprType]:!0}}})}):o.call(this)}.bind(this),handler:s},{eventName:{event:"onModelChange:mode"},callback:function(e){e&&e.data&&n.call(this,{data:{transitions:{[e.data]:!0}}})}.bind(this),handler:s},{eventName:{event:"onRefresh"},callback:function(){let t=this,s=this.getComponentFromIdentifier("SessionModel").get("roots");o.call(t),e.is(s,"array")&&s.length>0&&s.forEach(function(e){n.call(t,{data:{[i]:{[e.pprType]:!0}}})})}.bind(this),handler:s}];t.eventTokens=[],a.forEach(function(e){t.eventTokens.push(e.handler.subscribe(e.eventName,e.callback))})};return{subscribeToCommandsAvailability:function(){(function(){this.cso=t.getCSO(),this.csoTokens=[],this.csoTokens.push(this.cso.onPostAdd(s.bind(this))),this.csoTokens.push(this.cso.onPostRemove(s.bind(this)))}).call(this),a.call(this)},unsubscribeToCommandsAvailability:function(){let e=this;e.csoTokens.forEach(function(t){e.cso.unsubscribe(t)}),e.eventTokens.forEach(function(t){e.unsubscribe(t)})}}}),define("DS/DELWeb3DOpersReviewAppV2/components/ViewerComp",["DS/PlatformAPI/PlatformAPI","DS/CoreEvents/Events","DS/Selection/CSOManager","DS/Selection/PSOManager","DS/DELWebCommonControls/DELWebLinkInfra","DS/DELWebViewerWafrComponent/DELWeb3DViewerComponent","DS/DELWebOERCommonUtils/utils/NodeUtils","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin","DS/DELWebOERCommonUtils/mixins/RootActionHandlerExtMixin"],function(e,t,i,n,o,s,a,r,l,d){"use strict";const h={ItemSpecification:"scopedMfg",CapableResource:"resource"},p={onApplyNGFilter:"onApplyNGFilter"};class c extends s{constructor(e){super(e),this.rootsLoaded=[],this._modelEventsTokens=[],this._platformTokens=[],this._visuTokens=[]}async initialize(){await super.initialize(),this.subscribeEvents(),this.createInfraController()}createInfraController(){let e=this,t={matchKeys:["SBOM","MBOM","PRODUCT","RESOURCE"],restrictKeys:["PROCESS"],proxy:e.getFilterProxy(),NGFUXId:e.getNGFUXID(),shareContent:!0};e.widgetLinkInfraController=new o(t),[{eventToAdd:"onAddRoots",type:"event",event:"loadData"},{eventToAdd:"onRemoveRoots",type:"handler",handlerId:"DELWebOERRemoveRoots"},{eventToAdd:"onRemoveAll",type:"handler",handlerId:"DELWebOERClean"}].forEach(t=>{e.widgetLinkInfraController.addEvent(t.eventToAdd,async function(i={}){switch(t.type){case"event":e.publish({event:t.event,data:i});break;case"handler":e.executeCommand({handlerId:t.handlerId,args:i})}})})}subscribeEvents(){let i=this,n=function(e,t){i.publish({event:e,data:{data:t}})},o={ModelEvents:{"onModelChange:roots":i.onRootsChange,onRefresh:i.onRefresh,onSearch:i.search,"onModelChange:mode":i.onModeChange,onBuildUpActivated:i.onBuildUpActivated,onBuildUpDeactivated:i.onBuildUpDeactivated},Platform:{"DS/PADUtils/PADCommandProxy/focus":function(e){e&&e.data&&UWA.is(e.data.paths,"array")&&e.data.paths.forEach(e=>{this.publish({event:"onFocus",data:{data:{path:e}}})})}},FilterBIProxy:{FilterBIColorize:n.bind(n,"onBIColorize"),FilterBIUnColorize:n.bind(n,"onBIUnColorize"),ApplyNGFilter:function(e){let t,n=i.getFilterProxy();e&&e.filterRootIds&&(t=e.filterRootIds[0],e.CVQueryV2||(e.CVQueryV2=n.getFilterSpec(t,{V2:{}})),i.publish({event:p.onApplyNGFilter,data:{data:e}}))}},WUXEvents:{"/VISU/":i._onVisuChange}};for(let e in o.ModelEvents)Object.prototype.hasOwnProperty.call(o.ModelEvents,e)&&i._modelEventsTokens.push(i.subscribe({event:e},o.ModelEvents[e].bind(i)));Object.keys(o.Platform).forEach(t=>{i._platformTokens.push(e.subscribe(t,o.Platform[t].bind(i)))});let s=this.getFilterProxy();if(s)for(let e in o.FilterBIProxy)Object.prototype.hasOwnProperty.call(o.FilterBIProxy,e)&&s.addEvent(e,o.FilterBIProxy[e]);for(let e in o.WUXEvents)Object.prototype.hasOwnProperty.call(o.WUXEvents,e)&&i._visuTokens.push(t.subscribe({event:e},o.WUXEvents[e].bind(i)))}_onVisuChange(e={}){"@onClickEvent"===e.eventType&&"@pickNothing"===e.eventID&&this.publish({event:"onClickOnEmptyArea"})}unsubscribeEvents(){this._modelEventsTokens.length>0&&(this._modelEventsTokens.forEach(e=>{this.unsubscribe(e)}),this._modelEventsTokens=[]),this._platformTokens.length>0&&(this._platformTokens.forEach(t=>{e.unsubscribe(t)}),this._platformTokens=[]),this._visuTokens.length>0&&(this._visuTokens.forEach(e=>{t.unsubscribe(e)}),this._visuTokens=[])}async clean(){this.unsubscribeEvents(),await super.clean()}async destroy(){await super.destroy()}search(e={}){this.getViewerBehavior().search({searchQuery:e.data})}async onRefresh(){let e=this;await this.getViewerBehavior().refresh(!0).then(function(){let t=e.getRoots();e.addRoots({items:t},!0)}).fail(function(e){})}_getProcessOptions(e={}){let t=e[h.ItemSpecification]||{},i=e[h.CapableResource]||{};return{mfgId:t.id,installPath:t.occurrence,resourceId:i.id,processId:e.occurrence&&e.occurrence.length>0?e.occurrence[0]:e.id,publishedRepId:e.publishedRep?e.publishedRep.id:null,defaultShow:!0,displayNotif:!0,filter:e.filter?e.filter:null,reframe:!UWA.is(e.reframe,"boolean")||e.reframe}}onBuildUpActivated(){let e=this.getViewerBehavior().getMode();this.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:e}})}onBuildUpDeactivated(){this.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:"Graphics"}})}getRoots(){return this.rootsLoaded}async removeRoots(e={}){let t=this,i=e.items||[],n=[];i&&(i.forEach(async e=>{switch(e.pprType){case t.PPRTYPES.PROCESS:await t.empty();break;default:n.push(e.id)}}),n.length>0&&(await t.getViewerBehavior().removeRoots({pids:n}),t.rootsLoaded=t.rootsLoaded.filter(e=>!n.includes(e.id))),t.widgetLinkInfraController.removeRoots({items:i,dispatchEvent:!1}))}async addRoots(e={},t){let i=this,n=e.items||[],o=async function(e){switch(e.pprType){case i.PPRTYPES.PROCESS:await async function(e){let n,o=i._getProcessOptions(e);return n=i.getViewerBehavior().setProcess(o).then(async function(){!t&&e.operation&&UWA.is(e.operation.occurrence,"array")&&e.operation.occurrence.length>0&&await i._activateBuildup({data:{path:e.operation.occurrence}}),i.publish({event:"onProcessLoadCompleted",data:{data:e}})}).catch(function(t){i.publish({event:"onProcessLoadFailed",data:{data:e}})})}(e);break;default:await async function(e){let t=!UWA.is(e.reframe,"boolean")||e.reframe;!0!==e.withFilter&&await i.getViewerBehavior().addRoots({objects:[{path:[e.id]}],reframe:t})}(e)}i.rootsLoaded.push(e)};n&&await Promise.all(n.map(o.bind(i)))}async _activateBuildup(e={}){let t=this;await t.getViewerBehavior().setOperation({...e.data,clear:!0}).then(()=>{t.publish({event:"onBuildUpActivated",data:{data:e.data}})}).fail(i=>{t.publish({event:"onBuildUpActivateFailed",data:{data:i.input,error:i.error}}),i&&i.error&&"DELVIEWER_E003"===i.error.code&&t.publish({event:"onBuildupConnectionFailed",data:{data:e.data,error:i.error}})})}async empty(){await this.getViewerBehavior().empty(),this.widgetLinkInfraController.removeAll({dispatchEvent:!1}),this.rootsLoaded=[]}onModeChange(e={}){let t=this,i=e.data;switch(i){case"BuildUp":case"WorkInstructions":t.getViewerBehavior().setMode({mode:i})}}highlight(e){this.getViewerBehavior().highlightNode(e)}unhighlight(e){this.getViewerBehavior().unHighlightNode(e)}setBuildUpGlobalSettings(e){let t=this;return this.getViewerBehavior().setBuildUpGlobalSettings(e).then(e=>t.publish({event:"onSetBuildUpGlobalSettings",data:{data:e.output}}))}getBuildUpGlobalSettings(e){let t=this;return this.getViewerBehavior().getBuildUpGlobalSettings(e).then(e=>t.publish({event:"onGetBuildUpGlobalSettings",data:{data:e.output}}))}getBuildUpGlobalContent(e){let t=this;return this.getViewerBehavior().getBuildUpGlobalContent(e).then(e=>t.publish({event:"onGetBuildUpGlobalContent",data:{data:e.output}}))}getSelectionManager(){return i}getSelectedPaths(){return i.get().map(e=>a.getRirPath(e))}getPSOManager(){return n}clearOnlySelection(){i.empty()}highlightLinkedViews(e={}){let t=this;try{"WorkInstructions"===t.getComponentFromIdentifier("SessionModel").get("mode")&&this.getViewerBehavior().highlightLinkedViews(e)}catch(e){t.logger.log(e)}}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.addRoots=this.addRoots.bind(this),this.publicAPI.removeRoots=this.removeRoots.bind(this),this.publicAPI.getRoots=this.getRoots.bind(this),this.publicAPI.empty=this.empty.bind(this),this.publicAPI.setMode=this.getViewerBehavior().setMode.bind(this),this.publicAPI.updateOptions=this.getViewerBehavior().updateOptions.bind(this),this.publicAPI.getViewerBehavior=this.getViewerBehavior.bind(this),this.publicAPI.getSelectionManager=this.getSelectionManager.bind(this),this.publicAPI.highlight=this.highlight.bind(this),this.publicAPI.unhighlight=this.unhighlight.bind(this),this.publicAPI.getSelectedPaths=this.getSelectedPaths.bind(this),this.publicAPI.clearOnlySelection=this.clearOnlySelection.bind(this),this.publicAPI.getPSOManager=this.getPSOManager.bind(this),this.publicAPI.preHighlight=this.getViewerBehavior().preHighlightNode.bind(this),this.publicAPI.unPreHighlight=this.getViewerBehavior().unPreHighlightNode.bind(this),this.publicAPI.highlightLinkedViews=this.highlightLinkedViews.bind(this),this.publicAPI.setBuildUpGlobalSettings=this.setBuildUpGlobalSettings.bind(this),this.publicAPI.getBuildUpGlobalSettings=this.getBuildUpGlobalSettings.bind(this),this.publicAPI.getBuildUpGlobalContent=this.getBuildUpGlobalContent.bind(this),this.publicAPI.selectNode=this.getViewerBehavior().selectNode.bind(this),this.publicAPI.unSelectNode=this.getViewerBehavior().unSelectNode.bind(this),this.publicAPI.hideNode=this.getViewerBehavior().hideNode.bind(this),this.publicAPI.showNode=this.getViewerBehavior().showNode.bind(this),this.publicAPI.setReframe=this.getViewerBehavior().setReframe.bind(this),this.publicAPI.setGraphicProperties=this.getViewerBehavior().setGraphicProperties.bind(this),this.publicAPI.removeGraphicProperties=this.getViewerBehavior().removeGraphicProperties.bind(this),this.publicAPI}}return c.prototype.mixinProperties(c,l),c.prototype.mixinProperties(c,d),c}),define("DS/DELWeb3DOpersReviewAppV2/mixins/ManageAppPreferencesMixin",["DS/PADUtils/PADSettingsMgt"],function(e){"use strict";const t="roots",i="installVolumeOffSet",n="installAutoApplyVolume",o="autoReload",s="DELWebViewer",a="SessionModel";return{_getOptionsFromPreferences:function(e={},t){let i,n=this.getWidgetComponent(),o=this.getComponentFromIdentifier("Preferences");return Object.keys(e).forEach(s=>{if(t||o.isPreferencesModified([s])){let t=e[s];i||(i={}),i[t.key]="NEG_VALUE"===t.value?!n.getValue(s):n.getValue(s)}}),i},_getDELWebViewerOptions:function(e){let t,i=this.getComponentFromIdentifier("Preferences");return t=this._getOptionsFromPreferences({defaultViewerMode:{key:"defaultViewerMode"},usePublishedContent:{key:"dynamicBuildUp",value:"NEG_VALUE"},defaultPickability:{key:"defaultPickability"}},e),i.isPreferencesModified([o])&&(t||(t={}),t.startUpView=this._getStartupViewOptions()),t},_getStartupViewOptions:function(){let e=this.getWidgetComponent(),t=this.getComponentFromIdentifier("WidgetLinkManager");return{setViewpoint:!e.getValue(o),enable:!t.isLinked()}},_getENOPADViewerOptions:function(e){return this._getOptionsFromPreferences({webTimeout:{key:"webapi_timeout"}},e)},_getProcessViewOptions:function(e){return this._getOptionsFromPreferences({defaultViewerMode:{key:"defaultViewerMode"}},e)},updateOptions:function(t){let i=this.getComponentFromIdentifier(s),n=this._getDELWebViewerOptions(t),o=this._getENOPADViewerOptions(t),a=this._getProcessViewOptions(t);e.updateWidgetPreferences(),o&&Object.keys(o).forEach(t=>{e.setSetting(t,o[t])}),n&&(i.updateOptions(n),n.defaultViewerMode&&i.setMode({mode:n.defaultViewerMode})),a&&this.getComponentFromIdentifier("PROCESS").setOptions(a)},refresh:function(){let e=this,o=e.getComponentFromIdentifier(a).get(t),s=e.getComponentFromIdentifier("Preferences");if(function(){let t=o||[];return function(t){return t&&t.pprType===e.commonServicesComponent.PPRTYPES.PROCESS}(t[0])&&(a=t[0])&&a.scopedMfg&&a.scopedMfg.occurrence&&a.scopedMfg.occurrence.length>0&&s.isPreferencesModified([i,n]);var a}()){let t=o[0];e.open({items:[{id:t.id,withFilter:t.withFilter}]})}else e._publish("onRefresh")}}}),define("DS/DELWeb3DOpersReviewAppV2/components/AppLayoutComponent",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/Utilities/TouchUtils","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebCommonControls/DELWebPanel"],function(e,t,i,n){"use strict";return class extends e{constructor(e){if(super(e),!e.configPath)throw new Error("Invalid input, configPath is mandatory");this.configPath=e.configPath,this.PPRPANELS={}}async initialize(){await super.initialize(),this.config=await this.loadJson(this.configPath),this._subscribeEvents()}_subscribeEvents(){[{eventName:{event:"onModelChange:roots"},callback:this.onRootsChange},{eventName:{event:"onToggleDataGridview"},callback:this.onToggleDataGridview},{eventName:{event:"onModelChange:mode"},callback:this.onModeChange},{eventName:{event:"onDELWebOERPERTViewCmdOpen"},callback:this.onDELWebOERPERTViewCmdStateChange.bind(this,!0)},{eventName:{event:"onDELWebOERPERTViewCmdClose"},callback:this.onDELWebOERPERTViewCmdStateChange.bind(this,!1)}].forEach(e=>{this.subscribe(e.eventName,e.callback.bind(this))})}onModeChange(e){let t,i=this,n=e.data||null,o={};if(this.config&&this.config.modes&&this.config.modes[n]){let e=this.config.modes[n],s=this.getToggleDataGridViewCommandState();Object.keys(e).forEach(t=>{if(i.PPRPANELS[t]){let n=i.PPRPANELS[t].currentDockArea;o[n]?UWA.is(o[n].collapseDockingZoneFlag,"boolean")&&!1!==o[n].collapseDockingZoneFlag&&(o[n].collapseDockingZoneFlag=e[t].collapseDockingZoneFlag):(o[n]={},o[n].collapseDockingZoneFlag=e[t].collapseDockingZoneFlag)}}),Object.keys(e).forEach(n=>{let a;i.PPRPANELS[n]&&Object.keys(e[n]).forEach(r=>{switch(r){case"visible":i.PPRPANELS[n].visibleFlag=s&&e[n].visible;break;case"collapseDockingZoneFlag":a=i.PPRPANELS[n].currentDockArea,(t=i.PPRPANELS[n].immersiveFrame.getDockingElement(a))&&(t.collapseDockingZoneFlag=o[a].collapseDockingZoneFlag)}})})}}onDELWebOERPERTViewCmdStateChange(e){let t=this.PPRPANELS&&this.PPRPANELS.PROCESS?this.PPRPANELS.PROCESS:null;if(t){let i=t.immersiveFrame.getDockingElement(t.currentDockArea);i&&(i.collapseDockingZoneFlag=e)}}getToggleDataGridViewCommandState(){return this.getCheckState({id:"DELWebOERToggleDataGridViewCmd"})}commandEnabled(){return this.isCheckExecutable("DELWebOERToggleDataGridViewCmd")}onToggleDataGridview(e={}){let t=!UWA.is(e.data.state,"boolean")||e.data.state;Object.keys(this.PPRPANELS).forEach(e=>t?this.PPRPANELS[e].show():this.PPRPANELS[e].hide())}async onRootsChange(e={}){let t=this,i=e.data;UWA.is(i)?i.forEach(e=>{t.prepareLayout(e.pprType)}):await t.empty()}_getPanelOptions(e){let n=JSON.parse(localStorage.getItem("wux-windows-window")),o=this.getComponentFromIdentifier(WAfrStandardComponentKey.UIFrame),s=e.name+"View",a={identifier:s,domId:s,icon:{iconPath:i.getAssetsUrl(e.icon.moduleName,e.icon.path),iconSize:{height:t.getTouchMode()?"22px":"16px",width:t.getTouchMode()?"22px":"16px"}},immersiveFrame:o.getImmersiveFrame(),currentDockArea:e.dockArea?WUXDockAreaEnum[e.dockArea]:WUXDockAreaEnum.LeftDockArea};return n&&n[s]&&n[s].dockArea&&(a.currentDockArea=n[s].dockArea),a}_snapPanels(e,t){let i,n=t,o=Object.keys(this.PPRPANELS).filter(i=>i!==t&&this.PPRPANELS[i].currentDockArea===e);if(o.length>0)for(i=o.length-1;i>=0;i--)this.PPRPANELS[o[i]].attachToWindow(this.PPRPANELS[n],WUXSnapAreaEnum.InsideArea,"before"),n=o[i]}prepareLayout(e){var t,i=this.getToggleDataGridViewCommandState();this.commandEnabled()?UWA.is(this.config.LAYOUT[e],"array")?this.config.LAYOUT[e].forEach(e=>{switch(e.type){case"PANEL":t=this.config.VIEWOPTIONS&&this.config.VIEWOPTIONS.PANEL?this.config.VIEWOPTIONS.PANEL:{},Object.assign(t,this._getPanelOptions(e)),this.PPRPANELS[e.name]||(this.PPRPANELS[e.name]=new n(t),this.PPRPANELS[e.name].visibleFlag=i,this.getComponentFromIdentifier(e.name).setContainer(this.PPRPANELS[e.name].getContentContainer())),!0===e.snap&&this._snapPanels(WUXDockAreaEnum[e.dockArea],e.name)}}):this.logger.error("Unable to create layout as configuration is not available for type : ",e):this.logger.debug("Toggle 2D structure command is disabled, layout cannot be prepared")}getContentContainer(e){if(UWA.is(this.PPRPANELS[e]))return this.PPRPANELS[e].getContentContainer();this.logger.error("Layout not available for type : ",e)}async empty(){Object.keys(this.PPRPANELS).forEach(e=>this.PPRPANELS[e].destroy()),this.PPRPANELS={}}async clean(){this.empty(),await super.clean()}async destroy(){this.clean(),await super.destroy()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.prepareLayout=this.prepareLayout.bind(this),this.publicAPI.getContentContainer=this.getContentContainer.bind(this),this.publicAPI.empty=this.empty.bind(this),this.publicAPI}}}),define("DS/DELWeb3DOpersReviewAppV2/components/ContextualMenu3DComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/Selection/CSOManager"],function(e,t,i){"use strict";const n="DELWebOERStatusBarState",o="DELWebOERViewerAmbience";function s(t){e.call(this,t),this._identifiers={view:t.viewIdentifier},this._contextConfigPath=t.ctxOptions,this._nlsAMDPath=t.nlsAMDPath,this._contextConfig=[],this._nls=null,this._nlsAMDPromises=[],this._wafrContextContainer=null,this._isContextBarVisible=!1,this._view=null}return s.prototype=Object.create(e.prototype),s.prototype.initialize=async function(){this._identifiers.view&&this._contextConfigPath||UWA.Promise.reject("Invalid parameters sent from .wafrapp file"),!0!==this._isComponentInitialized&&(this._view=this.getComponentFromIdentifier(this._identifiers.view),await this._loadConfigurationFromFile(),this._nls=await this.loadNLS(this._nlsAMDPath),this._updateCommandState(),this._setWafrContextBar(),await this._contextReady())},s.prototype.clean=function(){return new Promise(function(e){e()})},s.prototype.destroy=function(){return new Promise(function(e){e()})},s.prototype._loadConfigurationFromFile=async function(){for(let e=0;e<this._contextConfigPath.length;++e){let t=await this.loadJson(this._contextConfigPath[e]);this._contextConfig.push(t)}},s.prototype._updateCommandState=function(){for(let e=0;e<this._contextConfig.length;++e)for(let t=0;t<this._contextConfig[e].ContextMenu.onEmptiness.length;++t){const i=this._contextConfig[e].ContextMenu.onEmptiness[t];if(i.submenu)for(let e=0;e<i.submenu.length;++e)if("DELWebOERToggleStatusBarCmd"===i.submenu[e].handlerId){let e=window.localStorage.getItem(n);this.getCommandHandler().setCheckState({id:"DELWebOERToggleStatusBarCmd",state:!e||"true"===e})}else i.submenu[e].handlerId===window.localStorage.getItem(o)&&(i.submenu[e].state="selected",this.executeCommand({handlerId:i.submenu[e].handlerId}))}},s.prototype._contextReady=function(){return new Promise(e=>{this.getExecutionContext().setContext("ContextReady",!0),this._isComponentInitialized=!0,e()})},s.prototype._prepareContextMenu=function(e,n,s){let a=[],r=[];if(!0===(0===n.length))a=e.ContextMenu.onEmptiness;else{if(!(i.get().length>0&&this._view._areValidPaths(i.get())))return[];a=e.ContextMenu.onGeometry}for(let e=0;e<a.length;++e){let i=a[e],n=[];if(i.submenu){let e="ambience"===i.identifier;for(let s=0;s<i.submenu.length;++s)n.push({title:this._nls[i.submenu[s].handlerId],type:i.submenu[s].type,handlerId:i.submenu[s].handlerId,icon:i.submenu[s].iconPath?t.getAssetsUrl(i.submenu[s].module,i.submenu[s].iconPath):void 0,state:i.submenu[s].state,action:{this:this,callback:function(e,t,i){if(!0===i){for(let t=0;t<e.length;++t)e[t].state=void 0;e[t].state="selected",window.localStorage.setItem(o,e[t].handlerId)}this.executeCommand({handlerId:e[t].handlerId})}.bind(this,i.submenu,s,e)}})}const s={title:n.length>0?this._nls[i.identifier]:null,type:i.type,handlerId:n.length>0?null:i.handlerId,state:n.length>0?null:i.state,action:n.length>0?null:{this:this,callback:function(e){e&&this.executeCommand({handlerId:e})}.bind(this,i.handlerId)}};n.length>0&&(s.submenu=n),r.push(s)}return r},s.prototype._prepareContextBar=function(e,t,n){if(!0===(0===t.length))return[];if(i.get().length>0&&this._view._areValidPaths(i.get())){const t=this._view.getController().getRoots(),n=i.get();let o=!1;for(let e=0;e<n.length;++e){const i=this._view.streamPath(n[e].pathElement);for(let e=0;e<t.length;++e){let n=t[e].getModelIdentification();if(1===i.length&&n===i[0]){o=!0;break}}if(!0===o)break}return!0===o?e.ContextBar:{WAfrCtxBarRow1:{model:[e.ContextBar.WAfrCtxBarRow1.model[0]]}}}return[]},s.prototype._setWafrContextBar=function(){var e=this.getComponentFromIdentifier(WAfrStandardComponentKey.UIComponent);this._wafrContextContainer=e.getContextualUIComponentManager();for(let e=0;e<this._contextConfig.length;++e){const t={subscriberId:`DELWeb3DContextualBar-${e}`,merge:!0,onContextualMenuReady:function(e,t){return this._prepareContextMenu(e,this.getPickedPath(t),t)}.bind(this,this._contextConfig[e]),onContextualBarReady:function(e,t,i){return this._prepareContextBar(e,this.getPickedPath(i),i)}.bind(this,this._contextConfig[e])};this._wafrContextContainer.register(t)}},s.prototype.getPickedPath=function(e){return this._view.get3DViewer().pick({xPix:e.XmousePositionWithDevPxRatio,yPix:e.YmousePositionWithDevPxRatio},"mesh",!0).path},s.prototype.setContextBarVisibility=function(e){var t=this._wafrContextContainer.getContextualBar();!0===e?(this._isContextBarVisible=!0,t.show()):(this._isContextBarVisible=!1,t.hide())},s.prototype.canBeParallelized=function(){return!1},s.prototype.getExposedComponent=function(){},s}),define("DS/DELWeb3DOpersReviewAppV2/components/CrossHighlightComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERCommonUtils/utils/NodeUtils","DS/DELWebOERCommonUtils/utils/TrackUtils"],function(e,t,i){"use strict";return class extends e{constructor(e){if(super(e),!e.appConfigPath)throw new Error("Invalid input, appConfigPath is mandatory");this.appConfigPath=e.appConfigPath}async initialize(){await super.initialize(),this.componentConfig=await this.loadJson(this.appConfigPath);let e=this,t=this.componentConfig;Object.keys(t).forEach(i=>{let n=t[i]||{};if(n.select){let t=e.getComponentFromIdentifier(i).getSelectionManager();t.onPostAdd(e.onSelectionUpdate.bind(e,i,n.select,"add")),t.onPostRemove(e.onSelectionUpdate.bind(e,i,n.select,"remove"))}if(n.preHighlight){let t=e.getComponentFromIdentifier(i).getPSOManager();t.onPostAdd(e.onPreHighlightUpdate.bind(e,i,n.preHighlight,"add")),t.onPostRemove(e.onPreHighlightUpdate.bind(e,i,n.preHighlight,"remove"))}}),[{eventName:{event:"onClickOnEmptyArea"},callback:e.onClickOnEmptyArea}].forEach(e=>{this.subscribe(e.eventName,e.callback.bind(this))})}getComponentOptions(){return this.componentConfig}onClickOnEmptyArea(e={}){let t=this,i=e.origin,n=t.getComponentOptions();n[i]&&n[i].onClickOnEmptyArea&&n[i].onClickOnEmptyArea.forEach(e=>{let i=e.componentId,n=t.getComponentFromIdentifier(i),o=e.clearSelectionFunc;n[o]&&n[o]()})}onPreHighlightUpdate(e,i,n,o){let s=this;i.forEach(e=>{let i=e.componentId,a="add"===n?e.preHighlightFunc:e.unPreHighlightFunc,r=s.getComponentFromIdentifier(i);o&&o.length>0&&("remove"===n||"add"===n&&0===r.getPSOManager().get().length)&&a&&r[a]({path:o.map(t.getRirPath)})})}onSelectionUpdate(e,t,n){let o=this,s=this.getComponentFromIdentifier(e).getSelectedPaths();t.forEach((t={})=>{let a=t.componentId,r=t.clearSelectionFunc,l=t.highlightFunc,d=t.transformInput,h=o.getComponentFromIdentifier(a);if(h){let t={path:s};"add"===n&&(o.logger.debug(`Invoke ${r} to remove selection from ${a}`),h[r]&&h[r]()),d&&d.componentId&&d.function&&(t=o.getComponentFromIdentifier(d.componentId)[d.function]({path:s})),l&&(o.logger.debug(`Invoke ${l} with params ${JSON.stringify(t)} to highlight from ${a}`),i.trackChanges({category:"CrossHighlight",action:"Highlight",label:"Highlight",dims:{pd1:e,pd2:"True"},executionContext:o.getExecutionContext()}),h[l]({...t,clear:!0}))}})}async clean(){await super.clean()}async destroy(){await super.destroy()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI}}}),define("DS/DELWeb3DOpersReviewAppV2/mixins/OpenControllerMixin",["UWA/Core","UWA/Class/Promise","DS/DELWebOERCommonUtils/utils/TrackUtils","text!DS/DELWeb3DOpersReviewAppV2/assets/json/AppComponentConfig.json","i18n!DS/DELWeb3DOpersReviewAppV2/assets/nls/DELWeb3DOpersReviewAppV2"],function(e,t,i,n,o){"use strict";const s="roots",a="Graphics",r="usePublishedContent",l="DELOERStartupViewData",d="autoReload",h="SessionData",p="ViewerContentLoaded",c="TableViewContentLoaded",g="toOpen",u="DELWebOERAppReady",m="onLoadDataComplete",b="onLoadDataFailure",f=JSON.parse(n);let C;return{_openWithControl:async function(e){let t,n=this.getComponentFromIdentifier("DELWebViewer"),a=this.getComponentFromIdentifier("SessionModel"),l=this.getComponentFromIdentifier("OpenControl"),d=this.getWidgetComponent(),h=this.getNotificationManager(),p=a.get(s),c=this;if(e&&!0===e.clear&&await c.executeCommand({handlerId:"DELWebOERClean"}),e&&e.items&&e.items.length>0){const s=performance.now();C=s,await async function(){return e&&e.items?await async function(){var n=f.supported_types,s=f.unsupported_types,a=f.unsupported_multiroot_types,r=!0,l=await c.commonServicesComponent.getTaxonomies(e.items.map(e=>e.id));return l&&Object.keys(l).length===e.items.length?(e.items.forEach(function(t){t.pprType=c.commonServicesComponent.getPPRType(l[t.id]),(!n.some(e=>l[t.id].includes(e))||e.items.length>1&&a.some(e=>l[t.id].includes(e))||s.some(e=>l[t.id].includes(e)))&&(r=!1),i.trackChanges({executionContext:c.getExecutionContext(),category:"OpenedObjects",action:"LoadOpenedObjects",label:"OpenedObjects",dims:{pd1:t.type?t.type:t.pprType,pd2:t.pprType,pd3:e.length>1?"True":"False",pd4:r?"True":"False",pd5:t.withFilter?"True":"False"}})}),r||(t=e.items.length>1?o.get("ProcessNotSupportedMultiRootScenarios.Error.Message"):o.get("TypesNotSupported.Error.Message"),h.addNotif({level:"warning",message:t}),c.logger.error("Type not supported :",JSON.stringify(e)))):(t=o.get("NoObjectInformation.Error.Message"),h.addNotif({level:"warning",message:t}),r=!1,c.logger.error(t+": "+JSON.stringify(e))),r}():(c.logger.error("items property is missing, please check the format"),!1)}()?(p&&p.length>0&&(1===e.items.length&&e.items[0].pprType===c.commonServicesComponent.PPRTYPES.PROCESS||1===p.length&&p[0].pprType===c.commonServicesComponent.PPRTYPES.PROCESS)&&(await c.executeCommand({handlerId:"DELWebOERClean"}),this._setSessionData({})),l.open({items:e.items.map(e=>({installVolumeOffSet:d.getValue("installVolumeOffSet"),installAutoApplyVolume:d.getValue("installAutoApplyVolume"),usePublication:d.getValue(r),...e})),showForm:!0,filterProxy:n.getFilterProxy(),NGFUXId:n.getNGFUXID(),onOpen:c._onOpen.bind(c),onError:c._onError.bind(c),onCancel:c._onCancel.bind(c)})):this._onError({error:{message:"Invalid input provided, please check the input"}})}else this._onCancel()},_onOpen:function(e){let n=this.getComponentFromIdentifier("SessionModel"),o=t.resolve(),s=this,r=s.getComponentFromIdentifier("mod_WelcomeScreen");this.publish({event:"COMPLETE_TPB"}),r.hideWelcomeScreen(),n.set(g,null),e.results&&(r.addMRUItems({ids:e.results.map(e=>e.id)}),o.then(function(){e.results=e.results.map(e=>(e.filterProxy&&delete e.filterProxy,e)),s.logger.log("Open completed  - ",JSON.stringify(e)),s.executeCommand({handlerId:"DELWebOERAddRoots",args:{items:e.results}}),s.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:a}}),i.trackChanges({executionContext:s.getExecutionContext(),category:"Performance",action:"RecordPerformance",label:"OpenedObjects",dims:{pd1:"True"},vals:{pv1:performance.now()-C}})}))},_onError:function(e){let t=this.getComponentFromIdentifier("mod_WelcomeScreen");e=e||{},this.publish({event:"COMPLETE_TPB"}),this.logger.error(JSON.stringify(e)),t&&t.showWelcomeScreen(),i.trackChanges({executionContext:this.getExecutionContext(),category:"Performance",action:"RecordPerformance",label:"OpenedObjects",dims:{pd1:"False",pd2:"openControl"},vals:{pv1:performance.now()-C}})},_onCancel:function(){let e=this.getComponentFromIdentifier("DELWebViewer");this.publish({event:"COMPLETE_TPB"});let t=this.getComponentFromIdentifier("mod_WelcomeScreen");t&&t.showWelcomeScreen(),e.empty(),i.trackChanges({executionContext:this.getExecutionContext(),category:"Performance",action:"RecordPerformance",label:"OpenedObjects",dims:{pd1:"False",pd2:"openControl"},vals:{pv1:performance.now()-C}})},open:async function(e){let t=this,i=t.getExecutionContext().getContext(),n=t.getComponentFromIdentifier("SessionModel"),s=function(){t.publish({event:"START_TPB",data:{value:1,simulateProgressInStep:!0,fullBarForEachStep:!0,steps:[{weight:100,text:o.get("ProgressBar.Text.Loading")}]}})};n.set(g,null),t._checkLoadingStatus(e);try{i&&i[u]?(s(),t._openWithControl(e)):(n.set(g,e),s())}catch(i){t._onError({error:{message:`Failed to fetch attributes for the object id ${e.id} ${i.toString()}`}})}},openWithCache:function(t){if(!this.getComponentFromIdentifier("WidgetLinkManager").isLinked()){let t,i=this,n=i.getComponentFromIdentifier("SessionModel").get(g),s=this.getWidgetComponent().getValue(d),a=this._getSessionData(),r=this.getWidgetComponent().getValue(l);if(s&&r){i.getNotificationManager().addNotif({level:"warning",title:o.get("Failed.StartupViewLoading.Title"),subtitle:o.get("Failed.StartupViewLoading.Subtitle"),message:o.get("Failed.StartupViewLoading.Message"),sticky:!1})}s&&a&&e.is(a.items,"array")?(t=a).items.forEach(e=>{e.reframe=!0,e.operation&&(e.operation={})}):r&&!s?t=r.data:n&&(t=n),t&&i.open(t)}},checkLinkAndOpen:function(e){let t=this.getComponentFromIdentifier("WidgetLinkManager");this._publish("onDropData",e),t.isLinked()?this.logger.debug("Widget is linked, OER app will not open data"):this.open(e)},_checkLoadingStatus:function(e){var t=this,i=[],n=this.getComponentFromIdentifier("SessionModel"),o=function(){i&&i.length>0&&i.forEach(e=>{t.unsubscribe(e)}),i=[]},a=e&&e.items?e.items:[],r=function(i,r,l){let d=l&&l.id?l:l.data&&l.data.id?l.data:null;if(d&&a&&a.length>0){let l=0;a.forEach(e=>{e.id===d.id&&(e[i]=r)}),!1===r?(this._publish(b,{items:[d]}),o()):(a.forEach(e=>{!0!==e[p]||!0!==e[c]&&!1!==t.isCheckExecutable("DELWebOERToggleDataGridViewCmd")||l++}),l===a.length&&(this._publish(m,e),o(),this._setSessionData({items:n.get(s)||[]})))}};[{name:"onProcessLoadCompleted",callback:r.bind(this,p,!0)},{name:"onProcessLoadFailed",callback:r.bind(this,p,!0)},{name:"onRootAdded",callback:r.bind(this,p,!0)},{name:"onLoadingFailure",callback:r.bind(this,p,!1)},{name:"on2DRootAdded",callback:r.bind(this,c,!0)},{name:"on2DRootAddFailed",callback:r.bind(this,c,!1)}].forEach(e=>{i.push(t.subscribe({event:e.name},e.callback))})},_getSessionData:function(){return this.getWidgetComponent().getValue(h)},_removeFilter:function(t){function i(e){e&&e.filter&&(e.withFilter=!1,delete e.filter)}t&&e.is(t.items,"array")&&t.items.length>0&&t.items.forEach(e=>{i(e),i(e.scopedMfg),i(e.resource)})},_setSessionData:function(t){let i=e.clone(t);this._removeFilter(i),this.getWidgetComponent().setValue(h,i)},_toggleStartupView(e,t={}){let i=this.getWidgetComponent();e?i.setValue(l,t):i.deleteValue(l)},_isCacheAvailable(){let t=this.getWidgetComponent(),i=t.getValue(h);return e.is(t.getValue(l))||t.getValue(d)&&i&&e.is(i.items,"array")},_publish:function(e,t){this.publish({event:e,data:{data:t}})}}}),define("DS/DELWeb3DOpersReviewAppV2/components/ProcessMBOMComp",["DS/DELWebOERTableViewComp/TableViewComp","DS/DELWeb3DOpersReviewAppV2/mixins/HideShowColumnMixin"],function(e,t){"use strict";class i extends e{constructor(e){super(e)}async initialize(){await super.initialize(),[{eventName:{event:"onBuildUpActivated"},callback:this.updateHideShowColumn.bind(this,!1,!0)},{eventName:{event:"onBuildUpDeactivated"},callback:this.updateHideShowColumn.bind(this,!0,!0)}].forEach(e=>{this.subscribe(e.eventName,e.callback.bind(this))})}async addRoots(e={}){let t=e.items||[],i=[];t.forEach(async e=>{e.scopedMfg&&i.push(e.scopedMfg)}),await super.addRoots({items:i}),this.updateHideShowColumn(!0)}_onApplyFilter(e){let t,i,n,o=this,s=this.getRoots();s&&e&&e.data&&e.data.filterRootIds&&1===e.data.filterRootIds.length&&(t=!0!==e.data.empty?e.data.CVQueryV2.filter:null,i=e.data.filterRootIds[0],s.forEach(function(e){e&&e.scopedMfg&&(e.scopedMfg.id===i||e.scopedMfg.occurrence&&e.scopedMfg.occurrence[0]===i)&&(e.scopedMfg.filter=t)}),(n=s.find(e=>e&&e.scopedMfg&&(e.scopedMfg.id===i||e.scopedMfg.occurrence&&e.scopedMfg.occurrence[0]===i)))&&o.addRoots({items:[n]}))}async removeRoots(e={}){let t=e.items||[],i=[];t.forEach(async e=>{e.scopedMfg&&i.push(e.scopedMfg)}),await super.removeRoots({items:i})}getRoots(){return(super.getRoots()||[]).map(e=>({scopedMfg:e}))}}return i.prototype.mixinProperties(i,t),i}),define("DS/DELWeb3DOpersReviewAppV2/components/AppComponent",["DS/UIKIT/Mask","DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADSharedSettings","DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWeb3DOpersReviewAppV2/mixins/OpenControllerMixin","DS/DELWeb3DOpersReviewAppV2/mixins/CommandsAvailabilityMixin","DS/DELWeb3DOpersReviewAppV2/mixins/ManageAppPreferencesMixin","DS/DELWeb3DOpersReviewAppV2Commands/DELOERRightSidePanel","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin","i18n!DS/DELWeb3DOpersReviewAppV2/assets/nls/DELWeb3DOpersReviewAppV2","text!DS/DELWeb3DOpersReviewAppV2/assets/json/AppComponentConfig.json"],function(e,t,i,n,o,s,a,r,l,d,h){"use strict";const p="DELCommonUtilsServices",c=JSON.parse(h),g="Widget";class u extends n{constructor(e){super(e)}async initialize(){let e=this;if(await super.initialize(),this.commonServicesComponent=e.getComponentFromIdentifier(p),!this.commonServicesComponent)throw new Error(`Common services component with identifier ${p} not found, please make sure ${p} component is available`);if(c.sharedSettings){let t=e.getComponentFromIdentifier(g).getSessionWidget();i.addSharedSettings(t,c.sharedSettings),this.subscribeToCommandsAvailability(),[{eventName:{event:"open"},callback:e.checkLinkAndOpen},{eventName:{event:"loadData"},callback:e.open},{eventName:{event:"onUpdatePreferences"},callback:e.updateOptions},{eventName:{event:"onDelWebOERAppReady"},callback:e._onAppReady},{eventName:{event:"DS/DELWebViewer/onStartupViewSet"},callback:e._toggleStartupView.bind(e,!0)},{eventName:{event:"DS/DELWebViewer/onStartupViewRemoved"},callback:e._toggleStartupView.bind(e,!1)},{eventName:{event:"onWKIFailed"},callback:function(t){let i=e.getNotificationManager();t=t||{},e.logger.error(JSON.stringify(t)),i.addNotif({level:"warning",message:d.get("Warn.WKIFailed.Message")})}},{eventName:{event:"load2DStructure"},callback:e._load2DStructure},{eventName:{event:"remove2DStructure"},callback:e._remove2DStructure},{eventName:{event:"refresh"},callback:e._onRefresh.bind(e)},{eventName:{event:"getContent"},callback:e._onGetContent},{eventName:{event:"freeze"},callback:e._freeze},{eventName:{event:"unFreeze"},callback:e._unFreeze},{eventName:{event:"onWidgetLinked"},callback:e._onWidgetLinked},{eventName:{event:"onWidgetUnlinked"},callback:e._onWidgetUnlinked},{eventName:{event:"show2DStructure"},callback:e._toggle2DStructureVisibility.bind(e,!0)},{eventName:{event:"hide2DStructure"},callback:e._toggle2DStructureVisibility.bind(e,!1)},{eventName:{event:"setAppConfig"},callback:e._setAppConfig}].forEach(t=>{this.subscribe(t.eventName,t.callback.bind(e))}),e.getWidgetComponent().addEvent("onRefresh",e._onRefresh.bind(e)),e.getWidgetComponent().addEvent("onSearch",function(t){e.publish({event:"onSearch",data:{data:t}})})}}_setAppConfig(e,t=!1){this._setAppConfigParams=e;let i=this;if(UWA.is(e.commands,"array")){let n=this.getCommandHandler(),o=[];e.commands.forEach(e=>{if(e.handlerType=function(e){let t,n=i.getCommandHandler();return t=n.hasRadioHandler(e)?"radio":n.hasCheckHandler(e)?"check":"default"}(e.identifier),UWA.is(e.disable,"boolean")&&(e.force=!0!==t,e.disable=!0===t?!e.disable:e.disable,o.push(e)),UWA.is(e.state,"boolean")){let i=n.getCheckState({id:e.identifier});(!0===t?!e.state:e.state)!==i&&n.toggleCheck({id:e.identifier})}}),o.length>0&&i.getComponentFromIdentifier("CommandsAvailability").updateCommands(o)}}_onAppReady(){this._setMode("Graphics"),this.updateOptions(!0),this._rightSidePanelCmd=new r({executionContext:this.getExecutionContext()}),this.openWithCache()}_onRefresh(){this._setMode("Graphics"),this.refresh()}_setMode(e){this.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:e}})}_toggle2DStructureVisibility(e){const t=this.getExecutionContext().getComponent(WAfrStandardComponentKey.HandlerComponent);e!==t.getCheckState({id:"DELWebOERToggleDataGridViewCmd"})&&t.toggleCheck({id:"DELWebOERToggleDataGridViewCmd"})}_onWidgetLinked(){this.getComponentFromIdentifier("DELWebViewer").updateOptions({startUpView:this._getStartupViewOptions()})}_onWidgetUnlinked(){this.getComponentFromIdentifier("DELWebViewer").updateOptions({startUpView:this._getStartupViewOptions()}),this._setAppConfigParams&&UWA.is(this._setAppConfigParams.commands,"array")&&(this._setAppConfig(this._setAppConfigParams,!0),this._setAppConfigParams=null)}_load2DStructure(){let e=this;this.enableCheck("DELWebOERToggleDataGridViewCmd"),(this.getComponentFromIdentifier("SessionModel").get("roots")||[]).forEach(t=>{this.getComponentFromIdentifier("AppLayout").prepareLayout(t.pprType);let i={items:[t]};switch(t.pprType){case e.PPRTYPES.PROCESS:e.getComponentFromIdentifier("PROCESS").addRoots(i),e.getComponentFromIdentifier("PROCESS_MBOM").addRoots(i),e.getComponentFromIdentifier("PROCESS_RESOURCE").addRoots(i);break;default:e.getComponentFromIdentifier(t.pprType).addRoots(i)}})}_remove2DStructure(){this.logger.warn('"DS/DELExternalWidgetCom/Remove2DStructure" linkability event is deprecated, use setAppConfig to disable 2D structure');let e=this;this.getComponentFromIdentifier("AppLayout").empty(),(this.getComponentFromIdentifier("SessionModel").get("roots")||[]).forEach(t=>{switch(t.pprType){case e.PPRTYPES.PROCESS:e.getComponentFromIdentifier("PROCESS").empty(),e.getComponentFromIdentifier("PROCESS_MBOM").empty(),e.getComponentFromIdentifier("PROCESS_RESOURCE").empty();break;default:e.getComponentFromIdentifier(t.pprType).empty()}}),this.disableCheck("DELWebOERToggleDataGridViewCmd")}_onGetContent(){this._publish("onGetContent",{items:this.getComponentFromIdentifier("SessionModel").get("roots")})}_freeze(){this._showMask()}_unFreeze(){this._removeMask()}async clean(){await super.clean(),this.unsubscribeToCommandsAvailability()}async destroy(){this._rightSidePanelCmd.destroy(),await super.destroy()}loadDataFromCache(){if(!this.getComponentFromIdentifier("WidgetLinkManager").isLinked())if(this._isCacheAvailable())this.publish({event:"START_TPB",data:{value:1,simulateProgressInStep:!0,fullBarForEachStep:!0,steps:[{weight:100,text:d.get("ProgressBar.Text.Loading")}]}});else{let e=this.getWidgetComponent().getValue("X3DContentId");if(e=UWA.is(e,"string")?JSON.parse(e):e,UWA.is(e)&&UWA.is(e.data)&&UWA.is(e.data.items,"array")&&e.data.items.length>0){let t={items:e.data.items.map(e=>({id:e.objectId,type:e.objectType,label:e.displayName,withFilter:!1}))};this.open(t)}}}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.loadDataFromCache=this.loadDataFromCache.bind(this),this.publicAPI}_showMask(){e.mask(document.getElementsByClassName("wux-applicationframe-execution-context")[0])}_removeMask(){e.unmask(document.getElementsByClassName("wux-applicationframe-execution-context")[0])}}return u.prototype.mixinProperties(u,o),u.prototype.mixinProperties(u,s),u.prototype.mixinProperties(u,a),u.prototype.mixinProperties(u,l),u}),define("DS/DELWeb3DOpersReviewAppV2/components/ProcessResourceComp",["DS/DELWebOERTableViewComp/TableViewComp","DS/DELWeb3DOpersReviewAppV2/mixins/HideShowColumnMixin"],function(e,t){"use strict";class i extends e{constructor(e){super(e)}async initialize(){await super.initialize(),[{eventName:{event:"onBuildUpActivated"},callback:this.updateHideShowColumn.bind(this,!1,!0)},{eventName:{event:"onBuildUpDeactivated"},callback:this.updateHideShowColumn.bind(this,!0,!0)}].forEach(e=>{this.subscribe(e.eventName,e.callback.bind(this))})}async addRoots(e={}){let t=e.items||[],i=[];t.forEach(async e=>{e.resource&&i.push(e.resource)}),await super.addRoots({items:i}),this.updateHideShowColumn(!0)}_onApplyFilter(){}async removeRoots(e={}){let t=e.items||[],i=[];t.forEach(async e=>{e.resource&&i.push(e.resource)}),await super.removeRoots({items:i})}getRoots(){return(super.getRoots()||[]).map(e=>({resource:e}))}}return i.prototype.mixinProperties(i,t),i});