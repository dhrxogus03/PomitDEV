define("DS/DELWebViewerWafrComponent/DELWeb3DViewerComponent",["UWA/Core","DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebViewerController/Controller","DS/DELWebViewerComponent/MappingKeys","DS/DELWebViewerLogger/Logger","DS/PADUtils/PADSettingsMgt","DS/DELWebViewerUtils/DELWebViewerSettingsMgt","i18n!DS/DELWebViewerComponent/assets/nls/NLS"],function(e,t,i,n,r,o,s,a){"use strict";const d={MfgItemsViewer:0,ProcessViewer:1,WorkInstructionViewer:2};return class extends t{constructor(e={}){if(super(e),this.configModule=e.appConfigPath||"DS/DELWebViewerWafrComponent/assets/json/ViewerConfig.json",this.enopadViewerIdentifier=e.enopadViewerIdentifier,!this.configModule||!this.enopadViewerIdentifier)throw new Error("Invalid input, appConfigPath and enopadViewerIdentifier is mandatory, please check the input params")}async initialize(){let t=this,r=this.getComponentFromIdentifier(this.enopadViewerIdentifier),p=await new Promise(e=>{require([`text!${t.configModule}`],function(t){e(JSON.parse(t))})})||{},l=e.merge(p.delviewer||{},{mappingKeys:n,viewerType:d.MfgItemsViewer,loggerSeverity:"LOG",performanceLogging:!1,dynamicBuildUp:!0,forceLoad:!0,startUpView:{setViewpoint:!0,enable:!0},executionContext:t.getExecutionContext(),statusBar:{commands:["LastIndexingTime"]}});if(await super.initialize(),!p.delviewer)throw new Error("Component configuration is not valid, please check the format of the json");o.setSetting("enopad3dviewer_graphDefinitionForExpand",{descending_condition:null,descending_condition_relation:{uql:"((flattenedtaxonomies:reltypes/DELFmiFunctionInstance) AND (expand3d:true)) OR \n                           ((flattenedtaxonomies:types/DELFmiProcessImplementCnx) AND (expand3d:true)) OR \n                           ((flattenedtaxonomies:types/DELFmiProcessOutputPrereqMaterializationCnx) AND (expand3d:true)) OR \n                           ((flattenedtaxonomies:reltypes/VPMInstance) OR (flattenedtaxonomies:reltypes/VPMRepInstance))"},descending_condition_object:null}),s.setDELViewerSettings(l),t.vwrCtrl=new i(l,d,{nls:a},r);let g=t.getEventHnd();for(let i in g.events)if(Object.prototype.hasOwnProperty.call(g.events,i)){let n=g.events[i];g.subscribe(n,function(t,i){t&&(e.is(i,"array")?i.forEach(e=>{var i={};Object.assign(i,e,{path:e.paths}),delete i.paths,this.publish({event:t,data:{data:i}})}):this.publish({event:t,data:{data:i}}))}.bind(t,n))}await new Promise((e,i)=>{try{let n=t.getEventHnd().subscribe(t.getEventHnd().events.onReady,function(i){t.getEventHnd().unSubscribe(n),e(i)})}catch(e){t.logger.error(e),i(`Unable to initialize DELWeb3DViewerComponent due to ${JSON.stringify(e)}`)}})}getEventHnd(){return this.vwrCtrl.getEventHnd()}getViewerTypesEnum(){return d}getViewerBehavior(){return this.vwrCtrl.getViewerBehavior()}async destroy(){this.vwrCtrl&&(this.vwrCtrl.destroy(),this.vwrCtrl=null),await super.destroy()}async clean(){await this.getViewerBehavior().empty(),await super.clean()}getFilterProxy(){return this.getComponentFromIdentifier(this.enopadViewerIdentifier).getBIController().getBIProxy()}getNGFUXID(){return this.getComponentFromIdentifier(this.enopadViewerIdentifier).getNGFUXID()}getRoots(){return this.getComponentFromIdentifier(this.enopadViewerIdentifier).getRoots()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.getEventHnd=this.getEventHnd.bind(this),this.publicAPI.getViewerBehavior=this.getViewerBehavior.bind(this),this.publicAPI.getViewerTypesEnum=this.getViewerTypesEnum.bind(this),this.publicAPI.getFilterProxy=this.getFilterProxy.bind(this),this.publicAPI.getNGFUXID=this.getNGFUXID.bind(this),this.publicAPI.getRoots=this.getRoots.bind(this),this.publicAPI}}});