define("DS/DMUBaseUIServices/DMUSlidePreferences",["DS/DMUBaseExperience/DMUContextManager"],function(e){"use strict";let t=[];return Object.freeze({getSlidePreferences:e=>{if(e&&e.context)for(let r=0;r<t.length;r++)if(t[r].context===e.context)return t[r].preferences},setSlidePreferences:r=>{if(r&&r.context&&r.preferences){let n=!0;for(let e=0;e<t.length;e++)if(t[e].context===r.context){let i=Object.keys(r.preferences);for(let n=0;n<i.length;n++)t[e].preferences[i[n]]=r.preferences[i[n]];n=!1}n&&t.push({context:r.context,preferences:r.preferences});let i=e.giveEventsController({viewer:r.context&&r.context.getViewer?r.context.getViewer():null});i&&i.fireEvent("onDMUSlidePreferencesChanged")}},removeSlidePreferences:e=>{if(e&&e.context)for(let r=0;r<t.length;r++)if(t[r].context===e.context){t.splice(r,1);break}}})}),define("DS/DMUBaseUIServices/DMUObjectsServices",["require","exports","DS/PADUtils/PADContext","DS/Visualization/ThreeJS_DS","DS/DMUBaseExperience/EXPManagerSet","DS/DMUBaseExperience/DMULinksManager"],function(e,t,r,n,i,a){"use strict";const o={0:{px:1,mm:.13},1:{px:2,mm:.35},2:{px:3,mm:.7},3:{px:4,mm:1},4:{px:5,mm:1.4},5:{px:6,mm:2},6:{px:7,mm:2.3},7:{px:8,mm:2.6},8:{px:16,mm:4},9:{px:32,mm:9},10:{px:64,mm:12}};class l{static getAbsolutePosition(e,t,n,o,l){let g="string"==typeof l?l:e.getAttribute("fPointedPageNumber"),s="number"==typeof l?l:e.getAttribute("sPointedElementID");if(g||s){e.setAlertFlag(!1);let t=i.getManager({name:"DMU2DSheetManager",context:r.get().getFrameWindow()});if(t){let e=t.getElementMatrix(g||s);if(e)return n.clone().applyMatrix4(e)}return e.setAlertFlag(!0),n}if(void 0!==o&&t){let r=e.getParent();if(r){let e=r.getAttribute("oLinksManager");if(e instanceof a){let r=e.getOccurrencePathElement(o);if(r)return t.clone().applyMatrix4(r.getWorldMatrix())}}}return n}static getRelativePosition(e,t){let a=e.getAttribute("fPointedPageNumber"),o=e.getAttribute("sPointedElementID");if(!a&&!o)return t;e.setAlertFlag(!1);let l=i.getManager({name:"DMU2DSheetManager",context:r.get().getFrameWindow()});if(!l||!l.isADocumentDisplayed())return t;let g=l.getElementMatrix(a||o);return g?t.clone().applyMatrix4((new n.Matrix4).getInverse(g)):(e.setAlertFlag(!0),t)}static getAbsoluteRotation(e,t){let n=e.getAttribute("fPointedPageNumber");if(!n)return t;let a=i.getManager({name:"DMU2DSheetManager",context:r.get().getFrameWindow()});if(!a||!a.isADocumentDisplayed())return t;let o=a.getPageRotation(n);return o?o+t:t}static getRelativeRotation(e,t){let n=e.getAttribute("fPointedPageNumber");if(!n)return t;let a=i.getManager({name:"DMU2DSheetManager",context:r.get().getFrameWindow()});if(!a||!a.isADocumentDisplayed())return t;let o=a.getPageRotation(n);return o?t-o:t}static getAbsolutePositionMatrix(e,t,r){if(void 0===r||!t)return;let n=e.getParent();if(n){let e=n.getAttribute("oLinksManager");if(e){let n=e.getOccurrencePathElement(r);if(n)return n.getWorldMatrix().clone().multiply(t)}}}static getPOIInformationFromPathElement(e){const t=r.get(),i=t.getController().getPOIPosition(e),a=t.getController().getPOILabel&&t.getController().getPOILabel(e),o=t.getController().getPOIRelatedPath&&t.getController().getPOIRelatedPath(e);return{position:i?new n.Vector3(i.x,i.y,i.z):void 0,label:a||void 0,relatedPath:o}}static getLineThickness(e,t="px"){return e in o?o[e][t]:void 0}static convertLineThickness(e,t){let r=l.getLineThicknessIndex(e,"mm"===t?"px":"mm");return r&&r in o?o[r][t]:void 0}static getLineThicknessIndex(e,t="px"){let r=Object.keys(o).find(r=>{if(o[parseInt(r)][t]===e)return!0});return r?parseInt(r):void 0}}return l});