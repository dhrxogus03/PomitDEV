define("DS/XSRCommonComponents/components/EditProp/XSpecProperties",["UWA/Core","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel","DS/XSRCommonComponents/utils/Constants","DS/XSRCommonComponents/utils/RequestUtil","DS/XSRCommonComponents/utils/Notification","DS/XSRCommonComponents/utils/Utils","DS/XSRCommonComponents/utils/TypeUtils","i18n!DS/XSRCommonComponents/assets/nls/XSRCommonComponents","css!DS/XSRCommonComponents/components/EditProp/XSpecProperties.css"],function(e,t,i,o,s,n,a,c,r,p){"use strict";var l={Change:i.FACET_CHANGE,Properties:i.FACET_PROPERTIES,Comments:i.FACET_SWYMCOMMENTS,Sharing:i.FACET_SHARING,History:i.FACET_GENERALHISTORY},d=function(){};return d.prototype.init=function(o){this.selectedItemID=o.id;var a=o.container;this.appCore=o.appCore,this.mfgSecurityContext=n.getSecurityContext().replace("ctx::","");var c=this,r=o.specModel;this.specModel=r;var d=!!o.readOnly&&o.readOnly,m=!!o.editMode&&o.editMode,u=o.execludeIDCard,C=[];if(o.facets)for(var f=o.facets.length,S=0;S<f;S++)if("Change"===o.facets[S]){if("Document"===this.specModel.options.grid["ds6w:type"])continue;C.push({id:i.FACET_CHANGE,options:{readOnly:!o.enableChangeRequired}})}else"Classifications"===o.facets[S]?C.push({require:"DS/ClassificationsFacet/ClassificationFacet",alwaysVisible:!1,facet:{name:"Classification",text:p.label_Classification,icon:"classification-book"},options:{securityContext:this.mfgSecurityContext}}):C.push({id:l[o.facets[S]]});else C.push(i.FACET_PROPERTIES),C.push(i.FACET_SWYMCOMMENTS),C.push(i.FACET_SHARING);c.container=e.createElement("div",{class:"xsr-properties-container"}),c.container.inject(a);var h=u?i.ONLY_EDIT_PROPERTIES:i.ALL,y=n.getSecurityContext().replace("ctx::",""),M={typeOfDisplay:h,selectionType:i.NO_SELECTION,facets:C,readOnly:d,extraNotif:!0,editMode:m,appId:s.XSR_APP_ID,events:{onNotification:function(e){c._notifyMessage(e.msg,e.eventID)}},context:{getSecurityContext:function(){return{SecurityContext:y}}}};c.editPropView=new t(M);var E=c.getPropModel(o);return c.editPropView.initDatas(E),c.editPropView.elements.container.inject(c.container),c.editPropView.elements.container.onResize(),c.editPropView},d.prototype._addCustomFacet=function(e,t){var i=!1;this.specModel&&this.specModel.getTypeActualName()&&(t==s.IDCARD||r.isRawMaterial(this.specModel.getTypeActualName())||r.isFormulatedProduct(this.specModel.getTypeActualName())?(r.isRawMaterial(this.specModel.getTypeActualName())||r.isFormulatedProduct(this.specModel.getTypeActualName()))&&(i=!1):i=!0),c.isPerformanceChar(this.specModel.getTypeActualName())?this.editPropView.addFacets([{require:"DS/ENOCharacteristicsApp/view/TestMethodFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"testMethods",icon:"molecule-candidate",text:p.label_TestMethod},options:{appContext:e,itemModel:this.specModel,itemId:this.selectedItemID,appId:s.XSR_APP_ID}}]):(this.specModel.getAttributeValue("isMEI")||this.editPropView.addFacets([{require:"DS/ENOXAlternateSubstitute/facets/AlternateFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"alternateFacet",icon:"exchange",text:p.label_Alternates},options:{appContext:e}}]),this.editPropView.addFacets([{require:"DS/DELPPWFacets/facets/ManufacturingIntentFacet",inheritance:!0,alwaysVisible:!0,services:["3DSpace"],actions:[{name:"Add",text:p.Add,icon:"fonticon fonticon-plus"}],content:null,facet:{name:"ManufactureIntent",icon:"factory",text:p.Manufacture_Facet_Title},options:{appContext:e,securityContext:this.mfgSecurityContext,immersiveFrame:e.immersiveFrame}},{require:"DS/ENOMadeFromUX/view/MBMFFacet",alwaysVisible:i,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"specsMadeFromFacet",icon:"part-made-from",text:p.label_MakeFrom},options:{appContext:e,itemModel:this.specModel,itemId:this.selectedItemID,appId:s.XSR_APP_ID}},{require:"DS/ClassificationsFacet/ClassificationFacet",alwaysVisible:!1,facet:{name:"Classification",text:p.label_Classification,icon:"classification-book"},options:{securityContext:this.mfgSecurityContext}}]))},d.prototype.getPropModel=function(e){var t=null,i=[];return i.push({metatype:e.metatype||"businessobject",objectId:e.id,tenant:n.getPlatformId(),source:s.SERVICE_3DSPACE_NAME}),(t=new o(i)).set("isTransient",!1),t.set("showSections",!1),i},d.prototype._notifyMessage=function(e,t){this.appCore&&!this.appCore.triptychManager.isRightPanelOpen()&&a.displayNotification({eventID:t,msg:e})},d.prototype.destroy=function(){},d});