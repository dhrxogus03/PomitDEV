define("DS/XSRCommonComponents/service/XSpecsActionsFactory",["UWA/Core","UWA/Class","DS/ENO6WPlugins/jQuery","DS/XSRCommonComponents/utils/Constants","text!DS/XSRCommonComponents/assets/config/actions.json","DS/XSRCommonComponents/utils/Notification","DS/XSRCommonComponents/utils/TypeUtils","i18n!DS/XSRCommonComponents/assets/nls/XSRCommonComponents"],function(t,e,n,a,i,o,s,d){"use strict";return e.singleton({init:function(t){this._parent(t),this._actionsMapping=JSON.parse(i),this._multiactionsMapping={};for(var e in this._actionsMapping){var n=this._actionsMapping[e];n.isAvailableOnMultiSelect&&(this._multiactionsMapping[e]=n)}},setOptions:function(t){this._modelEvents=t.modelEvents},fireAction:function(e,n){if(t.is(e)){var a=this[e.launcher];this.specNode=n,a.apply(this,[n])}return null},getInstanceData:function(t){for(var e=[],a=Array.isArray(t.data)?t.data:[t.data],i=0;i<a.length;i++){var o=a[i],s=o.getParentInstanceIds();if(s&&s.length>1)for(var d=0;d<s.length;d++){var c=s[d],m={};(m=n.extend(!0,{},o)).options.grid.instanceIds=[],m.options.grid.instanceIds.push(c),e.push(m)}else e.push(o)}return e},getParentChildCombo:function(t){var e=Array.isArray(t.data)?t.data:[t.data];if(null!=e&&e.length){for(var n=[],a=e.length,i=0;i<a;i++)for(var o=e[i],s=0;s<a;s++)if(i!==s)for(var d=e[s],c=d.getParent();c;)c===o&&n.push({parent:o,child:d}),c=c.getParent();return n}},getActionMetaData:function(e){return t.is(this._actionsMapping[e])?this._actionsMapping[e]:null},getAllActions:function(){return this._actionsMapping},getMultiSelActions:function(){return this._multiactionsMapping},launchVersionExplorer:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.VERSION_GRAPH_CMD,context:{item:t}}})},showMaturityGraph:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.MATURITY_GRAPH_CMD,context:{item:t}}})},launchDownloadPDF:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.DOWNLOAD_REPORT,context:{item:t}}})},launchDownloadDoc:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.DOWNLOAD_DOCUMENT,context:{item:t}}})},launchRegeneratePDF:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.REGENERATE_REPORT,context:{item:t}}})},launchManageFiles:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.MANAGE_FILES,context:{item:t}}})},openSpecReport:function(t){var e,n={};e=Array.isArray(t.data)?t.data[0]:t.data,n.itemPid=e.getID(),n.typeActual=e.getTypeActualName(),n.isMEI=e.getAttributeValue("isMEI"),this._modelEvents.publish({event:a.OPEN_SPECIFICATION_VIEW,data:n})},setPartNumber:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.SET_PART_NUMB,context:{item:t}}})},information:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.INFORMATION_CMD,context:{item:t}}})},openCompareWith:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.COMPARE_WITH_CMD,context:{item:t}}})},removeChild:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.REMOVE_CHILD_CMD,context:{item:t}}})},launchUPSUnparent:function(t){if(t.data.length&&void 0!==t.data[0].getMEIInterface&&t.data[0].getMEIInterface()||t.data&&t.data.currentTabKey===a.MEI_TAB)this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.REMOVE_CHILD_CMD,context:{item:{data:t.data}}}});else if(t.data.length&&t.data[0].getMadeFrom&&t.data[0].getMadeFrom()||t.data&&t.data.getMadeFrom&&t.data.getMadeFrom())this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.REMOVE_CHILD_CMD,context:{item:{data:t.data}}}});else{let e=this.getInstanceData(t);this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:"UPSAuthUnparent",context:{item:{data:e}}}})}},addExistingEngineeringItem:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:"addExisting",context:{item:t}}})},launchChangeOwnership:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.CHANGE_OWNER_CMD,context:{item:t}}})},openRelatedObjects:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.OPEN_RELATED_OBJECTS,context:{item:t}}})},openInformationWidget:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.OPEN_INFO_WIDGET,context:{item:t}}})},openAlternates:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.OPEN_ALTERNATES,context:{item:t}}})},launchDuplicateCmd:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.DUPLICATE_CMD,context:{item:t}}})},deleteItem:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.DELETE_ITEM_CMD,context:{item:t}}})},launchAdvancedFilter:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.FILTER_CMD,context:{item:t}}})},launchMultiOwnership:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.MULTI_OWNERSHIP_CMD,context:{item:t}}})},Subscribe:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.SUBSCRIBE_CMD,context:{item:t}}})},UnSubscribe:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.UNSUBSCRIBE_CMD,context:{item:t}}})},EditSubscribe:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.EDIT_SUBSCRIBE_CMD,context:{item:t}}})},MySubscriptions:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.MY_SUBSCRIPTIONS_CMD,context:{item:t}}})},CloseSpecViewer:function(){this._modelEvents.publish({event:a.WELCOMEPANEL_EVENT_EXPAND})},launchUPSAuthReorderProduct:function(t){!t||t.data instanceof Array||null==t.data.getTreeDocument()||t.data.getTreeDocument().setUseChangeTransactionMode(!1),this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.REORDER_CMD,context:{item:t}}})},launchUPSReplaceByLatestRevision:function(t){let e=this;if(e.getParentChildCombo(t).length>0)o.displayNotification({eventID:"warning",msg:d.Unsupported_Replace_Action});else{let n=this.getInstanceData(t);e._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.REPLACE_LATEST_REVISION,context:{item:n}}})}},launchUPSAuthReplaceByRevision:function(t){let e=this;if(e.getParentChildCombo(t).length>0)o.displayNotification({eventID:"warning",msg:d.Unsupported_Replace_Action});else{let n=this.getInstanceData(t);e._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.REPLACE_REVISION,context:{item:n}}})}},launchUPSAuthCut:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.CUT_CMD,context:{item:t}}})},launchUPSAuthCopy:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.COPY_CMD,context:{item:t}}})},launchUPSAuthPaste:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.PASTE_CMD,context:{item:t}}})},launchTestMethods:function(t){this._modelEvents.publish({event:a.EVENT_LAUNCH_COMMAND,data:{commandId:a.INFORMATION_CMD,context:{item:t}}})},addPerformanceCharacteristics:function(t){this._modelEvents.publish({event:a.EVENT_CREATE_PERF_CHAR,data:t.data})}})});