define("DS/XSRCommonComponents/facets/template/ReleaseSnapshotFacetView",["DS/WUXAutoComplete/AutoComplete","DS/XSRCommonComponents/utils/XInfraRequestUtil","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","i18n!DS/XSRCommonComponents/assets/nls/XSRCommonComponents"],function(e,t,l,a,n){"use strict";return class{constructor(e){this.selectedType=e.type,this.validateFacet=e.onViewChange}build(){var t=this;t.treeDoc=new l;var a=UWA.createElement("div",{class:"xsr-plmnew-container",id:"ReleaseSnapshotCont"}),o=UWA.createElement("div",{class:"xsr-plmnew-autocomplete-container"});o.inject(a);var r=UWA.createElement("div",{class:"xsr-plmnew-autocomplete-label"}),s=UWA.createElement("label",{id:"xsr-plmnew-label"});s.innerText=n.label_Template,s.inject(r);var c=UWA.createElement("div",{class:"xsr-attrMand"});c.innerText="*",c.inject(r),r.inject(o);var i=UWA.createElement("div",{class:"xsr-plmnew-autocomplete-line"});return this.templateField=new e({domId:"xsr-template-auto-complete",placeholder:n.placholder_template,multiSearchMode:!1,elementsTree:t.treeDoc,allowFreeInputFlag:!1,allowResetToUndefinedByUIFlag:!1}),this.templateField.inject(i),i.inject(o),this.templateField.addEventListener("change",function(e){t.validateFacet()}),this.loadTemplate(this.selectedType),a}loadTemplate(e){this.templateField.value=void 0;var l=this;new t({id:"getSpecTemplates"}).invoke({data:{specType:e}}).then(e=>{var t=e.response;l.treeDoc.prepareUpdate(),l.treeDoc.empty(),Object.keys(t).forEach(function(e){var a=l.createNode(t[e].labelItem,t[e].valueItem);l.treeDoc.addRoot(a)}),l.treeDoc.pushUpdate(),t&&t.length>0?l.templateField.placeholder=n.placholder_template:l.templateField.placeholder=n.NoTemplateResults}).catch(e=>{console.log(e),l.templateField.placeholder=n.NoTemplateResults})}getSelectedTemplate(){return this.templateField.value}createNode(e,t){return new a({label:e,value:t,grid:{}})}}});