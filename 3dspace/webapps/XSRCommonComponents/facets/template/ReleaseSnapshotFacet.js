define("DS/XSRCommonComponents/facets/template/ReleaseSnapshotFacet",["DS/ENONewWidget/ENONew/View/Facet/ENONewFacetBase","DS/XSRCommonComponents/facets/template/ReleaseSnapshotFacetView","DS/XSRCommonComponents/utils/XInfraRequestUtil","UWA/Class/Options","UWA/Class/Events","css!DS/XSRCommonComponents/facets/template/template.css"],function(e,t,n,i,s){"use strict";return e.extend(i,s,{name:"releaseSnapshotFacet",securityContext:null,init:function(e){var n=this,i=e;this._parent(e),this.elements.container=UWA.createElement("div",{class:"xsr-plmnew-mastercontainer",id:"ReleaseSnapshot"}),i.securityContext&&(this.securityContext=i.securityContext),this.listenToPublishedInfo(function(e,t){if("currentSecurityContext"===e){let e=t.value;n.securityContext=e}else if("currentObjectType"===e){let e=t.value;n.templateView.loadTemplate(e)}});this.templateView=new t({type:e.type,onViewChange:function(){n.templateView.getSelectedTemplate()}}),this.templateView.build().inject(this.elements.container),setTimeout(function(){},0)},getUI:function(e){return this.elements.container},plmNewContextProvider(){return this.securityContext},postCreation(e){let t=e[0].identifier,n=this.templateView.getSelectedTemplate();if(t&&n)return this.createSpecReport(t,n)},createSpecReport(e,t){var i={data:{itemPid:e,template:t}},s=new n({id:"SpecificationReport",securityContext:this.plmNewContextProvider()});return new Promise(function(e,t){s.create(i).then(function(t){e({name:"releaseSnapshotFacet"})}).catch(function(e){console.log(e),t({name:"releaseSnapshotFacet"})})})},destroy(){this.options.onDestroyCallback&&this.options.onDestroyCallback(this.options.tabId),this._parent()}})});