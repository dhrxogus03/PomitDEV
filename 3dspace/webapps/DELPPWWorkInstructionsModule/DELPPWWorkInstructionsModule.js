define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanEditUI",["UWA/Core"],function(e){"use strict";return function(t,a,n,r,o,i,l){const u={V_RPPValue:{minAttr:"V_RPPMinControlValue",maxAttr:"V_RPPMaxControlValue"},V_RPPMinControlValue:{minAttr:"V_RPPMinValue",maxAttr:"V_RPPMaxValue"},V_RPPMaxControlValue:{minAttr:"V_RPPMinValue",maxAttr:"V_RPPMaxValue"},V_RPPMinValue:{minAttr:"V_RPPRscMinValue",maxAttr:"V_RPPRscMaxValue"},V_RPPMaxValue:{minAttr:"V_RPPRscMinValue",maxAttr:"V_RPPRscMaxValue"}},s={V_RPPMinControlValue:{attr:"V_RPPMinValue"},V_RPPMaxControlValue:{attr:"V_RPPMaxValue"}};var c,d,g,P,f,m,V,v,R,D,p,C,I,h,b,M,L,y,N,S,w,_=a.getComponent("Button"),E="PLMSpecifyHowToResourcePlanCnx_Custo",A=["V_RPPMinValue","V_RPPMaxValue","V_RPPRscMinValue","V_RPPRscMaxValue","V_RPPMinControlValue","V_RPPMaxControlValue"],T="";return h=function(t,a){var n,r,i,l,u,s,c,d=[],g=a,P=[],m={};return n=o.getObjectAndAttributeInfos(t),D&&(g=f.get("V_RPPMagnitude"),i=f.get("V_RPPUnit"),l=o.getNLSForUnit(g,i)),n.forEach(function(a,n){var o=e.clone(a);switch(D&&(o.objectToBeModified=f),e.is(t[n].displayType)&&(o.displayType=t[n].displayType),o.dataIndex){case"V_RPPMagnitude":D?o.readOnly=!0:o.value=g;break;case"V_PossibleValues":D&&(u=f.get("V_RPPMagnitude"),r="DELExtTargetValues"+u+".V_PossibleValues",(s=e.is(f.get(r))?f.get(r):f.get("V_PossibleValues")).forEach(t=>{m.Name=t.toString(),m.NLS=t.toString(),P.push(e.clone(m))}),o.value=s,o.attributeInfo.AuthorizedValues=P,p=f.get("V_RPPMode")),o.attributeInfo.HasRangeDefined="Yes",o.attributeInfo.Protection=2,o.attributeInfo.Type=g,o.attributeInfo.MultiValuated="Yes",o.attributeInfo.MaxLength=0,"SET"===p&&(o.attributeInfo.MultiValuated="No");break;case"V_RPPValue":o.attributeInfo.Magnitude=g,o.attributeInfo.ManipulationUnit=e.is(i)?i:"",o.attributeInfo.Type="Double",o.attributeInfo.MultiValuated="No",o.value=parseFloat(f.get(o.dataIndex));break;case"V_RPPMinValue":case"V_RPPMaxValue":case"V_RPPRscMinValue":case"V_RPPRscMaxValue":case"V_RPPMinControlValue":case"V_RPPMaxControlValue":o.attributeInfo.unit=e.is(l)?l:"",o.attributeInfo.Type="Double",o.attributeInfo.MultiValuated="No",D&&(c="DELExtTargetValues"+g+"."+o.dataIndex,o.value={value:e.is(f.get(c))?f.get(c):f.get(o.dataIndex),inclusive:f.get(o.dataIndex+"_Inclusive")});break;case"V_RPPRichText":o.attributeInfo.MultiValuated="No",o.value=f.get(o.dataIndex)}d.push(o)}),d},I=function(t){var n={},r={};n.attribute=m,e.is(t)&&e.is(t.formStyle)&&(r.formStyle=t.formStyle),r.section=n,g=a.createElement("div",{class:"section-container"}),P=a.create("FormUI",{sections:r,renderTo:g,headerAccordean:!1})},y=function(){var a,n=M(),r=n.result,i=n.message,u={};e.is(r)&&r?(a=L(),u.resourceParameterPlanPID=V,u.resourceParameterRowPID=v,u.resourcePID=N,u.resourceParameterListPID=S,u.resourceParameterPID=w,u.rppPath=e.is(l.getSelectionsWithPaths()[0][0])?l.getSelectionsWithPaths()[0][0].path:"",c.close(),o.updateResourceParameterRow(u,a),e.is(i)&&""!==i&&null!==i&&t.warn(i)):c.buttons.Ok.disabled=!1},C=function(t,n){t=t||{},d=a.createElement("div",{class:"ResourceParameterRow-Dialog"}),(c=a.create("Dialog",{title:t.title,domId:"ResourceParameterRow-Dialog",content:d,resizableFlag:!0,modalFlag:!0,width:560,minWidth:290,position:{my:"center",at:"center"},buttons:{Cancel:new _({onClick:function(){c.close()}}),Ok:new _({disabled:!1,emphasize:"primary",onClick:n})}})).close=function(){this.destroy(),f=null,m=null,V=null,v=null,e.is(P)&&P.destroy(),e.is(d)&&d.destroy(),c=null}},M=function(){var t,a,n,r=P.validate(),o=function(t,a,n,r){var o=[],l={valid:!0,values:null,message:""};if(0===a.value.length)return l;if(Number.isNaN(Number(a.value)))return l.valid=!1,l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:r}),l;if(e.is(t.inclusive)&&e.is(t.value)){if("NotSet"!==t.inclusive&&String(t.value).length>0){if(o=Number(t.value),Number.isNaN(o))return l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),l.valid=!1,l;o=[o]}}else t&&(o=Array.isArray(t)?t:[t]);return o.length>0&&(l.values=[],l.valid=o.every(function(e,t){return(e=String(e).trim()).length>0&&isNaN(e)?(l.values=null,l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),!1):(l.values.push(Number(e)),!0)})),l},l=function(a,n){var r,l=i.getNLSValue(E+"."+a),u=i.getNLSValue(E+"."+n),s=e.clone(t[E+"."+a]),c=e.clone(t[E+"."+n]),d={valid:!0,message:""},g=f.get("V_RPPMode");if(s=e.is(s)?s:"","NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=o(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var P=0;P<d.values.length;P++)if(r=d.values[P],"Included"===c.inclusive&&r>c.value||"Included"!==c.inclusive&&r>=c.value){"GET"===g?(d.valid=!0,d.message=i.getNLSValue("RPPRow.GetOutofBound.Error")):(d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u}));break}return d},d=function(a,n,r){var u={valid:!0};return(u=function(a,n){var r,l=i.getNLSValue(E+"."+a),u=i.getNLSValue(E+"."+n),s=e.clone(t[E+"."+a]),c=e.clone(t[E+"."+n]),d={valid:!0,message:""},g=f.get("V_RPPMode");if(s=e.is(s)?s:"","NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=o(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var P=0;P<d.values.length;P++)if(r=d.values[P],"Included"===c.inclusive&&r<c.value||"Included"!==c.inclusive&&r<=c.value){"GET"===g?(d.valid=!0,d.message=i.getNLSValue("RPPRow.GetOutofBound.Error")):(d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u}));break}return d}(a,n)).valid&&""===u.message?u=l(a,r):u.valid&&""!==u.message&&(""===T&&(T=u.message),(u=l(a,r)).message=T),u};return r.result&&(t=P.getValues(),r.result=m.every(function(o){var l,c,g=o.attributeInfo.Name,P={valid:!0};switch(g){case"V_RPPValue":l=u[g].minAttr,c=u[g].maxAttr,""===t[E+"."+l].value&&""===t[E+"."+(l="V_RPPMinValue")].value&&(l="V_RPPRscMinValue"),""===t[E+"."+c].value&&""===t[E+"."+(c="V_RPPMaxValue")].value&&(c="V_RPPRscMaxValue"),P=d(g,l,c);break;case"V_RPPMinValue":case"V_RPPMaxValue":""===t[E+"."+g].value&&"NotSet"!==t[E+"."+g].inclusive?(P.valid=!1,a=i.getNLSValue(E+"."+g),P.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:a})):P=d(g,u[g].minAttr,u[g].maxAttr);break;case"V_RPPMinControlValue":case"V_RPPMaxControlValue":""===t[E+"."+g].value&&"NotSet"!==t[E+"."+g].inclusive?(P.valid=!1,a=i.getNLSValue(E+"."+g),P.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:a})):""===t[E+"."+s[g].attr].value&&"NotSet"!==t[E+"."+g].inclusive?(P.valid=!1,n=i.getNLSValue(E+"."+g),a=i.getNLSValue(E+"."+s[g].attr),P.message=i.getNLSValue("RPPRow.MissingValueForControl.Error",{attr:a,ctrlAttr:n})):P=d(g,u[g].minAttr,u[g].maxAttr)}return e.is(P.message)&&""!==P.message&&(r.message=P.message),P.valid})),e.is(r.message)&&""!==r.message&&(r.result||c.error(r.message)),r},L=function(){var t,a={};return t=P.getValues(),m.forEach(function(n){var r,o=n.attributeInfo.Name,i=n.attributeInfo.FullName;e.is(t[i])&&(r=t[i],A.includes(o)?(a[o]=""===r.value?"":String(r.value),a[o+"_Inclusive"]=r.inclusive):"V_PossibleValues"===o?r&&(a[o="SET"===p?"V_RPPValue":o]=Array.isArray(r)?r:r.split(","),a[o]=a[o].map(function(e){return String(e)})):"V_RPPValue"===o&&e.is(r)?e.is(parseFloat(r))?a[o]=parseFloat(r):a[o]=null:a[o]=Array.isArray(r)?r:String(r))}),a},b=function(t){var a,o,l,u,s,c,P,p;e.is(t)&&(D=!0,f=t,a=r.getNodeModel(f.get("PID"),!0),V=a.options.resourceParameterPID,v=f.get("PID"),N=f.get("resourceID"),S=f.get("V_ParamListPIDOnResource"),w=f.get("V_ParamPIDOnParamList"),l=n.getReferenceModel(V),u="SET"===t.get("V_RPPMode")?"ResourceParametersMgmtDialog.EditDialogSET":"ResourceParametersMgmtDialog.EditDialogGET",s={title:i.getNLSValue(u)},c="DELExtTargetValues"+t.get("V_RPPMagnitude")+".V_PossibleValues",P=e.is(t.get(c))?t.get(c):t.get("V_PossibleValues"),p=e.is(P)?"Arr":"",o=l.get("type")+t.get("V_RPPMode")+p,m=h(R[o].Attribute),I({formStyle:R[o].formStyle}),C(s,y),g.inject(d))},{init:function(t){var a=e.is(t)?t:{};e.is(a.editFormConfig)&&(R=a.editFormConfig)},editResourceParameterRow:function(e){b(e)}}}}),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanDialogUI",["UWA/Core","DS/DELWebInfrastructureControls/DELWebResourceParameter/DELWebResourceParameterModel","text!DS/DELPPWWorkInstructionsModule/assets/json/ResourceParamRowTLVOptions.json"],function(e,t,a){"use strict";return function(n,r,o,i,l){var u,s,c,d,g,P,f,m,V,v=r.getComponent("Button"),R=r.getComponent("DataGridView"),D=r.getComponent("Element"),p=r.getComponent("WUXFrameWindowsManager"),C=r.getComponent("TreeDocument"),I=r.getComponent("TreeNodeModel"),h="SET",b=!1,M=[],L=new C,y=null,N=null,S=e.Json.decode(a);return s=function(e){var t,a=p.getFrameWindow(n.getAppContext()).getImmersiveFrame();y=new D("div",{class:"ResourceParameterRow-Panel-Container"}),(N=r.create("Dialog",{domId:"ResourceParameterDialogUI-Dialog-Identifier",title:e.title,identifier:"ResourceParameterDialogUI-Dialog-Identifier",immersiveFrame:a,content:y,width:500,height:315,modalFlag:!0,position:{my:"center",at:"center"},resizableFlag:!0,buttons:{Cancel:new v({onClick:function(){V(),N.close()}}),Ok:new v({disabled:!1,emphasize:"primary",onClick:function(){(t=L.getSelectedNodes()).length>0&&d(t),V(),N.close()}})}})).close=function(){N.hide(),V()}},f=function(){var t=[];b=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,t="SET"===h?M.filter(e=>"DELResourcePrmINPUT"===e.plmObjectType):"GET"===h&&b?M.filter(e=>"DELResourcePrmOUTPUT"===e.plmObjectType):M,L.prepareUpdate(),L.empty(),t.forEach(function(e){m(e)}),L.pushUpdate()},V=function(){L.empty(),h="SET",b=!1},g=function(t){var a,n,r,o,l,u,s,c=S.DELResourceParameterRow,d=c.columnConfig.Columns.Column,g=c.toolbarOptions,m=null,V=null,v={semantics:{}},p={};t.forEach(t=>{p=e.extend(p,{[t.get("PID")]:t.get("PLMEntity.V_Name")})}),v.semantics.possibleValues=p,d.forEach((e,t,a)=>{a[t].text=i.getNLSValue(e.dicoType+"."+e.dataIndex)}),(m=new D("div",{class:"ResourceParameterRow-Toolbar-Container"})).inject(y),(V=new D("div",{class:"ResourceParameterRow-TLV-Container",id:"ResourceParameterRowDGView"})).inject(y),a=new R({rowSelection:"multiple",treeDocument:L,cellSelection:"none",enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},columns:d}),g.entries.forEach(e=>{switch(e.id){case"resource":e.dataElements.label=i.getNLSValue("ResourceParameterCreateUI.Resources");break;case"RPPPreference":e.dataElements.label=i.getNLSValue("ResourceParameterCreateUI.Preference")}}),s=a.setToolbar(JSON.stringify(g)),m.appendChild(s.getContent()),a.getContent().inject(V),r=s.getNodeModelByID("set"),o=s.getNodeModelByID("get"),n=s.getNodeModelByID("resource"),l=s.getNodeModelByID("RPPPreference"),r.setLabel(i.getNLSValue("ResourceParameterCreateUI.Set")),o.setLabel(i.getNLSValue("ResourceParameterCreateUI.Get")),n.updateOptions({grid:v}),(u=function(t){var a=e.is(t)?t:Object.keys(p)[0];new Promise((e,t)=>{P(a,e,t)}).then(function(e){var t,n={};for(let r in e){t=e[r];for(let e in t)t[e].resourceListID=r,t[e].resourceID=a;n={...n,...e[r]}}(M=Object.keys(n).map(e=>n[e])).length>0&&f()},function(){M=[],L.empty()})})(),o.onAttributeChange(function(t){!0===t.data.changedAttributeValue?(h="GET",b=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,l.options.grid.data=b,l.updateOptions({disabled:!1}),r.options.grid.data=!1):(l.updateOptions({disabled:!0}),r.options.grid.data=!1),r.updateOptions(),M.length>0&&f()}),r.onAttributeChange(function(t){!0===t.data.changedAttributeValue?(h="SET",b=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,l.options.grid.data=b,l.updateOptions({disabled:!0}),o.options.grid.data=!1):(l.updateOptions({disabled:!0}),o.options.grid.data=!1),o.updateOptions(),M.length>0&&f()}),n.onAttributeChange(function(e){u(e.data.changedAttributeValue)}),l.onAttributeChange(function(e){widget.addPreference({name:"toolBarGETPref",type:"hidden",defaultValue:e.data.changedAttributeValue}),f()})},c=function(e){var t={title:i.getNLSValue("ResourceParameters.AddDialog")};s(t),g(e),N.show()},d=function(t){var a=[],n={};n.rppPath=e.is(l.getSelectionsWithPaths()[0][0])?l.getSelectionsWithPaths()[0][0].path:"",t.forEach(e=>{a.push(e._options.grid)}),N.close(),o.createResourceParameterRow(u,a,n)},m=function(t){var a,n=t.parameter_type,r=e.is(t.units)?t.units:"",o=i.getNLSForUnit(n,r),l=t.minLimit,u=t.maxLimit,s=e.is(l)?"Included"===l?"≤":"<":"",c=e.is(u)?"Included"===u?"≤":"<":"";a=new I({label:"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle",grid:{V_RPPTitle:t.V_Name,V_RPPMode:h,V_RPPMagnitude:e.is(t.parameter_type)?t.parameter_type:"",V_RPPValue:e.is(t.V_Values)?Array.isArray(t.V_Values)?null:t.V_Values:null,V_PossibleValues:Array.isArray(t.V_Values)?t.V_Values.map(String):"",V_RPPMinValue:"",V_RPPMaxValue:"",V_RPPMinControlValue:"",V_RPPRscMinValue:e.is(t.minValue)?String(t.minValue):"",V_RPPRscMaxValue:e.is(t.minValue)?String(t.minValue):"",V_RPPMaxControlValue:"",V_MinValue_disp:e.is(t.minValue)?t.minValue+" "+o+" "+s:"",V_MaxValue_disp:e.is(t.maxValue)?c+" "+t.maxValue+" "+o:"",unit:o,V_RPPUnit:r,V_RPPMinValue_Inclusive:"",V_RPPMaxValue_Inclusive:"",V_RPPMinControlValue_Inclusive:"",V_RPPMaxControlValue_Inclusive:"",V_ParamListPIDOnResource:t.resourceListID,V_ParamPIDOnParamList:t.physicalid,V_RPPRichText:"",resourceID:t.resourceID}}),L.addRoot(a)},P=function(a,r,o){var i={blnForceRefresh:!0,physicalid:a},l=[];t.getResourceParameterLists(i).then(function(t){if(e.is(t))for(let e in t)l.push({physicalid:t[e].resourceParameterList.physicalid})}).finally(()=>{t.getResourceParametersForList({QueryList:l,blnForceRefresh:!0}).then(function(e){r(e)},e=>{n.debug(e),o()})})},{createResourceParameterPlanRow:function(t,a){e.is(t)&&(u=t.id,c(a))}}}}),define("DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectMgmtUI",["UWA/Core","text!DS/DELPPWWorkInstructionsModule/assets/json/DataCollectTLVOptions.json"],function(e,t){"use strict";return function(a,n,r,o,i,l,u){var s,c,d,g,P,f,m,V,v,R,D,p=n.getComponent("Element"),C=n.getComponent("WUXFrameWindowsManager"),I=null,h=null,b=[],M=null,L=null,y=null,N=null,S=null,w=null;return t=e.Json.decode(t),s=function(t,a){var n,r,o=a.get("PLMEntity.V_Name"),i=a.get("PID"),u=!0;e.is(y)&&y.visibleFlag&&(I===t?(c(),u=!1):y.close()),h=i,n="DataCollectMgmtUI."+(I=t)+".Panel.Title",r=l.getNLSValue(n,{dcTitle:o}),u?(g(r),P(),y.show()):y.title=r},c=function(){i.emptyNodeModel(),b.forEach(function(e){r.removeReference(e.get("PID"),{silent:!0})}),I=null,h=null,b=[]},d=function(){y=null,N=null,S=null,w=null,i.removeEventListener(M),i.removeEventListener(L)},g=function(t){var r=C.getFrameWindow(a.getAppContext()).getImmersiveFrame();N=new p("div",{class:"DataCollectPlan-Panel-Container"}),(y=n.create("Panel",{domId:"DataCollectMgmtUI-Dialog-Identifier",title:e.is(t)?t:l.getNLSValue("DataCollectMgmtUI.Panel.DefaultTitle"),identifier:"DataCollectMgmtUI-Dialog-Identifier",immersiveFrame:r,content:N,width:600,height:315,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){y.hide(),c(),d()}},P=function(){var a=t[I];a=a||{},(S=new p("div",{class:"DataCollectPlan-Toolbar-Container"})).inject(N),(w=new p("div",{class:"DataCollectPlan-TLV-Container",id:"DataCollectDGView"})).inject(N),a=e.extend(a,{treeDocument:i.getWUXNodeModel(),treeListViewContainer:w,toolbarContainer:S,dataGridViewOptions:{toolbarOptions:{actionHandler:V}}},!0),o.createTreeListView(a)},D=function(e){var t=u.getNodeOptions(e);t.dataCollectPID=h,i.addNodeModel(t)},f=function(){i.emptyNodeModel(),i.prepareUpdate(),b.forEach(function(e){D(e)}),m(),i.pushUpdate(),M=i.addEventListener("select",v),L=i.addEventListener("unselect",v)},m=function(){var e=i.getTreeDocument(),t=i.getRootNodes();i.prepareUpdate(),t.sort(function(e,t){return e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")}).forEach(function(t,a){e.addRoot(t,a)}),i.pushUpdate()},V=function(e){var t;switch(e){case"DCPAddRow":a.notify("createDataCollectRow",h);break;case"DCPEditRow":t=i.getSelectedNodes()[0].getReferencePID(),a.notify("editDataCollectRow",r.getReferenceModel(t));break;case"DCPDeleteRow":R()}},v=function(){var e=i.getSelectedNodes(),t=["DCPAddRow"];1===e.length?t=t.concat(["DCPEditRow","DCPDeleteRow"]):e.length>1&&t.push("DCPDeleteRow"),o.enableToolBarItems(t)},R=function(){var t=i.getSelectedNodes();e.is(t)&&t.forEach(function(t){u.deleteDataCollectRow(h,t.getReferencePID(),{onComplete:function(n){e.is(n)&&n===t.getReferencePID()?(i.removeNode(t),a.info(l.getNLSValue("DataCollectMgmtUI.DCRowDelete.Success"))):a.warn(l.getNLSValue("DataCollectMgmtUI.DCRowDelete.Failure"))},onFailure:function(){a.warn(l.getNLSValue("DataCollectMgmtUI.DCRowDelete.Failure"))}})})},{init:function(t){var n,r=t.get("type"),o=t.get("PID");e.is(r)&&e.is(r)?(u.isDataCollectCheckList(r)?n="DELWkiDataCollectChecklistReference":u.isDataCollectPlan(r)&&(n="DELWkiDataCollectPlanReference"),e.is(n)?u.fetchDataCollectAttrInfos(function(){s(n,t),u.getDataCollectRows(o,{onComplete:function(e){b=e,f()},onFailure:function(){a.warn(l.getNLSValue("DataCollectMgmtUI.CouldntFetchRows"))}})}):a.warn(l.getNLSValue("DataCollectMgmtUI.NotDataCollectType"))):a.warn(l.getNLSValue("DataCollectMgmtUI.InvalidModel"))},isActive:function(){return e.is(y)&&y.visibleFlag},addDataCollectRow:function(e){D(e)},deleteDataCollectRow:function(){R()},onUpdateDataCollectRow:function(e){var t,a=e.get("type"),n=e.get("PID");"PLMSpecifyHowToCollectDataCnx"===a&&e.hasChanged()&&(t=u.getNodeOptions(e),i.updateNodeOptions(n,t),e.hasChanged("V_TreeOrder")&&m())},onUpdateDataCollect:function(e){var t,a;e.get("PID")===h&&e.hasChanged("PLMEntity.V_Name")&&(t="DataCollectMgmtUI."+I+".Panel.Title",a=l.getNLSValue(t,{dcTitle:e.get("PLMEntity.V_Name")}),y.title=a)},getDataCollectPID:function(){return h},destroy:function(e){y.close()}}}}),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanMgmtUI",["UWA/Core","DS/DELWebInfrastructureControls/DELWebResourceParameter/DELWebResourceParameterModel","text!DS/DELPPWWorkInstructionsModule/assets/json/ResourceParamPlanTLVOptions.json"],function(e,t,a){"use strict";return function(n,r,o,i,l,u,s,c,d){var g,P,f,m,V,v,R,D,p,C,I,h,b,M=r.getComponent("Element"),L=r.getComponent("WUXFrameWindowsManager"),y=null,N=null,S=[],w=null,_=null,E=null,A=null,T=null,x=null,U=e.Json.decode(a);return g=function(t,a){var n,r,o=a.get("PLMEntity.V_Name"),i=a.get("PID"),s=!0;e.is(E)&&E.visibleFlag&&(y===t?(P(),s=!1):E.close()),N=i,n="ResourceParamaterPlanMgmtUI."+(y=t)+".Panel.Title",r=u.getNLSValue(n),s?(m(r),V(o),E.show()):E.title=r,w=l.addEventListener("select",p),_=l.addEventListener("unselect",p)},P=function(){l.emptyNodeModel(),o.getReferenceModel(N).state=!1,y=null,N=null,S=[]},f=function(){E=null,A=null,T=null,x=null,l.removeEventListener(w),l.removeEventListener(_)},m=function(t){var a=L.getFrameWindow(n.getAppContext()).getImmersiveFrame();A=new M("div",{class:"ResourceParameterPlan-Panel-Container"}),(E=r.create("Dialog",{domId:"ResourceParameterMgmtUI-Dialog-Identifier",title:e.is(t)?t:u.getNLSValue("ResourceParametersMgmtUI.Panel.DefaultTitle"),identifier:"ResourceParameterMgmtUI-Dialog-Identifier",immersiveFrame:a,content:A,width:500,height:315,modalFlag:!0,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){E.hide(),P(),f(),n.notify("editResourceParameterPlan",{state:!1})}},V=function(t){var a=U[y];a.dataGridViewOptions.toolbarOptions.items[0].value=t,a=a||{},(T=new M("div",{class:"ResourceParameterPlan-Toolbar-Container"})).inject(A),(x=new M("div",{class:"ResourceParameterPlan-TLV-Container",id:"ResourceParameterDGView"})).inject(A),a=e.extend(a,{treeDocument:l.getWUXNodeModel(),treeListViewContainer:x,toolbarContainer:T,dataGridViewOptions:{toolbarOptions:{actionHandler:D}}},!0),i.createTreeListView(a),C=i.getToolBarOption(),(I=C.getNodeModelByID("RPPTitle")).onAttributeChange(function(t){var a,n;a=t.data.changedAttributeValue,(n=s.getObjectAndAttributeInfos({name:"PLMEntity.V_Name"})[0]).objectToBeModified=o.getReferenceModel(N),n.instOrRef=e.is(n.objectToBeModified)?"reference":"instance",o.updateModelAttribute(N,n,a)})},b=function(e){var t;(t=s.getNodeOptions(e)).resourceParameterPID=N,l.addNodeModel(t)},v=function(){l.emptyNodeModel(),l.prepareUpdate(),S.forEach(function(e){b(e.toJSON())}),R(),l.pushUpdate()},R=function(){var e=l.getTreeDocument(),t=l.getRootNodes();l.prepareUpdate(),t.sort(function(e,t){return e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")}).forEach(function(t,a){e.addRoot(t,a)}),l.pushUpdate()},D=function(e){var t;switch(e){case"RPPAddRow":n.notify("createResourceParameterRow",o.getReferenceModel(N));break;case"RPPEditRow":t=l.getSelectedNodes()[0].getReferencePID(),n.notify("editResourceParameteRow",o.getReferenceModel(t));break;case"RPPDeleteRow":h()}},p=function(){var e=l.getSelectedNodes(),t=[];0===e.length?t=["RPPAddRow","RPPTitle"]:1===e.length?(t=["RPPEditRow","RPPDeleteRow","RPPTitle"],""!==e[0].getAttributeValue("PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle").iconPath&&(t=["RPPDeleteRow","RPPTitle"])):e.length>1&&(t=["RPPDeleteRow","RPPTitle"]),i.enableToolBarItems(t)},h=function(){var t=l.getSelectedNodes();e.is(t)&&t.forEach(function(t){s.deleteResourceParameterRows(N,t.getReferencePID(),{onComplete:function(a){e.is(a)&&a===t.getReferencePID()?(l.removeNode(t),n.info(u.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Success"))):n.warn(u.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Failure"))},onFailure:function(){n.warn(u.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Failure"))}})})},{init:function(a){var r=a.get("type"),i=a.get("PID");e.is(r)?s.fetchRPPAttrInfos(function(){var l,P,f,m,V,R=[],D=["CapableResourcesStructureLink","DELAsmProcessCanUseCnx","SecondaryCandidateResourceLink"],p={resourceRefs:[],resourceParameterListIds:[],resourceParameterListObj:{}},C=[];if(g(r,a),(l=c.getSelectionsWithPaths()[0][0].path).length>1)for(let e=l.length-1;e>=0;e--)P=o.getInstance(l[e]),(o.isOperation(P)||"DELLmiWorkPlanSystemInstance"===P.get("type"))&&R.push(P.get("isInstanceOf")),0===e&&"DELLmiWorkPlanSystemReference"===(m=o.getReferenceModel(P.get("isAggregatedBy"))).get("type")&&R.push(m.id);else 1===l.length&&(f=o.getInstance(l[0]),m=o.getReferenceModel(f.get("isAggregatedBy")),(o.isOperation(m)||"DELLmiWorkPlanSystemReference"===m.get("type"))&&R.push(m.id));R.forEach(e=>{d.getConnectedObjects(e,l,{relationTypes:D}).forEach(e=>{p.resourceRefs.push(e)})}),p.rppPath=e.is(c.getSelectionsWithPaths()[0][0])?c.getSelectionsWithPaths()[0][0].path:"",p.resourceRefs.forEach(a=>{V=new Promise((n,r)=>{var o=a;t.getResourceParameterLists({blnForceRefresh:!0,physicalid:o}).then(function(t){e.is(t)&&(p.resourceParameterListIds=p.resourceParameterListIds.concat(Object.keys(t)),p.resourceParameterListObj[o]=Object.keys(t)),n()})}),C.push(V)}),Promise.all(C).then(function(){s.getResourceParameterRows(i,p,{onComplete:function(e){S=e,v()},onFailure:function(){n.warn(u.getNLSValue("ResourceParametersMgmtUI.CouldntFetchRows"))}})},function(){p.resourceParameterListIds=[]})}):n.warn(u.getNLSValue("ResourceParametersMgmtUI.NotResourceParameterType"))},isActive:function(){return e.is(E)&&E.visibleFlag},addResourceParameterRow:function(e){b(e)},deleteResourceParameterRow:function(){h()},onUpdateResourceParameterRow:function(e){var t,a=e.get("PID");e.hasChanged()&&(t=s.getNodeOptions(e.toJSON()),l.updateNodeOptions(a,t),e.hasChanged("V_TreeOrder")&&R())},onUpdateResourceParameter:function(e){var t,a,n={};e.get("PID")===N&&e.hasChanged("PLMEntity.V_Name")&&(t="ResourceParamaterPlanMgmtUI."+y+".Panel.Title",a=u.getNLSValue(t,{rppTitle:e.get("PLMEntity.V_Name")}),E.title=a,n.data=e.get("PLMEntity.V_Name"),I.updateOptions({grid:n}))},getResourceParameterPID:function(){return N},destroy:function(){E.close()}}}}),define("DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectDialogUI",["UWA/Core"],function(e,t){"use strict";return function(t,a,n,r,o,i){var l,u,s,c,d,g,P,f,m,V,v,R,D,p,C,I,h,b,M,L,y,N,S,w,_=a.getComponent("Button"),E="PLMSpecifyHowToCollectDataCnx_Custo",A=["V_MinValue","V_MinControlValue","V_MaxValue","V_MaxControlValue"];return R=function(a){var n=e.clone(a.Units),r=t.getPreferenceValue(a.Name);if(e.is(r))for(let e=0;e<n.length;e++)if(n[e].Name===r){let t=n[0];n[0]=n[e],n[e]=t;break}return n},C=function(t,a){var n,r,i,l=[],u=[],s=a,c=function(t,a){var r,o="";return"Real"===s?r=t+n.Name:e.is(s)&&(r=t+s),e.is(r)&&v&&(o=d.get(r+"."+a)),o};return i=o.getObjectAndAttributeInfos(t),v&&(s=d.get("V_DCType")),i.forEach(function(a,i){var P,f,m,V=e.clone(a),D=!0;switch(v&&(V.objectToBeModified=d),e.is(t[i].displayType)&&(V.displayType=t[i].displayType),V.dataIndex){case"V_DCType":v?V.readOnly=!0:V.value=s,V.attributeInfo.onChange=b.bind(null,V.attributeInfo);break;case"V_DCMagnitude":V.attributeInfo.AuthorizedValues=o.getDimensions(),V.attributeInfo.HasRangeDefined="Yes",f=V.attributeInfo.AuthorizedValues,m=v?d.get("V_DCMagnitude"):"LENGTH","Real"===s?(n=f.find(function(e){return e.Name===m}),e.is(n)&&(l=R(n),r=v?l.find(function(e){return e.Name===d.get("V_DCUnit")}):l[0])):r="",n&&(V.value=n.NLS),v&&(V.readOnly=!0),V.attributeInfo.onChange=M;break;case"V_PossibleValues":v&&(V.value=d.get("DELExtTargetValues"+s+"."+V.dataIndex)),"Boolean"===s?(V.attributeInfo.HasRangeDefined="Yes",v&&(V.value=d.get("DELExtTargetValuesText."+V.dataIndex),V.value=Array.isArray(V.value)?V.value.join(","):V.value)):V.value=e.is(V.value)&&"NULL"!==V.value?V.value:[];break;case"V_DCUnit":e.is(r)&&(V.value=r.NLSName,g=r.Name),V.attributeInfo.onChange=I,V.attributeInfo.AuthorizedValues=l.map(function(t){var a=e.clone(t);return a.NLS=a.NLSName,a});break;case"V_Value":"Real"===s&&e.is(r)&&(V.attributeInfo.Magnitude=n.Name,V.attributeInfo.ManipulationUnit=r.Name,V.attributeInfo.pattern="^[-+]?([1-9][0-9]*)|(0)$"),V.value=c("DELExtTargetValues",V.dataIndex);break;case"V_MinValue":case"V_MaxValue":V.attributeInfo.unit=e.is(r)?r.NLSName:"",V.attributeInfo.Type="Real"===s?"Double":"Integer",v&&(V.value={value:c("DELExtTargetValues",V.dataIndex),inclusive:d.get(V.dataIndex+"_Inclusive")});break;case"V_MinControlValue":case"V_MaxControlValue":V.attributeInfo.unit=e.is(r)?r.NLSName:"",V.attributeInfo.Type="Real"===s?"Double":"Integer",v&&(V.value={value:c("DELExtControlLimits",V.dataIndex),inclusive:d.get(V.dataIndex+"_Inclusive")});break;case"V_DCFormula":v?"Computed"===d.get("PLMSpecifyHowToCollectDataCnx.V_DCMode")&&(P=o.getNodeOptions(V.objectToBeModified),V.value=P.grid[V.dataIndex]):D=!1}D&&u.push(V)}),u},I=function(t,a){var n,r,i,l,u,s,c=[],d={};P.forEach(function(e){var a,o=e.dataIndex,s=e.attributeInfo.FullName;i=t[s],"V_DCMagnitude"===o&&(l=e.attributeInfo.AuthorizedValues[i.selectedIndex].Name,u=e.attributeInfo.AuthorizedValues[i.selectedIndex].Units),"V_DCUnit"===o&&(n=g,g=e.attributeInfo.AuthorizedValues[i.selectedIndex].Name,r=e.attributeInfo.AuthorizedValues[i.selectedIndex].label),"V_MinValue"!==o&&"V_MaxValue"!==o&&"V_MinControlValue"!==o&&"V_MaxControlValue"!==o&&"V_Value"!==o||((a="inclusiveLineEditor"===i.fieldType?i.getInputValue():i.value)&&c.push({fullName:s,value:a}),i.setUnit(r))}),s=-1,Array.isArray(u)&&e.is(n)&&(s=u.findIndex(function(e){return e.Name===n})),s>-1&&g!==n&&c.length>0&&(d={dimension:l,fromUnit:n,toUnit:g,valuesToConvert:c.map(function(e){return e.value})},o.convertValuesBetweenUnits(d).then(function(e){var a=e.ConvertValue.split(";");c.forEach(function(e,n){var r=t[e.fullName],o=a[n];"inclusiveLineEditor"===r.fieldType?r.setValue(o):r.value=o})}))},M=function(t,a){var n,r,o,i,l,u,s=t["PLMSpecifyHowToCollectDataCnx_Custo.V_DCMagnitude"];for(r=0;r<P.length;r++)if("V_DCUnit"===(n=P[r]).dataIndex?(o=e.clone(n),u=r):"V_DCMagnitude"===n.dataIndex&&(i=n.attributeInfo.AuthorizedValues[s.selectedIndex],l=R(i)),e.is(o)&&e.is(l)){o.attributeInfo.AuthorizedValues=l.map(function(t){var a=e.clone(t);return a.NLS=a.NLSName,a}),c.updateAuthorizedList(o.attributeInfo,"PLMSpecifyHowToCollectDataCnx_Custo.V_DCUnit"),P[u]=o;break}I(t,a)},p=function(t){var n={},r={};n.attribute=P,e.is(t)&&e.is(t.formStyle)&&(r.formStyle=t.formStyle),r.section=n,s=a.createElement("div",{class:"section-container"}),c=a.create("FormUI",{sections:r,renderTo:s,headerAccordean:!1})},N=function(){var e,t,a;L()?(t=y(),e=f,a=m,l.close(),o.updateDataCollectRow(e,a,t)):l.buttons.Ok.disabled=!1},D=function(t,n){t=t||{},u=a.createElement("div",{class:"DataCollectRow-Dialog"}),(l=a.create("Dialog",{title:t.title,domId:"DataCollectRow-Dialog",content:u,resizableFlag:!0,modalFlag:!0,width:560,minWidth:290,buttons:{Cancel:new _({onClick:function(){l.close()}}),Ok:new _({disabled:!1,emphasize:"primary",onClick:n})}})).close=function(){this.destroy(),g=null,d=null,P=null,f=null,m=null,e.is(c)&&c.destroy(),e.is(u)&&u.destroy(),l=null}},L=function(){var t,a,n=c.validate(),r=function(t,a,n,r){var o=[],l={valid:!0,values:null,message:""};if(0===a.value.length)return l;if(Number.isNaN(Number(a.value)))return l.valid=!1,l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:r}),l;if(Array.isArray(t)||"string"==typeof t)t&&(o=Array.isArray(t)?t:[t]);else if(e.is(t.inclusive)&&"NotSet"!==t.inclusive&&String(t.value).length>0){if(o=Number(t.value),Number.isNaN(o))return l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),l.valid=!1,l;o=[o]}return o.length>0&&(l.values=[],l.valid=o.every(function(e,t){return(e=String(e).trim()).length>0&&isNaN(e)?(l.values=null,l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),!1):(l.values.push(Number(e)),!0)})),l},o=function(a,n){var o,l=i.getNLSValue(E+"."+a),u=i.getNLSValue(E+"."+n),s=e.clone(t[E+"."+a]),c=e.clone(t[E+"."+n]),d={valid:!0};if("NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=r(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var g=0;g<d.values.length;g++)if(o=d.values[g],"Included"===c.inclusive&&o<c.value||"Included"!==c.inclusive&&o<=c.value){d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}return d},u=function(a,n){var o,l=i.getNLSValue(E+"."+a),u=i.getNLSValue(E+"."+n),s=e.clone(t[E+"."+a]),c=e.clone(t[E+"."+n]),d={valid:!0};if("NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=r(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var g=0;g<d.values.length;g++)if(o=d.values[g],"Included"===c.inclusive&&o>c.value||"Included"!==c.inclusive&&o>=c.value){d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}return d},s=function(e){var t={valid:!0};return(t=o(e,"V_MinControlValue")).valid&&(t=o(e,"V_MinValue")),t.valid&&(t=u(e,"V_MaxControlValue")),t.valid&&(t=u(e,"V_MaxValue")),t};return n.result&&(t=c.getValues(),a=t[E+".V_DCType"],n.result=P.every(function(e){var t=e.attributeInfo.Name,r={valid:!0};switch(t){case"V_MinControlValue":r=o(t,"V_MinValue");break;case"V_Value":r=s(t);break;case"V_PossibleValues":"Integer"===a&&(r=s(t));break;case"V_MaxControlValue":r=u(t,"V_MaxValue")}return r.valid||(n.message=r.message),r.valid})),!n.result&&n.message&&l.error(n.message),n.result},y=function(){var t,a={};return t=c.getValues(),P.forEach(function(n){var r,o,i,l=n.attributeInfo.Name,u=n.attributeInfo.FullName;e.is(t[u])&&(o=t[u],A.includes(l)?(""!==o.value&&(a[l]=String(o.value)),a[l+"_Inclusive"]=o.inclusive):"V_DCUnit"!==l&&"V_DCMagnitude"!==l||!e.is(o)?"V_PossibleValues"===l?o&&(a[l]=Array.isArray(o)?o:o.split(","),a[l]=a[l].map(function(e){return String(e)})):a[l]="V_Value"===l&&o?String(o):Array.isArray(o)?o:String(o):(i=P.find(function(e){return e.dataIndex===l}))&&(r=i.attributeInfo.AuthorizedValues.find(function(e){return e.NLSName===o||e.NLS===o}),e.is(r)&&(a[l]=r.Name)))}),a},h=function(t){var a,l={};e.is(t)&&(v=!0,d=t,a=r.getNodeModel(d.get("PID"),!0),f=a.options.dataCollectPID,m=d.get("PID"),l.onComplete=function(){var e,a=n.getReferenceModel(f),r={title:i.getNLSValue("DataCollectMgmtDialog.EditDialog")};e=a.get("type")+t.get("V_DCType"),P=C(V[e].Attribute),p({formStyle:V[e].formStyle}),D(r,N),s.inject(u)},o.fetchDataCollectRow(f,m,l))},S=function(t){var a,r,l={title:i.getNLSValue("DataCollectMgmtDialog.AddDialog")};r=n.getReferenceModel(f),o.isDataCollectPlan(r)?a="DELWkiDataCollectPlanReferenceReal":o.isDataCollectCheckList(r)&&(a="DELWkiDataCollectChecklistReferenceBoolean"),e.is(a)&&(P=C(V[a].Attribute,t),p({formStyle:V[a].formStyle}),D(l,w),s.inject(u))},b=function(t,a,n){var r,i=n.dsModel.value,l="DELWkiDataCollectPlanReference";e.is(s)&&(s.remove(),s=null),e.is(t)&&(r=o.getAuthorizedValueIndex(t,null,i))>-1&&(i=o.getAuthorizedValueDB(t,r)),P=C(V[l+=i].Attribute,i),p({formStyle:V[l].formStyle}),s.inject(u)},w=function(){var e,t;L()?(t=y(),e=f,l.close(),o.createDataCollectRow(e,t)):l.buttons.Ok.disabled=!1},{init:function(t){var a=e.is(t)?t:{};e.is(a.editFormConfig)&&(V=a.editFormConfig)},editDataCollectRow:function(e){h(e)},createDataCollectRow:function(t,a){e.is(t)&&(v=!1,f=t,S(a))}}}}),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlanModule",["UWA/Core","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanDialogUI","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanMgmtUI","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanEditUI"],function(e,t,a,n){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","TreeListViewBehavior","WUXNodeModelBehavior","ResourceBehavior","ResourceParameterPlanBehavior","LinkBehavior","SelectionBehavior","CapableResourceLinkBehaviour"],creator:function(r,o,i,l,u,s,c,d,g,P){var f,m,V,v,R,D,p,C,I,h,b,M=[],L=["CapableResourcesStructureLink","DELAsmProcessCanUseCnx","SecondaryCandidateResourceLink"];return h=function(t){(t=e.is(t,"array")?t:[t]).forEach(function(e){f.isActive()&&(c.isResourceParameterRow(e)?f.onUpdateResourceParameterRow(e):c.isResourceParameterPlan(e)&&f.onUpdateResourceParameter(e))})},p=function(t){var a,n,r,o,l=[],u=[];if(e.is(t)){if((o=g.getSelectionsWithPaths()[0][0].path).length>1)for(let e=o.length-1;e>=0;e--)r=i.getInstance(o[e]),(i.isOperation(r)||"DELLmiWorkPlanSystemInstance"===r.get("type"))&&l.push(r.get("isInstanceOf")),0===e&&"DELLmiWorkPlanSystemReference"===(a=i.getReferenceModel(r.get("isAggregatedBy"))).get("type")&&l.push(a.id);else 1===o.length&&(n=i.getInstance(o[0]),"DELLmiHeaderOperationReference"===(a=i.getReferenceModel(n.get("isAggregatedBy"))).get("type")&&l.push(a.id));l.forEach(e=>{d.getConnectedObjects(e,o,{relationTypes:L}).forEach(e=>{u=M(e,u)})}),m.createResourceParameterPlanRow(t,u)}},D=function(t){e.is(t)&&V.editResourceParameterRow(t)},R=function(e){var t,a,n,o,l={},u=[],c=[];if((t=g.getSelectionsWithPaths()[0][0].path).length>1)for(let e=t.length-1;e>=0;e--)a=i.getInstance(t[e]),(i.isOperation(a)||"DELLmiWorkPlanSystemInstance"===a.get("type"))&&u.push(a.get("isInstanceOf")),0===e&&"DELLmiWorkPlanSystemReference"===(o=i.getReferenceModel(a.get("isAggregatedBy"))).get("type")&&u.push(o.id);else 1===t.length&&(n=i.getInstance(t[0]),o=i.getReferenceModel(n.get("isAggregatedBy")),(i.isOperation(o)||"DELLmiWorkPlanSystemReference"===o.get("type"))&&u.push(o.id));u.forEach(e=>{c.push(d.getImpactedConnections(e,null,{relationTypes:L}))}),t.length>0?c.length>0?(f.init(e),l.editFormConfig=v,V.init(l)):(r.warn(s.getNLSValue("ResourceParametertMgmtUI.InvalidLink")),r.notify("editResourceParameterPlan",{state:!1})):(r.warn(s.getNLSValue("ResourceParametertMgmtUI.InvalidStructure")),r.notify("editResourceParameterPlan",{state:!1}))},C=function(t){t=e.is(t,"array")?t:[t],u.withTransactionUpdate(function(){t.forEach(function(t){var a;a=t.toJSON(),e.is(a)&&f.isActive()&&f.addResourceParameterRow(a)}),1===t.length&&V.editResourceParameterRow(t[0])})},I=function(){f.deleteResourceParameterRow()},b=function(t,a){let n=d.getConnection(t),r=d.getSecondaryResourceLinksInfo(n);e.is(r,"array")&&r.forEach(e=>{let t=i.getReferenceModel(e.toPID);a.push(t)})},M=function(t,a){let n=d.getImpactedConnections(t,null,{relationTypes:L});return e.is(n,"array")&&n.forEach(n=>{let r=P.getIsPreferred(n);e.is(r)&&"TRUE"===r&&(a.push(i.getReferenceModel(t)),b(n,a))}),a},{listenTo:function(){return{createResourceParameterRow:p,editResourceParameteRow:D,addResourceParamRef:C,deleteResourceParameterRow:I,referenceChanged:h,computeResourceParamPlan:R}},onStart:function(P,D){var p;f=new a(r,o,i,l,u,s,c,g,d),m=new t(r,o,c,s,g),V=new n(r,o,i,u,c,s,g),e.is(P.editFormAttributesXML)&&(p=d.getXMLValues(P.editFormAttributesXML),v=p.convert("AttributesDescriptionList.Type","name")),R(P),D()},onStop:function(){f=void 0,m=void 0,V=void 0}}}}}),define("DS/DELPPWWorkInstructionsModule/WorkInstructionsModule",["UWA/Core","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectMgmtUI","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectDialogUI"],function(e,t,a){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","TreeListViewBehavior","WUXNodeModelBehavior","ResourceBehavior","DataCollectWKIBehavior","EditAttributeBehavior","LinkBehavior"],creator:function(n,r,o,i,l,u,s,c,d){var g,P,f,m,V,v,R,D,p,C=new t(n,r,o,i,l,u,s),I=new a(n,r,o,l,s,u);return P=function(t){(t=e.is(t,"array")?t:[t]).forEach(function(e){C.isActive()&&(s.isDataCollectRow(e)?C.onUpdateDataCollectRow(e):(s.isDataCollectPlan(e)||s.isDataCollectCheckList(e))&&C.onUpdateDataCollect(e))})},f=function(t){var a={};e.is(t)&&(s.isDataCollectPlan(t)||s.isDataCollectCheckList(t)?(C.init(t),a.editFormConfig=g,I.init(a)):t.isWorkInstruction()&&c.editConfiguredAttributes(t))},m=function(t){e.is(t)&&I.editDataCollectRow(t)},V=function(){C.deleteDataCollectRow()},v=function(){C.isActive()&&C.destroy()},R=function(e){var t;e=Array.isArray(e)?e:[e],C.isActive()&&(t=C.getDataCollectPID(),e.some(function(e){return t===e.get("PID")})&&C.destroy())},D=function(t){var a,n;e.is(t)&&(n=o.getReferenceModel(t),a=s.isDataCollectPlan(n)?"Real":"Boolean",I.createDataCollectRow(t,a))},p=function(t){t=e.is(t,"array")?t:[t],l.withTransactionUpdate(function(){t.forEach(function(t){var a;a=t,e.is(a)&&s.isDataCollectRow(a)&&C.isActive()&&C.addDataCollectRow(a)})})},{listenTo:function(){return{editWorkInstruction:f,createDataCollectRow:D,editDataCollectRow:m,deleteDataCollectRow:V,referenceChanged:P,HideAll:v,referenceRemoved:R,referenceAdded:p}},onStart:function(t,a){var n;e.is(t.editFormAttributesXML)&&(n=d.getXMLValues(t.editFormAttributesXML),g=n.convert("AttributesDescriptionList.Type","name")),a()},onStop:function(){}}}}});