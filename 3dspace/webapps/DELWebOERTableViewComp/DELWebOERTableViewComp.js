define("DS/DELWebOERTableViewComp/actions/StandardActions",["DS/DELWebOERCommonUtils/utils/TrackUtils","DS/Logger/Logger","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin"],function(e,t,i){"use strict";const n=1,o=2,r="Requirement",a={hideShow:async function(t,i){var r=i.args.cell,a=r.nodeModel;if(UWA.is(r)&&-1!==r.rowID){let t=i.executionContext.getComponent("DELWebViewer"),r=t&&t.getViewerBehavior?t.getViewerBehavior():null,s=a.getAttributeValue("hideShow3D");r&&(s===n||s===o?await r.hideNode({path:a.getRirPath()}):await r.showNode({path:a.getRirPath()}));let l=s===n||s===o?"ShowNode":"HideNode";e.trackChanges({category:"HideShow",action:l,label:l,dims:{pd1:i.args.origin},executionContext:i.executionContext})}t()},expandAll:async function(e,i){i.args.node?i.args.node.expandAll():t.error("Invalid input, require node in argurement"),e()},collapseAll:async function(e,i){i.args.node?i.args.node.collapseAll():t.error("Invalid input, require node in argurement"),e()},reframe:async function(e,i){let n=i.executionContext;if(i.args.node){let e=n.getComponent("DELWebViewer"),t=e&&e.getViewerBehavior?e.getViewerBehavior():null;t&&await t.setReframe({path:i.args.node.getRirPath()})}else t.error("Invalid input, require node in arguement");e()},_updateNodesToShowAll:function(e,t){var i=e.getAll3DHiddenChildren();t=UWA.is(t,"array")?t:[],e.getAttributeValue("hideShow3D")!==e.ENUM_3DVISIBILITY.ON&&t.push(e),i.hidden.forEach(e=>{t.push(e)}),i.partialHidden.forEach(e=>{t.push(e)})},showOnly:async function(e,n){let o=n.args.node;if(o){let e=[],t=[];(function e(t,i,n){t&&UWA.is(t.getBrothers(),"array")&&t.getBrothers().length>0&&t.getBrothers().forEach(e=>{n.push(e)}),t.isRoot()||(i.push(t.getParent()),e(t.getParent(),i,n))})(o,t,e),a._updateNodesToShowAll(o,t);let r=n.executionContext.getComponent("DELWebViewer"),s=r&&r.getViewerBehavior?r.getViewerBehavior():null,l=r.getRoots(),d=o.getRoot().getReferenceId(),u=[];l.forEach(e=>{e.pprType===i.PPRTYPES.PROCESS?(e.scopedMfg&&e.scopedMfg.id!==d&&u.push([e.scopedMfg.id]),e.resource&&e.resource.id!==d&&u.push([e.resource.id])):e.id!==d&&u.push([e.id])}),u=u.concat(e.map(e=>e.getRirPath())),s&&(await s.showNode({path:t.map(e=>e.getRirPath())}),await s.hideNode({path:u}))}else t.error("Invalid input, require node in handler arguement");e()},showAll:async function(e,i){let n=i.args.node;if(n){let e=[];a._updateNodesToShowAll(n,e);let t=i.executionContext.getComponent("DELWebViewer"),o=t&&t.getViewerBehavior?t.getViewerBehavior():null;o&&await o.showNode({path:e.map(e=>e.getRirPath())})}else t.error("Invalid input, require node in handler arguement");e()},removeRoot:async function(e,i){let n=i.args.node,o=i.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);o.hasHandler("DELWebOERRemoveRoots")?o.executeHandler({id:"DELWebOERRemoveRoots",args:{items:[{id:n.getReferenceId()}]}}):t.error("Invalid input, require treedocument and node in handler arguement"),e()},toggleFTA:async function(e,i){if(i.args.node&&i.args.treeDocument){let e=i.args.node,t=e.getAttributeValue(r),n=i.executionContext.getComponent("DELWebViewer"),o=n&&n.getViewerBehavior?n.getViewerBehavior():null;o&&(e.setAttribute(r,t===e.ENUM_REQUIREMENT.LOAD?e.ENUM_REQUIREMENT.REMOVE:e.ENUM_REQUIREMENT.LOAD),t===e.ENUM_REQUIREMENT.LOAD?await o.loadFTA({path:e.getRirPath()}):await o.removeFTA({path:e.getRirPath()}))}else t.error("Invalid input, require treedocument and node in handler arguement");e()},loadFTA:async function(e,i){if(i.args.node){let e=i.args.node;e.setAttribute(r,e.ENUM_REQUIREMENT.REMOVE);let t=i.executionContext.getComponent("DELWebViewer"),n=t&&t.getViewerBehavior?t.getViewerBehavior():null;n&&await n.loadFTA({path:e.getRirPath()})}else t.error("Invalid input, require treedocument and node in handler arguement");e()},removeFTA:async function(e,i){if(i.args.node){let e=i.args.node;e.setAttribute(r,e.ENUM_REQUIREMENT.LOAD);let t=i.executionContext.getComponent("DELWebViewer"),n=t&&t.getViewerBehavior?t.getViewerBehavior():null;n&&await n.removeFTA({path:e.getRirPath()})}else t.error("Invalid input, require treedocument and node in handler arguement");e()},loadAllFTA:async function(e,i){if(i.args.node&&i.args.treeDocument){let e=[],t=i.args.treeDocument,n=function(e){return e.getAttributeValue(r)},o=function t(i){UWA.is(n(i))&&(e.push(i.getRirPath()),i.setAttribute(r,i.ENUM_REQUIREMENT.REMOVE)),i.hasChildren()&&i.getChildren().forEach(t)};t.prepareUpdate(),o(i.args.node),t.pushUpdate();let a=i.executionContext.getComponent("DELWebViewer"),s=a&&a.getViewerBehavior?a.getViewerBehavior():null;s&&await s.loadFTA({path:e})}else t.error("Invalid input, require treedocument and node in handler arguement");e()},removeAllFTA:async function(e,i){if(i.args.node&&i.args.treeDocument){let e=[],t=i.args.treeDocument,n=function(e){return e.getAttributeValue(r)},o=function t(i){UWA.is(n(i))&&(e.push(i.getRirPath()),i.setAttribute(r,i.ENUM_REQUIREMENT.LOAD)),i.hasChildren()&&i.getChildren().forEach(t)};t.prepareUpdate(),o(i.args.node),t.pushUpdate();let a=i.executionContext.getComponent("DELWebViewer"),s=a&&a.getViewerBehavior?a.getViewerBehavior():null;s&&await s.removeFTA({path:e})}else t.error("Invalid input, require treedocument and node in handler arguement");e()},biColorize:async function(e,i){let n=i.executionContext,o=i.args.treeDocument,r=i.args.data;if(o&&r&&UWA.is(r.tagColors,"array")&&r.tagColors.length>0){let e=r.tagColors[0].predicate,t=o.getAllDescendants()||[],i=[];if(t.length>0){t.forEach(e=>{-1===i.indexOf(e.getReferenceId())&&i.push(e.getReferenceId())});let a,s=await n.getComponent("DELCommonUtilsServices").getAttributeForIds(i,[e]),l=function(e,t,i){var n,o,r,a,s,l="#00000000",d=[];if("date"===e&&UWA.is(i,"string"))for(s=new Date(i),d.push([s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2),("0"+s.getDate()).slice(-2)].join("/")),d.push([s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2)].join("/")),d.push(s.getFullYear().toString()),o=!0,n=0,r=d.length;n<r&&o;n++)void 0!==t.map[d[n]]&&(o=!1,l=t.map[d[n]]);else"boolean"===e&&"boolean"==typeof i?(a=i?"TRUE":"FALSE",l=t.map[a]):void 0!==t.map[i]&&(l=t.map[i]);return l};a=function(e){var t={predicateKind:"",colorMap:{map:{},predicate:void 0}};return UWA.is(e.tagColors,"array")&&e.tagColors.length>0&&(t.predicateKind=e.tagColors[0].type,e.tagColors.forEach(function(e){var i,n;void 0===t.colorMap.predicate&&(n=(i=e.predicate.split("/"))[i.length-1],t.colorMap.predicate=n),t.colorMap.map[e.object]=e.color})),t}(r),o.withTransactionUpdate(function(){t.forEach(e=>{var t=s[e.getReferenceId()],i=t&&t[a.colorMap.predicate]?t[a.colorMap.predicate]:null,n=l(a.predicateKind,a.colorMap,i);e.updateOptions({isBeingCut:"#00000000"===n,grid:{biColor:n}})})})}}else t.error("Invalid input, require treedocument and data in handler arguement");e()},biUnColorize:async function(e,i){let n=i.args.treeDocument;UWA.is(n)?n.withTransactionUpdate(function(){n.getAllDescendants().forEach(function(e){e.updateOptions({isBeingCut:!1,grid:{biColor:"#00000000"}})})}):t.error("Invalid input, require treedocument handler arguement"),e()}};return a}),define("DS/DELWebOERTableViewComp/column/views/BuildUp",["DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json","css!DS/DELWebOERTableViewComp/assets/css/PPR2DStructure.css"],function(e,t){"use strict";return{dataIndex:"buildUp",sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,displayType:"BuildUp",editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",alignment:"center",visibleFlag:!0,disabled:!0,width:30,height:"40px",pinned:"right",icon:e.getAssetsUrl("DELWebOERTableViewComp","icons/32/I_3DColumn.png"),getCellTooltip:function(e,i){var n=i.nodeModel;return-1===i.rowID?{shortHelp:t.get("BuildUp.description"),updateModel:!1}:n.getAttributeValue("buildUp")===n.ENUM_BUILDUP.LOADING?{shortHelp:t.get("BuildUp.Loading.description"),updateModel:!1}:{shortHelp:"",updateModel:!1}},getCellClassName:function(e,t){var i="";return 0===t.rowID&&(i="del-buildup"),i},getCellSemantics:function(t,i){var n=i.nodeModel,o={};switch(n.getAttributeValue("buildUp")){case n.ENUM_BUILDUP.ACTIVATE:o.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELProductBuildUp_ON.png");break;case n.ENUM_BUILDUP.DEACTIVATE:o.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELProductBuildUp_OFF.png");break;case n.ENUM_BUILDUP.LOADING:o.icon={iconName:"reload wux-ui-3ds-spin",fontIconFamily:1}}return o}}}),define("DS/DELWebOERTableViewComp/column/views/Responsible",["i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json"],function(e){"use strict";return{kind:"user",minWidth:200,height:"40px",editableFlag:!1,typeRepresentation:"user",customisation:{exportable:{lock:!1,value:!0}},getCellTooltip:function(t,i){let n;return-1===i.rowID?n={shortHelp:e.get("Owner.description"),updateModel:!1}:i&&i.nodeModel&&i.nodeModel.options&&i.nodeModel.options.grid&&i.nodeModel.options.grid[t]&&(n={shortHelp:i.nodeModel.getReferenceValue(t)}),n},getCellValue:function(e,t){if(t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]){return{icon:{iconName:"topbar-user",fontIconFamily:1},label:t.nodeModel?t.nodeModel.options.grid[e]:""}}return""},getCellValueForExport:function(e,t){return t&&t.nodeModel?t.nodeModel.options.grid[e]:""}}}),define("DS/DELWebOERTableViewComp/utils/Utils",["UWA/Promise","DS/i3DXCompassPlatformServices/OpenWith","DS/PADUtils/PADTypesMgt","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR"],function(e,t,i,n){"use strict";var o={openWithApps:function(r){return new e(function(e){let a=new t,s=o.get3DXContent(r);i.retrieveHierarchy([r.node.getReferenceType()],function(t){s.data.items[0].objectTaxonomies=t[r.node.getReferenceType()],a.set3DXContent(s,!0),a.retrieveCompatibleApps(function(t){var i=[],o=[];t.forEach(function(e){o.push({type:"PushItem",title:e.text,fonticon:e.fonticon&&e.fonticon.length>0?{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+e.fonticon,family:WUXManagedFontIcons.Font3DS}:void 0,icon:e.icon?e.icon:"",action:{callback:e.handler}})}),i={type:"PushItem",icon:{iconName:"open-menu-dot",fontIconFamily:1},title:n.get("ContextualMenu.OpenWith")},o.length>0&&(i.submenu=o.length>0?o:[]),e(i)})})})},get3DXContent:function(e){let t=e.executionContext.getComponent("DELCommonUtilsServices");return{protocol:"3DXContent",version:"1.1",source:t.getAppId(),widgetId:t.getWidgetId(),data:{items:[{envId:t.getPlatformId(),serviceId:"3DSpace",contextId:t.getCurrentSecurityContext(),objectId:e.node?e.node.getReferenceId():"",objectType:e.node?e.node.getReferenceType():"",displayName:e.node?e.node.getLabel():""}]}}}};return o}),define("DS/DELWebOERTableViewComp/model/DELWebDictionaryModel",["DS/Logger/Logger"],function(e){"use strict";return function(t){let i={attributes:[],dimenstions:[]},n=t.executionContext;return{fetchAttributesAndDimension:function(t){var o=n.getComponent("DELCommonUtilsServices");return new UWA.Promise((e,i)=>{t&&t.length>0?o.executeRequestPromise(`${o.get3DSpaceUrl()}/resources/dictionary/properties`,{method:"POST",payload:t}).then(e).catch(i):i("No attributes found")}).then(function(e){return i.attributes=e,e}).then(function(e){var t=[];return e&&e.length>0&&e.forEach(e=>{e&&e.info&&e.info.forEach(e=>{let i=e?e.Magnitude:null;i&&function(e){t.includes(e)||t.push(e)}(i)})}),t}).then(function(e){let t=UWA.Promise.resolve();return e&&e.length>0&&(t=o.executeRequestPromise(`${o.get3DSpaceUrl()}/resources/dictionary/dimensions?${function(e){return`$filter=dimensionName+eq+${e.join(",")}`}(e)}`,{method:"GET"})),t}).then(function(e){i.dimensions=e?e.results:[]}).fail(t=>{e.debug(t),e.error("Failed to fetch dictionary attributes/dimension due to ",t.toString())})},getAttributes:function(){var t=i&&i.attributes?i.attributes:[];return 0===t.length&&e.warn("Initialize dictionary service before user/attributes not found"),t},getAttributeInfo:function(e,t){let i,n=this.getAttributes().find(t=>t.type===e);return n&&n.info&&(i=n.info.find(e=>e.Name===t)),i},getAuthorizedValues:function(e){let t=[];return e&&"Yes"===e.HasRangeDefined&&(t=e.AuthorizedValues),t},getDimension:function(e){var t;return i&&i.dimensions&&(t=i.dimensions.find(t=>t.Name===e)),t},getUnit:function(e,t){let i,n=this.getDimension(e);return n&&(t=t||n.MKSUnit,i=n.Units?n.Units.find(e=>e.Name===t):null),i},empty:function(){i={attributes:[],dimensions:[]}}}}}),define("DS/DELWebOERTableViewComp/column/views/ConfigurationColumns",[],function(){"use strict";const e="string",t="configLoading";return{Effectivity:{dataIndex:"Effectivity",width:"auto",minWidth:"100",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},VariantEffectivity:{dataIndex:"VariantEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},EvolutionEffectivity:{dataIndex:"EvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},CurrentEvolutionEffectivity:{dataIndex:"CurrentEvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},ProjectedEvolutionEffectivity:{dataIndex:"ProjectedEvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},ConfigurationContext:{dataIndex:"ConfigurationContext",width:"auto",minWidth:"150",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},getCellTypeRepresentation:function(i){var n,o=t;return UWA.owns(i,"nodeModel")&&(n=i.nodeModel,UWA.is(n)&&(o=UWA.is(i.cellModel,"string")&&0===i.cellModel.length?!!UWA.is(n.options.areCfgColumnsFilled,"boolean")&&n.options.areCfgColumnsFilled?e:t:e)),o},hasCellValue:function(){return!0},getCellValue:function(e,t){var i,n=null;return UWA.owns(t,"nodeModel")&&(i=t.nodeModel.options.grid[e],n=UWA.is(i,"string")?i.trim():i),UWA.is(n)?n:""}}}),define("DS/DELWebOERTableViewComp/column/views/PositionMatrix",["DS/Handlebars/Handlebars","text!DS/DELWebOERTableViewComp/assets/templates/positionMatrixTooltip.html","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json","css!DS/DELWebOERTableViewComp/assets/css/positionmatrix.css"],function(e,t,i){"use strict";var n=e.compile(t);return{editableFlag:!0,typeRepresentation:"functionIcon",alignment:"center",getCellSemantics:function(e,t){return{icon:t.nodeModel.options.grid[e]?{iconName:"part-position wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"}:""}},getCellTooltip:function(e,t){var o,r,a,s,l,d,u;return-1===t.rowID?o={shortHelp:i.get("PositionMatrix.description"),updateModel:!1}:t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]&&(r=(a=t.nodeModel.options.grid[e])?(s=6,d=a.split(","),u={className:l,x1:Number(d[0]).toFixed(s).toString(10).substring(0,s+3),x2:Number(d[1]).toFixed(s).toString(10).substring(0,s+3),x3:Number(d[2]).toFixed(s).toString(10).substring(0,s+3),y1:Number(d[3]).toFixed(s).toString(10).substring(0,s+3),y2:Number(d[4]).toFixed(s).toString(10).substring(0,s+3),y3:Number(d[5]).toFixed(s).toString(10).substring(0,s+3),z1:Number(d[6]).toFixed(s).toString(10).substring(0,s+3),z2:Number(d[7]).toFixed(s).toString(10).substring(0,s+3),z3:Number(d[8]).toFixed(s).toString(10).substring(0,s+3),t1:Number(d[9]).toFixed(s).toString(10).substring(0,s+3),t2:Number(d[10]).toFixed(s).toString(10).substring(0,s+3),t3:Number(d[11]).toFixed(s).toString(10).substring(0,s+3)},n(u)):"<span>"+a+"</span>",o={title:i.get("PositionMatrix.Title"),shortHelp:r,allowUnsafeHTMLShortHelp:!0,wrapThreshold:315,updateModel:!1}),o},width:"100px",height:"40px"}}),define("DS/DELWebOERTableViewComp/column/views/Requirement",["DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json"],function(e,t){"use strict";return{height:"40px",editionPolicy:"EditionInPlace",editableFlag:!0,alignment:"center",typeRepresentation:"functionIcon",getCellSemantics:function(t,i){var n,o=i.nodeModel;switch(o.getAttributeValue(t)){case o.ENUM_REQUIREMENT.LOAD:n=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELLoadFTA.png");break;case o.ENUM_REQUIREMENT.REMOVE:n=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELRemoveFTA.png")}return{icon:n}},getCellTooltip:function(e,i){var n,o=i&&i.nodeModel&&UWA.is(i.nodeModel.getAttributeValue(e))?i.nodeModel.getAttributeValue(e):null;return-1===i.rowID?n={shortHelp:t.get("Requirement.description"),updateModel:!1}:UWA.is(o)&&(n={shortHelp:o===i.nodeModel.ENUM_REQUIREMENT.LOAD?t.get("LoadRequirement.tooltip"):t.get("RemoveRequirement.tooltip"),updateModel:!1}),n}}}),define("DS/DELWebOERTableViewComp/model/SelectionManager",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","DS/Selection/XSO","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/utils/XSOManager","DS/Utilities/Dom"],function(e,t,i,n,o,r,a){"use strict";return t.extend({init:function(e){let t=this;this.enableCrossPreHighlight=e.enableCrossPreHighlight,this._hso=new n({eventChannel:"DELOER/",useUniqueID:!0,getElementID:function(e={}){return e.getId()}}),this.getTreeDocument().addModelEventListener("highlight",function(e={}){var i=e.target;i&&t._hso.add(i)}),this.getTreeDocument().addModelEventListener("unhighlight",function(e={}){var i=e.target;i&&(i.removeAttribute("isHighlighted"),t._hso.remove(i))});let i=function(e){let t=this,i=e.data.nodeModel;i&&(t.enableCrossPreHighlight&&t._computePreSelect(t._getNodes(i,"isPreSelected"),!0),t._computeHighlight(t._getNodes(i,"isHighlighted"),!0))};this.getTreeDocument().onPostExpand(i.bind(this)),this.getTreeDocument().onPostCollapse(i.bind(this)),this.getTreeDocument().getXSO().onPostAdd(function(e){a.isCurrentlyCalledFromUIInteraction()&&(t._notifySelectionToPlatform(),r.getCSO().add(e))}),this.getTreeDocument().getXSO().onPostRemove(function(e){t._notifySelectionToPlatform(),r.getCSO().remove(e)})},_notifySelectionToPlatform(){let e=this.executionContext.getComponent("DELCommonUtilsServices");i.publish("DS/PADUtils/PADCommandProxy/select",{metadata:{timestamp:Date.now(),appid:e.getAppId(),xappid:e.getAppId(),originWidgetId:e.getWidgetId(),ignoreFromSameWidgetId:!0},data:{paths:this.getSelectedPaths()}})},_computePreSelect:function(e,t){e.forEach(function(e){for(var i=e,n=t;i;)i.isVisible()?(n!==i.isPreSelected()&&(n?i.preSelect():i.unPreSelect()),i.isRoot()?i=null:(i=i.getParent(),n&&(n=!n))):(!n&&i.isPreSelected()&&i.unPreSelect(),i=i.getParent())})},_computeHighlight:function(e,t){e.forEach(function(e){for(var i=e,n=t;i;)i.isVisible()?(n!==i.isHighlighted()&&(n?i.highlight():i.unhighlight()),i.isRoot()?i=null:(i=i.getParent(),n&&(n=!n))):(!n&&i.isHighlighted()&&i.unhighlight(),i=i.getParent())})},_changeHighlight:function({path:e,highlight:t}){let i=this.getNodeFromPath(e);i&&(t?i.setAttribute("isHighlighted",!0):i.removeAttribute("isHighlighted"),this._computeHighlight([i],t))},_getNodes:function(e,t){return e.search({match:function(e){if(e.nodeModel.getAttributeValue(t))return!0}})},_getInputPaths:function(e={}){let t=e.path,i=[];return t&&(i=o.isArrayOfArray(t)?t:[t]),i},highlight:function(e={}){let t=this._getInputPaths(e)||[];e.clear&&this.clearHighlight(),t.forEach(e=>{this._changeHighlight({path:e,highlight:!0})})},unhighlight:function(e={}){(this._getInputPaths(e)||[]).forEach(e=>{this._changeHighlight({path:e,highlight:!1})})},getPSOManager:function(){return this.getTreeDocument().getPXSO()},_changePreSelect:function(e={}){let{path:t,preSelect:i}=e,n=this.getNodeFromPath(t);n&&(!1!==i&&n.isPreSelected()===i||(i?n.setAttribute("isPreSelected",!0):n.removeAttribute("isPreSelected"),this._computePreSelect([n],i)))},preHighlight:function(e={}){(this._getInputPaths(e)||[]).forEach(e=>{this._changePreSelect({path:e,preSelect:!0})})},unPreHighlight:function(e={}){(this._getInputPaths(e)||[]).forEach(e=>{this._changePreSelect({path:e,preSelect:!1})})},getSelectionManager:function(){return this.getTreeDocument().getXSO()},getSelectedPaths:function(){return this.getTreeDocument().getSelectedNodes().map(function(e){return e.getRirPath()})},clearHighlight:function(){let e=this;this._hso.get().forEach(t=>{t.unhighlight(),(e._getNodes(t,"isHighlighted")||[]).forEach(e=>{e.unhighlight()})})},clearSelection:function(){this.getTreeDocument().unselectAll()}})}),define("DS/DELWebOERTableViewComp/model/DELWebPPRNode",["DS/TreeModel/TreeNodeModel"],function(e){"use strict";let t=0;var i=function(i){i=i||{},this._referenceId=null,this._instanceId=null,this._type=null,this.counterId=t++,this.setReferenceId(i.referenceId),this.setReferenceType(i.type),this.options=i,i.instanceId&&this.setInstanceId(i.instanceId),e.apply(this,arguments)};return(i.prototype=Object.create(e.prototype)).constructor=i,i.prototype.getId=function(){return this.counterId},i.prototype.setReferenceId=function(e){return UWA.is(e,"string")?(this._referenceId=e,this.getReferenceId()):null},i.prototype.setInstanceId=function(e){return UWA.is(e,"string")?(this._instanceId=e,this.getInstanceId()):null},i.prototype.setReferenceType=function(e){return UWA.is(e,"string")?(this._type=e,this.getReferenceType()):null},i.prototype.getReferenceId=function(){return this._referenceId},i.prototype.getInstanceId=function(){return this._instanceId},i.prototype.getReferenceType=function(){return this._type},i.prototype.get3DHiddenChildren=function(){var e={hidden:[],partialHidden:[]},t=this.getChildren();return t&&t.forEach(function(t){var i=t.getAttributeValue("hideShow3D");i===t.ENUM_3DVISIBILITY.OFF?e.hidden.push(t):i===t.ENUM_3DVISIBILITY.PARTIAL&&e.partialHidden.push(t)}),e},i.prototype.getAll3DHiddenChildren=function(){var e=[],t=[];return function e(t,i,n){var o=t.get3DHiddenChildren();o.hidden.forEach(t=>{i.push(t),e(t,i,n)}),o.partialHidden.forEach(t=>{n.push(t),e(t,i,n)})}(this,e,t),{hidden:e,partialHidden:t}},i.prototype.get3DVisibility=function(){var e=this.getChildren()||[],t=this.get3DHiddenChildren();this.ENUM_3DVISIBILITY.ON;return t.hidden.length===e.length?this.ENUM_3DVISIBILITY.OFF:0===t.hidden.length&&0===t.partialHidden.length?this.ENUM_3DVISIBILITY.ON:this.ENUM_3DVISIBILITY.PARTIAL},i.prototype.changeParent3DVisibility=function(){var e;if(!this.isRoot())for(e=this.getParent();e;)e.getUserHiddenState()?e=null:(e.setAttribute("hideShow3D",e.get3DVisibility()),e=e.isRoot()?null:e.getParent())},i.prototype.update3DVisibility=function(e){switch(e){case this.ENUM_3DVISIBILITY.ON:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.ON),this.setUserHiddenState(!1);break;case this.ENUM_3DVISIBILITY.OFF:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.OFF),this.setUserHiddenState(!0);break;case this.ENUM_3DVISIBILITY.PARTIAL:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.PARTIAL),this.setUserHiddenState(!1)}},i.prototype.getRirPath=function(){for(var e=this,t=[];e;){if(e.isRoot()){t=[e.options.referenceId].concat(t);break}t=[e.options.instanceId,e.options.referenceId].concat(t),e=e.getParent()}return t},i.prototype.getRelations=function(){return{to:UWA.is(this.options.to,"array")?this.options.to:[],from:UWA.is(this.options.from,"array")?this.options.from:[]}},i.prototype.setUserHiddenState=function(e){this.options.hiddenStateSet=e},i.prototype.getUserHiddenState=function(){return!0===this.options.hiddenStateSet},i.prototype.isLeaf=function(){var e=this.getChildren();return!e||0===e.length},i.prototype.getConsumedItems=function(){var e={MfgItems:[],Resources:[]};return this.options.consumedMfgItems&&(e.MfgItems=UWA.clone(this.options.consumedMfgItems)),this.options.consumedCapableResource&&(e.Resources=UWA.clone(this.options.consumedCapableResource)),e},Object.defineProperty(i.prototype,"ENUM_3DVISIBILITY",{value:Object.freeze({ON:1,OFF:0,PARTIAL:2}),writable:!1,configurable:!1}),Object.defineProperty(i.prototype,"ENUM_BUILDUP",{value:Object.freeze({ACTIVATE:1,DEACTIVATE:0,LOADING:-1}),writable:!1,configurable:!1}),Object.defineProperty(i.prototype,"ENUM_REQUIREMENT",{value:Object.freeze({LOAD:1,REMOVE:0}),writable:!1,configurable:!1}),i}),define("DS/DELWebOERTableViewComp/column/views/Relation",["UWA/Core"],function(e){"use strict";return e.clone({width:"150px",height:"40px",typeRepresentation:"url",getCellValue:function(t,i){let n=t.split("."),o=n[0]?n[0]:null,r=n[1]?n[1]:null,a=[],s=i&&i.nodeModel&&i.nodeModel.getRelations?i.nodeModel.getRelations():{};return s&&e.is(s[o],"array")&&s[o].forEach(e=>{if(e.link===r){let t=e.data.label+" "+e.data.revision;a.push({icon:{iconPath:e.data.icon,iconSize:{width:"22px",height:"22px"}},label:t})}}),a}})}),define("DS/DELWebOERTableViewComp/view/DELWebOERDataGridView",["DS/DELWebCommonControls/DELWebDataGridView","DS/DELWebOERTableViewComp/utils/Utils","text!DS/DELWebOERTableViewComp/assets/json/DataGridViewOptions.json","css!DS/DELWebOERTableViewComp/assets/css/datagridview.css"],function(e,t,i){"use strict";return function(n){let o,r=JSON.parse(i);return n=n||{},Object.assign(n,r.dataGridViewOptions),n.onContextualMenu&&(n.onContextualEvent=async function(e){var t=[];return e&&e.collectionView&&(t=(t=e.collectionView.buildDefaultContextualMenu(e)).concat(await n.onContextualMenu(e))),t}),o=new e(n),n.container&&o.getContent().inject(n.container),o.onDragStartCell=function(e,i){var o=i.nodeModel;let r=t.get3DXContent({node:o,executionContext:n.executionContext});return e.dataTransfer.setData("Text",JSON.stringify(r)),!1},n.onSelect&&o.getNodesXSO().onChange(function(e){n.onSelect(e)}),n.onHover&&o.addEventListener("mouseover",n.onHover),n.onClick&&o.addEventListener("click",function(e,t){n.onClick(e,t)}),{displayProgressBar:function(e){o.displayProgressBar(e)},ensureNodeModelVisible:function(){o.ensureNodeModelVisible.apply(o,arguments)},setToolbar:function(e){var t,i;return e="object"==typeof e?e:JSON.parse(e),(i=UWA.createElement("div")).className="divToolbar",i.setAttribute("id","divToolbar"),(t=o.setToolbar(e)).inject(i),t.show(),o.getContent().style.top="50px",i},getToolbar:function(){return o.getToolbar()},destroy:function(){o.destroy()},updateColumn:function(e,t){o&&e&&t&&o.layout.setColumnOrGroupProperties(e,t)},isColumnDisabled:function(e){return o.layout.getColumnDisabled(e)},getColumnIndex:function(e){return o.layout.getColumnIndex(e)},registerTypeRepresentations:function(e){o.getTypeRepresentationFactory().registerTypeRepresentations(e)}}}}),define("DS/DELWebOERTableViewComp/model/DELWebOERItemDocument",["UWA/Core","UWA/Class","DS/TreeModel/TreeDocument","DS/DELWebOERTableViewComp/model/DELWebPPRNode","DS/DELWebOERCommonUtils/utils/CommonUtils"],function(e,t,i,n,o){"use strict";return t.extend({init:function(){var e=this;this._model=new i,this._model.onPostExpand(function(t){var i=t.data.nodeModel;i&&(e._computePreSelect(e._getNodes(i,"isPreSelected"),!0),e._computeHighlight(e._getNodes(i,"isHighlighted"),!0))}),this._model.onPostCollapse(function(t){var i=t.data.nodeModel;i&&(e._computePreSelect(e._getNodes(i,"isPreSelected"),!0),e._computeHighlight(e._getNodes(i,"isHighlighted"),!0))})},getBadgeOptions:function(e){let t;switch(e){case"filter":t={bottomRight:{iconName:"filter",fontIconSize:"1x",className:"dgv-badge"}};break;case"hasFTA":t={bottomRight:{iconPath:o.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELLoadFTA.png"),iconSize:{height:"12px",width:"12px"}}}}return t},_getNodes:function(e,t){return e.search({match:function(e){if(e.nodeModel.getAttributeValue(t))return!0}})},_createRoot:function(e,t,i){var o;return e&&t&&(o=new n(t[e])).updateOptions({badges:i?this.getBadgeOptions("filter"):null,filter:i}),o},_getNode:function(t,i,n){var o,r,a=[],s=null;if(t)for(a.push(t);a.length>0;){if(!(i!==(o=a.pop()).getReferenceId()||n&&n!==o.getInstanceId())){s=o;break}if(!(e.is(i)||n&&n!==o.getInstanceId())){s=o;break}r=o.getChildren(!0),Array.isArray(r)&&a.push(...r)}return s},_getChildNode:function(e,t,i){let n,o;return e&&(o=e.getChildren())&&(n=o.find(function(e){return t===e.getReferenceId()&&(!i||i===e.getInstanceId())})),n},_createTree:function(t,i,r){var a=this,s=function(o){var r,s=t;for(let t=2,l=o.length;t<l;t+=2){let l=o[t],d=o[t-1],u=a._getChildNode(s,l,d);if(u)s=u;else{if(i.treeOptions&&e.is(i.treeOptions.typesToExclude,"array")&&(-1!==i.treeOptions.typesToExclude.indexOf(i.references[l].type)||-1!==i.treeOptions.typesToExclude.indexOf(i.instances[d].type)))break;r=new n(e.clone(e.extend(i.references[l],i.instances[d],!0))),s.addChild(r),s=r}}};i&&Array.isArray(i.paths)&&i.references&&i.instances&&o.processInChunk(i.paths,200,200,function(e,t){e.forEach(s),t&&r()})},getNodeFromPath:function(t){var i,n,o=this._model.getRoots();return e.is(t,"array")&&t.length>0&&o.length>0&&(i=o.find(function(e){return e&&e.options.referenceId===t[0]}),t.forEach((e,o)=>{if(o>0&&o%2==0){if(!(n=this._getNode(i,e,t[o-1])))return;i=n}})),i},getNodeFromPathV2:function(t,i=!1){let n,o,r=this._model.getRoots();if(e.is(t,"array")&&t.length>0&&r.length>0){o=n=r.find(function(e){return e&&e.getReferenceId()===t[0]});for(let e=2;e<t.length;e+=2){if(!o||!o.hasChildren()){!1===i&&(o=null);break}o=o.getChildren().find(i=>i.getReferenceId()===t[e]&&i.getInstanceId()===t[e-1])}}return o},_computePreSelect:function(e,t){e.forEach(function(e){for(var i=e,n=t;i;)i.isVisible()?(n!==i.isPreSelected()&&(n?i.preSelect():i.unPreSelect()),i.isRoot()?i=null:(i=i.getParent(),n&&(n=!n))):(!n&&i.isPreSelected()&&i.unPreSelect(),i=i.getParent())})},_computeHighlight:function(e,t){e.forEach(function(e){for(var i=e,n=t;i;)i.isVisible()?(n!==i.isHighlighted()&&(n?i.highlight():i.unhighlight()),i.isRoot()?i=null:(i=i.getParent(),n&&(n=!n))):(!n&&i.isHighlighted()&&i.unhighlight(),i=i.getParent())})},_getParentNodes:function(e){var t,i=[];if(e)for(t=e;t;)i.unshift(t),t=t.isRoot()?null:t.getParent();return i},loadData:function(t){var i,n=this;t&&e.is(t.paths,"array")&&t.paths.length>0&&(i=this._createRoot(t.id,t.references,t.filter),this._model.prepareUpdate(),this._model.addRoot(i),this._createTree(i,t,function(){n._model.pushUpdate(),t.onComplete()}))},getTreeDocument:function(){return this._model},getRoots:function(){return this._model&&e.is(this._model.getRoots(),"array")?this._model.getRoots():[]},getSelectedPaths:function(){return this._model.getSelectedNodes().map(function(e){return e.getRirPath()})},preSelect:function(e,t){var i=this.getNodeFromPath(e);i&&(t?i.setAttribute("isPreSelected",!0):i.removeAttribute("isPreSelected"),this._computePreSelect([i],t))},getPathFromId:function(e,t){var i=this._getNode(this._model.getRoots()?this._model.getRoots()[0]:{},e,t);return i?i.getRirPath():[]},getNodeFromID:function(e,t){return this._getNode(this._model.getRoots()?this._model.getRoots()[0]:{},e,t)},highlight:function(e,t){var i=this.getNodeFromPath(e);i&&(t?i.setAttribute("isHighlighted",!0):i.removeAttribute("isHighlighted"),this._computeHighlight([i],t))},removeRoot:function(e){let t=this.getNodeFromPath([e]);if(t)return this.getTreeDocument().removeRoot(t)},empty:function(){this._model.empty()},updateOptions:function(e,t){this._model.prepareUpdate(),e.forEach(e=>{let i=this.getNodeFromPathV2(e);i&&i.updateOptions(t)}),this._model.pushUpdate()}})}),define("DS/DELWebOERTableViewComp/column/DELWebCfgColumnManager",["UWA/Core","UWA/Class","UWA/Class/Promise","DS/DELWebOERTableViewComp/column/views/ConfigurationColumns"],function(e,t,i,n){"use strict";return{checkCfgColumnsAvailability:function(){const e=["DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityColumns","DS/CfgWebAppEffectivityUX/scripts/CfgConfigurationContextColumn"];var t=this;return t._additionalColumnsAMD=[],new i(function(n,o){require(e,function(){var e=[];Array.prototype.slice.call(arguments).forEach(n=>{e.push(new i(function(e){n.isAdditionalColumnsAvailable(function(i){!0===i&&t._additionalColumnsAMD.push(n),e()})}))}),i.all(e).then(n).fail(o)})})},updateAttributes:function(t){var n=this,o=[],r=t.collectionView,a=[],s={pids:[],relids:[],pairs:{}},l=[];this._treeDocument=r.getTreeDocument(),e.is(this._additionalColumnsAMD,"array")&&this._additionalColumnsAMD.length>0&&this._areCfgColumnsVisible(r)&&t.startNodeIndex>=0&&t.endNodeIndex>=0&&e.is(r.model,"array")&&(o=r.model.slice(t.startNodeIndex,t.endNodeIndex+1)).length>0&&(a=o.filter(t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled))).length>0&&(this._updateCfgColumnsFilledFlag(a,!1),a.forEach(e=>{e.getReferenceId()&&-1===s.pids.indexOf(e.getReferenceId())&&s.pids.push(e.getReferenceId()),e.getInstanceId()&&s.relids.push(e.getInstanceId())}),this._additionalColumnsAMD.forEach(t=>{l.push(new i(function(i){t.updateAttributes(s,function(t){var n=e.is(t,"string")?JSON.parse(t):t;i(n)})}))}),i.all(l).then(function(t){var i=t.reduce((t,i)=>e.extend(t,i,!0),{});n._updateCfgColAttributes(i,a),n._updateCfgColumnsFilledFlag(a,!0)}).fail(function(e){n.logger.error("Failed to get configuration columns info : ",e)}))},getCfgColumnsConfig:function(){var e=[],t={};return this._additionalColumnsAMD.forEach(t=>{e.push(...t.getManagedColumnNames())}),e.forEach(e=>{n[e]&&(t[e]=n[e],t[e].getCellTypeRepresentation=n.getCellTypeRepresentation,t[e].hasCellValue=n.hasCellValue,t[e].getCellValue=n.getCellValue)}),t},_areCfgColumnsVisible:function(e){var t=[];return this._additionalColumnsAMD.forEach(e=>{t.push(...e.getManagedColumnNames())}),t.some(function(t){return e.getColumnOrGroup(t)&&!0===e.getColumnOrGroup(t).visibleFlag})},_updateCfgColumnsFilledFlag:function(e,t){if(this._treeDocument){this._treeDocument.prepareUpdate();for(let i of e)i.updateOptions({areCfgColumnsFilled:t});this._treeDocument.pushUpdate()}},_updateCfgColAttributes:function(t,i){var n=this,o=function(e){n._treeDocument&&(n._treeDocument.prepareUpdate(),Object.keys(e).forEach(t=>{(function(e){return i.filter(t=>((e,t)=>e===t.getReferenceId())(e,t)||((e,t)=>!t.isRoot()&&e===t.getInstanceId())(e,t))})(t).forEach(i=>{i.updateOptions({grid:e[t]})})}),n._treeDocument.pushUpdate())};e.is(t.pids,"object")&&o(t.pids),e.is(t.relids,"object")&&o(t.relids)}}}),define("DS/DELWebOERTableViewComp/model/DELWebOERTableViewModel",["UWA/Core","UWA/Class","DS/DELWebOERTableViewComp/model/DELWebOERItemDocument","DS/DELWebOERTableViewComp/model/SelectionManager","text!DS/DELWebOERTableViewComp/assets/json/ServicePayloads.json"],function(e,t,i,n,o){"use strict";const r="resourceid",a="ds6w:label",s="ds6w:status",l="ds6w:type",d="ds6wg:revision",u="icon",c="Path",h="ds6w:globalType",g="ds6w:Instance",p="VPMRepInstance",m="IPML.IconName",f="from",b="to",C="Requirement",E=1;return t.extend(n,{init:function(e){if(this.executionContext=e.executionContext,this.PPRTYPES=this.executionContext.getComponent("DELCommonUtilsServices").PPRTYPES,!e.webservices)throw new Error("webservices not found");this.webservices=e.webservices,this.createDocument(),this._parent(e)},createDocument:function(){this._document=new i},getContextId:function(e){return e?e.occurrence&&e.occurrence.length>0?e.occurrence[0]:e.id:null},getData:async function(t){let i,n=this,D=JSON.parse(o),I=D.expandV2,R=function(e,t,i){if(i){let n=i.split(".");"reference"===n[1]?e.push(n[0]):"instance"===n[1]&&t.push(n[0])}};!function(i){i.batch.expands[0].root.physical_id=t.id,i.batch.expands[0].filter=function(){let i=[],n=[],o=function(t){let i;t&&t.length>0&&(i=e.is(t[0],"string")?[t]:t,n=n.concat(i.map(e=>({physical_id_path:e}))))},r=t||{};return r.filter&&i.push(r.filter),o(r.occurrence),o(r.predecessors),n.length>0&&i.push({prefix_filter:{prefix_path:n}}),0===i.length&&i.push({all:1}),{and:{filters:i}}}(),e.is(t.Columns,"array")&&t.Columns.forEach(function(e){R(i.outputs.select_object,i.outputs.select_relation,e.dataIndex)}),t.model&&Object.keys(t.model).forEach(function(e){t.model[e]&&(i.batch.expands[0][e]=t.model[e])})}(I),i=await n.webservices.getProgressiveExpand(I);let y=[];if(e.is(t.Columns)){if(t.Columns.find(e=>e.dataIndex===C)){let e=D.getItemPathsHavingRequirement,i={};e.batch.expands[0].root.physical_id=t.id,(await n.executionContext.getComponent("DELCommonUtilsServices").getProgressiveExpand(e)).results.forEach(e=>{if(e.Path){let t=e.Path.slice(0,-2);i[t]||(i[t]=!0,y.push(t))}})}}let w=function(i){var o={references:{},instances:{},paths:[]},C=[],E=[],D=!(!t.pprType||t.pprType!==n.PPRTYPES.RESOURCE),I=function(e){return{label:e.label,icon:e.icons[0],revision:e.grid[d+".reference"]}};return e.is(t.Columns,"array")&&t.Columns.forEach(function(e){R(E,C,e.dataIndex)}),e.is(i,"array")&&i.forEach(i=>{if(i[c])o.paths.push(i[c]);else if(i[h]===g||i[l]===p){if(o.instances[i[r]]={instanceId:i[r],type:i[l],grid:{}},function(i){let n=!1;return t&&t.treeOptions&&e.is(t.treeOptions.typesToExclude,"array")&&(n=t.treeOptions.typesToExclude.includes(i)),n}(i[l])&&i[f]&&i[b]&&o.references[i[f]]&&o.references[i[b]]){let t=o.references[i[f]],n=o.references[i[b]];e.is(t[b],"array")?t[b].push({link:i[l],data:I(n)}):(t[b]=[],t[b].push({link:i[l],data:I(n)})),e.is(n[f],"array")?n[f].push({link:i[l],data:I(t)}):(n[f]=[],n[f].push({link:i[l],data:I(t)}))}C.forEach(e=>{o.instances[i[r]].grid[e+".instance"]=i[e]?i[e]:""})}else o.references[i[r]]={referenceId:i[r],label:i[a],grid:{hideShow3D:1},type:i[l],icons:D?[function(e){let t=n.executionContext.getComponent("DELCommonUtilsServices").get3DSpaceUrl()+"/snresources/images/icons/small/";return e?t+e+".png":""}(i[m])]:[i[u]]},E.forEach(function(e){o.references[i[r]].grid[e+".reference"]=e===s?i[e]?i[e].split(".")[1]:"":i[e]})}),o}(i.results);return y.length>0&&w&&w.references&&y.forEach(e=>{let t=e[e.length-1];w.references[t]&&w.references[t].grid?w.references[t].grid[C]=E:(w.references[t]={},w.references[t].grid={},w.references[t].grid[C]=E)}),w},loadModel:async function(t){let i=this,n=this.getContextId(t);t.id=n;let o=await this.getData(t);return await new e.Promise(function(e){o.onComplete=function(){e()},i._document.removeRoot(t.id),i._document.loadData(Object.assign(o,t))}),t},getTreeDocument:function(){return this._document.getTreeDocument()},removeRoot:function(e){this._document.removeRoot(e)},empty:function(){this.webservices.abortAllRequests(),this._document.empty()},update3DVisibility:function(e,t){let i=e.path,n=function(t,i){return((e.attributes||{})[t]||{})[i]},o=this._document.getTreeDocument();i&&(o.prepareUpdate(),i.forEach(e=>{if(!0===n(e[e.length-1],"isCustom"))return;let i=this._document.getNodeFromPathV2(e,!0);i&&(!0===n(i.getReferenceId(),"isPartial")?i.update3DVisibility(i.ENUM_3DVISIBILITY.PARTIAL):t===i.ENUM_3DVISIBILITY.ON&&i.get3DVisibility()===i.ENUM_3DVISIBILITY.PARTIAL?i.update3DVisibility(i.ENUM_3DVISIBILITY.PARTIAL):i.update3DVisibility(t),i.changeParent3DVisibility())}),o.pushUpdate())},getNodeFromPath:function(e){return this._document.getNodeFromPath(e)},getNodeFromPathV2:function(e,t){return this._document.getNodeFromPath(e,t)},getPathFromId:function(e,t){return this._document.getPathFromId(e,t)},reset3DVisibility(){var t,i=[],n=this.getTreeDocument();n&&(t=n.getRoots(),e.is(t,"array")&&(n.prepareUpdate(),t.forEach(e=>{let t=e.getAll3DHiddenChildren();i.push(e),(i=(i=i.concat(t.hidden)).concat(t.partialHidden)).forEach(e=>{e.update3DVisibility(e.ENUM_3DVISIBILITY.ON)}),i=[]}),n.pushUpdate()))}})}),define("DS/DELWebOERTableViewComp/column/DELWebColumnManager",["UWA/Core","UWA/Class","UWA/Class/Promise","DS/DELWebOERTableViewComp/column/DELWebCfgColumnManager","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERTableViewComp/column/views/PositionMatrix","DS/DELWebOERTableViewComp/column/views/Responsible","DS/DELWebOERTableViewComp/column/views/BuildUp","DS/DELWebOERTableViewComp/column/views/Requirement","DS/DELWebOERTableViewComp/column/views/Relation","text!DS/DELWebOERTableViewComp/assets/json/AttributeColumnMapping.json","css!DS/DELWebOERTableViewComp/assets/css/maturity.css"],function(e,t,i,n,o,r,a,s,l,d,u){"use strict";const c="dicoType",h={Title:{dataIndex:"tree",pinned:"left",editionPolicy:"EditionOnOver",width:"250px",height:"40px",getCellKPIColor:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options.grid.biColor)return e.nodeModel.options.grid.biColor}},Requirement:l,InstanceLabel:{icon:"flow-cascade",typeRepresentation:"string",width:"150px",height:"40px"},PositionMatrix:r,Revision:{typeRepresentation:"string",width:"60px",height:"40px",alignment:"center"},Description:{typeRepresentation:"string",width:"100px",height:"40px",alignment:"center"},Owner:a,Maturity:{kind:"string",width:80,height:"40px",editableFlag:!1,typeRepresentation:"tag",className:"lc-maturity-state",alignment:"center",customisation:{exportable:{lock:!1,value:!0}},ds6w:"ds6w:status",visibleFlag:!0,getCellClassName:function(e,t){return t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]}},HideShow3D:{dataIndex:"hideShow3D",sortableFlag:!1,alignment:"center",width:30,height:"40px",pinned:"right",icon:o.getAssetsUrl("DELWebOERTableViewComp","icons/32/I_3DColumn.png"),editableFlag:!0,groupableFlag:!1,editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",getCellSemantics:function(e,t){var i,n=t&&t.nodeModel?t.nodeModel:null;if(n)switch(n.getAttributeValue("hideShow3D")){case n.ENUM_3DVISIBILITY.OFF:i="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-off pad_eye_off wux-ui-3ds-lg";break;case n.ENUM_3DVISIBILITY.ON:i="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye pad_eye wux-ui-3ds-lg";break;case n.ENUM_3DVISIBILITY.PARTIAL:i="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-partial pad_eye_partial wux-ui-3ds-lg"}return{icon:{iconClasses:i}}}},BuildUp:s,Menu:{width:"45px",completed:!0,dataIndex:"ContextualMenuColumn",typeRepresentation:"chevronMenuIcon",pinned:"right",editableFlag:!1,sortableFlag:!1,groupableFlag:!1,resizableFlag:!1,selectableFlag:!1,printableFlag:!1,alignment:"center",getCellValue:function(){return{}}},Scope:d,ResultingProduct:d};var g={typeRepresentation:"string",alignment:"left"},p={attributeConfig:JSON.parse(u),destroy:function(){this.attributeConfig=null},createColumnConfiguration:function(t){var n,o,r=this,a=r._getNls();return t=t||{},i.all([this.checkCfgColumnsAvailability(),this._dictionaryModel.fetchAttributesAndDimension((n=t.Columns,o={},n.forEach(e=>{let t=e.dataIndex||"",i=r.getAttributeName(t);e[c]&&(o[e[c]]?o[e[c]].push(i):o[e[c]]=[i])}),Object.keys(o).map(e=>({type:e,attributes:o[e]}))))]).then(function(){Object.assign(h,r.getCfgColumnsConfig());let n=[];return e.is(t.Columns,"array")&&t.Columns.forEach(function(t){n.push(e.clone(t))}),i.resolve((o=[],n.forEach(function(e){var t;(t=r.getColumnConfiguration(e))&&(t.text=t.text?a.get(t.text):"",t.description=t.description?a.get(t.description):"",t.dataIndex||(t.dataIndex=e.dataIndex),e.dicoType&&(t.dicoType=e.dicoType),e.icon&&(t.icon=e.icon),t.getCellClassName?t.getCellClassName=t.getCellClassName.bind(null,e.dataIndex):t.getCellClassName=function(e,t){var i="";return t.nodeModel&&!0===t.nodeModel.options.isBeingCut&&(i="del-ppr-component-dgv-cutNode"),i}.bind(null,e.dataIndex),t.getCellSemantics&&(t.getCellSemantics=t.getCellSemantics.bind(null,e.dataIndex)),t.getCellTooltip&&(t.getCellTooltip=t.getCellTooltip.bind(null,e.dataIndex)),t.getCellValue&&(t.getCellValue=t.getCellValue.bind(null,e.dataIndex)),t.getCellValueForExport&&(t.getCellValueForExport=t.getCellValueForExport.bind(null,e.dataIndex)),e.callbacks&&(t.callbacks=e.callbacks),o.push(t))}),o));var o})},getColumnConfiguration:function(e){return e&&h[e.name]?Object.assign({},h[e.name],e.columnProperties?e.columnProperties:{}):this.getColumnConfig(e)},getAttributeName:function(e){return e?e.split(".").slice(0,-1).join("."):null},getColumnConfig:function(e){let t,i=this,n=e?this._dictionaryModel.getAttributeInfo(e.dicoType,this.getAttributeName(e.dataIndex)):null,o=e&&e.columnProperties?e.columnProperties:{};return n&&n.Type&&(t=g,(t=Object.assign({},t,this.attributeConfig[n.Type],{text:n.NLS},o)).semantics=Object.assign({},function(e){let t,n,o={},r=function(e){Object.assign(o,e)};return e&&(t=i._dictionaryModel.getUnit(e.Magnitude),n=i._dictionaryModel.getAuthorizedValues(e),t&&r({units:t.NLSName}),n&&n.length>0&&r({possibleValues:n.map((e,t)=>({value:t+1,label:e.NLS}))})),o}(n),t.semantics)),t}};return Object.assign(p,n),p}),define("DS/DELWebOERTableViewComp/TableViewComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERTableViewComp/column/DELWebColumnManager","DS/DELWebOERCommonUtils/mixins/RootActionHandlerExtMixin","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/mixins/IndexServicesMixin","DS/DELWebOERTableViewComp/model/DELWebOERTableViewModel","DS/DELWebOERTableViewComp/model/DELWebDictionaryModel","DS/DELWebOERTableViewComp/view/DELWebOERDataGridView","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/DELWebOERTableViewComp/utils/Utils"],function(e,t,i,n,o,r,a,s,l,d){"use strict";const u={root:"root",intermediate:"intermediate",leaf:"leaf",all:"all"},c={ON:1,OFF:0,PARTIAL:2};class h extends e{constructor(e){if(super(e),!e.appConfigPath||!e.nlsAMDPath)throw new Error("Invalid input, appConfigPath and nlsAMDPath is mandatory");this.configModulePath=e.appConfigPath,this.nlsAMDPath=e.nlsAMDPath,this._columns=[],this._contextuMenuOptions=[],this.rootsLoaded=[],this._container=null}async initialize(){await super.initialize(),this._subscribeEvents(),this._compConfig=await this.loadJson(this.configModulePath),this._nls=await this.loadNLS(this.nlsAMDPath),this._contextualMenu=UWA.is(this._compConfig.contextualMenu,"array")?this._compConfig.contextualMenu:[],this._dictionaryModel=new a({executionContext:this.getExecutionContext()}),this._columns=await this.createColumnConfiguration(this._compConfig),this.createModel(this._compConfig)}createModel(e={}){this._model=new r({executionContext:this.getExecutionContext(),enableCrossPreHighlight:e.enableCrossPreHighlight,webservices:n.bindComponentToMixin(this,o)})}_subscribeEvents(){[{eventName:{event:"onModelChange:roots"},callback:this.onRootsChange},{eventName:{event:"onRefresh"},callback:this.refresh},{eventName:{event:"DS/DELWebViewer/onHideNode"},callback:this._onHide},{eventName:{event:"DS/DELWebViewer/onShowNode"},callback:this._onShow},{eventName:{event:"onFocus"},callback:this._onFocus},{eventName:{event:"onBIColorize"},callback:this._onBIColorize},{eventName:{event:"onBIUnColorize"},callback:this._onBIUnColorize},{eventName:{event:"onApplyNGFilter"},callback:this._onApplyFilter}].forEach(e=>{this.subscribe(e.eventName,e.callback.bind(this))})}_onShow(e){this._tableView&&!this._tableView.isColumnDisabled("hideShow3D")&&this._model.update3DVisibility(e.data,c.ON)}_onHide(e){this._tableView&&!this._tableView.isColumnDisabled("hideShow3D")&&this._model.update3DVisibility(e.data,c.OFF)}_onFocus(e){if(this._tableView&&e.data.path){let t=this._model.getNodeFromPath(e.data.path);t&&this._tableView.ensureNodeModelVisible(t,!1,!0,.5)}}_onBIColorize(e){if(e&&e.data){let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);t.hasHandler("DELWebOERTableViewCompBIColorize")&&t.executeHandler({id:"DELWebOERTableViewCompBIColorize",args:{data:e.data,treeDocument:this._model.getTreeDocument()}})}}_onBIUnColorize(e){let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);t.hasHandler("DELWebOERTableViewCompBIUnColorize")&&t.executeHandler({id:"DELWebOERTableViewCompBIUnColorize",args:{data:e.data,treeDocument:this._model.getTreeDocument()}})}async _onApplyFilter(e){let t,i,n,o=this,r=this.getRoots();r&&e&&e.data&&e.data.filterRootIds&&1===e.data.filterRootIds.length&&(t=!0!==e.data.empty?e.data.CVQueryV2.filter:null,i=e.data.filterRootIds[0],(n=r.find(e=>e.id===i))&&(n.filter=t,await o.removeRoots({items:[n]}),await o.addRoots({items:[n]})))}async refresh(){this._model.empty(),await this.addRoots({items:this.getRoots()})}getRoots(){return this.rootsLoaded}async addRoots(e){var t=this;if(e&&UWA.is(e.items,"array"))if(this._tableView){this._tableView.displayProgressBar(!0),n.markStart("load2DStructure");let i=[];e.items.forEach(e=>{this._compConfig.authorizedPPRTypes.includes(e.pprType)&&(i.push(t._model.loadModel(Object.assign({},e,this._compConfig))),this.rootsLoaded.find(t=>t.id===e.id)||this.rootsLoaded.push(e))}),await Promise.allSettled(i).then(function(i){i.length>0&&i.forEach(i=>{if("fulfilled"===i.status){let n=e.items.find(e=>e.id===i.value.id);t.publish({event:"on2DRootAdded",data:{data:n}})}else if("rejected"===i.status){t.logger.error(i.reason),t.publish({event:"on2DRootAddFailed",data:{}}),t.getNotificationManager().addNotif({level:"error",message:t._nls.get("Error.AddRoots.Message")})}})}),t._tableView.displayProgressBar(!1),n.markEnd("load2DStructure",t.getRegisteredIdentifier()+" Tree structure created in : ")}else this.logger.warn("Container not available to render Table view, use setContainer api to create Table View");else this.logger.error("Invalid input , please check the API documentation and pass all the required information")}async removeRoots(e){var t=this;e&&UWA.is(e.items,"array")&&e.items.forEach(e=>{t._model.removeRoot(e.id),t.rootsLoaded=t.rootsLoaded.filter(t=>!(e.id===t.id))})}setContainer(e){this._container=e,this._createTableView(this._container)}empty(){this._model.empty(),this._tableView&&(this._tableView.destroy(),this._tableView=null),this._container&&(this._container.destroy(),this._container=null),this.rootsLoaded=[]}async clean(){await super.clean(),this.empty(),this._dictionaryModel.empty()}async destroy(){await super.destroy(),this.empty(),t.destroy()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.addRoots=this.addRoots.bind(this),this.publicAPI.removeRoots=this.removeRoots.bind(this),this.publicAPI.getRoots=this.getRoots.bind(this),this.publicAPI.empty=this.empty.bind(this),this.publicAPI.setContainer=this.setContainer.bind(this),this.publicAPI.setOptions=this.setOptions.bind(this),this.publicAPI.getPathFromId=this._model.getPathFromId.bind(this._model),this.publicAPI.getSelectionManager=this._model.getSelectionManager.bind(this._model),this.publicAPI.getSelectedPaths=this._model.getSelectedPaths.bind(this._model),this.publicAPI.clearSelection=this._model.clearSelection.bind(this._model),this.publicAPI.highlight=this._model.highlight.bind(this._model),this.publicAPI.unhighlight=this._model.unhighlight.bind(this._model),this.publicAPI.clearHighlight=this._model.clearHighlight.bind(this._model),this.publicAPI.getPSOManager=this._model.getPSOManager.bind(this._model),this.publicAPI.preHighlight=this._model.preHighlight.bind(this._model),this.publicAPI.unPreHighlight=this._model.unPreHighlight.bind(this._model),this.publicAPI}_createTableView(e){var t=this;this._tableView||(this._tableView=new s({identifier:t.getRegisteredIdentifier(),treeDocument:this._model.getTreeDocument(),columns:this._columns,container:e,executionContext:t.getExecutionContext(),onContextualMenu:t._onContextualMenu.bind(t),onDelayedModelDataRequest:function(e){t.updateAttributes(e)},onClick:function(e,i){let n=t.getRegisteredIdentifier();if(i||t.publish({event:"onClickOnEmptyArea"}),UWA.is(i)&&-1!==i.rowID&&e.dsModel.layout&&!0!==e.dsModel.layout.getColumnDisabled(i.columnID)){let o=e.dsModel.layout.getDataIndexFromColumnIndex(i.columnID),r=(t._columns.find(e=>e.dataIndex===o)||{}).callbacks;r&&r.onClick&&r.onClick.handlerId&&t.executeCommand({handlerId:r.onClick.handlerId,args:{cell:i,node:i.nodeModel,treeDocument:t._model.getTreeDocument(),origin:n,...r.onClick.args}})}}}),this._compConfig&&this._compConfig.tableView&&this._compConfig.tableView.registerTypeRepresentations&&this._tableView.registerTypeRepresentations(this._compConfig.tableView.registerTypeRepresentations))}updateContextualMenu(e){this._contextuMenuOptions=UWA.is(e,"array")?e:[]}async _onContextualMenu(e){let t=this.getExecutionContext().getComponent(WAfrStandardComponentKey.UIComponent).getContextualUIComponentManager(),i=[],n=this;if(e&&e.cellInfos&&-1!==e.cellInfos.rowID){if(this._contextualMenu.forEach(e=>{let n;switch(e.type){case"WAfrDefaultHandlerItem":n=t.buildDefaultHandlerContextMenuItem(e.handlerId),Object.assign(n,e);break;case"WAfrCheckHandlerItem":n=t.buildCheckHandlerContextMenuItem(e.handlerId),Object.assign(n,e);break;default:n=e}n.type="PushItem",i=i.concat(UWA.is(n,"array")?n:[n])}),(i=i.filter(function(t){var i=e.cellInfos.nodeModel;return(!t.availableOn||!t.availableOn.position||(!!t.availableOn.position.includes(u.all)||(i.isRoot()?t.availableOn.position.includes(u.root):i.isLeaf()?t.availableOn.position.includes(u.leaf):t.availableOn.position.includes(u.intermediate))))&&(!t.availableOn||!t.availableOn.column||-1!==t.availableOn.column.values.indexOf(i.getAttributeValue(t.availableOn.column.name)))}).map(function(t){return UWA.is(n._contextuMenuOptions,"array")&&n._contextuMenuOptions.length>0&&n._contextuMenuOptions.forEach(e=>{t.handlerId===e.handlerId&&Object.assign(t,e)}),Object.assign(t,{action:{callback:function(){l.trackChanges({category:"ContextualMenu2DStructure",action:t.handlerId,label:t.handlerId,dims:{pd1:n.getRegisteredIdentifier()},executionContext:n.getExecutionContext()}),n.executeCommand({handlerId:t.handlerId,args:{node:e.cellInfos.nodeModel,treeDocument:n._model.getTreeDocument(),origin:n.getRegisteredIdentifier(),menuParams:t}})}}})})).find(e=>"OpenWith"===e.identifier)){let t=await d.openWithApps({node:e.cellInfos.nodeModel,executionContext:n.getExecutionContext()});i=i.map(e=>("OpenWith"===e.identifier&&(e=t),e))}}return i}_getNls(){return this._nls}getTableView(){return this._tableView}getModel(){return this._model}setOptions(e={}){let t=this;Object.keys(e).forEach(i=>{t._compConfig||(t._compConfig={}),t._compConfig[i]=e[i]})}getComponentConfig(){return this._compConfig}}return h.prototype.mixinProperties(h,t),h.prototype.mixinProperties(h,i),h.prototype.mixinProperties(h,o),h});