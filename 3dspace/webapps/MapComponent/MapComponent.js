var __extends=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),__rest=this&&this.__rest||function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o};define("DS/MapComponent/Map/GVMap",["require","exports","DS/ReactLoader/React","DS/SocialGlobeAPI/GlobeAPI"],function(e,t,o,r){"use strict";return function(e){function t(t){var o=e.call(this,t)||this;return o.geocodingServiceUrl="https://3dmap-geocoding.uwglobe.com/nominatim",o}return __extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.geoJson,o=e.cameraPosition,n=e.markers,i=e.markersSelected,a=e.onSelect,s=this.props.tms,c=s.url,p=(s.extension,s.maxLvl,{mapServiceUrl:c,geocodingServiceUrl:this.geocodingServiceUrl});this._api=new r("gv-map","",p),t&&this._api.addGeoJson(t),o&&this.moveTo(o),n&&this.addMarkers(n),i&&this.updateSelection(i),a&&this._api.setOnSelectCallback(a)},t.prototype.componentDidUpdate=function(e){var t=this.props,o=t.geoJson,r=t.cameraPosition,n=t.markers,i=t.markersSelected,a=t.onSelect;e.geoJson!==o&&this._api.addGeoJson(o),r&&JSON.stringify(e.cameraPosition)!==JSON.stringify(r)&&this.moveTo(r),n&&e.markers!==n&&this.updateMarkers(e.markers,n),i&&e.markersSelected&&this.updateSelection(i),a&&e.onSelect!==a&&this._api.setOnSelectCallback(a)},t.prototype.updateSelection=function(e){console.log("updateSelection"),console.log(e),void 0===e[0]?this._api.unselect(e):this._api.select(e)},t.prototype.updateMarkers=function(e,t){var o;if(e){var r=e.filter(function(e){return!t.includes(e)});o=t.filter(function(t){return!e.includes(t)}),this.removeMarkers(r)}this.addMarkers(null!=o?o:t)},t.prototype.addMarkers=function(e){var t=this;e.forEach(function(e){t._api.addMarker(e.lat,e.lon,e.title,e.description,e.options)})},t.prototype.removeMarkers=function(e){var t=this;e.forEach(function(e){t._api.removeMarker(e.title)})},t.prototype.moveTo=function(e){var t=e.lat,o=e.lon,r=__rest(e,["lat","lon"]);void 0!==t&&this._api.moveCamera(t,o,r)},t.prototype.render=function(){return o.createElement("div",{className:"gv-map",id:"gv-map",style:{height:"100%",width:"100%"}})},t}(o.Component)});