define("DS/DMUBaseCtxCommands/DMUHideShowThumbnailCmd",["DS/CATWebUXComponents/DMUCommand","DS/DMUBaseExperience/DMUContextManager"],function(e,t){"use strict";return e.extend({init:function(e){e.mode="shared",e.repeatMode=!1,e.isAsynchronous=!0,this._parent(e);var n=this,a=(e.frameWindow||this.getFrameWindow()).getViewer();this.beginExecute=function(){var e=t.giveEventsController({viewer:a});e&&e.fireEvent("onHideShowThumbnailRequested"),n.cancel()}}})}),define("DS/DMUBaseCtxCommands/DMUGenerateIssueFromSelectionCmd",["DS/CATWebUXComponents/DMUCommand","DS/PADUtils/PADContext","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager","DS/DMUControls/DMUInfoModalDiv","DS/CATWebUXComponents/DMUCommandsManager","i18n!DS/DMUBaseCtxCommands/assets/nls/DMUBaseCtxCommands"],function(e,t,n,a,r,i,o){"use strict";return e.extend({init:function(e){e.mode="shared";var l,s=this;this._parent(e),this.beginExecute=function(){var e=t.get(),d=n.giveEventsController({viewer:s.getFrameWindow().getViewer()}),g=n.getReviewContext({viewer:s.getFrameWindow().getViewer()});(l=new r).display({modal:!0,frmWindow:s.getFrameWindow(),type:"load",message:o.CreatingHighlight});var m,u=g.getValidation().getHighlights(),c=g.getValidation().getMarkups(),C=a.get();if(1===C.length)var v=C[0].pathElement.getLastElement(!0);if(v.getDMUType&&("DMUSlide"===v.getDMUType()||"DMUComment"===v.getDMUType()))for(let e=0;e<u.length;e++)if(!u[e]._lIssuesIDs.length)for(let t=0;t<c.length;t++){var h=c[t].getRepRef().getMarkupContent()?c[t].getRepRef().getMarkupContent().getSlides():[];for(let t=0;t<h.length;t++)if(h[t].getNode()===v&&u[e].getPresentationSlideID()===h[t].getAttribute("sUuid")&&(m=u[e]),h[t].getDMUObjects&&h[t].getDMUObjects().length){var f=h[t].getDMUObjects();for(let t=0;t<f.length;t++)if(f[t].getDMUComments()&&f[t].getDMUComments().length){var p=f[t].getDMUComments();for(let t=0;t<p.length;t++)p[t].getNode()===v&&u[e].getPresentationSlideID()===p[t].getAttribute("sUuid")&&(m=u[e])}}}if(m){var D=d.addEvent("onHighlightSelectionCompleted",function(){d.removeEvent(D);var t,n=m.getPlmID();(t="issueTemplate"===localStorage.getItem("issueCreationType")?i.getCommand("CATWebUXGenerateIssueTemplateHdr",e.getCommandContext()):i.getCommand("CATWebUXGenerateIssueHdr",e.getCommandContext()))&&t.begin();const a=d.addEvent("onTICCreationComplete",function(e){d.fireEvent("onTICFromSelectionCreationComplete",e),d.fireEvent("onIssueDataRequested",{physicalId:e.ticID,onComplete:function(e){var t={description:e.issueDescription,name:e.issueTitle,priority:e.issuePriority,objectId:n};d.fireEvent("updateHighlightAttributes",t)}}),d.removeEvent(a),s.end()}),r=d.addEvent("onTICCreationCancel",function(){(event&&event.target&&"create-view-footer-cancel-btn"===event.target.id||event&&event.target&&event.target.title&&"Close"===event.target.title)&&d.removeEvent(a),d.removeEvent(r)})});d.fireEvent("onExpanderSelectRequested",{type:"Highlight",id:m.getPlmID()})}else{var S=i.getCommand("DMUAddHighlightHdr",e.getCommandContext());S&&(S.options.arguments[0].Rating="Undefined",S.begin());const t=d.addEvent("onHighlightCreationCompleted",function(n){S.options.arguments[0].Rating="Low";var a,r=n.id;(a="issueTemplate"===localStorage.getItem("issueCreationType")?i.getCommand("CATWebUXGenerateIssueTemplateHdr",e.getCommandContext()):i.getCommand("CATWebUXGenerateIssueHdr",e.getCommandContext()))&&a.begin();const o=d.addEvent("onTICCreationComplete",function(e){d.fireEvent("onTICFromSelectionCreationComplete",e),d.fireEvent("onIssueDataRequested",{physicalId:e.ticID,onComplete:function(e){var t={description:e.issueDescription,name:e.issueTitle,priority:e.issuePriority,objectId:r};d.fireEvent("updateHighlightAttributes",t)}}),d.removeEvent(o),s.end()}),l=d.addEvent("onTICCreationCancel",function(){(event&&event.target&&"create-view-footer-cancel-btn"===event.target.id||event&&event.target&&event.target.title&&"Close"===event.target.title)&&d.removeEvent(o),d.removeEvent(l)});d.removeEvent(t)})}};var d=this._destroy.bind(this);this._destroy=function(){l&&(l.destroy(),l=null),s.end?s.end():s.done(),d()}}})}),define("DS/DMUBaseCtxCommands/DMUPropertiesCmd",["UWA/Core","DS/CATWebUXComponents/DMUCommand","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager","DS/Windows/Dialog","DS/Controls/Button","i18n!DS/DMUBaseCtxCommands/assets/nls/DMUBaseCtxCommands"],function(e,t,n,a,r,i,o){"use strict";return t.extend({init:function(t){t.mode="shared",this._parent(t);var l=this;this.beginExecute=function(){var t,s=n.getReviewContext({viewer:l.getFrameWindow().getViewer()});if(s){for(var d=a.get(),g=[],m=[],u=0;u<d.length;u++){var c=s.getDMUObjectFromPathElement(d[u].pathElement);c&&(-1===g.indexOf(c.getType())?(0===g.length&&m.push(c),g.push(c.getType())):m.push(c))}if(1===g.length&&m.length>0&&m[0]&&m[0].getPropertiesObject){var C=m[0].getPropertiesObject();if(C){var v=null,h=e.createElement("div");C.getPropertiesDisplay(m,h),C.getCustomParameter&&(v=C.getCustomParameter());var f=function(){var e=C.getPropertiesToSet();if(e.length>0){for(var t=0;t<m.length;t++)m[t].setAttributes(e);C.afterSetProperties(m,e);var a=n.giveEventsController({viewer:l.getFrameWindow().getViewer()});a&&a.fireEvent("onSaveRequested")}},p=new i({emphasize:"primary",label:o.propertiesPanel.okLabel,onClick:function(){f(),t.close?t.close():t.destroy()}}),D=new i({label:o.propertiesPanel.applyLabel,onClick:f}),S=new i({label:o.propertiesPanel.closeLabel,onClick:function(){t.close?t.close():t.destroy()}});if((t=new r({modalFlag:!0,ensureHeightDefinitionOnHierarchy:!0,title:o.propertiesPanel.title,content:h,immersiveFrame:this.getFrameWindow().getImmersiveFrame(),buttons:{Abort:S,Ok:p,Apply:D},resizableFlag:!(!v||!v.resizableFlag)&&v.resizableFlag})).addEventListener("close",function(){l.end()}),v&&v.heightToWidthRatio&&t.getContent){var M=t.getContent();if(M&&M.getSize){var U=M.getSize();U.height&&U.width&&(t.height=U.width*v.heightToWidthRatio,t.fire("resize"))}}}}}this.done()}}})}),define("DS/DMUBaseCtxCommands/DMUSetIssueCreationTypeCmd",["DS/CATWebUXComponents/DMUCommand","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager"],function(e,t,n){"use strict";return e.extend({init:function(e){this._parent(e);var a=this;a._bCmdState=!1;var r=(e.frameWindow||this.getFrameWindow()).getViewer();this.beginExecute=function(){var e=n.get();for(let t=0;t<e.length;t++)e[t].pathElement.getLastElement().getDMUType&&"Highlights"===e[t].pathElement.getLastElement().getDMUType()&&("DMUSetIssueCreationTypeHdr"===a.options.ID?e[t].pathElement.getLastElement().getOwner().setIssueCreationType("issue"):e[t].pathElement.getLastElement().getOwner().setIssueCreationType("issueTemplate"));var i=t.giveEventsController({viewer:r}),o="DMUSetIssueCreationTypeHdr"===a.options.ID?"issue":"issueTemplate";i&&i.fireEvent("onSetIssueCreationTypeRequested",{type:o}),a.cancel()},this.getState=function(){return a._bCmdState},this.setState=function(e){a._bCmdState=e},this.initStatusBarState=function(){"DMUSetIssueCreationTypeHdr"===a.options.ID?this.setState(!0):this.setState(!1)},this.initStatusBarState()}})}),define("DS/DMUBaseCtxCommands/DMUContextCmd",["DS/CATWebUXComponents/DMUCommand","DS/Selection/CSOManager","DS/DMUBaseExperience/DMUContextManager"],function(e,t,n){"use strict";return e.extend({init:function(e){var t=e||{};t.mode="shared",this._parent(t),this._bCmdState=!1,this.getState=function(){return this._bCmdState},this.setState=function(e){this._bCmdState=e}},beginExecute:function(e){this._parent(e);for(var a=t.get(),r=[],i=[],o=n.getReviewContext({viewer:this.getFrameWindow().getViewer()}),l=0;l<a.length;l++){var s=o.getDMUObjectFromPathElement(a[l].pathElement);s&&r.push(s)}switch(this._id){case"DMUNoLeaderHdr":i.push({name:"bHasALeader",value:!1});break;case"DMUArrowLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"Arrow"});break;case"DMUBubbleLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"Bubble"});break;case"DMUCrossLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"Cross"});break;case"DMUSquareLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"Square"});break;case"DMUNoEndLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"No end"})}i.length>0&&r.forEach(function(e){for(var t=[],n=0;n<i.length;n++)void 0!==e.getAttribute(i[n].name)&&t.push(i[n]);t.length>0&&(e.setAttributes(t),e.refreshNode())}),this.getFrameWindow().getViewer().render(),o&&o.getCurrentSessionMarkup()&&o.getCurrentSessionMarkup().getCurrentSlide()&&o.getCurrentSessionMarkup().getCurrentSlide().fireEvent("onSlidePreviewRefreshRequired",{dmuObject:o.getCurrentSessionMarkup().getCurrentSlide()}),this.done()}})}),define("DS/DMUBaseCtxCommands/DMUBaseContextCmd",["DS/CATWebUXComponents/DMUCommand","DS/Visualization/ThreeJS_DS","DS/Selection/CSOManager","DS/DMUBaseExperience/DMUContextManager","DS/DMUBaseExperience/EXPToolsVisualization"],function(e,t,n,a,r){"use strict";let i=e.extend({init:function(e){var t=e||{};t.mode="shared",this._parent(t)},beginExecute:function(e){this._parent(e);var i,o=this;function l(){var e;o.getFrameWindow().getViewer().render(),(e=a.getReviewContext({viewer:o.getFrameWindow().getViewer()}))&&e.getCurrentSessionMarkup()&&e.getCurrentSessionMarkup().isVisible()&&e.getCurrentSessionMarkup().getCurrentSlide()&&e.getCurrentSessionMarkup().getCurrentSlide().fireEvent("onSlidePreviewRefreshRequired",{dmuObject:e.getCurrentSessionMarkup().getCurrentSlide()})}function s(e,t){if(e&&e.hasAttribute("fFontSize")&&-1===e.getType().indexOf("Picture")){var n=e.getAttribute("iFontSize");n=n?r.convertPixelToModel({sizeInPixels:n,viewer:e._viewer}):e.getAttribute("fFontSize"),"Increase"===t?e.setAttribute("fFontSize",n+1):n-1>0&&e.setAttribute("fFontSize",n-1),e.refreshNode(),l()}}var d,g=n.get(),m=this._id.replace("Marker_","").replace("Measure_","").replace("Section_",""),u=a.getReviewContext({viewer:this.getFrameWindow().getViewer()});for(i=0;i<g.length;i++)if(d=u.getDMUObjectFromPathElement(g[i].pathElement)){if("Marker3DStamp"!==d.getAttribute("sType"))switch(m){case"DMUDefaultStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#000000")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#ffffff")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!0},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#afafaf")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#3d3d3d")}]),d.refreshNode(),l());break;case"DMUMeasureStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#ffffff")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#368ec4")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#3d3d3d")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#3d3d3d")}]),d.refreshNode(),l());break;case"DMUPostitStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#000000")},{name:"sFontStyle",value:"italic"},{name:"cFillStyleColor",value:new t.Color("#fee000")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#ff8a2e")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#ff8a2e")}]),d.refreshNode(),l());break;case"DMUValidateStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#ffffff")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#57b847")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#477738")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#477738")}]),d.refreshNode(),l());break;case"DMUWarningStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#ffffff")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#ff8a2e")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#8f4c00")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#8f4c00")}]),d.refreshNode(),l());break;case"DMUCautionStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#ffffff")},{name:"sFontStyle",value:"bold"},{name:"cFillStyleColor",value:new t.Color("#cc092f")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#6d2828")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#6d2828")}]),d.refreshNode(),l());break;case"DMULightStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#000000")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#ffffff")},{name:"bIsFilled",value:!1},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#3d3d3d")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#3d3d3d")}]),d.refreshNode(),l())}switch(m){case"DMUIncreaseFontSizeHdr":s(d,"Increase");break;case"DMUDecreaseFontSizeHdr":s(d,"Decrease")}}this.cancel()}});return i.setMarkerStyle=function(e,t){if(t&&t.executionContext){let e=t.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);e&&t&&t.id&&e.executeHandler({id:t.id})}e&&e()},i.resetMarkerStyle=function(e,t){e&&e()},i}),define("DS/DMUBaseCtxCommands/DMUExpandCollapseAllCmd",["DS/CATWebUXComponents/DMUCommand","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager"],function(e,t,n){"use strict";return e.extend({init:function(e){e.mode="shared",e.repeatMode=!1,e.isAsynchronous=!0,this._parent(e);var a,r=this,i=(e.frameWindow||this.getFrameWindow()).getViewer();this.beginExecute=function(){var e=n.get();a=t.getEventsController({viewer:i});var o=this.options.arguments[0].Value;if(e.length){for(let t=0;t<e.length;t++){var l=e[t].pathElement.getLastElement().getDMUType();"Checks"===l&&"Expand"===o?a.fireEvent("onExpandRequested","DMUValidationCheck"):"Checks"===l&&"Collapse"===o?a.fireEvent("onCollapseRequested","DMUValidationCheck"):"Highlights"===l&&"Expand"===o?a.fireEvent("onExpandRequested","DMUValidationExposedPresentation"):"Highlights"===l&&"Collapse"===o&&a.fireEvent("onCollapseRequested","DMUValidationExposedPresentation")}r.cancel()}this.done()}}})}),define("DS/DMUBaseCtxCommands/DMUContextPointExtremityTypeCmd",["DS/CATWebUXComponents/DMUCommand","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager"],function(e,t,n){"use strict";return e.extend({init:function(e){e.mode="shared",this._parent(e);var a=this;a._bCmdState=!1,this.beginExecute=function(){var e=t.getReviewContext({viewer:a.getFrameWindow().getViewer()});if(e){var r=n.get();if(r.length>0){var i="NA",o="NA";switch(this._id.includes("PointTypeHdr")?o="PointType":this._id.includes("ExtremityTypeHdr")&&(o="ExtremityType"),this._id){case"DMUCross"+o+"Hdr":i="Cross";break;case"DMUPlus"+o+"Hdr":i="Plus";break;case"DMUConcentric"+o+"Hdr":i="Concentric";break;case"DMUCoincident"+o+"Hdr":i="Coincident";break;case"DMUFullCircle"+o+"Hdr":i="FullCircle";break;case"DMUFullSquare"+o+"Hdr":i="FullSquare";break;case"DMUStar"+o+"Hdr":i="Star";break;case"DMUDot"+o+"Hdr":i="Dot";break;case"DMUSmallDot"+o+"Hdr":i="SmallDot";break;case"DMUNone"+o+"Hdr":i="None"}for(var l=0;l<r.length;l++){var s=e.getDMUObjectFromPathElement(r[l].pathElement);s&&"NA"!==i&&void 0!==s.getAttribute("s"+o)&&(s.setAttribute("s"+o,i),s.refreshNode())}a.getFrameWindow().getViewer().render()}}a.cancel()},this.getState=function(){return a._bCmdState},this.setState=function(e){a._bCmdState=e}}})}),define("DS/DMUBaseCtxCommands/DMUHideShowCmd",["DS/CATWebUXComponents/DMUCommand","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager","DS/DMUBaseUIControllers/DMUSceneDisplayController"],function(e,t,n,a){"use strict";return e.extend({init:function(e){e.mode="shared",this._parent(e);var r=this;this.beginExecute=function(){var e=t.getReviewContext({viewer:r.getFrameWindow().getViewer()}),i=e.getCurrentSessionMarkup();if((!i||i&&!i.getActiveFlag()||i&&i.getActiveFlag()&&i.isReadOnly()||i&&i.getActiveFlag()&&!i.isReadOnly()&&!i.getCurrentSlide())&&(i=e.getTransientReviewBag()),e&&!e.isReadOnly()&&i&&!i.isReadOnly()){var o,l=n.get(),s=[],d=[];for(o=0;o<l.length;o++){var g=e.getDMUObjectFromPathElement(l[o].pathElement);g?s.push(g):d.push(l[o].pathElement)}var m=a.giveDMUSceneDisplayController({context:t.getContextViewer({viewer:r.getFrameWindow().getViewer()})});m&&d&&d.length&&m.toggleVisibility(d);var u,c=[];for(o=0;o<s.length;o++){var C=s[o].getAttribute("bVisible");u=null!=C&&!C,"DMUOccurrenceOverloader"===s[o].getType()?c.push({state:{bVisible:u},target:s[o]}):(s[o].setAttribute("bVisible",u),s[o].refreshNode())}r.getFrameWindow().getViewer().render();var v=t.giveEventsController({viewer:r.getFrameWindow().getViewer()});v&&(c.length&&v.fireEvent("onDMUOverloadPropertiesChanged",{overloads:c}),(s.length||d.length)&&v.fireEvent("onSaveRequested",{})),n.empty()}r.cancel()}}})}),define("DS/DMUBaseCtxCommands/DMUDeleteCmd",["DS/CATWebUXComponents/DMUCommand","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager","DS/DMUControls/DMUWarningPanel","DS/DMUControls/EXPNotify","DS/DMUBaseUIControllers/DMUSlidesController","DS/DMUBaseUIControllers/DMUCommentsController","i18n!DS/DMUBaseCtxCommands/assets/nls/DMUBaseCtxCommands"],function(e,t,n,a,r,i,o,l){"use strict";var s,d;return e.extend({init:function(e){e.mode="shared",this._parent(e);let r=this;this.frmWindow=e.executionContext&&e.executionContext.getComponent?e.executionContext.getComponent("Viewer").getFrameWindow():this.getFrameWindow(),this.beginExecute=function(){let e=!0;if(s)return void r.end();var d=t.getReviewContext({viewer:r.getFrameWindow().getViewer()});if(!d)return void r.end();let g,m=[],u=[],c=d.getCurrentSessionMarkup();(!c||c&&!c.getActiveFlag()||c&&c.getActiveFlag()&&c.isReadOnly()||c&&c.getActiveFlag()&&!c.isReadOnly()&&!c.getCurrentSlide())&&(c=d.getTransientReviewBag());let C=o.giveDMUCommentsController({context:r.getFrameWindow()}),v=d.getValidation();var h=n.get();if(h.length)for(let t=h.length-1;t>=0;t--){let n=d.getDMUObjectFromPathElement(h[t].pathElement);if(!n&&C&&(n=C.getDMUObjectFromPathElement(h[t].pathElement)),n&&!n.isReadOnly()&&u.push(n),h[t].pathElement.getLastElement(!0).getDMUType&&"DMUMarkup"===h[0].pathElement.getLastElement(!0).getDMUType())if(v.getContext()&&v.getContext().getJsonContextTypes()&&"Document"===v.getContext().getJsonContextTypes()[0]&&1===v.getMarkups().length)this._sendNotify("warning",l.DeleteLastMarkupWarning),e=!1;else if(v){let e=h[t].pathElement;v.getMarkups().forEach(t=>{let n=t.getRepRef();n.getMarkupContent()&&n.getMarkupContent().getNode()===e.getLastElement(!0)&&m.push(t)})}!h[t].pathElement.getLastElement(!0).getDMUType||"DMUValidationCheck"!==h[t].pathElement.getLastElement(!0).getDMUType()&&"DMUValidationExposedPresentation"!==h[t].pathElement.getLastElement(!0).getDMUType()||h[t].pathElement.getLastElement(!0).getOwner().isEditable()&&m.push(h[t].pathElement.getLastElement(!0).getOwner())}const f=e=>{if(!e)return;let t=e.getMarkupOwner();if(t){let e=t.getParent();if(e&&"Reply"===e.getType())return e}};if(m.length||u.length){const t=function(e){if("boolean"==typeof e&&localStorage.setItem("DMUDeleteWarningPanelCheckboxFlag",e),m.length)m[0].fireEvent("onValidationObjectDeleted",{dmuObject:m});else{let t,n,a=!1;for(let r=u.length-1;r>=0;r--){const i=u[r];if("DMUMarkup"===(g=i.getParent()).getType()){const r=i.getType(),o=d.getValidation()&&"Activated"===d.getValidation().getRestrictedEditionFlag();if("DMUFormat"===r||"DMUSlide"===r){if(a=a||c===g,1===u.length&&g.getCurrentSlide()===i&&(n="DMUFormat"===r?g.getFormats():g.getSlides(),c===g&&(t=n.indexOf(i))),"DMUFormat"===r)g.removeFormat(i);else{const e=f(g);e&&1===g.getSlides().length?e.fireEvent("onValidationObjectDeleted",{dmuObject:[e]}):o&&!e?i.setAttribute("bMarkedAsDeleted",!0):g.deleteSlide({object:i})}}else if(C&&"DMUComment"===r){const t=f(g);t&&1===g.getComments().length?t.fireEvent("onValidationObjectDeleted",{dmuObject:[t]}):C.removeComment(i,e||i.hasAlertFlag())}else"DMUClipping"===r||"DMUSection"===r?(g.getCurrentSlide().removeDMUObject(i),i.manageClippingCmd&&i.manageClippingCmd()):g.getCurrentSlide().removeDMUObject(i)}else g.removeDMUObjects&&"DMUClipping"!==i.getType()&&g.removeDMUObjects([i])}if(a){let e,a=0;if(void 0===t){e=d.getUIManager().getFormatEditionModeFlag()?g.getFormats()[a]:g.getSlides()[a]}else e=n[a=t===n.length-1?n.length-2:t+1];let o=i.giveDMUSlidesController({context:r.getFrameWindow()});o&&o.setActiveSlide(e)}}};if(-1===this._id.indexOf("Quick")){var p=u.filter(function(e){if("DMUComment"===e.getType()&&!e.isReply()&&!e.hasAlertFlag()){var t=e.getNode().getParents()[0],n=t?t.getDMUType():null;return n&&"DMUCommentPositioned"!==n&&"DMUCommentHighlight"!==n}return!1}).length>0,D=localStorage.getItem("DMUDeleteWarningPanelCheckboxFlag");e&&(s=new a({title:l.deleteWarningPanel.title,message:l.deleteWarningPanel.message,checkboxMessage:p?l.deleteWarningPanel.checkboxMessage:null,checked:D&&"true"===D,frmWindow:this.getFrameWindow(),callbacks:{onValidateCB:function(e){t(e),r.end(),s=null},onCancelCB:function(){r.end(),s=null},onCloseCB:function(){r.end(),s=null}}}))}else t("true"===localStorage.getItem("DMUDeleteWarningPanelCheckboxFlag")),this.end();this.getFrameWindow().getContextualUIManager().getContextualBar().hide()}else this.cancel()}},_sendNotify:function(e,t){d&&(d.destroy(),d=null),d=new r({body:this.getFrameWindow().getUIFrame(),type:e,message:t})},_destroy:function(){s&&s.destroy(),this._parent()}})}),define("DS/DMUBaseCtxCommands/DMUGraphicPropertiesPanelCmd",["DS/CATWebUXComponents/DMUCommand","DS/PADUtils/PADContext","DS/DMUBaseUIControllers/DMUGraphicPropertiesCtr"],function(e,t,n){"use strict";return e.extend({init:function(e){var a=e||{};a.mode="shared",this._parent(a);var r=this,i=t.get();this.beginExecute=function(){var e=n.getDMUGraphicPropsController({context:i});e&&e.setActiveState(!0),r.cancel()};var o=this._destroy;this._destroy=function(){o.call(r),r=i=null}}})});