define("DS/TopFrame/LocalStorageManager",[],function(){"use strict";var e="TopFrame-";return{getLastLoadedxAppContentTopMenu:function(){return function(t){var n;try{n=window.localStorage.getItem(e+t)}catch(e){console.error("Fail to get item from key: "+t)}return n}("lastLoadedxAppContentTopMenu")||""},setLastLoadedxAppContentTopMenu:function(t){!function(t,n){try{window.localStorage.setItem(e+t,n)}catch(e){console.error("Fail to set item for key: "+t,n)}}("lastLoadedxAppContentTopMenu",t)}}}),define("DS/TopFrame/Utils",["UWA/Core","UWA/Utils"],function(e,t){"use strict";var n,i;return n=Array.prototype,i=function(){function e(e){if(null==e)throw new TypeError("assign cannot be called with null or undefined");return Object(e)}return Object.assign?Object.assign:function(t){var n,i,a,o,s,r=e(t);if(1===arguments.length)return r;for(n=1;n<arguments.length;n++)if(null!=(i=arguments[n]))for(a=e(i),o=Object.keys(a),s=0;s<o.length;s++)r[o[s]]=a[o[s]];return r}}(),{debounce:function(e,t,n,i){var a,o,s,r;function l(){var c=(new Date).getTime()-s;c<t&&c>=0?a=setTimeout(l,t-c):(a=null,n||(r=e.apply(i,o),a||(i=o=null)))}return function(){i=i||this,o=arguments,s=(new Date).getTime();var c=n&&!a;return a||(a=setTimeout(l,t)),c&&(r=e.apply(i,o),i=o=null),r}},pick:function(t){var a,o,s;return o={},s=e.is,a=i.apply(null,n.concat.apply(n,n.slice.call(arguments,1)).map(function(e){var t;return s(e,"string")?(t={})[e]=e:s(e,"plain")&&(t=e),t})),Object.keys(a).forEach(function(e){var n,i;e in t&&null!=(n=t[e])&&""!==n&&(i=a[e],s(i,"string")&&(o[i]=t[e]))}),o},resolve:function(t,n,i){var a=t;return!1!==n.every(function(t){var n=e.is(a);return n&&(a=a[t]),n})&&void 0!==a||(a=i),a},always:function(e){return function(){return e}},getCurrentLanguage:function(){return require("i18n").getLocale()},getTopDomain:function(){var e,t=window.location.hostname,n="";if(!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(t)&&"localhost"!==t){for(e=t.split(".");e.length>2;)e.shift();n=e.join(".")}return n},setCookieStore:function(e,t,n,i,a){var o=e+"="+t,s=new Date(n);i&&(o+="; domain="+i),o+="; path=/",n&&(o+="; expires="+s.toGMTString()),a&&(o+="; Priority=High"),document.cookie=o},setProductionUpgradeCookie:function(e){var n=window.location.hostname.split(".").slice(1).join(".");this.setCookieStore("UPGRADE_INFO",t.base64Encode(JSON.stringify(e)),(new Date).getTime()+3456e7,n,!0)},isSeenBefore:function(e,t,n){return Math.abs(t-e)/864e5>=n},formatDate:function(e){var t=new Date(e).toLocaleDateString(this.getCurrentLanguage(),{year:"numeric",month:"2-digit",day:"2-digit"}).split("/");return[t[2],t[0],t[1]].join("-")},buildPath:function(){var e=[],t=arguments.length-1;return Array.prototype.forEach.call(arguments,function(n,i){n&&(n+="",0!==i&&(n=n.replace(/^\//,"")),i!==t&&(n=n.replace(/\/$/,"")),e.push(n))}),e.join("/")}}}),define("DS/TopFrame/CompassAPI",["DS/i3DXCompass/i3DXCompass"],function(e){"use strict";return{appIds:{notification:"X3DNTFC_AP",messaging:"X3DIMSG_AP",partSupply:"X3DPSLY_AP",partSupplyEPA:"X3DPSCM_AP",partSupplyEPU:"X3DPSCR_AP",swym:"X3DWNEW_AP",x3PDrive:"X3PDRIV_AP",x3DSearch:"X3DSEAR_AP",advancedFilter:"ENOREFS_AP",x3DSpace:"X3DCSMA_AP",bookmarkEditor:"ENOFOL4_AP",scientificSI:"BIOSSI_AP"},getAppInfo:function(t){return new Promise(function(n,i){var a=t.appId;if(!a)return i("Missing appId.");e.getAppInfo({appId:a,onComplete:function(e){e?n(e):i("No app info for: "+a)}})})}}}),define("DS/TopFrame/Views/Message",["UWA/Element","UWA/Class/View"],function(e,t){"use strict";return t.extend({className:"topframe-message-view",tagName:"div",_title:"",_content:"",_icon:"",setup:function(e){e=e||{};this._title=e.title||"",this._content=e.content||"",this._icon=e.icon||""},destroy:function(){this._parent.apply(this,arguments)},render:function(t){t=t||{};var n,i,a,o=this.container,s=this.elements;return t.className&&o.addClassName(t.className),n=s.title=new e("div",{class:"tf-msgview-title"}),i=s.content=new e("div",{class:"tf-msgview-content"}),a=s.icon=new e("div",{class:["tf-msgview-icon","fonticon"].join([" "])}),o.addContent([n,i,a]),this.setTitle(this._title).setContent(this._content).setIcon(this._icon),this},setTitle:function(e){e=e||"";return this._title=e,this.elements.title.setText(e),this.toggleDisplay({title:!!e}),this},setContent:function(e){e=e||"";return this._content=e,this.elements.content.setText(e),this.toggleDisplay({content:!!e}),this},setIcon:function(e){e=e||"";var t=this.elements.icon,n=this._icon;return this._icon=e,t.removeClassName(n),t.addClassName(e),this.toggleDisplay({icon:!!e}),this},toggleDisplay:function(e){var t=this;return Object.keys(e).forEach(function(n){var i=t.elements[n],a=e[n];i&&i.toggleClassName("tf-msgview-hide","boolean"==typeof a?!a:void 0)}),t}})}),define("DS/TopFrame/FrameUsageTracker",["UWA/Core","DS/Usage/TrackerAPI"],function(e,t){"use strict";var n={dashboard:{tenantSwitch:"dashboard.tenantSwitch"}};return{track:function(i){i.options=i.options||{},i.options.appID=i.appId||"X3DDASH_AP",i.options.tenant=i.platformId,i.options.persVal=i.persVal,t.trackPageEvent((t=>{var i,a,o=n,s=(t||"").split(".").filter(function(e){return!!e}),r=s.length;for(i=0;i<r;i++){if(a=s[i],!(e.is(o,"object")&&a in o)){o=null;break}o=o[a]}return e.is(o,"string")||(o="",e.log('Tracker Id: "'+t+'", does not exist !')),o||t})(i.category),i.action,i.label,i.value,i.persDim,i.options)}}}),define("DS/TopFrame/Frame",["UWA/Core","UWA/Element","UWA/Class/Promise","UWA/Controls/Abstract","DS/UIKIT/Tooltip","DS/TopFrame/Utils","i18n!DS/TopFrame/assets/nls/topFrame"],function(e,t,n,i,a,o,s){"use strict";var r="main",l="left",c="right",p="minimized",d="maximized",u="fitted",m="closed",h="maximized",g="fitted",f="pushed",P="left",_="right",v="shown";function b(e){e&&Array.prototype.slice.call(arguments,1).forEach(function(t){t&&e.removeClassName(t)})}var S=i.extend({name:"frame",MAIN_PANEL:r,LEFT_PANEL:l,RIGHT_PANEL:c,OPEN_PANEL_ACTION:"open",CLOSE_PANEL_ACTION:"close",_UI_BREAKS:{SMALL:639,MEDIUM:1104,LARGE:1920},_content:null,_shownAllTags:null,_shownTags:null,_panelMode:"doublePanelMode",_panels:null,_panelsDefault:{main:{marginLeft:0,marginRight:0,pushedLeft:!1,pushedRight:!1},left:{opened:!1,state:m,width:NaN,left:NaN,forceSmallScreenPanelMode:!1},right:{opened:!1,state:m,width:NaN,left:NaN,forceSmallScreenPanelMode:!1}},_ctnSize:null,defaultOptions:{mode:"doublePanelMode",moveMainPanelOnPanelMove:{left:!0,right:!0},animateMainPanelOnPanelMove:{left:!0,right:!0},useWindowResize:!0,smallScreenPanelPriority:c},init:function(n,i){if(i||(i={}),!n)throw new Error("Missing content map.");i.renderTo=i.renderTo||document.body;this._parent(i),i=this.options,this._shownAllTags={left:null,right:null},this._shownTags={left:null,right:null},this._panels=e.clone(this._panelsDefault),this.elements=this._build(),this._content=this._buildContent(n,this.elements),this._onResize=o.debounce(this._onResize.bind(this),400),t.inject.call(this.elements.container,i.renderTo),this.elements.container=i.renderTo,this._initEvents()},_onResize:function(){var e,t,n,i,a,o=this,s=o._ctnSize||o._getContainerSize();if(o._ctnSize=null,(e=o._getContainerSize()).width!==s.width)if(t=o.isPanelOpen(l),n=o.isPanelOpen(c),a={animate:!1,force:!0},o._isSmallScreen(e.width))(t||n)&&(i=t&&n?o.options.smallScreenPanelPriority:t?l:c,o._doPanelAction("open",i,Object.assign({},a,{forceSmallScreenPanelMode:o.getPanel(i).forceSmallScreenPanelMode})));else{var r,p,d=t&&o.isPanelFitted(l),u=n&&o.isPanelFitted(c);t&&(r={action:"open",panel:l,opts:Object.assign({},a,{maximize:o.isPanelMaximized(l),fit:o.isPanelFitted(l),preventPushMainPanel:u,forceSmallScreenPanelMode:o.getPanel(l).forceSmallScreenPanelMode})}),n&&(p={action:"open",panel:c,opts:Object.assign({},a,{maximize:o.isPanelMaximized(c),fit:o.isPanelFitted(c),preventPushMainPanel:d,forceSmallScreenPanelMode:o.getPanel(c).forceSmallScreenPanelMode})}),(d?[p,r]:[r,p]).filter(function(e){return e}).forEach(function(e){o._doPanelAction(e.action,e.panel,e.opts)})}},_build:function(){var t,n,i,o,r,p,d,u,m,h,g,f="div",P=this,_={},v=e.createElement;return _.container=t=document.createDocumentFragment(),_.leftPanel=v(f,{class:"column left"}).inject(t),_.main=v(f,{class:"main"}).inject(t),_.rightPanel=v(f,{class:"column right"}).inject(t),_.leftPanelCtn=i=v(f,{class:"column-ctn"}).inject(_.leftPanel),_.rightPanelCtn=n=v(f,{class:"column-ctn"}).inject(_.rightPanel),o=v(f,{class:"right-panel-actions column-actions",html:[]}).inject(n),r=v(f,{class:"left-panel-actions column-actions",html:[]}).inject(i),_.maximizeRightPanelBtn=p=v(f,{class:"panel-action maximize-action fonticon fonticon-resize-full column-action fit",events:{click:function(){P.openPanel(c,{maximize:!0})}}}).inject(o),_.minimizeRightPanelBtn=d=v(f,{class:"panel-action minimize-action fonticon fonticon-resize-small column-action minimize",events:{click:function(){P.openPanel(c,{minimize:!0})}}}).inject(o),_.maximizeLeftPanelBtn=g=v(f,{class:"panel-action maximize-action fonticon fonticon-resize-full column-action fit hide",events:{click:function(){P.openPanel(l,{maximize:!0})}}}).inject(r),_.minimizeLeftPanelBtn=h=v(f,{class:"panel-action minimize-action fonticon fonticon-resize-small column-action minimize",events:{click:function(){P.openPanel(l,{minimize:!0})}}}).inject(r),_.closeRightPanelBtn=u=v(f,{class:"panel-action close-action fonticon fonticon-cancel column-action close",events:{click:function(){P.closePanel(c)}}}).inject(o),_.closeLeftPanelBtn=m=v(f,{class:"panel-action close-action fonticon fonticon-cancel column-action close hide",events:{click:function(){P.closePanel(l)}}}).inject(r),new a({position:"bottom",target:p,body:s.actionMaximize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new a({position:"bottom",target:d,body:s.actionMinimize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new a({position:"bottom",target:g,body:s.actionMaximize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new a({position:"bottom",target:h,body:s.actionMinimize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new a({position:"bottom right",target:u,body:s.actionClose,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new a({position:"bottom right",target:m,body:s.actionClose,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),_},_getPanelEl:function(e){var t,n=this.elements;return e===l?t=n.leftPanel:e===c?t=n.rightPanel:e===r&&(t=n.main),t},_getPanelCtnEl:function(e){var t,n=this.elements;return e===l?t=n.leftPanelCtn:e===c&&(t=n.rightPanelCtn),t},_isSinglePanelMode:function(){return"singlePanelMode"===this.options.mode},_isSmallScreen:function(e){return(e="number"==typeof e?e:this._getContainerSize().width)<=this._UI_BREAKS.SMALL},_buildContent:function(n,i){var a=Object.create(null);function o(e,n){var i=Object.create(null),a=document.createDocumentFragment();for(var o in e)e.hasOwnProperty(o)&&(i[o]=s(e[o]),t.grab.call(a,i[o]));return n.grab(a),i}function s(n){var i=document.createDocumentFragment();return e.is(n,"element")?n:t.setContent.call(i,n)}return n.left&&(a.left=o(n.left,i.leftPanelCtn)),n.right&&(a.right=o(n.right,i.rightPanelCtn)),n.main&&(a.main=o(n.main,i.main)),a},extendPanelContent:function(e,t,n){var i,a={},o={},s=e===l?"leftPanelCtn":"rightPanelCtn";a[e]={},a[e][t]=n,o[s]=this.elements[s],i=this._buildContent(a,o),Object.assign(this._content[e],i[e])},_doPanelAction:function(e,t,i){i||(i={});var a,o="hide",s="show",r=this,p=r._isSmallScreen(),d="open"===e,u="close"===e,m=t===l,h=!!i.force,g=!!i.maximize,f=!!i.fit,P=!!i.minimize,_="boolean"!=typeof i.animate||i.animate,v=!!i.forceSmallScreenPanelMode,b=i.closeOppositePanel||r._isSinglePanelMode()||p,S=!!i.preventPushMainPanel,A=m?c:l,w=r.isPanelOpen(l),C=r.isPanelOpen(c),T=m?w:C,y=A===l?w:C,I=!1,M=!1,E={},D=n.resolve(),U=[];if(!h){if(u&&!T)return D;if(d&&T&&(g&&r.isPanelMaximized(t)||P&&r.isPanelMinimized(t)||!g&&!P))return D}return E={maximize:!1,fit:!1,preventPushMainPanel:S,animate:_,isSmallScreen:p,useSmallScreenPanelMode:v||p},y&&(I=r.isPanelMaximized(A),M=r.isPanelFitted(A)),r.getPanel(t).forceSmallScreenPanelMode=v,(U=(U=d?(a=Object.assign({},E,{maximize:g,fit:f}),v?(a.maximize=!1,a.fit=!1,b=!0):g&&y&&!b&&(a.maximize=!1,a.fit=!0),[y&&b&&{action:o,panel:A,opts:E},g&&M&&!b&&{action:s,panel:A,opts:Object.assign({},E,{minimize:!0})},{action:s,panel:t,opts:a},I&&!b&&{action:s,panel:A,opts:Object.assign({},E,{fit:!0})}]):[{action:o,panel:t},M&&{action:s,panel:A,opts:Object.assign({},E,{maximize:!0})}]).filter(function(e){return e})).some(function(e){var t=e.opts||{};return e.action===s&&(t.fit||t.maximize||t.useSmallScreenPanelMode)})&&U.forEach(function(e){e.opts=e.opts||{},e.opts.preventPushMainPanel=!0}),n.all(U.map(function(e){var t=e.panel,n=e.opts;return e.action===o?r._hidePanel(t,n):r._showPanel(t,n)}))},_movePanel:function(e,t,i){i||(i={});var a,o,s,h,g,f,P,_,v=this,b=v.options,S=!!i.maximize,A=!!i.fit,w=!!i.preventPushMainPanel,C="boolean"!=typeof i.animate||i.animate,T="boolean"==typeof i.isSmallScreen?i.isSmallScreen:v._isSmallScreen(),y=i.useSmallScreenPanelMode||T,I=!w&&b.moveMainPanelOnPanelMove[t],M=v._getContainerSize().width,E=v.elements.main,D="open"===e,U=t===l,x=U?c:l,N=v._getPanelEl(t),L=v._getPanelCtnEl(t),O=v.getPanel(t),F=v.getPanel(r),k=v.getPanel(x),R=!Number.isNaN(O.left),j=R?O.left:void 0,z={top:44,"z-index":"",height:"calc(100% - 44px)",border:""};function B(e){return"translateX("+e+"px)"}return y?(f={animate:!1,useAnimationFrame:!1},P={animate:C,useAnimationFrame:C},_={animate:!1,useAnimationFrame:!1},o={left:"",top:0,"z-index":"60",height:"100%",border:"none"},s={transform:D?B(0):""},h={left:D?0:"",transform:D?"none":"","z-index":D?"60":""},O.opened=D,O.state=D?p:m,O.width=D?M:NaN,O.left=D?0:NaN,I&&(g={marginLeft:"",marginRight:""},F.pushedLeft=!1,F.marginLeft=0,F.pushedRight=!1,F.marginRight=0),a={preStart:[{el:N,styles:o,opts:f},{el:L,styles:{display:"flex"},opts:f},{el:E,styles:g,opts:f}],start:[{el:N,styles:s,opts:P}],end:[{el:N,styles:h,opts:_},{el:L,styles:{width:"100%",display:D?"flex":"none"},opts:_}]},v._isSmallScreenPanelMode=!0):(a=S||A?function(){var e,t,n,i,a,o={animate:!1,useAnimationFrame:!1},s={animate:C,useAnimationFrame:C},r={animate:!1,useAnimationFrame:!1};return e=Object.assign({},z,{left:"",transform:R?B(j):"",border:"none"}),t={},n={transform:"none"},S?(i=0,a=M):A&&(i=k.width,i*=U?-1:1,a=Math.floor(M-k.width)),t.transform=B(i),n.left=i+"px",O.opened=!0,O.state=S?d:u,O.width=a,O.left=i,{preStart:[{el:N,styles:e,opts:o},{el:L,styles:{display:"flex"},opts:o}],start:[{el:N,styles:t,opts:s}],end:[{el:N,styles:n,opts:r},{el:L,styles:{width:S?"100%":a,display:"flex"},opts:r}]}}():function(){var e,n,i,a,o,s=Math.round(.125*M+240),r=M>=v._UI_BREAKS.LARGE?480:Math.min(s,480),d=(M-r)*(U?-1:1),u={animate:!1,useAnimationFrame:!1},h={animate:C,useAnimationFrame:C},g={animate:!1,useAnimationFrame:!1},f=C&&b.animateMainPanelOnPanelMove[t];return e=Object.assign({},z,{left:"",transform:R?B(j):""}),n={},i={transform:D?"none":""},D?(U?e["border-right-width"]="1px":e["border-left-width"]="1px",n.transform=B(d),i.left=d+"px",i.transform="none"):(n.transform=U?"translateX(-100%)":"translateX(100%)",i.left=""),O.opened=D,O.state=D?p:m,O.width=D?r:NaN,O.left=D?d:NaN,function(){function e(){a.transform=B(r-F.marginLeft),o.marginLeft=r,F.pushedLeft=!0,F.marginLeft=r}function t(){a.transform=B(r-F.marginRight),o.marginRight=r,F.pushedRight=!0,F.marginRight=r}function n(){a.transform=B(-F.marginLeft),o.marginLeft="",F.pushedLeft=!1,F.marginLeft=0}function i(){a.transform=B(F.marginRight),o.marginRight="",F.pushedRight=!1,F.marginRight=0}a={},o={},I&&(D?U?e():t():U?n():i(),!v.isPanelOpen(l)&&F.pushedLeft&&n(),!v.isPanelOpen(c)&&F.pushedRight&&i(),v.isPanelOpen(l)&&!F.pushedLeft&&e(),v.isPanelOpen(c)&&!F.pushedRight&&t(),f||(a.transform=""),o.transform="")}(),{preStart:[{el:N,styles:e,opts:u},{el:L,styles:{display:"flex"},opts:u}],start:[{el:N,styles:n,opts:h},{el:E,styles:a,opts:h}],end:[{el:N,styles:i,opts:g},{el:E,styles:o,opts:g},{el:L,styles:{width:r,display:D?"flex":"none"},opts:g}]}}(),v._isSmallScreenPanelMode=!1),function(e){function t(e){return v._setElementStyles(e.el,e.styles,e.opts)}return n.all((e.preStart||[]).map(t)).then(function(){return n.all((e.start||[]).map(t))}).then(function(){return n.all((e.end||[]).map(t))})}(a)},_onMovePanelEnd:function(e,t){var n,i,a,o=this,s="open"===e,p=t===l?c:l,m=o._shownTags[t];function S(e){var t,n=o._getPanelEl(e);b(n,v,h,g),o.isPanelOpen(e)&&(t=o.getPanelState(e),n.addClassName(v),t===d?n.addClassName(h):n.removeClassName(h),t===u?n.addClassName(g):n.removeClassName(g))}o.elements.container.toggleClassName("tf-smallscreen-panel-mode",o._isSmallScreenPanelMode),S(t),S(p),i=o._getPanelEl(r),a=o.getPanel(r),b(i,f,P,_),a.pushedLeft&&i.addClassName(f).addClassName(_),a.pushedRight&&i.addClassName(f).addClassName(P),n={name:s?"onPanelOpen":"onPanelClose",data:{panel:t,tag:m,position:o.getPanelState(t)}},setTimeout(function(){o.dispatchEvent(n.name,n.data)})},_getContainerSize:function(){return this._ctnSize||(this._ctnSize=t.getSize.call(this.elements.container)),this._ctnSize},_showPanel:function(e,t){var n=this;return n._movePanel("open",e,t).then(function(){return n._onMovePanelEnd("open",e,t)})},_hidePanel:function(e,t){var n=this;return n._movePanel("close",e,t).then(function(){return n._onMovePanelEnd("close",e,t)})},_setElementStyles:function(i,a,o){return o=e.extend({useAnimationFrame:!0,animate:!0},o||{}),i&&a?new n(function(n){function s(){var s;e.is(a.transform)&&o.animate?(a.transitionProperty=Object.keys(a).join(", "),a.transitionDuration="300ms",s=setTimeout(n,o.animDuration||400),function(e,n,i){t.addEvent.call(e,n,function(a){t.removeEvent.call(e,n),i(a)})}(i,"transitionEnd",function(){clearTimeout(s),i.setStyle("transitionDuration",""),i.setStyle("transitionProperty",""),n()}),i.setStyles(a)):(i.setStyle("transitionDuration",""),i.setStyle("transitionProperty",""),i.setStyles(a),n())}window.requestAnimationFrame&&o.useAnimationFrame?window.requestAnimationFrame(s):s()}):n.resolve()},_initEvents:function(){var e=this;require([["DS","PubSub","PubSub"].join("/")],t=>{t.add("panel:resize",()=>{(e.isPanelMaximized(l)||e.isPanelFitted(l))&&e.closePanel(l),(e.isPanelMaximized(c)||e.isPanelFitted(c))&&e.closePanel(c)})}),e.options.useWindowResize?window.onresize=e._onResize.bind(e):t.addEvent.call(e.elements.container,"resize",e._onResize.bind(e))},getPanel:function(e){return this._panels[e]},getPanelState:function(e){return this.getPanel(e).state},isPanelOpen:function(e){return this.getPanel(e).opened},isPanelFitted:function(e){return this.getPanelState(e)===u},isPanelMaximized:function(e){return this.getPanelState(e)===d},isPanelMinimized:function(e){return this.getPanelState(e)===p},openPanel:function(e,t){return this._doPanelAction("open",e,t)},closePanel:function(e,t){return this._doPanelAction("close",e,t)},showPanelContent:function(e,t){var n=this,i=n._content[e];if(i){var a,o,s,r,c=n.getShownTag(e),p=c!==t,d=["loading","error"].includes(t);if(n._shownAllTags[e]=t,c!==t){for(s in o=c&&p&&!d,a=p&&!d,d||(n._shownTags[e]=t),o&&setTimeout(function(){n.dispatchEvent("onPanelHide",{panel:e,tag:c})}),n._content[e])i[s].hide();i[t]?(i[t].show(),n._shownTags[e]=t):(i[s].show(),n._shownTags[e]=s),e===l&&(n.activateLeftPanelActions(n),n.subscribeToDataFilter(n)),a&&(r=n.getPanelState(e),setTimeout(function(){n.dispatchEvent("onPanelChange",{panel:e,tag:t,position:r})}))}}},activateLeftPanelActions:e=>{if(!e)return;const t=e.elements.maximizeLeftPanelBtn,n=e.elements.minimizeLeftPanelBtn,i=[...e.elements.container.querySelector(".column.left").querySelector(".column-ctn").children].map(e=>{if(!e.classList.contains("column-actions")&&"none"!==e.style.display)return e}).filter(e=>e)[0];const a=()=>window.screen.width>768,o=()=>{(e.isPanelMaximized(l)||e.isPanelFitted(l))&&e.openPanel(l,{minimize:!0})},s=()=>{t.addClassName("hide"),n.addClassName("hide")},r=()=>{t.removeClassName("hide"),n.removeClassName("hide")},c=(e,t)=>e.classList.contains(t);function p(e){return"none"!==getComputedStyle(e).display}try{!function i(l,d){const u=e.elements.leftPanelCtn.querySelector(".left-panel-actions"),m=e.elements.closeLeftPanelBtn;if("DIV"===l.tagName){if(p(l)&&(c(l,"panelManagerClosable")||c(l,"panelManagerMaximizable")))throw c(l,"panelManagerClosable")?(u.style.marginRight="0px",m.removeClassName("hide")):m.addClassName("hide"),c(l,"panelManagerMaximizable")?(a()&&c(l,"panelManagerMaximizable")&&r(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.matchMedia("(orientation:portrait)").addEventListener("change",e=>{e.matches?(s(),o()):a()&&r()}),c(e.elements.closeLeftPanelBtn,"hide")?u.style.marginRight="36px":u.style.marginRight="0px"):s(),new Error("Found element");if(d<3){const e=l.children;for(let t=0;t<e.length;t++){const n=e[t];p(n)&&"none"!==getComputedStyle(n).display&&i(n,d+1)}}}t.addClassName("hide"),m.addClassName("hide"),n.addClassName("hide"),o()}(i,0)}catch(e){}},subscribeToDataFilter:e=>{const t=e.elements.leftPanel.querySelector("#data-filter-panel-ct");if(0===t.childElementCount){const n=new MutationObserver(()=>{e.activateLeftPanelActions(e),n.disconnect()}),i={childList:!0,subtree:!0};n.observe(t,i)}},getShownTag:function(e){return this._shownTags[e]},getContentElement:function(e,t){return(this._content[e]||{})[t]}});return S.MAIN_PANEL=r,S.LEFT_PANEL=l,S.RIGHT_PANEL=c,S.MINIMIZED_PANEL_STATE=p,S.MAXIMIZED_PANEL_STATE=d,S.FITTED_PANEL_STATE=u,S.CLOSED_PANEL_STATE=m,S}),define("DS/TopFrame/TopFrame",["UWA/Core","UWA/Class","UWA/Class/Options","UWA/Class/Events","UWA/Element","UWA/Utils","UWA/Class/Promise","DS/TopFrame/Frame","DS/TopFrame/Utils","DS/TopFrame/CompassAPI","DS/TopFrame/LocalStorageManager","DS/MessageBus/MessageBus","DS/Tenant/Tenant","DS/TopBar/TopBar","DS/TopBar/model/MainMenuBar","DS/TopBarProxy/TopBarProxy","DS/i3DXCompass/i3DXCompass","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/TagNavigator/TagNavigator","DS/W3DLegal/W3DLegal","DS/WebappsUtils/WebappsUtils","DS/TopFrame/Utils","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Alert","DS/GDPR/GDPR","i18n!DS/TopFrame/assets/nls/topFrame"],function(e,t,n,i,a,o,s,r,l,c,p,d,u,m,h,g,f,P,_,v,b,S,A,w,C,T,y){"use strict";var I,M,E=function(){},D=r.LEFT_PANEL,U=r.RIGHT_PANEL,x=r.MINIMIZED_PANEL_STATE,N=r.MAXIMIZED_PANEL_STATE,L=r.FITTED_PANEL_STATE,O=r.CLOSED_PANEL_STATE,F="open",k="close",R="hide",j={};function z(t){return t?t!==D||(e.log("Left panel currently not permitted."),!1):(e.log("Must specify a panel"),!1)}return j.content=!1,j.space=!1,j.partSupply=!0,j.partSupplyEPA=!1,j.partSupplyEPU=!1,j.bookmarkEditor=!1,j.scientificSI=!1,M={lang:"en",activateFederatedSearch:!0,activateSearch:!0,showCoachmark:!0,activateLegal:!0,activateAbout:!0,activateGDPR:!1,useTagger:!0,activateInstantMessaging:!0,xappsMode:!1,onTenantChange:function(e){var t=e&&e.from,n=e&&e.to,i=Object.keys(e.from).find(t=>e.from[t]===window.location.origin),a=n&&i&&n[i];t.platformId!==n.platformId&&a&&location.replace(a)}},(I=t.singleton(i,n,{TOPBAR_HEIGHT:44,COMPASS_BREAKPOINT:959,XAPPS:{notification:{id:c.appIds.notification,tag:"notification",topMenuId:"notification",loadPromise:null,isLoaded:!1,content:null,widget:null},content:{id:c.appIds.x3PDrive,tag:"content",topMenuId:"content",loadPromise:null,isLoaded:!1,content:null,widget:null},social:{id:c.appIds.swym,tag:"social",topMenuId:"social",loadPromise:null,isLoaded:!1,content:null,widget:null},search:{id:c.appIds.x3DSearch,tag:"search",loadPromise:null,isLoaded:!1,content:null,widget:null},messaging:{id:c.appIds.messaging,tag:"messaging",loadPromise:null,isLoaded:!1,content:null,widget:null},make:{id:"Make",tag:"make",loadPromise:null,isLoaded:!1,content:null,widget:null},partSupply:{id:c.appIds.partSupply,tag:"partSupply",topMenuId:"content",loadPromise:null,isLoaded:!1,content:null,widget:null},partSupplyEPU:{id:c.appIds.partSupplyEPU,tag:"partSupplyEPU",topMenuId:"content",loadPromise:null,isLoaded:!1,content:null,widget:null},partSupplyEPA:{id:c.appIds.partSupplyEPA,tag:"partSupplyEPA",topMenuId:"content",loadPromise:null,isLoaded:!1,content:null,widget:null},dataFilterPanelCtn:{id:c.appIds.advancedFilter,tag:"dataFilterPanelCtn",loadPromise:null,isLoaded:!1,content:null,widget:null},bookmarkEditor:{id:c.appIds.bookmarkEditor,tag:"bookmarkEditor",topMenuId:"content",loadPromise:null,isLoaded:!1,content:null,widget:null},space:{id:c.appIds.x3DSpace,tag:"space",topMenuId:"content",loadPromise:null,isLoaded:!1,content:null,widget:null},scientificSI:{id:c.appIds.scientificSI,tag:"scientificSI",loadPromise:null,isLoaded:!1,content:null,widget:null}},viewportHeight:0,resizeHandler:null,_externalApps:{},_frame:null,_isTaggerVisible:!1,_isCompassVisible:!1,_isDataFilterPanelVisible:!1,_isDashboardMenuVisible:!1,_legalPromise:s.deferred(),_visibleApp:null,_currentSearchQuery:"",_passportUrl:"",_contentApps:{},_previousRightPanelState:O,_previousRightPanelXApp:null,_rightTopBarMenus:null,appContainer:null,makeQueryParams:null,uninitializedCalls:"throw",upgradeInfoCookie:!1,init:function(e){var t,n=this;n._parent(e),n._initTopFrame(e),(t=n.options).addinMode&&document.body.addClassName("addinmode"),t.lockedAppMode&&document.body.addClassName("lockedapp"),n._initFrame(),n._initTopBar(),n._initTenant(),n._initTopBarProxy(),n._initSearchUX(),n._initInstantMessaging(),n._initDashboardMenu(),n._initTagNavigator(),n._initCompass(),n._initInfraSearchFrameController(),n._initNotificationManager(),n._initEvents(),n._initEventsListener(),n._activateLegal(),t.activateGDPR&&T.init(),n.resize(),n._loadModules(["DS/UWPClientCode/PublicAPI"]).then(function(e){var i=e[0],a=i.getApplicationConfiguration("app.urls.warningPrompt");n.clusterId=i.getApplicationConfiguration("app.build.cluster.id");try{"true"===t.isCloud&&a&&n.clusterId&&n._checkUpgradeInfo(a,n.clusterId)}catch(e){}}),t.showCoachmark&&t.showCoachmarkAtStartup&&n._showCoachmark({dnsa:!1})},getCurrentUserRoles:function(){return new s(function(e,t){P.getGrantedRoles(function(n){try{e(n&&n.map(e=>e.id))}catch(e){t(e)}})})},getCookieStore:function(e){return new s(t=>{var n,i=[],a=null;try{i=document.cookie.split("; ")}catch(e){}(n=i.filter(function(t){return t.split("=")[0]===e})).length&&(a=n[0].split("=")[1]),t(a)})},_getCookieStore:function(e){var t,n=[],i=null;try{n=document.cookie.split("; ")}catch(e){}return(t=n.filter(function(t){return t.split("=")[0]===e})).length&&(i=t[0].split("=")[1]),i},_convertUpgradeInfo:function(e,t){var n=["plannedDate","level","overloadMessage","postURL","isDismissed","messageSeenOn","messageCancelOn","onCancel","refreshOn"];switch(t){case"array2obj":var i={};n.forEach(function(t,n){i[t]=e[n]});break;case"obj2array":i=[];n.forEach(function(t,n){i.push(e[t])})}return i},_doUpdateGlobalUpgradeInfoDB:function(e,t){this.globalUpgradeInfoDB={};try{this.globalUpgradeInfoDB=JSON.parse(o.base64Decode(this._getCookieStore("UPGRADE_INFO")))||{}}catch(e){}var n=this._convertUpgradeInfo(e,"obj2array");this.globalUpgradeInfoDB[t]=n,Object.keys(this.globalUpgradeInfoDB).forEach(e=>{new Date(1e3*this.globalUpgradeInfoDB[e][0])<new Date&&delete this.globalUpgradeInfoDB[e]}),this.clusterUpgrade_infoObj.messageSeenOn||(this.clusterUpgrade_infoObj.messageSeenOn=(new Date).getTime(),this.globalUpgradeInfoDB[t][5]=(new Date).getTime()),l.setProductionUpgradeCookie(this.globalUpgradeInfoDB)},_displayUpgradeInfo:function(){const e=this.isUpgradeEventInCurrentWeek(1e3*this.clusterUpgrade_infoObj.plannedDate),t=(new Date).getTime(),n=(Math.abs(t-this.clusterUpgrade_infoObj.messageSeenOn),l.isSeenBefore(parseInt(this.clusterUpgrade_infoObj.messageSeenOn),t,1)),i=l.isSeenBefore(parseInt(this.clusterUpgrade_infoObj.messageSeenOn),t,7);new Date(1e3*this.clusterUpgrade_infoObj.plannedDate).getTime()>(new Date).getTime()&&1==!this.clusterUpgrade_infoObj.isDismissed&&(e&&(n||!n&&!this.clusterUpgrade_infoObj.isDismissed&&!this.clusterUpgrade_infoObj.onCancel)||!e&&(i||!i&&!this.clusterUpgrade_infoObj.isDismissed&&!this.clusterUpgrade_infoObj.onCancel))&&(this.clusterUpgrade_infoObj.messageSeenOn=t,this.showProductionAlert(this.clusterUpgrade_infoObj),this._doUpdateGlobalUpgradeInfoDB(this.clusterUpgrade_infoObj,this.clusterId))},_checkUpgradeInfo:function(e,t){var n=this,i=new Date(new Date).toISOString().split("T")[0];n.globalUpgradeInfoDB={};try{n.globalUpgradeInfoDB=JSON.parse(o.base64Decode(n._getCookieStore("UPGRADE_INFO")))||{}}catch(e){}if(n.clusterUpgrade_infoObj=n._convertUpgradeInfo(n.globalUpgradeInfoDB[t]||{},"array2obj"),n.clusterUpgrade_infoObj&&n.clusterUpgrade_infoObj.refreshOn===i)this._displayUpgradeInfo();else{const a=encodeURIComponent(JSON.stringify({clusterid:t,lang:S.getCurrentLanguage()})),o=e+t+"?options="+a;require([["DS","WAFData","WAFData"].join("/")],function(e){e.proxifiedRequest(o,{method:"GET",onComplete:function(e){try{e=JSON.parse(e),n.clusterUpgrade_infoObj.plannedDate!==e.plannedDate&&(n.clusterUpgrade_infoObj=n._convertUpgradeInfo({},"array2obj")),Object.keys(e).forEach(t=>{n.clusterUpgrade_infoObj[t]=e[t]}),n.clusterUpgrade_infoObj.refreshOn=i,n._doUpdateGlobalUpgradeInfoDB(n.clusterUpgrade_infoObj,t),n.showProductionAlert(n.clusterUpgrade_infoObj)}catch(e){}}})})}},isUpgradeEventInCurrentWeek:e=>!l.isSeenBefore(parseInt(e),(new Date).getTime(),7),showProductionAlert(){const e=this.clusterUpgrade_infoObj,t=new Date,n=t.getMonth()+1,i=t.getDate()+"-"+n+"-"+t.getFullYear();if(!(e.isDismissed||e.onCancel&&e.messageCancelOn===i)){var a=this,o=e.messageSeenOn,s=(new Date).getTime();if(o){if(e.isDismissed||e.onCancel&&e.messageCancelOn===i)return;r(e)}else e.messageSeenOn=s,r(e)}function r(e){a._setUpgradeMessage(e).then(function(t){a.showProductionUgradeAlert({className:"upgrade-prompt-alert",autoHide:!1,messages:[{class:"upgrade-message primary",html:e.overloadMessage?e.overloadMessage:t}],closeOnClick:!0,upgradeInfo:e})})}},_initTopFrame(t){var n,i,a;this.setOptions(t),i=(n=this.options).lockedAppMode,a=n.startupParams,n.brandAbout=n.brandAbout||"",n.appNameAbout=n.appNameAbout||"",n.numberAbout=n.numberAbout||"",n.communityUrl=n.communityUrl||"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:4",n.supportPublicCloudUrl=n.supportPublicCloudUrl||"https://www.3ds.com/support/3dexperience-platform-on-cloud-support/",n.lang=e.is(n.lang)?n.lang:M.lang,n.xappsMode=e.is(n.xappsMode)?n.xappsMode:M.xappsMode,n.activateAbout=e.is(n.activateAbout)?n.activateAbout:M.activateAbout,n.activateGDPR=e.is(n.activateGDPR)?n.activateGDPR:M.activateGDPR,n.activateLegal=e.is(n.activateLegal)?n.activateLegal:M.activateLegal,n.activateInstantMessaging=e.is(n.activateInstantMessaging)?n.activateInstantMessaging:M.activateInstantMessaging,n.activateSearch=e.is(n.activateSearch)?n.activateSearch:M.activateSearch,n.activateNewSearch=(e.is(n.activateFederatedSearch)?n.activateFederatedSearch:M.activateFederatedSearch)||o.getQueryString(window.location.href,"universal_search"),n.myAppsBaseUrl=n.myAppsBaseUrl||n.myAppsBaseURL,n.onTenantChange=e.is(n.onTenantChange,"function")?n.onTenantChange:M.onTenantChange,n.onCredentialsChange=e.is(n.onCredentialsChange,"function")?n.onCredentialsChange:E,n.onCollabSpaceChange=e.is(n.onCollabSpaceChange,"function")?n.onCollabSpaceChange:E,i?(n.showCoachmark=!1,n.showCoachmarkAtStartup=!1):(n.showCoachmark="boolean"==typeof n.showCoachmark?n.showCoachmark:M.showCoachmark,n.showCoachmarkAtStartup=n.showCoachmark&&!!(a||{}).showCoachmark),this.useTagger=e.is(n.useTagger)?n.useTagger:M.useTagger,n&&!1===this.useTagger&&(_=void 0),this._tenantId=n.tenant,this._communityId=n.community,this._passportUrl=n.passportUrl,this.isPublicCloud=this._isPublicCloud(),this._serviceUrl=n.serviceUrl,this._prefixUrl=n.prefixUrl,this._initContentAppsAttribute(),this._initRightTopBarMenusAttribute(),this.helpMenuOptions={brandAbout:n.brandAbout,appNameAbout:n.appNameAbout,numberAbout:n.numberAbout,getStartedUrl:n.getStartedUrl,communityUrl:n.communityUrl,supportPublicCloudUrl:n.supportPublicCloudUrl,topBarId:"helpMenu"}},_initRightTopBarMenusAttribute:function(){var e,t=this,n=t.options.topMenus;function i(e){var n=e.xAppTag;t.isPanelOpen(U)&&n===t.getPanelApp(U)?t.closePanel(U):t.openPanel(U,{tag:n})}Array.isArray(n)&&(e={},n.forEach(function(t){e[t]=!0}),n=e),n&&(!0===n.notification&&(n.notification=function(){i({xAppTag:"notification"})}),!0===n.content&&t.getEnabledContentxAppTags().length&&(n.content=function(){var e,n=t._contentApps,a=p.getLastLoadedxAppContentTopMenu();(e=a&&n[a]?a:n.content?"content":t.getEnabledContentxAppTags()[0])?i({xAppTag:e}):console.error("No xApp to show in Content Right panel.")}),!0===n.social&&(n.social=function(){i({xAppTag:"social"})}),n.context=!0,t._rightTopBarMenus=n)},_initContentAppsAttribute:function(){var e=this.options;if(!e.contentApps||0==Object.keys(e.contentApps).length){var t=e.topMenus,n=!1;if(Array.isArray(t)?n=t.includes("content"):"object"==typeof t&&(n=!!t.content),n){var i={content:!0};e.contentApps=i,console.warn("You are using a deprecated TopFrame init options.\nPlease now specify the available apps in the Content right panel.\nPlease provide: options.contentApps = {} at least to use TopFrame default value.\nSee TopFrame#init `options.contentApps` documentation for more information.")}}this._contentApps=Object.assign({},j,e.contentApps||{})},getApplicationContainer:function(){return this.appContainer},showProductionUgradeAlert:function(t){var n,i=e.createElement,a=this,o=t.upgradeInfo;function s(){n&&n.elements&&n.destroy(),n=null}n=new C({className:["ifwe-prod-upgrade-notify",t.className||""].join(" "),closable:!0,visible:!0,autoHide:t.autoHide||!1,closeOnClick:!1,hideDelay:t.hideDelay||4e3,events:{onRemoveMessage:function(){const e=new Date,t=e.getMonth()+1,n=e.getDate()+"-"+t+"-"+e.getFullYear();o.onCancel=!0,o.messageCancelOn=n,a._doUpdateGlobalUpgradeInfoDB(a.clusterUpgrade_infoObj,a.clusterId),s()},onClick:t.onClick||function(){}}}).inject(document.body,"top");let r=e.createElement("span",{html:[t.messages[0]]});n.add(r);const l=i("div",{class:"buttonContainer"}).inject(n.elements.container.firstChild);return i("span",{class:"banner-action-container",html:[new w({className:"ReadMore-btn default",value:y.readMore,events:{onClick:function(){s(),a.openAboutDialog()}}}),new w({className:"dissmiss-btn link",value:y.dismissUpgradePrompt,events:{onClick:function(){o.isDismissed=!0,a._doUpdateGlobalUpgradeInfoDB(a.clusterUpgrade_infoObj,a.clusterId),s()}}})]}).inject(l),n},toggleTagger:function(e){this._isTaggerVisible=void 0===e?!this._isTaggerVisible:e,this._isTaggerVisible&&(this._isCompassVisible&&f.hideAccordion(),this._isCompassVisible=!1),this._updateLeftPanel(),_&&_.toggle6WTaggerViewVisibility(this._isTaggerVisible)},_displayTagger:function(){this.toggleTagger(!0)},_setTaggerMode:function(e){_&&_.view&&e&&_.view.setTaggerMode(e)},_hideTagger:function(){this._isTaggerVisible&&this.toggleTagger(!1)},_initTopBar:function(){var t,n,i=this,s=i.options,r=i._getSwymURL();if((n=e.extend({userName:"",brand:"",appName:"",application:"",lang:"en",isShared:!1,useTagger:!0,picture:"",swymUrl:r,tenantId:s.hideTenantDisplay?"":i._tenantId,serviceName:s.serviceName,getAllTenants:s.getAllTenants,logoutMode:"private"!==s.logoutMode?"public":s.logoutMode,onUserContextClick:s.onUserContextClick,events:{menu:function(){i.appContainer.toggleClassName("right")},logo:function(){var e=a.getSize.call(document),t=s.addinMode,n=s.lockedAppMode;i._isCompassVisible||n||t&&e.width>i.COMPASS_BREAKPOINT||f.showAccordion(!0)}}},l.pick(s,"userName","appIcon","brand","appName","application","isShared","useTagger","lang","events","signupAction","loginAction","signupUrl","loginUrl"),!0)).topMenus=i._rightTopBarMenus,n.activateNewSearch=!!s.activateNewSearch,n.activateSearch=!!s.activateSearch,s.picture)n.picture=s.picture;else if(s.userId&&r&&(t=o.parseUrl(r)).authority){var c,p=t.protocol||"https",d=t.authority,u=t.directoryPath||"/",g=s.userId;n.picture=p+"://"+d+u+"api/user/getpicture/login/"+g}if(n.picture){try{c=require(["DS","WAFData","WAFData"].join("/"))}catch(e){console.warn("WAFData is mandatory to proxify picture URL")}c&&(n.picture=c.proxifyUrl(n.picture))}n.addinMode=s.addinMode,n.lockedAppMode=s.lockedAppMode,n.topFrameVue=s.topFrameVue,m.init(n),h.setStaticMenuProviders(["compassMenu","notificationsMenu","searchMenu","instantMessagingMenu","helpMenu"]),m.addEvent({events:{search:function(e){i._onSearch(e.value||"")},clearSearch:function(){i._onSearch("")},tenant:s.onTenantChange,collabSpace:s.onCollabSpaceChange,credentials:s.onCredentialsChange}})},_setUpgradeMessage(e){var t=this,n=new Date(1e3*e.plannedDate);return new s(function(i,a){t._loadModules(["DS/UWPClientCode/I18n"]).then(function(t){var a=t[0];i(a.replace(y.upgradePromptMessage,{EventProductVersion:e.level,eventDate:n.toLocaleDateString(S.getCurrentLanguage(),{timeZone:"UTC"})}))},a)})},_initTenant(){var e=this;require([["DS","PlatformAPI","PlatformAPI"].join("/")],function(t){t.setTenant(e._tenantId)},function(e){})},_initSearchUX:function(){var e=this,t=e.options;(t.activateSearch||t.activateNewSearch)&&require(["DS/SNSearchUX/SearchUX_TopBar"],function(n){var i={ressources:{},userId:null,topBarId:"searchMenu",searchInputTarget:"input_search_div",events:{}};i.x3dPlatformId=e._tenantId,i.addinMode=t.addinMode,t.events&&(i.events={search:t.events.search,clearSearch:t.events.clearSearch}),t.userId&&(i.userId=t.userId),t.startupParams&&(i.ressources=t.startupParams),t.searchParams&&(i.searchParams=t.searchParams),i.events.openTagger=e._displayTagger.bind(e),i.events.closeTagger=e._hideTagger.bind(e),i.events.setTaggerMode=e._setTaggerMode.bind(e),n.init(i)})},_initInstantMessaging:function(){var t=this,n=t._getSwymURL(),i=t.options,a=i.startupParams;i.activateInstantMessaging&&!i.lockedAppMode&&require(["DS/InstantMessaging/InstantMessaging"],function(o){o.init(e.extend({userId:null,topBarId:"instantMessagingMenu",appName:i.brand,userName:i.userName,passportUrl:t._getPassportUrl(),ressources:n?{swym:[{id:t._tenantId,displayName:t._tenantId,url:n}],instantMessaging:a?a.instantMessaging:null}:{}},l.pick(i,"xswym","realtime","userId",{startupParams:"ressources"})))})},_initDashboardMenu:function(){var e=this;e.options.dashboardSwitch&&require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(t){t.init({container:e._frame.getContentElement(D,"dashboardMenuCtn"),onClose:function(){e._isDashboardMenuVisible=!1,e._updateLeftPanel()},onOpen:function(){e._isCompassVisible=!1,e._isDataFilterPanelVisible=!1,e._isDashboardMenuVisible=!0,e._hideTagger("compass"),e._updateLeftPanel()}})})},_initFrame:function(){var t,n,i,a,o,s="div",l=this,c=e.createElement,p=l.options,d=l._rightTopBarMenus,u=l.XAPPS,h=p.dashboardSwitch;function g(e,t){var n,i=t.panel,a=t.position,o=e===F,s=e===k,r=e===R,c=i===D,p="onLeftPanelOpened",d="onLeftPanelClosed",u="onLeftPanelHidden",h="onRightPanelOpened",g="onRightPanelClosed",f="onRightPanelHidden";if(i===U&&(l._onRightPanelChange(),o&&(n=h),s&&(n=g,m.view.children.rightMenuBar._onItemViewActivate()),r&&(n=f)),c){if(l._onLeftPanelChange(),s&&(n=d,c)){l._isTaggerVisible=!1,l._isCompassVisible=!1,l._isDataFilterPanelVisible=!1,l.useTagger&&_.toggle6WTaggerViewVisibility(!1);var P=l._manageCompass.bind(l);requestAnimationFrame(P)}o&&(n=p),r&&(n=u)}l.dispatchEvent(n,[e,i,t.tag,a])}n=c(s,{id:"my-apps-ct",class:"column-container"}),i=c(s,{id:"tagger-ct",class:"column-container"}),a=c(s,{id:"data-filter-panel-ct",class:"column-container"}),h&&(o=c(s,{id:"new-dashboard-menu",class:"column-container"})),l.appContainer=c(s,{class:"app-content"}),t={left:{myAppsCtn:n,taggerCtn:i,dataFilterPanelCtnOld:a},main:{appContainer:l.appContainer},right:{}},h&&(t.left.dashboardMenuCtn=o),t.left.dataFilterPanelCtn=u.dataFilterPanelCtn.content=c(s,{class:"x-app advancedFilter panelManagerClosable panelManagerMaximizable"}),d&&(t.right={loading:c(s,{class:"x-app spinner",text:y.loading}),error:c(s,{class:"x-app error",text:y.xAppError})},(d.notification||p.addinMode)&&(t.right.notification=u.notification.content=c(s,{class:"x-app notification"})),d.social&&(t.right.social=u.social.content=c(s,{class:"x-app social"})),d.content&&(t.right.content=u.content.content=c(s,{class:"x-app content"}),t.right.partSupply=u.partSupply.content=c(s,{class:"x-app partSupply"}),t.right.partSupplyEPA=u.partSupplyEPA.content=c(s,{class:"x-app partSupplyEPA"}),t.right.partSupplyEPU=u.partSupplyEPU.content=c(s,{class:"x-app partSupplyEPU"}),t.right.space=u.space.content=c(s,{class:"x-app space"}),t.right.bookmarkEditor=u.bookmarkEditor.content=c(s,{class:"x-app bookmarkEditor"}),t.right.scientificSI=u.scientificSI.content=c(s,{class:"x-app scientificSI"}))),p.activateSearch&&p.activateNewSearch&&(t.right.search=u.search.content=c(s,{class:"x-app search"})),t.right.messaging=u.messaging.content=c(s,{class:"x-app messaging"}),t.right.make=u.make.content=c(s,{class:"x-app make"}),l._frame=new r(t,{animateMainPanelOnPanelMove:{left:!0,right:!1},events:{onPanelOpen:g.bind(l,"open"),onPanelClose:g.bind(l,"close"),onPanelHide:g.bind(l,"hide"),onPanelChange:p.onRightPanelChange||E}})},_initTagNavigator:function(){var t,n=this,i=n.options,a=i.startupParams;_&&(t=e.extend({disableAutoComplete:!0,taggerIconId:"btn_tag_nav",appsTarget:"tagger-ct",events:{onFilterChange:l.always(!1)},lang:"en",userId:null,x3dPlatformId:n._tenantId,isAuthenticated:n._isAuthenticated},l.pick(i,"myAppsBaseUrl","tagsServerUrl","onFilterChange","getContextIdFromWidgetId","getTabTitleFromTabId","getWidgetNameFromWidgetId","displayFilteredState","getWidgetTitleFromWidgetId","lang","brand","tenant","userId")),a?t.startupParams=a:i.taggerService&&i.cStorageService&&n._tenantId?e.extend(t,l.pick(i,"taggerService","cStorageService","tenant")):i.tagsServerUrl&&(t.tagsServerUrl=i.tagsServerUrl,i.envId&&(t.tagsServerUrlParams={tenant:i.envId})),_.set6WTaggerOptions(t),_.create6WTaggerView(_.get6WTagger("default"),t.appsTarget,{onClose:function(){n._isTaggerVisible=!1,n._updateLeftPanel()},onOpen:function(){require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(e){e.close()}),n._isCompassVisible=!1,n._isDataFilterPanelVisible=!1,n._isDashboardMenuVisible=!1,n._isTaggerVisible||(n._isTaggerVisible=!0,n._updateLeftPanel())},onFilterChange:t.events.onFilterChange,displayTaggerOnFocus:n._displayTagger.bind(n),hideTaggerOnFocus:n._hideTagger.bind(n)}),_.toggle6WTaggerViewVisibility(!1))},_initCompass(){var t=this,n=t.options,i="DEFAULT";f.initialize(e.extend({version:n.compassVersion,defaultQuadrant:n.compassDefaultQuadrant,logoClassName:"topbar-logo",compassTarget:"compass_ctn",appsTarget:"my-apps-ct",closable:!0,enableWidgetDrag:null,closeOnLaunch:!1,launchOnSameDomain:l.always(!1),onOpen:function(){require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(e){e.close()}),t._isDashboardMenuVisible=!1,t._isDataFilterPanelVisible=!1,t._isCompassVisible=!0,i="DEFAULT",t._hideTagger("compass"),t._updateLeftPanel()},onClose:function(){t._isCompassVisible=!1,i="DEFAULT",t._updateLeftPanel()},setPanelMode:function(e){var n;i!==e&&(i=e,n="FULL_WIDTH"===e,t._updateLeftPanel({maximize:n,minimize:!n,closeRightPanel:n}))},getPanelMode:function(){return i},lang:"en",myAppsBaseUrl:"",userId:null,passportUrl:t._getPassportUrl(),proxyTicketUrl:null,topBarId:"compassMenu",x3dPlatformId:t._tenantId,platform:t._tenantId},l.pick(n,"launchOnSameDomain","closeOnLaunch","enableWidgetDrag","userId","myAppsBaseUrl","proxyTicketUrl","lang","addinMode")))},async _initInfraSearchFrameController(){var e=this,t=await e._loadModules(["DS/Dashboard/UserPlatformAccess"]),n=t&&await t[0].fetchUserRoles();((n=n.map(e=>e.id)).includes("CSV")||n.includes("InternalDS"))&&e._instantiateFilterApp("dataFilterPanelCtn"),require(["DS/ENOFrame3DXInfra/Frame3DXController"],function(t){t.init({container:e._frame.getContentElement(D,"dataFilterPanelCtnOld"),open:function(){require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(e){e.close()}),e._isCompassVisible=!1,e._isDataFilterPanelVisible=!0,e._isDashboardMenuVisible=!1,e._isTaggerVisible=!1,e._hideTagger("compass"),e._updateLeftPanel({xAppTag:"dataFilterPanelCtn",maximize:!1,minimize:!0})},close:function(){e._isDataFilterPanelVisible=!1,e._updateLeftPanel()}})})},_showCoachmark(t){t=t||{};var n=this;require(["DS/Coachmark/Coachmark"],function(i){var a=n.options;t.events=t.events||{},e.merge(t.events,{onDNSAChange:a.onCoachmarkDNSAChange}),i.init({myAppsBaseURL:a.myAppsBaseUrl,forceDisplay:!0,lang:a.lang,xappsMode:a.xappsMode,dnsa:t.dnsa})})},_initTopBarProxy(){var e,t=this,n=t.options;e=new g({id:"helpMenu"}),n.showCoachmark&&e.addContent({help:[{label:y.getStartedItem,className:"item-getStartedItem",onExecute:function(){t._showCoachmark()}}]}),e.addContent({help:[{label:y.supportCommunitiesItem,className:"item-userCommunities",submenu:[{label:"3DEXPERIENCE Platform",onExecute:function(){t._openUrlInBlankTab({url:n.communityUrl,modalTitle:y.supportCommunitiesItem,modalButton:"3DEXPERIENCE Platform"})}},{label:"Social & Collaboration",submenu:[{label:"ENOVIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:38",modalTitle:y.supportCommunitiesItem,modalButton:"ENOVIA"})}},{label:"3DEXCITE",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:g_fzYGr0Q6mHYxoVvGKnOw",modalTitle:y.supportCommunitiesItem,modalButton:"3DEXCITE"})}}]},{label:"3D Modeling",submenu:[{label:"CATIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:6",modalTitle:y.supportCommunitiesItem,modalButton:"CATIA"})}},{label:"BIOVIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:36",modalTitle:y.supportCommunitiesItem,modalButton:"BIOVIA"})}},{label:"GEOVIA",onExecute:function(){t._openUrlInBlankTab({url:"https://discuss.geoviasupport.com/",modalTitle:y.supportCommunitiesItem,modalButton:"GEOVIA"})}},{label:"SOLIDWORKS",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:yUw32GbYTEqKdgY7-jbZPg",modalTitle:y.supportCommunitiesItem,modalButton:"SOLIDWORKS"})}}]},{label:"Simulation",submenu:[{label:"3DVIA",onExecute:function(){t._openUrlInBlankTab({url:"https://www.3ds.com/products-services/3dvia/?wockw=3DVIA%20Home",modalTitle:y.supportCommunitiesItem,modalButton:"3DVIA"})}},{label:"SIMULIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:39",modalTitle:y.supportCommunitiesItem,modalButton:"SIMULIA"})}},{label:"DELMIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:26",modalTitle:y.supportCommunitiesItem,modalButton:"DELMIA"})}}]},{label:"Information Intelligence",submenu:[{label:"NETVIBES",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:34",modalTitle:y.supportCommunitiesItem,modalButton:"NETVIBES"})}}]}]}]}),t.isPublicCloud().then(function(i){i&&e.addContent({help:[{label:y.getSupportItem,className:"item-getSupport",onExecute:function(){t._openUrlInBlankTab({url:n.supportPublicCloudUrl,modalTitle:y.getSupportItem,modalButton:y.getSupportItem})}}]})}),n.activateAbout&&e.addContent({help:[{label:y.aboutItem,className:"item-aboutItem",onExecute:function(){var e,n;(n=a.getElement.call(document.body,[".ds-coachmark"]))&&(e=n.getElement(".ds-coachmark-close"))&&e.triggerEvent("click"),t.openAboutDialog()}}]}),n.activateGDPR&&e.addContent({profile:[{label:y.cookies,className:"item-cookies item-cookies-order",onExecute:function(){T.start()}}]})},_initEvents(){var e=this;require([["DS","PlatformAPI","PlatformAPI"].join("/")],function(t){t.subscribe("marketplace.make.sendContent",function(t){e.makeQueryParams=t||{},e.openPanel(U,{appId:"Make",tag:"make"})})})},_initEventsListener(){window.MessageBus=d,d.subscribe({channel:"3DDashboard-XAPP-Bus",topic:"toggleXAPPinSidePanel",callback:e=>{var t=c.appIds,n=Object.keys(t).find(n=>t[n]===e.appId);t.hasOwnProperty(n)&&this._updateRightPanel({xAppTag:n,maximize:"maximized"===e.panelState,minimize:"minimized"===e.panelState,action:e.action})}})},_initNotificationManager:function(){var t=this;require(["DS/NotificationManager/notificationManager"],function(n){var i=t.options;new n(e.extend({notifServer:"",topBarID:"notificationsMenu",swymServer:t._getSwymURL(),passportServer:"",login:""},l.pick(i,{passportUrl:"passportServer",userId:"login"},"notifServer")))})},_getSwymURL:function(){var e=this.options;return e.swymUrl||l.resolve(e,["startupParams","swym","0","url"],null)},getPanelState:function(e){return this._frame.getPanelState(e)},_openUrlInBlankTab:function(t){if(o.Client.Engine.safari)var n=new A({header:t.modalTitle,body:e.createElement("div",{styles:{"text-align":"center"},html:new w({value:t.modalButton,className:"primary",icon:"login",events:{onClick:function(){window.open(t.url,"_blank"),n.hide()}}})}),visible:!0,closable:!0,renderTo:document.body,events:{onHide:function(){n=null}}});else window.open(t.url,"_blank")},_loadModules:function(t){var n=[];return e.is(t,"string")?n[0]=t:n=t,new s(function(e,t){require(n,function(){e(Array.prototype.slice.call(arguments))},function(e){t("Error loading modules."+(e&&e.requireModules?e:""))})})},_instantiateApp:function(t,n,i,a){t=t||{},i=i||{};var o=this;return new s(function(s,r){o._loadModules(["DS/UWPClientCode/WidgetFactory","DS/TopFrame/Environment"]).then(function(l){var c=l[0],p=l[1],d=t.id,u=o._tenantId&&{x3dPlatformId:o._tenantId}||{},m=o._communityId&&{community:o._communityId}||{},h=e.merge(i,e.merge(u,m)),g=JSON.stringify(h),f={el:n,parent:!1,preview:!0,appId:d,data:g,header:!0,serviceUrl:o._serviceUrl,prefixUrl:o._prefixUrl};if(t.platforms&&o._tenantId&&t.platforms.forEach(function(e){e.id===o._tenantId&&(t.launchInfos=e.launchInfos,t.checksum=e.checksum||t.checksum,t.isolationLevel=e.isolationLevel||t.isolationLevel)}),!(t.checksum&&t.launchInfos||t.platforms&&t.platforms[0]&&t.platforms[0].checksum&&t.platforms[0].launchInfos))throw new Error("Could not get valid Config from MyApps for the App "+f.appId);f=e.extend(f,{widgetId:e.is(t.launchInfos)?t.launchInfos:t.platforms[0].launchInfos,isolationLevel:e.is(t.isolationLevel)?t.isolationLevel:t.platforms[0].isolationLevel,token:e.is(t.checksum)?t.checksum:t.platforms[0].checksum}),o._frame.showPanelContent(a.panel,a.xAppTag),c.load(f,function(){s(f.widget)},p,function(e){console.error("Fail to load the widget: ",d,e),r(e)})}).catch(function(e){r(e)})})},_instantiateFilterApp(e){var t=this,n=t.XAPPS[e]||t._externalApps[e];c.getAppInfo({appId:n.id}).then(function(e){return t._instantiateApp(e,n.content,{},{})}).then(function(e){n.isLoaded=!0,n.widget=e}).catch(function(e){try{console.error(e.stackTrace||e)}catch(e){}n.loadPromise=null})},_showApp:function(t,n,i){var a,o=this,r=o._frame,l=o.XAPPS[t]||o._externalApps[t];return l&&l.content?(a=l.id,"make"===t?(require([["DS","i3DXCompassPlatformServices","i3DXCompassPlatformServices"].join("/")],function(n){n.getPlatformServices({onComplete:function(n){var a=n&&n.filter(function(e){return e.mppresentation}),s=(a&&a[0]&&a[0].mppresentation||"https://make.3dexperience.3ds.com")+"/addin?"+function t(n,i){return Object.keys(n).map(function(a){var o=n[a];if("originalAsset"===a)return t(o,"originalAsset_");try{return e.is(o,"object")&&(o=JSON.stringify(o)),i+encodeURIComponent(a)+"="+encodeURIComponent(o)}catch(e){return i+encodeURIComponent(a)+"="+encodeURIComponent(o)}}).join("&")}(o.makeQueryParams,""),c=document.createElement("iframe");for(c.setAttribute("src",s),c.style.width="100%",c.style.height="100%",c.style.paddingTop="38px",c.style.border="none";l.content.firstChild;)l.content.removeChild(l.content.firstChild);l.content.appendChild(c),l.isLoaded=!0,r.showPanelContent(i,t)}})}),s.resolve()):l.isLoaded||l.loadPromise?(r.showPanelContent(i,t),l.loadPromise||s.resolve()):(r.showPanelContent(i,"loading"),l.loadPromise=c.getAppInfo({appId:a}).then(function(e){return o._instantiateApp(e,l.content,n||{},{panel:i,xAppTag:t})}).then(function(e){l.isLoaded=!0,l.widget=e,r.showPanelContent(i,t)}).catch(function(e){try{console.error(e.stackTrace||e)}catch(e){}l.loadPromise=null,"content"===l.topMenuId?(p.getLastLoadedxAppContentTopMenu()===t&&p.setLastLoadedxAppContentTopMenu(""),r.showPanelContent(i,t),o._loadModules(["DS/TopFrame/Environment"]).then(function(e){new(0,e[0])({el:r.getContentElement(i,t),appId:a}).showErrorView()})):r.showPanelContent(i,"error")}),l.loadPromise)):s.resolve()},_updateColumn:function(e,t){return console.warn("TopFrame#_updateColumn is @private and @deprecated method. Please use @public TopFrame#openPanel method instead."),e===D?(this._updateLeftPanel(),!0):e===U&&(this._updateRightPanel({action:"toggle",xAppTag:t}),!0)},_updateLeftPanel:function(e){var t,n,i=(e=e||{}).action===k,a=this._frame,o=e.xAppTag,r=!!e.maximize,l=!!e.minimize;function c(){return a.closePanel(D)}if(i)t=c();else if(this._isTaggerVisible||this._isCompassVisible||this._isDataFilterPanelVisible||this._isDashboardMenuVisible){var p=!!this.options.addinMode,d=p&&document.body.hasClassName("with-app");this._isTaggerVisible?a.showPanelContent(D,"taggerCtn"):this._isCompassVisible?(a.showPanelContent(D,"myAppsCtn"),p&&!d&&(e.maximize=!0,e.minimize=!1,e.closeRightPanel=!0,n=!0)):this._isDataFilterPanelVisible?t=s.all([a.openPanel(D,{maximize:r,minimize:l,closeOppositePanel:!1}),this._showApp(o,void 0,D)]):this._isDashboardMenuVisible&&a.showPanelContent(D,"dashboardMenuCtn"),t=a.openPanel(D,{maximize:e.maximize,minimize:e.minimize,closeOppositePanel:e.closeRightPanel,forceSmallScreenPanelMode:n})}else t=c();return t.then(this._manageCompass.bind(this))},_updateRightPanel:function(e){e=e||{};var t,n=this,i=n._frame,a=e.action||"toggle",o=e.xAppTag,r=o&&n.getxApp({tag:o}),l=e.xAppData,c=!!e.maximize,p=!!e.minimize,d=!!e.closeLeftPanel;return"toggle"===a&&(a=i.isPanelOpen(U)?k:F),a===F?(n._visibleApp=o,n._activateSelectedxAppTopMenu(r),t=s.all([i.openPanel(U,{maximize:c,minimize:p,closeOppositePanel:d}),n._showApp(o,l,U)])):(n._visibleApp=null,t=i.closePanel(U).then(function(){n._deactivateActiveTopMenu()})),t},_manageCompass:function(){var e,t,n;function i(){clearTimeout(n),e.removeClassName("compass-force-show"),t.removeEvent("transitionEnd",i)}e=document.querySelector("#compass_ctn"),this._isCompassVisible?e&&e.addClassName("compass-force-show"):(f.hideAccordion(),e&&(t=e.getElement(".compass-base"))&&(t.addEvent("transitionEnd",i),n=setTimeout(i,350)))},_activateLegal:function(){var t,n=this,i=n.options;if(i.activateLegal){var a=i.startupParams||{},o=i.myAppsBaseUrl||"",s=i.legal&&e.is(i.legal,"array"),r={myAppsBaseUrl:o,renderFooter:!0,footerContainer:n.appContainer,onAccept:null,legal:a.legal,swym:a.swym,onFailure:null,onAboutClick:n.openAboutDialog.bind(n),legalTenantId:n._tenantId};t=e.extend(r,l.pick(i,{onFailLegal:"onFailure",onAcceptLegal:"onAccept",myAppsBaseURL:"myAppsBaseUrl"},"renderFooter","legal")),n.isPublicCloud().then(function(a){s&&(t.legal=t.legal.filter(function(e){return e.id&&e.id===n._tenantId}),a&&i.legal.push({id:"3DS",displayName:"Dassault Systèmes",acceptedDP:!0,dp:"https://www.3ds.com/privacy-policy/",ressourceType:"url",footerDisplay:function(t){var n=!1;return e.is(t,"array")&&(n=t.some(function(e){return!0===e.footerDisplay})),n}(t.legal)})),v.init(t),n._legalPromise.resolve()}).catch(E)}},_onSearch:function(e){var t=this._frame;this._currentSearchQuery=e||"",(t.isPanelMaximized(U)||t.isPanelFitted(U))&&this._propagateSearch(e)},_onRightPanelChange:function(){var e=this,t=e.options||{},n=e.getPanelState(U),i=e.getPanelState(D),a=n!==e._previousRightPanelState,o=e._frame.getShownTag(U),s=o!==e._previousRightPanelXApp;function r(t){if(_){var n=_.get6WTagger("RightPanelContext");if(n)if(t){var i=Object.assign({},e.XAPPS,e._externalApps),a=e._visibleApp,o=(i&&a&&i[a]||{}).widget;o&&o.id?n.setAsCurrent().focusOnCC(o.id):n.unfocusCC()}else n.unfocusCC()}}if(e._previousRightPanelState=n,e._previousRightPanelXApp=o,n===O)e._visibleApp=null,a&&(r(!1),e._propagateSearch(""));else if(n===x){if(a||s){if(i===L)return;r(!1),e._propagateSearch("")}a&&"function"==typeof t.onRightPanelMinimize&&t.onRightPanelMinimize()}else n!==N&&n!==L||((a||s)&&(r(!0),e._propagateSearch()),a&&"function"==typeof t.onRightPanelMaximize&&t.onRightPanelMaximize())},_onLeftPanelChange:function(){var e=this,t=e.options||{},n=e.getPanelState(U),i=e.getPanelState(D),a=i!==e._previousleftPanelState,o=e._frame.getShownTag(U),s=o!==e._previousRightPanelXApp;function r(t){if(_){var n=_.get6WTagger("RightPanelContext");if(n)if(t){var i=Object.assign({},e.XAPPS,e._externalApps),a=e._visibleApp,o=(i&&a&&i[a]||{}).widget;o&&o.id?n.setAsCurrent().focusOnCC(o.id):n.unfocusCC()}else n.unfocusCC()}}if(e._previousLeftPanelState=n,e._previousRightPanelXApp=o,i===x&&n===x){if(a||s){if(n===L)return;r(!1),e._propagateSearch("")}a&&"function"==typeof t.onRightPanelMinimize&&t.onRightPanelMinimize()}else i!==N&&i!==L||((a||s)&&(r(!0),e._propagateSearch()),a&&"function"==typeof t.onRightPanelMaximize&&t.onRightPanelMaximize())},_onRightPanelStateChange:function(){return console.warn("TopFrame#_onRightPanelStateChange is a @private and a @deprecated method."),this._onRightPanelChange()},_propagateSearch:function(t){var n,i,a=(e.Widgets||{}).instances||[];for(n=0;n<a.length;n++)"sidepanel"===(i=a[n].environment).name&&i.propagateSearch(e.is(t,"string")?t:this._currentSearchQuery)},_isAuthenticated:function(){return!!I.options.userId},_isPublicCloud:function(){var e=null,t=this.options,n=t.cloudType,i=t.isCloud,a=[],o=!1;return function(){var t=this;if(!t._isAuthenticated())return s.resolve(!1);if("boolean"==typeof e)return s.resolve(e);if(void 0===i&&void 0===n){if(o){var r=s.deferred(),l=r.promise;return a.push(r),l}return o=!0,new s(function(n,i){function s(e,t){a.forEach(function(n){n[e](t)}),a=[]}var r=S.buildPath(t._getPassportUrl(),"/api/authenticated/user/fields");require([["DS","WAFData","WAFData"].join("/")],function(t){t.authenticatedRequest(r,{method:"GET",headers:{Accept:"application/json","Content-type":"application/json"},onComplete:function(t){try{e=!!JSON.parse(t).fields.dpp_consent}catch(t){e=!1}o=!1,s("resolve",e),n(e)},onFailure:function(e){window.console&&window.console.error(e),o=!1,s("reject",e),i(e)}})},function(e){window.console&&(window.console.error("WAFData can not be required ..."),window.console.error(e)),o=!1,s("reject",e),i(e)})})}return"true"===i&&"public"===n?(e=!0,s.resolve(e)):(e=!1,s.resolve(e))}},_getPassportUrl:function(){return this._passportUrl},activateLegal:function(){this._activateLegal()},openPanel:function(t,n){n||(n={});var i,a=this._frame,o=this.XAPPS,r=n.appId,l=n.tag,c=n.maximize,p=n.minimize;if(n.fit&&(c=!0),!z(t))return s.reject();if(t===U){for(var d in o){if(o.hasOwnProperty(l))if(r===o[d].id||l===d){i=d;break}}if(!i&&r&&!((i=r)in this._externalApps)){var u=e.createElement("div",{class:"external-app "+i});this._externalApps[i]={id:i,content:u,isLoaded:!1,loadPromise:null,widget:null},a.extendPanelContent(U,i,u)}return i?this._updateRightPanel({action:F,xAppTag:i,xAppData:n.data,maximize:c,minimize:p}):(e.log("App does not exist in side panel."),s.reject())}return s.reject("Unknown panel: "+t)},closePanel:function(e){return e===D?this._updateLeftPanel({action:k}):e===U?this._updateRightPanel({action:k}):s.reject("Unknown panel: "+e)},isPanelOpen:function(e){return this._frame.isPanelOpen(e)},getPanelApp:function(e){if(z(e))return e===U?this._visibleApp:void console.error("Unknown panel: "+e)},minimizeSidePanel:function(){var e=this._frame;return e.isPanelMaximized(U)||e.isPanelFitted(U)?e.openPanel(U,{minimize:!0}):s.resolve()},initResizeEvent:function(){a.addEvent.call(window,"resize",function(){this.resize()}.bind(this))},removeResizeEvent:function(){a.removeEvent.call(window,"resize",this.resizeHandler)},resize:function(){var e=window.innerHeight||document.documentElement.clientHeight;e!==this.viewportHeight&&(this.appContainer.setStyle("height",e-44),this.viewportHeight=e)},openAboutDialog:function(){var t=this,n=t.options,i=e.createElement,a=null,o=i("div",{class:"template-cont"}),s=i("div",{class:"template-header"});function r(){o.empty(),o.classList.remove("support","mobile-pairing","about"),o.addClassName("update-planned"),o.setStyle("padding","0px"),o.setStyle("height","auto"),a.getFooter().hide(),i("img",{class:"info-img-updatePlanned",src:b.getWebappsAssetUrl("TopFrame","images/banner-upgrade.jpg"),alt:y.aboutItem}).inject(o);var n=t.clusterUpgrade_infoObj;t._setUpgradeMessage(n).then(function(i){e.createElement("div",{class:"update-planned-description",html:n.overloadMessage?n.overloadMessage:i}).inject(o),new w({className:"update-planned-btn primary",value:y.cloudComunityButton,events:{onClick:function(){t._openUrlInBlankTab({url:n.postURL,modalTitle:y.cloudComunityButton,modalButton:y.cloudComunityButton})}}}).inject(o)})}function l(){require(["DS/Latency/SupportDialogBuilder"],function(e){e.build({container:a,tenantId:t._tenantId,buildDeploy:n.numberAbout})})}function c(){var e;o.empty(),o.removeClassName("support"),o.removeClassName("mobile-pairing"),o.removeClassName("update-planned"),o.addClassName("about"),o.setStyle("padding","0px"),o.setStyle("height","auto"),a.getFooter().hide(),e=[n.appNameAbout,n.numberAbout].filter(function(e){return e}).join(" - "),i("img",{class:"info-img",src:b.getWebappsAssetUrl("TopFrame","images/about-empty.png"),alt:y.aboutItem}).inject(o),i("div",{html:n.brandAbout,class:"message title"}).inject(o),i("div",{text:e,class:"message"}).inject(o),t._legalPromise.promise.then(function(){var e=v._legal;e.buildFooter({acceptedTou:e.acceptedTou,acceptedDp:e.acceptedDp,acceptedCookies:e.acceptedCookies}).inject(o)})}function p(){var n=t.options;require(["DS/MobilePairing/MobilePairing"],function(t){var i,o,s,r;t.buildMobilePairingDialog(a,e.extend(n,{myAppsBaseURL:(i=n.myAppsBaseUrl,o=n.tenant,s=o&&new RegExp("^https?://"+o+"-.*$","gi"),r=i,i&&s&&i.match(s)&&(r=i.replace(o.toLowerCase()+"-","")),r)}))})}a instanceof A?a.show():(a=new A({header:s,body:o,visible:!0,closable:!0,className:"ifwe-about-dialog",renderTo:document.body,events:{onHide:function(){a.destroy()}}}),function(){var n,i=e.createElement;function a(e,t,n,i){return{tag:"div",class:"about-tab-element "+e,html:[{tag:"span",class:"fonticon fonticon-"+t},{tag:"span",class:"title",text:n,title:n}],events:{mouseenter:function(){this.addClassName("bg-primary")},mouseleave:function(){this.hasClassName("selected")||this.removeClassName("bg-primary")},click:i}}}function o(e){var t=s.getElementsByClassName("about-tab-element selected");t[0].removeClassName("bg-primary"),t[0].removeClassName("selected"),this.addClassName("selected"),e()}i("h4",{text:y.aboutItem}).inject(s),n=[a("aboutElement"+(t.clusterUpgrade_infoObj?"":" bg-primary selected"),"info",y.about,function(){o.call(this,c)}),a("supportElement","lifebuoy",y.support,function(){o.call(this,l)}),a("mobilePairing","component",y.mobilePairing,function(){o.call(this,p)})],t.clusterUpgrade_infoObj&&null!=t.clusterUpgrade_infoObj.plannedDate&&n.splice(0,0,a("updatePlanned bg-primary selected","info",y.updatePlanned,function(){o.call(this,r)})),i("div",{html:n,class:"info-tab"}).inject(s)}(),t.clusterUpgrade_infoObj&&null!=t.clusterUpgrade_infoObj.plannedDate?r():c())},isTaggerVisible:function(){return this._isTaggerVisible},getxApp:function(e){var t,n=this.XAPPS;return e.tag?t=n[e.tag]:e.id&&(t=Object.values(n).find(function(t){return t.id===e.id})),t},getEnabledContentxAppTags:function(e){var t=this,n=t._contentApps;return e&&(e.includes("EPA")?(n.partSupplyEPA=!0,n.partSupplyEPU=!1,n.partSupply=!1):e.includes("EPU")&&(n.partSupplyEPA=!1,n.partSupplyEPU=!0,n.partSupply=!1),e.includes("CSV")&&(n.space=!0,n.bookmarkEditor=!0)),Object.keys(n).filter(function(e){return n[e]&&!!t.getxApp({tag:e})})},_activateTopMenu:function(e){var t=e.activate,n=m.view.children.rightMenuBar,i=n.subViews.find(e.findTopMenu);i&&(t?(n._onItemViewActivate(),i.activate()):i.deactivate())},_deactivateActiveTopMenu:function(){this._activateTopMenu({activate:!1,findTopMenu:function(e){return e.isActive()}})},_activateSelectedxAppTopMenu:function(e){e?this._activateTopMenu({activate:!0,findTopMenu:function(t){var n=t.model.id;return n===e.tag||n===e.topMenuId}}):this._deactivateActiveTopMenu()}})).LEFT_PANEL=D,I.RIGHT_PANEL=U,I.OPEN_PANEL_ACTION=F,I.CLOSE_PANEL_ACTION=k,I.TOGGLE_PANEL_ACTION="toggle",I.PROFILE_TOPMENU_ID="profile",I.ADD_TOPMENU_ID="add",I.SHARE_TOPMENU_ID="share",I.HOME_TOPMENU_ID="home",I.HELP_TOPMENU_ID="help",I.CONTENT_TOPMENU_ID="content",I.SOCIAL_TOPMENU_ID="social",I.NOTIFICATION_TOPMENU_ID="notification",I.NOTIFICATION_XAPP_TAG="notification",I.CONTENT_XAPP_TAG="content",I.SOCIAL_XAPP_TAG="social",I.SEARCH_XAPP_TAG="search",I.MESSAGING_XAPP_TAG="messaging",I.MAKE_XAPP_TAG="make",I.BOOKMARD_EDITOR_XAPP_TAG="bookmarkEditor",I.X3DSPACE_XAPP_TAG="space",I.PARTSUPPLY_XAPP_TAG="partSupply",I.PARTSUPPLY_EPA_XAPP_TAG="partSupplyEPA",I.PARTSUPPLY_EPU_XAPP_TAG="partSupplyEPU",I.ADVANCEDFILTER_XAPP_TAG="dataFilterPanelCtn",I.SCIENTIFIC_SI_XAPP_TAG="scientificSI",I}),define("TopFrame",["TopFrame/TopFrame"],function(e){"use strict";return e}),define("TopFrame/TopFrame",["DS/TopFrame/TopFrame"],function(e){"use strict";return e}),define("TopFrame",["TopFrame/TopFrame"],function(e){"use strict";return e}),define("TopFrame/TopFrame",["DS/TopFrame/TopFrame"],function(e){"use strict";return e}),window.dsDashboardWindow={topPlatformWindow:null,get parent(){try{if(window.parent.document)return window.parent}catch(e){return window.self}},get top(){if(this.topPlatformWindow)return this.topPlatformWindow;this.topPlatformWindow=window;try{for(;!this.topPlatformWindow.wap&&this.topPlatformWindow!=this.topPlatformWindow.parent&&this.topPlatformWindow.parent.document;)this.topPlatformWindow=this.topPlatformWindow.parent}catch(e){}return this.topPlatformWindow}},define("DS/TopFrame/Components/AppSwitcherMenu",["UWA/Core","UWA/Class/View","DS/UIKIT/DropdownMenu","DS/TopFrame/CompassAPI"],function(e,t,n,i){"use strict";var a=function(){},o={};return t.extend({tagName:"div",className:"tf-app-switcher-menu-cmp",_events:{onItemClick:a,onMenuShow:a,onMenuHide:a,onSetActiveAppName:a},_menu:null,_appIds:[],_selectedAppId:"",_activeAppName:"",setup:function(e){this._appIds=e.appIds,this._selectedAppId=e.selectedAppId,this._events={},this._events.onItemClick=e.onItemClick||a,this._events.onMenuShow=e.onMenuShow||a,this._events.onMenuHide=e.onMenuHide||a,this._events.onSetActiveAppName=e.onSetActiveAppName||a},render:function(t){t=t||{};var i,a,o,s=this.container,r=this.elements;return i=r.activeAppName=e.createElement("div",{class:"active-app-name"}),a=r.openIcon=e.createElement("div",{class:"app-switcher-open-icon fonticon fonticon-down-open"}),s.addContent([i,a]),o={className:["tf-app-switcher-dd-menu",t.className||""].join(" "),renderTo:t.renderMenuTo||document.body,target:s,position:t.position||"bottom left",offset:t.offset||{x:0,y:0},items:[],contextual:!1,bound:!0,closeOnClick:!0,removeOnHide:!0,responsiveMode:!0,scrollMode:!0,events:{onClick:this._onItemClick.bind(this),onShow:this._onMenuShow.bind(this),onHide:this._onMenuHide.bind(this)}},this._menu=new n(o),this._fetchAppsInfo(),this},getActiveAppName:function(){return this._activeAppName},destroy:function(){this._menu&&this._menu.destroy(),this._menu=null,this._events=null,this._appIds=null,this._selectedAppId="",this._activeAppName="",this._parent.apply(this,arguments)},_fetchAppsInfo:function(){var e,t=this;return e=t._appIds.map(function(e){return i.getAppInfo({appId:e}).then(function(n){var a=e===t._selectedAppId;n=Object.assign(n,o[e]||{});var s=[i.appIds.partSupplyEPA,i.appIds.partSupplyEPU].includes(e)?n.title.split(" ")[0]:n.title;t._menu.addItem({id:e,name:e,text:s||"",className:["app-item","app-item-"+e].join(" "),icon:n.icon||"",selected:a}),a&&t._setActiveAppName(n.title||"")}).catch(function(e){console.error(e)})}),Promise.all(e)},_setActiveAppName:function(e){this._activeAppName=e,e=e.split(" ")[0],this.elements.activeAppName.setText(e),this._events.onSetActiveAppName.apply(this,arguments)},_onMenuShow:function(){this.container.addClassName("active"),this._events.onMenuShow.apply(this,arguments)},_onMenuHide:function(){this.container.removeClassName("active"),this._events.onMenuHide.apply(this,arguments)},_onItemClick:function(){this._events.onItemClick.apply(this,arguments)}})}),define("DS/TopFrame/Environment",["UWA/Core","UWA/Element","UWA/Environment","UWA/Storage","DS/TopFrame/TopFrame","DS/TopFrame/CompassAPI","DS/TopFrame/Components/AppSwitcherMenu","DS/TopFrame/LocalStorageManager","DS/TopFrame/Utils","DS/TopFrame/Views/Message","i18n!DS/TopFrame/assets/nls/topFrame"],function(e,t,n,i,a,o,s,r,l,c,p){"use strict";var d=n.extend({name:"boot",init:function(t){this.wp=e.merge({isVisible:!0},t),this.html={},this.Features={},this.view={},this.data=t&&t.data||{},this.options={defaultView:{type:"windowed"}},this.html.module=t.el,this.buildSkeleton(),this.dispatchInit(),this.showLoadingView()},loadWidget:function(t,n){var i,a,s=this,r=s.wp,l=r.widgetId;if(n=e.extend({onFailure:function(e){throw e},onTimeout:function(e){throw e},onComplete:function(){}},n),r.isolationLevel){if(s.loadEmbeddedWidget(l||t,n),i=s.embedded){if(r.appId===o.appIds.partSupply){a=setTimeout(function(){console.error("Load timeout for "+r.appId),s.showErrorView()},45e3)}i.addEvent("onLoad",function(){clearTimeout(a),s.hideLoadingView(),s.hideErrorView(),i.launched=!0,s.launched=!0}),i.addEvent("onRegisterWidget",function(){i.launched=!1,s.launched=!1})}s.dispatchEvent("onRegisterWidget")}else s.loadInlinedWidget(l||t,n),s.launched=!0,s.hideLoadingView(),s.hideErrorView();return s},loadInlinedWidget:function(e,t){var n=this.getWidget(),i=t.fetcher;return n.id=this.wp.id,i.title=this.wp.title,n.setStyle(i.style),delete t.fetcher.style,this._parent(e,t)},loadEmbeddedWidget:function(n,i){var a,o;return this.getWidget().id=this.wp.id,i.cache=this.wp.checksum,a={id:this.wp.id,appId:this.wp.appId,token:this.wp.token,lang:l.getCurrentLanguage(),displayEdit:!1,exposition:2===this.wp.isolationLevel?e.hosts.untrustedExposition:e.hosts.exposition,debugMe:e.debug?1:null},i.embedded=e.extend(i.embedded||{},a),this._parent(n,i),o=this.embedded.elements.iframe,t.setAttributes.call(o,{width:"",height:"",scrolling:"auto"}),t.setStyles.call(o,{width:"0",height:"0",minWidth:"100%",minHeight:"100%"}),this},buildSkeleton:function(){var t=this.wp,n=e.createElement,i=this.html;i.module.hasClassName("module")||(i.module=n("div",{class:"module"}).inject(i.module)),i.module.addClassName("wi-"+this.wp.id),i.wrapper=n("div",{class:"moduleWrapper"}).inject(i.module),t.isContainer?(i.body=i.wrapper,i.module.addClassName("moduleLayout")):i.body=n("div",{class:"moduleContent w-"+t.widgetId}).inject(i.wrapper)},setVisible:function(e,t){var n=this.wp,i=this.getWidget();(n.isVisible!==e||t)&&(n.isVisible=!!e,i.dispatchEvent(e?"onShow":"onHide"))},onRegisterWidget:function(){this.registered||this._parent()},propagateSearch:function(e){var t,n,i=this.wp,a=this.widget;if(i&&(t=i.children,a&&(e?a.dispatchEvent("onSearch",e):a.dispatchEvent("onResetSearch"),a.shouldPropagateSearch=!0,a.shouldPropagateSearchArg=e),i.isContainer&&(i.shouldPropagateSearch=!0,i.shouldPropagateSearchArg=e,void 0!==t)))for(n=t.length-1;n>=0;n--)t[n].widget&&t[n].widget.environment.propagateSearch(e)}}).extend({name:"sidepanel",init:function(){this.components={},this.overwriteTitle=!1,this._parent.apply(this,arguments),e.extend(this.options,{defaultView:{type:"sidepanel"}})},buildSkeleton:function(){var t=this.html,n=this.data,i=e.createElement;this._parent.apply(this,arguments),!1!==n.header&&(t.header=i("div",{class:"moduleHeader"}).inject(t.wrapper,"top"),t.headerLeft=i("div",{class:"moduleHeader__left"}).inject(t.header),t.headerMiddle=i("div",{class:"moduleHeader__middle"}).inject(t.header),t.title=i("div",{class:"moduleHeader__title"}).inject(t.headerMiddle)),n.title&&(this.onUpdateTitle(n.title),this.overwriteTitle=!0),this.buildAppSwitcher()},buildAppSwitcher:async function(){var e,t,n=this,i=n.wp.appId,o=a.getxApp({id:i}),l=n.html,c=[],p=function(){},d=await a.getCurrentUserRoles();o&&(o.topMenuId===a.CONTENT_TOPMENU_ID&&(c=a.getEnabledContentxAppTags(d),p=r.setLastLoadedxAppContentTopMenu),(e=c.map(function(e){return(a.getxApp({tag:e})||{}).id}).filter(function(e){return e})).length<2||(t=new s({selectedAppId:i,appIds:e,onItemClick:function(e,t){var n=t.id;if(i!==n){var o=(a.getxApp({id:n})||{}).tag||"";a.openPanel(a.RIGHT_PANEL,{tag:o}),p(o)}},onSetActiveAppName:function(){n.onUpdateTitle(n.wp.title)}}),n.components.appSwitcherMenu=t,t.render({offset:{x:0,y:-5}}).inject(l.headerLeft)))},onRegisterWidget:function(){this.registered||(this.data=new i({adapter:"Object",database:"preference"+this.wp.id}))},afterLoad:function(){var e,t;try{e=this.embedded&&this.embedded.elements.iframe.contentDocument}catch(e){}e&&(t=e.querySelector(".moduleContent"))&&t.classList.add("environment-"+this.name),this.onViewRequest(this.options.defaultView)},toggleFit:function(){this.view.next||this.onViewRequest({type:this.isFitted()?"windowed":"fitted"})},isFitted:function(){var e=this.view.current;return!!e&&"fitted"===e.event.type},onUpdateTitle:function(e){e=e||"";var t=this.html,n=this.components.appSwitcherMenu;if([o.appIds.partSupplyEPA,o.appIds.partSupplyEPU,o.appIds.scientificSI].includes(this.wp.appId)&&(this.overwriteTitle=!0),this.overwriteTitle?e=this.wp.title:(e=e.trim(),this.wp.title=e),n){var i=n.getActiveAppName();e.includes(i)&&e!==i&&(e=e.replace(i,"").trim()),[o.appIds.partSupplyEPA,o.appIds.partSupplyEPU].includes(this.wp.appId)&&(e=e.split(" ")[0])}t.title&&(t.title.setText(e),t.title.offsetWidth<t.title.scrollWidth&&t.title.setAttribute("title",e))},onUpdatePreferences:function(){this._onUpdateValues&&this._onUpdateValues.apply(this,arguments),this._parent.apply(this,arguments)},onUpdateValue:function(){this._onUpdateValues&&this._onUpdateValues.apply(this,arguments),this._parent.apply(this,arguments)},showErrorView:function(e){e=e||{};var t=this.components;t.errorView&&t.errorView.destroy(),this.hideLoadingView();var n=new c({title:e.title||p.xAppErrorTitle,content:e.content||p.xAppErrorContent,icon:e.icon||"fonticon-offline"});n.render({className:"wi-error-msg-view"}).inject(this.html.module),t.errorView=n},hideErrorView:function(){var e=this.components.errorView;e&&e.hide()},showLoadingView:function(e){e=e||{};var t=this.components;t.loadingView&&t.loadingView.destroy();var n=new c({title:e.title||p.loading,content:e.content,icon:e.icon});n.render({className:"wi-loading-msg-view"}).inject(this.html.module),this.components.loadingView=n},hideLoadingView:function(){var e=this.components.loadingView;e&&e.hide()},destroy:function(){var e=this;Object.keys(e.components||{}).forEach(function(t){"function"==typeof t.destroy&&t.destroy(),delete e.components[t]}),e.components=null,e._parent.apply(e,arguments)}});return d.prototype.views.sidepanel=n.AbstractView.extend({enter:function(){this.dispatchEvent("onEnter")},onEnter:function(){}}),d});