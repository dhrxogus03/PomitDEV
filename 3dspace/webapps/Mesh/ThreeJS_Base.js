define("DS/Mesh/ThreeJS_Base",[],function(){"use strict";var t=t||{REVISION:"57"};t.defineSlowProperty=function(t,i){Object.defineProperty(t.prototype,i,{get:function(){return this._slowProperties[i]},set:function(t){this._slowProperties[i]=t}})},t.definePackedBoolean=function(t,i){void 0===t.prototype.nbBitBooleans&&(t.prototype.nbBitBooleans=0);var e=Math.pow(2,t.prototype.nbBitBooleans++);Object.defineProperty(t.prototype,i,{set:function(t){t?this._bitsContainer|=e:this._bitsContainer&=~e},get:function(){return 0!=(this._bitsContainer&e)}})},t.extend=function(t,i){if(Object.keys)for(var e=Object.keys(i),n=0,s=e.length;n<s;n++){var r=e[n];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}else{var h={}.hasOwnProperty;for(var r in i)h.call(i,r)&&(t[r]=i[r])}return t},String.prototype.hashCode=function(){var t,i=0;if(0===this.length)return i;for(t=0;t<this.length;t++)i=(i<<5)-i+this.charCodeAt(t),i|=0;return i},t.SplitTrimStickString=function(t){return t.split("\n").map(t=>t.trim()).filter(t=>t.length>0&&!t.startsWith("//")).join("\n")},String.prototype.includes||(String.prototype.includes=function(t,i){return"number"!=typeof i&&(i=0),!(i+t.length>this.length)&&-1!==this.indexOf(t,i)}),Array.prototype.findLastIndex||Object.defineProperty(Array.prototype,"findLastIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof t)throw new TypeError("predicate must be a function");return Array.from(this).reverse().findIndex(t)},configurable:!0,writable:!0}),Uint32Array.prototype.slice||Object.defineProperty(Uint32Array.prototype,"slice",{value:function(t,i){return new Uint32Array(Array.prototype.slice.call(this,t,i))}}),Float32Array.prototype.slice||Object.defineProperty(Float32Array.prototype,"slice",{value:function(t,i){return new Float32Array(Array.prototype.slice.call(this,t,i))}}),"function"!=typeof Object.values&&Object.defineProperty(Object,"values",{value:function(t){var i=[];for(var e in t)t.hasOwnProperty(e)&&i.push(t[e]);return i},writable:!0,configurable:!0}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var s=arguments[n];if(null!=s)for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},writable:!0,configurable:!0}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var i=Object(this),e=i.length>>>0,n=arguments[1]>>0,s=n<0?Math.max(e+n,0):Math.min(n,e),r=arguments[2],h=void 0===r?e:r>>0,a=h<0?Math.max(e+h,0):Math.min(h,e);s<a;)i[s]=t,s++;return i}}),Float32Array.prototype.fill||(Float32Array.prototype.fill=Array.prototype.fill),Uint32Array.prototype.fill||(Uint32Array.prototype.fill=Array.prototype.fill),t.getWebVisualizationLevel=function(){return 426},t.getWebVisualizationFDLevel=function(){return 3},t._webglPerformanceProfile=function(){return"true"===localStorage.getItem("__WEBVISU_USE_HIGHPERFORMANCE_PROFILE__")?"high-performance":"default"},t.GeomTypeEnum={EDGE:1,WIRE_EDGE:2,BOUNDARY_EDGE:4,SHARP_EDGE:8,SMOOTH_EDGE:16,HIDDEN_SEAM_EDGE:32,BOUNDARY_POINT:64,SHARP_POINT:128,SMOOTH_POINT:256,SURFACIC_POINT:512,FREE_POINT:1024,HIDDEN_SEAM_POINT:2048,INFINITE_FACE:4096,FACE:8192,UNKNOWN:16384,_OUTLINE:32768,_SECTION_LINE:65536,AXIS_SYSTEM:1<<17,UNKNOWN_2D:1<<18,UNKNOWN_1D:1<<19,UNKNOWN_0D:1<<20,_HIGH_CURVATURE_EDGE:1<<21},t.AllGeomTypesMask=2097151,t._VisuFilterType={GAS_INHERIT:0,POLYGON_OFFSET:1,ZMODE:2,GEOM_TYPE:3,DO_NOT_PICK_UNDER:4,LOOK:5,_STATIC_GEOM_TYPE:6,FURTIVE:7,_MATERIAL_TO_USE:8,_SIDE:9,DYNAMIC_MODE:10,NO_HIGHLIGHT:10,FILTERED:11,LOD:12,_LOD_BRANCH:13,PLANE_VIEW_MODE:14},t._InfiniteGeomertryType={REF_PLANE:1,AXIS_SYSTEM:2,CANONICAL:3,ARROWS:4,VOXEL_REP:5,TESSELATION:6,CURVED_PIPE:7},t._FilterType={SCISSORFILTER:1,LAYERFILTER:2,CLIPPINGFILTER:3,ADVANCEDLAYEROVERRIDEFILTER:4,VIEWMODE:5},t.FixedSizeFiltering={Include:0,Exclude:1,CenterOnly:2},t.PriorityMode={ClassicPriority:0,SceneGraphOrder:1,Advanced:2,DepthPriority:3,ClassicPriority2D:4},t.AlphaTestMode={DISCARD:0,DISCARD_OR_OPAQUE:1},t.FilterMode={Replace:0,Cumulative:1,None:2,V4Master:3},t.PlaneViewMode={NORMAL:0,NO_DISPLAY:4,LOWLIGHT:1,NO_PICK:2,LOWLIGHT_NO_PICK:3},t.PolygonOffsetForceStatus={DEFAULT:0,ENABLED:1,DISABLED:2},t.TextureBlendOperations={BLEND:0,MODULATE:1,DECAL:2,REPLACE:3,IGNORE:4,KEEP_DEFAULT:5},t.AnchorPoint={BOTTOM_LEFT:0,BOTTOM_CENTER:1,BOTTOM_RIGHT:2,BASE_LEFT:3,BASE_CENTER:4,BASE_RIGHT:5,TOP_LEFT:6,TOP_CENTER:7,TOP_RIGHT:8},t.MappingType={DISABLED:-1,NONE:0,PLANAR:1,SPHERICAL:2,CUBIC:3,FINITE_CYLINDRICAL:4,INFINITE_CYLINDRICAL:5,SPHERICAL_NORMALIZED:6,INFINITE_CYLINDRICAL_NORMALIZED:7,INFINITE_CYLINDRICAL_NORM_ANGLE_PRES:8},t.MappingTransformSemantic={DEFAULT:1,SEPARATE_TRANSLATION:2,ROTATION_AROUND_CENTER:3},t.ToGLSLTypes={f:{t:"float",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},fv1:{t:"float",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},v2:{t:"vec2",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},v2v:{t:"vec2",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},fv2:{t:"vec2",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},v3:{t:"vec3",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},v3v:{t:"vec3",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},fv3:{t:"vec3",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},v4:{t:"vec4",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},v4v:{t:"vec4",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},fv4:{t:"vec4",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},c:{t:"vec3",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},m2:{t:"mat2",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},m2v:{t:"mat2",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},m3:{t:"mat3",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},m3v:{t:"mat3",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},m4:{t:"mat4",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},m4v:{t:"mat4",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},i:{t:"int",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!0},iv1:{t:"int",isArray:!0,isTexture:!1,canBeVarying:!1,isInt:!0},i2:{t:"ivec2",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!0},iv2:{t:"ivec2",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!0},i3:{t:"ivec3",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!0},iv3:{t:"ivec3",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!0},i4:{t:"ivec4",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!0},iv4:{t:"ivec4",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!0},b:{t:"bool",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!1},bv1:{t:"bool",isArray:!0,isTexture:!1,canBeVarying:!1,isInt:!1},b2:{t:"bvec2",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!1},bv2:{t:"bvec2",isArray:!0,isTexture:!1,canBeVarying:!1,isInt:!1},b3:{t:"bvec3",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!1},bv3:{t:"bvec3",isArray:!0,isTexture:!1,canBeVarying:!1,isInt:!1},b4:{t:"bvec4",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!1},bv4:{t:"bvec4",isArray:!0,isTexture:!1,canBeVarying:!1,isInt:!1},t2:{t:"sampler2D",isArray:!1,isTexture:!0,canBeVarying:!1,isInt:!1},t2v:{t:"sampler2D",isArray:!0,isTexture:!0,canBeVarying:!1,isInt:!1},tc:{t:"samplerCube",isArray:!1,isTexture:!0,canBeVarying:!1,isInt:!1},tcv:{t:"samplerCube",isArray:!0,isTexture:!0,canBeVarying:!1,isInt:!1}},t.ToWGSLTypes={f:{t:"f32",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},v2:{t:"vec2f",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},v3:{t:"vec3f",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},v4:{t:"vec4f",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},c:{t:"vec3f",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},m2:{t:"mat2x2f",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},m3:{t:"mat3x3f",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},m4:{t:"mat4x4f",isArray:!1,isTexture:!1,canBeVarying:!0,isInt:!1},i:{t:"i32",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!0},i2:{t:"vec2i",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!0},i3:{t:"vec3i",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!0},i4:{t:"vec4i",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!0},b:{t:"bool",isArray:!1,isTexture:!1,canBeVarying:!1,isInt:!1},t2:{t:"texture_2d<f32>",isArray:!1,isTexture:!0,canBeVarying:!1,isInt:!1},tc:{t:"texture_3d<f32>",isArray:!1,isTexture:!0,canBeVarying:!1,isInt:!1},t2v:{t:"texture_2d<f32>",isArray:!0,isTexture:!0,canBeVarying:!1,isInt:!1},tcv:{t:"texture_3d<f32>",isArray:!0,isTexture:!0,canBeVarying:!1,isInt:!1},fv1:{t:"f32",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},fv2:{t:"vec2f",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},fv3:{t:"vec3f",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1},fv4:{t:"vec4f",isArray:!0,isTexture:!1,canBeVarying:!0,isInt:!1}},t.CloneStructure=function(i){var e,n,s,r={};for(e in i)if(r[e]={},i[e]instanceof Object)for(n in r[e]={},i[e])(s=i[e][n])instanceof t.Color||s instanceof t.Vector2||s instanceof t.Vector3||s instanceof t.Vector4||s instanceof t.Matrix4?r[e][n]=s.clone():s instanceof Array?r[e][n]=s.slice():r[e][n]=s;else(s=i[e])instanceof t.Color||s instanceof t.Vector2||s instanceof t.Vector3||s instanceof t.Vector4||s instanceof t.Matrix4?r[e]=s.clone():s instanceof Array?r[e]=s.slice():r[e]=s;return r},t._BinaryPrimitives=!1,t.IsIE11=null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),t.IsFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,t.__NoShowForAxisAndPlanesBags=function(){return!0},t.AutomatedTests=function(){return!(!window.__karma__&&!window.__odtplayer__)},t.AutomatedTestsOrWebDriver=function(){var i=!(!navigator.webdriver||localStorage.getItem("WebVisuEnableAAWithWebdriver"));return!(!t.AutomatedTests()&&!i)},t.isIOS=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},t.isAndroid=function(){return navigator.userAgent.match(/(Android)/i)},t.isMacOS=function(){return!t.isIOS()&&navigator.platform.toUpperCase().indexOf("MAC")>=0},t.isAppleDevice=function(){return t.isIOS()||t.isMacOS()},t.isMobile=function(){return t.isIOS()||t.isAndroid()},t.__unrolledHighlight=function(){return!1},t._toFastProperties=function(t){function i(){}i.prototype=t;var e=new i;function n(){return typeof e.foo}return n(),n(),t};var i=["LARGE_SCALE","NON_UNIFORM_SCALE","OIT","COMPRESSED_VERTICES","COMPRESSED_UVS","COMPRESSED_COLORS","COMPRESSED_NORMALS","FIXED_SIZE","BILLBOARD","LIGHT_MAP","POLITE_HIGHLIGHT","PRIMITIVE_HIGHLIGHT","NOZ_OBJECT","DECALS","MAPPING_OPERATOR","SKIP_TRANSPAR","SKINNING","SKINNING_INSTANCING","VERTEX_COLORS","DEFAULT_INSTANCING","NO_COLOR_WRITE"];if(i.length>30)throw"too many program ids";for(var e=new Object,n=0;n<i.length;n++)e[i[n]]=1<<n;t.ProgramIDs=e,t.AssetSource={MANUAL:0,MATERIAL_MANAGER:1},t.__visibleInCurrentSpaceSimple=function(t,i,e,n){var s=!0;if(!(s=i?t:e?t:!t)&&n&&n.layers)for(var r=n&&n.layers,h=0;h<r.length;h++){var a=r[h].drawableInterval;if(a&&!a.skip(null,null)&&a.gas&&a.gas.isGAS&&(!a.gas._show||a.gas._showFree))return!0}return s};const s=t.__visibleInCurrentSpaceSimple;var r,h,a,o,u;t.__visibleInCurrentSpace=function(t,i,e,n,r){var h=s(t,i,e,n);return r&&r._isFurtiveFiltered()&&(h=!1),h},t.setValuesToObject=function(i,e,n){if(e)for(var s in e){var r=e[s];if(void 0!==r&&!n.has(s)&&s in i){var h=i[s];h instanceof t.Color&&r instanceof t.Color?h.copy(r):h instanceof t.Color?h.set(r):h instanceof t.Vector3&&r instanceof t.Vector3?h.copy(r):h instanceof t.Vector2&&r instanceof t.Vector2?h.copy(r):h instanceof Float32Array&&r instanceof Float32Array?i[s]=new Float32Array(r):i[s]=r}}},t.EventDispatcher=function(){var t={};this.addEventListener=function(i,e){void 0===t[i]&&(t[i]=[]),-1===t[i].indexOf(e)&&t[i].push(e)},this.removeEventListener=function(i,e){var n=t[i].indexOf(e);-1!==n&&(t[i][n]=null)},this.dispatchEvent=function(i){var e=t[i.type];if(void 0!==e){i.target=this;for(var n=!1,s=0,r=e.length;s<r;s++)e[s]?e[s].call(this,i):n=!0;if(n){var h=[];for(s=0,r=e.length;s<r;s++)e[s]&&h.push(e[s]);t[i.type]=h}}}},t.VisualizationTraces={_traces:[],info:function(t){var i=new Error,e=t+" - "+(i.stack?i.stack.split("\n")[2]:"");this._traces.push(e)},displayInfo:function(){console.log(this._traces)}},t.Quaternion=function(t,i,e,n){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==n?n:1},t.Quaternion.prototype={constructor:t.Quaternion,set:function(t,i,e,n){return this.x=t,this.y=i,this.z=e,this.w=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},createJSON:function(){return{x:this.x,y:this.y,z:this.z,w:this.w}},setFromJSON:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEuler:function(t,i){var e=Math.cos(t.x/2),n=Math.cos(t.y/2),s=Math.cos(t.z/2),r=Math.sin(t.x/2),h=Math.sin(t.y/2),a=Math.sin(t.z/2);return void 0===i||"XYZ"===i?(this.x=r*n*s+e*h*a,this.y=e*h*s-r*n*a,this.z=e*n*a+r*h*s,this.w=e*n*s-r*h*a):"YXZ"===i?(this.x=r*n*s+e*h*a,this.y=e*h*s-r*n*a,this.z=e*n*a-r*h*s,this.w=e*n*s+r*h*a):"ZXY"===i?(this.x=r*n*s-e*h*a,this.y=e*h*s+r*n*a,this.z=e*n*a+r*h*s,this.w=e*n*s-r*h*a):"ZYX"===i?(this.x=r*n*s-e*h*a,this.y=e*h*s+r*n*a,this.z=e*n*a-r*h*s,this.w=e*n*s+r*h*a):"YZX"===i?(this.x=r*n*s+e*h*a,this.y=e*h*s+r*n*a,this.z=e*n*a-r*h*s,this.w=e*n*s-r*h*a):"XZY"===i&&(this.x=r*n*s-e*h*a,this.y=e*h*s-r*n*a,this.z=e*n*a+r*h*s,this.w=e*n*s+r*h*a),this},setFromAxisAngle:function(t,i){var e=i/2,n=Math.sin(e);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(e),this},toEuler:function(){var i=new t.Vector3;return i.x=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),i.y=Math.asin(2*(this.w*this.y-this.z*this.x)),i.z=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z)),i},setFromRotationMatrix:function(t){var i,e=t.elements,n=e[0],s=e[4],r=e[8],h=e[1],a=e[5],o=e[9],u=e[2],c=e[6],l=e[10],y=n+a+l;return y>0?(i=.5/Math.sqrt(y+1),this.w=.25/i,this.x=(c-o)*i,this.y=(r-u)*i,this.z=(h-s)*i):n>a&&n>l?(i=2*Math.sqrt(1+n-a-l),this.w=(c-o)/i,this.x=.25*i,this.y=(s+h)/i,this.z=(r+u)/i):a>l?(i=2*Math.sqrt(1+a-n-l),this.w=(r-u)/i,this.x=(s+h)/i,this.y=.25*i,this.z=(o+c)/i):(i=2*Math.sqrt(1+l-n-a),this.w=(h-s)/i,this.x=(r+u)/i,this.y=(o+c)/i,this.z=.25*i),this},toRotationMatrix:function(){var i=2*this.x,e=2*this.y,n=2*this.z,s=i*this.w,r=e*this.w,h=(this.w,i*this.x),a=(this.x,n*this.x),o=e*this.y,u=n*this.y;this.z,(new t.Matrix3).elements;return new t.Vector3(a-r,u+s,1-(h+o))},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var t=this.length();return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},multiply:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,n=t.y,s=t.z,r=t.w,h=i.x,a=i.y,o=i.z,u=i.w;return this.x=e*u+r*h+n*o-s*a,this.y=n*u+r*a+s*h-e*o,this.z=s*u+r*o+e*a-n*h,this.w=r*u-e*h-n*a-s*o,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},multiplyVector3:function(t){return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},log:function(){if(Math.abs(this.w)>=1)return this.w=0,this;var t=Math.acos(this.w),i=Math.sin(t);if(this.w=0,Math.abs(i)<.001)return this;var e=t/i;return this.x*=e,this.y*=e,this.z*=e,this},exp:function(){var t=this.length();this.w=Math.cos(t);var i=Math.sin(t);if(Math.abs(t)<.001)return this;var e=i/t;return this.x*=e,this.y*=e,this.z*=e,this},slerp:function(t,i){var e=this.x,n=this.y,s=this.z,r=this.w,h=r*t.w+e*t.x+n*t.y+s*t.z;if(h<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,h=-h):this.copy(t),h>=1)return this.w=r,this.x=e,this.y=n,this.z=s,this;var a=Math.acos(h),o=Math.sqrt(1-h*h);if(Math.abs(o)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(n+this.y),this.z=.5*(s+this.z),this;var u=Math.sin((1-i)*a)/o,c=Math.sin(i*a)/o;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=n*u+this.y*c,this.z=s*u+this.z*c,this},intermediatePoint:function(i,e,n){return r||(r=new t.Quaternion),h||(h=new t.Quaternion),r.copy(e).inverse().multiply(i).log(),h.copy(e).inverse().multiply(n).log(),r.add(h).multiplyScalar(-.25),this.copy(e).multiply(r.exp()),this.normalize(),this},squad:function(i,e,n,s,r){this.copy(i).slerp(s,r,!1),this.normalize();var h=(new t.Quaternion).copy(e).slerp(n,r);return h.normalize(),this.slerp(h,2*r*(1-r)).normalize()},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},clone:function(){return new t.Quaternion(this.x,this.y,this.z,this.w)}},t.Quaternion.slerp=function(t,i,e,n){return e.copy(t).slerp(i,n)},t.Curve=function(){},t.Curve.prototype.getPoint=function(t){return console.log("Warning, getPoint() not implemented!"),null},t.Curve.prototype.getPointAt=function(t,i){var e=this.getUtoTmapping(t,i);return this.getPoint(e)},t.Curve.prototype.getPoints=function(t){t||(t=5);var i,e=[];for(i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},t.Curve.prototype.getSpacedPoints=function(t){t||(t=5);var i,e=[];for(i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},t.Curve.prototype.getLength=function(t){var i=this.getLengths();if(void 0!==t){var e=t*(i.length-1),n=Math.floor(e),s=e-n;return n+1>=i.length?i[n]:(1-s)*i[n]+s*i[n+1]}return i[i.length-1]},t.Curve.prototype.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i,e,n=[],s=this.getPoint(0),r=0;for(n.push(0),e=1;e<=t;e++)r+=(i=this.getPoint(e/t)).distanceTo(s),n.push(r),s=i;return this.cacheArcLengths=n,n},t.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},t.Curve.prototype.getUtoTmapping=function(t,i){var e,n=this.getLengths(),s=0,r=n.length;e=i||t*n[r-1];for(var h,a=0,o=r-1;a<=o;)if((h=n[s=Math.floor(a+(o-a)/2)]-e)<0)a=s+1;else{if(!(h>0)){o=s;break}o=s-1}if(n[s=o]==e)return s/(r-1);var u=n[s];return(s+(e-u)/(n[s+1]-u))/(r-1)},t.Curve.prototype.getTangent=function(t){var i=t-1e-4,e=t+1e-4;i<0&&(i=0),e>1&&(e=1);var n=this.getPoint(i);return this.getPoint(e).clone().sub(n).normalize()},t.Curve.prototype.getTangentAt=function(t){var i=this.getUtoTmapping(t);return this.getTangent(i)},t.Curve.create=function(i,e){return i.prototype=Object.create(t.Curve.prototype),i.prototype.getPoint=e,i},t.Curve.Utils={tangentQuadraticBezier:function(t,i,e,n){return 2*(1-t)*(e-i)+2*t*(n-e)},tangentCubicBezier:function(t,i,e,n,s){return-3*i*(1-t)*(1-t)+3*e*(1-t)*(1-t)-6*t*e*(1-t)+6*t*n*(1-t)-3*t*t*n+3*t*t*s},tangentSpline:function(t,i,e,n,s){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},interpolate:function(t,i,e,n,s){var r=.5*(e-t),h=.5*(n-i),a=s*s;return(2*i-2*e+r+h)*(s*a)+(-3*i+3*e-2*r-h)*a+r*s+i}},t.QuaternionSpline=function(t){this.controlPts=[],this.tangentPts=[],this.setPoints(t)},t.QuaternionSpline.prototype={constructor:t.QuaternionSpline,setPoints:function(t){this.controlPts=t,t&&this._updateTangents()},clear:function(){this.controlPts=[],this.tangentPts=[]},getNbPoints:function(){return this.controlPts.length},addPoint:function(t){this.controlPts.push(t),this._updateTangents()},insertPoint:function(t,i){return!(t<0||t>this.controlPts.length)&&(this.controlPts.splice(t,0,i),this._updateTangents(),!0)},updatePoint:function(t,i){return!(t<0||t>=this.controlPts.length)&&(this.controlPts[t]=i,this._updateTangents(),!0)},removePoint:function(t){return!(t<0||t>=this.controlPts.length)&&(this.controlPts.splice(t,1),this._updateTangents(),!0)},interpolate:function(t){var i=t*(this.controlPts.length-1),e=Math.floor(i);return this._interpolate(e,i-e)},_interpolate:function(i,e){return i===this.controlPts.length-1?this.controlPts[i]:0===e?this.controlPts[i]:1===e?this.controlPts[i+1]:(new t.Quaternion).squad(this.controlPts[i],this.tangentPts[i],this.tangentPts[i+1],this.controlPts[i+1],e)},_updateTangents:function(){var i=this.controlPts.length;if(!(i<2)){this.controlPts[i-1].normalize();for(var e=i-1;e>0;e--)this.controlPts[e-1].normalize(),this.controlPts[e-1].dot(this.controlPts[e])<=0&&this.controlPts[e-1].multiplyScalar(-1);var n=this.controlPts[0].equals(this.controlPts[i-1]);for(e=0;e<i;++e){var s,r,h=this.controlPts[e];e?e===i-1?(s=this.controlPts[e-1],r=n?this.controlPts[1]:h):(s=this.controlPts[e-1],r=this.controlPts[e+1]):(r=this.controlPts[1],s=n?this.controlPts[i-2]:h),this.tangentPts[e]||(this.tangentPts[e]=new t.Quaternion),this.tangentPts[e].intermediatePoint(s,h,r)}}}},t.PositionSpline=function(t){this.controlPts=[],t&&this.setPoints(t)},t.PositionSpline.prototype={constructor:t.PositionSpline,getPointAt:t.Curve.prototype.getPointAt,getLength:t.Curve.prototype.getLength,getLengths:t.Curve.prototype.getLengths,updateArcLengths:t.Curve.prototype.updateArcLengths,getUtoTmapping:t.Curve.prototype.getUtoTmapping,getPoint:function(t){var i=t*(this.controlPts.length-1),e=Math.floor(i);return this._interpolate(e,i-e)},getNbPoints:function(){return this.controlPts.length},setPoints:function(t){this.controlPts=t,this._updateCurve()},clear:function(){this.controlPts=[],this._updateCurve()},addPoint:function(t){this.controlPts.push(t),this._updateCurve()},insertPoint:function(t,i){return!(t<0||t>this.controlPts.length)&&(this.controlPts.splice(t,0,i),this._updateCurve(),!0)},updatePoint:function(t,i){return!(t<0||t>=this.controlPts.length)&&(this.controlPts[t]=i,this._updateCurve(),!0)},removePoint:function(t){return!(t<0||t>=this.controlPts.length)&&(this.controlPts.splice(t,1),this._updateCurve(),!0)},_updateCurve:function(){this.updateArcLengths()},_interpolate:function(i,e){var n=this.controlPts.length;if(n<2)return null;if(i===n-1)return this.controlPts[i];if(0===e)return this.controlPts[i];if(1===e)return this.controlPts[i+1];var s,r,h,a=this.controlPts[0].equals(this.controlPts[n-1]),o=this.controlPts[i];a?(s=i?this.controlPts[i-1]:this.controlPts[n-2],r=i>n-2?this.controlPts[1]:this.controlPts[i+1],h=i===n-1?this.controlPts[2]:i===n-2?this.controlPts[1]:this.controlPts[i+2]):(s=i?this.controlPts[i-1]:o,r=i>n-2?o:this.controlPts[i+1],h=i>n-3?r:this.controlPts[i+2]);var u=void 0!==this.controlPts[0].w,c=u?new t.Vector4:new t.Vector3;return c.x=this._CatmullInterpolate(s.x,o.x,r.x,h.x,e),c.y=this._CatmullInterpolate(s.y,o.y,r.y,h.y,e),c.z=this._CatmullInterpolate(s.z,o.z,r.z,h.z,e),u&&(c.w=this._CatmullInterpolate(s.w,o.w,r.w,h.w,e)),c},_CatmullInterpolate:function(t,i,e,n,s){var r=.5*(e-t),h=.5*(n-i),a=s*s;return(2*i-2*e+r+h)*(s*a)+(-3*i+3*e-2*r-h)*a+r*s+i}},t.Vector2=function(t,i){this.x=t||0,this.y=i||0},t.Vector2.prototype={constructor:t.Vector2,set:function(t,i){return this.x=t,this.y=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,e=this.y-t.y;return i*i+e*e},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y},toArray:function(){return[this.x,this.y]},clone:function(){return new t.Vector2(this.x,this.y)}},t.Vector3=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0},t.Vector3.prototype={constructor:t.Vector3,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},barycentricCoordinates:function(i,e,n){var s=(new t.Vector3).subVectors(i,this),r=(new t.Vector3).subVectors(e,this),h=(new t.Vector3).subVectors(n,this),a=(new t.Vector3).subVectors(i,e),o=(new t.Vector3).subVectors(i,n),u=1/(new t.Vector3).crossVectors(a,o).length();return{alpha:(new t.Vector3).crossVectors(r,h).length(),beta:(new t.Vector3).crossVectors(h,s).length(),gamma:(new t.Vector3).crossVectors(s,r).length(),normalisationFactor:u}},setFromJSON:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},setFromArray:function(t){return this.x=t[0],this.y=t[1],this.z=t[2],this},createJSON:function(){return{x:this.x,y:this.y,z:this.z}},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},getMaxAxis:function(){var t=0,i=this.x;return this.y>i&&(t=1,i=this.y),this.z>i&&(t=2,i=this.z),t},add:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},sub:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyMatrix3:function(t){var i=this.x,e=this.y,n=this.z,s=t.elements;return this.x=s[0]*i+s[3]*e+s[6]*n,this.y=s[1]*i+s[4]*e+s[7]*n,this.z=s[2]*i+s[5]*e+s[8]*n,this},applyMatrix4:function(t){if(!t)return this;var i=this.x,e=this.y,n=this.z,s=t.elements;return this.x=s[0]*i+s[4]*e+s[8]*n+s[12],this.y=s[1]*i+s[5]*e+s[9]*n+s[13],this.z=s[2]*i+s[6]*e+s[10]*n+s[14],this},applyRotation:function(t){if(!t)return this;var i=this.x,e=this.y,n=this.z,s=t.elements;return this.x=s[0]*i+s[4]*e+s[8]*n,this.y=s[1]*i+s[5]*e+s[9]*n,this.z=s[2]*i+s[6]*e+s[10]*n,this},applyProjection:function(t){var i=this.x,e=this.y,n=this.z,s=t.elements,r=1/(s[3]*i+s[7]*e+s[11]*n+s[15]);return this.x=(s[0]*i+s[4]*e+s[8]*n+s[12])*r,this.y=(s[1]*i+s[5]*e+s[9]*n+s[13])*r,this.z=(s[2]*i+s[6]*e+s[10]*n+s[14])*r,this},applyQuaternion:function(t){var i=this.x,e=this.y,n=this.z,s=t.x,r=t.y,h=t.z,a=t.w,o=a*i+r*n-h*e,u=a*e+h*i-s*n,c=a*n+s*e-r*i,l=-s*i-r*e-h*n;return this.x=o*a+l*-s+u*-h-c*-r,this.y=u*a+l*-r+c*-s-o*-h,this.z=c*a+l*-h+o*-r-u*-s,this},transformDirection:function(t){var i=this.x,e=this.y,n=this.z,s=t.elements;return this.x=s[0]*i+s[4]*e+s[8]*n,this.y=s[1]*i+s[5]*e+s[9]*n,this.z=s[2]*i+s[6]*e+s[10]*n,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t,this.z/=t):(this.x=0,this.y=0,this.z=0),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this.z<t.z?this.z=t.z:this.z>i.z&&(this.z=i.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},cross:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i);var e=this.x,n=this.y,s=this.z;return this.x=n*t.z-s*t.y,this.y=s*t.x-e*t.z,this.z=e*t.y-n*t.x,this},crossVectors:function(t,i){return this.x=t.y*i.z-t.z*i.y,this.y=t.z*i.x-t.x*i.z,this.z=t.x*i.y-t.y*i.x,this},applyAxisAngle:function(i,e){return void 0===u&&(u=new t.Quaternion),this.applyQuaternion(u.setFromAxisAngle(i,e)),this},projectOnVector:function(i){return void 0===a&&(a=new t.Vector3),a.copy(i).normalize(),o=this.dot(a),this.copy(a).multiplyScalar(o)},projectOnPlane:function(){var i;return function(e){return void 0===i&&(i=new t.Vector3),i.copy(this).projectOnVector(e),this.sub(i)}}(),reflect:function(){var i;return function(e){return void 0===i&&(i=new t.Vector3),this.sub(i.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(i){var e=this.dot(i)/(this.length()*i.length());return Math.acos(t.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,e=this.y-t.y,n=this.z-t.z;return i*i+e*e+n*n},getPositionFromMatrix:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},getColumnFromMatrix:function(t,i){var e=4*t,n=i.elements;return this.x=n[e],this.y=n[e+1],this.z=n[e+2],this},setEulerFromRotationMatrix:function(t,i){function e(t){return Math.min(Math.max(t,-1),1)}var n=t.elements,s=n[0],r=n[4],h=n[8],a=n[1],o=n[5],u=n[9],c=n[2],l=n[6],y=n[10];return void 0===i||"XYZ"===i?(this.y=Math.asin(e(h)),Math.abs(h)<.99999?(this.x=Math.atan2(-u,y),this.z=Math.atan2(-r,s)):(this.x=Math.atan2(l,o),this.z=0)):"YXZ"===i?(this.x=Math.asin(-e(u)),Math.abs(u)<.99999?(this.y=Math.atan2(h,y),this.z=Math.atan2(a,o)):(this.y=Math.atan2(-c,s),this.z=0)):"ZXY"===i?(this.x=Math.asin(e(l)),Math.abs(l)<.99999?(this.y=Math.atan2(-c,y),this.z=Math.atan2(-r,o)):(this.y=0,this.z=Math.atan2(a,s))):"ZYX"===i?(this.y=Math.asin(-e(c)),Math.abs(c)<.99999?(this.x=Math.atan2(l,y),this.z=Math.atan2(a,s)):(this.x=0,this.z=Math.atan2(-r,o))):"YZX"===i?(this.z=Math.asin(e(a)),Math.abs(a)<.99999?(this.x=Math.atan2(-u,o),this.y=Math.atan2(-c,s)):(this.x=0,this.y=Math.atan2(h,y))):"XZY"===i&&(this.z=Math.asin(-e(r)),Math.abs(r)<.99999?(this.x=Math.atan2(l,o),this.y=Math.atan2(h,s)):(this.x=Math.atan2(-u,y),this.y=0)),this},setEulerFromQuaternion:function(t,i){function e(t){return Math.min(Math.max(t,-1),1)}var n=t.x*t.x,s=t.y*t.y,r=t.z*t.z,h=t.w*t.w;return void 0===i||"XYZ"===i?(this.x=Math.atan2(2*(t.x*t.w-t.y*t.z),h-n-s+r),this.y=Math.asin(e(2*(t.x*t.z+t.y*t.w))),this.z=Math.atan2(2*(t.z*t.w-t.x*t.y),h+n-s-r)):"YXZ"===i?(this.x=Math.asin(e(2*(t.x*t.w-t.y*t.z))),this.y=Math.atan2(2*(t.x*t.z+t.y*t.w),h-n-s+r),this.z=Math.atan2(2*(t.x*t.y+t.z*t.w),h-n+s-r)):"ZXY"===i?(this.x=Math.asin(e(2*(t.x*t.w+t.y*t.z))),this.y=Math.atan2(2*(t.y*t.w-t.z*t.x),h-n-s+r),this.z=Math.atan2(2*(t.z*t.w-t.x*t.y),h-n+s-r)):"ZYX"===i?(this.x=Math.atan2(2*(t.x*t.w+t.z*t.y),h-n-s+r),this.y=Math.asin(e(2*(t.y*t.w-t.x*t.z))),this.z=Math.atan2(2*(t.x*t.y+t.z*t.w),h+n-s-r)):"YZX"===i?(this.x=Math.atan2(2*(t.x*t.w-t.z*t.y),h-n+s-r),this.y=Math.atan2(2*(t.y*t.w-t.x*t.z),h+n-s-r),this.z=Math.asin(e(2*(t.x*t.y+t.z*t.w)))):"XZY"===i&&(this.x=Math.atan2(2*(t.x*t.w+t.y*t.z),h-n+s-r),this.y=Math.atan2(2*(t.x*t.z+t.y*t.w),h+n-s-r),this.z=Math.asin(e(2*(t.z*t.w-t.x*t.y)))),this},getScaleFromMatrix:function(t){var i=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),e=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),n=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=i,this.y=e,this.z=n,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new t.Vector3(this.x,this.y,this.z)},isNaN:function(){return!(isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z))}},t.Vector4=function(t,i,e,n){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==n?n:1},t.Vector4.prototype={constructor:t.Vector4,set:function(t,i,e,n){return this.x=t,this.y=i,this.z=e,this.w=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},sub:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){if(!t)return this;var i=this.x,e=this.y,n=this.z,s=this.w,r=t.elements;return this.x=r[0]*i+r[4]*e+r[8]*n+r[12]*s,this.y=r[1]*i+r[5]*e+r[9]*n+r[13]*s,this.z=r[2]*i+r[6]*e+r[10]*n+r[14]*s,this.w=r[3]*i+r[7]*e+r[11]*n+r[15]*s,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t,this.z/=t,this.w/=t):(this.x=0,this.y=0,this.z=0,this.w=1),this},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this},setAxisAngleFromRotationMatrix:function(t){var i,e,n,s,r=t.elements,h=r[0],a=r[4],o=r[8],u=r[1],c=r[5],l=r[9],y=r[2],f=r[6],x=r[10];if(Math.abs(a-u)<.01&&Math.abs(o-y)<.01&&Math.abs(l-f)<.01){if(Math.abs(a+u)<.1&&Math.abs(o+y)<.1&&Math.abs(l+f)<.1&&Math.abs(h+c+x-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;var p=(h+1)/2,g=(c+1)/2,m=(x+1)/2,v=(a+u)/4,d=(o+y)/4,w=(l+f)/4;return p>g&&p>m?p<.01?(e=0,n=.707106781,s=.707106781):(n=v/(e=Math.sqrt(p)),s=d/e):g>m?g<.01?(e=.707106781,n=0,s=.707106781):(e=v/(n=Math.sqrt(g)),s=w/n):m<.01?(e=.707106781,n=.707106781,s=0):(e=d/(s=Math.sqrt(m)),n=w/s),this.set(e,n,s,i),this}var z=Math.sqrt((f-l)*(f-l)+(o-y)*(o-y)+(u-a)*(u-a));return Math.abs(z)<.001&&(z=1),this.x=(f-l)/z,this.y=(o-y)/z,this.z=(u-a)/z,this.w=Math.acos((h+c+x-1)/2),this},getColumnFromMatrix:function(t,i){var e=4*t,n=i.elements;return this.x=n[e],this.y=n[e+1],this.z=n[e+2],this.w=1,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this.w>t.w&&(this.w=t.w),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this.w<t.w&&(this.w=t.w),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this.z<t.z?this.z=t.z:this.z>i.z&&(this.z=i.z),this.w<t.w?this.w=t.w:this.w>i.w&&(this.w=i.w),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t,i){return Math.sqrt(this.distanceToSquared(t,i))},distanceToSquared:function(t,i){var e=this.x-t.x,n=this.y-t.y,s=this.z-t.z,r=e*e+n*n+s*s;return i&&(r+=this.w-t.w),r},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new t.Vector4(this.x,this.y,this.z,this.w)}},t.Matrix3=function(t,i,e,n,s,r,h,a,o){this.elements=new Float32Array(9),this.set(void 0!==t?t:1,i||0,e||0,n||0,void 0!==s?s:1,r||0,h||0,a||0,void 0!==o?o:1)},t.Matrix3.prototype={constructor:t.Matrix3,set:function(t,i,e,n,s,r,h,a,o){var u=this.elements;return u[0]=t,u[3]=i,u[6]=e,u[1]=n,u[4]=s,u[7]=r,u[2]=h,u[5]=a,u[8]=o,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},isIdentity:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&1===t[4]&&0===t[5]&&0===t[6]&&0===t[7]&&1===t[8]},copy:function(t){var i=t.elements;return this.set(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]),this},multiplyVector3:function(t){return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){var i=new t.Vector3;return function(t){for(var e=0,n=t.length;e<n;e+=3)i.x=t[e],i.y=t[e+1],i.z=t[e+2],i.applyMatrix3(this),t[e]=i.x,t[e+1]=i.y,t[e+2]=i.z;return t}}(),multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},multiplyMatrices:function(t,i){if(!i)return this.copy(t),this;var e=t.elements,n=i.elements,s=this.elements,r=e[0],h=e[3],a=e[6],o=e[1],u=e[4],c=e[7],l=e[2],y=e[5],f=e[8],x=n[0],p=n[3],g=n[6],m=n[1],v=n[4],d=n[7],w=n[2],z=n[5],M=n[8];return s[0]=r*x+h*m+a*w,s[3]=r*p+h*v+a*z,s[6]=r*g+h*d+a*M,s[1]=o*x+u*m+c*w,s[4]=o*p+u*v+c*z,s[7]=o*g+u*d+c*M,s[2]=l*x+y*m+f*w,s[5]=l*p+y*v+f*z,s[8]=l*g+y*d+f*M,this},determinant:function(){var t=this.elements,i=t[0],e=t[1],n=t[2],s=t[3],r=t[4],h=t[5],a=t[6],o=t[7],u=t[8];return i*r*u-i*h*o-e*s*u+e*h*a+n*s*o-n*r*a},getInverse:function(t,i){var e=t.elements,n=this.elements;n[0]=e[10]*e[5]-e[6]*e[9],n[1]=-e[10]*e[1]+e[2]*e[9],n[2]=e[6]*e[1]-e[2]*e[5],n[3]=-e[10]*e[4]+e[6]*e[8],n[4]=e[10]*e[0]-e[2]*e[8],n[5]=-e[6]*e[0]+e[2]*e[4],n[6]=e[9]*e[4]-e[5]*e[8],n[7]=-e[9]*e[0]+e[1]*e[8],n[8]=e[5]*e[0]-e[1]*e[4];var s=e[0]*n[0]+e[1]*n[3]+e[2]*n[6];if(0===s){var r="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(r);return console.warn(r),this.identity(),this}return this.multiplyScalar(1/s),this},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this},clone:function(){var i=this.elements;return new t.Matrix3(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8])},flattenToArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t},scale:function(t){var i=this.elements,e=t.x,n=t.y;return i[0]*=e,i[3]*=n,i[1]*=e,i[4]*=n,i[2]*=e,i[5]*=n,this},getMatrix4:function(){var i=this.elements;return new t.Matrix4(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1)},makeRotationAxis:function(t,i){var e=Math.cos(i),n=Math.sin(i),s=1-e,r=t.x,h=t.y,a=t.z,o=s*r,u=s*h;return this.set(o*r+e,o*h-n*a,o*a+n*h,o*h+n*a,u*h+e,u*a-n*r,o*a-n*h,u*a+n*r,s*a*a+e),this}},t._Float32Matrix4=function(t,i,e,n,s,r,h,a,o,u,c,l,y,f,x,p){this.elements=new Float32Array(16)},t._Float32Matrix4.prototype={constructor:t._Float32Matrix4,set:function(t,i,e,n,s,r,h,a,o,u,c,l,y,f,x,p){var g=this.elements;return g[0]=t,g[4]=i,g[8]=e,g[12]=n,g[1]=s,g[5]=r,g[9]=h,g[13]=a,g[2]=o,g[6]=u,g[10]=c,g[14]=l,g[3]=y,g[7]=f,g[11]=x,g[15]=p,this},_fromMatrix4WithLowPartTranslation(t){this.elements.set(t.elements);var i=t.getLowPartTranslation();return this.elements[3]=i.x,this.elements[7]=i.y,this.elements[11]=i.z,this},isIdentity:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},_multiplyMatricesMV:function(t,i){var e=t.elements,n=i.elements,s=this.elements,r=e[0],h=e[4],a=e[8],o=e[12],u=e[1],c=e[5],l=e[9],y=e[13],f=e[2],x=e[6],p=e[10],g=e[14],m=n[0],v=n[4],d=n[8],w=n[12],z=n[1],M=n[5],b=n[9],A=n[13],T=n[2],I=n[6],E=n[10],P=n[14];return s[0]=r*m+h*z+a*T,s[4]=r*v+h*M+a*I,s[8]=r*d+h*b+a*E,s[12]=r*w+h*A+a*P+o,s[1]=u*m+c*z+l*T,s[5]=u*v+c*M+l*I,s[9]=u*d+c*b+l*E,s[13]=u*w+c*A+l*P+y,s[2]=f*m+x*z+p*T,s[6]=f*v+x*M+p*I,s[10]=f*d+x*b+p*E,s[14]=f*w+x*A+p*P+g,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},multiplyMatricesAndInverse:function(i,e){var n=(new t.Matrix4).multiplyMatrices(i,e);return this.getInverse(n)},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[4],i[4]=t,t=i[2],i[2]=i[8],i[8]=t,t=i[6],i[6]=i[9],i[9]=t,t=i[3],i[3]=i[12],i[12]=t,t=i[7],i[7]=i[13],i[13]=t,t=i[11],i[11]=i[14],i[14]=t,this},getInverse:function(t,i){var e=this.elements,n=t.elements,s=n[0],r=n[4],h=n[8],a=n[12],o=n[1],u=n[5],c=n[9],l=n[13],y=n[2],f=n[6],x=n[10],p=n[14],g=n[3],m=n[7],v=n[11],d=n[15];e[0]=c*p*m-l*x*m+l*f*v-u*p*v-c*f*d+u*x*d,e[4]=a*x*m-h*p*m-a*f*v+r*p*v+h*f*d-r*x*d,e[8]=h*l*m-a*c*m+a*u*v-r*l*v-h*u*d+r*c*d,e[12]=a*c*f-h*l*f-a*u*x+r*l*x+h*u*p-r*c*p,e[1]=l*x*g-c*p*g-l*y*v+o*p*v+c*y*d-o*x*d,e[5]=h*p*g-a*x*g+a*y*v-s*p*v-h*y*d+s*x*d,e[9]=a*c*g-h*l*g-a*o*v+s*l*v+h*o*d-s*c*d,e[13]=h*l*y-a*c*y+a*o*x-s*l*x-h*o*p+s*c*p,e[2]=u*p*g-l*f*g+l*y*m-o*p*m-u*y*d+o*f*d,e[6]=a*f*g-r*p*g-a*y*m+s*p*m+r*y*d-s*f*d,e[10]=r*l*g-a*u*g+a*o*m-s*l*m-r*o*d+s*u*d,e[14]=a*u*y-r*l*y-a*o*f+s*l*f+r*o*p-s*u*p,e[3]=c*f*g-u*x*g-c*y*m+o*x*m+u*y*v-o*f*v,e[7]=r*x*g-h*f*g+h*y*m-s*x*m-r*y*v+s*f*v,e[11]=h*u*g-r*c*g-h*o*m+s*c*m+r*o*v-s*u*v,e[15]=r*c*y-h*u*y+h*o*f-s*c*f-r*o*x+s*u*x;var w=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12];if(0==w){var z="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(z);return console.warn(z),this.identity(),this}return this.multiplyScalar(1/w),this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}};var c=new Float32Array(1);t.SplitFloat32=function(t){c[0]=t;var i=c[0];return{low:t-i,high:i}},t._SplitFloat32PositiveError=function(t){c[0]=t;var i=c[0],e=t-i;return e<0&&(i-=2*(e=-e)),{low:e,high:i}};var l=!1,y,f,x,p,g,m;return t.Matrix4=function(t,i,e,n,s,r,h,a,o,u,c,l,y,f,x,p){this.elements=void 0!==t?[t,s,o,y,i,r,u,f,e,h,c,x,n,a,l,p]:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.Matrix4.prototype={constructor:t.Matrix4,getLowPartTranslation:function(){var i=t.SplitFloat32(this.elements[12]),e=t.SplitFloat32(this.elements[13]),n=t.SplitFloat32(this.elements[14]),s=new t.Vector3;return s.x=i.low,s.y=e.low,s.z=n.low,s},set:function(t,i,e,n,s,r,h,a,o,u,c,l,y,f,x,p){var g=this.elements;return g[0]=t,g[4]=i,g[8]=e,g[12]=n,g[1]=s,g[5]=r,g[9]=h,g[13]=a,g[2]=o,g[6]=u,g[10]=c,g[14]=l,g[3]=y,g[7]=f,g[11]=x,g[15]=p,this},getValue:function(t,i){return this.elements[4*(i-1)+t-1]},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},isIdentity:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},copy:function(t){var i=t.elements;return this.set(i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14],i[3],i[7],i[11],i[15]),this},createJSON:function(){if(this.isIdentity())return"identity";var t,i=[],e=this.elements;if(1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15])i.push(e[12]),i.push(e[13]),i.push(e[14]);else for(t=0;t<16;t++)i.push(this.elements[t]);return i},setFromJSON:function(t){if("identity"===t)this.identity();else if(3===t.length)this.identity(),this.elements[12]=t[0],this.elements[13]=t[1],this.elements[14]=t[2];else{var i;for(i=0;i<16;i++)this.elements[i]=t[i]}return this},setRotationFromEuler:function(t,i){var e=this.elements,n=t.x,s=t.y,r=t.z,h=Math.cos(n),a=Math.sin(n),o=Math.cos(s),u=Math.sin(s),c=Math.cos(r),l=Math.sin(r);if(void 0===i||"XYZ"===i){var y=h*c,f=h*l,x=a*c,p=a*l;e[0]=o*c,e[4]=-o*l,e[8]=u,e[1]=f+x*u,e[5]=y-p*u,e[9]=-a*o,e[2]=p-y*u,e[6]=x+f*u,e[10]=h*o}else if("YXZ"===i){var g=o*c,m=o*l,v=u*c,d=u*l;e[0]=g+d*a,e[4]=v*a-m,e[8]=h*u,e[1]=h*l,e[5]=h*c,e[9]=-a,e[2]=m*a-v,e[6]=d+g*a,e[10]=h*o}else if("ZXY"===i){g=o*c,m=o*l,v=u*c,d=u*l;e[0]=g-d*a,e[4]=-h*l,e[8]=v+m*a,e[1]=m+v*a,e[5]=h*c,e[9]=d-g*a,e[2]=-h*u,e[6]=a,e[10]=h*o}else if("ZYX"===i){y=h*c,f=h*l,x=a*c,p=a*l;e[0]=o*c,e[4]=x*u-f,e[8]=y*u+p,e[1]=o*l,e[5]=p*u+y,e[9]=f*u-x,e[2]=-u,e[6]=a*o,e[10]=h*o}else if("YZX"===i){var w=h*o,z=h*u,M=a*o,b=a*u;e[0]=o*c,e[4]=b-w*l,e[8]=M*l+z,e[1]=l,e[5]=h*c,e[9]=-a*c,e[2]=-u*c,e[6]=z*l+M,e[10]=w-b*l}else if("XZY"===i){w=h*o,z=h*u,M=a*o,b=a*u;e[0]=o*c,e[4]=-l,e[8]=u*c,e[1]=w*l+b,e[5]=h*c,e[9]=z*l-M,e[2]=M*l-z,e[6]=a*c,e[10]=b*l+w}return this},setRotationFromQuaternion:function(t){var i=this.elements,e=t.x,n=t.y,s=t.z,r=t.w,h=e+e,a=n+n,o=s+s,u=e*h,c=e*a,l=e*o,y=n*a,f=n*o,x=s*o,p=r*h,g=r*a,m=r*o;return i[0]=1-(y+x),i[4]=c-m,i[8]=l+g,i[1]=c+m,i[5]=1-(u+x),i[9]=f-p,i[2]=l-g,i[6]=f+p,i[10]=1-(u+y),this},makeRotationFromQuaternion:function(t){var i=this.elements,e=t.x,n=t.y,s=t.z,r=t.w,h=e+e,a=n+n,o=s+s,u=e*h,c=e*a,l=e*o,y=n*a,f=n*o,x=s*o,p=r*h,g=r*a,m=r*o;return i[0]=1-(y+x),i[4]=c-m,i[8]=l+g,i[1]=c+m,i[5]=1-(u+x),i[9]=f-p,i[2]=l-g,i[6]=f+p,i[10]=1-(u+y),i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},lookAt:(y=new t.Vector3,f=new t.Vector3,x=new t.Vector3,function(t,i,e){var n=this.elements;return x.subVectors(t,i).normalize(),0===x.length()&&(x.z=1),y.crossVectors(e,x).normalize(),0===y.length()&&(x.x+=1e-4,y.crossVectors(e,x).normalize()),f.crossVectors(x,y),n[0]=y.x,n[4]=f.x,n[8]=x.x,n[1]=y.y,n[5]=f.y,n[9]=x.y,n[2]=y.z,n[6]=f.z,n[10]=x.z,this}),multiply:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,i){if(!i)return this.copy(t),this;var e=t.elements,n=i.elements,s=this.elements,r=e[0],h=e[4],a=e[8],o=e[12],u=e[1],c=e[5],l=e[9],y=e[13],f=e[2],x=e[6],p=e[10],g=e[14],m=e[3],v=e[7],d=e[11],w=e[15],z=n[0],M=n[4],b=n[8],A=n[12],T=n[1],I=n[5],E=n[9],P=n[13],V=n[2],S=n[6],_=n[10],O=n[14],C=n[3],R=n[7],L=n[11],D=n[15];return s[0]=r*z+h*T+a*V+o*C,s[4]=r*M+h*I+a*S+o*R,s[8]=r*b+h*E+a*_+o*L,s[12]=r*A+h*P+a*O+o*D,s[1]=u*z+c*T+l*V+y*C,s[5]=u*M+c*I+l*S+y*R,s[9]=u*b+c*E+l*_+y*L,s[13]=u*A+c*P+l*O+y*D,s[2]=f*z+x*T+p*V+g*C,s[6]=f*M+x*I+p*S+g*R,s[10]=f*b+x*E+p*_+g*L,s[14]=f*A+x*P+p*O+g*D,s[3]=m*z+v*T+d*V+w*C,s[7]=m*M+v*I+d*S+w*R,s[11]=m*b+v*E+d*_+w*L,s[15]=m*A+v*P+d*O+w*D,this},multiplyToArray:function(t,i,e){var n=this.elements;return this.multiplyMatrices(t,i),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},multiplyVector3:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){var i=new t.Vector3;return function(t){for(var e=0,n=t.length;e<n;e+=3)i.x=t[e],i.y=t[e+1],i.z=t[e+2],i.applyProjection(this),t[e]=i.x,t[e+1]=i.y,t[e+2]=i.z;return t}}(),rotateAxis:function(t){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(i){var e=this.elements,n=new t.Vector4;return n.x=e[0]*i.x+e[4]*i.y+e[8]*i.z+e[12]*i.w,n.y=e[1]*i.x+e[5]*i.y+e[9]*i.z+e[13]*i.w,n.z=e[2]*i.x+e[6]*i.y+e[10]*i.z+e[14]*i.w,n.w=i.w?e[3]*i.x+e[7]*i.y+e[11]*i.z+e[15]*i.w:1,n},determinant:function(){var t=this.elements,i=t[0],e=t[4],n=t[8],s=t[12],r=t[1],h=t[5],a=t[9],o=t[13],u=t[2],c=t[6],l=t[10],y=t[14];return t[3]*(+s*a*c-n*o*c-s*h*l+e*o*l+n*h*y-e*a*y)+t[7]*(+i*a*y-i*o*l+s*r*l-n*r*y+n*o*u-s*a*u)+t[11]*(+i*o*c-i*h*y-s*r*c+e*r*y+s*h*u-e*o*u)+t[15]*(-n*h*u-i*a*c+i*h*l+n*r*c-e*r*l+e*a*u)},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[4],i[4]=t,t=i[2],i[2]=i[8],i[8]=t,t=i[6],i[6]=i[9],i[9]=t,t=i[3],i[3]=i[12],i[12]=t,t=i[7],i[7]=i[13],i[13]=t,t=i[11],i[11]=i[14],i[14]=t,this},flattenToArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},setFromArray:function(t){var i=this.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this},flattenToArrayOffset:function(t,i){var e=this.elements;return t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=e[3],t[i+4]=e[4],t[i+5]=e[5],t[i+6]=e[6],t[i+7]=e[7],t[i+8]=e[8],t[i+9]=e[9],t[i+10]=e[10],t[i+11]=e[11],t[i+12]=e[12],t[i+13]=e[13],t[i+14]=e[14],t[i+15]=e[15],t},getPosition:function(){var i=new t.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var t=this.elements;return i.set(t[12],t[13],t[14])}}(),setPosition:function(t){var i=this.elements;return i[12]=t.x,i[13]=t.y,i[14]=t.z,this},getInverse:function(t,i){var e=this.elements,n=t.elements,s=n[0],r=n[4],h=n[8],a=n[12],o=n[1],u=n[5],c=n[9],l=n[13],y=n[2],f=n[6],x=n[10],p=n[14],g=n[3],m=n[7],v=n[11],d=n[15];e[0]=c*p*m-l*x*m+l*f*v-u*p*v-c*f*d+u*x*d,e[4]=a*x*m-h*p*m-a*f*v+r*p*v+h*f*d-r*x*d,e[8]=h*l*m-a*c*m+a*u*v-r*l*v-h*u*d+r*c*d,e[12]=a*c*f-h*l*f-a*u*x+r*l*x+h*u*p-r*c*p,e[1]=l*x*g-c*p*g-l*y*v+o*p*v+c*y*d-o*x*d,e[5]=h*p*g-a*x*g+a*y*v-s*p*v-h*y*d+s*x*d,e[9]=a*c*g-h*l*g-a*o*v+s*l*v+h*o*d-s*c*d,e[13]=h*l*y-a*c*y+a*o*x-s*l*x-h*o*p+s*c*p,e[2]=u*p*g-l*f*g+l*y*m-o*p*m-u*y*d+o*f*d,e[6]=a*f*g-r*p*g-a*y*m+s*p*m+r*y*d-s*f*d,e[10]=r*l*g-a*u*g+a*o*m-s*l*m-r*o*d+s*u*d,e[14]=a*u*y-r*l*y-a*o*f+s*l*f+r*o*p-s*u*p,e[3]=c*f*g-u*x*g-c*y*m+o*x*m+u*y*v-o*f*v,e[7]=r*x*g-h*f*g+h*y*m-s*x*m-r*y*v+s*f*v,e[11]=h*u*g-r*c*g-h*o*m+s*c*m+r*o*v-s*u*v,e[15]=r*c*y-h*u*y+h*o*f-s*c*f-r*o*x+s*u*x;var w=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12];if(0==w){var z="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(z);return console.warn(z),this.identity(),this}return this.multiplyScalar(1/w),this},extractBasis:function(t,i,e){var n=this.elements;return t.set(n[0],n[1],n[2]),i.set(n[4],n[5],n[6]),e.set(n[8],n[9],n[10]),this},makeBasis:function(t,i,e){return this.set(t.x,i.x,e.x,0,t.y,i.y,e.y,0,t.z,i.z,e.z,0,0,0,0,1),this},extractPosition:function(t){var i=this.elements,e=t.elements;return i[12]=e[12],i[13]=e[13],i[14]=e[14],this},extractRotation:function(i){var e=new t.Vector3;return function(t){var i=this.elements,n=t.elements,s=1/e.set(n[0],n[1],n[2]).length(),r=1/e.set(n[4],n[5],n[6]).length(),h=1/e.set(n[8],n[9],n[10]).length();return i[0]=n[0]*s,i[1]=n[1]*s,i[2]=n[2]*s,i[4]=n[4]*r,i[5]=n[5]*r,i[6]=n[6]*r,i[8]=n[8]*h,i[9]=n[9]*h,i[10]=n[10]*h,this}}(),extractMatrix3:function(i){new t.Vector3;return function(t){var i=this.elements,e=t.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[8]=e[8],i[9]=e[9],i[10]=e[10],this}}(),translate:function(t){var i=this.elements,e=t.x,n=t.y,s=t.z;return i[12]=i[0]*e+i[4]*n+i[8]*s+i[12],i[13]=i[1]*e+i[5]*n+i[9]*s+i[13],i[14]=i[2]*e+i[6]*n+i[10]*s+i[14],i[15]=i[3]*e+i[7]*n+i[11]*s+i[15],this},rotateX:function(t){var i=this.elements,e=i[4],n=i[5],s=i[6],r=i[7],h=i[8],a=i[9],o=i[10],u=i[11],c=Math.cos(t),l=Math.sin(t);return i[4]=c*e+l*h,i[5]=c*n+l*a,i[6]=c*s+l*o,i[7]=c*r+l*u,i[8]=c*h-l*e,i[9]=c*a-l*n,i[10]=c*o-l*s,i[11]=c*u-l*r,this},rotateY:function(t){var i=this.elements,e=i[0],n=i[1],s=i[2],r=i[3],h=i[8],a=i[9],o=i[10],u=i[11],c=Math.cos(t),l=Math.sin(t);return i[0]=c*e-l*h,i[1]=c*n-l*a,i[2]=c*s-l*o,i[3]=c*r-l*u,i[8]=c*h+l*e,i[9]=c*a+l*n,i[10]=c*o+l*s,i[11]=c*u+l*r,this},rotateZ:function(t){var i=this.elements,e=i[0],n=i[1],s=i[2],r=i[3],h=i[4],a=i[5],o=i[6],u=i[7],c=Math.cos(t),l=Math.sin(t);return i[0]=c*e+l*h,i[1]=c*n+l*a,i[2]=c*s+l*o,i[3]=c*r+l*u,i[4]=c*h-l*e,i[5]=c*a-l*n,i[6]=c*o-l*s,i[7]=c*u-l*r,this},rotateByAxis:function(t,i){var e=this.elements;if(1===t.x&&0===t.y&&0===t.z)return this.rotateX(i);if(0===t.x&&1===t.y&&0===t.z)return this.rotateY(i);if(0===t.x&&0===t.y&&1===t.z)return this.rotateZ(i);var n=t.x,s=t.y,r=t.z,h=Math.sqrt(n*n+s*s+r*r),a=(n/=h)*n,o=(s/=h)*s,u=(r/=h)*r,c=Math.cos(i),l=Math.sin(i),y=1-c,f=n*s*y,x=n*r*y,p=s*r*y,g=n*l,m=s*l,v=r*l,d=a+(1-a)*c,w=f+v,z=x-m,M=f-v,b=o+(1-o)*c,A=p+g,T=x+m,I=p-g,E=u+(1-u)*c,P=e[0],V=e[1],S=e[2],_=e[3],O=e[4],C=e[5],R=e[6],L=e[7],D=e[8],N=e[9],B=e[10],F=e[11];return e[0]=d*P+w*O+z*D,e[1]=d*V+w*C+z*N,e[2]=d*S+w*R+z*B,e[3]=d*_+w*L+z*F,e[4]=M*P+b*O+A*D,e[5]=M*V+b*C+A*N,e[6]=M*S+b*R+A*B,e[7]=M*_+b*L+A*F,e[8]=T*P+I*O+E*D,e[9]=T*V+I*C+E*N,e[10]=T*S+I*R+E*B,e[11]=T*_+I*L+E*F,this},scale:function(t){var i=this.elements,e=t.x,n=t.y,s=t.z;return i[0]*=e,i[4]*=n,i[8]*=s,i[1]*=e,i[5]*=n,i[9]*=s,i[2]*=e,i[6]*=n,i[10]*=s,i[3]*=e,i[7]*=n,i[11]*=s,this},getMaxScaleOnAxis:function(){var t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,Math.max(e,n)))},getScaleOnAxisX:function(){var t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];return Math.sqrt(i)},getScaleOnAxisY:function(){var t=this.elements,i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6];return Math.sqrt(i)},getScaleOnAxisZ:function(){var t=this.elements,i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(i)},makeTranslation:function(t,i,e){return this.set(1,0,0,t,0,1,0,i,0,0,1,e,0,0,0,1),this},makeRotationX:function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(1,0,0,0,0,i,-e,0,0,e,i,0,0,0,0,1),this},makeRotationY:function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(i,0,e,0,0,1,0,0,-e,0,i,0,0,0,0,1),this},makeRotationZ:function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(i,-e,0,0,e,i,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,i){var e=Math.cos(i),n=Math.sin(i),s=1-e,r=t.x,h=t.y,a=t.z,o=s*r,u=s*h;return this.set(o*r+e,o*h-n*a,o*a+n*h,0,o*h+n*a,u*h+e,u*a-n*r,0,o*a-n*h,u*a+n*r,s*a*a+e,0,0,0,0,1),this},makeScale:function(t,i,e){return this.set(t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1),this},makeFrustum:function(t,i,e,n,s,r){var h=this.elements,a=2*s/(i-t),o=2*s/(n-e),u=(i+t)/(i-t),c=(n+e)/(n-e),l=-(r+s)/(r-s),y=-2*r*s/(r-s);return h[0]=a,h[4]=0,h[8]=u,h[12]=0,h[1]=0,h[5]=o,h[9]=c,h[13]=0,h[2]=0,h[6]=0,h[10]=l,h[14]=y,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this},makeFrustumWebGPU:function(t,i,e,n,s,r){var h=this.elements,a=2*s/(i-t),o=2*s/(n-e),u=(i+t)/(i-t),c=(n+e)/(n-e),l=-r/(r-s),y=-r*s/(r-s);return h[0]=a,h[4]=0,h[8]=u,h[12]=0,h[1]=0,h[5]=o,h[9]=c,h[13]=0,h[2]=0,h[6]=0,h[10]=l,h[14]=y,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this},makePerspective:function(i,e,n,s,r,h){var a=n*Math.tan(t.Math.degToRad(.5*i)),o=-a,u=o*e,c=a*e;return r&&(u+=r*=Math.abs(c-u),c+=r),h&&(o+=h*=Math.abs(a-o),a+=h),this.makeFrustum(u,c,o,a,n,s)},makeOrthographic:function(t,i,e,n,s,r){var h=this.elements,a=i-t,o=e-n,u=r-s,c=(i+t)/a,l=(e+n)/o,y=(r+s)/u;return h[0]=2/a,h[4]=0,h[8]=0,h[12]=-c,h[1]=0,h[5]=2/o,h[9]=0,h[13]=-l,h[2]=0,h[6]=0,h[10]=-2/u,h[14]=-y,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this},makeOrthographicWebGPU:function(t,i,e,n,s,r){var h=this.elements,a=i-t,o=e-n,u=r-s,c=(i+t)/a,l=(e+n)/o,y=s/u;return h[0]=2/a,h[4]=0,h[8]=0,h[12]=-c,h[1]=0,h[5]=2/o,h[9]=0,h[13]=-l,h[2]=0,h[6]=0,h[10]=-1/u,h[14]=-y,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this},clone:function(){var i=this.elements;return new t.Matrix4(i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14],i[3],i[7],i[11],i[15])},setRotation:function(t){var i=this.elements;return i[0]=t[0],i[4]=t[1],i[8]=t[2],i[1]=t[3],i[5]=t[4],i[9]=t[5],i[2]=t[6],i[6]=t[7],i[10]=t[8],this},equals:function(t,i){var e=this.elements,n=t.elements;if(void 0===i){for(var s=0;s<16;s++)if(e[s]!==n[s])return!1}else for(s=0;s<16;s++)if(Math.abs(e[s]-n[s])>i)return!1;return!0}},t.IdentityMatrix=new t.Matrix4,t.extend(t.Matrix4.prototype,{compose:(p=new t.Matrix4,g=new t.Matrix4,function(t,i,e){var n=this.elements;return p.identity(),p.setRotationFromQuaternion(i),g.makeScale(e.x,e.y,e.z),this.multiplyMatrices(p,g),n[12]=t.x,n[13]=t.y,n[14]=t.z,this}),decompose:function(){var i=new t.Vector3,e=new t.Vector3,n=new t.Vector3,s=new t.Matrix4;return function(r,h,a){var o=this.elements;return i.set(o[0],o[1],o[2]),e.set(o[4],o[5],o[6]),n.set(o[8],o[9],o[10]),r=r instanceof t.Vector3?r:new t.Vector3,h=h instanceof t.Quaternion?h:new t.Quaternion,(a=a instanceof t.Vector3?a:new t.Vector3).x=i.length(),a.y=e.length(),a.z=n.length(),r.x=o[12],r.y=o[13],r.z=o[14],s.copy(this),s.elements[0]/=a.x,s.elements[1]/=a.x,s.elements[2]/=a.x,s.elements[4]/=a.y,s.elements[5]/=a.y,s.elements[6]/=a.y,s.elements[8]/=a.z,s.elements[9]/=a.z,s.elements[10]/=a.z,h.setFromRotationMatrix(s),[r,h,a]}}()}),t.Color=function(t){return void 0!==t&&this.set(t),this},t.Color.prototype={constructor:t.Color,r:1,g:1,b:1,set:function(t){switch(typeof t){case"number":this.setHex(t);break;case"string":this.setStyle(t);break;case"object":if(t.length&&t.length>=3){this.setRGB(t[0],t[1],t[2]);break}this.copy(t)}return this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,i,e){return this.r=t,this.g=i,this.b=e,this},setHSV:function(t,i,e){return console.log("DEPRECATED: Color's .setHSV() will be removed. Use .setHSL( h, s, l ) instead."),this.setHSL(t,i*e/((t=(2-i)*e)<1?t:2-t),t/2)},setHSL:function(t,i,e){if(0===i)this.r=this.g=this.b=e;else{var n=function(t,i,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(i-t)*e:e<.5?i:e<2/3?t+6*(i-t)*(2/3-e):t},s=e<=.5?e*(1+i):e+i-e*i,r=2*e-s;this.r=n(r,s,t+1/3),this.g=n(r,s,t),this.b=n(r,s,t-1/3)}return this},setStyle:function(i){if(/^rgb\((\d+),(\d+),(\d+)\)$/i.test(i)){var e=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(i);return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this}if(/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(i)){e=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(i);return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(i)){e=/^\#([0-9a-f]{6})$/i.exec(i);return this.setHex(parseInt(e[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(i)){e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(i);return this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this}if(/^(\w+)$/i.test(i))return this.setHex(t.ColorKeywords[i]),this},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyToLinear:function(t,i){return i?(this.r=t.r*t.r,this.g=t.g*t.g,this.b=t.b*t.b):(this.r=t.r<.04045?t.r/12.92:Math.pow((t.r+.055)/1.055,2.4),this.g=t.g<.04045?t.g/12.92:Math.pow((t.g+.055)/1.055,2.4),this.b=t.b<.04045?t.b/12.92:Math.pow((t.b+.055)/1.055,2.4)),this},copyGammaToLinear:function(t){return this.r=t.r*t.r,this.g=t.g*t.g,this.b=t.b*t.b,this},copyLinearToGamma:function(t){return this.r=Math.sqrt(t.r),this.g=Math.sqrt(t.g),this.b=Math.sqrt(t.b),this},convertGammaToLinear:function(){var t=this.r,i=this.g,e=this.b;return this.r=t*t,this.g=i*i,this.b=e*e,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:(m={h:0,s:0,l:0},function(){var t,i,e=this.r,n=this.g,s=this.b,r=Math.max(e,n,s),h=Math.min(e,n,s),a=(h+r)/2;if(h===r)t=0,i=0;else{var o=r-h;switch(i=a<=.5?o/(r+h):o/(2-r-h),r){case e:t=(n-s)/o+(n<s?6:0);break;case n:t=(s-e)/o+2;break;case s:t=(e-n)/o+4}t/=6}return m.h=t,m.s=i,m.l=a,m}),getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,i,e){var n=this.getHSL();return n.h+=t,n.s+=i,n.l+=e,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},desaturate:function(t){var i=.587*this.g+.299*this.r+.114*this.b,e=Math.min(Math.max(1-t,1e-5),1);return this.r=this.r*e+t*i,this.g=this.g*e+t*i,this.b=this.b*e+t*i,this},saturate:function(t){var i=.587*this.g+.299*this.r+.114*this.b,e=1/Math.min(Math.max(1-t,1e-5),1);return this.r=(this.r-t*i)*e,this.g=(this.g-t*i)*e,this.b=(this.b-t*i)*e,this},alphaBlend:function(t,i){var e=1-(i=Math.min(Math.max(i,0),.99999));return this.r=t.r*i+this.r*e,this.g=t.g*i+this.g*e,this.b=t.b*i+this.b*e,this},negative:function(){return this.r=1-this.r,this.g=1-this.g,this.b=1-this.b,this},lerp:function(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},clone:function(){return(new t.Color).setRGB(this.r,this.g,this.b)},toArray:function(){return[this.r,this.g,this.b]}},t.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},t}),define("Mesh/ThreeJS_Base",["DS/Mesh/ThreeJS_Base","DS/DSMigration/DSMigration"],function(t,i){return i.deprecateModule("Mesh/ThreeJS_Base"),t});