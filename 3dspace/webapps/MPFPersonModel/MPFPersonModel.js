define("DS/MPFPersonModel/MePersonDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils"],function(e,t){"use strict";const r={ALLOW_CREATION:"creationAllowed",PLATFORM:"platform"},o=e.extend({init:function(e,t){this._parent(e,"/me",t)},urlGet(e,o){let n;o||(o={}),n=this.connector.url(this.resourcePath);const s=o[r.ALLOW_CREATION];s&&(n=new t(n).addParameter(r.ALLOW_CREATION,s).getUrl());const a=o[r.PLATFORM];return a&&(n=new t(n).addParameter(r.PLATFORM,a).getUrl()),n},urlPatch(e,t){return this.delegate.urlPatch(e,t)},urlPut(e,t){return this.delegate.urlPut(e,t)},urlPost(e,t){return this.delegate.urlPost(e,t)}});return o.Params=Object.freeze(r),o}),define("DS/MPFPersonModel/PersonModel",["DS/MPFModel/MPFModel","DS/MPFUtils/MPFUtils"],(e,t)=>{"use strict";const r=Object.freeze({ID:"id",USER_NAME:"name",FIRST_NAME:"firstName",LAST_NAME:"lastName",EMAIL:"email",COMPANY:"company",PERSON_ROLES:"PersonRoles",BUYER_TYPE:"buyerType",HAS_PUBLIC_SELLER_ROLE_ASSIGNED:"HasPublicSellerRoleAssigned",STATE:"state",COUNTRY:"Country",PHONE_NUMBER:"phoneNumber"}),o=Object.freeze({BUYER:"buyer",SHOP_OPERATOR:"ShopOperator",OPERATOR:"DSOperator",EMP_ADMIN:"Admin",SALES_ADMIN:"SalesAdmin",PRICER:"Pricer",DEV_PARTNERS_ADMIN:"BEDevAdmin",ADMIN_VIEWER:"AdminViewer",OFFER_ADMIN:"OfferAdmin"}),n=Object.freeze({ACTIVE:"active",PENDING:"pending"}),s=e.extend({defaults:function(){const e={};return e[r.ID]=null,e[r.FIRST_NAME]=null,e[r.LAST_NAME]=null,e[r.EMAIL]=null,e[r.COMPANY]=null,e},setup(e,t){this._parent(e,t),this._type="PersonModel"},parse:e=>e,validate:t.doNothing,getUserName(){return this.get(r.USER_NAME)},getFirstName(){return this.get(r.FIRST_NAME)},getLastName(){return this.get(r.LAST_NAME)},getFullName(){return`${this.getFirstName()} ${this.getLastName()}`},getCompany(){return this.get(r.COMPANY)},getCompanyId(){const e=this.getCompany();return e&&e.match(/\/([0-9A-F]{32})$/)[1]},getEmail(){return this.get(r.EMAIL)},getID(){return this.get(r.ID)},getRoles(){return this.get(r.PERSON_ROLES)},getBuyerType(){return this.get(r.BUYER_TYPE)},getState(){return this.get(r.STATE)},getCountry(){return this.get(r.COUNTRY)},getPhoneNumber(){return this.get(r.PHONE_NUMBER)},hasRole(e){const r=this.getRoles()||[];return!!t.findInArray(r,function(t){return t.Role===e})},hasCountry(){return this.has(r.COUNTRY)},isDSOperator(){return this.hasRole(o.OPERATOR)},isSeller(){return"TRUE"===this.get(r.HAS_PUBLIC_SELLER_ROLE_ASSIGNED)},isEmpAdmin(){return(this.getRoles()||[]).some(function(e){return e.Role===o.EMP_ADMIN&&"Public"!==e.Project})},isAdminOfThisEMP(e){return(this.getRoles()||[]).some(function(t){return t.Role===o.EMP_ADMIN&&t.Project===e})}});return s.Fields=r,s.Roles=o,s.States=n,s}),define("DS/MPFPersonModel/ShopPersonsDataProxy",["DS/MPFDataProxy/DataProxy","UWA/Core","DS/MPFUrl/UrlUtils","DS/MPFCompanyModel/CompanyMemberDataProxy"],function(e,t,r,o){"use strict";return e.extend({doDelete:null,doPatch:null,init:function(e){this._parent(e,"/mdshop/shops/{0}/members",new o(e))},request:function(e,t){"POST"!==t.method&&"PUT"!==t.method||(t.method="PATCH"),this._parent(e,t)},url:function(e,o,n){var s,a,i=e.parentResourceId,l=t.String.format(this.resourcePath,i);return s=this.connector.url(l),n.companyId&&((a=new r(s)).addParameter("legalEntityID",n.companyId),s=a.getUrl()),s},urlDelete:null,urlGet:function(e){return this.connector.url(t.String.format(this.resourcePath,e.parentResourceId||e.collection.parentResourceId))},urlPost:null,urlPatch:null})}),define("DS/MPFPersonModel/PersonDataProxy",["DS/MPFDataProxy/DataProxy"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"/mdpeople/people")},urlPatch(e,t){return this._parent(e,t)}})}),define("DS/MPFPersonModel/PersonCollection",["UWA/Promise","DS/MPFModel/MPFCollection","DS/MPFPersonModel/PersonModel"],function(e,t,r){"use strict";return t.extend({model:r,addAll:function(e,t){var o=this;if(e&&e.length){for(var n=[],s=0;s<e.length;s++)n.push({op:"add",value:e[s]});var a={onComplete:function(n){for(var s=0;s<e.length;s++){for(var a,i=0;i<n.length;i++)if(n[i].email.toLowerCase()===e[s].email.toLowerCase()){a=n[i];break}o.add(new r(a,{dataProxy:o.dataProxy}))}t.onComplete&&t.onComplete()},onFailure:t.onFailure};t.companyId&&(a.companyId=t.companyId),this._doPatch(n,a)}},addAllPromise:function(e,t){return this._wrapInPromise(this.addAll.bind(this),e,t)},removeOne:function(e,t){var r=this;if(e){var o=[{op:"remove",path:"/"+e,value:{Roles:t.roles,ShopId:t.shopID}}],n={onComplete:function(o){r.remove(e),t.onComplete&&t.onComplete()},onFailure:t.onFailure};t.companyId&&(n.companyId=t.companyId),this._doPatch(o,n)}},removeOnePromise:function(e,t){return this._wrapInPromise(this.removeOne.bind(this),e,t)},updateRoles:function(e,t){var r={};r.Roles=t.newRoles,t.shopId&&(r.ShopId=t.shopId),this._doPatch([{op:"modify",path:"/"+e,value:r}],t)},updateRolesPromise:function(e,t){return this._wrapInPromise(this.updateRoles.bind(this),e,t)},_doPatch:function(e,t){if(e){t.companyId&&(this.parentResourceId=t.companyId);var r=this.dataProxy.delegate?this.dataProxy.delegate.url(this,"",t):this.dataProxy.url(this,"",t);if(r){var o={method:"PATCH",data:JSON.stringify(e),onComplete:t.onComplete,onFailure:t.onFailure};this.dataProxy.request(r,o)}}},_wrapInPromise:function(t,r,o){o=o||{};var n=this,s=e.deferred();return o.onComplete=function(){s.resolve(n)},o.onFailure=s.reject,t(r,o),s.promise}})}),define("DS/MPFPersonModel/PersonFactory",["DS/MPFPersonModel/PersonModel","DS/MPFPersonModel/PersonCollection","DS/MPFPersonModel/PersonDataProxy","DS/MPFPersonModel/MePersonDataProxy","DS/MPFPersonModel/ShopPersonsDataProxy","DS/MPFCompanyModel/CompanyMemberDataProxy","DS/MPFModelFactory/Factory"],(e,t,r,o,n,s,a)=>{"use strict";const i=Object.freeze({ME:"me",SHOP:"shop",COMPANY:"company",PERSON:"person"}),l=a.extend({createModel(t,r={},o={}){return this._parent(e,t,r,o)},createCollection(e,r=[],o={}){return this._parent(t,e,r,o)},getDataProxy(e){let t=null;return e===i.ME?(this.dataProxies[i.ME]||(this.dataProxies[i.ME]=new o(this.connector,this.getDataProxy(i.PERSON))),t=this.dataProxies[i.ME]):e===i.SHOP?(this.dataProxies[i.SHOP]||(this.dataProxies[i.SHOP]=new n(this.connector)),t=this.dataProxies[i.SHOP]):e===i.COMPANY?(this.dataProxies[i.COMPANY]||(this.dataProxies[i.COMPANY]=new s(this.connector)),t=this.dataProxies[i.COMPANY]):(this.dataProxies[i.PERSON]||(this.dataProxies[i.PERSON]=new r(this.connector)),t=this.dataProxies[i.PERSON]),t}});return l.Types=i,l});