define("DS/DELPPWViewPlugins/RelationsPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWDicoServices/DicoUtils"],function(e,t,n){"use strict";return function(i){var o,s,r=i.getLogger(),a=i.getConfig().resource.relationsColumnMappingXML,l={},c=new Set,u=!1,d=null,g={};return s=function(n){t.getXMLValues(a,function(t){var i,o,s,r;if(t.RelationsColumnMapping.RelationsColumns&&t.RelationsColumnMapping.RelationsColumns.RelationsColumn&&(i=t.RelationsColumnMapping.RelationsColumns.RelationsColumn,Array.isArray(i)||(i=[i]),l={},i.forEach(function(t){for(l[t.name]={},(o=e.is(t.Relation)?Array.isArray(t.Relation)?t.Relation:[t.Relation]:[]).some(function(e){return"From"===e.direction})&&c.add(t.name),s=e.is(t.LinkedObjectConstraint)?Array.isArray(t.LinkedObjectConstraint)?t.LinkedObjectConstraint:[t.LinkedObjectConstraint]:[],r=0;r<o.length;r++)l[t.name][o[r].name]=o[r],r<s.length&&(d=t.name,e.is(s[r].Attribute)?l[t.name][s[r].dicoType]=Array.isArray(s[r].Attribute)?s[r].Attribute:[s[r].Attribute]:l[t.name][s[r].dicoType]=[],u=!0)})),t.RelationsColumnMapping.RelationsDisplayAttributes){let n,i;n=t.convert("RelationsColumnMapping.RelationsDisplayAttributes.Type","name"),i=t.convert("RelationsColumnMapping.RelationsDisplayAttributes.Relation","linkName"),g=e.merge(n,i)}n()})},o=function(e){Promise.all([new Promise(s)]).then(function(){r.debug("RelationsPlugin initialized!"),e()},function(t){r.debug("Failed to load Relations Plugin. Error Description:"+t),e()})},{name:"RelationsPlugin",onStart:function(e){o(e)},onStop:function(){l=void 0,g=void 0,c.clear()},getRelationsConfiguredOnColumn:function(t){var n=null;return e.is(t)&&e.is(l)&&(n=l[t]),n},getInverseRelationNameSet:function(){return c},isObjectConstraint:function(){return u},getConstraintRelationName:function(){return d},getRelationsColumnDisplayAttribute:function(t,n){return e.is(t)&&e.is(g)?e.is(n)&&"display_icon"===n?g[t][n]:g[t]:null},getRelationsColumnDisplayOptions:function(t){var n={};return e.is(t)&&e.is(g)&&(n=e.is(g[t])?g[t]:{},e.is(n)&&e.is(n.Attribute)?n.Attribute=Array.isArray(n.Attribute)?n.Attribute:[n.Attribute]:n.Attribute=[]),n},getAllRelationDisplayAttributes:function(){var t,i,o,s={bo:[],relation:[]};return e.is(g)&&Object.keys(g).forEach(function(r){i=n.isEntityInstance(r)?s.relation:s.bo,o=g[r],(Array.isArray(o.Attribute)?o.Attribute:[o.Attribute]).forEach(function(n){t=e.is(n.dicoType)?n.dicoType+"."+n.name:n.name,-1===i.indexOf(t)&&i.push(t)})}),s}}}}),define("DS/DELPPWViewPlugins/RootsPlugin",["UWA/Core","UWA/Json"],function(e,t){"use strict";return function(n){var i,o,s,r,a,l,c,u,d,g,m=n.getConfig().resource.rootsMappingPath,f=new Map;return r=function(){var t=widget.getValue("storedRoots");return e.Json.isJson(t)?e.Json.decode(t):t},o=function(t,n){var i=r();e.owns(i,"Default")?e.owns(i.Default,t)?-1===i.Default[t].indexOf(n)&&i.Default[t].push(n):i.Default[t]=[n]:((i={}).Default={},i.Default[t]=[n]),widget.setValue("storedRoots",e.Json.encode(i))},s=function(t,n){var i=-1,o=r();e.owns(o,"Default")&&e.owns(o.Default,t)&&-1<(i=o.Default[t].indexOf(n))&&(o.Default[t].splice(i,1),widget.setValue("storedRoots",e.Json.encode(o)),u(n))},a=function(t){var n,i=[],o=e.is(t)&&""!==t?t:"Default",s=r();if(e.owns(s,o))for(n in s[o])e.owns(s[o],n)&&(i=i.concat(s[o][n]));return i},l=function(t,n){var o,s,a=[],l=e.is(n)&&""!==n?n:"Default";return e.is(i)&&e.is(t)&&(s=i[t],e.is(s,"array")&&(o=r(),e.is(o[l])&&(a=s.map(function(e){return o[l][e]||[]})))),a},c=function(e,t){f.set(e,t)},u=function(e){f.delete(e)},d=function(e){return f.get(e)},g=function(t){var n;let i="",o=!1;const s=d(t);return e.is(s)?(n=[],function t(i){(Array.isArray(i)?i:[i]).forEach(function(i){var o;if(Array.isArray(i))t(i);else if(e.is(i,"object"))for(o in i)Object.hasOwnProperty.call(i,o)&&("config_filter"===o?n.push(i.config_filter):t(i[o]))})}(s.originalFilterQuery),(e=>Array.isArray(e)&&1===e.length)(n)&&(i=n[0],o=!0)):o=!0,{isCompatibleFilter:o,configurationFilter:i}},{name:"RootsPlugin",onStart:function(o){require(["text!"+m],function(s){e.is(s)?i=e.is(s,"string")?t.decode(s):s:n.getLogger().debug("roots mapping is not defined."),o()}),widget.addPreference({name:"storedRoots",type:"hidden",defaultValue:{}})},onStop:function(){f.clear()},addRoot:function(t,n){e.is(t)&&o(t,n)},removeRoot:function(t,n){e.is(t)&&e.is(n)&&s(t,n)},addRootFilter:function(e,t){c(e,t)},getRootFilter:function(e){return d(e)},removeRootFilter:function(e){u(e)},getCompatibleConfigurationFilters:function(e){const t=e.map(e=>({...g(e),rootId:e}));let n=null;return(e=>e.some(e=>!e.isCompatibleFilter))(t)||(n=t.reduce((e,t)=>(e[t.rootId]=t.configurationFilter,e),{})),n},getRoots:function(t){return e.is(t)?l(t):a()},getStoreRoots:function(t,n){var i=[];return e.is(t)&&(i=e.is(n)?l(n,t):a(t)),i},isRoot:function(t){var n=!1;return e.is(t)&&(n=a().indexOf(t)>-1),n},createStore:function(t){var n=r();e.owns(n,"Default")&&(n[t]=n.Default),widget.setValue("storedRoots",e.Json.encode(n))},removeStore:function(t){var n;e.is(t)&&"Default"!==t&&(n=r(),e.owns(n,t)&&(delete n[t],widget.setValue("storedRoots",e.Json.encode(n))))},getStoresList:function(){var e=r(),t=[];return Object.keys(e).forEach(function(e){"Default"!==e&&t.push(e)}),t},removeRoots:function(t){var n=r();Object.keys(n).forEach(function(i){"Default"===i&&e.owns(n[i],t)&&(n[i][t]=[])}),widget.setValue("storedRoots",e.Json.encode(n))}}}}),define("DS/DELPPWViewPlugins/MoreAttributesWizard",["UWA/Core","UWA/Controls/Abstract","DS/Controls/Button","DS/Controls/Loader","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/DataGridView/DataGridView","DS/DataGridView/DataGridViewLayout","DS/Utilities/Utils","DS/PlatformAPI/PlatformAPI","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELWeb3DViewer/MoreAttributesManager"],(e,t,n,i,o,s,r,a,l,c,u,d,g)=>{const m=JSON.parse(g.getTxtWizardSteps()),f={properties:[function(){return{property:"dataIndex",value:this.options.grid.dataIndex}},function(){return{property:"attrName",value:this.options.grid.attrName}},function(){return{property:"attrParent",value:this.options.grid.attrParent}},function(){return{property:"attrDim",value:this.options.grid.attrDim}},function(){return{property:"attrUnit",value:this.options.grid.attrUnit}},function(){return{property:"internalName",value:this.options.grid.internalName}},function(){return{property:"label",value:this.options.label}},function(){return{property:"kind",value:this.options.grid.attrKind}},function(){return{property:"description",value:this.options.grid.attrDesc}},function(){return{property:"attrSelectable",value:this.options.grid.attrSelectable}},function(){return{property:"attrInfoArray",value:this.options.grid.attributeInfoArray}},function(){return{property:"attrNature",value:this.options.grid.attrNature}},function(){return{property:"attrUserAccess",value:this.options.grid.attrUserAccess}},function(){return{property:"attrIsSelected",value:this.options.grid.attrSel}},function(){return{property:"attrIsInXML",value:this.options.grid.attrInXML}},function(){return{property:"attrInType",value:this.options.grid.attrInType}}]};var p,h,P=new Map;return t.extend({name:"more-attr",defaultOptions:{baseTypes:[],baseInstanceTypes:[],selectedTypes:[],automaticExtensions:[],selectedExtensions:[],selectedAttributes:[],preSelectedAttributes:[],unSelectableAttributes:[],defaultTypes:[],defaultExtensions:[],subscribeTokens:[],modelEvents:c,renderTo:null,steps:null,activeView:null,maps:{referenceTypes:[],instanceTypes:[]},views:{typesView:null,extensionsView:null,attributesView:null},toolbar:null,grids:{},models:{},dgvOptions:{defaultColumnDef:{width:"auto",typeRepresentation:"string"},showRowBorderFlag:!0,alternateBackgroundFlag:!1,columns:[{icon:{iconName:"check",fontIconFamily:1},dataIndex:"attrSel",typeRepresentation:"boolean",alwaysVisibleFlag:!0,width:40,resizableFlag:!1,editableFlag:!0,editionPolicy:"EditionInPlace",getCellEditableState:function(e){var t=!0;return e.nodeModel&&e.nodeModel.getReferenceValue("attrRO")&&(t=!1),t}},{dataIndex:"attrParent",editableFlag:!1,width:30,sortableFlag:!0,resizableFlag:!1,getCellTypeRepresentation:function(e){return e.nodeModel&&e.nodeModel.options.grid.attrParent?e.nodeModel.options.grid.attrParent:"Unknown"},getCellSemantics:function(e){if(e.nodeModel)return{disabled:!0}}},{dataIndex:"tree",text:g.getNLSAttributeTitle()}]},dgvLayoutOptions:{cellHeight:26,columnHeaderHeight:38,rowsHeader:!1}},init:function(e,t){this._parent(e),this._dicoPlugin=t,this._realInit(e)},_realInit:async function(){const t=g.isWebInWinContext()?"-immersivePanelWebInWin":"-immersivePanel";this.elements.container=e.createElement("div",{class:this.getClassNames(t)}),this.elements.container.inject(this.options.container),this.options.dialog.show(),preSelectedAttributes=this.options.preSelectedAttributes,unSelectableAttributes=this.options.unSelectableAttributes,await this._buildBody(),await this._buildFooter(),this.switchView(m.activeStep),this.options.subscribeTokens.push(this.options.modelEvents.subscribe({event:"ENXViews/WizardSteps/stepChanged"},e=>{const t=e.stepId;this.switchView(t)})),this.options.modelEvents.publish({event:"ENXViews/Views/showInWidgetBody",data:{restore:!0}}),this.options.modelEvents.publish({event:"ENXViews/Views/showInWidgetBody",data:{idView:"moreAttr",html:this.elements.container}})},destroy:function(){this.options.subscribeTokens.forEach(e=>this.options.modelEvents.unsubscribe(e)),this.options.toolbar.destroy(),Object.keys(this.options.grids).forEach(e=>{this.options.grids[e].destroy(),this.options.grids[e]=null}),this._parent()},_buildBody:function(){return new Promise(t=>{this.elements.wizard=e.createElement("div",{class:this.getClassNames("-wizard")}).inject(this.elements.container),this.options.wizard=g.getNewWizardSteps(this.options.modelEvents,this.elements.wizard,m);const n=e.createElement("div",{class:this.getClassNames("-toolbar-container")}).inject(this.elements.container);this.elements.content=e.createElement("div",{class:this.getClassNames("-content")}).inject(this.elements.container),this._generateToolbar({renderTo:n}),t()})},_buildFooter:function(){var t=this;return new Promise((i,o)=>{this.elements.footer=e.createElement("div",{class:this.getClassNames("-footer"),styles:{"padding-top":"10px"}}).inject(this.elements.container);const s=new n({label:g.getNLSNext(),value:"next",emphasize:"primary",touchMode:!0});this.elements.nextButton=s,s.addEventListener("click",()=>{if("typesView"===this.options.activeView){const e=this.options.models.typesView.search({match:e=>!0===e.nodeModel.options.grid.attrSel}).map(e=>e.dump(f));this.options.selectedTypes=[],e.forEach(function(e){t.options.selectedTypes.push(e.attrName)}),this.options.wizard.changeStep("extensionsView")}else if("extensionsView"===this.options.activeView){const e=this.options.models.extensionsView.search({match:e=>!0===e.nodeModel.options.grid.attrSel}).map(e=>e.dump(f));this.options.selectedExtensions=[],e.forEach(function(e){t.options.selectedExtensions.push(e.attrName)}),this.options.wizard.changeStep("attributesView")}else if("attributesView"===this.options.activeView){const t=this.options.models.attributesView.search({match:e=>(e.nodeModel.options.grid.attrSel||e.nodeModel.options.grid.attrInXML)&&!e.nodeModel.options.grid.attrRO}).map(e=>e.dump(f));var n=[];t.forEach(function(e){n.push(e.attrInType[0]+":"+e.attrName)}),executeDoneButton=l.debounce(function(t,i){d.webServiceRequest({url:"dsmfg/private/V0/invoke/getTrueDicoType",method:"POST",data:e.Json.encode(n),onComplete:function(n){var o,s,r=new Map;if(e.is(n))for(var a=0;a<i.length;a++)s=(o=i[a]).attrName+"."+o.attrParent,r.get(s)?(i.splice(a,1),a--):e.is(n[o.attrName])&&e.is(n[o.attrName][o.attrParent])?(o.attrNature=n[o.attrName][o.attrParent],o.attrInfoArray.dicoType=n[o.attrName][o.attrParent],r.set(s,!0)):r.set(s,!0);t.options.modelEvents.publish({event:"MGA/MoreAttributesWizard/selectedAttributes",data:{selectedAttributes:i,selectedTypes:t.options.selectedTypes,selectedExtensions:t.options.selectedExtensions}}),t.destroy()}})},100),executeDoneButton(this,t)}}),s.inject(this.elements.footer);const r=new n({label:g.getNLSCancel(),emphasize:"secondary",touchMode:!0});this.elements.closeButton=r,r.addEventListener("click",()=>{this.options.dialog.close(),this.destroy()}),r.inject(this.elements.footer),i()})},switchView:function(t){if(this.options.activeView!==t)if(this.elements.toolbarSearch.clear(!0),this.__setToolbarCmds(t),this.options.previousView=this.options.activeView,this.options.activeView=t,null===this.options.views[t]){const o=this.elements.content.getElement("div.more-attr-chooser-view");o&&this.elements.content.removeChild(o),e.is(this.elements.loader)||(this.elements.loaderDiv=e.createElement("div",{class:this.getClassNames("-loader")}).inject(this.elements.content),this.elements.loader=(new i).inject(this.elements.loaderDiv),this.elements.loader.getContent().addClassName("enx-loader")),this.elements.loaderDiv.removeClassName("hidden"),this.elements.loader.on();const s=[];let r=null,a=0,l=m.steps.length;do{m.steps[a].id===t&&(r=m.steps[a]),a++}while(a<l||null===r);if(r.prerequisiteViews)for(var n=0;n<r.prerequisiteViews.length;n++)null===this.options.views[r.prerequisiteViews[n]]&&s.push(this["_build"+r.prerequisiteViews[n]](!0));Promise.all(s).then(()=>{this["_build"+t]().then(e=>{this.elements.loaderDiv.addClassName("hidden"),this.elements.loader.off()})})}else{const e=this.elements.content.getElements("div.more-attr-chooser-view");if(e&&Array.isArray(e)&&e.forEach(e=>{this.elements.content.removeChild(e)}),this.options.views[t].inject(this.elements.content),!0===this.typesUpdated&&"extensionsView"===this.options.activeView)this.__updateExtensionsView().then(()=>{delete this.typesUpdated,this.extensionsUpdated=!0});else if(!0!==this.typesUpdated&&!0!==this.extensionsUpdated||"attributesView"!==this.options.activeView){this.options.grids[this.options.activeView].getContent().removeClassName("loading"),"extensionsView"===this.options.activeView||"typesView"===this.options.activeView?this.elements.nextButton.label=g.getNLSNext():this.elements.nextButton.label=u.getNLSValue("ViewPreferencesUI.MoreAttributesSave")}else this.__updateAttributesView().then(()=>{delete this.typesUpdated,delete this.extensionsUpdated})}},_buildtypesView:function(t){return new Promise((n,i)=>{this.elements.nextButton.label=g.getNLSNext(),this.elements.nextButton.disabled=!0,this.options.wizard.getContent().addClassName("disabled"),this.options.views.typesView=e.createElement("div",{class:this.getClassNames("-typesView more-attr-chooser-view")});const s=e.createElement("div",{class:this.getClassNames("-typesViewDgv more-attr-dgv-container")}).inject(this.options.views.typesView),l=e.extend({identifier:"MoreAttrWizard-"+g.uid()},e.clone(this.options.dgvOptions));l.layout=new a(this.options.dgvLayoutOptions);const c=this.options.grids.typesView=new r(l);this._declareInstRefTypeReps(c),c.onContextualEvent=(()=>[]),c.getCellTooltip=(e=>{const t=this.options.grids.typesView.getColumnOrGroup(e.columnID).dataIndex;if(e.dataIndex=t,-1===e.rowID)return{shortHelp:g.getNLSShortHelp(t),updateModel:!1}}),c.mandatorySelected=this.options.defaultTypes,this.options.models.typesView=new o({}),c.treeDocument=this.options.models.typesView,c.getContent().addClassName("enxdatagridview loading"),c.getContent().inject(s),this.options.views.typesView.inject(this.elements.content),c.onReady(()=>{this.__updateTypesViewModel().finally(()=>{!0!==t&&(c.getContent().removeClassName("loading"),this.elements.nextButton.disabled=!1,this.options.wizard.getContent().removeClassName("disabled")),n()}),c.addEventListener("change",this._changeType.bind(this))})})},_changeType:function(e,t){var n=this.options.grids[this.options.activeView];if(t&&t.nodeModel&&t.nodeModel.options.grid&&"attrSel"===n.layout.getDataIndexFromColumnIndex(t.columnID)){var i=t.nodeModel.getReferenceValue("attrName"),o=this.options.selectedTypes.indexOf(i);!0===t.nodeModel.options.grid.attrSel?-1===o&&this.options.selectedTypes.push(i):-1!==o&&this.options.selectedTypes.splice(o),this.typesUpdated=!0}},_buildextensionsView:function(t){var n=this;return new Promise(function(i,s){n.elements.nextButton.label=g.getNLSNext(),n.elements.nextButton.disabled=!0;n.options.wizard.getContent().addClassName("disabled"),n.options.views.extensionsView=e.createElement("div",{class:n.getClassNames("-extensionsView more-attr-chooser-view")});var l=e.createElement("div",{class:n.getClassNames("-extensionsView-Dgv more-attr-dgv-container")}).inject(n.options.views.extensionsView),c=e.extend({identifier:"MoreAttrWizard-"+g.uid()},e.clone(n.options.dgvOptions));c.layout=new a(n.options.dgvLayoutOptions);var u=n.options.grids.extensionsView=new r(c);n._declareInstRefTypeReps(u),u.onContextualEvent=function(){return[]},u.getCellTooltip=function(e){var t=n.options.grids.extensionsView.getColumnOrGroup(e.columnID).dataIndex;return e.dataIndex=t,-1===e.rowID?{shortHelp:g.getNLSShortHelp(t),updateModel:!1}:e.nodeModel?{shortHelp:g.getNLSShortHelpReplace(e.nodeModel.getReferenceValue("attrInTypeNLS").join("\n")),updateModel:!1}:void 0}.bind(n),u.mandatorySelected=n.options.defaultExtensions,n.options.models.extensionsView=new o({}),u.treeDocument=n.options.models.extensionsView,u.getContent().addClassName("enxdatagridview loading"),u.getContent().inject(l),n.options.views.extensionsView.inject(n.elements.content),u.onReady(function(){n.__updateExtensionsViewModel(!0).finally(function(){!0!==t&&(u.getContent().removeClassName("loading"),n.elements.nextButton.disabled=!1,n.options.wizard.getContent().removeClassName("disabled")),i({})}),u.addEventListener("change",n._changeExtension.bind(n))})})},_changeExtension:function(e,t){const n=this.options.grids[this.options.activeView];if(t&&t.nodeModel&&t.nodeModel.options.grid&&"attrSel"===n.layout.getDataIndexFromColumnIndex(t.columnID)){const e=t.nodeModel.getReferenceValue("attrName");var i=this.options.selectedExtensions.indexOf(e);!0===t.nodeModel.options.grid.attrSel?-1===i&&this.options.selectedExtensions.push(e):-1!==i&&this.options.selectedExtensions.splice(i),this.extensionsUpdated=!0}},_buildattributesView:function(t){var n=this;return new Promise(function(i){n.elements.nextButton.label=u.getNLSValue("ViewPreferencesUI.MoreAttributesSave"),n.elements.nextButton.disabled=!0;n.options.wizard.getContent().addClassName("disabled"),n.options.views.attributesView=e.createElement("div",{class:n.getClassNames("-attributesView more-attr-chooser-view")});var s=e.createElement("div",{class:n.getClassNames("-attributesView-Dgv more-attr-dgv-container")}).inject(n.options.views.attributesView),l=e.extend({identifier:"MoreAttrWizard-"+g.uid()},e.clone(n.options.dgvOptions));l.layout=new a(n.options.dgvLayoutOptions);var c=n.options.grids.attributesView=new r(l);c.onContextualEvent=function(){return[]},c.getCellTooltip=function(e){var t=n.options.grids.attributesView.getColumnOrGroup(e.columnID).dataIndex;if(e.dataIndex=t,-1===e.rowID)return{shortHelp:g.getNLSShortHelp(t),updateModel:!1};if(e.nodeModel){var i=e.nodeModel.getReferenceValue("attrInTypeNLS");return{shortHelp:g.getNLSShortHelpReplace(i?i.join("\n"):""),updateModel:!1}}}.bind(n),c.mandatorySelectedWithParent={Reference:["ds6w:label","ds6w:type"]},n.options.models.attributesView=new o({}),c.treeDocument=n.options.models.attributesView,c.getContent().addClassName("enxdatagridview loading"),c.getContent().inject(s),n.options.views.attributesView.inject(n.elements.content),c.onReady(function(){var e=[];void 0===n.options.grids.extensionsView&&e.push(n._buildextensionsView(!0)),Promise.all(e).then(n.__updateAttributesViewModel.bind(n)).finally(function(){!0!==t&&(c.getContent().removeClassName("loading"),n.elements.nextButton.disabled=!1,n.options.wizard.getContent().removeClassName("disabled")),i()}),c.addEventListener("change",n._changeAttributes.bind(n))})})},_changeAttributes:function(e,t){var n=this.options.grids[this.options.activeView];if(t&&t.nodeModel&&t.nodeModel.options.grid&&"attrSel"===n.layout.getDataIndexFromColumnIndex(t.columnID)){var i=this.options.selectedAttributes.indexOf(t.nodeModel.getLabel());!0===t.nodeModel.options.grid.attrSel?-1===i&&this.options.selectedAttributes.push(t.nodeModel.getLabel()):-1!==i&&this.options.selectedAttributes.splice(i)}},_generateToolbar:function(t){var n=this,i=l.debounce(function(e){n.options.models[n.options.activeView].withTransactionUpdate(function(){var t=e.searchStr,i=!0;n.options.filterInProgress=!0,n.options.models[n.options.activeView].search({match:function(e){(function(e,t){var n=!1,i=new RegExp(e,"i");return(i.test(t.nodeModel.options.grid.attrTitle)||i.test(t.nodeModel.getLabel()))&&(n=!0),n})(t,e)&&n._isNodeVisible(e.nodeModel)?(e.nodeModel.show(),t.length>0&&i?(e.nodeModel.select(!0),e.nodeModel.matchSearch(),i=!1):(e.nodeModel.unmatchSearch(),e.nodeModel.unselect())):(e.nodeModel.unmatchSearch(),e.nodeModel.unselect(),e.nodeModel.hide())}}),n.options.filterInProgress=!1}),n.options.models[n.options.activeView].getXSO().onPostAdd(function(){}),n.options.models[n.options.activeView].getXSO().onPostRemove(function(){})},500);this.elements.toolbar=e.createElement("div",{class:this.getClassNames("-toolbar")}).inject(t.renderTo);var o=e.createElement("div",{class:this.getClassNames("-toolbar-input")}).inject(this.elements.toolbar);this.elements.toolbarIconbar=e.createElement("div",{class:this.getClassNames("-toolbar-iconbar")}).inject(this.elements.toolbar);o.addEventListener("touchstart",function(e){e.target.style.fontSize="16px"},!1),o.addEventListener("mouseleave",function(e){e.target.style.fontSize="14px"},!1),this.elements.toolbarSearch=g.getNewSearchInput(i,o)},_isNodeVisible:function(e){switch(this.currentSelectFilter+"-"+this.currentInstRefFilter){case"none-none":return!0;case"selected-none":return!0===e.getReferenceValue("attrSel");case"unselected-none":return!1===e.getReferenceValue("attrSel");case"none-reference":return"instance"!==e.getReferenceValue("attrParent");case"none-instance":return"reference"!==e.getReferenceValue("attrParent");case"selected-reference":return!0===e.getReferenceValue("attrSel")&&"instance"!==e.getReferenceValue("attrParent");case"selected-instance":return!0===e.getReferenceValue("attrSel")&&"reference"!==e.getReferenceValue("attrParent");case"unselected-reference":return!1===e.getReferenceValue("attrSel")&&"instance"!==e.getReferenceValue("attrParent");case"unselected-instance":return!1===e.getReferenceValue("attrSel")&&"reference"!==e.getReferenceValue("attrParent")}return!0},__setToolbarCmds:function(e){var t=this;this.currentSelectFilter="none",this.currentInstRefFilter="none";var n,i=function(){t.options.models[t.options.activeView].withTransactionUpdate(function(){for(var e=t.options.models[t.options.activeView].getRoots(),n=(t.currentSelectFilter,t.currentInstRefFilter,0);n<e.length;n++){t._isNodeVisible(e[n])?e[n].show():e[n].hide()}}),t.options.models[t.options.activeView].getXSO().onPostAdd(function(){}),t.options.models[t.options.activeView].getXSO().onPostRemove(function(){})},o={fonticon:"tag-active",text:g.getNLSFilterRowsKind(),name:"filter-kind",content:{type:"dropdownmenu",options:{items:[{fonticon:"block",text:g.getNLSNone(),name:"none",selectable:!0,selected:!0},{fonticon:"product",text:g.getNLSFilterReference(),name:"reference",selectable:!0},{fonticon:"flow-cascade",text:g.getNLSFilterInstance(),name:"instance",selectable:!0}],events:{onClick:function(e,n){var o;o=n.name,t.currentInstRefFilter=o,i()}}}}},s={fonticon:"filter",text:g.getNLSFilterRows(),name:"filter",content:{type:"dropdownmenu",options:{items:[{fonticon:"block",text:g.getNLSNone(),name:"none",selectable:!0,selected:!0},{fonticon:"checkbox-on",text:g.getNLSSelected(),name:"selected",selectable:!0},{fonticon:"checkbox-off",text:g.getNLSUnSelected(),name:"unselected",selectable:!0}],events:{onClick:function(e,n){var o;o=n.name,t.currentSelectFilter=o,i()}}}}};if(!this.options.toolbar||this.options.toolbar.currentView!==e){switch(e){case"typesView":case"extensionsView":case"attributesView":n=[o,s]}var r={renderTo:this.elements.toolbarIconbar,items:n};this.options.toolbar&&(this.options.toolbar.destroy(),this.options.toolbar=null),this.options.toolbar=g.getNewIconBar(r),this.options.toolbar.elements.container.setStyle("display",void 0)}},_declareInstRefTypeReps:function(e){var t={reference:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"product",fontIconFamily:WUXManagedFontIcons.Font3DS}}},instance:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"flow-cascade",fontIconFamily:WUXManagedFontIcons.Font3DS}}},Both:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"part-replace",fontIconFamily:WUXManagedFontIcons.Font3DS}}},Extension:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"part-add",fontIconFamily:WUXManagedFontIcons.Font3DS}}},Unknown:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"i-question",fontIconFamily:WUXManagedFontIcons.Font3DS}}}};e.getTypeRepresentationFactory().registerTypeRepresentations(JSON.stringify(t))},__updateTypesViewModel:async function(){const t=this;p=this._dicoPlugin.getReferenceTypes(),h=this._dicoPlugin.getInstanceTypes(),this.options.baseTypes=p,this.options.baseInstanceTypes=h;var n=this.options.baseInstanceTypes.length?this.options.baseTypes.concat(this.options.baseInstanceTypes):this.options.baseTypes;n=this.options.selectedTypes.filter(e=>n.includes(e));const i=[];n.forEach(function(n){var o=t._dicoPlugin.getTypeInfo(n);i.push({displayName:n,parent:"VPMReference",iconUrl:u.getIconURLFromKey(n),IconName:e.is(o)?o.IconName:""})}),i.forEach(e=>{const t=-1!==this.options.selectedTypes.indexOf(e.displayName),n=e.parent||e.displayName,i=-1!==this.options.baseTypes.indexOf(n)?"reference":-1!==this.options.baseInstanceTypes.indexOf(n)?"instance":"Unknown",o=new s({label:e.displayName,grid:{attrName:e.displayName,attrTitle:e.displayName,attrSel:!1,attrParent:i},icons:[e.iconUrl]});this.options.models.typesView.addRoot(o,t?0:void 0);let r=null;switch(i){case"reference":r=this.options.maps.referenceTypes;break;case"instance":r=this.options.maps.instanceTypes;break;default:r=null}r&&-1===r.indexOf(e)&&r.push(e)})},__updateExtensionsView:async function(){this.elements.loader.on(),this.elements.loaderDiv.removeClassName("hidden"),this.options.grids.extensionsView.getContent().addClassName("loading"),this.elements.nextButton.disabled=!0,this.options.wizard.getContent().addClassName("disabled"),this.options.models.extensionsView.removeRoots(),await this.__updateExtensionsViewModel(!0),this.elements.loader.off(),this.options.grids.extensionsView.getContent().removeClassName("loading"),this.elements.nextButton.disabled=!1,this.options.wizard.getContent().removeClassName("disabled")},__updateExtensionsViewModel:async function(){var t=this,n={classes:this.options.selectedTypes},i=new Map;var o={extensions:[],automaticExtensions:[]};d.webServiceRequest({url:"dictionary/interfaces",method:"POST",data:e.Json.encode(n),onComplete:function(n){n.results.forEach(function(t){var n=t.name;t.interfaces.forEach(function(t){var s;s=i.get(t.name),e.is(s)?o.extensions[s].declareIn.push(n):(t.declareIn=[n],o.extensions.push(t),i.set(t.name,o.extensions.length-1))})}),o.extensions.forEach(e=>{const n=-1!==t.options.selectedExtensions.indexOf(e.name);let i=!1,o=!1,r=[];e.declareIn.forEach(e=>{-1!==t.options.baseTypes.indexOf(e)&&(i=!0),-1!==t.options.baseInstanceTypes.indexOf(e)&&(o=!0),r.push(e)});let a="";a=!0===i&&!0===o?"Both":!0===i?"reference":!0===o?"instance":"Unknown",P.has(e.name)&&"Unknown"!==P.get(e.name)&&P.get(e.name)!==a?P.set(e.name,"Both"):P.set(e.name,a);const l=new s({label:e.nlsName,grid:{attrName:e.name,attrTitle:e.nlsName,attrSel:n,attrInType:e.declareIn,attrInTypeNLS:r,attrParent:a}});t.options.models.extensionsView.addRoot(l,n?0:void 0)});const r=Reflect.ownKeys(o.automaticExtensions);for(;-1!==r.indexOf("length");)r.pop(r.indexOf("length"));t.options.automaticExtensions.push(...r)}})},__updateAttributesView:async function(){this.elements.loader.on(),this.elements.loaderDiv.removeClassName("hidden"),this.options.grids.attributesView.getContent().addClassName("loading"),this.elements.nextButton.disabled=!0,this.elements.nextButton.label=u.getNLSValue("ViewPreferencesUI.MoreAttributesSave"),this.options.wizard.getContent().addClassName("disabled"),this.options.models.attributesView.removeRoots(),await this.__updateAttributesViewModel(!0),this.elements.loader.off(),this.options.grids.attributesView.getContent().removeClassName("loading"),this.elements.nextButton.disabled=!1,this.options.wizard.getContent().removeClassName("disabled")},__updateAttributesViewModel:async function(){var t=[],n=this,i=new Map;const o=[].concat(this.options.automaticExtensions).concat(this.options.selectedExtensions).concat(this.options.selectedTypes);payload={classes:o},d.webServiceRequest({url:"dictionary/class/properties",method:"POST",data:e.Json.encode(payload),onComplete:function(o){o.results.forEach(function(n){var o,s,r=!1;-1!==p.indexOf(n.name)&&(o="reference"),-1!==h.indexOf(n.name)&&(o="reference"===o?" Both":"instance"),e.is(o)||(r=!0,"Unknown"!==(o=P.get(n.name))&&e.is(o)||(o="reference")),s=n.name,n.properties.forEach(function(n){var a,l,c,u;n.instOrRef=o,n.from=[s],n.isFromExtension=r,n.attrNature=null,u=n.name===n.name.toLowerCase()&&!r,"name"===n.name||("Both"===o?((c=JSON.parse(JSON.stringify(n))).instOrRef="reference",a=i.get(c.name+c.instOrRef+c.nlsName),e.is(a)?-1===t[a].from.indexOf(s)&&t[a].from.push(s):(t.push(c),i.set(c.name+c.instOrRef+c.nlsName,t.length-1)),(l=JSON.parse(JSON.stringify(n))).instOrRef="instance",a=i.get(l.name+l.instOrRef+l.nlsName),e.is(a)?-1===t[a].from.indexOf(s)&&t[a].from.push(s):(u||t.push(l),i.set(l.name+l.instOrRef+l.nlsName,t.length-1))):(a=i.get(n.name+o+n.nlsName),e.is(a)?n.isFromExtension?t.push(n):t[a].from.push(s):(u?"reference"===o&&t.push(n):t.push(n),i.set(n.name+o+n.nlsName,t.length-1))))})}),i.clear(),t.forEach(e=>{var t,i,o=e.instOrRef,r=e.name+"."+e.instOrRef;t=-1!==preSelectedAttributes.indexOf(r),i=-1!==unSelectableAttributes.indexOf(r);const a={dataIndex:e.name,entity:o,dicoType:e.attrNature},l=new s({label:e.nlsName,grid:{attrName:e.name,attrTitle:e.nlsName,attrNature:e.attrNature,attrSelectable:!0,attrSel:t,attrRO:i,attrInXML:t,attrParent:o,attrInType:e.from,attrInTypeNLS:e.from,attributeInfoArray:a}});n.options.models.attributesView.addRoot(l,t?0:void 0)})}})}})}),define("DS/DELPPWViewPlugins/TreeViewPlugin/CfgColumnsPlugin",["UWA/Core","UWA/Promise","text!DS/DELPPWViewPlugins/assets/json/CfgColumnsPlugin/AdditionalAMDs.json"],function(e,t,n){"use strict";const i=function(t,n){let i={...t};return e.extend(i,n,!0),i},o=function(e,t){return e.concat(t)};return function(s){const r=JSON.parse(n);let a=new Map,l=new Map,c=null;const u=function(t,n){const i=n||null;let o=new Map;return(...n)=>{const s=e.is(i,"function")?i(...n):n[0];let r;return o.has(s)?r=o.get(s):(r=t(...n),o.set(s,r)),r}}(t=>{let n=new Map;return Object.values(t).forEach(t=>{const i=t.amdModuleId;if(e.owns(t,"commandIds")){const e=t.commandIds;if(Array.isArray(e))for(const t of e)n.has(t)?n.set(t,n.get(t).concat(i)):n.set(t,[].concat(i))}}),n}),d=function(){return Array.from(a.values())},g=function(e){let t=[];for(const n of e)a.has(n)&&t.push(a.get(n));return t},m=function(e){return e.getManagedColumnNames()},f=function(e,t){l.set(e,t)},p=function(e){var t;(t=e,Array.from(t.entries())).map(([e,t])=>(function(e,t){return[e,t]})(e,m(t))).forEach(([e,t])=>{for(const n of t)f(n,e)})},h=function(n){var i;v()?n():require((i=r,Object.values(i).map(e=>e.amdModulePath)),function(...i){const o=function(e,t){const n=Math.min(e.length,t.length);let i=[];for(let o=0;o<n;o++)i[o]=[e[o],t[o]];return i}((s=r,Object.values(s).map(e=>e.amdModuleId)),i).map(([e,n])=>((e,n)=>new t(t=>{n.isAdditionalColumnsAvailable(function(i){t({isAvailable:i,amdModuleId:e,amdModule:n})})}))(e,n));var s;t.all(o).then(t=>{!function(e){e.forEach(({amdModuleId:e,amdModule:t})=>{a.set(e,t)})}(t.filter(((t,n)=>i=>e.equals(i[t],n))("isAvailable",!0)).map((t=>n=>{let i={};for(const o of t)e.owns(n,o)&&(i[o]=n[o]);return i})(["amdModuleId","amdModule"]))),p(a),n()})})},P=function(e){const t=function(e){let t=[];return e.getAdditionalColumnsUXDGV(t),t}(e);return function(e,t){const n=Math.min(e.length,t.length);let i={};for(let o=0;o<n;o++)i[e[o]]=t[o];return i}(m(e),t)},C=function(){return d().map(e=>(function(e){return P(e)})(e)).reduce(i,{})},v=function(){var t=!1,n=s.getPlugins("DatabasePlugin");return e.is(n)&&e.is(n.instance)&&e.is(n.instance.isStandAlone,"function")&&(t=n.instance.isStandAlone()),t},S=function(e,n){const o=n();let s;if(Array.isArray(o)){const n=o.map(n=>(n=>new t(function(t){n.updateAttributes(e,function(e){t(e)})}))(n));s=t.all(n).then(e=>{const n=e.reduce(i,{});return t.resolve(n)})}else s=t.reject("getAvailableAdditionalColumnAMDsSupplier is not returning Column AMDs");return s};return{name:"CfgColumnsPlugin",onStart:function(e){h(e)},onStop:function(){},getConfigColumns:function(){return C()},updateAttributes:function(n,i=null){let o=t.resolve();return v()||(o=e.is(i,"function")?S(n,i):S(n,d)),o},getUpdatedCfgAttributesBasedOnCommand:function(n,i){let o;if(e.is(i,"string")){const e=((e,t)=>e.has(t)?e.get(t):null)(u(r),i);o=Array.isArray(e)?S(n,()=>g(e)):t.reject("No valid Command to AMD Module Mapping")}else o=t.reject("No valid Command Name given");return o},getConfigColDataIndexSet:function(){let t;if(e.is(c))t=c;else{const e=d().map(e=>m(e)).reduce(o,[]);t=new Set(e),c=t}return t},isDataIndexAvailable:function(e){return this.getConfigColDataIndexSet().has(e)},getAdditionalColumnAMDsBasedOnDataIndices:function(e){const t=e.reduce((e,t)=>(l.has(t)&&e.add(l.get(t)),e),new Set);return t.size>0?g(t):[]},getColumnsFromPreferences:function(t){return function(t){const n=s.getPlugins("TreeViewPlugin");let i;if(e.is(n)){const o=n.instance.getViewColumnPreferences(t);i=e.is(o)?o.Columns.Column:[]}return i}(t)},getTypeRepresentations:function(){return d().map(e=>e.getTypeRepresentations()).reduce(i,{})}}}}),define("DS/DELPPWViewPlugins/UXComponentsPlugin/PPRDataGridView",["UWA/Core","DS/PPWDataGridView/PPWDataGridView","css!DS/DELPPWViewPlugins/assets/css/DataGridView.css"],function(e,t){"use strict";var n=function(e){return-1===e.rowID&&e.columnID>=0};return t.extend({name:"PPRDataGridView",init:function(t){t.showOutlineFlag=!0,this._parent(t),this.layout.cellHeight=e.is(t.cellHeight)?t.cellHeight:32,this.layout.columnHeaderHeight=e.is(t.columnHeaderHeight)?t.columnHeaderHeight:32},registerColumnsEnum:function(){var t=this.getTypeRepresentationFactory();this.columns.forEach(function(n){e.is(n.hasRangeDefined)&&n.hasRangeDefined&&t.registerTypeRepresentations({[n.dataIndex.replaceAll(".","")]:{stdTemplate:"comboSelector",semantics:{possibleValues:n.authorizedValues}}})})},registerColumnTypeRepresentations:function(e){this.getTypeRepresentationFactory().registerTypeRepresentations(e)},updateNodeKPIColor:function(e){this.showNodeKPIColorFlag=e},getColumnIndexByDataIndex:function(e){return this.layout.getColumnIndex(e)},setColumnWidth:function(e,t){this.layout.setColumnWidth(e,t)},isColumnHidden:function(e){return!this.layout.getColumnVisibleState(e)},hideColumn:function(e,t){this.layout.setColumnVisibleFlag(e,!1,t)},setColumnOptions:function(t,n){-1!==t&&("string"==typeof t&&(t=this.getColumnIndexByDataIndex(t)),e.extend(this.columns[t],n))},showColumn:function(e){this.layout.setColumnVisibleFlag(e,!0)},getColumnMinWidth:function(e){return this.layout.getColumnOptionValue(e,"minWidth")},getColumnWidth:function(e){return this.layout.getColumnOptionValue(e,"width")},moveColumn:function(e,t){this.layout.moveColumn(e,t)},_requestCellContent:function(e){var t;e.isHeader=n(e),(t=e.cellView.collectionView.getColumnOrGroup(e.columnID))&&(e.dataIndex=t.dataIndex),this._parent(e)},_setTweakerForCell:function(e){this._parent(e,{touchMode:!1})},sortColumn:function(e,t){this.sortModel=[{dataIndex:e,sort:t}],this._applySortModel()},clearSort:function(){this.sortModel=[{}],this._applySortModel()},getLightCellInfosAt:function(e){var t,i=this._parent(e);return i.isHeader=n(i),(t=this.getColumnOrGroup(i.columnID))&&(i.dataIndex=t.dataIndex),i},getLayout:function(){return this.layout}})}),define("DS/DELPPWViewPlugins/KeyBindingPlugin",[],function(){"use strict";return function(e){return{name:"KeyBindingPlugin",createHandler:function(t){var n,i=this,o=e.getLogger();n=function(e){var n,s,r;(e=e||window.event)?(n=e.keyCode,s=e.ctrlKey||e.metaKey,r=e.shiftKey,s&&67===n?t.onCtrlC&&t.onCtrlC(e):s&&86===n?t.onCtrlV&&t.onCtrlV(e):s&&88===n?t.onCtrlX&&t.onCtrlX(e):46===n?t.onSuppr&&t.onSuppr(e):8===n?t.onBackspace&&t.onBackspace(e):s&&65===n?t.onCtrlA&&t.onCtrlA(e):r&&9===n?t.onShiftTab&&t.onShiftTab(e):9===n?t.onTab&&t.onTab(e):40===n?t.onDownArrow&&t.onDownArrow(e):38===n&&t.onUpArrow&&t.onUpArrow(e)):o.debug(i.name,"could not get event from keydown event")},(t=t||{}).domElement?t.domElement.onkeydown=n:o.debug(i.name,"No dom element given to listen key bindings on. Exiting")},onStart:function(){},onStop:function(){}}}}),define("DS/DELPPWViewPlugins/TreeViewPlugin/RootsStoreUI",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],function(e,t){"use strict";return function(n,i,o,s){var r,a=o.getComponent("Button"),l=o.getComponent("LineEditor"),c=o.getComponent("ComboBox"),u=o.getComponent("Element"),d=function(e){return new u("div",e)},g=d({class:"ViewPreferencesUI-TabContent store-view-container"});return r=function e(){var o,r,u,m,f,p,h,P=s.getStoresList(),C=function(){-1<P.indexOf(m.value)?(p.show(),h.show()):(p.hide(),h.hide())},v=function(){var e=m.value;""!==e&&i.getMediator().notify("LoadRecentContent",{store:e}),n.buttons.Ok.fire("buttonclick")},S=function(){var t=m.value;""!==t&&s.removeStore(t),g.empty(!0),e()};o=d({class:"store-view-div"}),(u=new l({placeholder:t.getNLSValue("RootsStoreUI.Store_name.Title")}).inject(o)).getContent().addClassName("store-view-control"),u.addEventListener("uncommittedChange",function(){""!==u._myInput.value?f.show():f.hide()}),(f=new a({label:t.getNLSValue("RootsStoreUI.Save_views.Title"),onClick:function(){var t=u.value;""!==t&&(s.createStore(t),g.empty(),e())}}).inject(o)).getContent().addClassName("store-view-btn"),f.hide(),o.inject(g),(P=s.getStoresList()).length>0&&(r=d({class:"store-view-div"}),(m=new c({elementsList:P,placeholder:t.getNLSValue("RootsStoreUI.Store_select.Placeholder"),currentValue:"Default",enableSearchFlag:!0,reachablePlaceholderFlag:!0}).inject(r)).getContent().addClassName("store-view-control"),m.addEventListener("change",C),(p=new a({label:t.getNLSValue("RootsStoreUI.Load_store.Title"),onClick:v}).inject(r)).getContent().addClassName("store-view-btn"),(h=new a({label:t.getNLSValue("RootsStoreUI.Remove_store.Title"),onClick:S}).inject(r)).getContent().addClassName("store-view-btn"),p.hide(),h.hide(),r.inject(g))},e.is(n)&&r(),{getContent:function(){return g}}}}),define("DS/DELPPWViewPlugins/SelectionPlugin/SelectionPlugin",["UWA/Core","UWA/Json"],function(e,t){"use strict";return function(n){var i,o,s,r,a,l={},c=n.getConfig().resource.selectionMappingPath;return r=function(t){var i,o,r,a=[],c=[];if(!e.is(s)||!e.is(t))return a;if(i=s[t],e.is(i,"array"))for(r=0;r<i.length;r++)o=i[r],e.is(o,"string")?(c=[],e.is(l[o])&&(c=l[o].map(function(e){return e.id})),a.push(c||[])):n.getLogger().debug("ModuleId is invalid in selection mapping. ModuleId:"+o);return a},a=function(t){var i,o,r,a=[],c=[];if(!e.is(s)||!e.is(t))return a;if(i=s[t],e.is(i,"array"))for(r=0;r<i.length;r++)o=i[r],e.is(o,"string")?(c=[],e.is(l[o])&&(c=l[o].map(function(e){return e})),a.push(c||[])):n.getLogger().debug("ModuleId is invalid in selection mapping. ModuleId:"+o);return a},{name:"SelectionPlugin",onStart:function(r){o=Object.create(null),require(["text!"+c],function(o){e.is(o)?(i=e.is(o,"string")?t.decode(o):o)&&(s=i.selection):n.getLogger().debug("Selection mapping is not defined."),r()})},onStop:function(){l={},o=null},setSelection:function(t,n){e.is(t)&&(l[t]=n)},getSelections:function(t){return e.is(t)?r(t):null},getSelectionsWithPaths:function(t){return e.is(t)?a(t):null},getSelectionMapping:function(t){var n=null;return e.is(t)&&Object.prototype.hasOwnProperty.call(s,t)&&(n=s[t]),n},removeFromHighlightMap:function(e){delete o[e.toString()]},setNodeIdsToHighlight:function(e,t){o[e.toString()]=t},getNodeIdsToHighlight:function(e){return o[e.toString()]},getSelectedNodesCount:function(t){var n,i=this.getSelections(t),o=0;if(e.is(i,"array"))for(n=0;n<i.length;n++)o+=i[n].length;return o},getModuleSelections:function(t){var n=[];return e.is(l[t])&&(n=l[t]),n}}}}),define("DS/DELPPWViewPlugins/View",["UWA/Core","UWA/Controls/Abstract","UWA/Element"],function(e,t,n){"use strict";return function(i){return t.extend({init:function(e){this._parent(e),this.container=new n("div",{class:e?e.class?e.class:"":"view-container"}),this.elements={},this.setup.apply(this,arguments)},setup:function(){},render:function(){return this},setContainer:function(t){var i;if(t instanceof n)this.container=t;else if("element"===(i=e.typeOf(t)))this.container=e.extendElement(t);else{if("object"!==i)throw new Error("Invalid type of container");this.container=e.createElement(t.tag,t)}},destroy:function(){this._parent()}})}}),define("DS/DELPPWViewPlugins/Viewer3DPlugin",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/DELPPWModelServices/CollectionUtils"],function(e,t,n){"use strict";return function(i){var o,s,r,a="drop",l="remove",c="applyFilter",u="cleanAll",d="unHideAll",g="exclusiveShow",m="resetViewer",f="Reframe",p="Show",h="Hide",P="Highlight",C="RemoveAll",v=i.getConfig().appContext.widget.getId(),S=[],I=[];return o=function(t){var n,o=[];return n=function(){var t,n;return t=widget.getValue("x3dSharedId"),e.is(t)||(n=i.getConfig().appContext,e.is(n)&&e.is(n.widget)&&e.is(n.widget.data)&&(t=n.widget.data.app3DSharedId)),t}(),e.is(n)&&o.push(n),o.concat(t,"MFNMGA").join("/")},s=function(n,i){var s=o(n),r=i||{};e.merge(r,{originWidgetId:v}),t.publish(s,r)},function(t){var n,i,o,s,r,a,l=[];if(e.is(t.data.paths)&&e.is(t.data.attributes))for(o=t.data.paths,s=t.data.attributes,n=0;n<=o.length-1;n++){for(r=o[n],a=[],i=0;i<=r.length-1;i++)"VPMReference"===s[r[i]].type&&a.push(r[i]);l.push(a)}else l=t.data.paths;return l},function(e,t){var n,i=null;for(n=t.length-1;n>=0&&null===(i=e.getNodeModel(t[n],!0));n--);return i},r=function(t,n){var o;let s=i.getPlugins("InterWidgetComPlugin");e.is(s)&&(o=(s=s.instance).isCloud()?"DELOERC_AP":"DELOER_AP",s.isWidgetLinked(o)&&s.publishEvent("DS/DELExternalWidgetCom/"+t,n))},{name:"Viewer3DPlugin",onStart:function(){},onStop:function(){for(;S.length>0;)i.removeExternalListener(S.pop())},generateInterWidgetEventName:function(e){return o(e)},drop3D:function(t,n){var i=a,o=n||{},r=e.is(o.filterQuery3d)?o.filterQuery3d:null,l=e.is(o.usePaths)?o.usePaths:null;I=t,s(i,{rootReferenceIds:t,filterQuery3d:r,usePaths:l})},remove3D:function(t,n){var o=l,a=n||{},c=!1,u={rootReferenceIds:t,usePaths:e.is(a.usePaths)?a.usePaths:null};const d=i.getService("ConfigService");if(e.is(d)){const n=d.getPreference("MfgItem3DViewerModule_Preferences");if(e.is(n)){const i=n.loadedObjInfos;e.is(i)&&(c=t.some(function(e){let t=!1;return e!==i.rootPID&&e!==i.scopedPrdPID||(t=!0),t}))}}c&&r(C,{items:[{id:t}]}),s(o,u)},apply3DFilter:function(t,n,i){var o=c,r=i||{},a=!!e.is(r.removeFilter,"boolean")&&r.removeFilter;s(o,{rootReferenceIds:t,filterQuery3d:n,removeFilter:a})},selectIn3D:function(e,t){var i,o;return i=e.map(function(e){return n.transformToRIROccurrencePath(e)}),o=!0===t?{occRIRPaths:e}:{occRIRPaths:i},r(P,{path:i,clear:!0}),o},cleanAll:function(){s(u,null)},exclusiveShow:function(e){s(g,e)},change3DVisibility:function(e,t){var i;i=e.map(function(e){return n.transformToRIROccurrencePath(e)}),r(t?p:h,{path:i})},resetViewer:function(){s(m,null)},unHideAll3D:function(){s(d,null)},getRoots:function(){return I},reframeIn3DViewer:function(e){const t=e.map(function(e){return n.transformToRIROccurrencePath(e)});r(f,{path:t})},unsubscribe:function(){t.unsubscribe("DS/PADUtils/PADCommandProxy/select")}}}}),define("DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsSpinEditor",["UWA/Core","DS/Controls/SpinBox","DS/Controls/Abstract","css!DS/DELPPWViewPlugins/assets/css/UnitsEditor.css"],function(e,t,n){"use strict";var i;return n.inherit({name:"UnitsSpinEditor",init:function(e){i=e||{},this._parent(i)},buildView:function(){var n=i.value;this.elements.container.addClassName("wux-controls-lineeditor custom-controls-unitseditor"),this._myInputGroup=new e.Element("div",{class:"input-group  unitseditor-input-group"}),this._myUnit=new e.Element("span",{class:"input-group-addon unitseditor-group-addon"}),this._myInput=new t({value:e.is(n)&&""!==n&&null!==n?Number(n):void 0,decimals:i.decimals,typingFilter:i.typingFilter,pageStepValue:i.pageStepValue,displayStyle:i.displayStyle,allowUndefinedFlag:!0}),this._myInput.inject(this._myInputGroup),this._myUnit.inject(this._myInputGroup),this._myInputGroup.inject(this.elements.container),this._myInput.elements.container.addClassName("wux-ui-state-"+this.options.type),this._validFlag=!0,this.displayClearFieldButtonFlag&&this._layoutClearFieldButton()},setUnit:function(e){this._myUnit.setContent(e)},getUnit:function(){return this._myUnit.getText()},setValue:function(t){var n=e.is(t)&&null!==t&&""!==t?Number(t):void 0;this._myInput.setProperties({value:n})},getValue:function(){var t=this._myInput.value;return e.is(t)&&null!==t&&""!==t?t:""},setInputName:function(e){this._myInput.name=e}})}),define("DS/DELPPWViewPlugins/UXComponentsPlugin/RichTextEditor",["UWA/Core","UWA/Utils","DS/CKEditor/CKEditor","DS/Controls/Abstract","DS/DELPPWResourceServices/ResourceUtils","css!DS/DELPPWViewPlugins/assets/css/RichTextEditor.css"],function(e,t,n,i,o){"use strict";return n.plugins.add("InsertLocalImage",{icons:"timestamp",init:function(e){e.addCommand("InsertLocalImage",{exec:function(e){var t=document.createElement("input");t.type="file",t.accept="image/*",t.style.display="none",t.multiple=!1,t.onchange=function(){var t=this.files[0],n=new FileReader;n.onload=function(){var i=document.createElement("img");i.src=n.result,i.alt=t.name,e.insertHtml(i.outerHTML)},n.readAsDataURL(t)},document.getElementsByClassName("cke")[0].append(t),t.click()}}),e.ui.addButton("InsertLocalImage",{label:o.getNLSValue("RichTextEditor.Command.InsertLocalImage.Title"),command:"InsertLocalImage",toolbar:"insert",icon:o.getIconURLFromKey("ImageUpload")})}}),i.inherit({name:"RichTextEditor",_editorContainer:null,_editorOptions:null,_initialData:null,_fieldId:"",init:function(n){n=n||{},this._editorOptions=e.is(n.editorOptions)?n.editorOptions:{},this._fieldId=t.getUUID(),this._parent(n),this._initialData=null},buildView:function(){var t=this;this.elements.container.addClassName("wux-richTextEditor-mainContainer"),this._editorContainer=new e.Element("div",{class:"wux-richTextEditor-editorContainer",id:this._fieldId}),this._editorContainer.inject(this.elements.container),n.replace(this._editorContainer,e.merge(this._editorOptions,{width:"100%",height:"300px",language:widget.lang,toolbar:[{name:"document",items:["Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","-","Undo","Redo"]},{name:"editing",items:["Find","Replace"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","CopyFormatting","RemoveFormat"]},"/",{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","NumberedList","BulletedList","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["SpecialChar","Image","Table","HorizontalRule","InsertLocalImage"]},"/",{name:"styles",items:["Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]}],extraPlugins:"tableresize, InsertLocalImage",delayIfDetached:!0,delayIfDetached_interval:10})),n.on("instanceReady",function(){var i=n.instances[t._fieldId];e.is(i)&&!e.is(t._editor)&&(t._editor=i,e.is(t._initialData)&&t._editor.setData(t._initialData),t._editor.removeMenuItem("paste"))})},getData:function(){var t="";return t=(t=t.concat('<?xml version="1.0" encoding="UTF-8" ?>↵<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><title>Html export</title></head>')).concat("<body>"),e.is(this._editor)?t=t.concat(this._editor.getData()):e.is(this._initialData)&&(t=t.concat(this._initialData)),(t=t.concat("</body></html>")).match(/(.|[\r\8000]){1,8000}/g)},setData:function(e){var t,n=e.indexOf("<body>"),i=e.indexOf("</body>");n>-1&&i>-1&&(t=e.slice(n+6,i),this._editor?this._editor.setData(t):this._initialData=t)},destroy:function(){this._parent(),n.instances[self._fieldId].destory()}})}),define("DS/DELPPWViewPlugins/TreeViewPlugin/PlatformPlugin",["UWA/Core","UWA/Class","DS/DELPPWModelServices/BehaviorUtil"],function(e,t,n){"use strict";return function(){return{name:"PlatformPlugin",isNewDragNDrop:function(){return n.isNewDragNDrop()},shouldLoadRootOnly:function(){return n.shouldLoadRootOnly()},isCloud:function(){return n.isCloud()},useRootStorage:function(){return n.useRootStorage()},isSwipeableMenuPrefDisplayed:function(){return n.isSwipeableMenuPrefDisplayed()},isNavigateOnIndexedDBPrefDisplayed:function(){return n.isNavigateOnIndexedDBPrefDisplayed()},isDialogDisplayedAtDDinCaseOfMove:function(){return n.isDialogDisplayedAtDDinCaseOfMove()},isSuppressHideShow3DColumn:function(){return n.isSuppressHideShow3DColumn()},isExpandFetchFetchEnabled:function(){return n.isExpandFetchFetchEnabled()},isCreateMBOMv2:function(){return n.isCreateMBOMv2()},isInsertButtonInInsertCmdDisplayed:function(){return n.isInsertButtonInInsertCmdDisplayed()},isDescHighlightFromEBOMEnabled:function(){return n.isDescHighlightFromEBOMEnabled()},isChangeRequiredSyncronizationEnabled:function(){return n.isChangeRequiredSyncronizationEnabled()},isResultingProductSyncronizationEnabled:function(){return n.isResultingProductSyncronizationEnabled()},isMGALoadRelationsOnDemand:function(){return n.shouldLoadRelationsOnDemand()},isLoadOOTBProcedures:function(){return n.shouldLoadOOTBProcedures()}}}}),define("DS/DELPPWViewPlugins/ProxyPlugin",["UWA/Core","DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOFilterBIUX/FilterBIComponentProxy"],function(e,t,n){"use strict";return function(i){var o,s,r=i.getLogger();return s=function(e,i){var s;switch(e){case o.FilterProxy:s=new n(i);break;case o.TaggerProxy:i.hasOwnProperty("filteringMode")||(i.filteringMode=t.filteringMode.FilteringOnServer),s=t.createProxy(i);break;default:r.debug("Invalid proxy. Proxy creation failed")}return s},{name:"ProxyPlugin",PROXY:o={FilterProxy:"FilterProxy",TaggerProxy:"TaggerProxy"},create:function(t,n){var o,a,l=i.getPlugins("WebServicePlugin"),c=n||{},u=null;return e.is(l)?(l=l.instance,o={appId:(a=i.getConfig().appContext).widget.data.appId,widgetId:a.widget.getId(),tenant:l.getTenant(),colorize:!0},e.merge(c,o),u=s(t,c)):r.debug("WebServicePlugin not available"),u},onStart:function(){},onStop:function(){}}}}),define("DS/DELPPWViewPlugins/Operations3DViewerPlugin",["UWA/Core"],function(e){"use strict";return function(t){const n=Object.freeze({SHOWN:1,HIDDEN:0,PARTIAL:-1,NA:null}),i="Operations3DViewerPlugin";var o,s,r,a,l,c,u,d,g,m,f=[],p=new Map;return o=function(t){return t=e.is(t,"string")?t:t.toString(),p.has(t)},s=function(t){return t=e.is(t,"string")?t:t.toString(),p.get(t)},r=function(t,n){t=e.is(t,"string")?t:t.toString(),p.set(t,n)},a=function(t){t=e.is(t,"string")?t:t.toString(),p.delete(t)},l=function(){return widget.getValue("Operations3DViewerPlugin_Preferences")},c=function(e){widget.setValue("Operations3DViewerPlugin_Preferences",e)},u=function(e){var t=null;return g(e)&&o(e)&&(t=s(e)),t},d=function(t,i){g(t)&&e.is(i,"number")?r(t,i):r(t,n.NA)},g=function(t){var n,i=!1,o=l();return e.is(o)&&(n=o.loadedObjInfos,e.is(n.scopedMfgItemPID)&&p.has(n.scopedMfgItemPID)&&t.indexOf(n.scopedMfgItemPID)>-1&&(i=!0)),i},m=function(t,i){i=e.is(i,"number")?i:n.NA,p.forEach(function(e,n){n.indexOf(t)>-1&&r(n,i)})},{name:i,onStart:function(){},onStop:function(){var e,n;for(e=0,n=f.length;e<n;e++)t.removeExternalListener(f[e]);f=[]},getPreferences:function(){return l()},updatePreferences:function(e){c(e)},add3DVisibilityState:function(t){var i=n.NA;g(t)?(e.is(s(t[0]))&&(i=n.SHOWN),r(t,i)):r(t,i)},remove3DVisibilityState:function(e){o(e)&&a(e)},get3DVisibilityState:function(e){return u(e)},update3DVisibilityState:function(t,i){e.is(i)?d(t,i):r(t,n.NA)},isAggregatingRootLoadedInViewer:function(e){return g(e)},overrideAllChildrenNodesVisibilityState:function(e,t){m(e,t)}}}}),define("DS/DELPPWViewPlugins/ImplementPlugin/ImplementBase",["UWA/Core","DS/DELPPWModelServices/CollectionUtils"],function(e,t){"use strict";return function(n,i,o,s,r,a){var l,c,u,d,g,m,f,p="ImplementBase",h=i,P=o,C=s,v=r;if(a=!e.is(a)||a,!e.is(h))throw new Error("Error: scope link name is not defined!");if(!e.is(C))throw new Error("Error: implment link name is not defined!");return m=function(t){var n=!1;return e.is(t)&&e.is(t.type,"string")&&("BL Error"===t.type||"Specific Error"===t.type)&&e.is(t.message,"string")&&t.message.length>0&&(n=!0),n},l=function(n,i,o){var s=[h];return e.is(i,"string")&&(s=[i]),t.getImpactedConnections(n,null,{isRefRefOnly:!0,relationTypes:s,fromXEN:o})},c=function(n,i,o){var s=[P];return e.is(i,"string")&&(s=[i]),t.getImpactedConnections(n,null,{isRefRefOnly:!0,relationTypes:s,fromXEN:o})},u=function(n,i,o){var s=[v];return e.is(i,"string")&&(s=[i]),t.getImpactedConnections(n,null,{isRefRefOnly:!0,relationTypes:s,fromXEN:o})},d=function(e){var i,o=e;return Array.isArray(e)&&((i=e).length>0?o=t.getInstanceFromCollection(i[i.length-1]).get("isInstanceOf"):(o=null,n.debug(p,"Error: expected reference id for root node"))),o},g=function(i){var o=[];return e.is(i,"function")?o=t.findSomeConnection(function(e){var t=C===e.get("type"),n=!1;return t&&(n=i(e.get("from"),e.get("to"))),t&&n}):n.debug(p,'Error: _getImplementLinks: expected a predicate method "funcHasImplement"'),o},f=function(i,o){var s=o||{},r={onComplete:function(){e.is(s.onComplete)&&s.onComplete("ImplementPlugin.DeleteImpl.Success")},onFailure:function(t,n){e.is(s.onFailure)&&(m(n)?o.onFailure("ImplementPlugin.DeleteImpl.Failed",n.message):o.onFailure("ImplementPlugin.DeleteImpl.Failed"))}};e.is(i)?t.deleteConn(i,r):(n.debug(p,"Input connection ID is invalid."),s.onFailure("ImplementPlugin.DeleteImpl.Failed"))},{getReferencePID:function(e){return d(e)},filterImplementLinks:function(e){return g(e)},findInstanceWhoseParentIsScoped:function(n){var i,o,s,r,a=null;for(i=n.length-1;i>=0;i--)if(o=t.getInstanceFromCollection(n[i]),e.is(o)&&(r=o.get("isAggregatedBy"),(s=l(r)).length>0)){a={absPathIndex:i,instanceModel:o,scopeLinks:s};break}return a},findInstanceWhoseParentIsPartialScoped:function(n){var i,o,s,r,a=null;for(i=n.length-1;i>=0;i--)if(o=t.getInstanceFromCollection(n[i]),e.is(o)&&(r=o.get("isAggregatedBy"),(s=c(r)).length>0)){a={absPathIndex:i,instanceModel:o,scopeLinks:s};break}return a},getScopedParent:function(t){var n,i=null;return e.is(t,"array")&&t.length>0&&(n=this.findInstanceWhoseParentIsScoped(t),e.is(n)&&(i=n.instanceModel.get("isAggregatedBy"))),i},getPartialScopedParent:function(t){var n,i=null;return e.is(t,"array")&&t.length>0&&(n=this.findInstanceWhoseParentIsPartialScoped(t),e.is(n)&&(i=n.instanceModel.get("isAggregatedBy"))),i},isUnderScope:function(t){var i,o=!1;return e.is(t,"array")?t.length>0&&(i=this.findInstanceWhoseParentIsScoped(t),e.is(i)&&(o=!0)):(n.debug(p,"Error: isUnderScope: expected absolute path"),o=null),o},isUnderPartialScope:function(t){var i,o=!1;return e.is(t,"array")?t.length>0&&(i=this.findInstanceWhoseParentIsPartialScoped(t),e.is(i)&&(o=!0)):(n.debug(p,"Error: isUnderScope: expected absolute path"),o=null),o},isScoped:function(e){return this.getScopeLinks(e).length>0},isPartialScoped:function(e){return this.getPartialScopeLinks(e).length>0},isResultingLinked:function(e){return this.getResultingProductLinks(e).length>0},getScopeLinks:function(e,t,n){var i=d(e),o=[];return i&&(o=l(i,t,n)),o},getPartialScopeLinks:function(e,t,n){var i=d(e),o=[];return i&&(o=c(i,t,n)),o},getResultingProductLinks:function(e){var t=d(e),n=[];return t&&(n=u(t)),n},getResultingProductLinksOfImplementing:function(e,t){var i,o=d(e),s=[];return o&&(i=u(o,v,t),Array.isArray(i)&&(1===i.length&&i[0].getAttribute("to")!==o?s=i:i.length>1&&n.debug(p,"ERROR: getResultingProductsLinksOfImplementing found more than one scope link for MfgItem: "+e))),s},getResultingProductLinksOfImplemented:function(e){var t,i=d(e),o=[];return i&&(t=u(i,v),Array.isArray(t)&&(1===t.length?o=t:t.length>1&&n.debug(p,"ERROR: getResultingProductsLinksOfImplementing found more than one scope link for MfgItem: "+e))),o},getScopeLinksOfImplemented:function(e){var t,n=d(e),i=[];return n&&(t=l(n,h),Array.isArray(t)&&(i=t)),i},getPathToScope:function(t){var n,i=[];return n=this.findInstanceWhoseParentIsScoped(t),e.is(n)&&(i=t.slice(n.absPathIndex)),i},getPathToPartialScope:function(t){var n,i=[];return n=this.findInstanceWhoseParentIsPartialScoped(t),e.is(n)&&(i=t.slice(n.absPathIndex)),i},getPathsToScope:function(e,t){return{implementingPathToScope:this.getPathToScope(e),implementedPathToScope:this.getPathToScope(t)}},getImplLinks:function(t){var n,i,o;return e.is(t,"array")?(n=t[t.length-1],i=this.getPathToScope(t),o=g(function(t,o){return n===t||e.Json.encode(i)===e.Json.encode(o)})):o=null,o},getImplLinksOfImplemented:function(t){var n,i;return Array.isArray(t)?(n=this.getPathToScope(t),i=g(function(t,i){return e.equals(n,i)})):i=null,i},hasCrossScope:function(n,i,o,s){var r,a,u,d,g,m=[],f=[],p=[],h=[],P=null,C=!1,v=null,S=null,I=!1,y=!1;return g=function(e,t){var n=null;return e.some(function(e){var i=l(e);return(i=i.concat(c(e))).some(function(e){var i=!1,o=e.get("to");return t.indexOf(o)>-1&&(i=!0,n=e),i})}),n},e.is(s,"array")&&s.length>0&&s.forEach(function(n,o){var r=t.getInstanceFromCollection(n);0===o&&p.push(r.get("isAggregatedBy")),s.length-1!==o?p.push(r.get("isInstanceOf")):e.is(i)||(i=r.get("isInstanceOf"))}),e.is(o,"array")&&o.length>0&&o.forEach(function(i,s){var r=t.getInstanceFromCollection(i);0===s&&m.push(r.get("isAggregatedBy")),o.length-1!==s?m.push(r.get("isInstanceOf")):e.is(n)||(n=r.get("isInstanceOf"))}),e.is(i)&&m.length>0&&t.expandOnBackbone(i,{referencesPID:h,instancesPID:[]}),e.is(n)&&p.length>0&&t.expandOnBackbone(n,{referencesPID:f,instancesPID:[]}),!e.is(P)&&m.length>0&&h.length>0&&(P=g(m,h),e.is(P)&&(I=!0)),!e.is(P)&&f.length>0&&p.length>0&&(P=g(f,p),e.is(P)&&(y=!0)),e.is(P)&&(C=!0,r=P.getAttribute("from"),u=t.getReferenceFromCollection(r),e.is(u)&&(v=u.get("PLMEntity.V_Name")),a=P.getAttribute("to"),d=t.getReferenceFromCollection(a),e.is(d)&&(S=d.get("PLMEntity.V_Name"))),{hasCrossScope:C,implementingName:v,implementedName:S,isParentCrossScope:I,isChildCrossScope:y}},getScopeLinkType:function(){return h},getPartialScopeLinkType:function(){return P},getResultingProductLinkType:function(){return v},getImplementLinkType:function(){return C},deleteImplementLink:function(e,t){f(e,t)},deleteScopeLink:function(i,o){var s;s={onComplete:function(){e.is(o)&&e.is(o.onComplete)&&o.onComplete("ImplementPlugin.DeleteScope.Success")},onFailure:function(t,n){e.is(o)&&e.is(o.onFailure)&&(m(n)?o.onFailure("ImplementPlugin.DeleteScope.Failed",n.message):o.onFailure("ImplementPlugin.DeleteScope.Failed"))}},e.is(i)?t.deleteConn(i,s):(n.debug(p,"Input connection ID is invalid."),s.onFailure("ImplementPlugin.DeleteScope.Failed"))},createImplementLink:function(n,i,o){var s,r,l;o=o||{},l=function(t,n){e.is(o.onFailure,"function")&&(m(n)?o.onFailure("ImplementPlugin.CreateImpl.Failed",n.message):o.onFailure("ImplementPlugin.CreateImpl.Failed"))},a?(n=n.toString(),i=i.toString()):(n=e.is(n,"array")?n[n.length-1]:n,i=e.Json.encode(i)),s={type:C,IDFrom:n,IDTo:i},e.is(o.connectionParams)&&(s.connectionParams=o.connectionParams),r={onFailure:l,onTimeout:l,onCancel:l,onComplete:function(t){e.is(o.onComplete,"function")&&o.onComplete("ImplementPlugin.CreateImpl.Success",t)},securityContextOverride:o.securityContextOverride},t.createConn(s,r)},createScopeLink:function(n,i,o){var s,r,a=function(t,n){e.is(o.onFailure,"function")&&(m(n)?o.onFailure("ImplementPlugin.CreateScope.Failed",n.message):o.onFailure("ImplementPlugin.CreateScope.Failed"))};o=o||{},s={type:h,IDFrom:n,IDTo:i},r={onFailure:a,onTimeout:a,onCancel:a,onComplete:function(){e.is(o.onComplete,"function")&&o.onComplete("ImplementPlugin.CreateScope.Success")}},t.createConn(s,r)}}}}),define("DS/DELPPWViewPlugins/UXComponentsPlugin/InclusiveLineEditor",["UWA/Core","DS/Controls/SpinBox","DS/Controls/Toggle","DS/Controls/Abstract","DS/DELPPWResourceServices/ResourceUtils"],function(e,t,n,i,o){"use strict";var s;return i.inherit({name:"InclusiveLineEditor",init:function(e){s=e||{},this._parent(s)},buildView:function(){var i=this,r=s.value.value,a=s.value.inclusive,l=!e.is(a)||"NotSet"===a,c=e.is(s.disabled)&&s.disabled?s.disabled:l,u=!!e.is(s.disabled)&&(!!s.disabled&&s.disabled);i._unit="",this.elements.container.addClassName("inclusive-editor-group"),this._myInputGroup=new e.Element("div",{class:"inclusive-editor"}),this._inclusiveCheckbox=new n({type:"checkbox",label:"",checkFlag:!l,visibleFlag:!u}),this._inclusiveCheckbox.elements.container.addClassName("check-enabled"),this._inclusiveInput=new t({value:!l&&e.is(r)?Number(r):void 0,stepValue:s.step,units:s.unit,pageStepValue:1,displayStyle:"lite",disabled:c,decimals:s.decimals,typingFilter:s.typingFilter}),this._inclusiveInput.elements.container.addClassName("inclusive-input"),this._includeCheckBox=new n({type:"checkbox",label:o.getNLSValue("InclusiceLineEditor.Included"),checkFlag:"Included"===a,disabled:c}),this._includeCheckBox.elements.container.addClassName("check-included"),this._inclusiveCheckbox.inject(this._myInputGroup),this._inclusiveInput.inject(this._myInputGroup),this._includeCheckBox.inject(this._myInputGroup),this._myInputGroup.inject(this.elements.container),this._inclusiveCheckbox.addEventListener("change",function(e){e.dsModel.checkFlag?(i._includeCheckBox.disabled=!1,i._inclusiveInput.disabled=!1):(i._inclusiveInput.value=void 0,i._includeCheckBox.checkFlag=!1,i._includeCheckBox.disabled=!0,i._inclusiveInput.disabled=!0)}),this._inclusiveInput.addEventListener("input",function(e){0==e.target.value.length&&i._includeCheckBox.checkFlag&&(i._includeCheckBox.checkFlag=!1)})},setUnit:function(e){this._inclusiveInput.setProperties({units:e})},setValue:function(e){this._inclusiveCheckbox.checkFlag&&this._inclusiveInput.setProperties({value:Number(e)})},isSet:function(){return this._inclusiveCheckbox.checkFlag},getValue:function(){var t=this._inclusiveInput.value,n=this._includeCheckBox.checkFlag,i=this._inclusiveCheckbox.checkFlag;return{value:e.is(t)&&null!==t&&""!==t?t:"",inclusive:i?n?"Included":"Excluded":"NotSet"}},getInputValue:function(){return this._inclusiveInput.value}})}),define("DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsEditor",["UWA/Core","DS/Controls/LineEditor","css!DS/DELPPWViewPlugins/assets/css/UnitsEditor.css"],function(e,t){"use strict";return t.inherit({name:"UnitsEditor",buildView:function(){this.elements.container.addClassName("wux-controls-lineeditor custom-controls-unitseditor"),this._myInputGroup=new e.Element("div",{class:"input-group  unitseditor-input-group"}),this._myUnit=new e.Element("span",{class:"input-group-addon unitseditor-group-addon"}),this._myInput=new e.Element("input",{type:"text",tabindex:0,autocomplete:"off"}),this._myInput.inject(this._myInputGroup),this._myUnit.inject(this._myInputGroup),this._myInputGroup.inject(this.elements.container),this._myInput.addClassName("wux-ui-state-"+this.options.type),this._validFlag=!0,this.displayClearFieldButtonFlag&&this._layoutClearFieldButton()},setUnit:function(e){this._myUnit.setContent(e)},getUnit:function(){return this._myUnit.getText()},setInputName:function(e){this._myInput.name=e}})}),define("DS/DELPPWViewPlugins/TreeViewPlugin/LayoutPreferencesUI",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],function(e,t){"use strict";return function(n,i,o,s,r){var a,l,c,u,d,g,m,f,p,h,P,C,v,S,I,y,b=0,w="widget-layout-block",D="button-container",L="border-selected",E="side-block",k="main-block",V=i.getComponent("Dialog"),R=i.getComponent("Button"),x=i.getComponent("Element"),A=i.getComponent("WUXDockAreaEnum"),N=Object.create(null),M=Object.create(null),T=Object.create(null),O=Object.create(null),F=n.getLayoutConfig();return e.merge(N,r.viewsInDockingZones),e.merge(M,r.viewsInFreeZone),d=function(e){var t,n,i,o=e.getRowColumnMap(),s=[];for(t=e.getRowIds().length,a=new Array(t),i=0;i<t;i++)n=o[i].length,s.push({columns:n}),a[i]=new Array(n);return s},g=function(e,t){t?e.hasClassName(L)||e.addClassName(L):e.hasClassName(L)&&e.removeClassName(L)},m=function(e,t,n){e.buttons[t].checkFlag=n,g(e.buttonContainer,n)},f=function(t,n,i,o){var s=a[t][n];e.is(s)&&m(s,i,o)},p=function(t,n,i){var o=T[t];e.is(o)&&m(o,n,i)},h=function(e,i,o){var s,r,a,l,c=[],u=function(e){var t=e.dsModel;!0===t.checkFlag?(c.some(function(e){var n=!1;return!0===e.checkFlag&&e.domId!==t.domId&&(e.checkFlag=!1,n=!0),n}),g(a,!0)):g(a,!1)};for(s=n.createBlocLayout({rows:[{columns:1}]}),a=new x("div",{class:D+" "+i}),l=0;l<o;l++)r=new R({type:"check",label:t.getNLSValue(i+".LayoutPreferencesUI."+O[i][l]),value:"button",onClick:u,domId:i+"-"+b++}),c.push(r),r.inject(a);return T[e]={buttons:c,buttonContainer:a,viewId:i},s.setColumnContent(0,0,a),s},P=function(n,i,o,s){var r,l,c,u=[],d=function(t){var n,i,o,s,r=t.dsModel;if(!0===r.checkFlag)u.some(function(e){var t=!1;return!0===e.checkFlag&&e.domId!==r.domId&&(e.checkFlag=!1,t=!0),t}),g(c,!0);else{for(n=!0,o=0;o<a.length;o++)for(s=0;s<a[o].length;s++)e.is(a[o][s])&&(i=a[o][s].buttons.every(function(e){return!1===e.checkFlag}),n=n&&i);n?r.checkFlag=!0:g(c,!1)}};for(c=new x("div",{class:D+" "+o}),l=0;l<s;l++)r=new R({type:"check",label:t.getNLSValue(o+".LayoutPreferencesUI."+O[o][l]),value:"button",onClick:d,domId:o+"-"+b++}),u.push(r),r.inject(c);a[n][i]={buttons:u,buttonContainer:c,viewId:o}},C=function(){var t,i,o,s,r,g,m,f;for(t in N)switch(o=(i=N[t]).views.length,O[t]=i.views,i.dockArea){case A.LeftDockArea:c=h(i.dockArea,t,o);break;case A.RightDockArea:u=h(i.dockArea,t,o)}for(t in g=n.getBlocLayout(),r=d(g),M)i=M[t],e.is(i.views,"array")&&i.views.length>0&&(o=i.views.length,O[t]=i.views,s=F[t],e.is(s)&&P(s.row,s.col,t,o));for(l=n.createBlocLayout({rows:r}),m=0;m<a.length;m++)for(f=0;f<a[m].length;f++)e.is(a[m][f])&&l.setColumnContent(m,f,a[m][f].buttonContainer)},v=function(){M=null,a=null,N=null,T=null,O=null},S=function(){var t,n,i,o={};for(t in N)o[t]="";for(t in M)i=M[t],e.is(i.views,"array")&&i.views.length>0&&(n=i.views[0],o[t]=n);return o},I=function(){var t,n,i,o,r,a=function(e,t){var n,i,o=e.length;for(i=0;i<o;i++)if(e[i]===t){n=i;break}return n};for(t in s)if(s.hasOwnProperty(t)){if(""===(n=s[t]))continue;r=a(O[t],n),e.is(N[t])?p(N[t].dockArea,r,!0):(o=M[t],e.is(o)&&e.is(o.views)&&(i=F[t],f(i.row,i.col,r,!0)))}},y=function(n){var s,r,a=new x("div",{class:w}),d=function(e,t){var n;n=new x("div",{class:t}),e.inject(n),n.inject(a)};return C(),e.is(T[A.LeftDockArea])&&d(c,E),d(l,k),e.is(T[A.RightDockArea])&&d(u,E),r=i.getComponent("WUXFrameWindowsManager").getFrameWindow(o),(s=new V({domId:"LayoutPreferencesUI-Dialog",immersiveFrame:r.getImmersiveFrame(),modalFlag:!0,visibleFlag:!1,snappableFlag:!1,title:t.getNLSValue("LayoutPreferencesUI.Header"),content:a,resizableFlag:!0,buttons:{Ok:new R({className:"ok primary",label:t.getNLSValue("LayoutPreferencesUI.Ok"),emphasize:"primary",onClick:function(){e.is(n,"function")&&n(),s.close()}}),Cancel:new R({className:"cancel",label:t.getNLSValue("LayoutPreferencesUI.Cancel"),onClick:function(){s.close()}})}})).close=function(){s.destroy(),a=null,v()},s},{name:"LayoutPreferencesUI",showDialog:function(t){var n;n=y(t),e.is(s)||(s=S()),I(),n.show()},decipherPreferencesFromButtonStates:function(){var t,n,i,o,s,r={},l=function(e){var t=O[e];r[e]="",n.forEach(function(n,i){var o,s=i,a=n.checkFlag;o=t[s],!0===a&&(r[e]=o)})};for(t in T)i=T[t].viewId,n=T[t].buttons,l(i);for(o=0;o<a.length;o++)for(s=0;s<a[o].length;s++)e.is(a[o][s])&&(i=a[o][s].viewId,n=a[o][s].buttons,l(i));return r}}}}),define("DS/DELPPWViewPlugins/SearchPlugin/SearchPlugin",["UWA/Core","UWA/Utils/InterCom","DS/PlatformAPI/PlatformAPI"],function(e,t,n){"use strict";return function(i){var o,s,r,a,l,c,u;return r=function(t,n,i){var s={};return s.title=t,s.mode="furtive",s.app_socket_id=o,s.widget_id=widget.id,s.default_with_precond=!0,s.show_precond=!1,s.source=["3dspace"],s.default_search_criteria="",s.precond="",e.is(i,"array")&&i.forEach(function(e){""!==s.default_search_criteria&&(s.default_search_criteria+=" OR "),s.default_search_criteria+=e}),e.is(n,"array")&&(n.forEach(function(e){""!==s.precond&&(s.precond+=" OR "),s.precond+='flattenedtaxonomies:"types/'+e+'"'}),s.precond="("+s.precond+")"),s},a=function(e){var t={};t.widget_id=widget.id,s.dispatchEvent("unregisterSearchContext",t),s.dispatchEvent("RegisterContext",e),s.addListener("onCloseTransient",function(){s.removeListener("onCloseTransient")})},l=function(){var e={widget_id:widget.id};s.dispatchEvent("unregisterSearchContext",e),s.dispatchEvent("UnregisterContext",e),s.unsubscribeServer("SearchComServer"),s.removeListener("Selected_Objects_search",c),s.disconnect()},c=function(t){e.is(u)&&u(t)},{name:"SearchPlugin",onStart:function(){o="search_socket_"+(new Date).getTime(),(s=new t.Socket(o,{dispatchRetryInterval:5})).addListener("Selected_Objects_search",c),s.subscribeServer("SearchComServer")},onStop:function(){l()},activate:function(t,n,i,o){var l;e.is(i)&&(i=e.is(i,"array")?i:[i]),l=r(t,i,o),e.is(n,"function")||(l.mode="default"),u=n,a(l),s.dispatchEvent("InContextSearch",l)},subscribeToSelectEvent:function(e){n.subscribe("DS/PADUtils/PADCommandProxy/select",e)}}}}),define("DS/DELPPWViewPlugins/UXComponentsPlugin/ExtendedCustomDialog",["UWA/Core","DS/Windows/Dialog"],function(e,t){"use strict";var n,i=null;return t.extend({name:"CustomDialog",init:function(e){n=e||{},this._parent(n)},_setup:function(t){this.clearMessages(),i=new e.Element("div",{class:"custom-dialog-message-container"}),new e.Element("span",{class:t.iconSpanClass}).inject(i),new e.Element("span",{class:t.textSpanClass}).inject(i).innerHTML=t.message,e.is(n.content,"string")||i.inject(n.content)},error:function(t){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-attention",textSpanClass:"custom-dialog-error-message",message:t}),e.is(n.buttons.Ok)&&(n.buttons.Ok.disabled=!0)},info:function(t){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-info",textSpanClass:"custom-dialog-info-message",message:t}),e.is(n.buttons.Ok)&&(n.buttons.Ok.disabled=!1)},warning:function(t){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert",textSpanClass:"custom-dialog-warn-message",message:t}),e.is(n.buttons.Ok)&&(n.buttons.Ok.disabled=!1)},clearMessages:function(){e.is(i)&&i.destroy()}})}),define("DS/DELPPWViewPlugins/ImplementPlugin/ProductImplementPlugin",["UWA/Core","DS/DELPPWModelServices/ModelUtils","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWNavigationServices/NavigateUtil","DS/DELPPWModelServices/BehaviorUtil","DS/DELPPWViewPlugins/ImplementPlugin/ImplementBase"],function(e,t,n,i,o,s,r){"use strict";return function(a){var l,c,u,d,g="ProductImplementPlugin",m="ProductImplementLink",f=function(t,n,i,o){var s,r=o||{};e.is(i)&&(l.debug(g,t+"failed with error: %s ",JSON.stringify(i)),e.is(i.message,"string")&&(s=i.message)),e.is(r.onFailure,"function")&&r.onFailure(n,s)};return c=new r(a.getLogger(),m,"PartialProductImplementLink","ProductImplementLinkOcc","ResultingProductLink",!1),d=function(t,i){var o=i||{},s={onComplete:function(t){e.is(o)&&e.is(o.onComplete)&&o.onComplete("ImplementPlugin.DeleteScope.Success",t)},onFailure:function(n,i){e.is(o.onFailure)&&f("Delete scope link for id:"+t,"ImplementPlugin.DeleteScope.Failed",i,o)}};e.is(t)?n.deleteConn(t,s):o.onFailure("Connection ID is not valid.")},u=function(){i.webServiceRequest({url:"delmia/param/configuration/getParameters?domainID=DigitalManufacturing&familyID=MfgItemsBehavior&paramID=LifecycleSyncBetweenProvideAnd3DPartCheckbox&argID=LifecycleSyncBetweenProvideAnd3DPartArg",method:"GET",onComplete:function(n){var i=1===n.length&&"Enabled"===n[0].value,o=a.getService("ConfigService"),s=widget.getValue("fromXen");if(e.is(o))if(s)o.setPreference("isReleaseSyncXENEnabled",i);else switch(t.getWidgetTrigram()){case"MFN":case"CST":case"SIE":o.setPreference("isReleaseMaturitySynced",i)}},onFailure:function(e){console.log("Failure to fetch parameter LifecycleSyncBetweenProvideAnd3DPart")},onTimeout:function(e){console.log("Timeout when fetching LifecycleSyncBetweenProvideAnd3DPart")}})},e.extend(c,{onStart:function(){l=a.getLogger(),u()},getImplLinksOfImplemented:function(t){var i,o,s=Object.create(null),r=t.length,a=null;if(Array.isArray(t)){for(i=1;i<=r;i++)o=t.slice(r-i),s[o.length.toString()]=o;a=c.filterImplementLinks(function(t,n){var i=s[n.length.toString()],o=!1;return e.is(i)&&(o=e.equals(i,n)),o}).filter(function(t){var i=t.get("from"),o=!1;return e.is(i,"string")&&(o=n.isInstance(i)),o})}return a},getScopeLinksOfImplementing:function(e,t){var n,i=c.getReferencePID(e),o=[];return i&&(n=c.getScopeLinks(i,m,t),Array.isArray(n)&&(1===n.length&&n[0].getAttribute("to")!==i?o=n:n.length>1&&l.debug(g,"ERROR: getScopeLinksOfImplementing found more than one scope link for MfgItem: "+e))),o},getPartialScopeLinksOfImplementing:function(e,t){var n,i=c.getReferencePID(e),o=[];return i&&(n=c.getPartialScopeLinks(i,"PartialProductImplementLink",t),Array.isArray(n)&&(1===n.length&&n[0].getAttribute("to")!==i?o=n:n.length>1&&l.debug(g,"ERROR: getPartialScopeLinksOfImplementing found more than one scope link for MfgItem: "+e))),o},deleteScopeLink:function(e,t){d(e,t)},consumeImplementedItems:function(s,r,l,c,u){var d,g=u||{},m={rootProductID:s,productOccPaths:r,rootMfgItemID:l,targetMfgItemID:c,expandBy:t.getNavigateOnIndex()?"index":"database",computeResultReport:!!e.is(u.computeResultReport)&&u.computeResultReport},p=function(e,t){f("Create mbom from ebom","ImplementPlugin.Consumption.Failed",t,g)},h=i.getServerConfigurationRawXML("DELWebMfgAssetsPhantomNodeConfig.xml"),P=i.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");e.is(h,"string")&&(m.xmlPhantomNodeConfig=h),e.is(P,"string")&&(m.xmlLinkAuthoringConfig=P),e.is(u.insertSpareItemOnAssign)&&(m.insertSpareItemOnAssign=u.insertSpareItemOnAssign),d={url:"dsmfg/private/V0/invoke/MfgItem/CreateMBOMFromEBOM",method:"POST",context:this,headers:i.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(m),onComplete:function(t){var i,s,r=[],l=o.getConnectionParser(),c={stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function(n){var i=[],o=[],s=a.getPlugins("BIPlugin");e.is(n.instancesAndReferences,"array")&&n.instancesAndReferences.length>0&&(n.instancesAndReferences.forEach(function(e){e.isInstance()?i.push(e):o.push(e)}),i.length>0&&a.getMediator().notify("instanceAdded",[i]),o.length>0&&a.getMediator().notify("referenceChanged",[o])),e.is(s)&&(s=s.instance).getBICmdState()&&s.computeBI(),e.is(g.onComplete,"function")&&(g.onComplete("ImplementPlugin.Consumption.Success",n,t),a.getMediator().notify("consumeProductOnDragAndDrop"))},onFailure:p};e.is(t)&&e.is(t.instancesAndReferences,"array")&&e.is(t.connections,"array")&&t.connections.length>0?(t.instancesAndReferences.forEach(function(t){var n=e.is(t.attributesValue)?t.attributesValue:t;Object.prototype.hasOwnProperty.call(n,"isInstanceOf")?c.stackedInstances.push(t):(c.stackedReferences.push(t),r.push(n.PID))}),t.connections.forEach(function(e){l.parse(e,c)}),e.is(t.reusedReferences)&&(i=t.reusedReferences.filter(function(t){var i=e.is(n.getReferenceFromCollection(t)),o=-1!==r.indexOf(t);return!(i||o)})),s=function(){n.addToCollections(c)},e.is(i,"array")&&i.length>0?o.getDescendantsFromServer(i,s,{expandLevel:0,silentMode:!0}):s()):e.is(g.onComplete,"function")&&g.onComplete("ImplementPlugin.Consumption.Failed",null,t)},onFailure:p,onTimeout:p,onCancel:p},i.webServiceRequest(d)},createScopeAndImplementLink:function(t,s,r,l,c){var u,d=c||{},g={productID:r,processID:t,processInstancePID:s,productPath:e.Json.encode(l)},m=function(e,t){f("Create scope and implement link","ImplementPlugin.CreateScope.Failed",t,d)},p=i.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");e.is(p,"string")&&(g.xmlLinkAuthoringConfig=p),u={url:"dsmfg/private/V0/invoke/createscopeandimplementlink",method:"POST",headers:i.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(g),onFailure:m,onTimeout:m,onCancel:m,onComplete:function(t){var i=o.getConnectionParser(),s={stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function(t){var n=[];e.is(t.instancesAndReferences,"array")&&t.instancesAndReferences.length>0&&(t.instancesAndReferences.forEach(function(e){e.isReference()&&n.push(e)}),n.length>0&&a.getMediator().notify("referenceChanged",[n])),e.is(t.connections,"array")&&t.connections.length>0&&(a.getMediator().notify("connectionAdded",[t.connections]),e.is(d.onComplete,"function")&&d.onComplete("ImplementPlugin.CreateScope.Success",t))}};e.is(t)&&e.is(t.instancesAndReferences,"array")&&e.is(t.connections,"array")&&t.connections.length>0?(t.instancesAndReferences.forEach(function(t){var n=e.is(t.attributesValue)?t.attributesValue:t;Object.prototype.hasOwnProperty.call(n,"isInstanceOf")?s.stackedInstances.push(t):s.stackedReferences.push(t)}),t.connections.forEach(function(e){i.parse(e,s)}),n.addToCollections(s)):m()}},i.webServiceRequest(u)},canCreateScopeLink:function(t){var i,o,s,r,l,c,u,d,g,f=m,p=!0,h=a.getPlugins("ResourcePlugin").instance,P={};return i=t.fromSideRefPID,o=t.toSideRefPID,s=t.fromSideAbsPath,r=t.toSideAbsPath,d=n.getReferenceModel(i),this.isScoped(i)&&(p=!1,g=h.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:d.get("PLMEntity.V_Name")})),p&&!0===this.isPartialScoped(i)&&(p=!1,g=h.getNLSValue("ImplementBehavior.Validation.PartialScopeLinkExists",{objectName:d.get("PLMEntity.V_Name")})),(p&&e.is(s,"array")&&s.length>0||e.is(r,"array")&&r.length>0)&&(u=this.hasCrossScope(i,o,s,r),e.is(u)&&u.hasCrossScope&&(u.isParentCrossScope?g=h.getNLSValue("ImplementBehavior.Validation.ParentCrossScopeExists",{implementingRef:u.implementingName,implementedRef:u.implementedName}):u.isChildCrossScope&&(g=h.getNLSValue("ImplementBehavior.Validation.ChildCrossScopeExists",{implementingRef:u.implementingName,implementedRef:u.implementedName})),p=!1)),e.is(t.fromSideInstPID)&&e.is(t.toSideInstPID)?(l=t.fromSideInstPID,c=t.toSideInstPID):(l=t.fromSideRefPID,c=t.toSideRefPID),P={canCreateLink:p,data:{type:f,implementingPID:l,implementedPID:c,implementingAbsPath:t.fromSideAbsPath,implementedAbsPath:t.toSideAbsPath,displayText:h.getNLSValue(f,null,"CreateLink"),buttonIdentifier:h.getNLSValue(f,null,"CreateLink")}},p||(P.errorMessage=g),P},canCreatePartialScopeLink:function(t){var i,o,s,r,l,c,u,d,g,m="PartialProductImplementLink",f=!0,p=a.getPlugins("ResourcePlugin").instance,h={};return i=t.fromSideRefPID,o=t.toSideRefPID,s=t.fromSideAbsPath,r=t.toSideAbsPath,d=n.getReferenceModel(i),!0===this.isPartialScoped(i)&&(f=!1,g=p.getNLSValue("ImplementBehavior.Validation.PartialScopeLinkExists",{objectName:d.get("V_Name")})),f&&!0===this.isScoped(i)&&(f=!1,g=p.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:d.get("V_Name")})),(f&&e.is(s,"array")&&s.length>0||e.is(r,"array")&&r.length>0)&&(u=this.hasCrossScope(i,o,s,r),e.is(u)&&u.hasCrossScope&&(u.isParentCrossScope?g=p.getNLSValue("ImplementBehavior.Validation.ParentCrossScopeExists",{implementingRef:u.implementingName,implementedRef:u.implementedName}):u.isChildCrossScope&&(g=p.getNLSValue("ImplementBehavior.Validation.ChildCrossScopeExists",{implementingRef:u.implementingName,implementedRef:u.implementedName})),f=!1)),e.is(t.fromSideInstPID)&&e.is(t.toSideInstPID)?(l=t.fromSideInstPID,c=t.toSideInstPID):(l=t.fromSideRefPID,c=t.toSideRefPID),h={canCreateLink:f,data:{type:m,implementingPID:l,implementedPID:c,implementingAbsPath:t.fromSideAbsPath,implementedAbsPath:t.toSideAbsPath,displayText:p.getNLSValue(m,null,"CreateLink"),buttonIdentifier:p.getNLSValue(m,null,"CreateLink")}},f||(h.errorMessage=g),h},canCreateResultingProductLink:function(t){var n,i="ResultingProductLink",o=t.fromSideRefPID,s=t.toSideRefPID,r=a.getPlugins("ResourcePlugin").instance,l=!0,c={};return n=o,!0===this.isResultingLinked(n)&&(l=!1),c={canCreateLink:l},l&&(c.data=e.merge({type:i,IDFrom:o,IDTo:s,displayText:r.getNLSValue(i,null,"CreateLink"),buttonIdentifier:r.getNLSValue(i,null,"CreateLink")},e.clone(t))),c},getImplLinksOfImplementing:function(e){var t,n,i=[];return Array.isArray(e)&&e.length>0?(t=e[e.length-1],n=this.filterImplementLinks(function(e){return t===e}),Array.isArray(n)&&(1===n.length?i=n:n.length>1&&(l.debug(g,"ERROR: getImplLinksOfImplementing found more than one implement link for MfgItem: "+e),i=null))):i=null,i},canCreateImplementLink:function(t){var n,i,o,s="ProductImplementLinkOcc",r=a.getPlugins("ResourcePlugin").instance,l={};return n=t.fromSideAbsPath,i=t.toSideAbsPath,l={canCreateLink:o=this.isImplementLinkPossible(n,i)},o&&(l.data=e.merge({type:s,implementingAbsPath:n,implementedAbsPath:i,displayText:r.getNLSValue(s,null,"CreateLink"),buttonIdentifier:r.getNLSValue(s,null,"CreateLink")},e.clone(t))),l},isImplementLinkPossible:function(t,i){var o,s,r=!1,a=null;return e.is(t,"array")&&t.length>0&&e.is(i,"array")&&i.length>0&&(o=this.getScopedParent(t),s=this.getScopedParent(i),e.is(o)&&e.is(s)&&!0===(r=n.hasConnection({to:s,from:o,type:m}))&&(a=this.getImplLinksOfImplementing(t),Array.isArray(a)&&a.length>0&&(r=!1))),r},isDeleteOfProductImplementLinkAllowed:function(){return s.isDeleteOfProductImplementLinkAllowed()},validateIfScoped:function(t,i){var o,s,r,a,l,c,u,d,g=!1,m=function(e,t){return e.some(function(e){return t(e.get("from"))})};if(e.is(t,"array")&&t.length>0?(s=n.getInstanceFromCollection(t[t.length-1]),r=s.get("isInstanceOf"),a=this.getScopeLinks(r),e.is(a,"array")&&0===a.length&&(r=this.getScopedParent(t))):n.isReference(t)&&(r=t),u=new Set,n.traverseInstanceModels(r,function(e){u.add(e.get("isInstanceOf"))}),e.is(i,"array")&&i.length>0)for(o=i.length-1;o>=0;o--)if(d=n.getInstanceFromCollection(i[o]),e.is(d)){if(c=d.get("isAggregatedBy"),m(l=this.getScopeLinksOfImplemented(c),function(e){return e===r})){g=!0;break}if(0!==o&&m(l,function(e){return u.has(e)}))break}return g},createEngMadeFromItem:function(t,n){return new Promise((o,s)=>{let r=a.getPlugins("DatabasePlugin"),l=a.getPlugins("DicoPlugin"),c=i.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");e.is(r)&&e.is(r.instance)||(a.getLogger().debug("DatabasePlugin is not available."),s()),e.is(l)&&e.is(l.instance)||(a.getLogger().debug("DicoPlugin is not available."),s()),r=r.instance,l=l.instance;const u={mfgRefID:n,prdRefID:t};e.is(c,"string")&&(u.xmlLinkAuthoringConfig=c);const d=()=>{s()},g={url:"dsmfg/private/V0/invoke/createEngMadeFromItem",method:"POST",context:this,headers:i.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(u),onComplete:t=>{const n={stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:o},i={queriedForChildren:!0,queriedForConnections:!0,queriedForDocuments:!1},a=r.getConnectionParser();e.is(t)?(e.is(t.instancesAndReferences,"array")&&t.instancesAndReferences.forEach(t=>{const o=e.is(t["to.attributesValue"])?t["to.attributesValue"]:t.attributesValue;Object.prototype.hasOwnProperty.call(o,"isInstanceOf")?n.stackedInstances.push(e.merge(o,{queriedForConnections:!0})):n.stackedReferences.push(e.merge(o,i))}),e.is(t.connections,"array")&&t.connections.forEach(e=>{a.parse(e,n)}),r.addToCollections(n)):s()},onFailure:d,onTimeout:d,onCancel:d};i.webServiceRequest(g)})},consumeReferenceWithScopeLink:function(t,n,o,s,r){return new Promise((l,c)=>{let u=a.getPlugins("DatabasePlugin"),d=a.getPlugins("DicoPlugin"),g=i.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");e.is(u)&&e.is(u.instance)||(a.getLogger().debug("DatabasePlugin is not available."),c()),e.is(d)&&e.is(d.instance)||(a.getLogger().debug("DicoPlugin is not available."),c()),u=u.instance,d=d.instance;const m={scopeIntent:t,implementingParentRefPID:o,implementedRefPID:n,mfgInstanceId:s,attributes:r};e.is(g,"string")&&(m.xmlLinkAuthoringConfig=g);const f=()=>{c()},p={url:"dsmfg/private/V0/invoke/consumeReferenceWithScopeLink",method:"POST",context:this,headers:i.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(m),onComplete:t=>{const n={stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:l},i={queriedForChildren:!0,queriedForConnections:!0,queriedForDocuments:!1},o=u.getConnectionParser();e.is(t)?(e.is(t.instancesAndReferences,"array")&&t.instancesAndReferences.forEach(t=>{const o=e.is(t["to.attributesValue"])?t["to.attributesValue"]:t.attributesValue;Object.prototype.hasOwnProperty.call(o,"isInstanceOf")?n.stackedInstances.push(e.merge(o,{queriedForConnections:!0})):n.stackedReferences.push(e.merge(o,i))}),e.is(t.connections,"array")&&t.connections.forEach(e=>{o.parse(e,n)}),u.addToCollections(n)):c()},onFailure:f,onTimeout:f,onCancel:f};i.webServiceRequest(p)})},manageScopeAndImplementLink:function(t,s,r,l,c){var u,d=c||{},g={productPID:r,processPID:t,processInstancePID:s,partialScopeAction:d.cmdAction},m=i.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml"),p=function(t,n){e.is(d.isCreatePartialScopeLink)&&d.isCreatePartialScopeLink?f("Create scope and implement link","ImplementPlugin.CreatePartialScope.Failed",n,d):e.is(d.isDeletePartialScopeLink)&&d.isDeletePartialScopeLink?f("Delete Partial scope and implement link","ImplementPlugin.DeletePartialScope.Failed",n,d):e.is(d.isStretchPartialScopeLink)&&d.isStretchPartialScopeLink?f("Stretch scope and implement link","ImplementPlugin.StretchPartialScope.Failed",n,d):e.is(d.isSwitchToPartialScopeLink)&&d.isSwitchToPartialScopeLink?f("Swtich To Full scope link","ImplementPlugin.SwitchPartialScope.Failed",n,d):e.is(d.onFail,"function")&&d.onFail(null,n)};e.is(d.isStretchPartialScopeLink)&&d.isStretchPartialScopeLink?(g.targetPrdOccPath=d.targetPrdOccPath,g.targetProductPID=d.targetProductID,g.prdOccPath=l):e.is(d.isDeletePartialScopeLink)&&d.isDeletePartialScopeLink?g.targetPrdOccPath=d.targetPrdOccPath:(e.is(d.isCreatePartialScopeLink)&&d.isCreatePartialScopeLink||e.is(d.isSwitchToPartialScopeLink)&&d.isSwitchToPartialScopeLink)&&(g.prdOccPath=l),e.is(m,"string")&&(g.xmlLinkAuthoringConfig=m),u={url:"dsmfg/private/V0/invoke/MfgItem/managePartialScopeAndImplementLink",method:"POST",headers:i.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(g),onFailure:p,onTimeout:p,onCancel:p,onComplete:function(t){var i=o.getConnectionParser(),s={stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[],deletedConnections:[],onComplete:function(t){var n=[];e.is(t.instancesAndReferences,"array")&&t.instancesAndReferences.length>0&&(t.instancesAndReferences.forEach(function(e){e.isReference()&&n.push(e)}),n.length>0&&a.getMediator().notify("referenceChanged",[n])),e.is(t.connections,"array")&&t.connections.length>0&&a.getMediator().notify("connectionAdded",[t.connections]),e.is(d.onComplete,"function")&&(e.is(d.isCreatePartialScopeLink)&&d.isCreatePartialScopeLink?d.onComplete("ImplementPlugin.CreatePartialScope.Success",t):e.is(d.isDeletePartialScopeLink)&&d.isDeletePartialScopeLink?d.onComplete("ImplementPlugin.DeletePartialScope.Success",t):e.is(d.isStretchPartialScopeLink)&&d.isStretchPartialScopeLink?d.onComplete("ImplementPlugin.StretchPartialScope.Success",t):e.is(d.isSwitchToPartialScopeLink)&&d.isSwitchToPartialScopeLink?d.onComplete("ImplementPlugin.SwitchPartialScope.Success",t):d.onComplete())}};e.is(t)?(e.is(t.instancesAndReferences,"array")&&t.instancesAndReferences.length>0&&t.instancesAndReferences.forEach(function(t){var n=e.is(t.attributesValue)?t.attributesValue:t;Object.prototype.hasOwnProperty.call(n,"isInstanceOf")?s.stackedInstances.push(t):s.stackedReferences.push(t)}),e.is(t.connections,"array")&&t.connections.length>0&&t.connections.forEach(function(e){i.parse(e,s)}),e.is(t.deletedObjects,"array")&&t.deletedObjects.length>0&&(s.deletedObjects=s.deletedObjects.concat(t.deletedObjects)),e.is(t.deletedConnections,"array")&&t.deletedConnections.length>0&&(s.deletedConnections=s.deletedConnections.concat(t.deletedConnections)),n.addToCollections(s)):p()}},i.webServiceRequest(u)}})}}),define("DS/DELPPWViewPlugins/UXComponentsPlugin/UXComponentsPlugin",["UWA/Core","UWA/Element","UWA/Utils","DS/Windows/Panel","DS/Windows/Dialog","DS/Tree/Tree","DS/Controls/Button","DS/Controls/ButtonGroup","DS/Controls/Expander","DS/Controls/LineEditor","DS/Controls/Loader","DS/Controls/ModalContainer","DS/Controls/Tab","DS/Tree/TreeListView","DS/PPWTreeNodeModel/PPWTreeNodeModel","DS/PPWTreeDocument/PPWTreeDocument","DS/Controls/TooltipModel","DS/CoreEvents/Events","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/Controls/Editor","DS/Controls/DatePicker","DS/UIBehaviors/ContextualMenuManager","DS/ApplicationFrame/FrameWindowsManager","DS/ApplicationFrame/CommandsManager","DS/etree/syncwidget","DS/etree/syncviewsFactory","DS/Controls/ProgressBar","DS/Controls/Accordeon","DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsEditor","DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsSpinEditor","DS/DELPPWViewPlugins/UXComponentsPlugin/ExtendedCustomDialog","DS/DELPPWViewPlugins/UXComponentsPlugin/PPRDataGridView","DS/DELPPWViewPlugins/UXComponentsPlugin/RichTextEditor","DS/DELPPWViewPlugins/UXComponentsPlugin/InclusiveLineEditor","DS/egraph/core","DS/egraph/views","DS/egraph/iact","DS/egraph/utils","DS/TreeModel/DataModelSet","DS/Controls/Breadcrumb","DS/Controls/SelectionChipsEditor","DS/Menu/Menu","DS/Tweakers/GeneratedToolbar","css!egraph/views","css!DS/egraph/views_default.css","css!etree/syncviews","css!DS/etree/overviewui.css"],function(e,t,n,i,o,s,r,a,l,c,u,d,g,m,f,p,h,P,C,v,S,I,y,b,w,D,L,E,k,V,R,x,A,N,M,T,O,F,U,_,W,B,j,H,X){"use strict";return function(){return{name:"UXComponentsPlugin",getComponent:function(n){var G;switch(n){case"WUXDockAreaEnum":G=WUXDockAreaEnum;break;case"Element":G=t;break;case"Panel":G=i;break;case"Dialog":G=o;break;case"CustomDialog":G=A;break;case"Button":G=r;break;case"ButtonGroup":G=a;break;case"Expander":G=l;break;case"LineEditor":G=c;break;case"TooltipModel":G=h;break;case"TreeListView":G=m;break;case"TreeNodeModel":G=f;break;case"TreeDocument":G=p;break;case"DataGridView":G=N;break;case"Tree":G=s;break;case"WUXEvent":G=P;break;case"Segmented":G=e.Controls.Segmented;break;case"ContextualMenuManager":G=b;break;case"WUXFrameWindowsManager":G=w;break;case"WUXCommandsManager":G=D;break;case"WUXLoader":G=u;break;case"Toggle":G=C;break;case"ComboBox":G=v;break;case"AutoComplete":G=S;break;case"Editor":G=I;break;case"DatePicker":G=y;break;case"ETree":G=L;break;case"ETreeViewsFactory":G=E;break;case"ProgressBar":G=k;break;case"Accordeon":G=V;break;case"UnitsEditor":G=R;break;case"UnitsSpinEditor":G=x;break;case"WUXTab":G=g;break;case"EGraphCore":G=O;break;case"EGraphViews":G=F;break;case"EGraphIact":G=U;break;case"EGraphUtils":G=_;break;case"DataModelSet":G=W;break;case"RichTextEditor":G=M;break;case"Breadcrumb":G=B;break;case"ModalContainer":G=d;break;case"InclusiveLineEditor":G=T;break;case"Array":G=null;break;case"Chips":G=j;break;case"Menu":G=H;break;case"GeneratedToolbar":G=X}return G}}}}),define("DS/DELPPWViewPlugins/ImplementPlugin/ProcessImplementPlugin",["UWA/Core","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWViewPlugins/ImplementPlugin/ImplementBase","text!DS/DELPPWViewPlugins/assets/RolesOnImplementLink.json","text!DS/DELPPWViewPlugins/assets/LanguagesConfig.json"],function(e,t,n,i,o){"use strict";return function(s){const r="ProcessImplementLink",a="ProcessImplementLinkOcc",l="PartialProcessImplementLink";var c,u,d,g,m,f,p,h,P,C,v,S,I,y,b,w,D,L,E,k,V,R,x,A,N,M=[];return S=function(){return e.is(c)||(c=s.getPlugins("DicoPlugin").instance),c},I=function(){return e.is(u)||(u=s.getPlugins("DatabasePlugin").instance),u},y=function(){return e.is(d)||(d=s.getPlugins("ResourcePlugin").instance),d},b=function(){return e.is(g)||(g=s.getPlugins("WebServicePlugin").instance),g},C=function(t){var n,i=[],o=S();return Object.keys(p).forEach(function(n){o.isAKindOf(t,n)&&(i=p[n],i=e.clone(i))}),n=V(i),i.concat(n)},v=function(e,t){var n,i=S(),o=null;return Object.keys(h).forEach(function(s){i.isAKindOf(e,s)&&(n=h[s],Object.keys(n).forEach(function(e){i.isAKindOf(t,e)&&(o=h[s][e])}))}),o},w=function(e){let t=e.from,n=e.to,i=t[t.length-1],o=n[n.length-1],s=I(),r=s.getImpacted(i,!1,{relationTypes:["ProcessImplementLinkOcc"]}).filter(function(e){var t=e.get("to");return t[t.length-1]===o});r.length>0&&s.removeConnection(r[0].get("PID"))},D=function(e,t){e[e.length-1];var n,i=t[t.length-1],o=I(),s=S(),r=!1;return(this.validateIfScoped(e,t)||this.validateIfPartialScoped(e,t))&&(r=!this.getImplLinksOfImplementing(e).some(function(e){return e.getAttribute("to")===i})),n=o.getReferenceModel(i),s.isAKindOf(n,"DELServiceSpareItemReference")&&(r=!1),r},L=function(e){b().webServiceRequest({url:"delmia/param/configuration/getParameters?domainID=DigitalManufacturing&familyID=OOTBRolesLayoutView&paramID=OOTBRolesLayoutTreeListView&argID=OOTBRolesLayoutTreeListViewArg",method:"GET",onComplete:function(e){var t,n,i=y(),o=P[widget.lang],s=[];!(M=e)||!M.length>0||M.forEach(e=>{for(t in e)if(o.includes(t)){n=String(e[t]);break}s["Role."+e.rolecusto]=n||String(e.rolecusto),i.addNlsJSON(s,!0),n=null})},onFailure:function(e){console.log("Failure to fetch custom roles")}})},V=function(t){var n,i,o=[];if(e.is(t))for(n of Array.isArray(t)?t:[t])(i=k(n)).length>0&&o.push(...i);return o},k=function(t){var n=[];return e.is(t)&&(t=t.toString(),n=M.filter(e=>e.roleootb===t&&e.rolecusto!==t).map(e=>e.rolecusto)),n},E=function(t){var n,i;if(e.is(t))for(i of(n=t.toString(),M))if(i.rolecusto===R(n))return i.roleootb;return t},R=function(t){var n,i=y();if(e.is(t))for(n of(t=t.toString(),M))if(i.getNLSValue("Role."+n.rolecusto)===t)return n.rolecusto;return t},x=function(t){var n,i,o=[{fullName:"DELFmiContQuantity_Area.V_ContQuantity"},{fullName:"DELFmiContQuantity_Length.V_ContQuantity"},{fullName:"DELFmiContQuantity_Mass.V_ContQuantity"},{fullName:"DELFmiContQuantity_Volume.V_ContQuantity"},{fullName:"DELLmiUsageQuantity_Ratio.V_UsageQuantityRatio"}];for(let s=0;s<o.length;s++)if(n=o[s].fullName,i=t.get(n),e.is(i)&&""!==i){let e=N(o[s].fullName);return{magnitude:e.Magnitude,value:i,fullName:e.FullName}}},A=function(t){var n=I(),i=e.is(t,"array")?t[t.length-1]:t,o=n.getReferenceModel(i).get("DELFmiMagnitudeExt.V_DimensionType");if(!e.is(o)){let t,s=n.getInstance(i);e.is(s)&&(t=x(s),o=e.is(t)?t.magnitude:null)}return o},N=function(e){return S().getAttributeInfo(e)},m=new n(s.getLogger(),r,l,a),e.extend(m,{name:"ProcessImplementPlugin",onStart:function(){f=e.Json.decode(i),P=e.Json.decode(o),h=f.DefaultRoles,p=f.Roles,L()},isImplementLinkValidForOccPath:function(n,i,o){var s,r,a,l,c=!1,u=!1,d=!1;return s=this.getPathToScope(o),(e.equals(n,s)||e.equals(i,s))&&(c=!0),r=this.getPathToPartialScope(o),(e.equals(n,r)||e.equals(i,r))&&(u=!0),a=t.getReferenceModel(n),l=this.getReferencePID(o),e.is(a)&&e.equals(a._attributes.type,"DELLmiHeaderOperationReference")&&this.isPartialScoped(a.id)&&e.equals(a.id,l)&&(d=!0),c||u||d},canCreateScopeLink:function(n){var i,o,s,a,l,c,u,d,g,m,f=r,p=y(),h=!0,P={};return o=n.fromSideRefPID,s=n.toSideRefPID,a=n.fromSideAbsPath,l=n.toSideAbsPath,this.isScoped(o)&&(i=this.getScopeLinks(o),e.is(i,"array")&&i.length>0&&i.some(function(n){var i=n.get("from"),r=n.get("to");return t.isInstance(r)&&(r=t.getInstanceFromCollection(r).get("isInstanceOf")),e.equals(i,o)&&e.equals(r,s)})&&(h=!1,d=t.getReferenceModel(o),m=p.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:d.get("PLMEntity.V_Name")}))),(h&&e.is(a,"array")&&a.length>0||e.is(l,"array")&&l.length>0)&&(g=this.hasCrossScope(o,s,a,l),e.is(g)&&g.hasCrossScope&&(g.isParentCrossScope?m=p.getNLSValue("ImplementBehavior.Validation.ParentCrossScopeExists",{implementingRef:g.implementingName,implementedRef:g.implementedName}):g.isChildCrossScope&&(m=p.getNLSValue("ImplementBehavior.Validation.ChildCrossScopeExists",{implementingRef:g.implementingName,implementedRef:g.implementedName})),h=!1)),e.is(n.fromSideInstPID)&&e.is(n.toSideInstPID)?(c=n.fromSideInstPID,u=n.toSideInstPID):(c=n.fromSideRefPID,u=n.toSideRefPID),P={canCreateLink:h,data:{type:f,implementingPID:c,implementedPID:u,implementingAbsPath:n.fromSideAbsPath,implementedAbsPath:n.toSideAbsPath,displayText:p.getNLSValue(f,null,"CreateLink"),buttonIdentifier:p.getNLSValue(f,null,"CreateLink")}},h||(P.errorMessage=m),P},getImplLinksOfImplementing:function(t){var n,i,o=[];return Array.isArray(t)&&t.length>0?(i=this.getPathToScope(t),n=this.filterImplementLinks(function(t,n){return e.equals(i,t)}),Array.isArray(n)&&(o=n)):o=null,o},getScopeLinksOfImplementing:function(e,t){var n=m.getReferencePID(e),i=[];return n&&m.getScopeLinks(n,r,t).forEach(e=>{e.getAttribute("to")!==n&&i.push(e)}),i},getPartialScopeLinksOfImplementing:function(e,t){var n=m.getReferencePID(e),i=[];return n&&m.getPartialScopeLinks(n,l,t).forEach(e=>{e.getAttribute("to")!==n&&i.push(e)}),i},canCreatePartialScopeLink:function(n){var i,o,s,r,a,c,u,d=m.getReferencePID(n),g=S(),f=I(),p=y(),h={errorMessage:null,linksData:[]};return a=f.getReference(d),g.isAKindOf(a,"DELLmiHeaderOperationReference")?(i=this.findInstanceWhoseParentIsScoped(n),0===(o=e.is(i,"object")?i.scopeLinks:[]).length?h.errorMessage=p.getNLSValue("LinkBehavior.canCreatePartialScopeLinkError.NoScopeOnParent"):(c=o[0].get("from"),u=f.getReference(c),g.isAKindOf(u,"DELLmiWorkPlanSystemReference")||g.isAKindOf(u,"DELLmiServiceWorkPlanSystemReference")?((r=this.getImplLinksOfImplementing(n)).length>0&&(h.implLinks=r),o.forEach(function(e){t.isInstance(e.get("to"))?(s=f.getReferenceIdFromInstance(e.get("to")),f.hasConnection({from:d,to:e.get("to"),type:l})&&(h.errorMessage=p.getNLSValue("LinkBehavior.canCreatePartialScopeLinkError.LinkAlreadyExists"))):s=e.get("to"),h.linksData.push({IDFrom:d,IDTo:s,type:l,implementingAbsPath:n})}),h.linksData=h.linksData.filter(function(e){var t,n,i,o,s,r,a,c;return!0===(i=(t=e).IDFrom,o=t.IDTo,t.implementingAbsPath,s=I(),r=y(),c={},(a=!0)&&s.hasConnection({from:i,to:o,type:l})&&(a=!1,n=r.getNLSValue("LinkBehavior.canCreatePartialScopeLinkError.LinkAlreadyExists")),c.canCreateLink=a,a?(delete t.implementingAbsPath,c.data=t):c.errorMessage=n,c).canCreateLink}),0===h.linksData.length&&(h.errorMessage=p.getNLSValue("ImplementBehavior.CreateMGAPartialScopeLink.MatchedWithFirstUpperScope",{implementinRef:a.get("PLMEntity.V_Name")}))):h.errorMessage=p.getNLSValue("LinkBehavior.canCreatePartialScopeLinkError.HasImplemenLink"))):h.errorMessage=p.getNLSValue("LinkBehavior.canCreatePartialScopeLinkError.NoHeaderOperation"),h},canCreateImplementLink:function(t){var n,i,o,s,r,l=a,c=I(),u=y(),d={},g={};return i=this.isPartialScoped(t.fromSideAbsPath)?[t.fromSideRefPID]:t.fromSideAbsPath,o=t.toSideAbsPath,n=D.call(this,i,o),g={canCreateLink:n,data:[]},n&&(d={type:l,implementingAbsPath:i,implementedAbsPath:o,displayText:u.getNLSValue(l,null,"CreateLink"),buttonIdentifier:u.getNLSValue(l,null,"CreateLink")},d=e.merge(d,e.clone(t)),g.data.push(d),s=o[o.length-1],r=c.getReferenceModel(s).get("type"),C(r).forEach(function(n){var s,r,a,c;s=u.getNLSValue("Role."+n),r=u.getNLSValue(l+".roles",{role:s},"CreateLink"),M.forEach(function(e){e.rolecusto===n&&(c=e.roleootb)}),a={type:l,implementingAbsPath:i,implementedAbsPath:o,displayText:r,buttonIdentifier:r,connectionParams:{role:n,roleootb:c||n}},a=e.merge(a,e.clone(t)),g.data.push(a)})),g},hasPartialScopeLinks:function(e){var t=e.get("PID"),n=[];return S().isAKindOf(e,"DELLmiHeaderOperationReference")&&(n=this.getPartialScopeLinksOfImplementing(t)),n.length>0},createHOPMfgItemPartialScopeLink:function(n,i){var o,s,r=y(),l=I(),c=b(),u={info:[]},d=this,g=[];n.forEach(function(e){var t=l.getReference(e.IDFrom).get("PLMEntity.V_Name"),n=l.getReference(e.IDTo).get("PLMEntity.V_Name");u.info.push(t+" To "+n)}),l.getParentInstancesFromCollection(n[0].IDFrom).forEach(e=>{var t=this.getPathToScope([e.id]);g.push(t)}),s={connectionParams:n,instancesList:g},o={url:"dsmfg/private/V0/MfgElement/connection/CreateMGAPartialScopeLink",method:"POST",data:e.Json.encode(s),context:d,onComplete:function(n){var o=l.getConnectionParser(),s={stackedReferences:[],stackedConnections:[]};e.is(n.connections)&&n.connections.forEach(function(e){o.parse(e,s)}),s.stackedConnections.forEach(function(e){e.type===a&&w.call(d,e)}),e.is(n.deletedConnections)&&n.deletedConnections.forEach(function(e){t.removeConnection(e)}),l.addToCollections({stackedConnections:s.stackedConnections,silentMode:!1,onComplete:function(){var t=r.getNLSValue("ImplementBehavior.CreateMGAPartialScopeLink.Success",{info:u.info.join()});e.is(i.onSuccess,"function")&&i.onSuccess(t)}})},onFailure:function(){var t=r.getNLSValue("ImplementBehavior.CreateMGAPartialScopeLink.Failed",{info:u.info.join()});e.is(i.onFailure,"function")&&i.onFailure(t)}},c.webServiceRequest(o)},setUsagePoints:function(t,n,i){var o,s=b(),l=I();n===r?o="dsmfg/private/V0/MfgElement/connection/serviceProcess/createUsagePoints":n===a&&(o="dsmfg/private/V0/MfgElement/connection/serviceProcess/assignImplementLinkToUsagePoints"),s.webServiceRequest({url:o,method:"POST",data:e.Json.encode(t),onComplete:function(o){var s=!1,c=l.getConnection(t.connPID),u=l.getConnection(t.implementLinkId),d=l.getConnectionParser(),g={stackedReferences:[],stackedConnections:[]};e.is(o.connections)&&o.connections.length>0&&(n===a&&e.is(u)&&(o.connections[0].attributesValue.type=n),o.connections.forEach(function(e){d.parse(e,g)}),g.stackedConnections.forEach(function(t){e.is(t.usagePoint)?(s=!0,n===r&&e.is(c)&&e.is(c.get("usagePoint"))&&t.usagePoint.push(...c.get("usagePoint"))):s=!1}),s?l.addToCollections({stackedConnections:g.stackedConnections,silentMode:!1,onComplete:function(){e.is(i.onSuccess,"function")&&i.onSuccess()},onFailure:function(t,n){e.is(i.onSuccess,"function")&&i.onFailure(n)}}):e.is(i.onSuccess,"function")&&i.onFailure("no usage point to set"))},onFailure:function(t,n){e.is(i.onSuccess,"function")&&i.onFailure(n)}})},deleteUsagePoint:function(t,n){var i=b(),o=I();i.webServiceRequest({url:"dsmfg/private/V0/MfgElement/connection/serviceProcess/deleteUsagePoint",method:"DELETE",data:e.Json.encode(t),onComplete:function(i){var s,r,a=o.getConnection(t.pid);e.is(i.deletedConnections)&&i.deletedConnections.length>0&&i.deletedConnections.forEach(function(e){o.removeConnection(e)}),e.is(a)&&(-1!==(r=a.get("usagePoint").indexOf(t.pathOfInstanceIds[0]))&&a.get("usagePoint").splice(r,1),s={data:a,onComplete:function(){e.is(n.onSuccess,"function")&&n.onSuccess()},onFailure:function(t,i){e.is(n.onSuccess,"function")&&n.onFailure(i)}},o.updateConnection(t.pid,s))},onFailure:function(t,i){e.is(n.onSuccess,"function")&&n.onFailure(i)}})},unassignImplementLinkFromUsagePoints:function(t,n){var i=b(),o=I();i.webServiceRequest({url:"dsmfg/private/V0/MfgElement/connection/serviceProcess/unassignImplementLinkFromUsagePoints",method:"DELETE",data:e.Json.encode(t),onComplete:function(i){var s=o.getConnection(t.implementLinkId);i.isAssignmentRemoved&&e.is(s)&&e.is(s.get("usagePoint"))&&(s.get("usagePoint").splice(0,1),e.is(n.onSuccess,"function")&&n.onSuccess())},onFailure:function(t,i){e.is(n.onSuccess,"function")&&n.onFailure(i)}})},switchScope:function(t,n,i){var o=I();b().webServiceRequest({url:"dsmfg/private/V0/invoke/MfgProcess/switchScope",method:"POST",data:e.Json.encode(t),onComplete:function(s){o.setScope(s.connections[0],n,t.isRefInstRefScope),e.is(i.onSuccess,"function")&&i.onSuccess()},onFailure:function(t,n){e.is(i.onSuccess,"function")&&i.onFailure(n)}})},validateIfScoped:function(n,i){var o,s,a,l,c=!1,u=S();return e.is(n,"array")&&n.length>0?(o=t.getInstanceFromCollection(n[n.length-1]),e.is(o)&&(a=o.get("isInstanceOf"),s=this.getScopeLinks(a),e.is(s,"array")&&0===s.length&&(a=this.getScopedParent(n)))):t.isReference(n)&&(a=n),l=t.getReferenceModel(a),e.is(i,"array")&&i.length>0&&!u.isAKindOf(l,"DELLmiHeaderWorkPlanReference")&&!u.isAKindOf(l,"DELLmiServiceHeaderWorkPlanReference")&&(c=i.slice().reverse().some(function(n){var i=!1,o=t.getInstanceFromCollection(n);return e.is(o)&&(i=t.hasConnection({to:o.get("isAggregatedBy"),from:a,type:r})),i})),c},validateIfPartialScoped:function(n,i){var o,s,r,a,c=!1;return e.is(n,"array")&&n.length>0?(o=t.getInstanceFromCollection(n[n.length-1]),e.is(o)?(r=o.get("isInstanceOf"),s=this.getPartialScopeLinks(r),e.is(s,"array")&&0===s.length&&(r=this.getPartialScopedParent(n))):r=n[0]):t.isReference(n)&&(r=n),a=t.getReferenceModel(r),e.is(a)&&e.is(i,"array")&&i.length>0&&(c=i.slice().reverse().some(function(n){var i=!1,o=t.getInstanceFromCollection(n);return e.is(o)&&(i=t.hasConnection({to:o.get("isAggregatedBy"),from:r,type:l})),i})),c},getPathsToScope:function(n,i){var o,s,r=null,a=null,l=null,c=null,u={},d=!1,g=function(e){var t=null;return e.some(function(e){var n=!1,o=s.lastIndexOf(e.get("to"));return o>-1&&(t=i.slice(o),n=!0),n}),t};return s=[],i.forEach(function(e){var n=t.getInstanceFromCollection(e);s.push(n.get("isAggregatedBy"))}),o=this.findInstanceWhoseParentIsPartialScoped(n),e.is(o)?(l=n.slice(o.absPathIndex),(c=g(o.scopeLinks))&&(u={implementingPathToScope:l,implementedPathToScope:c}),d=!0):1===n.length&&this.isPartialScoped(n[0])&&(l=n,(c=g(o=this.getPartialScopeLinks(n[0])))&&(u={implementingPathToScope:n,implementedPathToScope:c}),d=!0),d||(o=this.findInstanceWhoseParentIsScoped(n),e.is(o)&&(r=n.slice(o.absPathIndex),(a=g(o.scopeLinks))&&(u={implementingPathToScope:r,implementedPathToScope:a}))),u},getUsagePointsForTargetScopes:function(t){var n=[];return t.forEach(function(t){t.get("type")===r&&e.is(t.get("usagePoint"))&&t.get("usagePoint").length>0&&n.push(...t.get("usagePoint"))}),n},getRolesForTargrtObject:function(e){var t=I(),n=t.getConnection(e).get("to"),i=n[n.length-1],o=t.getReferenceModel(i).get("type");return C(o)},getRoleFromModelOrComputed:function(t){var n,i,o,s,r,a,l,c,u,d=I(),g=y(),m=d.getConnection(t),f=m.get("PLMEntity.V_usage");return e.is(f)&&"NULL"!==f?u=g.getNLSValue("Role."+f):(n=m.get("from"),i=m.get("to"),o=Array.isArray(n)?n[n.length-1]:n,s=Array.isArray(i)?i[i.length-1]:i,r=d.getReferenceModel(o),a=d.getReferenceModel(s),l=r.get("type"),c=a.get("type"),f=v(l,c),u="*"+g.getNLSValue("Role."+f)),{usage:f,nlsText:u}},getConnectedObjects:function(t,n,i,o){var s=[];return e.is(o)&&(o=Array.isArray(o)?o:[o]).forEach(function(o){var c,u,d,g,m,f=o.get("type"),p=o.get("from"),h=o.get("to");switch(f){case r:case l:m=p===t?h:p;break;case a:c=p[p.length-1],u=p.toString(),d=h[h.length-1],g=h.toString(),i=Array.isArray(i)?i.toString():i,n===c&&i.indexOf(u)>-1?m=h:n===d&&i.indexOf(g)>-1&&(m=p);break;default:console.log("Invalid Type")}e.is(m)&&s.push(m)}),s},addCustoRoleToLinkData:function(e){var t;if(y(),Array.isArray(M))for(t of M)if(t.rolecusto===e["MfgProductionPlanning.V_usage"])return e["MfgProductionPlanning.V_usage"]=t.rolecusto,e["ImplementLinkUsageFamily.V_ImplLinkUsage"]=t.roleootb,e;return e["ImplementLinkUsageFamily.V_ImplLinkUsage"]=e["MfgProductionPlanning.V_usage"],e},getOotbRoleFromCustoRole:function(e){return E(e)},getCustoRoleFromNLS:function(e){return R(e)},getQuantityFromModel:function(t){var n,i=y(),o=I().getConnection(t),s=x(o);return e.is(s)?(n=widget.getPreference(s.magnitude),s.value+" "+(e.is(n)?i.getNLSForUnit(s.magnitude,n.value):i.getNLSForUnit(s.magnitude))):null},getDimensionTypesForQty:function(t){var n=y(),i=I().getConnection(t),o=A(i.get("to"));return[{Name:n.getNLSValue("ImplementBehavior.ImplementLink.Magnitude"),NLS:n.getNLSValue("ImplementBehavior.ImplementLink.Magnitude"),value:e.is(o)?o.toUpperCase():o},{Name:n.getNLSValue("ImplementBehavior.ImplementLink.Ratio"),NLS:n.getNLSValue("ImplementBehavior.ImplementLink.Ratio")}]},getSelectedDimensionTypeFromConnection:function(t){var n,i,o,s=I().getConnection(t);return n=x(s),e.is(n)?i=n.magnitude:(o=A(s.get("to")),i=e.is(o)?o.toUpperCase():o),i},validateQuantityToEdit:function(t,n){var i,o=I().getConnection(t),s=x(o);return i=Object.keys(n).find(e=>e.includes("DELFmiContQuantity")||e.includes("DELLmiUsageQuantity")),e.is(s)&&(e.is(i)&&""===n[i]?n[i]="0":e.is(i)||(n[s.fullName]="0")),e.is(i)&&(n[i]=""!==n[i]?n[i].replaceAll(",","."):"0"),n},getDimensionOfItem:function(e){return A(e)}})}}),define("DS/DELPPWViewPlugins/TreeViewPlugin/ViewPreferencesUI",["UWA/Core","DS/Utilities/Utils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWModelServices/BehaviorUtil","DS/DELPPWModelServices/ModelUtils","DS/DELPPWViewPlugins/TreeViewPlugin/RootsStoreUI","DS/DELPPWViewPlugins/MoreAttributesWizard","DS/CoreEvents/Events","DS/DELPPWWebServices/WebserviceUtils","DS/DocumentManagement/DocumentManagement","DS/ZipJS2/ZipJS2","DS/Controls/FilePicker","DS/Controls/ModalContainer","DS/Controls/SelectionChips"],function(e,t,n,i,o,s,r,a,l,c,u,d,g,m){"use strict";return function(f,p,h,P,C,v){var S,I,y,b,w,D,L,E,k,V,R,x,A,N,M,T,O=[],F=h.getComponent("Element"),U=h.getComponent("Dialog"),_=h.getComponent("Button"),W=h.getComponent("WUXTab"),B=h.getComponent("TreeListView"),j=h.getComponent("TreeNodeModel"),H=h.getComponent("Editor"),X=h.getComponent("Toggle"),G={},z={},J=widget.getValue("isCustoParametersSetLocked");return w=function(t){I=new F("div",{class:"ViewPreferencesUI-Content"}),(S=new U({domId:"ViewPreferencesUI-Dialog",immersiveFrame:p.getImmersiveFrame(),modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,title:n.getNLSValue("ViewPreferencesUI.Header"),content:I,buttons:{Ok:new _({domId:"ViewPreferencesUI-Dialog-Ok",className:"ok primary",label:n.getNLSValue("ViewPreferencesUI.Ok"),emphasize:"primary",onClick:function(){var n=N();S.close(),e.is(t,"function")&&t(n)}}),Cancel:new _({domId:"ViewPreferencesUI-Dialog-Cancel",className:"cancel",label:n.getNLSValue("ViewPreferencesUI.Cancel"),onClick:function(){S.close()}}),Apply:new _({domId:"ViewPreferencesUI-Dialog-Apply",className:"moreAttr",label:n.getNLSValue("ViewPreferencesUI.MoreAttributes"),onClick:function(){var n=N();e.is(t,"function")&&t(n),A(n)},visibleFlag:!J})}})).close=function(){this.destroy(),I=null,b=null,y=null}},k=function(t,n,i,o,s,r,a){var l,c,u,d,g=[];return a&&t.selectedAttributes.forEach(function(e){e.attrIsSelected&&!e.attrIsInXML?n.push({attribute:e.attrInfoArray,dataIndex:e.dataIndex,dicoType:e.attrNature,display:"true",minWidth:"50"}):!e.attrIsSelected&&e.attrIsInXML&&g.push(e.attrName)}),l=(l=(l='<?xml version="1.0" encoding="UTF-8"?>\n')+'<Config name="'+i+'" version="2.0" xmlns="DS_DELPPWConfiguration" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="DS_DELPPWConfiguration ../xsd/ColumnConfig.xsd" Title="'+o+'" Description="'+s+'">\n')+'<Label dataIndex="'+r.dataIndex+'" entity="'+r.entity+'" dicoType="'+r.dicoType+'"/>\n',l+="<Columns>\n",n.forEach(function(t){if(e.is(t.attribute))if(e.is(t.display)?d=t.display:e.is(t.colVisibility)&&(d=t.colVisibility.display),e.is(t.minWidth)&&(u=t.minWidth),Array.isArray(t.attribute.dicoType)&&-1===g.indexOf(t.attribute.dataIndex)){for(l=l+'<Column display="'+d+'" minWidth="'+u+'">\n',c=0;c<t.dicoType.length;c++)l=l+'<Attribute name="'+t.attribute.dataIndex+'"  entity="'+t.attribute.entity+'"  dicoType="'+t.attribute.dicoType[c]+'"/>\n';l+="</Column>\n"}else Array.isArray(t.attribute)?(l=l+'<Column display="'+d+'" minWidth="'+u+'">\n',t.attribute.forEach(function(e){l=l+'<Attribute name="'+e.dataIndex+'"  entity="'+e.entity+'"  dicoType="'+e.dicoType+'"/>\n'}),l+="</Column>\n"):e.is(t.attribute.dataIndex)&&-1===g.indexOf(t.attribute.dataIndex)&&(l=l+'<Column dataIndex="'+t.attribute.dataIndex+'"  ',e.is(t.attribute.entity)&&(l=l+'entity="'+t.attribute.entity+'" '),e.is(t.displayType)&&(l=l+'displayType="'+t.displayType+'" '),l=l+'display="'+d+'" minWidth="'+u+'" ',e.is(t.attribute.dicoType)?l=l+'dicoType="'+t.attribute.dicoType+'"/>\n':l+="/>\n")}),l+="</Columns>\n",l+="</Config>\n\n"},x=function(t,i){var s,r,a,m,h,P,C,v,S,I;h=function(){var t,i,o,s,r,a,l;return t=new F("div",{class:"dialogContent",styles:{width:"100%",height:"100%"}}),i=new F("div",{class:"divTitleContent",styles:{display:"flex",width:"100%",height:"50%"}}),new e.Element("h6",{class:"wux-textElement",text:n.getNLSValue("ViewPreferencesUI.UserPreferenceDocTitle"),styles:{width:"50%"}}).inject(i),m=new H({value:"",selectAllOnFocus:!0,visibleFlag:!0,autoCommitFlag:!0,placeholder:n.getNLSValue("FormUI.Placeholder.EnterAText"),styles:{width:"75%"}}).inject(i),i.inject(t),o=new F("div",{class:"divMultiLangContent",styles:{display:"flex",width:"100%",height:"50%"}}),new F("h6",{class:"wux-textElement",text:n.getNLSValue("ViewPreferencesUI.UserPreferenceMultiLangTitle"),styles:{width:"75%"}}).inject(o),(s=new d({attributes:{id:"ImportJsonFile",title:"Import JSON file for Multilingual parameter name support",accept:".json"},placeholder:"Select a file",className:"CustomParameterDialog json-file-input"}).inject(o)).addEventListener("change",e=>{r=s.value,(a=new FileReader).readAsText(r),a.onload=function(){l=a.result,S=JSON.parse(l)}}),o.inject(t),t},P=function(e){var t=[];return O.forEach(function(n){var i;i=new File([new Blob([n.xml],{type:"text/xml"})],n.name,{type:"application/json"}),t.push(e.add(i.name,new u.BlobReader(i),{password:null,onstart:function(){},onprogress:function(){}}))}),t},C=function(t,n){var i,s,r=l.get3DSpaceUrl().slice(0,-1),a=l.getSecurityContext(),d=o.getWidgetTrigram()+"ParametersViewColumnConfig";f.getLogger().debug("ViewPreferencesUI.js : OnCreateDocument SecurityContext : "+a+" has been send to ENOVIA with DocumentManagement.createDocument"),c.createDocument({},{tenantUrl:r,additionalHeaders:{SecurityContext:a},csrf:{name:"ENO_CSRF_TOKEN",value:l.getCSRFToken("3DSpace")},onComplete:function(o){s=e.is(n)&&""!==n?new File([new Blob(['{"title":"'+n+'"}'],{type:"application/json"})],"meta_"+widget.lang+".json",{type:"application/json"}):new File([new Blob(['{"title":"'+o.data[0].id+'"}'],{type:"application/json"})],"meta_"+widget.lang+".json",{type:"application/json"}),t.add(s.name,new u.BlobReader(s),{password:null,onstart:function(){},onprogress:function(){}}).then(function(){var s=P(t);Promise.all(s).then(function(){t.close().then(function(t){i=new File([t],"xmlparams.zip",{type:"application/zip"}),c.addFileToDocument({id:o.data[0].id,fileInfo:{file:i}},{tenantUrl:r,additionalHeaders:{SecurityContext:a},csrf:{name:"ENO_CSRF_TOKEN",value:l.getCSRFToken("3DSpace")},onComplete:function(){f.getLogger().debug("ViewPreferencesUI.js : modifyDocument mySecurityContext : "+a),c.modifyDocument({id:o.data[0].id,title:d+"/"+o.data[0].id},{tenantUrl:r,additionalHeaders:{SecurityContext:a},csrf:{name:"ENO_CSRF_TOKEN",value:l.getCSRFToken("3DSpace")},onComplete:function(){e.is(n)&&""!==n?widget.setValue("custoParametersSet",n):widget.setValue("custoParametersSet",o.data[0].id),widget.setValue("isRestoreAutomaticOn",!0),location.reload()},onFailure:function(){T.destroy(),T=null}})},onFailure:function(){T.destroy(),T=null,f.getLogger().warn(self.name,"Document creation failed")}})})})})},onFailure:function(){T.destroy(),T=null,f.getLogger().warn(self.name,"Document creation failed")}})},v=function(t,n,i){var o,s,r,a,d=l.get3DSpaceUrl().slice(0,-1),g=l.getSecurityContext();s=e.is(i)&&""!==i?new File([new Blob(['{"title":"'+i+'"}'],{type:"application/json"})],"meta_"+widget.lang+".json",{type:"application/json"}):new File([new Blob(['{"title":"'+n+'"}'],{type:"application/json"})],"meta_"+widget.lang+".json",{type:"application/json"}),t.add(s.name,new u.BlobReader(s),{password:null,onstart:function(){},onprogress:function(){}}).then(function(){r={tenantUrl:d,additionalHeaders:{SecurityContext:g},csrf:{name:"ENO_CSRF_TOKEN",value:l.getCSRFToken("3DSpace")},onComplete:function(){e.is(i)&&""!==i?widget.setValue("custoParametersSet",i):widget.setValue("custoParametersSet",n),widget.setValue("isRestoreAutomaticOn",!0),location.reload()},onFailure:function(){T.destroy(),T=null}},c.getDocuments([n],{tenantUrl:d,additionalHeaders:{SecurityContext:g},onComplete:function(e){var i=e.data[0].relateddata.files[0].id,s=P(t);Promise.all(s).then(function(){return t.close().then(function(e){o=new File([e],"xmlparams.zip",{type:"application/zip"}),a={id:n,fileInfo:{file:o}},c.deleteFile(n,i,{tenantUrl:d,additionalHeaders:{SecurityContext:g},csrf:{name:"ENO_CSRF_TOKEN",value:l.getCSRFToken("3DSpace")},onComplete:function(){c.addFileToDocument(a,r)}})})}).catch(function(e){f.getLogger().warn(e,"Document deletion failed")})}})})},e.is(a)||(r=h(),(a=new U({domId:"newDialog",immersiveFrame:p.getImmersiveFrame(),modalFlag:!0,visibleFlag:!0,resizableFlag:!1,title:n.getNLSValue("ViewPreferencesUI.UserPreferencesTitle"),content:r,width:295,height:175,buttons:{Ok:new _({domId:"newDialog-Ok",className:"newDialogOk",label:"Ok",onClick:function(){var n,o=[];if(a.destroy(),a=null,r=null,g.createModal(widget.body),s=m.value,e.is(S))for(n in S)Object.hasOwnProperty.call(S,n)&&(I=new File([new Blob(['{"title":"'+S[n]+'"}'],{type:"application/json"})],"meta_"+n+".json",{type:"application/json"}),o.push(t.add(I.name,new u.BlobReader(I),{password:null,onstart:function(){},onprogress:function(){}})));e.is(i)&&""!==i?v(t,i,s):C(t,s)}}),Cancel:new _({domId:"newDialog-Cancel",className:"newDialogcancel",label:"Cancel",onClick:function(){a.close()}})}})).close=function(){a.destroy(),a=null,r=null,T.destroy(),T=null})},V=function(e,t,n,i){var o,s,r,a;const l=f.getService("ConfigService");u.configure({maxWorkers:3}),a=new u.ZipWriter(new u.BlobWriter("application/zip"),{bufferedWrite:!0}),r=l.getConfigurationPID(),o=k(e,n,i.name,"UI Config","Sample configuration file delivered by DS.",{dataIndex:"V_Name",entity:"reference",dicoType:"PLMEntity"},!0),s=new File([new Blob([o],{type:"text/xml"})],i.filename,{type:"text/xml"}),a.add(s.name,new u.BlobReader(s),{password:null,onstart:function(){},onprogress:function(){}}).then(function(){x(a,r)})},R=function(t){var n={name:"",filename:"",selectedTypes:[]},i=[];switch(t){case"MANUFACTURING":n.name="Manufacturing",n.filename="ManufacturingViewColumnConfig.xml",n.selectedTypes=["CreateAssembly","CreateMaterial","Provide","CreateKit","Installation","Transform","Fasten","DELFmiFunctionIdentifiedInstance"];break;case"MBOM":n.name="Manufacturing",n.filename="ProcessColumnConfig.xml",n.selectedTypes=["CreateAssembly","CreateMaterial","Provide","CreateKit","Installation","Transform","Fasten","DELFmiFunctionIdentifiedInstance","ProcessContinuousProvide"];break;case"RESOURCE":n.name="Resource",n.filename="ResourceViewColumnConfig.xml",n.selectedTypes=["Worker","ResourceArea","Transport","Conveyor","Machine","Robot","Storage","Sensor","IndustrialMachine","NCMachine","ToolDevice","Inspect","UserDefined","Organizational","ResourceManufacturingSetup","ControlDevice"];break;case"EBOM":n.name="ProductsAndParts",n.filename="ProductPartColumnConfig.xml",n.selectedTypes=["VPMInstance","VPMReference"];break;case"ROUTINGS":n.name="Routings",n.filename="RoutingsViewColumnConfig.xml",n.selectedTypes=["DELLmiHeaderWorkPlanReference","DELLmiGeneralSystemInstance","DELLmiWorkPlanSystemInstance","DELLmiTransformationSystemInstance","DELLmiTransferSystemInstance","DELLmiStorageSystemInstance","DELLmiServiceWorkPlanSystemInstance","DELWkiSignOffInstance","DELWkiDataCollectInstance","DELWkiInstructionInstance","DELWkiAlertInstance","DELLmiUnLoadingOperationInstance","DELLmiCurveOperationInstance","DELLmiPunctualOperationInstance","DELLmiSourceOperationInstance","DELLmiSinkOperationInstance","DELLmiBufferOperationInstance","DELLmiInterruptOperationInstance","DELLmiTransferOperationInstance","DELLmiRemoveMaterialOperationInstance","DELLmiGeneralOperationInstance","DELLmiLoadingOperationInstance","DELLmiPickingOperationInstance","DELLmiHeaderOperationInstance","DELLmiGeneralSystemReference","DELLmiWorkPlanSystemReference","DELLmiTransformationSystemReference","DELLmiTransferSystemReference","DELLmiStorageSystemReference","DELLmiServiceWorkPlanSystemReference","DELLmiServiceHeaderWorkPlanReference","DELWkiSignOffReference","DELWkiDataCollectReference","DELWkiInstructionReference","DELWkiAlertReference","DELLmiUnLoadingOperationReference","DELLmiCurveOperationReference","DELLmiPunctualOperationReference","DELLmiSourceOperationReference","DELLmiSinkOperationReference","DELLmiBufferOperationReference","DELLmiInterruptOperationReference","DELLmiTransferOperationReference","DELLmiRemoveMaterialOperationReference","DELLmiGeneralOperationReference","DELLmiLoadingOperationReference","DELLmiPickingOperationReference","DELLmiHeaderOperationReference"];break;case"FORMULA":n.name="Formula",n.filename="FormulaViewColumnConfig.xml",n.selectedTypes=["CreateAssembly","CreateMaterial","Provide","DELFmiFunctionIdentifiedInstance","ProcessContinuousCreateMaterial","ProcessContinuousProvide","ContinuousByProduct","DiscreteByProduct","MBOMContinuousPhaseReference","MBOMContinuousInProcessItem","MBOMContinuousPhaseInstance","ProcessInstanceContinuous"];break;case"RECIPE":n.name="Recipe",n.filename="RecipeViewColumnConfig.xml",n.selectedTypes=["DELLmiHeaderWorkPlanReference","DELLmiWorkPlanSystemInstance","DELWkiSignOffInstance","DELWkiDataCollectInstance","DELWkiInstructionInstance","DELWkiAlertInstance","DELLmiGeneralOperationInstance","DELLmiHeaderOperationInstance","DELLmiWorkPlanSystemReference","DELWkiSignOffReference","DELWkiDataCollectReference","DELWkiInstructionReference","DELWkiAlertReference","DELLmiGeneralOperationReference","DELLmiHeaderOperationReference"];break;case"SBOM":n.name="Manufacturing",n.filename="ProcessColumnConfig.xml",n.selectedTypes=["DELServiceAssemblyReference","DELServicePartReference","DELServiceKitReference","DELServiceAttachingItemReference","DELServiceSpareItemReference","DELFmiFunctionIdentifiedInstance","DELContinuousServicePartReference"];break;case"CBOM":n.name="Construction",n.filename="ProcessColumnConfig.xml",n.selectedTypes=["DELConstructionStructure","DELConstructionWorkPackageEach","DELConstructionWorkPackageLength","DELConstructionWorkPackageGroup","DELConstructionWorkPackageArea","DELConstructionWorkElementEach","DELConstructionWorkElementLength","DELConstructionWorkElementArea"];break;default:return n}return n.selectedTypes.forEach(function(e){i.push(v.getTypeHierarchy(e))}),e.is(i,"array")&&(i=i.flat(),n.selectedTypes=i.concat(n.selectedTypes)),n},A=function(t){var i,o,s={modelEvents:a,settingManager:null},l=p.getImmersiveFrame().elements.container.getSize(),c=new F("div",{class:"MoreWizardContainer-Content",styles:{height:l.height-60,width:l.width-20}}),u=[],d=[],g=M[b._properties.value.value[0]],m=[];O=[],o=R(g),m=t[g],M.forEach(function(e){var n,o=R(e);i={dataIndex:"V_Name",entity:"reference",dicoType:"PLMEntity"},e!==g&&(n=k(null,t[e],o.name,"UI Config","Sample configuration file delivered by DS.",i,!1),O.push({name:o.filename,xml:n}))}),m.forEach(function(t){var n,i=[];e.is(t.dataIndex[0])&&e.is(t.dataIndex[1])&&(e.is(t.attribute)&&(e.is(t.attribute,"array")?t.attribute.forEach(function(t){n=e.is(t.entity)?t.dataIndex+"."+t.entity:t.dataIndex,i.push(n)}):(n=e.is(t.attribute.entity)?t.attribute.dataIndex+"."+t.attribute.entity:t.attribute.dataIndex,i.push(n))),e.is(t.displayType)&&(u=u.concat(i)),d=d.concat(i))}),T=new U({domId:"MoreWizard-Dialog",immersiveFrame:p.getImmersiveFrame(),modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,title:n.getNLSValue("ViewPreferencesUI.MoreAttributesWizardTitle"),content:c,buttons:{}}),s.modelEvents.subscribe({event:"MGA/MoreAttributesWizard/selectedAttributes"},function(e){V(e,0,m,o)}),T.close=function(){this.destroy(),T=null},new r({container:c,dialog:T,settingManager:s.settingManager,modelEvents:s.modelEvents,selectedTypes:o.selectedTypes,selectedExtensions:["XCADExtension","XP_VPMReference_Ext","EnterpriseExtension","TlgCast","XP_VPMRepReference_Ext","XP_VPMReference_Ext"],selectedAttributes:[],preSelectedAttributes:d,unSelectableAttributes:u},v)},D=function(){e.is(I)&&(b=new W({reorderFlag:!0,showComboBoxFlag:!0,pinFlag:!1,multiSelFlag:!1,editableFlag:!0,touchMode:!0,displayStyle:["strip"]})).inject(I)},L=function(i){var o,s,r,a={showVerticalLines:!0,isSortable:!1,isDraggable:!0,isEditable:!0,apiVersion:2,height:"auto",defaultCellHeight:40,performances:{resizeDebounceTimeout:200},selection:{cells:!1,canMultiSelect:!1,columnHeaders:!1},resize:{columns:!0,rows:!1},enableActiveUI:!0,enableKeyboardNavigation:!0,shouldDisplayTooltip:function(t){var i,o={longHelp:""};if(!t.isHeader)switch(t.dataIndex){case"colName":case"width":case"minWidth":o.longHelp=t.cellModel.options.value;break;case"colVisibility":i=t.cellModel.options.value,e.is(i.display,"boolean")&&(i.display?o.longHelp=n.getNLSValue("ViewPreferencesUI.ToolTip.ColumnVisible"):o.longHelp=n.getNLSValue("ViewPreferencesUI.ToolTip.ColumnHidden"))}return o},onDropCellDefault:function(e,t){var n,i,o,s,r;if(e.preventDefault(),n=this.unserializeDragAndDropEvent(e)){if(i=n.data["dswebux/x-tree.treenodemodel+number"],o=n.data["dswebux/x-tree.treenodemodel+json"],t.nodeModel._getID()===i)return;o&&o.forEach(function(e){if(s=new j(e),t.cellView){if(r=t.nodeModel,t.manager.getDocument().options.shouldAcceptDrop({parentTreeNodeModel:r,draggedTreeNodeModel:s,dropPosition:t.dropPosition})){if(t.manager.getDocument().prepareUpdate(),t.manager.getDocument().getXSO().get().forEach(function(e){e.remove()}),t.manager.getDocument().pushUpdate(),-1!==t.virtualRowID){switch(t.dropPosition){case"top":r.getParent().insertBefore(s,r);break;default:case"middle":r.getParent().addChild(s,t.virtualRowID);break;case"bottom":r.getParent().addChild(s,r.getParent().getChildren().indexOf(r)+1)}return!1}return!0}return!1}})}}},l=function(e){var t,n=e.cellView.getContent(),i=e.cellModel.getCellContent();if(!e.isHeader)return t=new H({value:i}),n.setContent(t),t},c=t.debounce(function(e){e.nodeModel.options.grid[e.dataIndex]=e.value},100,!0),u=t.debounce(function(e){e.nodeModel.options.grid[e.dataIndex].display=e.cellView.getOption("toggle").checkFlag},100,!0);for(a.columns=[{dataIndex:"tree",isHidden:!0},{text:"",dataIndex:"colPosition",isEditable:!1,width:"5%",isColumnMovable:!1,onCellRequest:function(e){var t=e.cellView.getContent();if(!e.isHeader)return t.setContent(e.nodeModel.getLabel()),e.nodeModel.getLabel()}},{text:n.getNLSValue("Column.HeaderName"),dataIndex:"colName",isEditable:!1,width:"auto",isColumnMovable:!1},{text:n.getNLSValue("Column.IsVisible"),dataIndex:"colVisibility",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:function(t){var n,i=t.cellView.getContent(),o=t.cellModel.getCellContent();if(!t.isHeader)return n=new X({type:"switch",label:""}),"string"===e.typeOf(o)&&(o=e.Json.decode(o)),!0===o.display&&(n.checkFlag=!0),!0===o.mandatory&&(n.disabled=!0),i.setContent(n),i.title="",t.cellView.setOption("toggle",n),n},setValue:u},{text:n.getNLSValue("Column.Width"),dataIndex:"width",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:l,setValue:c},{text:n.getNLSValue("Column.MinWidth"),dataIndex:"minWidth",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:l,setValue:c}],s=(o=new B(a)).getDocument(),r=0;r<i.length;r++)s.addRoot(new j({label:r.toString(),grid:e.merge({colName:P.getColumnDisplayValue(i[r])},i[r])}));return o},E=function(t,o,r){var a;e.is(b)&&(y={},M=t,t.forEach(function(t){var i,s=o[t],a=L(s),l=new F("div",{class:t+"-Content ViewPreferencesUI-TabContent"}),c=new F("div",{class:"tlv-section"}),u=new F("div",{class:"grouping-chip-section"}),d=new F("div",{class:"chip-container"}),g=new F("label",{class:"chip-label",text:n.getNLSValue("ViewPreferencesUI.Group")}).inject(u);G[t]=new m({placeholder:n.getNLSValue("ViewPreferencesUI.GroupByChipPlaceholder"),identifier:"UniqueIdentifier_selectionChip"+t,acceptDrop:function(e){return console.log("options",e),!0},onDropBlank:function(n,i){let o=G[t].getAllChipsAsLabels(),s=n.dataTransfer.getData("Text"),r=JSON.parse(s);if(r){let n=r.data["dswebux/x-tree.treenodemodel+json"];if(n)for(let s=n.length-1;s>=0;s--)if(-1===o.indexOf(n[s].grid.colName)){let o={id:G[t]._items.length+t,label:e.is(n[s].grid.attribute.colName)?n[s].grid.attribute.colName:n[s].grid.colName,value:n[s].label,index:G[t]._items.length};e.is(i&&i.dropIndex)&&(o.index="right"===i.dropPosition?i.dropIndex+1:i.dropIndex),G[t].addChip(o)}}}}),G[t].inject(d),g.inject(u),d.inject(u);let f=o[t],p=[];for(let n=0;n<f.length;n++)if(f[n].group){let i={id:f[n].chipID,label:f[n].colName,value:n,index:f[n].chipPosition};p[f[n].chipPosition]=i,e.is(z[t])||(z[t]=f[n].ViewUUID)}if(p.length>0){for(let e=0;e<p.length;e++)G[t].addChip(p[e]);G[t]._uuid=z[t]}y[t]=a,a.inject(c),c.inject(l),u.inject(l),(i=b.add({label:n.getNLSValue("ViewPreferencesUI."+t+".TabTitle"),content:l,index:b.getPageCount(),icon:"table",isSelected:0===b.getPageCount()})).button.elements.container.addClassName(t+"-TabButton"),e.is(r[t])&&i.button.elements.iconPlaceholder.setContent(r[t])}),i.useRootStorage()&&(a=new s(S,f,h,C),b.add({id:"store-view-block",index:b.getPageCount(),icon:n.getIconURLFromKey("StoreViews"),label:n.getNLSValue("ViewPreferencesUI.StoreView.TabTitle"),content:a.getContent()})))},N=function(){var e,t,n,i,o,s={};for(t in y)if(y.hasOwnProperty(t)){let r=[],a=G[t]._items;for(o=0;o<a.length;o++)r.push(a[o].chipOptions.label);for(s[t]=[],i=y[t].getRoots(),e=0;e<i.length;e++){if((n=i[e].options.grid).group=r.indexOf(n.colName)>-1,n.group){let e=G[t].getChipPosition(n.colName);n.chipPosition=e,n.chipID=G[t]._items[e].chipOptions.id,n.chipIndex=G[t]._items[e].chipOptions.index,n.ViewUUID=G[t].getUUID()}s[t].push(n)}}return s},{name:"ViewPreferencesUI",buildView:function(t,n){return e.is(S)&&S.close(),w(n),D(),E(t.views,t.viewPreferences,t.viewIcons),S}}}}),define("DS/DELPPWViewPlugins/TreeViewPlugin/TreeViewPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWViewPlugins/TreeViewPlugin/ViewPreferencesUI","DS/DELPPWViewPlugins/TreeViewPlugin/LayoutPreferencesUI","DS/CoreEvents/Events"],function(e,t,n,i,o,s){"use strict";return function(r){var a,l,c,u,d,g,m,f,p,h,P,C,v,S,I,y,b,w,D={Type:"type",Reference:"referenceID"},L={"type.group":"type.reference","referenceID.group":"PID.reference"},E={},k=new Set,V=new Set,R=[],x="",A=Object.create(null);return v=function(e){var t=-1;return P.some(function(n,i){var o=!1;return n.viewID===e&&(t=i,o=!0),o}),t},d=function(e){return(""!==a.getConfigurationPID()?a.getConfigurationPID()+"_":"")+e+"_ColumnPreferences"},g=function(e){return a.getPreference(d(e))},m=function(e,t){return a.setPreference(d(e),t)},f=function(){var t,n=null;return t=a.getPreference("widgetLayoutValues"),e.is(t)&&(n=e.Json.decode(t)),n},p=function(t){a.setPreference("widgetLayoutValues",e.Json.encode(t))},h=function(i,o){var s,a,l,c,u,d=t.getXMLValues(o),f=g(i);if(f=e.is(f)?f:[],d=e.is(d)?e.clone(d.Config.Columns.Column):[],d=e.is(d,"array")?d:[d],c=r.getPlugins("AttributePlugin"),u=r.getPlugins("CfgColumnsPlugin"),e.is(c)&&e.is(u)){for(u=u.instance,c=c.instance,s=f.length-1;s>=0;s--){for(l=!1,a=d.length-1;a>=0;a--)if(c.getColumnInfos(d[a]).dataIndex===f[s].dataIndex){e.is(d[a].mandatory,"boolean")&&(f[s].colVisibility.mandatory=d[a].mandatory,d[a].mandatory&&(f[s].colVisibility.display=d[a].mandatory)),e.is(d[a].displayType)&&(f[s].displayType=d[a].displayType),l=!0,d.splice(a,1);break}l||f.splice(s,1)}const t=u.getConfigColDataIndexSet();d.filter(function(n){let i=!0;return e.owns(n,"displayType")&&"CFG"===n.displayType&&(t.has(n.dataIndex)||(i=!1)),i}).forEach(function(t){var i=c.getColumnInfos(t);f.push({colVisibility:{display:!e.is(t.display)||t.display,mandatory:!!e.is(t.mandatory)&&t.mandatory},dataIndex:i.dataIndex,attribute:i.attribute,width:e.is(t.width)?t.width:n.getNLSValue("ViewPreferencesUI.Auto"),minWidth:e.is(t.minWidth)?t.minWidth:"100"}),e.is(t.displayType)&&(f[f.length-1].displayType=t.displayType)}),m(i,f)}return f},C=function(){var t,o,s,a,l,c,u={views:[],viewPreferences:{},viewIcons:{}};o=r.getPlugins("AttributePlugin"),t=r.getPlugins("UXComponentsPlugin"),s=r.getPlugins("RootsPlugin"),a=r.getPlugins("DicoPlugin"),e.is(o)&&e.is(t)&&e.is(s)&&e.is(a)?(o=o.instance,t=t.instance,s=s.instance,a=a.instance,c=t.getComponent("WUXFrameWindowsManager").getFrameWindow(r.getConfig().appContext),l=new i(r,c,t,o,s,a),P.forEach(function(e){var t=g(e.viewID);u.views.push(e.viewID),u.viewPreferences[e.viewID]=t,e.viewIcon&&(u.viewIcons[e.viewID]=n.getIconElem(e.viewIcon))}),l.buildView(u,function(t){var n,i;for(n in t)e.owns(t,n)&&(i=t[n],m(n,i));r.getMediator().notify("TreeViewPrefModified")}).show()):r.getLogger().debug("Attribute Plugin or UXComponents Plugin or Roots Plugin is not available.")},S=function(){var t,n,i,s={viewsInDockingZones:u,viewsInFreeZone:c};n=r.getPlugins("UXComponentsPlugin"),e.is(n)&&(n=n.instance,i=f(),(t=new o(l,n,r.getConfig().appContext,i,s)).showDialog(function(){var e=t.decipherPreferencesFromButtonStates();p(e),r.getMediator().notify("widgetLayoutChanged")}))},I=function(t){return t&&e.is(E[t])?E[t]:[]},y=function(t,n){t&&n&&(e.is(E[t])||(E[t]=[]),E[t].push(n))},w=function(){var e,t=!1;for(e in E)if(Array.isArray(E[e])&&E[e].length>0){t=!0;break}return t},b=function(e){e&&(E[e]=[])},{name:"TreeViewPlugin",onStart:function(t){P=[],u={},c={},a=r.getService("ConfigService"),e.is(a)||r.getLogger().debug("TreeViewPlugin initialization failed as ConfigService is not available"),l=r.getService("LayoutService"),e.is(l)||r.getLogger().debug("TreeViewPlugin initialization failed as LayoutService is not available"),R.push(r.addExternalListener("EditViewPreferencesCmd",C)),R.push(r.addExternalListener("LayoutPreferences",S)),t()},onStop:function(){var e,t;for(P=null,u=null,c=null,e=0,t=R.length;e<t;e++)r.removeExternalListener(R[e]);R=[],k.clear()},registerViewforColumnPref:function(t){var n=!1;return e.is(t)&&(e.is(t.viewID)||e.is(t.columnConfigName))?-1===v(t.viewID)?(P.push(t),h(t.viewID,t.columnConfigName),n=!0):r.getLogger().debug(t.viewID+" Module has already registered for Column Preferences"):r.getLogger().debug(" viewID or columnConfigName has not been defined, so cannot register for  Column Preferences"),n},syncViewColumnPreferences:function(t){var n,i,o;if(e.is(t))return(n=v(t))>-1?(i=P[n],h(i.viewID,i.columnConfigName),o=this.getViewColumnPreferences(i.viewID)):r.getLogger().debug(t+" Module has already registered for Column Preferences"),o;r.getLogger().debug(" viewID has not been defined, so cannot sync Column Preferences")},getViewColumnPreferences:function(n,i){var o,s,a,l,c,u,d=r.getPlugins("AttributePlugin"),m=r.getPlugins("ResourcePlugin");if(e.is(d)&&e.is(m)){if(d=d.instance,m=m.instance,e.is(n)){if((o=v(n))>-1)s=g(n),c=P[o].columnConfigName,l=t.getXMLValues(c),a=e.is(l)?l.Config.Columns.Column:[],a=e.is(a,"array")?a:[a],s.forEach(function(t,n){a.some(function(i){var o,r=!1;return d.getColumnInfos(i).dataIndex===t.dataIndex&&(t.group&&(o={dataIndex:t.dataIndex,position:t.chipPosition}),s[n]=e.merge({isHidden:!t.colVisibility.display,width:t.width,minWidth:t.minWidth,groupingInfo:o},i),r=!0),r})}),l.Config.Columns.Column=s;else{if(!e.is(i))return void r.getLogger().debug(n+" Module has not registered for Column Preferences");l=t.getXMLValues(i)}return e.is(l)&&(u=l.Config.Label,e.is(u)&&(A[n]=d.getLabelInfos(u))),e.is(l)?l.Config:void 0}r.getLogger().debug(" viewID has not been defined, so cannot retrieve Column Preferences")}else r.getLogger().debug("AttributePlugin or ResourcePlugin not available")},unRegisterViewforColumnPref:function(t){var n,i=!1;return e.is(t)?(n=v(t))>-1?(P.splice(n,1),i=!0):r.getLogger().debug(t+" Cannot unregister as Module is not registered for Column Preferences"):r.getLogger().debug(" viewID has not been defined, so cannot unRegister for  Column Preferences"),i},getLabelInfo:function(e){return A[e]},getViewLabelMap:function(){return A},registerViewforWidgetLayout:function(t){var n;e.is(t)&&(e.is(t.viewID)||e.is(t.viewType))?(n=t.viewID,e.is(t.dockArea)?e.is(u[n])?u[n].views.push(t.viewType):u[n]={views:[t.viewType],dockArea:t.dockArea}:e.is(c[n])?c[n].views.push(t.viewType):c[n]={views:[t.viewType]}):r.getLogger().debug("viewID or viewType has not been defined, so cannot register for Layout Preferences")},unregisterViewforWidgetLayout:function(t,n){var i,o,s,a=!1;return e.is(c[t])?i=c:e.is(u[t])&&(i=u),e.is(i)&&-1!==(s=(o=i[t]).views.indexOf(n))&&(o.views.splice(s,1),0===o.views.length&&delete i[t],a=!0),a||r.getLogger().debug('Cannot unregister as Module "'+t+'" or "'+n+'" is not registered for Layout Preferences'),a},setCurrentView:function(t,n){e.is(n)&&(e.is(t)||e.is(n.currentView))?e.is(c[t])?c[t].currentView=n.currentView:c[t]={currentView:n.currentView}:r.getLogger().debug("moduleId or currentView has not been defined, so cannot setup Module Current View")},updateViewPreferences:function(t,n,i){var o,s=g(t);Array.isArray(s)&&e.is(n)&&e.is(i)&&(o=s.detect(function(e){return e.dataIndex===n},this),e.is(o)&&(Object.keys(i).forEach(function(e){switch(e){case"visibility":o.colVisibility.display=i.visibility;break;default:r.getLogger().debug("Invalid option! No parameters to manage for the selected column!")}}),m(t,s)))},getCurrentView:function(){return c},setActiveView:function(e){x=e},getActiveView:function(){return x},executeRefInstCommand:function(e,t){var n=r.getConfig().appContext,i=r.getPlugins("UXComponentsPlugin").instance.getComponent("WUXCommandsManager").getCommand(e,n);let o={displayName:t.displayName,PID:t.id,entity:t.entity,doNotDisplayCmdDialog:!0};i.execute(o)},executeCommand:function(t,n){var i,o,a,l=r.getConfig().appContext,c=r.getPlugins("UXComponentsPlugin").instance.getComponent("WUXCommandsManager"),u=c.getCommand(t,l);a=function(e){var t;return{displayName:(t=r.getPlugins("DatabasePlugin").instance.getReference(e.getReferencePID())).get("PLMEntity.V_Name"),id:t.get("PID"),revision:t.get("revision"),type:t.get("type")}},i=(n||{}).node,e.is(u)?(e.is(i)&&(o=a(i)),!0===i.fromXEN&&e.is(i.getParent()._treeDocument)?s.publish({event:"FacetCommandManager/executeCommand",data:{commandName:t,targetNode:o}}):u.execute(o)):(u=c.getCommandCheckHeader(t,l),e.is(u)&&!1===u.getState()&&(u.options.node={referencePID:i.getReferencePID(),instancePID:i.getInstancePID(),absPath:i.getAbsolutePath()},u.toggleState()))},addColumnForGrouping:function(e,t){y(e,t)},getColumnsForGrouping:function(e){return I(e)},isGroupingExist:function(){return w()},getGroupingAdditonalColumns:function(){return D},resetColumnsForGrouping:function(e){b(e)},getCollectionSpecificDataIndex:function(e){return L[e]},registerModuleForRecursiveGrouping:function(e){k.add(e)},doesModuleHaveRecursiveGrouping:function(e){return k.has(e)},unRegisterModuleForRecursiveGrouping:function(e){k.delete(e)},registerModuleColumnsAsImmutable:function(e){V.add(e)},areModuleColumnsImmutable:function(e){return V.has(e)}}}});