define("DS/ENOCollabToolsUI/tracker/ENOCollabTracker",["UWA/Class","DS/Usage/TrackerAPI"],function(e,t){"use strict";return e.singleton({init:function(){this.success="success",this.failure="failure",this.partial_success="partial_success",this.timeout="timeout",this.unknown="unknown",this.running_on_backend="running_on_backend",this.multiType="multiType",this._privateInit()},checkAndTrackPageEvent:function(e){this._checkEvent(e)&&this._trackPageEvent(e)},createInitActionEvent:function(e,t){return this._internalCreateInitEventFromEvent(e,t)},createValidationEventFromEvent:function(e,t){return this._internalCreateAuthoringActionEventFromEvent(e,t,this.validation)},createAuthoringActionEventFromEvent:function(e,t){return this._internalCreateAuthoringActionEventFromEvent(e,t)},createActionEventFromEvent:function(e,t){var n=this._internalCreateAuthoringActionEventFromEvent(e,t);return null==n.eventValue&&(n.eventValue=t.eventValue),n},_trackPageEvent:function(e){t.trackPageEvent(e)},_privateInit:function(){this.ENOLCMI_AP="ENOLCMI_AP",this.UXAction="UXAction",this.init="init",this.refresh="refresh",this.validation="validation",this.unknownApp="unknownApp",this.unknownPlatform="unknownPlatform",this.domain3DDashboard="3DEXPERIENCE 3DDashboard",this.domainNative="3DEXPERIENCE Native"},_internalCreateInitEventFromEvent:function(e,t){var n=t?t.persDim.pd2:this._create_UUID(),i=t?t.persDim.pd3:this._getCurrentAppId(),r=t?t.persDim.pd10:this._getAppDomain(),p=t?t.tenant:this._getPlatformId(),a=null,s=null;"number"==typeof e.numberObjects?a=e.numberObjects:e.models&&(a=e.models.length,s=this._getTypeFromModels(e.models));var o={eventCategory:this.UXAction,eventLabel:e.UXName||(t?t.eventLabel:null),eventAction:t?this.refresh:this.init,eventValue:a,appID:this.ENOLCMI_AP,tenant:p,persDim:{pd1:e.actionStatus||this.success,pd2:n,pd3:i,pd10:r},persVal:{pv2:t?t.persVal.pv2+1:1}};e.typeObjects&&(o.persDim.pd4=e.typeObjects),s&&(o.persDim.pd4=s),e.UXMode&&(o.persDim.pd5=e.UXMode),e.UXContext&&(o.persDim.pd7=e.UXContext),e.source&&(o.persDim.pd6=e.source),e.serviceName&&(o.persDim.pd8=e.serviceName),e.serviceAnswer&&(o.persDim.pd9=e.serviceAnswer),e.UXSub&&(o.persDim.pd11=e.UXSub),e.actionTime&&(o.persVal.pv1=e.actionTime),e.serviceTime&&(o.persVal.pv8=e.serviceTime),this._enrichEventWithAverageActionTime(o);for(let t=16;t<=20;t++){let n="pd"+t;"string"==typeof e[n]&&(o.persDim[n]=e[n]);let i="pv"+t;"number"==typeof e[i]&&(o.persVal[i]=e[i])}return o},_internalCreateAuthoringActionEventFromEvent:function(e,t,n){var i=null;"number"==typeof e.numberObjects?i=e.numberObjects:e.models&&(i=e.models.length);var r={eventCategory:this.UXAction,eventLabel:t.eventLabel,eventAction:n||e.actionName,eventValue:i,appID:this.ENOLCMI_AP,tenant:t.tenant,persDim:{pd1:e.actionStatus||this.success,pd2:t.persDim.pd2,pd3:t.persDim.pd3,pd10:t.persDim.pd10},persVal:{pv2:t.persVal.pv2+1}};t.persDim.pd4&&(r.persDim.pd4=t.persDim.pd4),t.persDim.pd5&&(r.persDim.pd5=t.persDim.pd5),t.persDim.pd6&&(r.persDim.pd6=t.persDim.pd6),t.persDim.pd7&&(r.persDim.pd7=t.persDim.pd7),t.persDim.pd11&&(r.persDim.pd11=t.persDim.pd11),e.typeObjects&&(r.persDim.pd4=e.typeObjects),e.models&&(r.persDim.pd4=this._getTypeFromModels(e.models)),e.UXMode?r.persDim.pd5=e.UXMode:e.hasOwnProperty("UXMode")&&delete r.persDim.pd5,e.serviceName&&(r.persDim.pd8=e.serviceName),e.serviceAnswer&&(r.persDim.pd9=e.serviceAnswer),e.actionTime&&(r.persVal.pv1=e.actionTime),e.serviceTime&&(r.persVal.pv8=e.serviceTime),this._enrichEventWithAverageActionTime(r);for(let t=16;t<=20;t++){let n="pd"+t;"string"==typeof e[n]&&(r.persDim[n]=e[n]);let i="pv"+t;"number"==typeof e[i]&&(r.persVal[i]=e[i])}return r},_create_UUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},_enrichEventWithAverageActionTime(e){var t=null;null!=e&&e.persVal&&e.persVal.pv1&&"number"==typeof e.persVal.pv1&&e.eventValue&&"number"==typeof e.eventValue&&0!=e.eventValue&&(t=Math.floor(e.persVal.pv1/e.eventValue)),null!=t&&(e.persVal.pv3=t)},_getCurrentAppId:function(){if("undefined"!=typeof widget&&null!==widget){if(widget.getValue("parent_x3dAppId"))return widget.getValue("parent_x3dAppId");if(widget.getValue("x3dAppId"))return widget.getValue("x3dAppId");if(widget.getValue("appId"))return widget.getValue("appId")}return this.unknownApp},_getAppDomain:function(){var e=this.domain3DDashboard;return"undefined"!=typeof widget&&null!==widget&&widget.getValue("addinmode")?e=widget.getValue("addinmode"):"undefined"!=typeof dscef&&null!==dscef&&(e=this.domainNative),e},_getPlatformId:function(){return"undefined"!=typeof widget&&null!==widget&&widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):this.unknownPlatform},_getTypeFromModels:function(e){var t=null,n=this;return e.forEach(function(e){e.type&&null==t?t=e.type:e.type&&e.type!=t?t=n.multiType:e.objectType&&null==t?t=e.objectType:e.objectType&&e.objectType!=t&&(t=n.multiType)}),t},_checkEvent:function(e){return!!(e.hasOwnProperty("appID")&&e.appID===this.ENOLCMI_AP&&e.hasOwnProperty("eventCategory")&&e.eventCategory===this.UXAction&&e.hasOwnProperty("eventLabel")&&null!=e.eventLabel&&e.hasOwnProperty("eventAction")&&null!=e.eventAction&&e.hasOwnProperty("eventValue")&&"number"==typeof e.eventValue&&e.hasOwnProperty("tenant")&&null!=e.tenant&&e.hasOwnProperty("persDim")&&null!=e.persDim&&e.hasOwnProperty("persVal")&&null!=e.persVal&&e.persDim.hasOwnProperty("pd1")&&null!=e.persDim.pd1&&e.persDim.hasOwnProperty("pd2")&&null!=e.persDim.pd2&&e.persDim.hasOwnProperty("pd3")&&null!=e.persDim.pd3&&e.persVal.hasOwnProperty("pv2")&&"number"==typeof e.persVal.pv2)||(console.log("ENOCollabTracker _checkEvent  - FAILURE - incorrect event"),!1)}})}),define("DS/ENOCollabToolsUI/tracker/ENOCollabTrackerBackEnd",["UWA/Class"],function(e){"use strict";return e.singleton({init:function(){this.domain3DDashboard="3DEXPERIENCE 3DDashboard",this.domainNative="3DEXPERIENCE Native",this.unknownApp="unknownApp",this.unknownWebInWinAppDomain="unknownWebInWinAppDomain"},enrichRequestWithMetrics:function(e,t){return e&&t&&t.hasOwnProperty("UXName")&&null!=t.UXName&&(e.metrics={},e.metrics.UXName=t.UXName,e.metrics.client_app_domain=this._getAppDomain(),e.metrics.client_app_name=this._getCurrentAppId()),e},enrichRequestWithMetricsWebInWin(e,t){return e&&t&&t.hasOwnProperty("UXName")&&null!=t.UXName&&t.hasOwnProperty("isWebInWin")&&"boolean"==typeof t.isWebInWin&&(e.metrics={},e.metrics.UXName=t.UXName,!0===t.isWebInWin?(e.metrics.client_app_domain=t.client_app_domain?t.client_app_domain:this.unknownWebInWinAppDomain,e.metrics.client_app_name=t.client_app_name?t.client_app_name:this.unknownApp):(e.metrics.client_app_domain=this._getAppDomain(),e.metrics.client_app_name=this._getCurrentAppId())),e},_getCurrentAppId:function(){if("undefined"!=typeof widget&&null!==widget){if(widget.getValue("parent_x3dAppId"))return widget.getValue("parent_x3dAppId");if(widget.getValue("x3dAppId"))return widget.getValue("x3dAppId");if(widget.getValue("appId"))return widget.getValue("appId")}return this.unknownApp},_getAppDomain:function(){var e=this.domain3DDashboard;return"undefined"!=typeof widget&&null!==widget&&widget.getValue("addinmode")?e=widget.getValue("addinmode"):"undefined"!=typeof dscef&&null!==dscef&&(e=this.domainNative),e}})}),define("DS/ENOCollabToolsUI/ENOCollabToolsUI",[],function(){return{}});