/*!  COPYRIGHT DASSAULT SYSTEMES 2015   */
function Player3DShare(e,t,n,i,o){"use strict";var s;return 1===arguments.length?(console.error("You're using a very old deprecated funtion, please use Player3DPlayWeb instead (same signature)"),s=arguments[0]):(console.error("You're using a very old deprecated funtion, please use Player3DPlayWeb instead (with {container:{}, input:{}, options:{}, widget:{} [,application:]})"),(s={}).container=arguments[0],s.input=arguments[1],s.options=arguments[2],s.widget=arguments[3],s.application=arguments[4]),Player3DPlayWeb(s)}define("DS/3DPlayHelper/SplashScreen",["DS/WebappsUtils/WebappsUtils","UWA/Core","UWA/Element","UWA/Controls/Abstract","css!DS/3DPlayHelper/SplashScreen","DS/CoreEvents/Events","i18n!DS/3DPlayHelper/assets/nls/SplashScreen"],function(e,t,n,i,o,s,a){"use strict";return i.extend({defaultOptions:{},views:{},init:function(e){if(this._parent(e),this._buildView(e),e){if(!0===e.autoplay)this.showView(this.views.loading),setTimeout(e.onClick);else{var t=function(){this.showView(this.views.loading),this.removeOnClick(),e.onClick&&e.onClick(this),t=null}.bind(this);this.setOnClick(t)}e.container&&(e.containerOptions?e.containerOptions.insertBefore&&e.container.insertBefore(this.elements.container,e.container.firstElementChild):this.inject(e.container)),e.callback&&e.callback(this)}},_buildView:function(t){var i=document.createDocumentFragment();this.formFactor="",i.ownerDocument.documentElement.offsetWidth>780&&i.ownerDocument.documentElement.offsetHeight>200?this.formFactor="L":i.ownerDocument.documentElement.offsetWidth<779&&i.ownerDocument.documentElement.offsetWidth>581&&i.ownerDocument.documentElement.offsetHeight>200?this.formFactor="M":i.ownerDocument.documentElement.offsetWidth<580&&i.ownerDocument.documentElement.offsetWidth>280&&i.ownerDocument.documentElement.offsetHeight>200?this.formFactor="S":i.ownerDocument.documentElement.offsetWidth<280||i.ownerDocument.documentElement.offsetHeight<200?this.formFactor="XS":this.formFactor="L",this.custoContainer=new n("div",{class:"PlayWeb-bgd-custo"}).inject(i);var o=this;if(t&&void 0!==t.custom&&null!==t.custom)if("string"==typeof t.custom){this.custoContainer.innerHTML=t.custom;var s=e.getWebappsBaseUrl()+"3DPlayHelper/assets/images/Xsmall_button_withHalo-03.svg";o.clickLogoImg=new n("div",{class:"click-logo-img",display:"block",styles:{"background-image":"url('"+s+"')"}}).inject(this.custoContainer)}else try{this.custoContainer.appendChild(t.custom)}catch(e){}var a=new n("div",{styles:{width:"100%",height:"100%"}}),r=t?t.logoDisplay:void 0,l=t&&"string"==typeof t.customLogoSrc?t.customLogoSrc:void 0,c=t&&"string"==typeof t.customAppName?t.customAppName:void 0;if(this._add3DPlayLogoView(a,r,l,c),this._addLoadingView(a),this._addNotificationView(a),this._addErrorView(a),this.showView=function(e){for(var n in this.views)this.views.hasOwnProperty(n)&&(this.views[n].style.display="none");"3DWhiteboard"!==t.mode&&(e.style.display="block")},i.appendChild(a),"onHover"===r){o=this;a.addEvents({mouseenter:function(){o.clickLogoImg&&(o.clickLogoImg.style.opacity=1),void 0!==o.options.custom&&null!==o.options.custom||(o.viewLogo.style.opacity=1)},mouseleave:function(){o.clickLogoImg&&(o.clickLogoImg.style.opacity=0),void 0!==o.options.custom&&null!==o.options.custom||(o.viewLogo.style.opacity=0)}})}this.elements.container=new n("div",{class:"SHAREPluginless_background"}),t&&"string"==typeof t.customBgColor&&(this.elements.container.style.backgroundColor=t.customBgColor),this.elements.container.appendChild(i)},_add3DPlayLogoView:function(i,o,s,a){var r={display:"block","background-image":"url('"+(s||e.getWebappsBaseUrl()+"3DPlayHelper/assets/images/3DPlayOnclickPage.svg")+"')"};"onHover"===o&&t.extend(r,{opacity:0,transition:"opacity 0.5s ease-in-out"}),this.viewLogo=new n("div",{class:"PlayWeb-splash-view",styles:r}).inject(i),this.views.logo=this.viewLogo},_addLoadingView:function(t){var i,o=new Image;o.onload=function(){s.publish({event:"SPLASHSCREEN"})},this.viewLoading=new n("div",{class:"PlayWeb-splash-view",styles:{display:"none",cursor:"progress"}}).inject(t),"L"===this.formFactor?i=e.getWebappsBaseUrl()+"3DPlayHelper/assets/images/3DPlayLandingPage.svg":"M"===this.formFactor?i=e.getWebappsBaseUrl()+"3DPlayHelper/assets/images/3DPlayLandingPage.svg":"S"===this.formFactor?i=e.getWebappsBaseUrl()+"3DPlayHelper/assets/images/Small-02.svg":"XS"===this.formFactor&&(i=e.getWebappsBaseUrl()+"3DPlayHelper/assets/images/Xsmall-03.svg"),this.viewLoading.style.backgroundImage="url("+i+")",o.src=i,this.views.loading=this.viewLoading},_addNotificationView:function(t){this.notificationView=new n("div",{class:"PlayWeb-splash-view",styles:{display:"none","background-image":"url('"+e.getWebappsBaseUrl()+"3DPlayHelper/assets/images/3DPlayErrorPage.svg')"}}).inject(t),this.notificationContainer=document.createElement("p"),this.notificationContainer.setAttribute("class","SHAREPluginless_notif"),this.notificationView.appendChild(this.notificationContainer),this.views.notification=this.notificationView},_addErrorView:function(t){this.viewError=new n("div",{class:"PlayWeb-splash-view",styles:{display:"none","background-image":"url('"+e.getWebappsBaseUrl()+"3DPlayHelper/assets/images/3DPlayErrorPage.svg')"}}).inject(t),this.fatalContainer=document.createElement("p"),this.fatalContainer.setAttribute("class","SHAREPluginless_notif_fatal"),this.promptedContainer=document.createElement("p"),this.promptedContainer.setAttribute("class","PlayWeb-notif-prompted"),this.viewError.appendChild(this.fatalContainer),this.viewError.appendChild(this.promptedContainer),this.views.error=this.viewError},refreshOptions:function(e){for(;this.custoContainer.firstChild;)this.custoContainer.removeChild(this.custoContainer.firstChild);if(e&&void 0!==e.custom&&null!==e.custom)if("string"==typeof e.custom)this.custoContainer.innerHTML=e.custom;else try{this.custoContainer.appendChild(e.custom)}catch(e){console.error(e)}},setOnClick:function(e){this.clickCB&&this.removeOnClick(),this.clickCB=e,this.elements.container.style.cursor="pointer",this.elements.container.addEventListener("click",this.clickCB,!1)},removeOnClick:function(){void 0!==this.clickCB&&(this.elements.container.style.cursor="",this.elements.container.removeEventListener("click",this.clickCB,!1),this.clickCB=void 0)},showFatal:function(e,t,n,i){this.fatalContainer.innerHTML="",i&&i.name&&a.get(i.name)?this.fatalContainer.appendChild(document.createTextNode(a.get(i.name))):this.fatalContainer.appendChild(document.createTextNode(a.TextFatal)),t&&(this.promptedContainer.innerText="",this.promptedContainer.appendChild(document.createTextNode(e))),console.error("3DPlay Fatal : "+e),n&&this.fatalContainer.appendChild(n),this.showView(this.views.error),this.elements.container.style.display="block"},showNotification:function(e){this.notificationContainer.textContent=e,this.showView(this.views.notification),this.elements.container.style.display="block"}})});var EnvironmentIsSet=function(e){return window&&window.localStorage&&void 0!==window.localStorage[e]};function Player3DPlayWeb(e){if(!window["3DPlay.ProbesManager.clapDone"]){var t="";"undefined"!=typeof widget&&widget.id&&(t=widget.id),window["3DPlay.ProbesManager.clapDone"]=!0,window.performance.mark(t+"clap");try{window.top.performance.mark(t+"clap")}catch(e){window["3DPlay.ProbesManager.TopWindowNotAvailable"]=!0}}var n,i=function(e){return window&&window.localStorage&&void 0!==window.localStorage[e]};try{var o,s=UWA.Utils.Client.Platform.ios;if(i("ODT_3DPLAYHELPER_IOS")&&(s=!0),s){var a=navigator.userAgent,r=a.indexOf("OS ");r>-1&&(o=a.substr(r+3,3).replace("_",".")),i("ODT_3DPLAYHELPER_IOS")&&(n="ODT_3DPLAYHELPER_IOS",o=window.localStorage[n])}return s&&o<8?(console.log("Player3DPlayWeb: Redirecting to the native app"),void require(["DS/3DPlayHelper/3DPlayNativePlayer"],function(t){t(e)})):Launch3DPlayWeb(e)}catch(t){return Launch3DPlayWeb(e)}}function Launch3DPlayWeb(e){"use strict";if("object"!=typeof e)switch(console.error('Player3DPlayWeb:R418 => This call is deprecated! Please use a JSON object in Player3DPlayWeb({container:"", input:{}; options:{}}'),arguments.length){case 1:return new Player3DShare(e);case 2:return new Player3DShare(arguments[0],arguments[1]);case 3:return new Player3DShare(arguments[0],arguments[1],arguments[2]);case 4:return new Player3DShare(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return new Player3DShare(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4])}var t,n={instance:void 0,loaded:!1,_check:function(){return this.isReady()?!!this.instance||(console.error("Experience is not created"),!1):(console.error("Experience is not ready"),!1)},getCtx:function(){if(this.instance&&this.instance.args)return this.instance.args.ctx},isReady:function(){return this.loaded},load:function(e,t){_check()},loadAsset:function(e,t){_check()},loadAnnotations:function(e,t){var n=e&&e.annotation?e.annotation:null,i=!(!t||!t.clean);return!(!this.instance||!n)&&(this.instance.loadAnnotations(n,i),!0)},getAnnotations:function(){if(this.instance&&this.instance.annotationManager)return this.instance.annotationManager.saveAnnotationsToJSON()}},i=!1;return(e=e||{}).options=e.options||{},e.options.widget3DPlay&&(i=!0),i||(i=!0,t="Splashscreen",window.performance.mark(t)),require(["DS/3DPlayHelper/3DPlayWebPlayer","DS/WebUtils/ProbesManager","DS/3DPlaySupport/SupportList","css!DS/3DPlayHelper/SplashScreen"],function(i,o,s,a){e.options.platformServices&&s.setPLatformServices(e.options.platformServices),t&&o.createProbe("Splashscreen_Displayed",t),i(n,e)}),n}define("DS/3DPlayHelper/3DPlayHelper",["UWA/Core"],function(e){"use strict";return Player3DPlayWeb}),define("DS/3DPlayHelper/AssetLoadingPreview",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";var n=function(e){return{class:"Play-assetLoadingPreview-image",tag:"img",src:e}};return t.extend({defaultOptions:{text:"",className:"Play-assetLoadingPreview"},init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){this.elements.container=e.createElement("div",{class:this.options.className,html:n(this.options.thumbnailURL)})},updateThumbnailURL:function(e){this.elements.container.setHTML(n(e)),this.options.thumbnailURL=e}})}),define("DS/3DPlayHelper/Tracker_Translation_Widget",[],function(){"use strict";return{widget:{Load_3DDashboard:2,Unified_Widget_1:3,Widget_EntryPoint:4,Unified_Widget_2:5,Widget_3DPlay:6,Widget_Ready:7,Splashscreen_Displayed:8}}}),define("DS/3DPlayHelper/3DPlayNativePlayer",["DS/WebSystem/Environment"],function(e){"use strict";return function(t){var n,i=["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","UWA/Utils/InterCom"],o={isReady:function(){return!0},load:function(e){if(n){var i;try{i=e.options.splashscreen}catch(e){i=null}n.refreshOptions(i)}t=e},loadAsset:function(e,t){this.load({input:e,options:t})}};return require(["DS/3DPlayHelper/SplashScreen","i18n!DS/3DPlayHelper/assets/nls/3DPlayHelper","DS/WebUtils/StringUtils"],function(o,s,a){var r={};r=t.options.splashScreen||r,(n=new o(r)).showView(n.views.logo);var l=t.container;"string"==typeof l&&(l=document.getElementById(l)),n.inject(l),require(i,function(i,o){console.log("Player3DPlayWeb: Trying to Launch 3DPlay Native");var a=function(){n.showView(n.views.loading);var a,r,l={appId:"X3DPLAY_AP"},c=function(t){if(e.isSet("ODT_3DPLAYHELPER_IOS_EVENT"))require(["DS/CoreEvents/Events"],function(t){t.publish({event:e.get("ODT_3DPLAYHELPER_IOS_EVENT")})});else{var a=StringUtils.parseUrl(t.tenantURL).hostname;a=a.toLowerCase(),i.getPlatformServices({onComplete:function(e){for(var i=t.modelID,r=null,c=0;c<e.length;c++){var p=e[c];for(var d in p){if(p.hasOwnProperty(d)&&"string"==typeof p[d])if(p[d].toLowerCase().contains(a)){r=p.platformId;break}}if(r)break}if(i&&r){var u=new o.Socket("compassPageSocket");u.subscribeServer("com.ds.compass",window.parent),u.dispatchEvent("onSetObject",{objectId:i,envId:r},"compassPageSocket"),u.addListener("launchApp",function(e){(console.log("Response = "+JSON.stringify(e)),this.response=e.response,"COMPLETE"!=this.response)&&(!0===confirm("To experience this content you need to install 3DPlay")&&(window.location="itms://itunes.apple.com/us/app/3dplay/id825988585?ls=1&mt=8"))}),u.dispatchEvent("onLaunchApp",l,"compassPageSocket")}else n.showFatal(s.TenantError,!1),n.showView(n.views.logo);n.showView(n.views.logo)},onFailure:function(){n.showFatal(s.PlatformNotFound,!1),n.showView(n.views.logo)}})}},p={};t.input&&("string"==typeof t.input?a=t.input:"string"==typeof t.input.asset?a=t.input.asset:t.input.asset.provider&&"string"==typeof t.input.asset.provider&&("FILE"===t.input.asset.provider.toUpperCase()?(a="",t.input.asset.serverurl&&(a+=t.input.asset.serverurl),t.input.asset.filename&&(a+=t.input.asset.filename)):"EV6"===t.input.asset.provider.toUpperCase()&&(p.modelID=t.input.asset.physicalid,p.tenantURL=t.input.asset.serverurl)),c(a?((r=a).indexOf("proxy/passport?")>-1&&r.indexOf("url=")>-1&&((r=r.substr(r.indexOf("url=")+4,r.length)).indexOf("&")>-1&&(r=r.substr(0,r.indexOf("&"))),r=decodeURIComponent(r)),{modelID:r.substr(r.lastIndexOf("/")+1,r.length),tenantURL:r.substr(0,r.lastIndexOf("/")+1)}):p))},r=document.createElement("a");r.setAttribute("href","#"),r.innerHTML="<U>"+s.LaunchNativeApp+"</U>",r.setAttribute("title",s.LaunchNativeApp),r.addEventListener("click",a,!1),n.showFatal(s.DeviceNotFullySupported,!0,r),n.setOnClick(a),n.showView(n.views.logo),e.isSet("ODT_3DPLAYHELPER_IOS")&&a()},function(e){if("scripterror"==e.requireType){var t=e.requireModules.join(",");console.error("3DPlay ScripNotFoundError: ",t),n.showFatal(s.ScripNotFoundError+t,!1)}else console.error(e)})},function(e){console.error("Player3DPlayWeb: 3DPlayRequire failed: "+e)}),o}}),define("DS/3DPlayHelper/3DPlayWebPlayer",["DS/3DPlay/3DPlay","DS/3DPlayHelper/SplashScreen","DS/3DPlayConnectors/3DPlayInputPreProcessor","DS/3DPlayConnectors/ErrorManagement","DS/WebSystem/Environment","DS/CoreEvents/Events","DS/WebSystem/Context","DS/WebUtils/ContextedSingleton","DS/WebUtils/ProbesManager","UWA/Core","DS/3DPlaySupport/Loader","DS/WebappsUtils/WebappsUtils","DS/WebSystem/BrowserInfos","DS/WebSystem/App","DS/WebUtils/Tracker","DS/PlatformAPI/PlatformAPI","DS/3DPlayHelper/Tracker_Translation_Widget"],function(e,t,n,i,o,s,a,r,l,c,p,d,u,h,y,m,f){"use strict";var g=function(v,w){function D(e){var t=window.localStorage["3DPlay.OverrideSettings"];if(void 0!==t){console.warn("!! 3DPlay OverrideSetting variable environment Active"),console.warn("Current options :"+e.options);try{(t=JSON.parse(t))&&t.options&&(console.warn("Found options :"+t.options),e.options=c.extend(e.options,t.options,!0))}catch(e){console.error("Override failed : JSON.parse error"+e)}}return console.warn("Resulting options :"+e.options),e}l.end("Widget_3DPlay"),o.isSet("3DPlay.Debug")&&console.log("3DPlay.Debug:3DPlayWebPlayer",w);var P=function(e){return function(t){"undefined"!=typeof widget&&widget.welcomeScreen&&widget.welcomeScreen.hide(),e.loaded=!0;try{var n=window.top.document.createEvent("CustomEvent");n.initCustomEvent("3DPLAYERROR",!0,!1,{helper:e}),window.top.document.dispatchEvent(n)}catch(e){}}};null!=w&&null!==w.input&&void 0!==w.input||(w.input={}),void 0!==w.options&&null!==w.options||(w.options={}),o.isSet("3DPlay.OverrideSettings")&&(w=D(w)),v.lastOptions=c.extend({},w);var S,b=w.options;void 0!==b.callbacks&&null!==b.callbacks||(b.callbacks={}),b.callbacks.eXPEriENcE={eRRoR:P(v),eXPEriENceReADy:(S=v,function(e){e&&(S.instance=e,S.loaded=!0);try{var t=window.top.document.createEvent("CustomEvent");t.initCustomEvent("3DPLAYREADY",!0,!1,{helper:S}),window.top.document.dispatchEvent(t)}catch(e){}})},b.callbacks.aSSeT={lOADinGfINIsheD:function(e){return function(t){try{var n=window.top.document.createEvent("CustomEvent");n.initCustomEvent("3DPLAYLOADINGFINISHED",!0,!1,{helper:e}),window.top.document.dispatchEvent(n)}catch(e){}}}(v)};!function(e){setTimeout(function(){e.loaded=!0},1e4)}(v);var E=w.ctx?w.ctx:w.options.ctx?w.options.ctx:a.createContext("Default");w.ctx=E,void 0!==w.options&&void 0!==w.options.callbacks&&e.addCallbacks(w.ctx,w.options.callbacks),v.inputPreProcessor=new n,v.endAllCommands=function(t){e.endAllCommands(t)},"string"==typeof w.container&&(w.container=document.getElementById(w.container)),r.add(E,"helper",v),w.options.splashscreen=w.options.splashscreen||{},v.instance=void 0,v.loaded=!1,v._check=function(){return this.isReady()?!!this.instance||(console.error("Experience is not created"),!1):(console.error("Experience is not ready"),!1)};try{for(var C=window;!C._swymData43DPlay&&C.parent&&C!==C.parent;)C=C.parent;if(C._swymData43DPlay&&C._swymData43DPlay[w.ctx]){var k=C._swymData43DPlay[w.ctx];window.getSwymContainer=function(){return k.container},window.widget=k.widget,delete k.widget,k.fullscreen&&(w.options.fullscreen=w.options.fullscreen||{},w.options.fullscreen.onActivate=k.fullscreen.onActivate,w.options.fullscreen.onDeactivate=k.fullscreen.onDeactivate,delete k.fullscreen),k.callback&&(w.options.callback=w.options.callback||{},w.options.callback=k.callback,delete k.callback),k.splashscreen&&(w.options.splashscreen=k.splashscreen,delete k.callback)}}catch(e){}if(v.options=w,w.input&&"3DSwYm"===w.input.usage){delete w.input.usage;var L,x=w.container;window._swymData43DPlay=window._swymData43DPlay||{},window._swymData43DPlay[w.ctx]={widget:w.widget,container:w.container,splashscreen:w.options.splashscreen,callback:{}},delete w.options.splashscreen,delete w.container,delete w.widget;try{L=m.getTenant()||(window.ds&&window.ds.swymTenant).toUpperCase()}catch(e){}var A=w.input;A.asset&&(A.asset.tenant=A.asset.tenant||L);var W=w.options.splashscreen;W&&W.custom&&(W.custom=W.custom.id);var _=w.options.fullscreen;_&&"CUSTOM"===_.mode&&(window._swymData43DPlay[w.ctx].fullscreen={onActivate:_.onActivate,onDeactivate:_.onDeactivate}),w.options&&w.options.callback&&(window._swymData43DPlay[w.ctx].callback=w.options.callback);var O=document.createElement("iframe");O.style.position="relative",O.style.width="100%",O.style.height="100%",O.style.border="0px",O.style.top="0px",O.style.left="0px",O.allowFullScreen=O.mozAllowFullScreen=O.webkitAllowFullScreen=!0,O.setAttribute("allowFullScreen","");var R,H=d.getProxifiedWebappsBaseUrl();try{w&&w.input&&"3DWhiteboard"==w.input.mode?null===H&&(H=d.getWebappsBaseUrl()):(window.location.origin.indexOf("3dswym")>-1||null===H)&&(H=d.getWebappsBaseUrl())}catch(e){H=d.getWebappsBaseUrl()}O.src=H+"3DPlayHelper/3DPlaySyndication.html?params="+encodeURIComponent(JSON.stringify(w)),"string"==typeof w.container&&(x=document.getElementById(x));try{R={position:x.parentElement.style.position,visibility:x.parentElement.style.visibility,display:x.parentElement.style.display},"3DWhiteboard"!==A.mode&&(x.parentElement.style.position="absolute",x.parentElement.style.visibility="hidden",x.parentElement.style.display="block")}catch(e){}x.appendChild(O);try{window.top.document.addEventListener("3DPLAYERROR",function(e){return function(t){R&&x&&x.parentElement&&(x.parentElement.style.position=R.position,x.parentElement.style.visibility=R.visibility,x.parentElement.style.display=R.display);var n=t.detail.helper;e.ctx===n.getCtx()&&e.options.callbacks&&e.options.callbacks.experience&&e.options.callbacks.experience.error&&e.options.callbacks.experience.error(v.getCtx())}}(w),!1),window.top.document.addEventListener("3DPLAYREADY",function(e){return function(t){R&&x&&x.parentElement&&(x.parentElement.style.position=R.position,x.parentElement.style.visibility=R.visibility);var n=t.detail.helper;e.ctx===n.getCtx()&&(v=c.extend(v,n,!0),e.options.callbacks&&(n.getExperience().addCallbacks(e.options.callbacks),e.options.callbacks.experience&&e.options.callbacks.experience.ExperienceReady&&e.options.callbacks.experience.ExperienceReady(v.getExperience())))}}(w),!1)}catch(e){}}else{var U=function(){l.createProbe("ExperienceReady").begin();var t=v.options.input.asset&&v.options.input.asset.tenant?v.options.input.asset.tenant:v.options.input.tenantID||v.options.input.tenant||w.options.tenant||w.options.tenantID;t&&(v.options.input.tenantID=t),e.createExperience(w)};if(!1===(void 0!==w.options.pad3DViewer||void 0===w.container)){if(w.options.splashscreen.custom&&"string"==typeof w.options.splashscreen.cutom)try{w.options.splashscreen.custom=window.top.getElementById(w.options.splashscreen.custom)}catch(e){}var I="autoplay"===w.options.loading;v.playerSplashScreen=new t({custom:w.options.splashscreen.custom,customBgColor:w.options.splashscreen.customBgColor,customLogoSrc:w.options.splashscreen.customLogoSrc,customAppName:w.options.splashscreen.customAppName,logoDisplay:w.options.splashscreen.logoDisplay,mode:w.input.mode,autoplay:I,container:w.container,callback:function(e){s.publish({event:"/"+E+"/EXPERIENCE/EXPERIENCESPLASHSCREEN",data:e})},onClick:U}),s.subscribeOnce({event:"SPLASHSCREEN"},function(){l.end("Splashscreen_Displayed"),l.end("Widget_Ready");var e=l.GetSubProbesFrom(l._parse("Widget_Ready"),!1),t=l.GetProcessedData();e.Load_3DDashboard=Math.floor(t.iframeTime),y.trackPageEvent("infos","embedder",h.getEmbeder(),u.isMobile()?1:0,e,void 0,f.widget)}),"preload"==w.options.loading&&U()}else U()}v.load=function(n){if(o.isSet("3DPlay.OverrideSettings")&&(n=D(n)),o.isSet("3DPlay.Debug")&&console.log("3DPlay.Debug:3DPlayWebPlayer.Load",n),this.instance&&(this.instance.stats&&l.cleanProbes(),this.instance.totalLoadingAssetProfiler=l.createProbe("_Load_").begin()),this.loaded){var s=!0;if(n){if(n.options=n.options||{},n.options.splashscreen=n.options.splashscreen||{},n.options.splashscreen&&n.options.splashscreen.custom&&"string"==typeof n.options.splashscreen.cutom)try{n.options.splashscreen.custom=window.top.getElementById(n.options.splashscreen.custom)}catch(e){}"onclick"===n.options.loading&&(s=!1,n.options.loading="autoplay")}var a=this,r=function(){a.playerSplashScreen&&a.playerSplashScreen.hide(),a.instance&&a.instance.clearView(),a.inputPreProcessor.run(n.input,function(t){n.input=t;var o=n.input.asset;if((!o.error||!i(o.error,E))&&(n.options||(n.options={}),n.options.newAsset=!1,a.isReady())){""===n.input.experience&&(n.input.experience=void 0),p(n.input,a.getCtx(),void 0,function(t){var i=void 0!==a.instance&&null!==a.instance?a.instance.args:a.lastOptions,o=void 0!==i.input.experience?i.input.experience.filename:"";if(n.options.newAsset=!0,t===o||o.indexOf(t)>-1||"3DPlayCollaborativeExperience"===t&&"DS/3DPlayDefaultExperience/3DPlayDefaultExperience"===o)return"string"==typeof n.input&&(n.input={asset:n.input}),n.input.experience={filename:o},void a.loadAsset(n.input,n.options);a.lastOptions.options&&a.lastOptions.options.splashscreen&&(a.lastOptions.options.splashscreen.custom=null),a.lastOptions.options.propertiesFacet&&delete a.lastOptions.options.propertiesFacet;try{a.dispose()}catch(e){console.log(e)}a.lastOptions.options&&delete a.lastOptions.options.pad3DViewer,a.loaded=!1,a.lastOptions.input=void 0,a.lastOptions.ctx=i.ctx,e.subscribe(a.lastOptions.ctx,"EXPERIENCE/ERROR",P(a));var s=c.extend(a.lastOptions,n,!0);g(a,s)},void 0,{getOnlyPath:!0})}})};if(s)r();else try{var d=this.playerSplashScreen.elements.container.parentElement;this.playerSplashScreen&&(this.playerSplashScreen.remove(),this.playerSplashScreen=null),this.playerSplashScreen=new t({custom:n.options.splashscreen.custom,customBgColor:n.options.splashscreen.customBgColor,customLogoSrc:n.options.splashscreen.customLogoSrc,customAppName:n.options.splashscreen.customAppName,logoDisplay:n.options.splashscreen.logoDisplay,container:d,containerOptions:{insertBefore:!0},onClick:r}),this.instance&&(this.instance.playerSplashScreen=this.playerSplashScreen)}catch(e){r()}}else this.options.input=n.input},v.loadAsset=function(e,t){if(o.isSet("3DPlay.Debug")&&console.log("3DPlay.Debug:3DPlayWebPlayer.loadAsset",e,t),null==e&&(t=!0),!0!==t&&!1!==t||(console.warn('3DPLAYWEB - DEPRECATED CALL - second argment is now an object for options. If you want to clear the scene graph, add to this object the property "clearSceneGraph" with the value "true"'),t={clearSceneGraph:t}),this.instance){var n=this;this.inputPreProcessor.run(e,function(e){n.instance.load(e,t),n=null})}},v.removeAsset=function(e){this._check()&&this.instance.remove(e)},v.sendEvent=function(e,t){this._check()};var N={};v.dispose=function(e){var t=window;if(t){do{t&&t._swymData43DPlay&&t._swymData43DPlay[this.getCtx()]&&delete t._swymData43DPlay[this.getCtx()],t&&(t=t.parent)}while(t&&t.parent&&t!==t.parent);if(this._check()){var n=this.getCtx();if(!n||N[n])return;N[n]=!0,this.instance.dispose(e),this.instance=null,this.loaded=void 0,this.ctx=void 0,r.removeCtx(n),delete N[n]}this.playerSplashScreen&&(this.playerSplashScreen.remove(),this.playerSplashScreen=null),this.ctx&&(this.ctx=null)}},v.informActiveState=function(e){if(this._check())return this.instance.informActiveState(e)},v.getExperience=function(){return this.instance}};return g});