define("DS/ENOProjectMgmtModels/Models/RelatedData",["UWA/Class/Model"],function(e){"use strict";return e.extend({_uwaClassName:"RelatedData"})}),define("DS/ENOProjectMgmtModels/Models/CSRFDataModel",["UWA/Class/Model"],function(e){"use strict";return e.extend({_uwaClassName:"CSRFDataModel",tokenName:"ENO_CSRF_TOKEN",csrfValue:"",setCSRF:function(e){this.csrfValue=e},getCSRF:function(){let e={};return e.name=this.tokenName,e.value=this.csrfValue,e}})}),define("DS/ENOProjectMgmtModels/Models/SecurityContext",["UWA/Class/Model"],function(e){"use strict";return e.extend({_uwaClassName:"SecurityContext"})}),define("DS/ENOProjectMgmtModels/Models/RequestData",["UWA/Class/Model"],function(e){"use strict";return e.extend({_uwaClassName:"RequestData",csrf:void 0,data:[],dataObject:void 0})}),define("DS/ENOProjectMgmtModels/Utils/StorageDataUtil",["UWA/Class","UWA/Storage","UWA/Storage/Adapter/Object"],function(e,t,i){"use strict";let s=e.extend({storage:void 0,init:function(){this.storage=new t({adapter:"Object",database:"ENOProjectMgmtWidgetStorage"})},clear:function(){let e=this,t=this.storage.getAll();if(t)for(let i in t)e.remove(i)},safeStore:function(e,t){try{let i=this.storage.safeStore(t);this.storage.set(e,i)}catch(e){console.error(e)}},set:function(e,t){try{this.storage.set(e,t)}catch(e){console.error(e)}},remove:function(e){try{this.storage.remove(e)}catch(e){console.error(e)}},get:function(e){return this.storage.get(e)},getSafeStoreData:function(e){return this.storage.safeResurrect(this.storage.get(e))}});return s._instance=s._instance||new s,s._instance}),define("DS/ENOProjectMgmtModels/Models/AppSettings",["UWA/Class/Model"],function(e){"use strict";let t=e.extend({_uwaClassName:"AppSettings",setup:function(){let e={params:"",url:"",myAppsUrl:"",showSpace:"",objectId:"",widgetId:"",widgetName:"",taggerContextId:"auto",appName:"",tenant:"",space:null,rows:null,preferences:{},language:"",timezone:"",user:"",isStandaloneWidget:!1,contextInfo:void 0};this.set(e)},setSelectedViewName:function(e){let t=this.getTenantInfo();UWA.extend(t,{viewName:e}),this.setTenantInfo(t)},getSelectedViewName:function(){let e=this.getTenantInfo();return e&&e.viewName},getViews:function(e){if(e)return e.views||(e.views={}),e.views},getViewNameInfo:function(e){let t=this.getViews(e);return t[e.viewName]||(t[e.viewName]={}),t[e.viewName]},setSelectedFilterOption:function(e){let t=this.getTenantInfo();if(this.getAlwaysLoadDefault())UWA.extend(t,{filter:e});else{let i=this.getViewNameInfo(t);UWA.extend(i,{filter:e})}this.setTenantInfo(t)},getSelectedFilterOption:function(){if(!window.widget)return;let e=this.getTenantInfo(),t=this.getViewNameInfo(e);return t&&t.filter||e&&e.filter},setSelectedSubFilterOption:function(e){let t=this.getTenantInfo();if(this.getAlwaysLoadDefault())UWA.extend(t,{subFilter:e});else{let i=this.getViewNameInfo(t);UWA.extend(i,{subFilter:e})}this.setTenantInfo(t)},getSelectedSubFilterOption:function(){if(!window.widget)return;let e=this.getTenantInfo(),t=this.getViewNameInfo(e);return t&&t.subFilter||e&&e.subFilter},setFilterSearchString:function(e){this._filterSearchString=e},getFilterSearchString:function(){return this._filterSearchString},setAlwaysLoadDefault:function(e){this._alwaysLoadDefault=e},getAlwaysLoadDefault:function(){return this._alwaysLoadDefault},setTenantInfo:function(e){let t=this.get("tenant");widget.deleteValue(t),widget.setValue(t,e)},getTenantInfo:function(){if(!window.widget)return;let e=this.get("tenant");return widget.getValue(e)||{}},setContextInfo:function(e){let t=this.getTenantInfo();t&&(t.context=e),this.setTenantInfo(t)},getContextInfo:function(){let e=this.getTenantInfo();return e&&e.context},getContextId:function(){let e=this.getContextInfo();return e&&e.id},isValidCollabspace:function(){return this.get("collabspace")},clearFilterOptions:function(){let e=this.getTenantInfo(),t=this.getViews(e);for(let i in t)i!==e.viewName&&delete e.views[i];this.setTenantInfo(e)},setLastSelectedContextCache:function(){this.lastSelectedContextCache=this.getContextInfo(),this.setLastSelectedViewName()},getLastSelectedContextCache:function(){return this.lastSelectedContextCache},setLastSelectedViewName:function(){this.lastSelectedViewName=this.getSelectedViewName()},getLastSelectedViewName:function(){return this.lastSelectedViewName},clearLastSelectedContextCache:function(){delete this.lastSelectedContextCache,delete this.lastSelectedViewName},checkNodeForExpansion:function(e){let t=this.getContextInfo(),i=t&&t.expansions;return i&&i.includes(e)}});return t._instance=t._instance||new t,t._instance}),define("DS/ENOProjectMgmtModels/Constants/Constants",["UWA/Core","DS/ENOProjectMgmtModels/Models/AppSettings"],function(e,t){"use strict";let i={ACCEPT_APPLICATION_JSON:"application/json",COMTENT_TYPE_FORM_URL_ENCODED:"application/x-www-form-urlencoded",CHARSET_UTF8:"charset=utf-8",APP_NAME:"3DSpace",GET:"GET",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE",CONTENT_TYPE:"Content-Type",PASSPORT:"passport",RESOURCES:"/resources/",APPLICATIONS:{RISK:"risks",DUPLICATE:"duplicate",OPPORTUNITY:"opportunities",LIBRARIES:"dslib",LIBRARY:"dslib:Library",CLASSFIEDITEM:"dslib:ClassifiedItem",CLASS:"dslib:Class",PROJECT:"projects",PROJECT_TEMPLATE:"projecttemplates",EXPERIMENT:"experiments",BASELINE:"baselines",TASK:"tasks",OBJECT_INFO:"ObjectInfo",CONTEXT_INFO:"RiskContextInfo",MATRIX_CONFIGURATION:"riskconfigurations",ASSESSMENT:"assessments",WORK_CALENDARS:"workcalendars",ALL_WORK_CALENDARS:"workcalendars/all",CHAT_PROMPT:"CHAT_PROMPT",IMPORTER:"Importer",PROFILE:"riskprofiles",LINKS:"favorites"},TYPENAMES:{RISK:"Risk",OPPORTUNITY:"Opportunity",TASK:"Task",PROJECT:"Project",PROGRAM:"Program",PROJECT_SPACE:"Project Space",XPROJECT:"dsplan:xProject",MATRIX_CONFIGURATION:"RiskMatrixConfiguration",ASSESSMENT:"Assessment",EXPERIMENT:"Experiment",PROJECTBASELINE:"Project Baseline",RISK_PROFILE:"Risk Profile",URL:"URL"},RISK:"Risk",PARAMS:{DEBUG:"&$debug=",TYPE:"&$type=",OWNED:"&owned=",ASSIGNED:"&assigned=",ORGANIZATION:"&organization=",CONTEXTID:"&contextId=",COMPLETED:"&completed=",FORCE:"&force=",FIELDS:"&$fields=",INCLUDE:"&$include=",DEFINITION:"&$definition=",SUBPROJECTRISKS:"&subprojectRisks=",SUB_PROJECT_OPPORTUNITIES:"&subprojectOpportunities=",MASK:"&$mask=",DEPTH:"&$depth=",SERVICE:"&$serviceId=",NONPUBLICRESOURCE:"&$nonPublicResource=",TOP:"&$top=",RMCTYPE:"&rmcType=",ACCESSIBLE:"&accessible=",COPYCONTEXT:"&copyContext=",LEVEL:"&level=",SIMPLE_JSON:"&$simpleJSON=true"},UPDATE_ACTION:{COPY:"COPY",NONE:"NONE",CREATE:"CREATE",DELETE:"DELETE",MODIFY:"MODIFY",CONNECT:"CONNECT",DISCONNECT:"DISCONNECT"},CONTEXT_ATTR:"context",IMPACT_ATTR:"impact",PROBABILITY_ATTR:"probability",COMMENTS_ATTR:"comments",RPN_ATTR:"rpnValue",RESOLVED_BY_ATTR:"resolvedBy",AFFECTED_ITEMS_ATTR:"affectedItems",ASSOCIATED_RISKS_ATTR:"associatedRisks",CAN_EDIT_ATTR:"canEdit",CREATE_DATA:"riskCreateAccess",MODIFY_DATA:"modifyAccess",DELETE_DATA:"deleteAccess",CAN_DELETE_DATA:"canDelete",CAN_MODIFY_DATA:"canModify",FROM_CONNECT_DATA:"fromConnectAccess",TO_CONNECT_DATA:"toConnectAccess",PROMOTE_DATA:"promoteAccess",DEMOTE_DATA:"demoteAccess",IS_SIMPLE_TASK:"isSimpleTask",CLASS_BASE_URL:"resources/v1/modeler/dslib/dslib:Class",CSRF_TOKEN:"ENO_CSRF_TOKEN",COMPLETE_STATE:"Complete",CAN_RMC_CONNECT:"RMCConnectAccess",CAN_CHANGE_OWNER:"changeOwnerAccess",XPLAN_SOURCE:"3dplan",SPACE_SOURCE:"3DSpace",DRIVE_SOURCE:"drive",PROJECT_LABEL:"dsxplan:label",PROJECT_TYPE:"dsplan:projectType",CAN_READ_ACCESS:"readAccess",NO_ACCESS:"No Access",DEBUG:"false",OBJECT_TYPE:"objectType",XPROJECT_COLLAB_SPACE:"dsplan:hasCollaborativeSpace",ALL_ITEMS:"all",STATE_ATTR:"state",PASSIVE_TASKS_ATTR:"passiveTasks",SEQUENCEORDER_ATTR:"sequenceOrder",PREDTASKSEQNUMBER_ATTR:"predTaskSeqNumber",PREDECESSORS_ATTR:"predecessors",ESTIMATED_BENEFIT_ATTR:"estimatedBenefit",ESTIMATED_BENEFIT_UNIT_ATTR:"estimatedBenefitInputUnit",PROJECT_CONSTANTS:{EXPERIMENTS:"experiments",BASELINES:"baselines",OWNER_INFO:"ownerInfo",CALENDAR:"calendar",WORK_CALENDAR:"Work Calendar",TASKS:"tasks",PREDECESSORS:"predecessors",QUESTIONS:"questions",PROJECT_TEMPLATE:"Project Template"},PROJECT_GANTT_HAS_CHILDREN_ATTR:"hasExperimentOrBaseline",HAS_TASK_CHILDREN:"isSummaryTask",IS_PASSIVE_TASK:"warningLevel",HAS_ACTIVE_TEMPLATE:"hasActiveTemplate"};return i["6WURL_V2"]=i.RESOURCES+"v2/e6w/service/",i["6WURL_V3"]=i.RESOURCES+"v3/e6w/service/",i[i.XPLAN_SOURCE]="/v1"+i.RESOURCES,i._getDefaultParams=function(){return"?tenant="+t.get("tenant")},i.getDefaultHeaders=function(){let i=t.get("collabspace"),s={"Accept-Language":t.get("language")};return i&&e.extend(s,{SecurityContext:i}),s},i.getUrl=function(){return t.get("3DSpace")},i.getXPlanUrl=function(){return t.get("3dplan")},i.getSearchUrl=function(){return i.getUrl()+i["6WURL_V3"]+"PersonSearch"+i._getDefaultParams()+"&"},i.getObjectSearchUrl=function(){return i.getUrl()+i["6WURL_V3"]+"ObjectSearch"+i._getDefaultParams()},i.getObjectInfoUrl=function(e){return i.getUrl()+i["6WURL_V3"]+"ObjectInfo/"+e+i._getDefaultParams()},i.getContextInfoUrl=function(e){return i.getUrl()+i["6WURL_V3"]+"RiskContextInfo/"+e+i._getDefaultParams()},i.getObjectInfoUrlForXPlan=function(e){return i.getXPlanUrl()+i[i.XPLAN_SOURCE]+e+"?$mask=dsplan:MVMask.WorkPackage.Basic"},i.getImportUrlForXPlan=function(){return i.getXPlanUrl()+"/v1/invoke/dsxplan:importCSV"},i.getTaggerUrl=function(){return i.getUrl()+i["6WURL_V2"]+"Tags"+i._getDefaultParams()+i.PARAMS.SIMPLE_JSON},i.getSecurityContextUrl=function(){return i.getUrl()+i.RESOURCES+"bps/cspaces"+i._getDefaultParams()+i.PARAMS.SIMPLE_JSON},i._getResourcesUrl=function(e){return e?i.getUrl()+"/resources/":i.getUrl()+"/resources/v1/modeler/"},i.getAppUrl=function(e,t,s){let n;return n=t?i._getResourcesUrl()+e+"/"+t+i._getDefaultParams():i._getResourcesUrl()+e+i._getDefaultParams(),s||(n+=i.PARAMS.SIMPLE_JSON),n},i.getXProjectImageURL=function(){return t.get("3dplan")+"/common/images/T_dsxplan_xProject.png"},i.getExpresssionSearchUrl=function(){return i.getUrl()+i.RESOURCES+"v3/e6w/service/ExpresssionSearch"+i._getDefaultParams()+i.PARAMS.SIMPLE_JSON},i.getLinkURL=function(e){return i.getAppUrl(i.APPLICATIONS.LINKS,e)},i}),define("DS/ENOProjectMgmtModels/Models/FieldsDefinition",["UWA/Class/Model","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],function(e,t,i){"use strict";let s=e.extend({_uwaClassName:"FieldsDefinition",setFieldsDefinition:function(e,t,i){let s=this,n=this.get(e);(t=UWA.extend(t,n))&&!t.fieldDefinitionColumns&&(t.fieldDefinitionColumns={},t.fieldCompositionServiceColumns={},t.fieldCustomColumns={},t.fieldServiceColumns={},t.forEach&&t.forEach(i=>{if("field"===i.itemType){if(i.range){let e={};for(let t=0;t<i.range.item.length;t++){let s,n=i.range.item[t];e[n.value]?s=e[n.value]:(s=n,e[n.value]=n),n.helpinfo&&(s.helpInfos||(s.helpInfos={}),s.helpInfos[n.helpinfo]={display:n.display,value:n.value,helpinfo:n.helpinfo,default:n.default},Object.keys(s.helpInfos).length>1&&(i.range.item.splice(t,1),t--))}i.fieldDefinitionRangeItem=e}if(i.sixw){let t=this.getFieldTaggerMap(e);t&&(t[i.sixw]=i.name)}t.fieldDefinitionColumns[i.name]=i}else if("service"===i.itemType&&"dpm.basicFields"===i.name)i.items.forEach(i=>{if(i.range){let e={};i.range.item.forEach(function(t){e[t.value]=t}),i.fieldDefinitionRangeItem=e}if(i.sixw){let t=this.getFieldTaggerMap(e);t&&(t[i.sixw]=i.name)}t.fieldDefinitionColumns[i.name]=i});else if("service"===i.itemType&&"dpm.accessFields"===i.name)i.items.forEach(i=>{if(i.range){let e={};i.range.item.forEach(function(t){e[t.value]=t}),i.fieldDefinitionRangeItem=e}if(i.sixw){let t=this.getFieldTaggerMap(e);t&&(t[i.sixw]=i.name)}t.fieldDefinitionColumns[i.name]=i});else if("service"===i.itemType&&!0===i.custom){if(t.fieldCustomColumns["custom-fields"]=i,i.items.length>0){let n=t.fieldCustomColumns["custom-fields"]={};n.typeExtensions={},n.autoExtensions={},n.extensionAttributes={},i.items.forEach(t=>{"extensions"===t.name?s._addTypeExtensions(n.typeExtensions,n.autoExtensions,t):s._addtypeAttributes(e,n.extensionAttributes,t)})}}else if("service"===i.itemType){if(t.fieldDefinitionColumns[i.name]=i,i.items.length>0){let s=t.fieldServiceColumns[i.name]={};i.items.forEach(t=>{if(t.range){let e={};t.range.item.forEach(function(t){e[t.value]=t}),t.fieldDefinitionRangeItem=e}if(t.sixw){let s=this.getFieldTaggerMap(e);s&&(s[t.sixw]=i.name+"."+t.name)}s[t.name]=t})}}else if("composition-service"===i.itemType&&(t.fieldCompositionServiceColumns[i.name]=i,i.items.length>0)){if(i.sixw){let t=this.getFieldTaggerMap(e);t&&(t[i.sixw]=i.name)}t.fieldCompositionServiceColumns[i.name]=i}})),this.set(e,t),this.createRelatedFieldsDefinitions(i)},_addtypeAttributes:function(e,t,i){let s=t[i.extension];if(t[i.extension]||(s=t[i.extension]={}),i.range){let e={};i.range.item.forEach(function(t){e[t.value]=t}),i.fieldDefinitionRangeItem=e}if(i.sixw){let t=this.getFieldTaggerMap(e);t&&(t[i.sixw]=i.name)}s[i.name]||(s[i.name]=i)},_addTypeExtensions:function(e,t,i){i.range&&i.range.item.forEach(function(i){let s;"IPML.Automatic"!==i.value&&("IPML.NonAutomatic"!=i.value&&(e[i.value]?s=e[i.value]:(s={},e[i.value]=s)),i.display.split(",").forEach(e=>{"IPML.NonAutomatic"!=i.value?s[e]=!0:t[e]=!0}))})},createRelatedFieldsDefinitions:function(e){e&&e.length&&e.forEach(e=>{let t=e&&e.split(".");t&&t.forEach((e,s)=>{let n=this.get(e);n||((n=i.findObject(this.get(t[s-1]),"name",e)).items.push(n),this.setFieldsDefinition(e,n.items))})})},setFieldTaggerMap:function(e,t){let i=UWA.clone(e||{},!1),s=this.get(t);s&&(s.fieldTaggerMap=i),this.set(t,s)},getFieldsDefinition:function(e){let t=this.get(e);return t&&t.items||t},getFieldTaggerMap:function(e){let t=this.get(e);return t&&t.fieldTaggerMap},getFieldDefinitionColumn:function(e,t,i){let s=i||this.getFieldsDefinition(e);if(s)return s.fieldDefinitionColumns[t]},getFieldServiceColumn:function(e,t,s){let n=this.getFieldsDefinition(e);if(!n)return;if(e===t||s===t)return i.findObject(n,"name",s);let r,o=n.fieldServiceColumns;return o?(r=o[t])?n.fieldServiceColumns[t][s]:void 0:(r=i.findObject(n,"name",t))?i.findObject(r.items||r,"name",s):void 0},getFieldCompositionServiceColumnn:function(e,t){let i=this.getFieldsDefinition(e);if(i)return i.fieldCompositionServiceColumns[t]},getFieldRangeItems:function(e,t){let i=this.getFieldDefinitionColumn(e,t),s=i&&i.range&&i.range.item;return s&&s.filter(e=>Boolean(Object.keys(e).length))},getFieldRangeItemsForHelpInfo:function(e,t,i){let s=[],n=this.getFieldRangeItems(e,t);return n&&n.forEach(e=>{(e.helpInfos&&e.helpInfos[i]||e.helpinfo===i)&&s.push(e)}),s},getFieldRangeItemActualValue:function(e,t,i){let s=this.getFieldRangeItems(e,t);return s&&s[i]&&s[i].value},getFieldRangeItemObject:function(e,t,i){return this.getFieldDefinitionColumn(e,t).fieldDefinitionRangeItem[i]},getFieldCustomColumn:function(e,t,i,s){let n=this._getFieldCustomColumnFields(e);if(n&&n.typeExtensions){let e=n.typeExtensions[t];if(!e)return;return this._getCustomColumnForTypeExtension(void 0,i,n,e,s)}},getFieldCustomColumns:function(e,t,i){let s={},n=this._getFieldCustomColumnFields(e);if(n&&n.typeExtensions){let e;if(t)(e=n.typeExtensions[t])&&this._getCustomColumnForTypeExtension(s,void 0,n,e,i);else for(let t in n.typeExtensions)(e=n.typeExtensions[t])&&this._getCustomColumnForTypeExtension(s,void 0,n,e,i)}return s},getFieldCustomColumnsForTypes:function(e,t,i){let s={},n=this._getFieldCustomColumnFields(e);if(n&&n.typeExtensions){let e;t.forEach(t=>{t&&(e=n.typeExtensions[t])&&this._getCustomColumnForTypeExtension(s,void 0,n,e,i)})}return s},isProjectType:function(e){if(!this.projectTypes){let e=this.getFieldDefinitionColumn("tasks","projectTypesForSearch");e&&(this.projectTypes=e.fieldDefinitionRangeItem[t.TYPENAMES.PROJECT_SPACE].display)}return-1!==this.projectTypes.indexOf(e)},isTaskType:function(e){this.taskTypes||(this.taskTypes=this.getFieldDefinitionColumn("tasks","taskTypes"));let t=this.taskTypes.fieldDefinitionRangeItem[e];return Boolean(t&&"isatask"===t.helpinfo)},_getCustomColumnForTypeExtension:function(e,t,i,s,n){for(let r in s){if(!s.hasOwnProperty(r))continue;if(n&&i.autoExtensions[r])continue;let o=i.extensionAttributes[r];if(o)if(e)UWA.merge(e,o);else if(t){let e=o[t];if(e&&e.name===t)return e}}},_getFieldCustomColumnFields:function(e){let t=this.getFieldsDefinition(e);if(!t)return;let i=t.fieldCustomColumns;return i&&i["custom-fields"]}});return s._instance=s._instance||new s,s._instance}),define("DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection",["UWA/Core","UWA/Class/Collection","DS/WAFData/WAFData","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Models/FieldsDefinition"],function(e,t,i,s,n,r){"use strict";return t.extend({_uwaClassName:"ENOProjectMgmtBaseCollection",setup:function(e){return this.resetOperationFlags(),this.listenTo(this,{onError:this.removeModelFromCollection}),e&&e.isRelatedData&&this.listenTo(this,{onAdd:this.relatedDataAdded,onRemove:this.relatedDataRemoved}),this._parent.apply(this)},sync:function(e,t,n){if(n.proxy=s.PASSPORT,n.ajax=i.authenticatedRequest,n.headers=s.getDefaultHeaders(),"read"===e)return n.url=this.getUrl(e,n),Object.assign({ajax:i.authenticatedRequest},n),n.headers[s.CONTENT_TYPE]?(n.method=s.POST,n.data=this.convertToRequestData(e,void 0,n),this._parent(e,t,n)):this._parent(e,t,n)},convertToRequestData:function(e,t,i){return"$ids="+i.idList},parse:function(e){let t,i=e.csrf&&e.csrf.value;return i&&n.prototype.setCSRF(i),e.definitions&&e.definitions.length&&r.setFieldsDefinition(this.getFieldDefinitionSource(),e.definitions,this.getRelatedFieldDefinitionSources()),e.data&&e.data.length>0?t=e.data[0].history?e.data[0].history:e.data:e.cspaces&&e.cspaces.length>0?t=e.cspaces:e.member?t=e.member:e.length>0&&(t=e),t},getFieldDefinitionSource:function(){return this._fieldDefinitionSource},relatedDataAdded:function(t,i,s){let n=e.clone(s||!1);n.noServer||(!n.ignoreAddref&&this.relatedDataToAdd.push(t),this._alreadyHasObjectInRelatedData(t.id,this.relatedDataToDelete)&&this._removeModelFromArray(this.relatedDataToDelete,t))},relatedDataRemoved:function(t,i,s){let n=e.clone(s||!1);n.noServer||(this._alreadyHasObjectInRelatedData(t.id,this.relatedDataToAdd)?this._removeModelFromArray(this.relatedDataToAdd,t):n.ignoreAddref||this.relatedDataToDelete.push(t))},_removeModelFromArray:function(e,t){for(let i=0;i<=e.length;i++)if(e[i].get("id")===t.get("id")){e.splice(i,1);break}},_alreadyHasObjectInRelatedData:function(t,i){return(i=i||this).length&&i.find(i=>e.equals(i.id,t)||i.get("physicalId")===t||i.get("name")===t||i.get("tempId")===t||"iam:"+i.get("name")===t)},convertRelatedDataToRequestData:function(t,i,s){let n=!1,r=[],o=e.clone(s||{},!1);return this._processRelatedData(t,r,o),r.length>0&&(i[s.key]=r,n=!0),n},_processRelatedData:function(t,i,n){let r,o,l=this,a=[],c=e.clone(n||{},!1);this.forEach(function(e){if(r=l.relatedDataToAdd.includes(e)?"create":t,e){let t=e.convertToRequestData(r,!0,c);t&&((o=t.updateAction)!==s.UPDATE_ACTION.NONE&&(e.isXPlanObject()&&delete t.image,i.push(t)),o===s.UPDATE_ACTION.CREATE&&a.push(e))}}),a.length&&this.remove(a,{noServer:!0}),this.relatedDataToDelete&&this.relatedDataToDelete.forEach(function(e){i.push(e.convertToRequestData("delete",!0,n))})},isModelsAddedOrRemoved:function(){return Boolean(this.relatedDataToAdd.length||this.relatedDataToDelete.length)},resetOperationFlags:function(){let e=this;this.forEach(t=>{!(e.relatedDataToAdd.length&&this._alreadyHasObjectInRelatedData(t.id,e.relatedDataToAdd))&&t.hasChanged()&&(t.set(t.previousAttributes()),t.resetChangedAttrs())}),this.relatedDataToAdd=[],this.relatedDataToDelete=[]},removeAll:function(){if(this.length){let e=this._models;this.reset(),this.relatedDataToDelete=e}},removeModelFromCollection:function(e){if(e&&e.isNew&&e.isNew()){let t=this._alreadyHasObjectInRelatedData(e.id||e.get("tempId"),this);this.remove(t)}},getFirstModelId:function(){return this.first().id},updateExistingRelatedDataItems:function(e,t){let i;e&&e.length&&e.forEach(e=>{(i=this.get(e.id))&&i.handleParseForResult(e,t)})},getRelatedFieldDefinitionSources:function(){return this._relatedFieldDefinitionSources}})}),define("DS/ENOProjectMgmtModels/Utils/SearchUtil",["UWA/Core","UWA/Class/Events","DS/E6WCommonUI/Search","DS/ENOProjectMgmtModels/Models/AppSettings"],function(e,t,i,s){"use strict";let n=t.extend({pictureAPIConfig:{pictureAPIPrefix:"/api/user/getpicture/login/",pictureAPISuffixMini:"/format/mini",pictureAPISuffixNormal:"/format/normal"},userPictureURL:function(e,t,i){let n="";if(!i||"Group"!==i.type&&"Group Proxy"!==i.type){if(e){let i=this.pictureAPIConfig.pictureAPISuffixMini,r=s.get("3DSwym");"normal"===t&&(i=this.pictureAPIConfig.pictureAPISuffixNormal),n=r?r+this.pictureAPIConfig.pictureAPIPrefix+e+i:require.toUrl("DS/ENOProjectMgmtCommonComponents/assets/images/defaultProfile.png")}}else n=i.imageUrl;return n},computeSourceParameters:function(t){let s=i.computeSourceParameters.apply(this,arguments);if(t.specificSourceParameter){let i=Object.keys(t.specificSourceParameter),n=i.length;for(let r=0;r<n;r++){let n=i[r];e.merge(s[n],t.specificSourceParameter[n])}}if(t.additionalQuery){let e=Object.keys(s),i=e.length;for(let n=0;n<i;n++){let i=e[n];t.additionalQuery[i]&&s[i].additional_query&&(s[i].additional_query+=t.additionalQuery[i])}}return s}});return n.implement(i),n.prototype}),define("DS/ENOProjectMgmtModels/Models/NoAccessModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/ENOProjectMgmtModels/Constants/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,s,n){"use strict";return i.extend({_uwaClassName:"NoAccessModel",idAttribute:"physicalId",init:function(i,r){let o="noAccessModelId_"+t.getUUID(),l=e.extend(i||{},{name:s.NO_ACCESS,title:n.NO_ACCESS,image:require.toUrl("DS/ENOProjectMgmtCommonComponents/assets/images/NoAccess.png")});this._parent(l,r),this.set("physicalId",o),this._changed={}},canReadAccess:function(){return!1},dataForRendering:function(){return{title:this.get("title"),image:this.get("image")}},sync:Function.prototype,convertToRequestData:Function.prototype})}),define("DS/ENOProjectMgmtModels/Models/RequestDataForClassification",["DS/ENOProjectMgmtModels/Models/RequestData"],function(e){"use strict";return e.extend({_uwaClassName:"RequestDataForClassification",toJSON:function(){return JSON.stringify(this.get("dataObject")||this.get("data"))}})}),define("DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/WAFData/WAFData","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/RequestData","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Models/NoAccessModel","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/RequestDataForClassification","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Utils/StorageDataUtil","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],function(e,t,i,s,n,r,o,l,a,c,u,d,f,g){"use strict";let h=function(e){return e&&e.hasOwnProperty("actualValue")&&(e=e.actualValue),e},p=i.extend({_uwaClassName:"ENOProjectMgmtBaseModel",init:function(){this._parent.apply(this,arguments),this.listenTo(this,{onSync:this.resetChangedAttrs,onDestroy:this.destroyModelFromCollection})},getUrl:function(){return this.url},getClassificationUrl:function(e){let t=void 0;return e.mask&&(t=e.classifiedItemId?f.getAppUrl(f.APPLICATIONS.LIBRARIES,f.APPLICATIONS.CLASSFIEDITEM+(e.operation?"/"+e.operation:"")):f.getAppUrl(f.APPLICATIONS.LIBRARIES,f.APPLICATIONS.CLASSFIEDITEM+"/"+this.get("id")+(e.operation?"/"+e.operation:"")),t+=f.PARAMS.MASK+e.mask),t},parse:function(e,t){let i=void 0;try{if(!e)return;let s=!t.idList&&t.method;if(e.csrf&&(o.prototype.setCSRF(e.csrf.value),delete e.csrf),this._setFieldDefinition(e),!(i=this._validateData(e,t)))return;for(let e in i)if(i.hasOwnProperty(e))if(e===i.csrf)o.prototype.setCSRF(i.csrf.value),delete i.csrf;else{if(i.member&&i.member.length>0)return i.member;{let n,r;t.fieldDefinition?(r=t.fieldDefinitionSource,(n=a.getFieldServiceColumn(r,t.fieldDefinition.name,e))||r===this.getFieldDefinitionSource()||(r=this.getFieldDefinitionSource(),n=a.getFieldServiceColumn(r,t.fieldDefinition.name,e))):this.getFieldDefinitionSource&&a.getFieldDefinitionColumn(this.getFieldDefinitionSource(),e)?(r=this.getFieldDefinitionSource(),n=a.getFieldDefinitionColumn(r,e)):this.getFieldDefinitionSource&&a.getFieldCompositionServiceColumnn(this.getFieldDefinitionSource(),e)?(r=this.getFieldDefinitionSource(),n=a.getFieldCompositionServiceColumnn(this.getFieldDefinitionSource(),e)):(r=this.getCustAttrFieldDefinitionSource())&&(n=a.getFieldCustomColumn(r,this.get("type")||i.type,e)),this._parseFields(i,e,n,r,s,t)}}}catch(e){throw t.onFailure&&t.onFailure(e),e}return i},_getHeaders:function(t){let i=f.getDefaultHeaders(),s=t&&t.headers;return s&&e.extend(i,s),i},getCachedData:function(e,t){return d.get(t.storageKey||e)},sync:function(e,t,i){if(i&&i.noServer)return i&&i.onComplete&&("delete"===e&&this.dispatchEvent("onDestroy",[this,this.collection,i]),i.onComplete()),{cancel:Function.prototype};if(i.externalService?i.ajax=s.request:(i.proxy=f.PASSPORT,i.ajax=s.authenticatedRequest),i.headers=this._getHeaders(i),"read"===e){let s;if(i.model=t,i.url=this.getUrl(e,i),!i.refresh&&t.get("id")&&(s=this.getCachedData(t.id,i)),!s)return i.headers[f.CONTENT_TYPE]?(i.method=f.POST,i.data=this.convertToRequestData(e,void 0,i),this._parent(e,t,i)):this._parent(e,t,i);i.onComplete(s)}else{if("create"===e){let t;return i.url=this.getUrl(e,i),i.wait=!0,i.timeout=25e4,i.method=f.POST,i.headers[f.CONTENT_TYPE]||(i.headers[f.CONTENT_TYPE]=f.ACCEPT_APPLICATION_JSON),i.no3DSpace&&(i.headers["x-requested-with"]="XMLHttpRequest"),t=i.classifiedItemId&&i.operation?this.convertToClassificationRequestData(e,void 0,i):this.convertToRequestData(e,void 0,i),this._parent("update",t,i)}if("update"===e||"patch"===e){let t;if(i.url=this.getUrl(e,i),i.wait=!0,i.method=f.PUT,i.headers[f.CONTENT_TYPE]||(i.headers[f.CONTENT_TYPE]=f.ACCEPT_APPLICATION_JSON),t=i.classifiedItemId&&i.operation?this.convertToClassificationRequestData(e,void 0,i):this.convertToRequestData(e,void 0,i))return this._parent("update",t,i);i.onComplete&&i.onComplete()}else if("delete"===e){i.url=this.getUrl(e,i),i.wait=!0,i.method=f.PUT,i.headers[f.CONTENT_TYPE]||(i.headers[f.CONTENT_TYPE]=f.ACCEPT_APPLICATION_JSON);let t=this.convertToRequestData(e,void 0,i);return this._parent("update",t,i)}}},createRelatedDataItems:function(e,t){return new(require("DS/ENOProjectMgmtModels/Collections/RelatedDataItems"))(e,t)},convertToClassificationRequestData:function(e,t,i){let s=this,r=new c;if(i.method=f.POST,i.headers[f.CSRF_TOKEN]||(i.headers[f.CSRF_TOKEN]=o.prototype.getCSRF().value,i.headers["DS-API-Version"]="1.0"),"modify"!==i.operation){let e={ClassID:this.get("id"),["add"===i.operation?"ObjectsToClassify":"ObjectsToDeclassify"]:[{identifier:i.classifiedItemId,source:n.get("3DSpace"),type:i.type,relativePath:i.relativePath}]};return r.set("dataObject",e),r}{let e=this.get("ClassificationAttributes"),t={},i=[{referencedObject:{source:"https://3dexperience.com/3DSpace",type:"dslib:ClassifiedItem",identifier:this.get("id"),relativePath:"resources/v1/modeler/dslib/dslib:ClassifiedItem/"+this.get("id")},attributes:t}],n={};if(e&&e.forEach(e=>{let i=e.get("Attributes");if(e.isAttributesNew)e.isAttributesNew=!1,i&&i.forEach(i=>{let r=i.name.split(" ").join("");n[r]||e.get(r)===i.value||s._setAttributeValueForResponse(t,e.get(r),i.name)});else{let r=e.changedAttributes();for(let e in r)if(r.hasOwnProperty(e)){let o=s.existsInOriginalList(i,e);o&&!n[e]&&(n[e]=!0,s._setAttributeValueForResponse(t,r[e],o))}}}),Object.keys(t).length>0)return t.cestamp=this.get("cestamp"),r.set("data",i),r}},_setAttributeValueForResponse:function(t,i,s){let n=this;if(e.is(i,"array")){let e=[];i.forEach(t=>{e.push(n._getAttributeValueBaseOnType(t))}),t[s]=e}else t[s]=n._getAttributeValueBaseOnType(i)},_setFieldDefinition:function(e){if(e.definitions&&e.definitions.length){if(this.getFieldDefinitionSource()===f.APPLICATIONS.RISK){let t=e.definitions.find(e=>e.name===f.APPLICATIONS.RISK);a.setFieldsDefinition(this.getFieldDefinitionSource(),t.items)}else if(this.getFieldDefinitionSource()===f.APPLICATIONS.OPPORTUNITY){let t=e.definitions.find(e=>e.name===f.APPLICATIONS.OPPORTUNITY);a.setFieldsDefinition(this.getFieldDefinitionSource(),t.items)}else a.setFieldsDefinition(this.getFieldDefinitionSource(),e.definitions,this.getRelatedFieldDefinitionSources());delete e.definitions}},_getAttributeValueBaseOnType:function(t){return"boolean"===e.typeOf(t)?"TRUE"===t||t:"date"===e.typeOf(t)?this.convertDateToResponseForClassification(t):t},existsInOriginalList:function(e,t){let i=!1;return e.forEach(e=>{if(e.name.split(" ").join("")===t)return i=e.name,!0}),i},_validateData:function(e,t){let i=void 0;if(e.data&&e.data.length>0&&!0===e.success&&200===e.statusCode)this.unset("canEdit",t),delete e.success,delete e.statusCode,i=e.data[0],e=e.data;else if(e.member&&e.member.length>0){if(e.member[0].ChildClasses||e.member[0].ParentClassification||e.member[0].ClassificationAttributes||e.member[0].ClassAttributes||"dslib:ClassifiedItemBaseMask"===t.mask)i=e.member[0];else if("dslib:ReverseClassificationMask"===t.mask)return}else i=e;return i&&i.tempId&&delete i.tempId,i},_parseFields:function(t,i,s,n,r,o){if(s){if("service"===s.itemType&&"subTypesInfo"!==i){let l,a={parse:!0,add:!0,remove:!1,merge:!0,parentId:t.id,url:this.getUrl(void 0,{id:t.id}),fieldDefinition:s,fieldDefinitionSource:n,silent:!0,idList:o.idList,method:o.method};l=this.get(i),!e.is(t[i],"object")||t[i]instanceof e.Class.Collection||(t[i]=[t[i]]),!o.refresh&&l&&l.resetOperationFlags?(!r&&l.reset(),l.isModelsAddedOrRemoved()||!l.length?(l.resetOperationFlags(),l.set(t[i],a)):l.updateExistingRelatedDataItems(t[i],a),t[i]=l):t[i]=this.createRelatedDataItems(t[i],a)}else if("UTC"===s.format&&t[i]){let n=s.name;if(e.is(t[i],"array")){let e=[];t[i].forEach(t=>{e.push(this.convertDate(n,t,!0))}),t[i]=e}else t[i]=this.convertDate(n,t[i],!0)}}else if("ChildClasses"===i||"ParentClassification"===i||"ClassificationAttributes"===i||"ClassAttributes"===i){let e={parse:!0,add:!0,remove:!1,merge:!0,parentId:t.id,fetchSource:f.APPLICATIONS.LIBRARIES,subType:"ChildClasses"===i?f.APPLICATIONS.CLASS:f.APPLICATIONS.LIBRARY,silent:!0};t[i].member?"ClassAttributes"===i&&t[i].member?t[i]=t[i].member:t[i]=this.createRelatedDataItems(t[i]&&t[i].member,e):"ClassAttributes"!==i&&(t[i]=this.createRelatedDataItems(t[i]&&t[i],e))}else"ClassID"!==i||t.id?"cestamp"===i&&(t[i]=t[i]):t.id=t[i]},getUpdateAction:function(e,t){let i=this.isNew(),s=f.UPDATE_ACTION.NONE;switch(e){case"create":s=t&&!i?f.UPDATE_ACTION.CONNECT:f.UPDATE_ACTION.CREATE;break;case"patch":case"update":s=!t||!i&&this.id?this.hasChanged()?f.UPDATE_ACTION.MODIFY:f.UPDATE_ACTION.NONE:f.UPDATE_ACTION.CONNECT;break;default:s=t?this.performDeleteOnDisconnect?f.UPDATE_ACTION.DELETE:f.UPDATE_ACTION.DISCONNECT:f.UPDATE_ACTION.DELETE}return s},convertToRequestData:function(t,i,s){let n=e.clone(s||{},!1),l=this,c=new r,u=[],d={},g=this.get("id"),p=this.get("type"),S=this.get("tempId"),A=this.serviceId;if(g&&(d.id=g),p&&(d.type=p),S&&(d.tempId=S),A&&(d.serviceId=A),s.externalService||s.no3DSpace||(d.updateAction=this.getUpdateAction(t,n.fieldDefinition)),"delete"!==t){let i,r,o=this.previousAttributes(),c=this.changedAttributes();this.keys().forEach(function(u){if("canEdit"!==u){if(s.fieldDefinition?(r=s.fieldDefinitionSource,(i=a.getFieldServiceColumn(r,s.fieldDefinition.name,u))||r!==u||s.fieldDefinition.name!==u||(i=a.get(u))):(r=l.getFieldDefinitionSource(),(i=a.getFieldDefinitionColumn(r,u))||(i=a.getFieldCompositionServiceColumnn(r,u))),!i){let e=l.getCustAttrFieldDefinitionSource();e&&(i=a.getFieldCustomColumn(e,l.get("type"),u))}if(n.ignoreFieldDefinitions||i)if(l.performCreateAndConnect||i&&"service"===i.itemType){n.fieldDefinition=i,n.fieldDefinitionSource=l.getFieldDefinitionSource(),n.key=u;let e=l.get(u);if(e&&e.convertRelatedDataToRequestData){let i=e.convertRelatedDataToRequestData(t,d,n);n.fieldDefinition&&delete n.fieldDefinition,i&&d.updateAction===f.UPDATE_ACTION.NONE&&(d.updateAction=f.UPDATE_ACTION.MODIFY)}else delete n.fieldDefinition}else if(c&&void 0!==c[u]&&null!==c[u]){if(void 0!==o[u]?d[u]=h(c[u]):d[u]=h(l.get(u)),i&&"UTC"===i.format){let t=i.name;if(e.is(d[u],"array")){let e=[];d[u].forEach(i=>{e.push(l.convertDate(t,i))}),d[u]=e}else d[u]=l.convertDate(t,d[u])}}else"create"===t&&(d[u]=h(l.get(u)),i&&"uom"===i.format&&(d[u]=a.getFieldRangeItemActualValue(l.getFieldDefinitionSource(),u,d[u])))}})}if(s.ignoreFields&&s.ignoreFields.forEach(e=>{delete d[e]}),s.externalService||s.no3DSpace)return c.set(d),c;{if(u.push(d),c.set("data",u),c.set("csrf",o.prototype.getCSRF()),i)return d;let s=!1,n=c.get("data");if(e.is(n,"array")&&Object.keys(n[0]).length>3&&(s=!0),s||"delete"===t)return c}},setTempId:function(){this.set("tempId",t.getUUID())},dataForRendering:function(){let e=this.toJSON();return this.convertToJSON(e)},convertToJSON:function(t){let i=Object.keys(t),s=i.length;for(let n=0;n<s;n++){let s=i[n],r=t[s];if(r instanceof e.Class.Collection){let e=[],i=r.length;if(i)for(let t=0;t<i;t++)e.push(r.at(t).dataForRendering());t[s]=e}}return t.name=t.path||t.name||t.title,t.physicalId=t.id,t.canEdit=this.get("canEdit"),t},convertDate:function(e,t,i){if(t=new Date(t),i)return t;let s=this.startDateAttrs,n=this.endDateAttrs,r=s&&-1!==s.indexOf(e),o=!r&&n&&-1!==n.indexOf(e);if("Invalid Date"!==t.toString()){let e=0,i=t.getDate(),s=t.getMonth(),n=t.getFullYear();return r?e=8:o&&(e=17),t.setUTCHours(e,0,0,0),t.setMonth(s,i),t.setFullYear(n),t.toISOString()}},convertDateToResponseForClassification:function(t){return t&&"Invalid Date"!==t.toString()&&e.Date.strftime(t,"%Y/%m/%d@12:%M:%S:GMT")||""},canCreate:function(){return"TRUE"===this.get(f.CREATE_DATA)},isSimpleTask:function(){return"TRUE"===this.get(f.IS_SIMPLE_TASK)},getOwnerUrl:function(){let e=this.get("owner"),t=this.get("ownerName");if(e||t)return u.userPictureURL(e||t,"normal")},getTransferObject:function(e){let t=this.get("type"),i=this.get("name"),s=this.get("physicalId")||this.id,r=this.serviceId||f.SPACE_SOURCE,o=n.get("3DSwym");"Person"===t&&o&&(t="pno:Person",s="iam:"+i,r="3DSwym");let l={objectId:s,objectType:t,serviceId:r,image:this.get("image"),objectType_Internal:t,displayName:this.title,i3dx:g.i3dx(this),displayType:g.translateType(t),source:window.widget.getValue("appId")||"X3DCSMA_AP",envId:n.get("tenant")||window.widget.getValue("x3dPlatformId")};return e=g.concatTransferObject(l,e)},getTransferObjectsForRelatedData:function(t){let i,s=this.get(t);return s&&s instanceof e.Class.Collection&&s.forEach(function(e){i=e.getTransferObject(i)}),i},isPersonType:function(){let e=this.get("type");return"Person"===e||"pno:Person"===e},set:function(){let t=e.clone(arguments[1]||{},!1),i=this._parent.apply(this,arguments);return t.parse&&this.resetChangedAttrs(),i},get:function(e){switch(e){case"canEdit":return this.isNew()||this.canModify();case"image":return this.get("thumbnail")||this.get("typeicon")||this._parent.apply(this,arguments)}return this._parent.apply(this,arguments)},getImage:function(e,i){return i=i||this.serviceId,e&&!t.isAbsoluteUrl(e)&&i===f.XPLAN_SOURCE?n.get(f.XPLAN_SOURCE)+e:e},getCollabSpace:function(){let e=this.getContextModel();return e&&e.get("project")},getFieldDefinitionSource:function(){return this._fieldDefinitionSource},getCustAttrFieldDefinitionSource:function(){return this._custAttrFieldDefinitionSource||this.getFieldDefinitionSource()},getRelatedFieldDefinitionSources:function(){return this._relatedFieldDefinitionSources},isComplete:function(e){return(e=e||this.state)===f.COMPLETE_STATE},canEdit:function(){return this.get("canEdit")},canModify:function(){return"TRUE"===this.get(f.MODIFY_DATA)},canReadAccess:function(){return"TRUE"===this.get(f.CAN_READ_ACCESS)},canDelete:function(){return"TRUE"===this.get(f.DELETE_DATA)},canPromote:function(){return"TRUE"===this.get(f.PROMOTE_DATA)},canDemote:function(){return"TRUE"===this.get(f.DEMOTE_DATA)},canFromConnect:function(){return"TRUE"===this.get(f.FROM_CONNECT_DATA)},canToConnect:function(){return"TRUE"===this.get(f.TO_CONNECT_DATA)},canRMCConnect:function(e){return"TRUE"===(e=e||this.get(f.CAN_RMC_CONNECT))},canChangeOwner:function(){return"TRUE"===this.get(f.CAN_CHANGE_OWNER)},getModelAccessMap:function(){return{canModify:this.canModify(),canDelete:this.canDelete(),canDemote:this.canDemote(),canPromote:this.canPromote(),canToConnect:this.canToConnect(),canFromConnect:this.canFromConnect(),canChangeOwner:this.canChangeOwner()}},getCESStamp:function(){return this.get("cestamp")},resetChangedAttrs:function(){this._changed={}},getContextModel:function(){let e=this.get(f.CONTEXT_ATTR);return e&&e.length&&e.at(0)},getActionsAttrsAccessMap:function(){let t=this.getModelAccessMap();return e.merge(t,{isComplete:this.isComplete()})},iterateRelatedItemsForViewAccess:function(e,t){if(!this.isNew()){let i,s,n;t&&t.length?t.forEach((e,r)=>{(s=e.get("name"))!==f.NO_ACCESS&&((n=e.canReadAccess()||this.isNew()&&e.canCreate())||(t.remove(e),t.add(new l,{at:r}),i=!0))}):e===f.CONTEXT_ATTR&&(t.add(new l),i=!0),i&&t.resetOperationFlags()}return t},isSpaceObject:function(){return this.serviceId===f.SPACE_SOURCE||this.serviceId===f.SPACE_SOURCE.toLowerCase()},isXPlanObject:function(){return this.serviceId===f.XPLAN_SOURCE},destroyModelFromCollection:function(){let t=e.clone(arguments[2]||{},!1);d.remove(this.id),this.collection&&this.collection.remove(this.id,t)},getModelForRelations:function(){return new i({source:f.SPACE_SOURCE,tenant:n.get("tenant"),objectId:this.id})},hasChildren:function(){return"TRUE"===this.get(this.HAS_CHILDREN_ATTR)},getModelConstructorBasedOnType:function(e){return g.getModelConstructorBasedOnType(e)},handleParseForResult:function(e,t){this.parse(e,t),this.set(e,t),this.resetChangedAttrs()},getAttributes:function(){return this._attributes},getRelatedModelById:Function.prototype,getChildRelationsNames:Function.prototype});return Object.defineProperty(p.prototype,"title",{get:function(){return this.get("title")||this.get("name")||""}}),Object.defineProperty(p.prototype,"type",{get:function(){return this.get("type")||this.get("objectType")}}),Object.defineProperty(p.prototype,"state",{get:function(){return this.get("state")}}),Object.defineProperty(p.prototype,"serviceId",{get:function(){return this.get("serviceId")||f.SPACE_SOURCE}}),p}),define("DS/ENOProjectMgmtModels/Models/Importer",["UWA/Core","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e,t,i){"use strict";return i.extend({_uwaClassName:"Importer",_fieldDefinitionSource:t.APPLICATIONS.IMPORTER,getUrl:function(e,i){return i||(i={}),t.getImportUrlForXPlan()}})}),define("DS/ENOProjectMgmtModels/Models/ChatPromptParser",["UWA/Core","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e,t,i){"use strict";return i.extend({_uwaClassName:"ChatPromptParser",_fieldDefinitionSource:t.APPLICATIONS.CHAT_PROMPT,getUrl:function(e,t){return t||(t={}),this.isNew()?this.getChatPromptParserUrl(void 0,e,t):("delete"===e&&(t.force=!0),this.getChatPromptParserUrl(this.get("id"),e,t))},getChatPromptParserUrl:function(e,t,i){return i.headers.Authorization="Bearer MFmzEM92W3nhR4pCATSlBhOsdtk6c2cPDmzXof9UJTU=","https://px101.prod.exalead.com/v1/chat/completions"},parse:function(e,t){let i;try{if(e.choices&&e.choices.length>0&&e.choices[0].message&&e.choices[0].message.content){let t={},s=e.choices[0].message.content.replaceAll(/\\n/g,"\\n"),n=s.indexOf("{",0),r=s.lastIndexOf("}");s=s.substr(n,r-n+1),t.responseInfo=JSON.parse(s),i=t}else i=e}catch(e){throw t.onFailure&&t.onFailure(e),e}return this._parent(i,t)}})}),define("DS/ENOProjectMgmtModels/Models/RelatedDataItem",["UWA/Core","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return t.extend({_uwaClassName:"RelatedDataItem",idAttribute:"id",setup:function(e,t){t&&t.fetchSource===i.APPLICATIONS.LIBRARIES&&(this.url=i.getAppUrl(t.fetchSource,t.subType+"/"+this.get("id")),this.set("typeicon",{iconName:"library-class"})),this._parent.apply(arguments)},getUrl:function(e,t){if(t){let e=this.get("id");t.fetchSource===i.APPLICATIONS.CONTEXT_INFO||"ContextInfo"===t.fetchSource?this.url=i.getContextInfoUrl(e):t.fetchSource===i.APPLICATIONS.OBJECT_INFO?this.url=i.getObjectInfoUrl(e):t.fetchSource===i.APPLICATIONS.LIBRARIES?this.url=i.getAppUrl(t.fetchSource,t.subType+"/"+e,!0):t.fetchSource===i.APPLICATIONS.PROFILE?this.url=i.getAppUrl(t.fetchSource,e):t.classifiedItemId&&t.operation?("add"===t.operation?this.url=i.getAppUrl(i.APPLICATIONS.LIBRARIES,i.APPLICATIONS.CLASSFIEDITEM,!0):this.url=i.getAppUrl(i.APPLICATIONS.LIBRARIES,i.APPLICATIONS.CLASSFIEDITEM+"/remove",!0),this.url+=i.PARAMS.NONPUBLICRESOURCE+"true"):this.performCreateOrEdit?this.url=i.getLinkURL(e):this.performCreateAndConnect&&(this.url=i.getUrl()+this.resourceURL+i._getDefaultParams()+i.PARAMS.SIMPLE_JSON),this.addParams(t)}return this.url},addParams:function(e){e.classifiedItemId||e.operation||!e||e.fetchSource===i.APPLICATIONS.LIBRARIES||("true"===i.DEBUG&&(this.url+=i.PARAMS.DEBUG+i.DEBUG),e.owned&&(this.url+=i.PARAMS.OWNED+e.owned),e.fields&&(this.url+=i.PARAMS.FIELDS+e.fields),e.include?this.url+=i.PARAMS.INCLUDE+e.include:this.url+=i.PARAMS.INCLUDE+"none",e.definition&&(this.url+=i.PARAMS.DEFINITION+e.definition),e.rmcType===i.TYPENAMES.OPPORTUNITY&&(this.url+=i.PARAMS.RMCTYPE+i.TYPENAMES.OPPORTUNITY)),e.mask&&(this.url+=i.PARAMS.MASK+e.mask),e.depth&&(this.url+=i.PARAMS.DEPTH+e.depth)},toJSON:function(){let e=this._parent.apply(this,arguments),t=this.get("image");return t&&(e.image=t),e},parse:function(t,i){i.url&&(this.url=i.url),e.is(t,"string")&&(t=JSON.parse(t)),(t=this._parent(t,i)).hasfiles="Document"===t.type;let s=t.image,n=this.id||t.id;return t.id=n,t.physicalId=n,s&&(t.image=this.getImage(s,t.serviceId)),t},createRelatedDataItems:function(e,t){return this.collection&&new this.collection.__proto__.constructor(e,t)||this._parent.apply(this,arguments)},isNew:function(){return!this.get("id")}})}),define("DS/ENOProjectMgmtModels/Models/Calendar",["UWA/Core","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e,t,i,s){"use strict";return s.extend({_uwaClassName:"Calendar",_fieldDefinitionSource:t.APPLICATIONS.WORK_CALENDARS,getUrl:function(e,i){let s=this.get("relativePath");return this.isNew()?this.getCalendarUrl(void 0,e,i):s?(this.url=t.getUrl()+s+"?",i&&(i.type&&(this.url+=t.PARAMS.TYPE+i.type),i.debug&&(this.url+=t.PARAMS.DEBUG+i.debug),i.fields&&(this.url+=t.PARAMS.FIELDS+i.fields),i.include&&(this.url+=t.PARAMS.INCLUDE+i.include),i.force&&(this.url+=t.PARAMS.FORCE+i.force)),this.url):this.getCalendarUrl(this.get("id"),e,i)},getCalendarUrl:function(e,s,n){let r=!1;if(e?(this.url+="/"+e,this.url=t.getAppUrl(t.APPLICATIONS.WORK_CALENDARS,e)):this.url=t.getAppUrl(t.APPLICATIONS.WORK_CALENDARS),n&&(n.type&&(this.url+=t.PARAMS.TYPE+n.type),n.debug&&(this.url+=t.PARAMS.DEBUG+n.debug),n.owned&&(this.url+=t.PARAMS.OWNED+n.owned),n.fields&&(this.url+=t.PARAMS.FIELDS+n.fields),n.include&&(this.url+=t.PARAMS.INCLUDE+n.include),n.force&&(this.url+=t.PARAMS.FORCE+n.force),r=n.ignoreFieldDefinition),!r){let e=i.getFieldsDefinition(this.getFieldDefinitionSource());e&&e.fieldDefinitionColumns||(this.url+=t.PARAMS.DEFINITION+"true")}return this.url},parse:function(t,i){i.url&&(this.url=i.url),e.is(t,"string")&&(t=JSON.parse(t)),(t=this._parent(t,i)).hasfiles="Document"===t.type;let s=t.image||t.typeicon,n=this.id||t.id;return t.id=n,t.physicalId=n,s&&(t.image=this.getImage(s,t.serviceId)),t}})}),define("DS/ENOProjectMgmtModels/Models/Task",["DS/ENOProjectMgmtModels/Models/RelatedDataItem","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";let s=["tasks","passiveTasks"],n=e.extend({_uwaClassName:"Task",HAS_CHILDREN_ATTR:i.HAS_TASK_CHILDREN,_fieldDefinitionSource:i.APPLICATIONS.TASK,_custAttrFieldDefinitionSource:i.APPLICATIONS.PROJECT,startDateAttrs:["estimatedStartDate"],endDateAttrs:["dueDate"],getParentModel:function(){let e=this.get("dpmParent");return e&&e.first()},hasParent:function(){return Boolean(this.getParentModel())},hasChildren:function(){let e=this._parent.apply(this,arguments);if(!e){let t=this.get(i.PASSIVE_TASKS_ATTR);e=Boolean(t&&t.length)}return e},getChildRelationsNames:function(){return s},getUrl:function(e,t){let i=UWA.clone(t||{},!1);return this.isNew()?this.getTASKUrl(void 0,e,i):i.mask?this.getClassificationUrl(i):i.classifiedItemId?this._parent.apply(this,arguments):("delete"===e&&(i.force=!0),this.getTASKUrl(this.get("id"),e,i))},getTASKUrl:function(e,t,s){return e?(this.url+="/"+e,this.url=i.getAppUrl(i.APPLICATIONS.TASK,e)):this.url=i.getAppUrl(i.APPLICATIONS.TASK),s&&(s.type&&(this.url+=i.PARAMS.TYPE+s.type),s.debug&&(this.url+=i.PARAMS.DEBUG+s.debug),s.owned&&(this.url+=i.PARAMS.OWNED+s.owned),s.fields&&(this.url+=i.PARAMS.FIELDS+s.fields),s.include&&(this.url+=i.PARAMS.INCLUDE+s.include),s.force&&(this.url+=i.PARAMS.FORCE+s.force),this.get("warningLevel")&&(this.url+="&relId="+this.get("relId"))),this.url},isComplete:function(){let e=this.get("state");return Boolean("Complete"===e||this.completed)},isSummaryTask:function(){return"TRUE"===this.get(this.HAS_CHILDREN_ATTR)},isTypeBaseline:function(){let e=this.get("kindOfProjectBaseline")||this.get("kindOfBaseline");return e?"TRUE"===e:this.get("type")===i.TYPENAMES.PROJECTBASELINE},getDependenciesCount:function(){let e=this.get("predecessors"),t=e?e.length:0,i=this.get("successors");return t+(i?i.length:0)},convertToRequestData:function(e,t,i){let s=this._parent(e,t,i);if(s){let e=this.get("operation");e&&(s.operation=e),s.tasks&&(s.children=s.tasks,delete s.tasks)}return s},getModelConstructorBasedOnType:function(e){let i;if(t.isProjectType(e)){i=require("DS/ENOProjectMgmtModels/Models/Project")}else t.isTaskType(e)&&(i=n);return i||this._parent.apply(this,arguments)},isTypeGate:function(){return"TRUE"===this.get("isTypeGate")},isTypeMilestone:function(){return"TRUE"===this.get("isTypeMilestone")},IsGateOrMilestone:function(){return this.isTypeGate()||this.isTypeMilestone()},parse:function(e){return e&&(e.children&&UWA.extend(e,{tasks:e.children}),(e=this._parent.apply(this,arguments)).tasks&&UWA.extend(e,{children:e.tasks}),(e.title||e.name)&&UWA.extend(e,{title:e.title||e.name}),e.hasOwnProperty("warningLevel")&&delete e.sequenceOrder),e},getPassiveTasks:function(){return this.get("passiveTasks")}});return n}),define("DS/ENOProjectMgmtModels/Models/Person",["UWA/Core","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return t.extend({idAttribute:"id",_uwaClassName:"Person",setup:function(){this.get("type")||this.set("type","Person")},getUrl:function(e,t){if(t){let e=t.model;if("3DSwym"===(e&&e.serviceId))return s.getSearchUrl()+"searchStr="+e.id;t.isSearch?this.url=s.getSearchUrl()+t.term+"*":"ObjectInfo"===t.fetchSource&&(this.url=s.getObjectInfoUrl(this.get("id"))),"true"===s.DEBUG&&(this.url+=s.PARAMS.DEBUG+s.DEBUG),t.owned&&(this.url+=s.PARAMS.OWNED+t.owned),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include?this.url+=s.PARAMS.INCLUDE+t.include:this.url+=s.PARAMS.INCLUDE+"none",t.definition&&(this.url+=s.PARAMS.DEFINITION+t.definition)}return this.url},parse:function(t){return t=this._parent.apply(this,arguments),e.is(t,"array")&&(t=t[0]),t.image=i.userPictureURL(t.name,"normal"),t.fullName=this.getFullName(t)||t.fullname,t.physicalId=t.id,t.hasfiles="Document"===t.type,t},isNew:function(){return!this.get("id")},getFullName:function(e){let t=this.get("firstname")||e&&e.firstname,i=this.get("lastname")||e&&e.lastname;return t&&i&&t+" "+i},get:function(e){switch(e){case"fullname":case"fullName":case"title":return this.getFullName()}return this._parent.apply(this,arguments)}})}),define("DS/ENOProjectMgmtModels/Collections/Persons",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Models/Person","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";let n=e.extend({_uwaClassName:"Persons",model:i,getUrl:function(e,t){if(t&&t.isSearch)return s.getSearchUrl()+t.searchParams+"*"}});return n.typeAheadCallback=function(e,i,s,r){let o="*",l=e.excludeSearchTypes;l&&(o="*  NOT "+t.buildSearchTypeQuery(l,{source:e.searchSource}));let a,c="searchStr="+encodeURIComponent(i)+o;c+="&typeStr="+(a=e&&e.searchTypes?encodeURIComponent(e.searchTypes):"person"===e.type?"Person":"*"),r.isSearch=!0,r.searchParams=c;let u=new n;r.onComplete=function(){let e=[];u.forEach(function(i){let s=i.get("type"),n=i.get("name")||"",r=i.getFullName(),o=i.get("title")||n,l=i.get("image")||t.userPictureURL(n)||"";e.push({value:i.id,label:r||o,name:r,image:l,icon:l,login:n,sourceId:"3DSpace",rowObject:i,"ds6w:type":s})}),u.reset(),s(e,r)},u.fetch(r)},n}),define("DS/ENOProjectMgmtModels/Utils/DataUtils",["UWA/Core","UWA/Utils","UWA/Class/Events","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/Models/DropValidator","DS/ENOProjectMgmtModels/Models/Person","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/RelatedDataItem","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Utils/StorageDataUtil","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,s,n,r,o,l,a,c,u){"use strict";var d=new Intl.DateTimeFormat(window.widget&&window.widget.lang,{weekday:"short",year:"numeric",month:"short",day:"numeric"});let f={objectMap:{},getObjectForAdding:function(i,s){let n,r=e.clone(s||{},!1),o={id:f.removeBracketLongURI(i||t.getUUID())},l=r.attrs,a=r.fetchOptions,d=r.sourceInfo,g=r.modelConstructor;l&&e.merge(o,l);let h=new g(o,d);if(a){let e=a.onComplete,t=a.onFailure;a.onComplete=function(){a.doNotCache||(c.set(h.id,h),f.objectMap[h.id]=h,"Person"===(n=h.get("type"))&&c.set(h.get("name"),h)),e&&e.apply(this,arguments)},a.onFailure=function(e,i){let s=f.getErrorMessage(e,i);f.dispatchEvent("showNotification",[{message:s||u.FAILED_TO_RETRIEVE_OR_ACCESS},"error"]),t&&t.apply(this,arguments)},h.fetch(a)}return h},getModelConstructorBasedOnType:function(e){return"Person"===e||"pno:Person"===e?r:l},getDetailedObject:function(e,t){let i;if(t){let s=t.length;for(let n=0;n<s;n++){let s=t[n];if(s.id===e){i=s;break}}}return i},getObjectDataFromDropData:function(e){let t=e.objectId,i=e.objectType,s=e.serviceId;"3DSwym"===s&&"pno:Person"===i&&(t=t.split(":")[1],i=i.split(":")[1]);let n={id:t,physicalId:t,name:e.displayName,title:e.title||e.displayName,serviceId:s,tenant:e.envId,image:e.image||e.displayPreview,type:i,path:e.path};return"Person"===i&&(n.name=t),n},getObjectDataFromFedSearchOrTypeAheadData:function(e){let t=e.id,i=e["ds6w:type_value"]||e["ds6w:type"]||e.type;"3DSwym"===e.serviceId&&"pno:Person"===i&&(t=t.split(":")[1],i=i.split(":")[1]);let s=e.label||e["ds6w:label"]||e.name,n={id:t,physicalId:t,name:s,title:e.title||s,serviceId:e.serviceId||e.sourceId||"3DSpace",tenant:o.get("tenant"),image:e.image||e.preview_url||e.type_icon_url,type:i,path:e.path};return"Person"===i&&(n.name=e.login||t),n},getObjectDataFromDropSearchOrTypeAhead:function(e){let t,i=e.dropObj,s=e.detailedObject,n=e.context;return i?t=this.getObjectDataFromDropData(i):s?t=this.getObjectDataFromFedSearchOrTypeAheadData(s):n&&((t={}).id=n.id),t},getIntlDateFormat:function(e){let t=e;return"Invalid Date"!==(e=new Date(e)).toString()&&(t={actualValue:e,displayValue:isNaN(e.getTime())?t:d.format(e)}),t},getFormattedDate:function(e){return new Date(e)},validateModificationsPending:function(t,i){let s=e.clone(t||{},!1),n=s.isReload,r=s.parentView,o=s.yesEventFunc,l=s.noEventFunc,a="deleteButton"!==(i&&i.dsModel&&i.dsModel.domId)&&f.isGridViewSelectedAndGetCurrentModel(r);if(a&&!n&&a.saving)f.dispatchEvent("showNotification",[{message:u.SAVE_IN_PROCESS},"warning"]),l&&l.apply(CustomAlert,arguments);else if(a&&a.modificationsPending){let t=a.get("title"),i=n&&u.SAVE_CONFIRM_MSG||u.CANCEL_CONFIRM_MSG,r=(n?u.UN_SAVED_CHANGES:u.CANCEL_CHANGES)+' "'+t+'"';e.extend(s,{title:r,message:i,yesLabel:u.YES,noLabel:u.NO}),arguments[0]=s,f.dispatchEvent("showConfirmDialog",arguments)}else{let e=Array.prototype.slice.call(arguments,1);o&&o.apply(void 0,e)}},isGridViewSelectedAndGetCurrentModel:function(e){return f.isGridViewSelected()&&e&&e.getSelectedCurrentModel()},isGridViewSelected:function(){return"gridView"===o.getSelectedViewName()},getLoggedInUserFullName:function(){return o.get("firstName")+" "+o.get("lastName")},isLoggedInUserSelected:function(e){return e&&e.get("name")===o.get("user")},getPersonObjectInfo:function(t,i){let s=e.clone(i||{},!1).fetchOptions;s=e.clone(s||{},!1);let n=e.merge(s,{fetchSource:"ObjectInfo"});return f.getObjectForAdding(t,{attrs:{type:"Person",serviceId:"3DSwym"},fetchOptions:n,modelConstructor:r})},isSelfAssigned:function(t){let i=t.get("assignees");if(t instanceof e.Class.Model){let e=c.get(t.id);e&&(i=e.assignees)}return Boolean(i&&i.length&&f.findObject(i,"name",o.get("user")))},validateDroppedObjects:function(e,t,i){let s=e&&e.length;if(s){let r,o;for(var n=0;n<s;n++)if(r=e[n],o=f.validateDroppedObject(r,t))return f.dispatchEvent("showNotification",[{message:o},"error"]),i&&i(),o}},validateDroppedObject:function(e,t){return n.validateDroppedObject(e,t)},alreadyHasObjectInRelatedData:function(e,t){t=f.removeBracketLongURI(t);let i=e&&e.length&&e._alreadyHasObjectInRelatedData(t);if(i){let e=i.getTransferObject();return e&&e.data.items[0]}},getObjectById:function(e){return f.objectMap[e]},removeBracketLongURI:function(t){return t&&e.is(t,"string")&&t.startsWith("<")&&t.endsWith(">")&&(t=t.substr(1,t.length-2)),t},concatTransferObject:function(t,i){let s=e.clone(t||{},!1);s.serviceId=s.serviceId||"3DSpace";let n=s.i3dx?"2.1":"1.0";return i&&i.data?i.data.items.push(s):i={protocol:"3DXContent",version:n,source:s.source,data:{items:[s]}},i},findIndex:function(t,i,s){return t instanceof e.Class.Collection&&(t=t.toArray()),t.findIndex(e=>e[i]===s)},findObject:function(t,i,s){return t&&t.length&&t.find(function(t){let n=t[i]||t.get&&t.get(i);return e.is(s,"array")?-1!==s.indexOf(n):n===s})},filterObjects:function(t,i,s){return t&&t.length&&t.filter(function(t){let n=t[i]||t.get&&t.get(i);return e.is(s,"array")?-1!==s.indexOf(n):n===s})},getAttributeValues:function(t,i){return t instanceof e.Class.Collection?t.pluck(i):t&&t.length&&t.map(function(e){return e[i]})},cloneJSONObject:function(e){return e&&JSON.parse(JSON.stringify(e))},getRangeValueFromFieldDefinition:function(e,t,i){return a.getFieldDefinitionColumn(i,e).fieldDefinitionRangeItem[t]},getErrorMessage:function(t,i){return e.is(t,"string")&&(t=f.parseJSONString(t)),e.is(i,"string")&&(i=f.parseJSONString(i)),i&&i.internalError||i&&i.error||i&&i.message||i&&i.msg||t&&t.error||t&&t.err&&t.err.message||t&&t.err||t&&t.message||i||u.ERROR},parseJSONString:function(t){let i;try{i=JSON.parse(t)}catch(s){i=t||u.ERROR,e.log(s)}return i},getDragDataKey:function(){return this.isIE()||this.isEdge()?"text":"text/searchitems"},getSeverityItem:function(e){let t=e.riskLevel;return{severityIndex:e.severityIndex,backgroundColor:e.backgroundColor,textColor:e.textColor,actualValue:t,displayValue:t+"-"+(e.nls[widget.lang]||e.name)}},getNLS:function(e,t,i){let s=((i=i?i+"_":"")+t).toUpperCase().replace(" ","_");return e&&e.get(s)},getURLParameter:function(e,t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[null,""])[1].replace(/\+/g,"%20"))||null},i3dx:function(e){return e.get("i3dx")||"i3dx:"+e.serviceId+"!"+e.id}};return e.merge(f,s),f.properties=Object.keys(f),f=(f=i.extend(f))._instance||new f}),define("DS/ENOProjectMgmtModels/Collections/SecurityContexts",["UWA/Class/Model","UWA/Class/Collection","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/SecurityContext","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection"],function(e,t,i,s,n,r){"use strict";return r.extend({_uwaClassName:"SecurityContexts",model:n,getUrl:function(){return s.getSecurityContextUrl()},isAllOrgAreSame:function(){let e,t,i,s,n;return this.length&&3===(s=(i=this.at(0).get("displayName")).split(".")).length&&(t=s[1]),this.every(i=>(n=i.get("displayName"),e=n.split("."),!(!t||t!==e[1])))},getSortedPreferences:function(){let i,s,n,r={},o=new t([],{comparator:"label"}),l=this.isAllOrgAreSame();return this.forEach(function(t){i=t.get("name");let r=(s=t.get("displayName")).split(".");3===r.length&&(s=r[2]+" ● ",l||(s+=r[1]+" ● "),s+=r[0]),o.push(new e({label:s,value:i})),t.get("isDefault")&&(n=i)}),o.sort(),r.list=o.toJSON(),!n&&this.length>0&&(n=this.at(0).get("name")),r.defaultValue=n||"",r}})}),define("DS/ENOProjectMgmtModels/Collections/RelatedDataItems",["UWA/Core","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/NoAccessModel","DS/ENOProjectMgmtModels/Models/RelatedDataItem","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection"],function(e,t,i,s,n,r){"use strict";return r.extend({_uwaClassName:"RelatedDataItems",model:n,setup:function(){return this._parent({isRelatedData:!0})},getUrl:function(e,t){let s=t.sourceType||i.APPLICATIONS.RISK;this.url=i.getAppUrl(s,t&&t.id?t.id+"/"+t.relatedSource:void 0);let n=t.customParams&&t.customParams.fieldDefinition;return n&&(this.url+=i.PARAMS.DEFINITION+n),this.url},_prepareModel:function(e){let t;return e.type?t=this.model.prototype.getModelConstructorBasedOnType(e.type):e.name===i.NO_ACCESS&&(t=s),t&&(this.model=t),this._parent.apply(this,arguments)}})}),define("DS/ENOProjectMgmtModels/Models/ModelWithContext",["UWA/Core","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e,t,i,s){"use strict";return s.extend({_uwaClassName:"ModelWithContext",setup:function(s){let n=e.clone(s||{},!1).context||i.get("context");if(n&&this.isNew()){let e=new t;e.add(n),this.set("context",e)}}})}),define("DS/ENOProjectMgmtModels/Models/SaveModels",["DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/RequestData","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Models/ModelWithContext"],function(e,t,i,s,n){"use strict";return n.extend({_uwaClassName:"SaveModels",getUrl:function(e,t){this.isDuplicate=this.get("isDuplicate");let s=this.get("fieldDefinitionSource")||this.getFieldDefinitionSource();return this.isDuplicate&&(s+="/"+i.APPLICATIONS.DUPLICATE),s===i.APPLICATIONS.PROFILE?(this.url=i.getAppUrl(s,s===i.APPLICATIONS.PROFILE&&"applyprofile"),this.url+=i.PARAMS.COPYCONTEXT+"false"):this.url=i.getAppUrl(s),this.url=i.getAppUrl(s,s===i.APPLICATIONS.PROFILE&&"applyprofile"),t&&(t.type&&(this.url+=i.PARAMS.TYPE+t.type),t.debug&&(this.url+=i.PARAMS.DEBUG+t.debug),t.owned&&(this.url+=i.PARAMS.OWNED+t.owned),t.fields&&(this.url+=i.PARAMS.FIELDS+t.fields),t.include&&(this.url+=i.PARAMS.INCLUDE+t.include),t.force&&(this.url+=i.PARAMS.FORCE+t.force),t.customParams&&(this.url+=t.customParams)),this.url},convertToRequestData:function(n){let r;if("create"===n){if((this.get("fieldDefinitionSource")||this.getFieldDefinitionSource())===i.APPLICATIONS.PROFILE)return this._parent.apply(this,arguments);r=new t;let n,o,l,a=[],c=this.get("selectedNodes"),u=this.get("massUpdateModel");if(c&&c.length&&(this.isDuplicate?a=c.map(e=>({id:e.id})):c.forEach(e=>{(l=e.model).set(u.changedAttributes()),(o=l.convertToRequestData("update"))&&(n=o.get("data"))&&n.length&&n.forEach(e=>{delete e.contextId,a.push(e)})})),!a.length){let t=e.setHelper.apply(this,arguments).options;return void(t.onComplete&&t.onComplete.apply(this,arguments))}r.set("data",a),r.set("csrf",s.prototype.getCSRF())}return r},parse:function(e,t){let s,n,r=this,o=e&&e.data,l=this.get("fieldDefinitionSource")||this.getFieldDefinitionSource();if(this.isDuplicate)e=this.handleDuplicateDataModelParse(o,t);else if(l===i.APPLICATIONS.PROFILE){if(o&&o.length){let i=o[0];for(let s in i)if("tempId"!==s&&i.hasOwnProperty(s)){i=i[s],e=this.handleDuplicateDataModelParse(i,t);break}}}else o&&o.length&&o.forEach(e=>{s=r.getSelectedNodesById(e.id),(n=s&&s.model)&&n.parse(e,t)});return e},getSelectedNodesById:function(e){let t=this.get("selectedNodes");return t&&t.length&&t.find(function(t){return t.model.id===e})},handleDuplicateDataModelParse:function(e,t){let i,s=[],n=this.get("modelInstance");return e&&e.length&&e.forEach(e=>{(i=new n).handleParseForResult(e,t),s.push(i)}),{duplicatedModels:s}},getModelConstructorBasedOnType:function(e){return e===i.TYPENAMES.RISK_PROFILE?require("DS/ENOProjectMgmtModels/Models/Profile"):this._parent.apply(this,arguments)}})}),define("DS/ENOProjectMgmtModels/Collections/Tasks",["DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Models/Task","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Tasks",_fieldDefinitionSource:s.APPLICATIONS.PROJECT,model:t,getUrl:function(e,t){return this.url=s.getAppUrl(s.APPLICATIONS.TASK),this.url+=s.PARAMS.TYPE+s.TYPENAMES.TASK,t.completed&&(this.url+=s.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=s.PARAMS.OWNED+"true":"assigned"===t.filter&&(this.url+=s.PARAMS.ASSIGNED+"true")),t.debug&&(this.url+=s.PARAMS.DEBUG+t.debug),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED),t.customParams&&(this.url+=t.customParams),this.url},_getModelBasedOnType:function(e){return this._parent(e,t)},convertToRequestData:function(e,t,i){return"$ids="+i.idList}})}),define("DS/ENOProjectMgmtModels/Models/RskOpp",["UWA/Core","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Models/ModelWithContext","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s,n){"use strict";return i.extend({_uwaClassName:"RskOpp",idAttribute:"id",startDateAttrs:["estimatedStartDate"],endDateAttrs:["estimatedFinishDate"],getUrl:function(e,t){return t||(t={}),this.isNew()?this.getApplicationUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getApplicationUrl(this.get("id"),e,t))},getApplicationUrl:function(e,t,i){let s=this.getAppUrlType();return this.url=e?n.getAppUrl(s,e):n.getAppUrl(s),i&&(i.type&&(this.url+=n.PARAMS.TYPE+i.type),"true"===n.DEBUG&&(this.url+=n.PARAMS.DEBUG+n.DEBUG),i.owned&&(this.url+=n.PARAMS.OWNED+i.owned),i.fields&&(this.url+=n.PARAMS.FIELDS+i.fields),i.include&&(this.url+=n.PARAMS.INCLUDE+i.include),i.force&&(this.url+=n.PARAMS.FORCE+i.force)),this.url},createRelatedDataItems:function(e,i){return new t(e,i)},isValidConfiguration:function(){return"TRUE"===this.get("validConfiguration")},hasContextViewAccess:function(e){let t=(e=e||this.get("context"))&&e.length&&e.at(0);return t&&t.canReadAccess()},getRMCActualId:function(){let e=this.get("rmcActual");return e&&e.length&&e.at(0).id||this.get("rmcId")},getRPNValue:function(e,t,i){let s=this.getMatrixCellInfo(e,t,i);return s&&s.rpn},getMatrixCellInfo:function(e,t,i){let s=this.getMatrixCells(e);return s&&s.find(function(e){return e.Xvalue===t&&e.Yvalue===i})},getMatrixCellInfoBasedOnKey:function(e,t,i){let n=this.getMatrixCells(e);return s.findObject(n,t,i)},getMatrixCells:function(t){let i=t instanceof e.Class.Model?t.get("matrix"):t;return i&&i.cells},getSeverityInfo:function(e,t,i){let n;if(e){let r=e.get("matrix").severity,o=this.getMatrixCellInfo(e,t,i);n=o&&s.findObject(r,"riskLevel",o.riskLevel)}return n},getRiskSeverityInfo:function(e,t,i){let s=this.get(t||"impact"),n=this.get(i||"probability");return this.getSeverityInfo(e,s,n)},getSeverityLevel:function(e){let t=this.getRiskSeverityInfo(e),i=t&&s.getSeverityItem(t);return i&&i.displayValue},getMappedValue:function(e){let t,i=this.get("impact"),n=this.get("probability"),r=e&&e.get("matrix"),o=r&&r.severity,l=e&&this.getMatrixCellInfo(e,i,n);if(l&&o){let i;i=l.defaultCellId?this.getMatrixCellInfoBasedOnKey(e,"cellId",l.defaultCellId):this.getMatrixCellInfo(e,l.Xvalue,l.Yvalue);let n=s.findObject(o,"riskLevel",i.riskLevel),r=n&&s.getSeverityItem(n);i&&r&&(t={matrixXY:i.Xvalue+i.Yvalue,mappedMatrixXY:i.Xvalue+" * "+i.Yvalue,mappedSeverity:r.displayValue,severityItem:r},this.set({mappedMatrixXY:t.mappedMatrixXY,mappedSeverity:t.mappedSeverity}))}return t},set:function(){let t=s.setHelper.apply(this,arguments),i=e.clone(t.attrs||{},!1);if(i&&i.hasOwnProperty(n.CONTEXT_ATTR)){let e=i[n.CONTEXT_ATTR];e&&(i[n.CONTEXT_ATTR]=this.iterateRelatedItemsForViewAccess(n.CONTEXT_ATTR,e))}return this._parent.apply(this,arguments)},get:function(e){let t=this._parent.apply(this,arguments);switch(e){case"canEdit":t&&!this.isNew()&&(t=this.canRMCConnect()||!this.hasContextViewAccess()&&this.isValidConfiguration())}return t}})}),define("DS/ENOProjectMgmtModels/Utils/FederatedSearch",["UWA/Core","UWA/Class/Events","DS/WAFData/WAFData","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Constants/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,s,n,r){"use strict";let o={_buildRequestData:function(e){let t=e.sources||[],i=s.get("3DSpace")&&s.get("user")||s.get("dsUserLogin");return{label:e.label||"3dplan-"+i+"-"+Date.now(),locale:e.locale||"en",with_synthesis:e.withSynthesis||Boolean(t&&-1!==t.indexOf("swym")),with_synthesis_attribute:e.withSynthesisAttribute||Boolean(t&&-1!==t.indexOf("swym")),select_predicate:e.selectPredicateArray,order_field:"relevance",refine:e.refine,select_file:["icon","thumbnail_2d"],nresults:e.numResults||10,start:0,tenant:s.get("tenant"),query:e.query,source:e.sources,specific_source_parameter:e.specific_source_parameter}},_buildRequest:function(e){let t={method:"POST",type:"json",headers:{"Content-Type":"application/json"}};return t.data=JSON.stringify(this._buildRequestData(e)),t.onComplete=e.onComplete,t.onFailure=e.onFailure,t},escapeTwoByteChars:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/（/g,"\\（")).replace(/）/g,"\\）")).replace(/［/g,"\\［")).replace(/］/g,"\\］")).replace(/｛/g,"\\｛")).replace(/｝/g,"\\｝")).replace(/｟/g,"\\｟")).replace(/｠/g,"\\｠")).replace(/〖/g,"\\〖")).replace(/〗/g,"\\〗")).replace(/【/g,"\\【")).replace(/】/g,"\\】")).replace(/〚/g,"\\〚")).replace(/〛/g,"\\〛")).replace(/ー/g,"\\ー")).replace(/\u3000/g," ")},sendRequest:function(e){let t=s.get("3DSearch")+"/search";return i.authenticatedRequest(t,this._buildRequest(e))},filterSearchSources:function(e){o._validFederatedSearchSources=o._validFederatedSearchSources||{};let t=e.slice(),n=s.get("3DSearch");return o._validFederatedSearchSources[n]?t=e.filter(function(e){return-1!==o._validFederatedSearchSources[n].indexOf(e)}):n&&!o._gettingSources&&(o._gettingSources=!0,i.authenticatedRequest(n+"/search/source",{onComplete:function(e){delete o._gettingSources,o._validFederatedSearchSources[n]=e&&JSON.parse(e).source},onFailure:function(){delete o._gettingSources}})),t},computeTypeAheadEntryBasedOnFedSearchResult:function(e){let t=e.attributes,i=t.length,s={};for(let e=0;e<i;e++){let i=t[e],n=i.value;switch(i.name){case"resourceid":s.value=n;break;case"preview_url":case"type_icon_url":n&&-1===n.indexOf("iconLargeDefault")&&(s.image=n);break;case"ds6w:type":case"ds6w:what/ds6w:type":s["ds6w:type"]=n;break;case"ds6w:label":s.label=n;break;case"sourceid":s.sourceId=n}}return s},hasLoadedFederatedSearchSources:function(){return o._validFederatedSearchSources},getFederatedQueryCriteria:function(t){let i,s=e.clone(t||{},!1),n=s.criteria;if("person"===s.fieldType){if(1!==n.length)throw new Error(r.INVALID_SEARCH_CRITERIA_PERSON);i=0===n[0].length?"":"personOrGroup:("+n[0]+")"}else i=n.length>1?"("+n.join(" OR ")+")":0===n.length||0===n[0].length?"":n[0];return i}};return o.eventDispatcher=new t,o.QUERY_MAX_LENGTH=8192,o.REQUEST_DELAY=100,o}),define("DS/ENOProjectMgmtModels/Models/Tag",["UWA/Core","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e,t,i,s){"use strict";return s.extend({_uwaClassName:"Tag",updateTagger:function(e,t,s,n){let r=i.getFieldTaggerMap(s);r&&this._updateTaggerBasedFieldMap(t,r,s,n,e)},_updateTaggerBasedFieldMap:function(e,i,s,n,r){let o=this;for(let l in i){let a,c={},u=i[l],d=r&&r._defaultConfiguration;if(u.includes&&u.includes(".")){let[t,i]=u.split(".");if(l.contains("heatMap"))if(n){let n=o._setFieldValue(t,e,s),r=o._setFieldValue(i,e,s);a=r&&n&&r+" * "+n}else{let t=e.getMappedValue(d);a=t&&t.mappedMatrixXY}else{let r=e.get(t);r&&r.length>0?r.forEach(function(e,t){let r=o._setFieldValue(i,e,s,n);r&&(c[t]=r)}):this.unset(l)}}else a=l.contains("type")?e.type||u:l.contains("lastModifiedBy")?t.getLoggedInUserFullName():l.contains("reserved")||l.contains("isLastRevision")?u:o._setFieldValue(u,e,s,n,r);a&&(c[0]=a),Object.keys(c).length&&this._setTaggerValue(this,l,c)}},_setFieldValue:function(t,s,n,r,o){let l=i.getFieldDefinitionColumn(n,t),a=o&&o._defaultConfiguration;if(l&&l.range){let e=s.get(t),i=l.fieldDefinitionRangeItem[e];return i&&"state"===t?i.display||e:i&&i.value||e}if("originated"===t||"modified"===t){let i=s.get(t);return i&&e.Date.strftime(i,"%Y/%m/%d")}if("rpnValue"===t){if(r)return a=o.getMatrixConfigDefinition(s.getRMCActualId()),s.getSeverityLevel(a);let e=s&&s.getMappedValue(a);return e&&e.mappedSeverity}return s.get(t)},_setTaggerValue:function(e,t,i){if((i=Object.values(i)).length)if(e.get(t)){(e.get(t).length&&e.get(t).length>0?e.get(t):[]).length>0&&e.set(t,i)}else e.set(t,i);else e.unset(t)},updateSeverityTag:function(e,t,i){this._updateTaggerBasedFieldMap(e,{"_tag_implicit_ds6w:why/ds6w:fulfills/ds6w:severity":"rpnValue"},"",t,i)},updateMatrixTag:function(e,t,i){this._updateTaggerBasedFieldMap(e,t,"",i)}})}),define("DS/ENOProjectMgmtModels/Collections/Tags",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Tag","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"Tags",model:t,getUrl:function(e,t){return t.headers[i.CONTENT_TYPE]=i.COMTENT_TYPE_FORM_URL_ENCODED+";"+i.CHARSET_UTF8,this.url=i.getTaggerUrl(),this.url},convertToRequestData:function(e,t,i){return"idList="+i.idList}})}),define("DS/ENOProjectMgmtModels/Models/Risk",["DS/ENOProjectMgmtModels/Models/RskOpp","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t){"use strict";return e.extend({_uwaClassName:"Risk",_fieldDefinitionSource:t.APPLICATIONS.RISK,_sourceType:t.APPLICATIONS.RISK,setup:function(){!this.get("type")&&this.set("type",t.TYPENAMES.RISK),this._parent.apply(this,arguments)},getAppUrlType:function(){return t.APPLICATIONS.RISK}})}),define("DS/ENOProjectMgmtModels/Models/Library",["DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"Library",idAttribute:"id",setup:function(){!this.get("type")&&this.set("type","Library"),this.set("typeicon",{iconName:"library"})},getUrl:function(e,t){return t||(t={}),this.isNew()?this.getSubTypeUrl(void 0,e,t.subType||i.APPLICATIONS.LIBRARY,t):("delete"===e&&(t.force=!0),this.getSubTypeUrl(this.get("id"),e,t.subType||i.APPLICATIONS.LIBRARY,t))},getSubTypeUrl:function(e,t,s,n){return this.url,this.url=e?i.getAppUrl(i.APPLICATIONS.LIBRARIES,s+"/"+e):i.getAppUrl(i.APPLICATIONS.LIBRARIES,s),n&&(n.mask&&(this.url+=i.PARAMS.MASK+n.mask),n.depth&&(this.url+=i.PARAMS.DEPTH+n.depth)),this.url},parse:function(e){return!(e=this._parent.apply(this,arguments)).name||e.title&&""!==e.title||(e.title=e.name),e},createRelatedDataItems:function(e,i){return new t(e,i)},canModify:function(){return"TRUE"===this.get(i.MODIFY_DATA)},canDelete:function(){return"TRUE"===this.get(i.DELETE_DATA)},canPromote:function(){return"TRUE"===this.get(i.PROMOTE_DATA)},canDemote:function(){return"TRUE"===this.get(i.DEMOTE_DATA)},canFromConnect:function(){return"TRUE"===this.get(i.FROM_CONNECT_DATA)},canToConnect:function(){return"TRUE"===this.get(i.TO_CONNECT_DATA)}})}),define("DS/ENOProjectMgmtModels/Collections/Libraries",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Library","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"Libraries",model:t,getUrl:function(e,t){return this.url=i.getAppUrl(i.APPLICATIONS.LIBRARIES,i.APPLICATIONS.LIBRARY+"/search"),t.top&&(this.url+=i.PARAMS.TOP+t.top),this.url+=i.PARAMS.MASK+"dslib:LibraryDetailsMask",this.url}})}),define("DS/ENOProjectMgmtModels/Collections/Risks",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Risk","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Risks",_fieldDefinitionSource:s.APPLICATIONS.RISK,model:t,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.RISK),this.url+=s.PARAMS.TYPE+s.TYPENAMES.RISK,t.contextId&&(this.url+=s.PARAMS.CONTEXTID+t.contextId),t.completed&&(this.url+=s.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=s.PARAMS.OWNED+"true":"assigned"===t.filter?this.url+=s.PARAMS.ASSIGNED+"true":"organization"===t.filter&&(this.url+=s.PARAMS.ORGANIZATION+"true")),"true"===s.DEBUG&&(this.url+=s.PARAMS.DEBUG+s.DEBUG),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());return n&&n.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url}})}),define("DS/ENOProjectMgmtModels/Models/MatrixConfiguration",["UWA/Core","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],function(e,t,i,s,n){"use strict";return s.extend({_uwaClassName:"MatrixConfiguration",_fieldDefinitionSource:t.APPLICATIONS.MATRIX_CONFIGURATION,getUrl:function(e,t){return t||(t={}),this.isNew()?this.getMatrixConfigurationUrl(void 0,e,t):("delete"===e&&(t.force=!0),this.getMatrixConfigurationUrl(this.get("id"),e,t))},getMatrixConfigurationUrl:function(e,i,s){return e?(this.url+="/"+e,this.url=t.getAppUrl(t.APPLICATIONS.MATRIX_CONFIGURATION,e)):this.url=t.getAppUrl(t.APPLICATIONS.MATRIX_CONFIGURATION),s&&(s.type&&(this.url+=t.PARAMS.TYPE+s.type),"true"===t.DEBUG&&(this.url+=t.PARAMS.DEBUG+t.DEBUG),s.fields&&(this.url+=t.PARAMS.FIELDS+s.fields),s.include&&(this.url+=t.PARAMS.INCLUDE+s.include),s.force&&(this.url+=t.PARAMS.FORCE+s.force)),this.get("rmcType")===t.TYPENAMES.OPPORTUNITY&&(this.url+=t.PARAMS.RMCTYPE+t.TYPENAMES.OPPORTUNITY),this.url},createRelatedDataItems:function(e,t){return new i(e,t)},set:function(t){let i=n.setHelper.apply(this,arguments),s=e.clone(i.attrs||{},!1);if(s&&s.hasOwnProperty("configuredItems")){let e=s.configuredItems;e&&(s.configuredItems=this.iterateRelatedItemsForViewAccess("configuredItems",e))}return"import"===t&&this.isNew()&&(arguments[1]="new"),this._parent.apply(this,arguments)},get:function(e){switch(e){case"canEdit":return this.isNew()||this.canModify()}return this._parent.apply(this,arguments)},parse:function(e){let t=this._parent.apply(this,arguments);return e.tempId&&delete e.tempId,this.unset("import",{silent:!0}),t}})}),define("DS/ENOProjectMgmtModels/Collections/MatrixConfigurations",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/MatrixConfiguration","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"MatrixConfigurations",_fieldDefinitionSource:i.APPLICATIONS.MATRIX_CONFIGURATION,model:t,getUrl:function(e,t){return t.contextId?this.url=i.getAppUrl(i.APPLICATIONS.MATRIX_CONFIGURATION,t.contextId):this.url=i.getAppUrl(i.APPLICATIONS.MATRIX_CONFIGURATION),"true"===i.DEBUG&&(this.url+=i.PARAMS.DEBUG+i.DEBUG),t.fields&&(this.url+=i.PARAMS.FIELDS+t.fields),t.include&&(this.url+=i.PARAMS.INCLUDE+t.include),t.rmcType===i.TYPENAMES.OPPORTUNITY&&(this.url+=i.PARAMS.RMCTYPE+i.TYPENAMES.OPPORTUNITY),this.url+=i.PARAMS.DEFINITION+"true",this.url}})}),define("DS/ENOProjectMgmtModels/Models/Profile",["DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t){"use strict";return e.extend({_uwaClassName:"Profile",_fieldDefinitionSource:t.APPLICATIONS.PROFILE,_sourceType:t.APPLICATIONS.PROFILE,getUrl:function(e,t){return t||(t={}),this.isNew()?this.getApplicationUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getApplicationUrl(this.get("id"),e,t))},getApplicationUrl:function(e,i,s){return this.url=e?t.getAppUrl(t.APPLICATIONS.PROFILE,e):t.getAppUrl(t.APPLICATIONS.PROFILE),s&&("true"===t.DEBUG&&(this.url+=t.PARAMS.DEBUG+t.DEBUG),s.fields&&(this.url+=t.PARAMS.FIELDS+s.fields),s.include&&(this.url+=t.PARAMS.INCLUDE+s.include)),this.url},hasActiveTemplate:function(){return"TRUE"===this.get(t.HAS_ACTIVE_TEMPLATE)},parse:function(){let e=this._parent.apply(this,arguments);return this.fetched=!0,e}})}),define("DS/ENOProjectMgmtModels/Collections/Profiles",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Profile","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Profiles",_fieldDefinitionSource:s.APPLICATIONS.PROFILE,model:t,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.PROFILE),this.url+=s.PARAMS.TYPE+s.TYPENAMES.PROFILE,t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());if(!n||!n.fieldDefinitionColumns){let e=t.customParams&&t.customParams.fieldDefinition||"true";this.url+=s.PARAMS.DEFINITION+e}return this.url}})}),define("DS/ENOProjectMgmtModels/Models/Question",["UWA/Core","UWA/Promise","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/Calendar","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/RelatedDataItem"],function(e,t,i,s,n,r){"use strict";return r.extend({_uwaClassName:"Question",init:function(e,t){let i=t&&t.fieldDefinitionSource;i&&(this._fieldDefinitionSource=i),this._parent(e,t)},parse:function(e,t){return e.children&&(e.questions=e.children,delete e.children),this._parent(e,t)},convertToRequestData:function(e,t,i){let s=this._parent(e,t,i);return s.questions&&(s.children=s.questions,delete s.questions),s}})}),define("DS/ENOProjectMgmtModels/Models/SearchObject",["DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e){"use strict";return e.extend({})}),define("DS/ENOProjectMgmtModels/Collections/SearchObjects",["UWA/Core","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/SearchObject","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Utils/FederatedSearch","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,s,n,r,o,l,a,c){"use strict";let u=l.extend({_uwaClassName:"SearchObjects",model:i,getUrl:function(e,t){if(t&&t.isSearch)return o.getObjectSearchUrl()+t.searchParams}});return u.typeAheadCallback=function(i,s,o,l){s=r.escapeTwoByteChars(s);let u,d=r.filterSearchSources(i.searchSource);return u=window.widget.getValue("oldSearch")?"("+s+"* OR "+s+")":r.getFederatedQueryCriteria({criteria:[s],fieldType:i.type}),r.sendRequest({selectPredicateArray:["ds6w:label","ds6w:type","ds6w:type_value","type_icon_url","preview_url"],sources:d,query:u,locale:t.get("language"),specific_source_parameter:n.computeSourceParameters(i),withSynthesisAttribute:Boolean(d&&-1!==d.indexOf("swym")),onComplete:function(t){let i=(e.is(t,"string")?JSON.parse(t):t).results,s=[];if(i){let e=i.length;for(let t=0;t<e;t++){let e=i[t],n=r.computeTypeAheadEntryBasedOnFedSearchResult(e);s.push(n)}}o(s,l)},onFailure:function(e,t){let s;l.model.dispatchEvent("onChange:"+i.name);let n=t.error;(s="FS_INVALID_QUERY__NOT_AUTHORIZED_QUERY__WILDCARD"===n.errorCode?c.FS_INVALID_QUERY__NOT_AUTHORIZED_QUERY__WILDCARD:n.errorMessage||"")&&a.buildNotification({message:s},"error")}})},u.focusTypeAheadCallback=function(i,n,r,o){if(n.length<2){let n=e.clone(o||{},!1),l=n.model&&n.model.get(i.name),a=l&&s.getAttributeValues(l,"id")||[],c=widget.getValue(t.get("tenant"))||{},u=s.cloneJSONObject(c.recentContexts)||[];return a.length&&u.length&&(u=u.filter(function(e){return!a.includes(e.value)})),void r(u,o)}u.typeAheadCallback.apply(this,arguments)},u}),define("DS/ENOProjectMgmtModels/Models/Opportunity",["DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Models/RskOpp","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/FieldsDefinition"],function(e,t,i,s){"use strict";return t.extend({_uwaClassName:"Opportunity",_fieldDefinitionSource:i.APPLICATIONS.OPPORTUNITY,_sourceType:i.APPLICATIONS.OPPORTUNITY,setup:function(){!this.get("type")&&this.set("type",i.TYPENAMES.OPPORTUNITY),this.isNew()&&this.setDefaultUOMValues(),this._parent.apply(this,arguments)},getAppUrlType:function(){return i.APPLICATIONS.OPPORTUNITY},setDefaultUOMValues:function(){if(!this.get(i.ESTIMATED_BENEFIT_ATTR)&&this.set(i.ESTIMATED_BENEFIT_ATTR,"0"),!this.get(i.ESTIMATED_BENEFIT_UNIT_ATTR)){let e=this.getUOMInputIndex();-1!==e&&this.set(i.ESTIMATED_BENEFIT_UNIT_ATTR,e)}},getUOMInputIndex:function(t){if(!isNaN(t))return t;let n;t?n="value":(n="default",t=!0);let r=s.getFieldRangeItems(this.getFieldDefinitionSource(),i.ESTIMATED_BENEFIT_UNIT_ATTR);return r&&e.findIndex(r,n,t)}})}),define("DS/ENOProjectMgmtModels/Collections/Questions",["DS/ENOProjectMgmtModels/Models/Question","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection"],function(e,t,i,s){"use strict";return s.extend({_uwaClassName:"Questions",model:e})}),define("DS/ENOProjectMgmtModels/Collections/Opportunites",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Opportunity","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Opportunites",_fieldDefinitionSource:s.APPLICATIONS.OPPORTUNITY,model:t,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.OPPORTUNITY),this.url+=s.PARAMS.TYPE+s.TYPENAMES.OPPORTUNITY,t.contextId&&(this.url+=s.PARAMS.CONTEXTID+t.contextId),t.completed&&(this.url+=s.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=s.PARAMS.OWNED+"true":"assigned"===t.filter?this.url+=s.PARAMS.ASSIGNED+"true":"organization"===t.filter&&(this.url+=s.PARAMS.ORGANIZATION+"true")),"true"===s.DEBUG&&(this.url+=s.PARAMS.DEBUG+s.DEBUG),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());return n&&n.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url},convertToRequestData:function(e,t,i){return"$ids="+i.idList}})}),define("DS/ENOProjectMgmtModels/Collections/Calendars",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Calendar","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Calendars",_fieldDefinitionSource:s.APPLICATIONS.WORK_CALENDARS,model:t,getUrl:function(e,t){if(t.customParams&&t.customParams.includes("all")?this.url=s.getAppUrl(s.APPLICATIONS.ALL_WORK_CALENDARS):this.url=s.getAppUrl(s.APPLICATIONS.WORK_CALENDARS),this.url+=s.PARAMS.TYPE+s.TYPENAMES.WORK_CALENDARS,t.debug&&(this.url+=s.PARAMS.DEBUG+t.debug),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED),!t.ignoreDefinition){let e=i.getFieldsDefinition(this.getFieldDefinitionSource());e&&e.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true")}return this.url}})}),define("DS/ENOProjectMgmtModels/Models/ProjectTemplate",["UWA/Core","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Collections/Questions","DS/ENOProjectMgmtModels/Collections/Tasks"],function(e,t,i,s,n,r,o){"use strict";return n.extend({_uwaClassName:"ProjectTemplate",_fieldDefinitionSource:t.APPLICATIONS.PROJECT_TEMPLATE,getUrl:function(e,t){return t||(t={}),this.isNew()?this.getProjectTemplateUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getProjectTemplateUrl(this.get("id"),e,t))},getProjectTemplateUrl:function(e,i,n){this.url=t.getAppUrl(t.APPLICATIONS.PROJECT_TEMPLATE,e),n&&(n.type&&(this.url+=t.PARAMS.TYPE+n.type),n.debug&&(this.url+=t.PARAMS.DEBUG+n.debug),n.owned&&(this.url+=t.PARAMS.OWNED+n.owned),n.fields&&(this.url+=t.PARAMS.FIELDS+n.fields),n.include&&(this.url+=t.PARAMS.INCLUDE+n.include),n.force&&(this.url+=t.PARAMS.FORCE+n.force),n.customParams&&"preview"==n.customParams&&(this.url=this.url.split("?")[0]+"/preview?"+this.url.split("?")[1]));let r=s.getFieldsDefinition(this.getFieldDefinitionSource());return r&&r.fieldDefinitionColumns||(this.url+=t.PARAMS.DEFINITION+"true"),this.url},getChildRelationsNames:function(){return["children"]},sync:function(){let e=i.setHelper.apply(this,arguments).options;e.customParams&&"preview"==e.customParams&&(arguments[0]="create"),this._parent.apply(this,arguments)},parse:function(e){let t=this._parent.apply(this,arguments);return t.title=t.title||t.name,t},createRelatedDataItems:function(i,s){let n,l=e.clone(s||{},!1),a=l.fieldDefinition||l.config;switch(a&&a.name){case t.PROJECT_CONSTANTS.QUESTIONS:n=new r(i,s);break;case t.PROJECT_CONSTANTS.TASKS:n=new o(i,s);break;default:n=this._parent.apply(this,arguments)}return n}})}),define("DS/ENOProjectMgmtModels/Models/Assessment",["UWA/Core","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Collections/RelatedDataItems"],function(e,t,i,s,n){"use strict";return t.extend({_uwaClassName:"Assessment",_fieldDefinitionSource:i.APPLICATIONS.ASSESSMENT,_sourceType:i.APPLICATIONS.ASSESSMENT,getUrl:function(e,t){return t||(t={}),this.isNew()?this.getApplicationUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getApplicationUrl(this.get("id"),e,t))},getApplicationUrl:function(e,t,s){return e?(this.url+="/"+e,this.url=i.getAppUrl(i.APPLICATIONS.ASSESSMENT,e)):this.url=i.getAppUrl(i.APPLICATIONS.ASSESSMENT),s&&(s.type&&(this.url+=i.PARAMS.TYPE+s.type),"true"===i.DEBUG&&(this.url+=i.PARAMS.DEBUG+i.DEBUG),s.owned&&(this.url+=i.PARAMS.OWNED+s.owned),s.fields&&(this.url+=i.PARAMS.FIELDS+s.fields),s.include&&(this.url+=i.PARAMS.INCLUDE+s.include),s.force&&(this.url+=i.PARAMS.FORCE+s.force)),this.url},createRelatedDataItems:function(e,t){return new n(e,t)}})}),define("DS/ENOProjectMgmtModels/Collections/Assessments",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Assessment","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Assessments",_fieldDefinitionSource:s.APPLICATIONS.ASSESSMENT,model:t,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.ASSESSMENT),this.url+=s.PARAMS.TYPE+s.TYPENAMES.ASSESSMENT,t.contextId&&(this.url+=s.PARAMS.CONTEXTID+t.contextId),t.completed&&(this.url+=s.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=s.PARAMS.OWNED+"true":"assigned"===t.filter?this.url+=s.PARAMS.ASSIGNED+"true":"organization"===t.filter&&(this.url+=s.PARAMS.ORGANIZATION+"true")),"true"===s.DEBUG&&(this.url+=s.PARAMS.DEBUG+s.DEBUG),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());return n&&n.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url},convertToRequestData:function(e,t,i){return"$ids="+i.idList}})}),define("DS/ENOProjectMgmtModels/Models/Project",["UWA/Core","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/Task","DS/ENOProjectMgmtModels/Models/Calendar","DS/ENOProjectMgmtModels/Models/ProjectTemplate","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Collections/Tasks","DS/ENOProjectMgmtModels/Collections/Calendars"],function(e,t,i,s,n,r,o,l,a,c){"use strict";let u=["baselines","experiments"],d=l.extend({_uwaClassName:"Project",HAS_CHILDREN_ATTR:i.PROJECT_GANTT_HAS_CHILDREN_ATTR,_fieldDefinitionSource:i.APPLICATIONS.PROJECT,_relatedFieldDefinitionSources:["projects.tasks"],startDateAttrs:["estimatedStartDate"],endDateAttrs:["dueDate"],getParentModel:function(){let e=this.get("dpmParent");return e&&e.first()},hasParent:function(){return Boolean(this.getParentModel())},hasChildren:function(){let e=this._parent.apply(this,arguments);return e||"TRUE"===this.get(i.HAS_TASK_CHILDREN)},getChildRelationsNames:function(){let e=this.get("type");if(e!==i.TYPENAMES.EXPERIMENT&&e!==i.TYPENAMES.PROJECTBASELINE)return u},getUrl:function(e,t){return t||(t={}),this.isNew()?this.getProjectUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getProjectUrl(this.get("id"),e,t))},getProjectUrl:function(t,s,n){let r=this.type;if(!(r===i.TYPENAMES.EXPERIMENT||r===i.TYPENAMES.PROJECTBASELINE)||"delete"!==s&&"create"!==s){this.url=i.getAppUrl(i.APPLICATIONS.PROJECT,t);let e=this.get("createFromProject")||this.get("createFromProjectTemplate");if(e&&e.length>0){this.url=i.getAppUrl(i.APPLICATIONS.PROJECT,"copy");let e=this.get("copyProjectOptions")||this.get("copyProjectTemplateOptions");e&&e.length&&(this.url+=e.map(e=>"&"+(e.actualValue||e)+"=true").toString().replaceAll(",",""),this.unset("copyProjectOptions"),this.unset("copyProjectTemplateOptions"));let t=this.get("referencesReplicateOption");t?(this.url+="&copyTaskReferences=true&referencesReplicateOption="+t,this.unset("referencesReplicateOption")):this.get("createFromProject")&&(this.url+="&copyTaskReferences=true&referencesReplicateOption=copy")}}else{let e=r===i.TYPENAMES.EXPERIMENT?i.APPLICATIONS.EXPERIMENT:i.APPLICATIONS.BASELINE;if("create"===s){let t=this.get("parentId");t&&(e=t+"/"+e)}this.url=i.getAppUrl(i.APPLICATIONS.PROJECT,e)}let l=n.filter,a="all"===l,c="passiveTasks"===l;if(n){if(n.type&&(this.url+=i.PARAMS.TYPE+n.type),n.debug&&(this.url+=i.PARAMS.DEBUG+n.debug),n.owned&&(this.url+=i.PARAMS.OWNED+n.owned),n.fields&&(this.url+=i.PARAMS.FIELDS+n.fields,(a||c)&&(this.url+=",passiveTasks.title,passiveTasks.typeicon,passiveTasks.nlsType,passiveTasks.state,passiveTasks.estimatedStartDate,passiveTasks.dueDate,passiveTasks.description,passiveTasks.criticality,passiveTasks.warningLevel,passiveTasks.passiveSubtaskStatusIcon,passiveTasks.passiveSubtaskStatusValue,passiveTasks.estimatedDurationInputUnit,passiveTasks.estimatedDurationInputValue,passiveTasks.percentComplete,passiveTasks.typeicon")),n.include&&(this.url+=i.PARAMS.INCLUDE+n.include,(a||c)&&(this.url+=",passiveTasks")),n.force&&(this.url+=i.PARAMS.FORCE+n.force),n.customParams){let t=n.customParams;if(!e.is(t,"string")){let e="";for(var u in t)t.hasOwnProperty(u)&&(e+="&"+u+"="+t[u]);t=e}c&&(t+="&includePassiveTasksOnly=true"),this.url+=t}this.get("warningLevel")&&(this.url+="&relId="+this.get("relId"))}let d=o.getFieldsDefinition(this.getFieldDefinitionSource());return d&&d.fieldDefinitionColumns||(this.url+=i.PARAMS.DEFINITION+"true"),this.url},get:function(e){return"i3dx"===e?"i3dx:Project!b:"+this.id:this._parent.apply(this,arguments)},convertToRequestData:function(e,t,s){let n=this._parent(e,t,s);if("create"===e){let e=n.data&&n.get("data");this.get("createFromProject")||this.get("createFromProjectTemplate");e&&e.length&&e.forEach(e=>{e.updateAction===i.UPDATE_ACTION.CREATE&&e.calendar&&e.calendar.length>1&&e.calendar.forEach(e=>{e.Default="false"})})}return n},createRelatedDataItems:function(t,s){let n,r=e.clone(s||{},!1),o=r.fieldDefinition||r.config;switch(o&&o.name){case i.PROJECT_CONSTANTS.BASELINES:case i.PROJECT_CONSTANTS.EXPERIMENTS:n=this.collection&&new this.collection.constructor(t,s);break;case i.PROJECT_CONSTANTS.CALENDAR:n=new c(t,s);break;case i.PROJECT_CONSTANTS.TASKS:n=new a(t,s);break;default:n=this._parent.apply(this,arguments)}return n},isProgramContext:function(){return!1},isTypeBaseline:function(){let e=this.get("kindOfProjectBaseline")||this.get("kindOfBaseline");return e?"TRUE"===e:this.get("type")===i.TYPENAMES.PROJECTBASELINE},isTypeExperiment:function(){let e=this.get("kindOfExperiment");return e?"TRUE"===e:this.get("type")===i.TYPENAMES.EXPERIMENT},parse:function(t,i){t.children&&e.extend(t,{tasks:t.children}),(t=this._parent.apply(this,arguments)).tasks&&e.extend(t,{children:t.tasks}),(t.title||t.name)&&(t.title=t.title||t.name);let s=t.performRollup&&t.performRollup.at(0);return s&&(t=this._parseProjectRollup(t,s,i)),t},canDelete:function(){return"TRUE"===this.get(i.CAN_DELETE_DATA)},canModify:function(){return"TRUE"===this.get(i.CAN_MODIFY_DATA)},getModelConstructorBasedOnType:function(e){let t;switch(e){case i.PROJECT_CONSTANTS.WORK_CALENDAR:t=n;break;case i.PROJECT_CONSTANTS.PROJECT_TEMPLATE:t=r;break;default:o.isProjectType(e)?t=d:o.isTaskType(e)&&(t=s)}return t||this._parent.apply(this,arguments)},getAllTasksCount:function(e,t){return this.getAllTasks(e).length},getTasks:function(){return this.get("tasks")},getAllTasks:function(e,t){let i=this.getRecursiveTasks(void 0,[],t);return e&&i.splice(0,0,this),new a(i)},getRecursiveTasks:function(t,i,s){let n=t?t&&t.get("tasks"):this.getTasks();return n&&(n=Array.isArray(n)?void 0:n.toArray()),n&&n.length&&n.forEach(t=>{if(i.push(t),s&&e.is(t.getPassiveTasks,"function")){let e=t.getPassiveTasks(),s=e&&e.length&&e.toArray();s&&i.push(...s)}this.getRecursiveTasks(t,i,s)}),i},_parseProjectRollup:function(e,t,i){if(t){let s,n=this.getAllTasks(!0),r=t.get("children"),o=t.get("projectSequence");s=o?n:new a,r&&r.length&&r.forEach(e=>{let t=e.id,r=n.get(t);r&&(r.handleParseForResult(e,i),!o&&s.add(r))}),o&&(o=JSON.parse(o),this.updateSequenceOrderAndPredecessor(s,o));let l=s.get(this.id);l&&(e=l.toJSON()),this.additionalDataModels=s.toArray()}return e.performRollup=t&&t.get("children"),e},updateSequenceOrderAndPredecessor:function(e,t){let s,n={};for(let r in t){let o=e.get(r);o&&(o.set(i.SEQUENCEORDER_ATTR,t[r]),o.resetChangedAttrs(),(s=o.get(i.PREDECESSORS_ATTR))&&s.length&&s.forEach(e=>{n[e.id]=e}))}for(let t in n){let s=n[t],r=e.get(t);if(r){let e=r.get(i.SEQUENCEORDER_ATTR);s.set(i.PREDTASKSEQNUMBER_ATTR,e),s.resetChangedAttrs()}else{let t=e.get(s.get("To"));t.unset(i.PREDECESSORS_ATTR),t.resetChangedAttrs()}}},getRelatedModelById:function(e){if(this.id===e)return this;return this.getAllTasks().get(e)},IsGateOrMilestone:function(){return!1},getCachedData:function(){return this.dataFetched?this.dataForRendering():this._parent.apply(this,arguments)}});return d}),define("DS/ENOProjectMgmtModels/Collections/Projects",["DS/ENOProjectMgmtModels/Models/Project","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection"],function(e,t,i,s,n){"use strict";return n.extend({_uwaClassName:"Projects",_fieldDefinitionSource:s.APPLICATIONS.PROJECT,_relatedFieldDefinitionSources:["projects.tasks"],model:e,getUrl:function(e,n){this.url=s.getAppUrl(s.APPLICATIONS.PROJECT),this.url+=s.PARAMS.TYPE+s.TYPENAMES.PROJECT;let r=n.filter||t.getSelectedFilterOption(),o="all"===r,l="passiveTasks"===r;n.completed&&(this.url+=s.PARAMS.COMPLETED+n.completed),r&&(o?this.url+=s.PARAMS.ACCESSIBLE+"true":"none"!==n.completed?this.url+="&state=Create,Assign,Active,Review,Complete":this.url+="&state=Create,Assign,Active,Review"),n.debug&&(this.url+=s.PARAMS.DEBUG+n.debug),n.fields&&(this.url+=s.PARAMS.FIELDS+n.fields,(o||l)&&(this.url+=",passiveTasks.title,passiveTasks.typeicon,passiveTasks.nlsType,passiveTasks.state,passiveTasks.estimatedStartDate,passiveTasks.dueDate,passiveTasks.description,passiveTasks.criticality,passiveTasks.warningLevel,passiveTasks.passiveSubtaskStatusIcon,passiveTasks.passiveSubtaskStatusValue,passiveTasks.estimatedDurationInputUnit,passiveTasks.estimatedDurationInputValue,passiveTasks.percentComplete,passiveTasks.typeicon,DPMProject.image,DPMProject.title")),n.include&&(this.url+=s.PARAMS.INCLUDE+n.include,(o||l)&&(this.url+=",passiveTasks,DPMProject")),n.idList&&(n.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED),n.customParams?this.url+=n.customParams:(this.url+="&level=1",this.url+="&excludeSubtypes=Experiment");let a=i.getFieldsDefinition(this.getFieldDefinitionSource());return a&&a.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url},convertToRequestData:function(e,t,i){return"$ids="+i.idList},_prepareModel:function(e){let t;return e.type&&(t=this.model.prototype.getModelConstructorBasedOnType(e.type)),t&&(this.model=t),this._parent.apply(this,arguments)}})}),define("DS/ENOProjectMgmtModels/Models/BaseContext",["UWA/Core","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Collections/Risks","DS/ENOProjectMgmtModels/Collections/Opportunites","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s,n,r){"use strict";return t.extend({_uwaClassName:"BaseContext",idAttribute:"id",setup:function(t,i){let s=e.clone(i||{},!1);this._fetchSource=s.fetchSource,this._sourceType=s.sourceType,this._fieldDefinitionSource=s.fieldDefinitionSource;let n=this.get(r.OBJECT_TYPE);return n&&this.set("type",n),this._parent.apply(this,arguments)},getUrl:function(e,t){t.fetchSource===r.APPLICATIONS.CONTEXT_INFO?(this.url=r.getContextInfoUrl(this.id),this._sourceType===r.APPLICATIONS.OPPORTUNITY&&(this.url+=r.PARAMS.RMCTYPE+r.TYPENAMES.OPPORTUNITY)):t.fetchSource===r.APPLICATIONS.PROJECT?(this.url+="/"+this.id,this.url=r.getAppUrl(r.APPLICATIONS.PROJECT,this.id)):t.fetchSource===r.APPLICATIONS.PROFILE?(this.url+="/"+this.id,this.url=r.getAppUrl(r.APPLICATIONS.PROFILE,this.id)):this.url=r.getObjectInfoUrl(this.id),"true"===r.DEBUG&&(this.url+=r.PARAMS.DEBUG+r.DEBUG),t.completed&&(this.url+=r.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=r.PARAMS.OWNED+"true":"assigned"===t.filter&&(this.url+=r.PARAMS.ASSIGNED+"true")),t.subFilter&&"subprojectrisks"===t.subFilter?this.url+=r.PARAMS.SUBPROJECTRISKS+"true":t.subFilter&&"subprojectopportunities"===t.subFilter&&(this.url+=r.PARAMS.SUB_PROJECT_OPPORTUNITIES+"true"),t.fields&&(this.url+=r.PARAMS.FIELDS+t.fields),t.include&&(this.url+=r.PARAMS.INCLUDE+t.include),t.definition&&(this.url+=r.PARAMS.DEFINITION+t.definition);let i=this.serviceId;i&&(this.url+=r.PARAMS.SERVICE+i);let s=this.get("type");return s&&(this.url+=r.PARAMS.TYPE+s),this.url},dataForRendering:function(){let e=this._parent.apply(this,arguments),t=this.get("image");return t&&(e.image=t),e},parse:function(e){e=this._parent.apply(this,arguments),this._sourceType===r.APPLICATIONS.RISK?e.risks=new i(e.risks,{parse:!0,add:!0,remove:!0,merge:!0}):this._sourceType===r.APPLICATIONS.OPPORTUNITY&&(e.opportunities=new s(e.opportunities,{parse:!0,add:!0,remove:!0,merge:!0}));let t=e.image,n=this.id||e.id;return e.id=n,e.physicalId=n,t&&(e.image=this.getImage(t,e.serviceId)),e},canCreate:function(){return"TRUE"===this.get(r.CREATE_DATA)},isSimpleTask:function(){return"TRUE"===this.get(r.IS_SIMPLE_TASK)},isProgramContext:function(){return"Program"===this.get("type")}})}),define("DS/ENOProjectMgmtModels/Models/BaseContextScope",["UWA/Core","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/BaseContext","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Collections/RelatedDataItems"],function(e,t,i,s,n,r){"use strict";return i.extend({_uwaClassName:"BaseContextScope",collection:void 0,setup:function(){this.collection=new r,this._parent.apply(this,arguments)},add:function(e,i,s){let n=s.homeView;n&&t.validateModificationsPending({parentView:s.homeView,yesEventFunc:n._handleAddContexScope.bind(n,i,s)},s)},remove:function(e,i,s){return s&&e===n.CONTEXT_ATTR&&t.validateModificationsPending({parentView:s.homeView||s.parentView,yesEventFunc:this.handleRemoveContext.bind(this,e,s)},s),this._parent.apply(this,arguments)},set:function(t,i,s){if(t===n.CONTEXT_ATTR){let t=e.clone(s||{},!1),n=t.config;if(n&&n.singleObjectOnly&&this.collection.length&&(this.collection.reset(),this.collection.resetOperationFlags()),i&&i instanceof e.Class.Model){this.collection.add(i),this.setContextCache(i);let e=t.homeView||t.parentView,s=e&&e.contextView;s&&(t.callback=this.removeActiveClassNameOnContextField.bind(this,s)),this.dispatchEvent("onAdd",[t])}arguments[1]=this.collection}return this._parent.apply(this,arguments)},removeActiveClassNameOnContextField:function(e){let t=e&&e.container,i=t&&t.getElement(".drop-target");i&&i.removeClassName("active")},get:function(e){switch(e){case"canEdit":return!0}return this._parent.apply(this,arguments)},handleRemoveContext:function(t,i){let s=e.clone(i||{},!1);s.config.singleObjectOnly&&this.collection.length&&(this.collection.reset(),this.collection.resetOperationFlags()),this.set(t,this.collection,s),this.dispatchEvent("onChange:"+t,[this,this.collection,s]),this.setContextCache(),e.extend(s,{showLoadSpinner:!0});let n=s.homeView&&s.homeView._loadDataModels?s.homeView:s.parentView;n&&n._loadDataModels(s)},setContextCache:function(t){let i,r=s.get("tenant");if(t){let e=s.getContextInfo(),n=s.getLastSelectedContextCache();n&&(t.id===n.id?(e=n,s.setSelectedViewName(s.getLastSelectedViewName())):s.clearFilterOptions(),s.clearLastSelectedContextCache()),i={id:t.id,name:t.title,type:t.get("type"),image:t.get("image"),serviceId:t.serviceId,expansions:e&&e.expansions||[]}}let o=widget.getValue(r)||{};r&&(e.extend(o,{context:i}),i&&this.handleRecentContexts(r,i,o),s.setTenantInfo(o)),s.set(n.CONTEXT_ATTR,t)},handleRecentContexts:function(i,s,n){let r=n.recentContexts||[],o=t.findIndex(r,"value",s.id);-1!==o?r.splice(0,0,r.splice(o,1)[0]):r.unshift({value:s.id,label:s.name,image:s.image,"ds6w:type":s.type}),e.extend(n,{recentContexts:r.slice(0,5)})},getConnectedRMC:function(){let e,t=this.getContextModel();if(t){let i=t.get("configuration");e=i&&i.length&&i[0]}return e},removeContext:function(e){this.remove("context",void 0,e)}})});