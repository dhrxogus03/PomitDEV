define("DS/VCXGUIInfrastructure/VCXToolbarCtrl",["UWA/Core","UWA/Class","DS/CoreEvents/Events","DS/Core/PointerEvents","DS/RuntimeView/RSCManager","DS/ApplicationFrame/CommandsManager","DS/VCXWebSystem/VCXHardwareServices"],function(e,t,i,n,a,s,l){"use strict";return t.extend({init:function(t){if(this.options=t,void 0!==t.parent){var i=this;i._listFixedItem={},i._listItem={},i._listMainItem={},i.listCmdCreated=[],i._titleName=new e.Element("div",{html:t.title,class:"vcxToolbarTitle"}).inject(t.parent),i._titleMenu=new e.Element("div",{class:"vcxToolbarMenuExpandableTitleMenu"}).inject(t.parent),i._titleMenuExpandable=new e.Element("div",{class:"vcxToolbarMenuExpandable"}).inject(i._titleMenu),t.controller&&t.controller._vcxGuiManager&&l.isIE11()&&i._titleMenuExpandable.addClassName("IE11"),i._titleToolbar=new e.Element("div",{class:"vcxTitleToolbar"}).inject(t.parent),i._toolBarEdit=new e.Element("div",{class:"vcxToolbarEdit vcxHidden",styles:{float:"right",overflow:"hidden",whiteSpace:"nowrap"}}).inject(t.parent),i._listDisplayMainCmd=[],i._listDisplayExpandedCmd=[],i._toggleDisplayEditToolbar=!1,addEventListener("keydown",this.closeEditBar),i.resizeObs||("function"==typeof ResizeObserver?i.resizeObs=new ResizeObserver(e=>{e.forEach(e=>{i.updateToolbar()})}):i.resizeObs=new MutationObserver(i.updateToolbar.bind(i)))}},unInitialize:function(){for(var e in this.listCmdCreated){var t=this.listCmdCreated[e];t.cmdId&&(t.removeEventListener(n.POINTERUP,t.pointerDownOnCommandButtonStarterCB,!1),t.vcxCallBack&&t.removeEventListener(n.POINTERUP,t.vcxCallBack,!1),t.flagPointerDown&&t.removeEventListener(n.POINTERDOWN,t.flagPointerDown),t.toggleMenu&&t.removeEventListener(n.POINTERUP,t.toggleMenu),t._experienceBase=null,t.cmdId=null,t.checkedButton=null,t.cbPointerDown=null,t.vcxCallBack=null,t.flagPointerDown=null,t.toggleMenu=null),t.cbPointerUp&&(t.removeEventListener(n.POINTERUP,t.cbPointerUp),t.cbPointerUp=null),t.remove&&t.remove()}removeEventListener("keydown",this.closeEditBar),this.listCmdCreated=null,this._titleName.remove(),this._titleName=null,this._titleMenu.remove(),this._titleMenu=null,this._titleMenuExpandable.remove(),this._titleMenuExpandable=null,this._titleToolbar.remove(),this._titleToolbar=null,this._toolBarEdit.remove(),this._toolBarEdit=null,this.resizeObs.disconnect(),this.resizeObs=null,this._listDisplayMainCmd=[],this._listDisplayExpandedCmd=[],this._listFixedItem={},this._listItem={},this._listMainItem={},this.options=null},getTextContainer:function(){return this._titleName},activateEditMode:function(e){var t=this;e&&(t=e),t._toggleDisplayEditToolbar=!0,void 0===t._toolbarTitle&&(t._toolbarTitle=t._titleName.innerHTML);var n=t.options.controller.getNbSelectedItems(),a=t.options.controller.getNbItems();t.options.parent.addClassName("vcxToolbarEdit"),t._titleName.innerHTML=n+" / "+a,t._titleName.addClassName("edit"),t._toolBarEdit.removeClassName("vcxHidden"),t._titleToolbar.addClassName("vcxHidden"),t._titleMenu.addClassName("vcxHidden"),t._TOOLBARSTATE_Token=i.subscribe({event:"VCX_CLOSE_TOOLBAR"},function(){var e=document.getElementsByClassName("vcxToolbarButtonStarterMenuRight vcxToolbarButtonStarterMenuRightEdit")[0].cmdId;if(Array.isArray(e)){var t=e[0],i=e[1],n=e[2];i.call(t,n)}})},getEditToolbar:function(){return this._toolBarEdit},isEditMode:function(){return this._toggleDisplayEditToolbar},exitEditMode:function(e){var t=this;e&&(t=e),t._toggleDisplayEditToolbar=!1,void 0!==t._toolbarTitle?t._titleName.innerHTML=t._toolbarTitle:t._toolbarTitle=t._titleName.innerHTML,t.options.parent.removeClassName("vcxToolbarEdit"),t._titleName.removeClassName("edit"),t._toolBarEdit.addClassName("vcxHidden"),t._titleToolbar.removeClassName("vcxHidden"),t._titleMenu.removeClassName("vcxHidden"),i.unsubscribe(t._TOOLBARSTATE_Token),delete t._TOOLBARSTATE_Token},closeEditBar:function(t){"esc"===e.Event.whichKey(t)&&i.publish({event:"VCX_CLOSE_TOOLBAR"})},updateToolbar:function(){if(this._titleName.style.width="",this._titleToolbar.style.width="",this._titleToolbar.offsetWidth&&this._titleName.offsetWidth){var e,t=this.options.controller.getFrame().getGoToParent(),i=(this.options.panel.elements?this.options.panel.elements.panel.offsetWidth:this.options.panel.offsetWidth)-24-(t?t.offsetWidth:0),n=this._titleName.offsetWidth,a=this._titleToolbar.offsetWidth,s=this._listDisplayMainCmd.length+1,l=this._titleMenu.getElementsByClassName("vcxToolbarButtonStarterMenuRight")[0];e=l?l.offsetWidth:0;if(n>i-this.offsetWidthProcess(s-1)-e){a=this.offsetWidthProcess(s-1),n=i-this.offsetWidthProcess(s-1)-e,this._titleName.style.overflow="hidden",this._titleName.style.width=n+"px",this._titleToolbar.style.width=a+"px";for(var o=s-1;o<this._listDisplayMainCmd.length;o++)this._listDisplayMainCmd[o].style.display="none";for(var r=0;r<this._listDisplayExpandedCmd.length;r++){this._listDisplayExpandedCmd[r].style.display="table-row"}}else{var d=i-n-this.offsetWidthProcess(s-1)-e,c=0;for(r=s-1;r<this._listDisplayMainCmd.length;r++)d-this.offsetWidthProcess(r,!0)>=0&&(c++,d-=this.offsetWidthProcess(r,!0));var u=0===c?a:this.offsetWidthProcess(s-1+c)+1;this._titleToolbar.style.width=u+"px";for(var h=s-1;h<this._listDisplayMainCmd.length;h++)this._listDisplayMainCmd[h].style.display=h<c+s-1?"inline-block":"none";for(var m=0;m<this._listDisplayExpandedCmd.length;m++)this._listDisplayExpandedCmd[m].style.display=m<c?"none":"table-row"}}},offsetWidthProcess:function(e,t){if(t){if(e>this._listDisplayMainCmd.length)return 0;var i,n=!1;return"none"===this._listDisplayMainCmd[e].style.display&&(n=!0,this._listDisplayMainCmd[e].style.display="inline-block"),i=this._listDisplayMainCmd[e].offsetWidth,n&&(this._listDisplayMainCmd[e].style.display="none"),i}for(var a=0,s=0;s<e;s++)if(s>=this._listDisplayMainCmd.length)a+=0;else{n=!1;"none"===this._listDisplayMainCmd[s].style.display&&(n=!0,this._listDisplayMainCmd[s].style.display="inline-block"),a+=this._listDisplayMainCmd[s].offsetWidth,n&&(this._listDisplayMainCmd[s].style.display="none")}return a},addMainItemFixed:function(e,t,i,n,a,s,l,o,r,d){var c=this.onCreateToolbarButton(e,t,i,n,a,l,o,r,d);if(!s){s=this._titleToolbar,this._listDisplayMainCmd.push(c);this.resizeObs.observe(c,{childList:!1,attributes:!0,characterData:!1,subtree:!0,attributeOldValue:!1,attributesFilter:["style"]}),this._listMainItem[i]=c}s&&(c.setAttribute("data-rec-id","id-"+i+"-"+e),c.addClassName("buttonID-"+e),s.appendChild(c))},addMainItem:function(e,t,i,n,a,s){this.addMainItemFixed(e,t,i,n,a,null,s);var l=this.addSubItem(e,t,i,n,a,s);this._listItem[i]=l},addSubItemFixed:function(e,t,i,n,a,s,l,o){if(o){var r=this._titleMenuExpandable.childNodes;r.length>0&&r[r.length-1].addClassName("vcxToolbarMenuExpandedRowLast")}var d=this.addSubItem(e,t,i,n,a,s,l,!0);this._listItem[i]=d,this._listFixedItem[i]=d,1===Object.keys(this._listFixedItem).length&&d.addClassName("activated")},activeItem:function(e){this.activeMainItem(e),this.activeSubItem(e)},desactiveItem:function(e){this.desactiveMainItem(e),this.desactiveSubItem(e)},setItem:function(e,t){t?this.activeItem(e):this.desactiveItem(e)},toggleItem:function(e){this.toggleMainItem(e),this.toggleSubItem(e)},activeMainItem:function(e){var t=this._listMainItem[e];t&&t.addClassName("activated")},activeSubItem:function(e){var t=this._listItem[e];t&&t.addClassName("activated")},getActiveItem:function(){this._listItem(function(e){1})},desactiveMainItem:function(e){var t=this._listMainItem[e];t&&t.removeClassName("activated")},desactiveSubItem:function(e){var t=this._listItem[e];t&&t.removeClassName("activated")},toggleMainItem:function(e){var t=this._listMainItem[e];t&&(t.hasClassName("activated")?t.removeClassName("activated"):t.addClassName("activated"))},toggleSubItem:function(e){var t=this._listItem[e];t&&(t.hasClassName("activated")?t.removeClassName("activated"):t.addClassName("activated"))},activeSubItemFixed:function(e){var t=this._listItem[e];if(t){if(t.hasClassName("activated"))return;for(var i in this._listFixedItem){var n=this._listFixedItem[i];n.childNodes[0].childNodes[0].childNodes[0].hasClassName(e)?(n.addClassName("activated"),this._titleMenu.querySelector(".vcxToolbarButtonStarterMenuRight").querySelector(".vcxToolbarButton").className=e):n.removeClassName("activated")}}},addSubItem:function(t,i,a,l,o,r,d,c){var u=this.onCreateToolbarButton(t,i,a,l,r),h=new e.Element("div",{class:"vcxToolbarMenuExpandedRow"}).inject(this._titleMenuExpandable),m=this;if(h.addEventListener(n.POINTERDOWN,function(e){if("function"==typeof t)t("ScenarioViewOptions"===i?d:r);else if(""!==t){var n=null,a=m.options.controller._vcxGuiManager._experienceBase.getManager("VCXContextManager");a&&(n=a.getContext()),s.getCommand(t,n)&&(s.getCommand(t,n).begin(),e.stopImmediatePropagation(),e.stopPropagation())}},!0),c||this._listDisplayExpandedCmd.push(h),new e.Element("div",{class:"vcxToolbarMenuExpandedCellCmd"}).inject(h).appendChild(u),t&&"function"!=typeof t)new e.Element("div",{html:o[t],class:"vcxToolbarMenuExpandedCellTitle"}).inject(h);else new e.Element("div",{html:r,class:"vcxToolbarMenuExpandedCellTitle"}).inject(h);return h},addMenu:function(e,t,i,a,s,l,o){var r=this.onCreateToolbarButton(e,t,i,a,s,l);o||(o=this._titleMenu),o.appendChild(r);var d=this;r.vcxCallBack=function(){d._titleMenuExpandable.removeClassName("expanded"),document.removeEventListener(n.POINTERUP,r.vcxCallBack,!1)},r.flagPointerDown=function(e){r._pointerDown=!0},r.toggleMenu=function(e){r._pointerDown&&(r._pointerDown=!1,e.stopPropagation(),d._titleMenuExpandable.hasClassName("expanded")?document.removeEventListener(n.POINTERUP,r.vcxCallBack,!1):document.addEventListener(n.POINTERUP,r.vcxCallBack,!1),d._titleMenuExpandable.toggleClassName("expanded"))},r.addEventListener(n.POINTERDOWN,r.flagPointerDown),r.addEventListener(n.POINTERUP,r.toggleMenu)},onCreateToolbarButton:function(t,l,o,r,d,c,u,h,m){var p=new e.Element("div",{class:l,styles:{backgroundSize:"cover",display:"inline-block",verticalAlign:"top",float:"right"},html:[]}),v=!1,g=!1,C="";Array.isArray(o)?(g=!0,C=o[0].split("Checked")[0],v=o[0].search("Checked")):(C=o.split("Checked")[0],v=o.search("Checked")),v=v>0;var f=new e.Element("div",{class:C,styles:{},html:[]});if(p.commandButton=f,f.lockedWhile=!1|m,g){var b=new e.Element("span",{class:"wux-ui-fa wux-ui-fa-stack vcx-toolbar-stack"}).inject(f);e.createElement("i",{class:"wux-ui-fa wux-ui-fa-lg "+o[1]}).inject(b),e.createElement("i",{class:"wux-ui-fa wux-ui-fa-lg "+o[2]}).inject(b)}p.appendChild(f),v&&u&&(this._evtStart=i.subscribe({event:u},function(e){f.setAttribute("checked","")})),v&&h&&(this._evtEnd=i.subscribe({event:h},function(e){f.removeAttribute("checked")})),"MENU"===c||"VCXScenarioToolbarDisplayLayout"===c||(p._experienceBase=this.options.controller._vcxGuiManager._experienceBase,p.cmdId=t,p.checkedButton=v,p.pointerDownOnCommandButtonStarterCB=function(e){e.preventDefault();var t=this.commandButton,i=e.currentTarget||e.srcElement,n=!1;if(i.checkedButton)if(null!==t.getAttribute("checked")){if(t.lockedWhile)return;t.removeAttribute("checked"),n=!0}else t.setAttribute("checked","");var a=i.cmdId;if(Array.isArray(a)){var l=a[0],o=a[1],r=a[2];n||o.call(l,r)}else if(""!==a){var d=null,c=i._experienceBase.getManager("VCXContextManager");c&&(d=c.getContext()),s.getCommand(a,d)&&(n?s.getCommand(a,d).end():s.getCommand(a,d).begin())}e.stopImmediatePropagation(),e.stopPropagation()},p.addEventListener(n.POINTERUP,p.pointerDownOnCommandButtonStarterCB,!1),p.cbPointerUp=function(e){e.stopImmediatePropagation(),e.stopPropagation()},p.addEventListener(n.POINTERUP,p.cbPointerUp));var _="string"==typeof t&&""!==t?t:c&&(""===t||Array.isArray(t))?c:"";return a.onResourceLoaded({resourceFile:r},this.onResourceLoadedCBgen(_,f)),d&&(p.title=d[_]),this.listCmdCreated.push(p),p},onResourceLoadedCBgen:function(e,t){return function(){var i=this.getIcon({key:e,size:"Normal"});i&&(t.style.backgroundImage="url("+i+")")}},pointerUpOnCommandButtonStarterCB:function(e){e.preventDefault();var t=(e.currentTarget||e.srcElement).cmdId;"function"==typeof t&&(e.preventDefault(),t(),e.stopImmediatePropagation(),e.stopPropagation())}})}),define("DS/VCXGUIInfrastructure/VCXCardTypeEnum",["require","exports"],function(e,t){"use strict";var i;return function(e){e.SCENE="SCENE",e.MATERIAL="MATERIAL",e.AMBIENCE="AMBIENCE",e.RATIO="RATIO"}(i||(i={})),i}),define("DS/VCXGUIInfrastructure/VCXPanel",["require","exports","DS/Controls/Button","DS/Tweakers/GeneratedToolbar","UWA/Core","DS/Tweakers/TypeEnums","DS/ApplicationFrame/CommandsManager","DS/CoreEvents/Events"],function(e,t,i,n,a,s,l,o){"use strict";return class{constructor(e,t){this.immersiveFrame=e.immersiveFrame,this.context=t,this.headers={},this.tabViews=new Map,this.tokensEvents=new Map}unInitialize(){for(let e of this.tokensEvents.values())o.unsubscribe(e);this.tokensEvents.clear()}_buildDefaultHeaderSpace(e){let t=(0,a.createElement)("div",{html:"",class:"vcxPanelHeaderContainer"});return(0,a.createElement)("div",{html:e,class:"vcxPanelHeaderLabel"}).inject(t),(0,a.createElement)("div",{html:"",class:"vcxPanelHeaderToolbar"}).inject(t),t}applyHeader(e){let t=this.headers[e];this.setPanelHeader(t.headerView)}displayDefaultHeader(){for(const e in this.headers)Object.prototype.hasOwnProperty.call(this.headers,e)&&this.headers[e].default&&this.applyHeader(e)}generateHeaders(e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];let s=this._buildDefaultHeaderSpace(a.title),l={entries:new Array};for(let e=0;e<a.commands.length;e++){const t=a.commands[e];let i;switch(t.type){case"command":i=this.addCommandHeaderButton(t.commandID,t.i18n,t.icon,t.hidden,t.position);break;case"layout":if(!t.possibleValues){console.warn("NO POSSIBLE VALUES GIVEN TO LAYOUT");continue}i=this.addLayoutHeaderButton(t.i18n,t.hidden,t.possibleValues,t.value,t.position);break;case"callback":if(!t.callback){console.warn("NO CALLBACK GIVEN TO HEADER BUTTON");continue}i=this.addCallbackHeaderButton(t.i18n,t.icon,t.callback,t.hidden,t.position)}l.entries.push(i)}let o=n.prototype.createTreeDocument(l),r=new n({items:o});if(r.inject(s),a.specialButtons)for(let e=0;e<a.specialButtons.length;e++){const t=a.specialButtons[e];switch(t.type){case"clickDblClick":let e=this.addHeaderButtonClickAndDblClick(t.icon,t.commandIDClick,t.commandIDDlbClick,t.hidden,t.i18n),i=s.getElementsByClassName("vcxPanelHeaderToolbar")[0];e.inject(i)}}this.headers[a.id]={headerView:s,headerToolbar:r,default:a.default||!1},a.default&&(this.applyHeader(a.id),t=!0)}t||console.error("!! NO HEADER WAS DEFINED AS DEFAULT !!")}addHeaderButtonClickAndDblClick(e,t,n,a,s){let l=new i({displayStyle:"lite",icon:{iconName:e,fontIconFamily:WUXManagedFontIcons.Font3DS}});l.getContent().addClassName(t+" vcxPanelHeaderToolbarButton"),a&&l.getContent().addClassName("vcxHidden"),l.elements.container.title=s;let o=0,r=t;return l.addEventListener("buttonclick",()=>{1==++o&&setTimeout(()=>{1===o?(this.executeHeaderCommand(r),r=t):2===o&&(this.executeHeaderCommand(n),r=n),o=0},300)}),l}addCommandHeaderButton(e,t,i,n,a="far"){return{id:e,dataElements:{typeRepresentation:"functionIcon",visibleFlag:!n,tooltip:t,value:this.executeHeaderCommand.bind(this,e),icon:{iconName:i,fontIconFamily:1},position:a,category:"1"}}}addLayoutHeaderButton(e,t,i,n,a="far"){let s={id:"layoutButton",dataElements:{typeRepresentation:"layout",visibleFlag:!t,tooltip:e,position:a,category:"1"}};return s.dataElements.possibleValues=i,s.dataElements.value=n,s.onNodeUpdate=this.changeLayout.bind(this),s}addCallbackHeaderButton(e,t,i,n,a="far"){return{id:t,dataElements:{typeRepresentation:"functionIcon",visibleFlag:!n,tooltip:e,value:i,icon:{iconName:t,fontIconFamily:1},position:a,category:"1"}}}changeToolbarButtonVisibility(e,t,i){this.headers[e].headerToolbar.updateNodeModel(t,{visibleFlag:i})}executeHeaderCommand(e){""!==e&&(this.context?l.getCommand(e,this.context)&&l.getCommand(e,this.context).begin():console.warn("This panel has no context set. AFR Commands can't be executed: please set the context in panel initialization"))}changeLayout(e){switch(e.getAttributeValue("data").value||e.getAttributeValue("data")){case s.Layout.SmallThumbnail.value:this.removeAllLayouts(),this.getPanelContent().addClassName("vcxDisplayModeSmall");break;case s.Layout.BigThumbnail.value:this.removeAllLayouts(),this.getPanelContent().addClassName("vcxDisplayModeLarge");break;case s.Layout.BigTile.value:this.removeAllLayouts(),this.getPanelContent().addClassName("vcxDisplayModeTile");break;case s.Layout.List.value:this.removeAllLayouts(),this.getPanelContent().addClassName("vcxDisplayModeList")}}removeAllLayouts(){this.getPanelContent().removeClassName("vcxDisplayModeTile"),this.getPanelContent().removeClassName("vcxDisplayModeSmall"),this.getPanelContent().removeClassName("vcxDisplayModeList"),this.getPanelContent().removeClassName("vcxDisplayModeLarge")}subscribe(e,t){this.tokensEvents.set(e,o.subscribe({event:e},t))}}}),define("DS/VCXGUIInfrastructure/VCXSidePanelExtendable",["UWA/Core","DS/CoreEvents/Events","DS/Core/PointerEvents","DS/Panels/SidePanel"],function(e,t,i,n){"use strict";return n.extend({defaultOptions:{className:"VCXSidePanelExtendable"},mItemList:[],dragWhileFactory:function(e){return function(t){var i=e,n=t.clientX;t.preventDefault(),i.elements.panel.style.transition="","left"===i.options.side?i.elements.panel.style.width=n-i.marginX+"px":i.elements.panel.style.width=i.screenX-n-i.marginX+"px",i.options.usecallback&&i.options.usecallback(i.options.controller,Math.max(parseInt(i.elements.panel.style.minWidth),parseInt(i.elements.panel.style.width))),i.options.controller&&"function"==typeof i.options.controller.updateToolbar&&i.options.controller.updateToolbar()}},dragEndFactory:function(e){return function(){var t=e;document.removeEventListener(i.POINTERMOVE,t._fctWhile,!1),document.removeEventListener(i.POINTERUP,t._fctEnd,!1),t._isDragged=!1,t.elements.panel.style.boxShadow="0px 0px 0px 0px #888888",t.elements.panel.style.transition=t._savedTransition,t._bLockRecord=!1,t.options.controller&&t.options.controller._vcxGuiManager&&t.options.controller._vcxGuiManager.updateUsableArea()}},addPointerEvents:function(){var e=this;e._leftSensor.addEvent(i.POINTERDOWN,function(t){e.screenX=document.body.clientWidth;var n=t.clientX,a=e.elements.panel.getBoundingClientRect().width;"left"===e.options.side?e.marginX=n-a:e.marginX=e.screenX-n-a,e._bLockRecord&&(document.removeEventListener(i.POINTERMOVE,e._fctWhile,!1),document.removeEventListener(i.POINTERUP,e._fctEnd,!1),e._isDragged=!1,e._bLockRecord=!1),document.addEventListener(i.POINTERMOVE,e._fctWhile),document.addEventListener(i.POINTERUP,e._fctEnd),e._bLockRecord=!0,e._isDragged=!0,e.elements.panel.style.transition=""})},getvalueCSS:function(e,t){var i=null,n=e,a=null;return window.getComputedStyle?i=(a=n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):window.getComputedStyle(n,null)).getPropertyValue(t):document.documentElement.currentStyle&&(i=void 0!==(a=n.currentStyle).getPropertyValue?a.getPropertyValue(t):a[t]),i},init:function(t){var i=this;i._parent(t),i._bLockRecord=!1,i._fctWhile=i.dragWhileFactory(i),i._fctEnd=i.dragEndFactory(i);t.title;i.elements.title.innerHTML="",i.elements.title.addClassName("vcx-panels-panelbase-title"),i.elements.panel.addClassName("vcx-panels-panelbase-panel"),i.elements.panel.addClassName(t.class);var n=i.getvalueCSS(i.elements.panel,"z-index");i._leftSensor=new e.Element("div",{class:"SidePanelExtendableSensor",styles:{height:"100%",left:"-11px",width:"12px",position:"absolute",cursor:"col-resize",zIndex:n+1},events:{mouseover:function(){"left"===i.options.side?i.elements.panel.style.boxShadow="2px -2px 2px 0px #D3D3D3":i.elements.panel.style.boxShadow="-2px -2px 2px 0px #D3D3D3",i.elements.panel.style.transition=""},mouseout:function(){!1===i._isDragged&&(i.elements.panel.style.boxShadow="0px 0px 0px 0px #888888",i.elements.panel.style.transition=i._savedTransition)}}}),"left"===i.options.side&&(i._leftSensor.style.right=i._leftSensor.style.left,i._leftSensor.style.left=""),i._isDragged=!1,i._savedTransition=this.elements.panel.style.transition,i.elements.panel.insertBefore(i._leftSensor,i.elements.panel.firstChild),i.addPointerEvents()},slideIn:function(){this._parent();var e=parseFloat(this.elements.panel.style.transitionDuration);setTimeout(function(){t.publish({event:"VCX_GUI_PANEL_SLIDE_IN"})},1e3*e)},slideOut:function(){this._parent();var e=parseFloat(this.elements.panel.style.transitionDuration);setTimeout(function(){t.publish({event:"VCX_GUI_PANEL_SLIDE_OUT"})},1e3*e)}})}),define("DS/VCXGUIInfrastructure/VCXTabPageFrame",["UWA/Class","DS/CoreEvents/Events","DS/Core/PointerEvents","DS/Layouts/SlidingViews","DS/VCXGUIInfrastructure/VCXSidePanelExtendable","DS/VCXGUIInfrastructure/VCXToolbarCtrl","DS/Windows/Panel","i18n!DS/VCXGUIInfrastructure/assets/nls/VCXGUIInfrastructure"],function(e,t,i,n,a,s,l,o){"use strict";return e.extend({init:function(e){var r=this;this.options=e,e.slidingViews._vcxuiSequencesMaster[0]={},e.slidingViews._vcxuiSequencesMaster[0].Menu=new UWA.Element("div",{class:"vcxuiSequencesMaster"});var d="Menu";if(this.options._experienceBase&&(d=o["VCXProperties.Menu"]),e.slidingViews.views.unshift({title:d,content:{html:e.slidingViews._vcxuiSequencesMaster[0].Menu,iframe:!1}}),e.immersiveFrame){this._panelMaster=new l({collapsibleFlag:!0,closeButtonFlag:!1,resizableFlag:!0,immersiveFrame:e.immersiveFrame,currentDockArea:e.sidePanel.currentDockArea,title:e.sidePanel.title,showTitleFlag:!1,minWidth:e.sidePanel.minWidth?e.sidePanel.minWidth:300,verticallyStretchableFlag:!0,movableFlag:!0,icon:e.sidePanel.icon,recId:e.recId}),e.immersiveFrame.addWindow(this._panelMaster),this._panel=this._panelMaster.elements._contentDiv,this._panel.style.width="inherit";var c=this._panelMaster.elements.container.parentNode;this.observer=new MutationObserver(function(i){i.forEach(function(i){e.sidePanel.usecallback&&e.sidePanel.usecallback(e.sidePanel.controller,Math.max(parseInt(0),parseInt(r._panelMaster.elements.container.parentNode.offsetWidth))),t.publish({event:"VCX_PANEL_RESIZED"}),e.sidePanel.controller&&"function"==typeof e.sidePanel.controller.updateToolbar&&e.sidePanel.controller.updateToolbar()})});c&&this.observer.observe(c,{attributes:!0,childList:!1,characterData:!0,subtree:!1,attributeOldValue:!0,attributeFilter:["style"]})}else{this._panel=new a(e.sidePanel);var u=e._uiLayer||this.options._experienceBase.getManager("VCXContextManager").getFrameWindow().getUIFrame();this._panel.inject(u)}for(var h in this._header=new UWA.Element("div",{html:"",class:e.classBaseNameCSS+"Header VCXPanelCtrlHeader"}).inject(r._panel),this._headerSeparator=new UWA.Element("div",{html:"",class:e.classBaseNameCSS+"HeaderSeparator VCXPanelCtrlHeaderSeparator"}).inject(this._header),this._wrapper=new UWA.Element("div",{html:"",class:e.classBaseNameCSS+"Wrapper VCXPanelCtrlWrapper",styles:{}}).inject(this._panel),this._footer=new UWA.Element("div",{html:"",class:e.classBaseNameCSS+"Footer VCXScenarioCtrlFooter",styles:{visibility:"visible",height:"0px",bottom:"0px",width:"100%",transition:"height 0.5s, visibility 0.5s",overflow:"hidden"}}).inject(this._panel),e.slidingViews.showPager=!1,e.immersiveFrame?e.slidingViews.prevPage=this._panelMaster.elements._titleP:e.slidingViews.prevPage=this._panel.elements.title,e.slidingViews.kinetic=!1,e.slidingViews._vcxuiSequencesMaster)if(0!==parseInt(h)&&e.slidingViews._vcxuiSequencesMaster.hasOwnProperty(h))for(var m in e.slidingViews._vcxuiSequencesMaster[h])e.slidingViews._vcxuiSequencesMaster[h].hasOwnProperty(m)&&this.addCreateMasterItem(m,parseInt(h));this._slidingViews=new n(e.slidingViews).inject(this._wrapper),this._slidingViews.getContent().setStyles({height:"100%"}),this._divSelectorGoToParent=new UWA.Element("div",{class:"vcxSlidingViewDirection vcxSlidingViewPrevious"}),e.immersiveFrame?this._panel.childNodes[0].insertBefore(this._divSelectorGoToParent,this._panel.childNodes[0].firstChild):this._panel.elements.title.insertBefore(this._divSelectorGoToParent,this._panel.elements.title.firstChild);var p=function(){r._display=0,r._panel.childNodes[0].firstChild.style.display="none",r._slidingViews.goToNthView(r._display),r._toolbar._titleName.innerHTML=r._slidingViews.options.views[0].title,r._toolbar.updateToolbar()};this._divSelectorGoToParent.addEvent(i.POINTERUP,function(e){p()}),this._slidingViews.goToNthView(e.slidingViews.displayTabAtStart),1===e.slidingViews.disableSlindingMenu&&(this.getGoToParent().style.display="none"),this.onResizeCB=function(){if(r.options._experienceBase&&r._panelMaster&&r.options._experienceBase.getManager("VCXGUIManager").getUsableArea()){var e=0;e=r._panelMaster.windowGroup?r._panelMaster.windowGroup.titleBarVisibleFlag?r._panelMaster.windowGroup.getTitleBar().offsetHeight:0:r._panelMaster.titleBarVisibleFlag?r._panelMaster.getTitleBar().offsetHeight:0;var t=r._header.offsetHeight,i=document.getElementsByClassName("wux-windows-docking-element-collapser wux-docking-element-left")[0];i&&(r._wrapper.style.height=i.clientHeight-(e+t)-3+"px")}},window.attachEvent?(this._tokenScreenResize=window.attachEvent("onresize",this.onResizeCB),this._tokenFreeZoneResize=window.attachEvent("onfreeZoneResize",this.onResizeCB)):window.addEventListener&&(this._tokenScreenResize=window.addEventListener("resize",this.onResizeCB,!0),this._tokenFreeZoneResize=window.addEventListener("freeZoneResize",this.onResizeCB,!0));var v=e.sidePanel.title,g="";if(this.options._experienceBase){let t=o;this.options._i18n&&(t=this.options._i18n),e.appID&&(g=t.get(e.appID+v+".PanelTitle")),""===g&&(g=t.get("VCX"+v+".PanelTitle"))}this._toolbar=new s({controller:e.sidePanel.controller,title:g,parent:e.immersiveFrame?this._header:this._panel.elements.title,panel:this._panel}),1!==e.slidingViews.disableSlindingMenu&&(this._toolbar.getTextContainer().addEvent(i.POINTERUP,function(e){p()}),this._toolbar.getTextContainer().style.cursor="pointer")},unInitialize:function(){for(var e in window.attachEvent?(window.detachEvent(this._tokenScreenResize),window.detachEvent(this._tokenFreeZoneResize),delete this._tokenScreenResize,delete this._tokenFreeZoneResize):window.addEventListener&&(window.removeEventListener("resize",this.onResizeCB,!0),window.removeEventListener("freeZoneResize",this.onResizeCB,!0),delete this._tokenScreenResize,delete this._tokenFreeZoneResize),this._divSelectorGoToParent.removeEvent(i.POINTERUP),this._divSelectorGoToParent.remove(),this._divSelectorGoToParent=null,this.observer&&this.observer.disconnect(),this._slidingViews=null,this._toolbar.getTextContainer().removeEvent(i.POINTERUP),this._toolbar.unInitialize(),this._toolbar=null,this._panelMaster?(this.options.immersiveFrame&&this.options.immersiveFrame.removeWindow(this._panelMaster),this._panelMaster=null):(this.getPanel().elements.container.parentNode.removeChild(this.getPanel().elements.container),this._panel.remove(),this._panel=null),this.options.slidingViews._vcxuiSequencesMaster)if(this.options.slidingViews._vcxuiSequencesMaster.hasOwnProperty(e))for(var t in this.options.slidingViews._vcxuiSequencesMaster[e])this.options.slidingViews._vcxuiSequencesMaster[e].row&&(this.options.slidingViews._vcxuiSequencesMaster[e].row.removeEvent(i.POINTERUP),this.options.slidingViews._vcxuiSequencesMaster[e].row.remove(),this.options.slidingViews._vcxuiSequencesMaster[e].row=null),this.options.slidingViews._vcxuiSequencesMaster[e].hasOwnProperty(t)&&this.options.slidingViews._vcxuiSequencesMaster[e][t]&&this.options.slidingViews._vcxuiSequencesMaster[e][t].unInitialize&&this.options.slidingViews._vcxuiSequencesMaster[e][t].unInitialize();this.options.slidingViews=null,this.options=null,this._panel=null,this.observer=null,this._header=null,this._headerSeparator=null,this._wrapper=null,this._footer=null,this.onResizeCB=null},tabWith:function(e){this._panelMaster&&(this._panelMaster.attachToWindow(e._panelMaster,WUXSnapAreaEnum.InsideArea),this._panelMaster.windowGroup)},getPanel:function(){return this._panel},getToolbar:function(){return this._toolbar},getHeader:function(){return this._header},getContent:function(){return this._wrapper},getFooter:function(){return this._footer},getGoToParent:function(){return this._divSelectorGoToParent},addCreateMasterItem:function(e,t){var n=new UWA.Element("div",{class:"vcxuiSequencesMasterRow"});n.inject(this.options.slidingViews._vcxuiSequencesMaster[0].Menu),this.options.slidingViews._vcxuiSequencesMaster[t].row=n,new UWA.Element("div",{html:e,class:"vcxuiSequencesMasterCell"}).inject(n),new UWA.Element("div",{class:"vcxSlidingViewNext"}).inject(n);var a=t,s=this;n.addEvent(i.POINTERUP,function(e){var t;t=a,s._display=t,s._panel.childNodes[0].firstChild.style.display="",s._slidingViews.goToNthView(s._display),s._toolbar._titleName.innerHTML=s.options.slidingViews.views[s._display].title,s._toolbar.updateToolbar()})}})}),define("DS/VCXGUIInfrastructure/VCXMainPanelFixed",["require","exports","DS/Controls/Button","DS/VCXGUIInfrastructure/VCXPanel","UWA/Core"],function(e,t,i,n,a){"use strict";return class extends n{constructor(e,t,i){super(e,t),this.panel=this.init(e,i)}init(e,t){let i=this._buildMainPanel(e),n=this._buildDefaultHeaderSpace(null==e?void 0:e.title),a=i.querySelector(".vcxFixedPanelHeaderBar");return null==a||a.appendChild(n),i}unInitialize(){super.unInitialize(),this.panel.remove(),this.panel=null,this.headers={},this.tabViews=new Map}buildPanelTabs(e){let t=this.panel.querySelector(".vcxFixedPanelSubHeader");for(let n=0;n<e.length;n++){const s=e[n];this.tabViews.set(s.index,{content:s.view,isCurrent:0===n});let l=(0,a.createElement)("div",{class:"vcxTabContainer",id:"scene"}).inject(t),o=(0,a.createElement)("div",{class:"tabButtonContainer"}).inject(l);(0,a.createElement)("div",{class:"tabLabel",html:s.name}).inject(l);let r=new i({displayStyle:"light",icon:{iconName:s.icon,fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(o);r.getContent().addEventListener("buttonclick",()=>{this.setPanelContent(s.view);for(let[e,t]of this.tabViews.entries())t.isCurrent=e===n;s.headerId?this.applyHeader(s.headerId):this.displayDefaultHeader()}),1===s.index&&r.getContent().click()}}_buildMainPanel(e){var t,i,n;let s=(0,a.createElement)("div",{html:"",class:"vcxFixedPanel"}),l=(0,a.createElement)("div",{html:"",class:"vcxFixedPanelHeader"}).inject(s);return(0,a.createElement)("div",{html:"",class:"vcxFixedPanelHeaderBar"}).inject(l),(0,a.createElement)("div",{html:"",class:"vcxFixedPanelSubHeader"}).inject(l),(0,a.createElement)("div",{html:"",class:"vcxFixedPanelContent"}).inject(s),(0,a.createElement)("div",{html:"",class:"vcxFixedPanelFooter"}).inject(s),e.width&&(s.style.width=e.width),e.currentDockArea?e.currentDockArea===WUXDockAreaEnum.LeftDockArea?null===(t=document.querySelector(".vcxLeftContainer"))||void 0===t||t.appendChild(s):e.currentDockArea===WUXDockAreaEnum.RightDockArea&&(null===(i=document.querySelector(".vcxRightContainer"))||void 0===i||i.appendChild(s)):null===(n=this.immersiveFrame)||void 0===n||n.elements.container.appendChild(s),s}setPanelContent(e){let t=this.panel.querySelector(".vcxFixedPanelContent");t&&(t.innerHTML="",e.inject?e.inject(t):t.appendChild(e))}getPanelContent(){return this.panel.querySelector(".vcxFixedPanelContent")}getPanelHeader(){return this.panel.querySelector(".vcxFixedPanelHeaderBar")}setPanelHeader(e){let t=this.panel.querySelector(".vcxFixedPanelHeaderBar");t&&(t.innerHTML="",t.appendChild(e))}getPanel(){return this.panel}}}),define("DS/VCXGUIInfrastructure/VCXMainPanel",["require","exports","DS/VCXGUIInfrastructure/VCXPanel","DS/Windows/Window","DS/Windows/Panel","DS/CoreEvents/Events","DS/WebappsUtils/WebappsUtils","UWA/Core"],function(e,t,i,n,a,s,l,o){"use strict";return class extends i{constructor(e,t,i){super(e,t),this.panel=this.init(e,i)}init(e,t){let i={header:this._buildDefaultHeaderSpace(null==e?void 0:e.title),...e};return this._buildMainPanel(i)}unInitialize(){super.unInitialize(),this.panel.destroy()}buildPanelTabs(e){var t=l.getWebappsBaseUrl();let i={content:new Array};for(let n=0;n<e.length;n++){const a=e[n];a.view.inject(this.panel.content),this.tabViews.set(a.index,{content:a.view,isCurrent:0===n}),i.content.push({label:a.name,icon:t+"WUXImmersiveFrame/assets/ExtrudeIcon.png",onSelect:e=>{for(let[e,t]of this.tabViews.entries()){const i=t;a.index!==e?(i.content.hide(),i.isCurrent=!1):(i.content.show(),i.isCurrent=!0)}}})}this.panel.buildSuperFeature(i)}_buildMainPanel(e){let t=new a({icon:e.icon,header:e.header,title:e.title,identifier:e.identifier,content:(0,o.createElement)("div",{html:"",class:""}),immersiveFrame:e.immersiveFrame,verticallyStretchableFlag:!0,movableFlag:!0,width:e.minWidth||300,minWidth:e.minWidth||300,resizableFlag:!0,collapsibleFlag:!0,closeButtonFlag:!1,showTitleFlag:!1});return e.immersiveFrame&&e.currentDockArea&&this._addWindowToDockingGroup(t,e.currentDockArea),t.addEventListener("resize",function(){s.publish({event:"VCX_PANEL_RESIZED"})}),t}_addWindowToDockingGroup(e,t){var i,a,s,l;let o=!1;if(this.immersiveFrame){for(const[,r]of Object.entries(this.immersiveFrame.windows))if(r instanceof n&&e!==r&&r.currentDockArea===t){e.attachToWindow(r,WUXSnapAreaEnum.InsideArea,"before")<0?console.error("the window ",null===(a=null===(i=null==e?void 0:e._properties)||void 0===i?void 0:i.title)||void 0===a?void 0:a.value," could not be attached to ",null===(l=null===(s=null==r?void 0:r._properties)||void 0===s?void 0:s.title)||void 0===l?void 0:l.value):o=!0;break}o||(e.currentDockArea=t)}}setPanelContent(e){this.panel.content=e}setPanelHeader(e){this.panel.header=e}getPanelContent(){return this.panel.content}getPanelHeader(){return this.panel.header}getPanel(){return this.panel.getContent()}}}),define("DS/VCXGUIInfrastructure/VCXUICard",["require","exports","DS/Controls/Button","DS/Controls/Toggle","DS/Menu/ContextualMenu","UWA/Core","UWA/Class","DS/CoreEvents/Events","DS/VCXGUIInfrastructure/VCXCardTypeEnum"],function(e,t,i,n,a,s,l,o,r){"use strict";return class extends l{constructor(e){if(super(),this.typeCard=r.SCENE,this.cardID=e.id,this.typeCard=e.type,this.activeClassName="vcxActiveScene",this.cardElement=(0,s.createElement)("div",{html:"",class:"vcxUICard",draggable:"true"}),this.cardElement.setAttribute("data-card-id",e.id),e.data)for(const t in e.data)if(Object.prototype.hasOwnProperty.call(e.data,t)){const i=e.data[t];this.cardElement.setAttribute("data-"+t,i)}let t=(0,s.createElement)("img",{class:"vcxUICard-thumbnail",src:e.image,draggable:"false"});if(e.cardLayout&&e.cardLayout.ratioX&&e.cardLayout.ratioY&&e.cardLayout.cardWidth){let i=e.cardLayout.cardWidth*e.cardLayout.ratioY/e.cardLayout.ratioX;t.style.height=i+"px"}t.inject(this.cardElement),this.thumbnail=t;let l=(0,s.createElement)("div",{html:"",class:"vcxUICard-descriptionContainer"});l.inject(this.cardElement),e.cardLayout&&e.cardLayout.descriptionHeight&&(l.style.height=e.cardLayout.descriptionHeight+"px");let d=(0,s.createElement)("div",{class:"vcxUICard-descriptionLabelsContainer"});d.inject(l),this.label=(0,s.createElement)("div",{html:e.title,class:"vcxUICard-descriptionTitle"}),this.label.setAttribute("data-rec-id","vcxuicard-title-div"),this.label.addEventListener("keydown",e=>{"Enter"===e.key&&this.label.blur()}),this.label.inject(d),e.subTitle&&(this.subLabel=(0,s.createElement)("div",{html:e.subTitle,class:"vcxUICard-descriptionSubtitle"}),this.subLabel.inject(d));let c=(0,s.createElement)("div",{html:"",class:"vcxUICard-descriptionActionBar"});return c.inject(l),this.selectToggle=new n({type:"checkbox"}),e.selectableFlag&&(this.selectToggle.inject(this.cardElement),this.selectToggle.getContent().addClassName("vcxSelectCard"),this.selectToggle.getContent().setAttribute("data-rec-id","vcxuicard-select-toggle"),this.selectToggle.getContent().addEventListener("click",e=>{e.stopPropagation()}),this.selectToggle.getContent().addEventListener("change",e=>{let t=e.dsModel;t&&"boolean"==typeof t.checkFlag&&(t.checkFlag?this.cardElement.addClassName("vcxSelected"):this.cardElement.removeClassName("vcxSelected")),o.publish({event:"VCXCard"+this.typeCard+"Selected",data:{id:this.getID(),checkflag:t.checkFlag}})})),this.contextMenuButton=new i({displayStyle:"lite",icon:{iconName:"chevron-down",fontIconFamily:WUXManagedFontIcons.Font3DS}}),this.contextMenuButton.inject(c),this.contextMenuButton.getContent().addClassName("vcxCardMenu"),this.contextMenuButton.getContent().setAttribute("data-rec-id","vcxuicard-context-menu"),this.contextMenuButton.getContent().style.display="none",this.contextMenuButton.getContent().addEventListener("buttonclick",()=>{a.buildAndDisplayContextualMenu(this.contextMenuButton.getContent(),{clientX:this.contextMenuButton.getContent().getOffsets().x+this.contextMenuButton.getContent().offsetWidth,clientY:this.contextMenuButton.getContent().getOffsets().y+this.contextMenuButton.getContent().offsetHeight})}),this}hideSelectToogle(){this.selectToggle.getContent().style.display="none"}getThumbnailElement(){return this.thumbnail}destroy(){this.cardElement.destroy()}getLabel(){return this.label}getView(){return this.cardElement}addCardClickCallback(e){e?this.cardElement.addEventListener("click",e):console.warn("a card was told to add an event listener with an undefined callback")}customizeMenu(e){a.addEventListener(this.contextMenuButton.getContent(),{callback:()=>{let t=new Array;for(let i=0;i<e.length;i++){const n=e[i];let a="enabled";t.push({type:"PushItem",title:n.label,state:a,fonticon:{content:"wux-ui-3ds-"+n.icon+" wux-ui-3ds"},action:{callback:n.action}})}return t}}),this.contextMenuButton.getContent().style.display=""}selectCard(){this.selectToggle.checkFlag||(this.selectToggle.checkFlag=!0)}unselectCard(){this.selectToggle.checkFlag&&(this.selectToggle.checkFlag=!1)}getID(){return this.cardID}activateCard(){this.cardElement.addClassName(this.activeClassName)}isCardActive(){return this.cardElement.classList.contains(this.activeClassName)}deactivateCard(){this.cardElement.removeClassName(this.activeClassName)}}});