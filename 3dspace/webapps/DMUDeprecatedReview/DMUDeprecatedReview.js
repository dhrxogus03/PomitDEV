define("DS/DMUDeprecatedReview/DMUDeprecatedReview",["UWA/Class","UWA/Utils","DS/DMUBaseExperience/DMUFactory","DS/DMUPlayMarkup/DMUMarkup","DS/DMUPlaySlide/DMUSlide","DS/DMUBaseExperience/DMUOccurrenceOverloader","DS/DMUBaseExperience/DMULinksManager","DS/DMUBaseUIServices/DMUSlidePreferences","i18n!DS/DMUDeprecatedReview/assets/nls/DMUDeprecatedReview"],function(e,t,i,r,n,a,o,s,p){"use strict";return e.extend({init:function(e,u){var l,d,D=this,c={};this.importData=function(m,U,g){if(m&&U){(l=new r(e,u)).isImporting(!0),l.setAttributes([{name:"sName",value:m.Name}]);var v=!0,M=!0,f=s.getSlidePreferences({context:u.getFrameWindow()});f&&("boolean"==typeof f.displayNominal&&(v=f.displayNominal),"boolean"==typeof f.displayInWork&&(M=f.displayInWork)),v&&((d=new n(e,l)).importData({Name:p.NominalSlide,ImageURL:m.ImageURL,EnvironmentOverload:{targetId:"environment",state:m.ReviewEnvironment||u.getEnvironment().getEnvironmentInfo()}},U,l,!0,!0),d.setAttributes([{name:"sUuid",value:t.getUUID()}]),l.addSlide(d));var b,S,I,y=m.DMUObjects,O=[],h={};for(S=0;S<y.length;S++)if("Slide"===y[S].type){if(!M&&y[S].InWork)continue;(b=new n(e,l)).setAttributes([{name:"sUuid",value:t.getUUID()}]),b.importData(y[S],U,l,!0),l.addSlide(b),h[b.getAttribute("sID")]=y[S].ObjectOverloads}else if("OccurrenceOverloader"===y[S].type)(b=new a(e,l)).setAttributes([{name:"sUuid",value:t.getUUID()}]),b.importData(y[S],U,l),l.addOccurrenceOverloader(b);else if("ExternalLinks"===y[S].type)(b=new o(e,l)).importData(y[S],U,l),l.setAttribute("oLinksManager",b);else if("Compare3D"===y[S].type)y[S].PropertiesCompare&&y[S].PropertiesCompare.DMUObjects&&y[S].PropertiesCompare.DMUObjects.length&&(O=O.concat(y[S].PropertiesCompare.DMUObjects),y[S].PropertiesCompare.DMUObjects=[]),O.push(y[S]);else if("textGraphicRepresentationArray"===y[S].type){(l?l.getAttribute("oLinksManager"):void 0)?b.importData(y[S],U,l):((b=new o(e,l)).importData(y[S],U,l),l.setAttribute("oLinksManager",b))}else O.push(y[S]);var A,P=l.getSlides(),k=function(e,r){var n=i.buildComponent(e.type,r,l);n&&n.importData&&("Section"===e.type&&e.PropertiesSection&&"OnlyContour"!==e.PropertiesSection.SectionRender&&(e.PropertiesSection.SectionCurvesVisible=!1),n.importData(e,U,l),A=t.getUUID(),n.setAttributes([{name:"sUuid",value:A}]),e.uuid&&(c[e.uuid]||(c[e.uuid]=[]),c[e.uuid].push(A)),g&&g.getValidation()&&n.setAttribute("bEditable",!1))};for(S=0;S<O.length;S++)for(I=0;I<P.length;I++){var w=h[P[I].getAttribute("sID")];if(w&&w.length>0)for(var C=0;C<w.length;C++)O[S].id===w[C].targetId&&k(O[S],P[I]);else O[S].type.includes("Compare")||k(O[S],P[I])}U.registerForPostImport(D)}},this.afterImport=function(){l&&(l.fireEvent("onDMUObjectInitialized",{dmuObject:l}),setTimeout(function(){l.isImporting(!1),l.fireEvent("onDMUMarkupLoaded",{dmuObject:l}),l=null},10)),d=null},this.getUUIDMappingTable=function(){return c},this.getMarkupContent=function(){return l}}})});