define("DS/CAT3DExpAmbienceModelWebMedia/extensions/CATE3DXAmbienceAssetMedia",["UWA/Core","DS/CAT3DExpAmbienceModelWeb/extensions/CATE3DXAmbienceAsset","DS/Visualization/ModelLoader","DS/Visualization/Node3D","DS/CAT3DExpModel/XCTExpUint8ArrayAsset"],function(e,t,i,n,r){"use strict";return t.extend({_getAmbienceFromAsset:async function(t){if(!(t instanceof r))return e.Promise.reject(new Error("Cant retrieve ambience asset for object "+this.GetObject().GetID()));const s=e.Promise.deferred(),o=new i,c=t.getBlobUrl();return o.setFileType(this._getFileType(t)),o.setOnLoadedCallback(function(e){URL.revokeObjectURL(c),s.resolve(e.ambiance)}),o.loadModel(c,new n),await s.promise},_getFileType:function(e){const t=e.getName();for(const e in this._typeExtMap)if(t.endsWith(e))return this._typeExtMap[e]},_typeExtMap:{".cgr":"cgr",".xcgr":"cgr",".3dxml":"xmlv43",".3dx":"3dx",".3dxc":"3dxc"}})});