define("DS/DELWebViewerController/BehaviorFactory",[],function(){"use strict";return function(e,t,n){var r={},i=!!n.getOption("executionContext"),a={ToolbarBehavior:"DS/DELWebViewerToolbar/ToolbarController",BuildUpBehavior:"DS/DELWebViewerBuildUpController/BuildUpController",WorkInstructionBehavior:"DS/DELWebViewerWorkInstructionController/WorkInstructionController",FTABehavior:"DS/DELWebViewerController/FTA/FTAController",StatusBarBehavior:"DS/DELWebViewerController/StatusBar/StatusBarController"};return a.DrillBehavior=i?"DS/DELWebViewerController/Drill/DrillControllerV2":"DS/DELWebViewerController/Drill/DrillController",{getCreatePromise:function(i){var o=this;return new Promise(function(l,s){var c,u=[null,o,e,t,n].concat(Array.prototype.slice.call(arguments,1));UWA.is(i,"array")&&i.length>0?(c=i.map(function(e){return a[e]}))instanceof Array?require(c,function(){var e=Array.prototype.slice.call(arguments);e.length>0&&e.forEach(function(e,t){r[i[t]]=new(Function.prototype.bind.apply(e,u))}),l(r)}):s(n.getNLSValue("Error.InvalidInput.Message")):l(r)})},getInstance:function(e){return e&&r[e]?r[e]:null},reset:function(){Object.values(r).forEach(function(e){e.reset&&e.reset()})},destroy:function(){Object.values(r).forEach(function(e){e.destroy&&e.destroy()}),r={}}}}}),define("DS/DELWebViewerController/facets/LinkFacetController",["UWA/Core","UWA/Controls/Abstract","UWA/Class","DS/DELWebUiComponent/LinkFacetView","DS/DELPPRData/WebService","DS/Selection/CSOManager","DS/DEL3DViewer/NodeUtil","DS/DELWebViewerUtils/Utils","DS/EditPropWidget/facets/Common/FacetsBase"],function(e,t,n,r,i,a,o,l,s){"use strict";const c="DELFmiProcessImplementCnx",u="DELFmiProcessOutputPrereqMaterializationCnx",d="Provide";return n.extend(t,s,{init:function(e){this._parent(e),this.linkFacetView=new r(this.elements),this.logger=e.logger},updateFacet:function(){var t,n,r,i,l,s,h,g,p=this,f=a.get(),m=f.length>0?f[0].pathElement:null;if(0!==f.length){for(this.linkFacetView.hide();m&&!o.isPLMNode(m.getLastElement(!0));)m=m.getParentPath();m&&(o.isInstance(m.getLastElement(!0))||(g=m.getParentPath().getLastElement(!0),r=o.getNodeID(g),i=o.getNodeType(g))),(s=m&&m.getParentPath()?m.getParentPath().getParentPath():null)&&(l=o.getNodeID(s.getLastElement()),h=o.getNodeType(s.getLastElement())),i!==c&&i!==u||h!==d||(t={lIds:[],relIDs:[r],busIDs:[],plmparameters:"false",attributes:"true",navigateToMain:"true",readonly:"true",debug_properties:""},n={lIds:[],relIDs:[],busIDs:[l],plmparameters:"false",attributes:"true",navigateToMain:"true",readonly:"true",debug_properties:""},e.Promise.all([this._webServiceCall(t),this._webServiceCall(n)]).then(function(e){p.linkFacetView.updateUI({linkInfo:p._parseData(e[0]),provideInfo:p._parseData(e[1])})}).fail(function(){p.logger.error("Unable to get attribute information due to web service call failed")}))}},destroyComponent:function(){this.linkFacetView.destroy()},onResize:function(){this.updateFacet()},onRefresh:function(){this.updateFacet()},_webServiceCall:function(t){var n=`${l.get3DSpaceUrl()}/resources/v1/collabServices/attributes/op/read`;return new e.Promise(function(e,r){i.request({url:n,method:"POST",dataType:"json",payload:t}).then(e).fail(r)})},_parseData:function(t){var n={results:[]};return t&&e.is(t.results,"array")&&t.results.length>0&&(t.results[0].data.forEach(function(e){n.results.push(e)}),t.results[0].basicData.forEach(function(e){n.results.push(e)}),n.typeIconUrl=t.results[0].type_icon_url),n.results.sort(function(e,t){return e.UIPosition-t.UIPosition}),n},show:function(){this.getUI().show()},hide:function(){this.getUI().hide()}})}),define("DS/DELWebViewerController/Utils/DataParser",["UWA/Core"],function(e){"use strict";var t,n=function(){return{getOpenDataFormat:function(t){let n={items:[]};return e.is(t,"array")&&t.forEach(t=>{let r={};t.processId?r={id:t.processId,scopedMfg:{id:t.mfgId,occurrence:e.is(t.installPath,"array")?t.installPath:[],predecessors:e.is(t.predecessors,"array")?t.predecessors:[]},resource:{id:t.resourceId},operation:{id:t.operationId,occurrence:e.is(t.operationPath,"array")?t.operationPath:[]},publishedRep:{id:t.publishedRepId},withFilter:!!e.is(t.withFilter,"boolean")&&t.withFilter,reframe:!e.is(t.reframe,"boolean")||t.reframe}:t.id&&(r={id:t.id,withFilter:!!e.is(t.withFilter,"boolean")&&t.withFilter,reframe:!e.is(t.reframe,"boolean")||t.reframe}),n.items.push(r)}),n}}};return e.is(t)||(t=new n),t}),define("DS/DELWebViewerController/Drill/DrillController",["UWA/Core","DS/Selection/CSOManager","DS/Selection/HSOManager"],function(e,t,n){"use strict";return function(r,i,a,o){const l={detailedFasten:"DetailedFasten",manufacturedPart:"ElementaryEndItem"},s=["Drill","NoDrill","PreDrill"],c=-1,u=-2,d=o.getOption("mappingKeys");var h,g={},p=function(){let t=function(t,n){let r=[];return e.is(t,"array")&&n&&e.is(n.selected,"array")&&(r=e.is(t[0],"array")?t.map(e=>e.toString()):[t.toString()]),r};return{addSelectedPaths:function(e,n){t(e,n).forEach(function(e){-1===n.selected.indexOf(e.toString())&&n.selected.push(e.toString())})},removeSelectedPaths:function(e,n){let r=t(e,n);n.selected=n.selected.filter(e=>-1===r.indexOf(e))},getSelectedPaths:function(){var e=[];return Object.keys(g).forEach(function(t){e=e.concat(g[t].selected)}),e}}}(),f=o.getOption("eventCollection").getViewerCtrlEventHnd(),m=function(t,n,r=!1){e.is(t,"array")&&t.length>0&&i.setGraphicProperties({graphicProperties:function(e,t){return e.map(function(e){return{path:e,visibility:t,visibilityFree:!t,usePathElement:r}})}(t,n)},d.SCENEGRAPHKEYS.PRIVATE).then(function(){i.render()})},S=function(t){var n=i.getIdPathesLeadingToReference(t[t.length-3]),r=[];return e.is(n,"array")&&n.length>0&&n.forEach(function(e){e.ids.push(t[t.length-2]),e.ids.push(t[t.length-1]),r.push(e.ids)}),r},b=async function(t){var n,r=t.rootIds;e.is(r,"array")&&r.length>0&&(n=await a.getTaxonomies(r),r.forEach(async function(t){var r,o,l,s,c=a.getPPRType(n[t]),u=i.getContext().getController().getBIProxy().getFilterSpec(t,{V2:{}});"MBOM"===c&&(r=await(l=t,s=u?u.filter:null,a.getDrillData({id:l,filter:s})))&&e.is(r.paths,"array")&&r.paths.length>0&&(g[t]=r,g[t].selected=[],o=r.resultingProductDrillPaths,m(o,!1))}))},v=function(t){var r,a,o=t&&e.is(t.path)&&t.path.length>0?t.path:[],d=g[o[0]],h=d&&d.references?d.references[o[o.length-1]]:{},f=function(e){return e&&e.pathsr&&e.pathsr.includes("R_51")},b=function(e){var t;return e.parentNode.getChildren().forEach(function(n){n.getModelIdentification()===e.instanceObj.instanceId&&(t=n)}),t},v=function(e){let t,n,r,a,l=o.length>2?o.slice(0,o.length-2):o,s=function(e){i.highlightNode({pathElements:[{pathElement:e}],highlight:!0})};b(e)?(m([o],!0,!0),s(i.getPathElementV2(o))):(a=i.getPathElement(l),t=i.createNode({id:e.referenceObj.referenceId,type:e.referenceObj.type,matrix:null,usage:c}),n=i.createNode({id:e.instanceObj.instanceId,type:e.instanceObj.type,matrix:e.instanceObj.matrixtxt,parentMatrix:e.parentMatrix,usage:u}),r=i.createArrowNode({headLength:15,arrowLength:60,arrowWidth:1,headWidthToHeightRatio:.4,viewpoint:i.getContext().getViewer().currentViewpoint,color:{R:1,G:0,B:1},head:1,pickable:!0,globalSelection:!0}),n.addChild(t),t.addChild(r),e.parentNode.addChild(n),i.render(),a&&a.addElement&&(a.addElement(n),a.addElement(t),s(a)))},w=function(e){let r=e[e.length-1],a=e[e.length-2],o=n.get().map(e=>i.getRIRPath(e.pathElement).toString()),s=e[e.length-3],c=e[e.length-4],u=d&&d.references?d.references[s]:{},h=d&&d.instances?d.instances[c]:{},g={referenceObj:d&&d.references?d.references[r]:{},instanceObj:d&&d.instances?d.instances[a]:{},parentNode:i.getNode({id:s})},p=function(e){i.getNodeFromPath(e)&&m(S(e).filter(t=>-1===o.indexOf(t.toString())&&t.toString()!==e.toString()),!t.highlight,!0)};(f(g.instanceObj)||u.type===l.detailedFasten&&f(h))&&g.parentNode&&(t.highlight?(v(g),p(e)):(p(e),function(e){let t=(n.get()||[]).find(t=>t.pathElement.getLastElement().getModelIdentification()===e.referenceObj.referenceId);t&&i.highlightNode({pathElements:[t],highlight:!1}),e.parentNode&&(e.parentNode.removeChild(b(e)),i.render())}(g)))};d&&h&&h.taxonomies&&Object.values(s).some(e=>-1!==h.taxonomies.indexOf(e))?(h.resultingProductLink?m([o],t.highlight):w(o),t.highlight?p.addSelectedPaths(o,d):p.removeSelectedPaths(o,d)):d&&h&&h.taxonomies&&Object.values(l).every(e=>-1===h.taxonomies.indexOf(e))&&(a=h.referenceId,(r={resultingProductDrills:d.resultingProductDrillPaths.filter(e=>e[e.length-3]===a),drills:d.drillPaths.filter(e=>e[e.length-3]===a)}).drills.forEach(function(e){w(e)}),m(r.resultingProductDrills,t.highlight),t.highlight?p.addSelectedPaths(r.drills.concat(r.resultingProductDrills),d):p.removeSelectedPaths(r.drills.concat(r.resultingProductDrills),d))},w=function(e){e&&e.idPath&&b({rootIds:e.idPath})},E=function(e){e&&e.id&&g&&g[e.id]&&delete g[e.id]},D=function(){let n=t.get()||[],r=[],a=function(t,n){e.is(t,"array")&&t.length>0&&t.forEach(function(e){v({path:e,highlight:n})})};if(n.forEach(e=>r.push(i.getRIRPath(e.pathElement))),r&&r.length>0){let e,t=p.getSelectedPaths(),n=[];r.forEach(function(e){n=n.concat(S(e).map(e=>e.toString()))}),a(e=t.filter(e=>-1===n.indexOf(e)).map(e=>e.split(",")),!1),a(r,!0)}else 0===r.length&&a(p.getSelectedPaths().map(e=>e.split(",")),!1)};return(h=[{eventName:f.events.highlightNode,eventHandler:f,callback:v},{eventName:f.events.unHighlightNode,eventHandler:f,callback:v},{eventName:"onRootAdded",eventHandler:i,callback:w},{eventName:"onRootRemoved",eventHandler:i,callback:E},{eventName:f.events.onUnHighlightNode,eventHandler:f,callback:D},{eventName:f.events.onSelectNode,eventHandler:f,callback:D},{eventName:f.events.onUnSelectNode,eventHandler:f,callback:D}],{subscribeEvents:function(){h.forEach(function(e){e.eventHandler.subscribe(e.eventName,e.callback)})}}).subscribeEvents(),{}}}),define("DS/DELWebViewerController/FTA/FTAController",[],function(){"use strict";const e="RepTextTess",t="reqfta.ftaVisu",n="reqfta.ParamName",r="reqfta.ParamType",i="reqfta.ParamString",a="RepTTRS",o="FTASurfaceInstance",l="Requirement",s=-1,c=-2;return function(u,d,h,g){let p,f=g.getOption("logger"),m=g.getOption("eventCollection").getViewerCtrlEventHnd(),S=[],b=function(e,t){return d.createNode({id:e.physicalid,usage:t,type:e["ds6w:type"]?e["ds6w:type"]:e.type})},v=function(e,t){let a,o=e[n],l=e[r],s=e[i];for(let e=0,n=-1;e<o.length;e++){let r=l[e],i=o[e];if("0"===r&&n++,i===t){a=s[n];break}}return a},w=function(n={}){let r={edgeTransparency:!1,textureInBlack:!0,processText:!1},i=b(n,s);d.addVisualizationToNode(i,n[t],r),d.addVisualizationToNode(i,v(n,e),r);try{!function(){let e,t,l=v(n,a),u=n.physicalid;l&&(t=b({physicalid:`${u}${o}`,type:o},c),e=b({physicalid:`${u}${a}`,type:a},s),d.addVisualizationToNode(e,l,r),t.setVisibility(!1),t.setVisibilityFree(!0),t.addChild(e),i.addChild(t))}()}catch(e){f.debug(e),f.warn(`Unable to create fta surface node for the requirement id - ${n.physicalid}`)}return i.traverse(function(e){return e.setPickParent(!0),!1}),i.setPickParent(!1),i},E=function(e,n){if(e){let r=[];n.forEach(e=>{if(UWA.is(e.elements,"array")&&function(e){return e.elements.some(e=>Object.prototype.hasOwnProperty.call(e,t))}(e)){let t=b(e.owner,c);e.elements.forEach(e=>{t.addChild(w(e))}),r.push(t)}}),r.forEach(t=>{e.addChild(t)})}},D=function(e,t){let n=e.getUserData();return!!n&&n.type===t},P=function(e,t){e&&e.length>0&&e.forEach(e=>{e.paths.forEach(e=>{let n,r=d.getNodeFromPath(e);r&&D(r,l)&&(n=r.getChildren().find(e=>D(e,o)))&&n.setVisibility(t)})})},y=function(e){P(e,!0)},V=function(e){P(e,!1)},C=function(e){if(!e&&!e.path)throw f.error("path property is mandatory, please check the input"),new Error(g.getNLSValue("Error.InvalidInput.Message"));return Array.isArray(e.path[0])?e.path:[e.path]},I=function(e,t){e.forEach(e=>{let n=d.getNodeFromPath(e);n?t(n,e):f.warn("Unable to find the item for the path",e)})},L=function(e,t){let n=!1;return function(e){return e.getChildren().some(e=>D(e,"PLMReqSpecifyHowToCnx"))}(e)&&(e.getChildren().forEach(e=>{D(e,"PLMReqSpecifyHowToCnx")&&(e.setVisibility(t),e.setVisibilityFree(!t))}),n=!0),n};return function(){var e={onSelectNode:y,onUnSelectNode:V};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&S.push(m.subscribe(m.events[t],e[t]))}(),p={loadFTA:async function(e){f.debug("loadFTA function invoked with params - ",JSON.stringify(e));let t,n,r=C(e),i=[],a=[];return I(r,function(e,t){L(e,!0)?i.push(t):a.push({path:t,node:e})}),a.length>0&&(t=a.map(e=>e.path[e.path.length-1]),(n=await h.getRequirements(t)).result.forEach(e=>{if(e.outputs.requirements){let t=a.find(t=>t.path[t.path.length-1]===e.input_object.physicalid);E(t.node,e.outputs.requirements),i.push(t.path)}else f.warn("FTA Information not found for the mfg item ",e.input_object.physicalid)})),d.render(),{path:[i]}},removeFTA:async function(e,t=!0){f.debug("removeFTA function invoked with params - ",JSON.stringify(e));let n=[];return I(C(e),function(e,t){L(e,!1)&&n.push(t)}),t&&d.render(),{path:n}},reset:function(){},destroy:function(){p.reset(),S.forEach(m.unSubscribe),S=[],m=null}}}}),define("DS/DELWebViewerController/DELWebViewerHighlightManager",["UWA/Core","DS/Selection/CSOManager","DS/Selection/HSOManager","DS/Selection/PSOManager","DS/DEL3DViewer/NodeUtil","DS/DELWebViewerUtils/DELWebViewerSettingsMgt"],function(e,t,n,r,i,a){"use strict";return function(o,l,s,c){const u="Mouse",d="Touch";var h,g,p,f=c.getOption("mappingKeys"),m=o.getInstance("BuildUpBehavior"),S=a.getDELViewerSetting("itemProductConnectionTypes"),b=function(t){(t=e.is(t,"array")&&t.length>0?t:[t]).forEach(t=>{!function(t){var n,r,a,o,s=m&&m.getCurrentBuildUpContent?m.getCurrentBuildUpContent():[];if(t.event&&(u===t.event.type||d===t.event.type)&&t.pathElement)if(l.getPickability()===f.PICKABILITY.BUILDUP&&s&&e.is(s.graphicData,"array")&&s.graphicData.length>0){for(o=(r=s.graphicData).length,a=l.getContext().streamPath(t.pathElement).toString(),n=0;n<o;n++)if(!0===r[n].visibility&&-1!==a.indexOf(r[n].path.toString())){t.pathElement=l.getContext().unstreamPath(r[n].path);break}}else if(l.getPickability()===f.PICKABILITY.ITEM){let e=t.pathElement;if(i.isRootMBOM(e)){for(;null!==e&&-1===S.indexOf(i.getNodeType(e.getLastElement(!0)));)e=e.getParentPath();e&&(t.pathElement=e.getParentPath())}}}(t)})};let v=l.subscribe("onRootAdded",async function(e){let t=await s.getTaxonomies([e.id]),n=s.getPPRType(t[e.id]),r=l.getNode({id:e.id});i.updateUserData(r,{pprType:n})});return h||(h=n.onPreAdd(b)),g||(g=r.onPreAdd(b)),p||(p=t.onPreAdd(b)),{destroy:function(){h&&n.unsubscribe(h),g&&r.unsubscribe(g),p&&t.unsubscribe(p),h=g=p=null,v&&l.unSubscribe(v),c.setOption(f.OPTIONS.CURRENTPICKABILITY,null)}}}}),define("DS/DELWebViewerController/Drill/DrillControllerV2",["UWA/Core","DS/Selection/CSOManager","DS/Selection/HSOManager"],function(e,t,n){"use strict";return function(r,i,a,o){const l={detailedFasten:"DetailedFasten",manufacturedPart:"ElementaryEndItem"},s=["Drill","NoDrill","PreDrill"],c=-1,u=-2,d=o.getOption("mappingKeys");var h,g={},p=function(){let t=function(t,n){let r=[];return e.is(t,"array")&&t.length>0&&n&&e.is(n.selected,"array")&&(r=e.is(t[0],"array")?t.map(e=>e.toString()):[t.toString()]),r};return{addSelectedPaths:function(e,n){t(e,n).forEach(function(e){-1===n.selected.indexOf(e.toString())&&n.selected.push(e.toString())})},removeSelectedPaths:function(e,n){let r=t(e,n);n.selected=n.selected.filter(e=>-1===r.indexOf(e))},getSelectedPaths:function(){var e=[];return Object.keys(g).forEach(function(t){e=e.concat(g[t].selected)}),e}}}(),f=o.getOption("eventCollection").getViewerCtrlEventHnd(),m=function(t,n,r=!1){e.is(t,"array")&&t.length>0&&i.setGraphicProperties({graphicProperties:function(e,t){return e.map(function(e){return{path:e,visibility:t,visibilityFree:!t,usePathElement:r}})}(t,n)},d.SCENEGRAPHKEYS.PRIVATE).then(function(){i.render()})},S=function(t){var n=i.getIdPathesLeadingToReference(t[t.length-3]),r=[];return e.is(n,"array")&&n.length>0&&n.forEach(function(e){e.ids.push(t[t.length-2]),e.ids.push(t[t.length-1]),r.push(e.ids)}),r},b=async function(t){var n,r=t.rootIds;e.is(r,"array")&&r.length>0&&(n=await a.getTaxonomies(r),r.forEach(async function(t){var r,o,l,s,c=a.getPPRType(n[t]),u=i.getContext().getController().getBIProxy().getFilterSpec(t,{V2:{}});"MBOM"===c&&(r=await(l=t,s=u?u.filter:null,a.getDrillData({id:l,filter:s})))&&e.is(r.paths,"array")&&r.paths.length>0&&(g[t]=r,g[t].selected=[],o=r.resultingProductDrillPaths,m(o,!1))}))},v=function(r){var a,o,d,h,f=(t.get()||[]).map(e=>i.getRIRPath(e.pathElement).toString()),b=function(){let t=[];return r&&e.is(r.path)&&r.path.length>0&&(t=e.is(r.path[0],"array")?r.path:[r.path]),t}(),v=function(e){let t=S(e).map(e=>e.toString());return f.find(e=>-1!==t.indexOf(e))},w=function(e){return e&&e.pathsr&&e.pathsr.includes("R_51")},E=function(e){var t;return e.parentNode.getChildren().forEach(function(n){n.getModelIdentification()===e.instanceObj.instanceId&&(t=n)}),t},D=function(e){let t=e[e.length-1],r=e[e.length-2],a=n.get().map(e=>i.getRIRPath(e.pathElement).toString()),o=e[e.length-3],s=e[e.length-4],g=d&&d.references?d.references[o]:{},p=d&&d.instances?d.instances[s]:{},f={path:e,referenceObj:d&&d.references?d.references[t]:{},instanceObj:d&&d.instances?d.instances[r]:{},parentNode:i.getNode({id:o})},b=function(e){i.getNodeFromPath(e)&&m(S(e).filter(t=>-1===a.indexOf(t.toString())&&t.toString()!==e.toString()),!h,!0)};(w(f.instanceObj)||g.type===l.detailedFasten&&w(p))&&f.parentNode&&(h?(function(e){let t,n,r,a,o=e.path,l=o.length>2?o.slice(0,o.length-2):o,s=function(e){i.highlightNode({pathElements:[{pathElement:e}],highlight:!0})};E(e)?(m([o],!0,!0),s(i.getPathElementV2(o))):(a=i.getPathElement(l),t=i.createNode({id:e.referenceObj.referenceId,type:e.referenceObj.type,matrix:null,usage:c}),n=i.createNode({id:e.instanceObj.instanceId,type:e.instanceObj.type,matrix:e.instanceObj.matrixtxt,parentMatrix:e.parentMatrix,usage:u}),r=i.createArrowNode({headLength:15,arrowLength:60,arrowWidth:1,headWidthToHeightRatio:.4,viewpoint:i.getContext().getViewer().currentViewpoint,color:{R:1,G:0,B:1},head:1,pickable:!0,globalSelection:!0}),n.addChild(t),t.addChild(r),e.parentNode.addChild(n),i.render(),a&&a.addElement&&(a.addElement(n),a.addElement(t),s(a)))}(f),b(e)):v(e)?m([e],!1,!0):(b(e),function(e){let t=(n.get()||[]).find(t=>t.pathElement.getLastElement().getModelIdentification()===e.referenceObj.referenceId);t&&i.highlightNode({pathElements:[t],highlight:!1}),e.parentNode&&(e.parentNode.removeChild(E(e)),i.render())}(f)))},P=function(e){var t;d=g[e[0]],o=d&&d.references?d.references[e[e.length-1]]:{},d&&o&&o.taxonomies&&Object.values(s).some(e=>-1!==o.taxonomies.indexOf(e))?(o.resultingProductLink?m([e],h):D(e),h?p.addSelectedPaths(e,d):p.removeSelectedPaths(e,d)):d&&o&&o.taxonomies&&Object.values(l).every(e=>-1===o.taxonomies.indexOf(e))&&(t=o.referenceId,(a={resultingProductDrills:d.resultingProductDrillPaths.filter(e=>e[e.length-3]===t),drills:d.drillPaths.filter(e=>e[e.length-3]===t)}).drills.forEach(function(e){D(e)}),m(a.resultingProductDrills,h),h?p.addSelectedPaths(a.drills.concat(a.resultingProductDrills),d):p.removeSelectedPaths(a.drills.concat(a.resultingProductDrills),d))};if(!r||!0!==r.doNotProcessDrills){if(r.clear){let e=p.getSelectedPaths().filter(e=>-1===f.indexOf(e));h=!1,e.forEach(function(e){P(e.split(","))})}b.length>0&&(h=r.highlight,b.forEach(function(e){P(e)}))}},w=function(e){e&&e.idPath&&b({rootIds:e.idPath})},E=function(e){e&&e.id&&g&&g[e.id]&&delete g[e.id]},D=function(){let n=t.get()||[],r=[],a=function(t,n){e.is(t,"array")&&t.length>0&&t.forEach(function(e){v({path:e,highlight:n})})};if(n.forEach(e=>r.push(i.getRIRPath(e.pathElement))),r&&r.length>0){let e;a(e=p.getSelectedPaths().map(e=>e.split(",")),!1),a(r,!0)}else 0===r.length&&a(p.getSelectedPaths().map(e=>e.split(",")),!1)};return(h=[{eventName:f.events.onHighlightComplete,eventHandler:f,callback:v},{eventName:"onRootAdded",eventHandler:i,callback:w},{eventName:"onRootRemoved",eventHandler:i,callback:E},{eventName:f.events.onUnHighlightNode,eventHandler:f,callback:D},{eventName:f.events.onSelectNode,eventHandler:f,callback:D},{eventName:f.events.onUnSelectNode,eventHandler:f,callback:D}],{subscribeEvents:function(){h.forEach(function(e){e.eventHandler.subscribe(e.eventName,e.callback)})}}).subscribeEvents(),{}}}),define("DS/DELWebViewerController/StatusBar/StatusBarController",["UWA/Core","DS/DELWebUiComponent/StatusBar/StartUpViewUI","DS/DELWebUiComponent/StatusBar/LastIndexingTime","DS/DEL3DViewer/NodeUtil","DS/DELWebUiComponent/NotificationUtils","DS/DELWebViewerController/Utils/DataParser","DS/DELWebViewerUtils/DELWebViewerSettingsMgt"],function(e,t,n,r,i,a,o){"use strict";return function(l,s,c,u){var d,h,g=u.getOption("statusBar").commands,p=s.getContext(),f=u.getOption("mappingKeys"),m=l.getInstance("BuildUpBehavior"),S=u.getOption("eventCollection").getViewerCtrlEventHnd(),b=u.getOption("logger"),v=function(t,n,r){let i=e.is(t,"array")&&t.length>0?t.map(e=>e.id):[];p.getController().getAttributes({ids:i,attributes:["ds6w:label","thumbnail_2d"],callbacks:{onComplete:function(e){d.setStartupView(i.map(t=>({id:t,name:e[t]["ds6w:label"],icon:e[t].preview_url}))),n&&n(e)}.bind(this),onFailure:function(){r&&r()}}})},w=function(){return!(!u.getOption("startUpView")||!e.is(u.getOption("startUpView").enable,"boolean"))&&u.getOption("startUpView").enable},E=async function(){let t=widget.getValue(f.STARTUPVIEWDATA),n=s.getMode()===f.VIEWERMODES.WORKINSTRUCTIONS;if(!0===w()){if(m.isBuildUpApplied()&&n)return void i.displayNotification({level:"error",title:u.getNLSValue("Error.StartUpViewNotSupport.Title"),subtitle:u.getNLSValue("Error.StartUpViewNotSupportWKIMode.Message"),sticky:!1});if(t)S.publish(S.events.onStartupViewRemoved,t),widget.deleteValue(f.STARTUPVIEWDATA),d.clearStartupView(),i.displayNotification({level:"success",title:u.getNLSValue("Success.StartupViewRemove.Title"),subtitle:u.getNLSValue("Success.StartupViewRemove.Subtitle"),message:u.getNLSValue("Success.StartupViewRemove.Message"),sticky:!1});else if(s.getRoots().length>0){let t={viewpoint:(await s.getViewPoint()).viewpoint,...function(){var t=c.getDataManager().get("process"),n=[];if(t){let r=m.getCurrentBuildUpContent(),i=r&&e.is(r.pathIds,"array")?r.pathIds:[];t.operationId=i.length>0?i[i.length-1]:"",t.operationPath=i,t.withFilter=!1,t.reframe=!1,n.push(t)}else s.getRoots().map(e=>r.getNodeID(e)).forEach(e=>n.push({id:e,withFilter:!1,reframe:!1}));return a.getOpenDataFormat(n)}()};widget.setValue(f.STARTUPVIEWDATA,t),v(t.items,e=>{let n=t.items.map(t=>e[t.id]["ds6w:label"]);n=n.join(", "),i.displayNotification({level:"success",title:u.getNLSValue("Success.StartUpViewSet.Title"),subtitle:u.getNLSValue("RootsLabel",{rootsLabel:n},"Success","Subtitle"),message:u.getNLSValue("Success.StartUpViewSet.Message"),sticky:!1})}),S.publish(S.events.onStartupViewSet,t)}else i.displayNotification({level:"error",title:u.getNLSValue("Error.StartUpViewNotSupport.Title"),subtitle:u.getNLSValue("Error.StartUpViewNoRoot.Subtitle"),message:u.getNLSValue("Error.StartUpViewNoRoot.Message"),sticky:!1})}};return e.is(g,"array")&&g.forEach(r=>{let i={container:p.getStatusBar().elements.infoContainer};switch(r){case"LastIndexingTime":i.nls=u.getNLSValue("Info.LastIndex.Title"),h=new n(i),function(){var t=o.getDELViewerSetting("displayLastIndexedTimeStamp");t&&t.value&&s.subscribe(S.events.onExpandCompleted,function(){c.getIndexingDate(t.service).then(function(n){var r=Number(n[t.service].allvaultsacl);e.is(r)&&h.setIndexingTime(r)}).fail(function(e){b.error(u.getNLSValue(e))})})}();break;case"StartUpView":i.onClick=E,i.nls=u.getNLSValue("Tooltip.StartupView.label"),i.enable=w(),d=new t(i),i.enable&&function(){var t=widget.getValue(f.STARTUPVIEWDATA);t?((t="object"!=typeof t?JSON.parse(t):t).viewpoint&&u.getOption("startUpView").setViewpoint&&s.setViewPoint(t.viewpoint),e.is(t.items,"array")&&t.items.length>0&&v(t.items)):d.clearStartupView()}()}}),S.subscribe(S.events.onUpdateOptions,function(t){t&&t.data&&t.data.startUpView&&e.is(t.data.startUpView.enable,"boolean")&&d.setStartUpViewState(t.data.startUpView.enable)}),{destroy:function(){h&&h.destroy(),d&&d.destroy()}}}}),define("DS/DELWebViewerController/Controller",["UWA/Core","UWA/Class/Promise","UWA/Class/Options","DS/DELWebViewerLogger/Logger","DS/DELWebViewerEvents/EventCollection","DS/DELPPRData/ModelInterface","DS/DEL3DViewer/ViewerInterface","DS/DELWeb3DViewerV2/ViewerInterface","DS/DELWebViewerController/BehaviorFactory","DS/DELWebViewerPerformaceLogger/PerformaceLogger","DS/DELWebViewerEventManager/ComponentEventHandler","DS/DELWebViewerProxyManager/ProxyManager","DS/DELWebViewerResourceUtils/ResourceUtils","DS/DELWebViewerPreferences/Preferences","DS/DELWebViewerUtils/DELWebViewerSettingsMgt","DS/DELWebViewerUtils/Utils","DS/DELWebViewerController/DELWebViewerHighlightManager"],function(e,t,n,r,i,a,o,l,s,c,u,d,h,g,p,f,m){"use strict";return function(p,f,S,b){var v,w,E,D,P,y,V,C,I,L,N,O,T,U=new n,W=new r,R={MfgItemsViewer:[],ProcessViewer:["BuildUpBehavior","ToolbarBehavior"],WorkInstructionViewer:["BuildUpBehavior","ToolbarBehavior","WorkInstructionBehavior"]},x={removeMaterial:"DrillBehavior",requirementFTA:"FTABehavior",statusBar:"StatusBarBehavior"};return U.setOptions(p),T=(T=localStorage?localStorage.getItem("LoggerSeverity"):null)||U.getOption("loggerSeverity"),W.setLoggerSeverity(T),U.setOption("logger",W),!0!==U.getOption("performanceLogging")&&"true"!==localStorage.getItem("PerformanceLogging")||(c.setOptions(U),c.initPerfObserver()),w=new i(U),U.setOption("eventCollection",w),E=new h(S),Object.assign(U,E),D=new g(E),Object.assign(U,D),V=U.getOption("viewerType"),W.info("********** Viewer Component Initialization Started (Type:%s) **************",Object.keys(R)[V]),c.markStart("DELWebViewerComponent"),O=[function(){return v=new a(U),y=function(e){var t={};Object.entries(f).some(function([n,r]){return r===e&&(t.name=n,t.viewerBehaviors=R[n],!0)});for(const[e,n]of Object.entries(x))p[e]&&t.viewerBehaviors.push(n);return t}(V),v.getCreatePromise(y.viewerBehaviors)},function(){let n;return b?(P=new l(b,U),n=e.Promise.resolve()):n=new t(function(e,t){P=new o(U,e,t)}).fail(function(e){throw W.error("ViewerInterface initialization failed.",e),e}),n}].map(e=>e()),t.all(O).then(function(){return(C=new s(P,v,U)).getCreatePromise(y.viewerBehaviors)}).then(function(){return new t(function(e){I=new d(C,P,v,U),N=new u(I,U),e(I)})}).then(function(){L=new m(C,P,v,U);let e=widget.getValue(p.mappingKeys.STARTUPVIEWDATA)||{};w.getComponentEventHnd().publish(w.getComponentEventHnd().events.onReady,e),c.markEnd("DELWebViewerComponent","Time taken to initialize the component"),W.info("********** Viewer Component Initialization Completed (Type:%s) **************",Object.keys(R)[V])}).fail(function(e){W.error("Component initialization failed due to : %o",e)}),{getViewer:function(){return P.getViewerElement()},getEventHnd:function(){return w.getComponentEventHnd()},getViewerBehavior:function(){return I},destroy:function(){[I,N,C,L,P,v,w,E].forEach(e=>{e&&e.destroy()}),N=U=null,w=E=C=P=v=W=D=O=L=null,c.dispose()}}}});