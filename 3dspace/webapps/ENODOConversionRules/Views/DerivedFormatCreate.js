define("DS/ENODOConversionRules/Views/DerivedFormatCreate",["UWA/Class/View","DS/Handlebars/Handlebars","DS/UIKIT/Input/Select","DS/UIKIT/Form","DS/UIKIT/SuperModal","DS/ENODOConversionRules/Models/DerivedFormatRule","DS/ENODOConversionRules/Views/ParamListView","text!DS/ENODOConversionRules/assets/templates/edfm.formatparams.html","text!DS/ENODOConversionRules/assets/templates/edfm.form.html","DS/ENODerivedFormatEssentials/Utils/DerivedFormatUtil","DS/ENO6WPlugins/jQuery","DS/ENO6WPlugins/jQueryUI","DS/Controls/TooltipModel","DS/Controls/Toggle","DS/WUXAutoComplete/AutoComplete","DS/ENODOConversionRules/Collections/UserTreeDocument"],function(e,t,n,a,r,o,i,l,d,s,c,m,u,f,v,g){var p,y,D,h,E,I,b,S;return e.extend({className:"derivedformatformview",viewMe:this,disableFields:!1,_myTreeDocument:null,id:function(){return"derivedformatformview"},setup:function(e){var t=this;t.selection=e.selection,t.superModal=new r,t._myTreeDocument=new g({key:"person"}),t.superModal.dialog({closable:!0,body:t.getForm(),title:t.selection?derivedformatmanagementinfra.getNLSData().label.editRuleTitle:derivedformatmanagementinfra.getNLSData().label.createRuleTitle}),t.addforceUpdateCheckbox(),t.setupEvent()},setupEvent:function(){var e=this;viewMe=this,p.getDocument().getElementById("derivedformatfield-converter").addEventListener("change",e.resetConverterForms.bind(null,e)),p.getDocument().getElementById("derivedformatfield-connector").addEventListener("change",e.resetFormFields.bind(null,e)),p.getDocument().getElementById("derivedformatfield-event").addEventListener("change",e.switchEventField.bind(null,e)),p.getDocument().getElementById("derivedformatfield-source").addEventListener("change",e.switchSourceFormat.bind(null,e)),p.getDocument().getElementById("derivedformatfield-target").addEventListener("change",e.switchTargetFormat.bind(null,e)),p.getDocument().getElementById("btnActionSubmit").addEventListener("click",e.save.bind(null,e)),p.getDocument().getElementById("btnActionCancel").addEventListener("click",e.cancel.bind(null,e)),e.switchEventField(),e.switchTargetFormat(e)},populateData:function(e,t){for(var n in e.innerText=null,t){var a=new Option(t[n].label,t[n].value);t[n].selected&&(a.selected=!0),e.add(a)}},populateSourceData:function(e,t){for(var n in e.innerText=null,t){var a=new Option(t[n].label,t[n].value);t[n].selected&&(a.selected=!0),t[n].partExtension&&(a.dataset.partextension=t[n].partExtension),t[n].subType&&(a.dataset.subtype=t[n].subType),a.dataset.type=t[n].type,e.add(a)}},populateEventData:function(e,t){for(var n in e.innerText=null,t){var a=new Option(t[n].label,t[n].value);a.lifecycle=t[n].lifecycle,e.add(a)}},refresh:function(){},addforceUpdateCheckbox:function(){var e=p.getDocument().getElementById("derivedformatfield-forceupdate-container");(h=new f({type:"checkbox",label:derivedformatmanagementinfra.getNLSData().label.forceUpdate,id:"derivedformatfield-forceupdate",touchMode:!0})).inject(e)},forceToDFC:function(e,t){if("true"==localStorage.getItem("DFM.forceToDfc")){var n=p.getDocument().getElementById("derivedformatfield-forcetodfc-container");(b=new f({type:"checkbox",label:derivedformatmanagementinfra.getNLSData().label.forceToDfc,id:"derivedformatfield-forcetodfc",touchMode:!0})).inject(n);var a=p.getDocument().getElementById("derivedformatfield-forcetodfc-tooltip");(S=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-info" style="font-size: 13px; height: 13px"></span>'}).inject(a)).tooltipInfos=new u({shortHelp:derivedformatmanagementinfra.getNLSData().label.forceToDfcTooltip}),b.addEventListener("buttonclick",function(){console.log("Force to DFC -- ",b.checkFlag),b.checkFlag?(e.dynamicAutoComplete._editor.disabled=!0,e.dynamicAutoComplete.placeholder="DerivedFormatConverter"):(e.dynamicAutoComplete._editor.disabled=!1,e.dynamicAutoComplete._editor.value="",e.selection&&(e.removeConvUser=!0),e.dynamicAutoComplete.placeholder=derivedformatmanagementinfra.getNLSData().label.conversionUserPlaceholder)})}},getForm:function(){(h=this).selection&&h.selection.get("convUserLabel")&&h._myTreeDocument.addUser(h.selection.get("convUserLabel"),h.selection.get("convUser")),y=new i({selection:h.selection,parameters:h.selection?h.selection.get("parameters"):{}});var e,n,a,r,o,s,c,m,u,f,v,g,D;t.compile(l);p=UWA.createElement("div",{id:"divCreateDerivedFormatFormContainer"}),h.selection&&(h.disableFields=!0,e=h.selection.get("converter"),n=h.selection.get("category"),a=h.selection.get("source"),r=h.selection.get("target"),o=h.selection.get("event"),s=h.selection.get("inputStreamId"),c=h.selection.get("outputStreamId"),m=h.selection.get("partExtension"),u=h.selection.get("exchangeFormat"),f=h.selection.get("subType"),v=h.selection.get("sourceType"),g=h.selection.get("forceUpdate"),D=h.selection.get("convUserLabel"));var h,E=t.compile(d),I=(h=this).getConverters();e||(e=I.find(e=>e.selected).value);var b=h.getConnectors(e);n||(n=b.find(e=>e.selected).value);var S=h.getSourceFormats(e,n);a||(a=S.find(e=>e.selected).value,v=S.find(e=>e.selected).type,m=S.find(e=>e.selected).partExtension,f=S.find(e=>e.selected).subType);var w=h.getEvents(e,n);o||(o=w.find(e=>e.selected).value);var C=h.getTargetFormats(e,n,a,v);if(r||(r=C.find(e=>e.selected).value),!s||!c||!u){var B=h.getStreamIds(e,n,a,v,r);s=B.inputStreamId,c=B.outputStreamId,u=B.exchangeFormat}return p.setHTML(E({labels:derivedformatmanagementinfra.getNLSData().label,buttons:derivedformatmanagementinfra.getNLSData().button,converters:I,connectors:b,events:h.getEvents(e,n),activation:h.getActivation(e,n,o),states:h.getStates(e,n,a),sources:S,sourceFormat:a,targets:C,disableFields:h.disableFields,inputStreamId:h.inputStreamId,outputStreamId:h.outputStreamId,partExtension:m,exchangeFormat:u,subType:f,sourceType:v,forceUpdate:g,conversionUser:D})),p.getElementsByClassName("derivedformatfield-formatparams")[0].append(y.getContent()),p},switchEventField:function(e){var t=p.getDocument().getElementById("derivedformatfield-event"),n=p.getDocument().getElementById("derivedformatfield-activation"),a=p.getDocument().getElementById("derivedformatfield-outputStreamId").value,r=t.selectedOptions[0].value;if((r||a)&&("checkin"==r||"onXCADSave"==r||"linkable"==a||"authoringvisu"==a?(h.checkFlag=!1,h.disabled=!0):h.disabled=!1),this.selection&&1==this.selection.get("forceUpdate")&&(h.checkFlag=!0),t&&t.selectedOptions[0]){var o=t.selectedOptions[0];"yes"==o.lifecycle||"yes"==o.getAttribute("lifecycle")?p.getDocument().getElementById("derivedformatfield-state-container").style.display="block":p.getDocument().getElementById("derivedformatfield-state-container").style.display="none";var i=viewMe.getActivation("","",o.value);viewMe.populateData(n,i),viewMe.fieldActivationTest(i,n)}},cancel:function(e){e.superModal.modals.current.hide()},switchSourceFormat:function(e){var t=p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0].value,n=p.getDocument().getElementById("derivedformatfield-connector").selectedOptions[0].value,a=p.getDocument().getElementById("derivedformatfield-source").selectedOptions[0].value,r=p.getDocument().getElementById("derivedformatfield-source").selectedOptions[0].dataset.type;p.getDocument().getElementById("derivedformatfield-sourceFormat").value=a;var o=p.getDocument().getElementById("derivedformatfield-target"),i=viewMe.getTargetFormats(t,n,a,r);viewMe.populateData(o,i),viewMe.fieldActivationTest(i,o);var l=p.getDocument().getElementById("derivedformatfield-state"),d=viewMe.getStates(t,n,a);viewMe.populateData(l,d),viewMe.switchTargetFormat(e)},resetConverterForms:function(){var e=p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0].value,t=p.getDocument().getElementById("derivedformatfield-connector"),n=viewMe.getConnectors(e);viewMe.populateData(t,n),viewMe.fieldActivationTest(n,t),viewMe.resetFormFields()},fieldActivationTest:function(e,t){1==e.length?t.disabled=!0:0==viewMe.disableFields&&(t.disabled=!1)},resetFormFields:function(){var e=p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0].value,t=p.getDocument().getElementById("derivedformatfield-connector").selectedOptions[0].value,n=p.getDocument().getElementById("derivedformatfield-event"),a=p.getDocument().getElementById("derivedformatfield-state"),r=p.getDocument().getElementById("derivedformatfield-source"),o=(p.getDocument().getElementById("derivedformatfield-target"),viewMe.getEvents(e,t));viewMe.populateEventData(n,o);var i=viewMe.getStates(e,t);viewMe.populateData(a,i);var l=viewMe.getSourceFormats(e,t);viewMe.populateSourceData(r,l),viewMe.fieldActivationTest(o,n),viewMe.fieldActivationTest(i,a),viewMe.fieldActivationTest(l,r),viewMe.switchSourceFormat(this),viewMe.switchEventField()},switchTargetFormat:function(e){var t,n,a,r,o,l=p.getDocument().getElementById("derivedformatfield-conversionuser-container"),d=p.getDocument().getElementById("dfm-derivedformatform-autoCompleteContainer"),s=p.getDocument().getElementById("derivedformatfield-forcetodfc-container"),c=p.getDocument().getElementById("derivedformatfield-forcetodfc-tooltip"),m=p.getDocument().getElementById("derivedformatfield-inputStreamId"),f=p.getDocument().getElementById("derivedformatfield-outputStreamId"),g=p.getDocument().getElementById("derivedformatfield-exchangeFormat"),w=p.getDocument().getElementById("derivedformatfield-converter"),C=p.getDocument().getElementById("derivedformatfield-connector"),B=p.getDocument().getElementById("derivedformatfield-source"),F=p.getDocument().getElementById("derivedformatfield-target");b&&(b=void 0),w&&(n=w.selectedOptions[0].value),C&&(a=C.selectedOptions[0].value),B&&(r=B.selectedOptions[0].value,o=B.selectedOptions[0].dataset.type),F&&(t=F.selectedOptions[0].value);var A=viewMe.getStreamIds(n,a,r,o,t);if(m&&(m.value=A.inputStreamId),f&&(f.value=A.outputStreamId),g&&(g.value=A.exchangeFormat),d.childNodes.length>=1&&d.removeChild(d.children[0]),s.childNodes.length>=1&&(s.removeChild(s.children[0]),c.removeChild(c.children[0])),D&&D.destroy(),E&&E.destroy(),S&&S.destroy(),I&&I.destroy(),"OnPremise"!==widget.getValue("x3dPlatformId")&&2==g.value&&"3DEXPERIENCE"==n){l.style.display="block",e._myTreeDocument&&!e.selection&&e._myTreeDocument.empty(),e.dynamicAutoComplete=new v({elementsTree:e._myTreeDocument,multiSearchMode:!1,allowFreeInputFlag:!1,value:e.selection?e.selection.get("convUser"):"",placeholder:derivedformatmanagementinfra.getNLSData().label.conversionUserPlaceholder,minLengthBeforeSearch:2}),e.dynamicAutoComplete.inject(d),e.forceToDFC(e,t),e.selection&&b&&e.selection.get("convUser")&&("DerivedFormatConverter"==e.selection.get("convUser")?(b.checkFlag=!0,e.dynamicAutoComplete._editor.disabled=!0):(b.checkFlag=!1,b.disabled=!0)),e.dynamicAutoComplete.addEventListener("uncommittedChange",e.unCommittedChange.bind(null,e)),e.dynamicAutoComplete.addEventListener("change",e.change.bind(null,e));var T=p.getDocument().getElementById("conversionuser-tooltip-container");(I=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-info" style="font-size: 13px; height: 13px"></span>'}).inject(T)).tooltipInfos=new u({shortHelp:derivedformatmanagementinfra.getNLSData().label.conversionUserTooltipForm})}else l.style.display="none";y=new i({selection:e.selection,parameters:e.selection?e.selection.get("parameters"):{},derivedForm:p});var x=p.getDocument().getElementById("derivedformatfield-event"),L=p.getDocument().getElementById("derivedformatfield-outputStreamId").value,M=x.selectedOptions[0].value;if((M||L)&&("checkin"==M||"onXCADSave"==M||"linkable"==L||"authoringvisu"==L?(h.checkFlag=!1,h.disabled=!0):h.disabled=!1),"authoring"!==m.value){var U=p.getDocument().getElementById("derivedformatfield-warning-icon");D=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-attention" style="font-size: 19px; height: 32px"></span>'}).inject(U);var O=m.value.toLowerCase(),N=o.toLowerCase();(k=derivedformatmanagementinfra.getNLSData().label[O+N])&&(k=k.replace("%1",t)),D.tooltipInfos=new u({shortHelp:k})}if("OnPremise"!==widget.getValue("x3dPlatformId")&&("OfficeDocumentConverter"==w.value||"3DEXPERIENCE"===a&&"step"===("CATPart"===t||t.toLowerCase()))){U=p.getDocument().getElementById("derivedformatfield-warning-icon");D=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-tokens" style="font-size: 19px; height: 32px"></span>'}).inject(U);var k=derivedformatmanagementinfra.getNLSData().label.creditConsumptionMsg;D.tooltipInfos=new u({shortHelp:k})}if(w&&C&&B&&F&&!F.disabled&&"3DEXPERIENCE"==w.value&&"SOLIDWORKS"==C.value&&"SLDPRT"==B.value&&"ExactGeometry"==F.value){p.getDocument().getElementById("edfm-derivedformatparamview-param-warning-row").style.display="";var P=p.getDocument().getElementById("edfm-derivedformatparamview-param-warning");UWA.createElement("span",{class:"edfm-derivedformatparamview-param-warning-msg",html:derivedformatmanagementinfra.getNLSData().label.polyhedralFalseWarning,styles:{}}).inject(P)}var R=p.getDocument().getElementById("derivedformatfield-forceupdate-tooltip");(E=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-info" style="font-size: 13px; height: 13px"></span>'}).inject(R)).tooltipInfos=new u({shortHelp:derivedformatmanagementinfra.getNLSData().label.forceUpdateExplain})},unCommittedChange:function(e,t){if(null!=t.target)var n=t.target.dsModel.getValueToCommit();else n=t;n.length>1&&e._myTreeDocument.x3dsearch(n)},change:function(e){if(e.dynamicAutoComplete.selectedItems){if(e.dynamicAutoComplete.selectedItems.options.id){var t=UWA.clone(e.dynamicAutoComplete.selectedItems.options);e.person=t,b&&(b.checkFlag=!1,b.disabled=!0)}}else e.removeConvUser=!0,b&&(b.checkFlag=!1,b.disabled=!1)},save:function(e){var t,n=e.getData(),a={};e.selection?((a=e.selection).set(n),t=a._previousAttributes):a=new o(n),a.get("deployed")&&!a.hasChanged()||(a.get("deployed")&&a.hasChanged()||"updated"==a.get("action")?a.set("action","updated"):a.set("action","created"));var r=e.isDuplicateRule(e,a);r&&a.isNew()?(a.set(t),e.superModal.modals.current.hide(),s.alert().add({className:"warning",message:derivedformatmanagementinfra.getNLSData().label.ruleExists})):!r&&n&&a.isValid()?(e.collection.add(a),e.superModal.modals.current.hide()):a.isNew()||(a.set(t),e.cancel(e),s.alert().add({className:"warning",message:derivedformatmanagementinfra.getNLSData().label.ruleExists}))},isDuplicateRule:function(e,t){var n=e.collection._models;for(var a in refModelAttr=t._attributes,n)if(modelAttr=n[a]._attributes,t.cid!=n[a].cid&&refModelAttr.converter===modelAttr.converter&&refModelAttr.source===modelAttr.source&&refModelAttr.target===modelAttr.target&&refModelAttr.event===modelAttr.event&&refModelAttr.category===modelAttr.category&&e.checkPartExtension(modelAttr,refModelAttr)&&e.checkSubType(modelAttr,refModelAttr)&&e.checkState(modelAttr,refModelAttr)&&e.checkParameters(modelAttr.parameters,refModelAttr.parameters))return console.log(),!0;return!1},checkPartExtension:(e,t)=>!e.partExtension||t.partExtension&&t.partExtension===e.partExtension,checkSubType:(e,t)=>!e.subType||t.subType&&t.subType===e.subType,checkState:function(e,t){return!e.state||t.state&&t.state===e.state},checkParameters:function(e,t){if(0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(Object.keys(e).length!==Object.keys(t).length)return!1;var n;if(Object.keys(e).length>0)for(var a in e)if(val=e[a],(n=t[a])!==val||void 0===n&&""==n)return!1;return!0},getData:function(){var e={};e.converter=p.getDocument().getElementById("derivedformatfield-converter").value,e.category=p.getDocument().getElementById("derivedformatfield-connector").value;var t=p.getDocument().getElementById("derivedformatfield-event").options.selectedIndex;if(e.event=p.getDocument().getElementById("derivedformatfield-event").value,e.forceUpdate=h.checkFlag,e.eventToDisplay=p.getDocument().getElementById("derivedformatfield-event").options[t]?p.getDocument().getElementById("derivedformatfield-event").options[t].innerHTML:"",e.activation=p.getDocument().getElementById("derivedformatfield-activation").value,"PROMOTE"==e.event||"promote"==e.event){var n=p.getDocument().getElementById("derivedformatfield-state").options.selectedIndex;e.state=p.getDocument().getElementById("derivedformatfield-state").value,e.stateToDisplay=p.getDocument().getElementById("derivedformatfield-state").options[n].innerHTML}else e.state="",e.stateToDisplay="";var a=p.getDocument().getElementById("derivedformatfield-source").options.selectedIndex;return e.source=p.getDocument().getElementById("derivedformatfield-source").value,e.sourceToDisplay=p.getDocument().getElementById("derivedformatfield-source").options[a].innerHTML,e.partExtension=p.getDocument().getElementById("derivedformatfield-source").options[a].dataset.partextension,e.subType=p.getDocument().getElementById("derivedformatfield-source").options[a].dataset.subtype,e.sourceType=p.getDocument().getElementById("derivedformatfield-source").options[a].dataset.type,e.target=p.getDocument().getElementById("derivedformatfield-target").value,e.updateOnly=!1,e.inputStreamId=p.getDocument().getElementById("derivedformatfield-inputStreamId").value,e.exchangeFormat=parseInt(p.getDocument().getElementById("derivedformatfield-exchangeFormat").value),e.outputStreamId=p.getDocument().getElementById("derivedformatfield-outputStreamId").value,this.person&&this.person.uuid?(e.convUser=this.person.uuid,e.convUserLabel=this.person.label):b&&b.checkFlag?e.convUser=e.convUserLabel="DerivedFormatConverter":this.removeConvUser?(e.convUser="",e.convUserLabel=""):this.selection&&(e.convUser=this.selection.get("convUser"),e.convUserLabel=this.selection.get("convUserLabel")),e.parameters=y.getData(),e},getConverters:function(){var e=derivedformatmanagementinfra.getInfraCollection(),t=new Array,n=e._models[0]._attributes.name;this.selection&&(n=this.selection.get("converter"));let a=derivedformatmanagementinfra.getNLSData().label.synchronous?derivedformatmanagementinfra.getNLSData().label.synchronous:"Synchronous, at save",r=derivedformatmanagementinfra.getNLSData().label.asynchronous?derivedformatmanagementinfra.getNLSData().label.asynchronous:"Asynchronous";return e.forEach(function(e,o){var i=!0===e.get("synchronous")||"true"===e.get("synchronous")?a:r;t.push({label:e.get("name")+" ("+i+")",value:e.get("name"),selected:e.get("name")==n})}),t.sort(function(e,t){var n=e.label.toUpperCase(),a=t.label.toUpperCase();return n<a?-1:n>a?1:0}),t},getConnectors:function(e){var t=derivedformatmanagementinfra.getInfraCollection().find(function(t,n){return t.get("name")==e}),n=new Array,a=t.get("connectors"),r=a[0].name;return this.selection&&(r=this.selection.get("category")),a.forEach(function(e,t){n.push({label:e.name,value:e.name,selected:e.name==r})}),n.sort(function(e,t){var n=e.label.toUpperCase(),a=t.label.toUpperCase();return n<a?-1:n>a?1:0}),n},getEvents:function(e,t){var n=new Array,a=derivedformatmanagementinfra.getInfraCollection().find(function(t,n){return t.get("name")==e});if(a){var r=a.get("connectors").find(function(e,n){return e.name==t});if(r&&r.actions){var o=r.actions,i=o[0].name;this.selection&&(i=this.selection.get("event")),o.forEach(function(e,t){n.push({label:e.value,value:e.name,selected:e.name==i,lifecycle:"lifecycle"==e.maturityGraph?"yes":"no"})})}}return n},getActivation:function(e,t,n){var a=new Array,r=derivedformatmanagementinfra.getInfraCollection();!e&&p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0]&&(e=p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0].value),!t&&p.getDocument().getElementById("derivedformatfield-connector").selectedOptions[0]&&(t=p.getDocument().getElementById("derivedformatfield-connector").selectedOptions[0].value);var o=r.find(function(t,n){return t.get("name")==e});if(o){var i=o.get("connectors").find(function(e,n){return e.name==t});if(i&&i.actions){var l=i.actions.find(function(e,t){return e.name==n});if(l){var d=l.activation.split("|"),s=d[0];this.selection&&(s=this.selection.get("activation")),d.forEach(function(e,t){a.push({label:derivedformatmanagementinfra.getNLSData().label[e],value:e,selected:e==s})})}}}return a},getStates:function(e,t,n){var a=new Array,r=derivedformatmanagementinfra.getInfraCollection().find(function(t,n){return t.get("name")==e});if(r){var o=r.get("connectors").find(function(e,n){return e.name==t});if(o&&o.actions){var i=o.actions,l=UWA.Array.detect(i,function(e){return"PROMOTE"==e.name||"promote"==e.name});if(l){var d=this.getSourceFormats(e,t).find(function(e,t){return e.value==n});if(d){var s=null;if(d.type.includes("Part")||d.type.includes("SEComponent")?s=l.states.Part:d.type.includes("Drawing")?s=l.states.Drawing:d.type.includes("Document")&&(s=l.states.Document),s){var c=s[0];this.selection&&(c=this.selection.get("state")),s.forEach(function(e,t){a.push({label:e.value,value:e.name,selected:e.name==c})})}}}}}return a},getTargetFormats:function(e,t,n,a){var r=new Array,o=derivedformatmanagementinfra.getInfraCollection().find(function(t,n){return t.get("name")==e});if(o){var i=o.get("connectors").find(function(e,n){return e.name==t});if(i){var l=i.supportedformats.find(function(e,t){return e.source.name==n&&e.source.type==a});if(l){var d=l.targets[0].target;this.selection&&(d=this.selection.get("target")),l.targets.forEach(function(t,n){var a=t.target,o=a;derivedformatmanagementinfra.getNLSData()[e]&&derivedformatmanagementinfra.getNLSData()[e].target[a]&&(o=derivedformatmanagementinfra.getNLSData()[e].target[a]),r.push({label:o,value:a,selected:a==d})})}}}return r},getStreamIds:function(e,t,n,a,r){var o={},i=derivedformatmanagementinfra.getInfraCollection().find(function(t,n){return t.get("name")==e});if(i){var l=i.get("connectors").find(function(e,n){return e.name==t});if(l){var d=l.supportedformats.find(function(e,t){return e.source.name==n&&e.source.type==a});if(d&&d.targets)d.targets.forEach(function(e,t){e.target==r&&(o.inputStreamId=e.inputStreamId,o.outputStreamId=e.outputStreamId,o.exchangeFormat=e.exchangeFormat)})}}return o},getSourceFormats:function(e,t){var n=this,a=derivedformatmanagementinfra.getInfraCollection().find(function(t,n){return t.get("name")==e}),r=new Array;if(a){var o,i,l,d=a.get("connectors").find(function(e,n){return e.name==t});if(d)n.selection?(o=n.selection.get("sourceType"),i=n.selection.get("source"),n.selection.get("partExtension"),l=n.selection.get("subType")):(o=d.supportedformats[0].source.type,i=d.supportedformats[0].source.name,d.supportedformats[0].source.partExtension,l=d.supportedformats[0].source.subtype),d.supportedformats.forEach(function(e,t){var n="";n=e.source.subtype?e.source.subtypeValue?e.source.subtypeValue:e.source.subtype:derivedformatmanagementinfra.getNLSData().label[e.source.type.toLowerCase()]?derivedformatmanagementinfra.getNLSData().label[e.source.type.toLowerCase()]:e.source.type;var a=e.source.name==i&&e.source.type==o;l&&(a=a&&e.source.subtype==l),r.push({label:n,value:e.source.name,type:e.source.type,selected:a,partExtension:e.source.partExtension,subType:e.source.subtype})})}return r},getParamListView:function(){return y}})});