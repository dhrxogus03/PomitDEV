define("DS/BookmarkEditorWebInWin/BookmarkWebInWin",["DS/i3DXCompass/Data","DS/WAFData/WAFData","DS/PADUtils/PADSettingsMgt","DS/IPClassifyUtil/IPClassifyUtility","DS/WidgetServices/WidgetServices","DS/PADServices/utils/WidgetProxy","UWA/Drivers/Alone","DS/BksStandalone/Ajax"],function(e,t,n,o,i,d,a,r){var s=window.bookmark.params;console.log("Inside BookmarkWebInWin"),widget.setValue("noCompass",!0),widget.setValue("x3dAppId","ENOFOL3_AP");var l="boolean"==typeof s.standalone&&s.standalone;widget.setValue("standalone",l),widget.id=Math.round(1e3*Math.random()).toString(),widget.setValue("x3dSharedId",widget.id),s.userId&&(window.top.dsUserLogin=s.userId);var c=s.tenantId||s.tenant;function u(){return new Promise(async e=>{var n=await new Promise(e=>{i.get3DSpaceUrlAsync({onComplete:e})});if(n){var o=n+"/resources/modeler/pno/person?current=true&select=firstname&select=lastname",d={type:"json",method:"GET",headers:{Accept:"application/json"}};d.onComplete=e,d.onFailure=e.bind(null,!1),d.onTimeout=e.bind(null,!1),t.authenticatedRequest(o,d)}else e(null)})}return window.bookmark.params.tenant=c,(c=c||o.getTenantId())&&(widget.setValue("x3dPlatformId",c),n.setSetting("x3dPlatformId",c),d.setValue("x3dPlatformId",c)),new Promise(async t=>{var n=!widget.body;widget.body=widget.body?widget.body:UWA.createElement("div"),widget.body.addClassName("FolderEditor"),widget.body.setStyles({height:"100%",width:"100%",position:"relative","text-align":"initial","z-index":0}),window.COMPASS_CONFIG=window.COMPASS_CONFIG?window.COMPASS_CONFIG:{myAppsBaseUrl:s.myAppsUrl,userId:s.userId,lang:s.lang},e.initialize({myAppsBaseUrl:s.myAppsUrl,userId:s.userId,passportUrl:"",proxyTicketUrl:""});let o=await u();widget.userId=o.userId||o.name,widget.fullName=o.firstname+" "+o.lastname,widget.userId&&(window.top.dsUserLogin=widget.userId),document.body.getElement("#tempDiv").remove(),n&&widget.body.inject(document.body,"top"),window.top.performance.mark("createWidget_begin");var i=new FolderEditor({widget:widget,defaultSelectionPath:s.defaultSelectionPath,contextID:s.contextID,launchWithReadMode:s.launchWithReadMode,folderToOpen:s.folderToOpen,multiselection:!1!==s.multiselection,nativeAuthMode:s.switchtoAuthoringMode});1==window.Odt&&(window.swFolderEditor=i),widget.dispatchEvent("onLoad"),widget.dispatchEvent("onResize"),widget.dispatchEvent("onRefresh"),t(i)})});let prereqCEF="DS/WebInWinUtils/dscef",prereqList=[];window.dscef||prereqList.push(prereqCEF),define("DS/BookmarkEditorWebInWin/BookmarkEditorWebInWin",[prereqList],()=>{require(["DS/UWPClientCode/PublicAPI"]);var e=null;for(var t in window.onReady=function(){require(["DS/BookmarkEditorWebInWin/BookmarkWebInWin","DS/WidgetServices/securityContextServices/SecurityContextServices","DS/MessageBus/MessageBus"],function(t){t.then(t=>{e=t,console.log("onReady")})})},window.jsFunction=function(e){console.log(e),window.bookmark="string"==typeof e?JSON.parse(e):e,console.log("jsFunction"),onReady()},window.setCtxMenu=function(t,n,o){e&&e.setCtxMenu(t,n,o)},window.onClearSelection=function(){e&&e.onClearSelection()},window.SelectSearchObjs=function(t){e&&e.insertSelectedSearchObjs(t)},window.exportCmd={onWebInWinFilterChange:function(t){e&&e.onWebInWinFilterChange(t)},expandToBookmark:function(t){if(e&&t){var n="string"==typeof t?JSON.parse(t):t;e.expandToBookmarkExternally(n)}},setFilterOnContent:function(t){if(e){var n=null;n="object"==typeof t?t:n,e.applyExclusiveFilterAndLoadContent(n)}}},exportCmd)window[t]=exportCmd[t];var n=function(){"undefined"!=typeof dscef&&(dscef.sendString('{"operation":"readyForInit"}'),dscef.sendString("isReadyForInit"))},o={onLoad:function(){(location.search.contains("test=true")||window.odt)&&require(["DS/BksStandalone/Standalone"],e=>{e({launchWithReadMode:!0,standalone:!0,folderToOpen:"",multiselection:!0}).then(e=>{n(),jsFunction({params:e})})}),n()}};require(["UWA/Widget"],function(e){var t=window.widget=new e;t.addEventOnce("onLoad",o.onLoad.bind(this)),t.dispatchEvent("onLoad")})}),require(["DS/BookmarkEditorWebInWin/BookmarkEditorWebInWin"]);