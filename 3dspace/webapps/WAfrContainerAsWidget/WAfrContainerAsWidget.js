define("DS/WAfrUIStandardComponents/mod_TreeModel",[],function(){"use strict";class e{constructor(e){this._model=e,this._idx=e._private._childrenOrder.length-1}next(){-1!==this._idx&&(--this._idx,-1===this._idx&&(this._model=null))}isValid(){return this._model&&-1!=this._idx}get(){if(!this.isValid())throw new Error("This iterator is invalid.");let e=this._model._private._childrenOrder[this._idx];return this._model.getChild(e)}}class t{constructor(e){this._model=e,this._idx=0,0===e._private._childrenOrder.length&&(this._idx=-1)}next(){-1!==this._idx&&(++this._idx,this._model._private._childrenOrder.length<=this._idx&&(this._idx=-1,this._model=null))}isValid(){return this._model&&-1!=this._idx}get(){let e=this._model._private._childrenOrder[this._idx];return this._model.getChild(e)}}class n{constructor(e){if(this._private=Object.create(null),this._private._children={},this._private._childrenOrder=[],!e.identifier)throw new Error("data must have an identifier property");this._private._data=e}getId(){return this._private._data?this._private._data.identifier:null}getData(){return this._private._data}addChild(e){let t=new n(e);return this._private._children[e.identifier]=t,this._private._childrenOrder.push(t.getId()),t}addChildNode(e){if(!(e instanceof n))throw new Error("childNode must be a TreeModel");let t=e.getId();if(!t)throw new Error("id must be defined and not empty");this._private._children[t]=e,this._private._childrenOrder.push(t)}getChild(e){return this._private._children[e]}getForwardIterator(){return new t(this)}getBackwardIterator(){return new e(this)}reorder(e){let t=!0;const n=this._private._childrenOrder;for(let o=0,r=e.length;o<r;++o)if(!n.includes(e[o])){t=!1;break}return t&&(n.length===e.length?this._private._childrenOrder=e:t=!1),t}}return{TreeModel:n}}),define("DS/WAfrUIStandardComponents/UIFrame",["UWA/Core","UWA/Element","DS/Controls/LayerSet","DS/Windows/ImmersiveFrame","DS/Utilities/TouchUtils","DS/Utilities/Css"],function(e,t,n,o,r,i,a){"use strict";function s(e){r.getTouchMode()?e.elements.container.addClassName("wafr-uiframe-touch"):e.elements.container.removeClassName("wafr-uiframe-touch")}var d=function(t){this.options=e.clone(e.extend({hasStatusBar:!1},t)),this.elements={},window.UIFRAME_DEBUG=this};return d.prototype._setHasStatusBar=function(e){this.options.hasStatusBar=e,this.elements.container&&(this.options.hasStatusBar?this.elements.container.addClassName("wafr-uiframe-statusbar"):this.elements.container.removeClassName("wafr-uiframe-statusbar"))},d.prototype._buildView=function(){var t=this;this.elements.container=e.Element.create("div",{class:"wafr-uiframe wux-afr-framewindow wux-ui-ambiance-light"}),this.options.hasStatusBar&&this.elements.container.addClassName("wafr-uiframe-statusbar"),s(this),this._onTouchChange=function(){s(this)}.bind(this),document.addEventListener("touchChange",this._onTouchChange),this.elements.viewerFrame=e.Element.create("div",{styles:{width:"100%",height:"100%"}}),this.elements.uiFrame=e.Element.create("div",{class:"wux-afr-framewindow-uiframe",dataType:"UI-Frame"}),this.elements.uiFrame3d=e.Element.create("div",{class:"wux-afr-framewindow-uiframe",dataType:"UI-Frame-3D"}),this.elements.layerSet=new n,this.elements.layerSet.inject(this.elements.container),this.elements.layerSet.addLayer(this.elements.viewerFrame).setAttribute("data-type","viewer"),this.elements.layerSet.addLayer(this.elements.uiFrame3d,{top:0,bottom:0,left:0,right:0,pointerEvents:"none"}).setAttribute("data-type","ui-frame-3d"),this.elements.layerSet.addLayer(this.elements.uiFrame,{top:0,bottom:0,left:0,right:0,pointerEvents:"none",overflow:"auto"}).setAttribute("data-type","ui-frame-2d"),setTimeout(function(){t.elements.container&&t.elements.container.addClassName("wux-ui-at-screen")},0);var r=this.getExecutionContext();this.elements._immersiveFrame=new o({identifier:r.getSourceApp()&&r.getSourceApp().getId()?r.getSourceApp().getId():r.getId(),_ActionBar_V3:!0,dockingElementsPriority:[WUXDockAreaEnum.TopDockArea,WUXDockAreaEnum.BottomDockArea,WUXDockAreaEnum.LeftDockArea,WUXDockAreaEnum.RightDockArea]}),this.elements._immersiveFrame.inject(this.elements.uiFrame),i.disableSelection(this.elements.container),i.disableSelection(this.getUIFrame()),this.elements._statusBarWrapper=new e.Element("div",{class:"wafr-statusbar-wrapper"}),this.elements._statusBarWrapper.classList.add("wafr-statusbar-wrapper"),this.elements._statusBarWrapper.inject(this.elements.container)},d.prototype.initialize=function(){var t=this.getExecutionContext();if(!t)throw new Error("Execution context cannot be null here");return this.elements.container||(this._buildView(),this.elements.container.inject(t.getUiContainer())),e.Class.Promise.resolve()},d.prototype._enableBusyMode=function(){this.elements.container.addClassName("wux-ui-state-busy")},d.prototype._disableBusyMode=function(){this.elements.container.removeClassName("wux-ui-state-busy")},d.prototype.getUIFrame=function(){return this.elements.uiFrame},d.prototype.getContainer=function(){return this.elements.container},d.prototype.isDisplayedActionBar=function(){return!1},d.prototype.getImmersiveFrame=function(){return this.elements._immersiveFrame},d.prototype.getExposedComponentCtor=function(){var e=function(){},t=this;return e.prototype.getImmersiveFrame=function(){return t.getImmersiveFrame()},e.prototype.getUIFrame=function(){return t.getUIFrame()},e.prototype.getViewerLayout=function(){return t.elements.viewerFrame},e.prototype.isDisplayedActionBar=function(){return t.isDisplayedActionBar()},e.prototype.addLayer=function(e,n){return t.elements.layerSet.addLayer(e,n)},e.prototype.addRootClassName=function(e){t.elements.container.addClassName(e)},e.prototype._privateGetStatusBarWrapper=function(){return t.elements._statusBarWrapper},e.prototype._privateSetStatusBarWrapperVisibility=d.prototype._privateSetStatusBarWrapperVisibility.bind(this),e},d.prototype._privateSetStatusBarWrapperVisibility=function(e){if(null==e||"boolean"!=typeof e)throw new Error("Invalid value");if(!this.elements.container.hasClassName("wafr-uiframe-statusbar"))throw new Error("Impossible to change the status bar visibility on an UIFrame which does not contain a status bar.");e?this.elements.container.removeClassName("wafr-statusbar-wrapper-hidden"):this.elements.container.addClassName("wafr-statusbar-wrapper-hidden")},d.prototype.destroy=function(){this.elements._immersiveFrame.destroy(),this.elements.container.destroy(),document.removeEventListener("touchChange",this._onTouchChange)},d.DEFAULT_COMPONENT_NAME="AFR_UIFrameManager",d}),define("DS/WAfrContainerAsWidget/ContainerView",["UWA/Core","DS/Core/Core"],function(e,t){"use strict";var n="Apps supporting transition",o=function(n){n=n||{},this._presenter=null,this._version=n.version||1,this.elements=Object.create(null),this.elements.container=new e.Element("div",{class:"wux-applicationframe-app",styles:{width:"100%",height:"100%"},debug:n.debug?"true":""}),this._widget=n.i_widget?n.i_widget:window.widget,n.debug&&t.setFullscreen(),this._widget.id||(this._widget.id=this._widget.getValue("containerId")),this._widget.id||(this._widget.id=e.Utils.getUUID()),window.addEventListener("unload",function(){this.dispatchEvent("onDestroy",this._widget.id)}.bind(this))};return o.prototype.addExecutionContextView=function(t,n){var o=new e.Element("div",{class:"wux-applicationframe-execution-context",tabindex:"0",styles:{width:"auto",height:"100%",outline:"none",position:"relative"}}),r=this;o.addEventListener("click",function(){n&&0!==r.elements.container.getChildren().length&&n.call(t)}),o.inject(this.elements.container),o.focus(),t.setUiContainer(o)},o.prototype.setCurrentExecutionContextIndex=function(e){this._current=e},o.prototype.inject=function(e){this.elements.container.inject(e)},o.prototype.initPreferences=function(){this._widget.initPreferences()},o.prototype.hasPreference=function(e){return this._widget.hasPreference(e)},o.prototype.hasPreferences=function(){return this._widget.hasPreferences()},o.prototype.setPreferences=function(e){this._widget.setPreferences(e)},o.prototype.mergePreferences=function(e){this._widget.mergePreferences(e)},o.prototype.getPreferences=function(){return this._widget.getPreferences()},o.prototype.addPreference=function(e){this._widget.addPreference(e)},o.prototype.getPreference=function(e){return this._widget.getPreference(e)},o.prototype.addEvent=function(e,t,n,o){return this._widget.addEvent(e,t,n,o)},o.prototype.addEventOnce=function(e,t,n,o){return this._widget.addEventOnce(e,t,n,o)},o.prototype.removeEvent=function(e,t,n,o){return this._widget.removeEvent(e,t,n,o)},o.prototype.dispatchEvent=function(e,t,n){return this._widget.dispatchEvent(e,t,n)},o.prototype.deleteValue=function(e){return this._widget.deleteValue(e)},o.prototype.getValue=function(e){return this._widget.getValue(e)},o.prototype.setValue=function(e,t){return this._widget.setValue(e,t)},o.prototype.setValues=function(e){return this._widget.setValues(e)},o.prototype.getValues=function(){return this._widget.data},o.prototype.getId=function(){return this._widget.id},o.prototype.getTitle=function(){return this._widget.getTitle()},o.prototype.setTitle=function(e){this._widget.setTitle(e)},o.prototype.setIcon=function(e){this._widget.setIcon(e)},o.prototype.setBrand=function(e){"3DEXPERIENCE"===e?(this._widget.icon="",this._widget.setMetas({brand:"3DSWYM"}),this._widget.setIcon(this._widget.uwaUrl.substr(0,this._widget.uwaUrl.search("/webapps/")+9)+"WAfrContainerAsWidget/assets/icons/afr-no-brand-icon.png")):void 0!==e&&this._widget.setMetas({brand:e})},o.prototype.destroy=function(){this.elements.container.empty(!0)},o.prototype.getParentContainer=function(){return window.top.document.querySelector("#m_"+this._widget.id)},o.prototype.getTitleHeader=function(){var e=this.getParentContainer(),t=e?e.querySelector(".moduleHeader__title"):void 0,n={widgetParentHeader:t,brand:void 0,appTitle:void 0,title:void 0};if(!t)return n;var o=t.innerHTML.split(" - ");if(o.length>=3){n.title="",o[0]===this._widget.getValue("appTitle")?(n.brand=void 0,n.appTitle=o[0],n.title+=o[1]):(n.brand=o[0],n.appTitle=o[1]),n.title+=o[2];for(var r=3;r<o.length;r++)n.title+=" - "+o[r]}else 2===o.length?o[0]===this._widget.getValue("appTitle")?(n.brand=void 0,n.appTitle=o[0],n.title=o[1]):(n.brand=o[0],n.appTitle=o[1]):n.appTitle=o.join(" - ");return n},o.prototype.setTitleHeader=function(e){var t=(e=e||{}).appTitle,o=this.getTitleHeader(),r=!1;if(t!==n&&o.widgetParentHeader){var i=e.brand,a=e.appTitle,s=e.title;if(o.title===n&&(o.title=""),void 0!==s&&(o.title=s,r=!0),a&&a!==n&&(o.appTitle=a,r=!0),null!=i&&(o.brand=i,r=!0),"SOLIDWORKS"!==o.brand&&"3DEXPERIENCE"!==o.brand||(o.brand=void 0),r){var d=[o.brand,o.appTitle];o.widgetParentHeader.innerHTML=d.filter(function(e){return e}).join(" - "),o.title&&(o.widgetParentHeader.textContent+=` - ${o.title}`)}}},o.prototype.getLanguage=function(){return this._widget.lang},o.prototype.setDir=function(e){this._widget.setDir(e)},o.prototype.getView=function(){return this._widget.getView()},o.prototype.getAvailableViews=function(){return this._widget.getAvailableViews()},o.prototype.getUrl=function(){return this._widget.getUrl()},o.prototype.setOptions=function(e){this._widget.setOptions(e)},o.prototype.setCounter=function(e,t){this._widget.setCounter(e,t)},o.prototype.getViewportDimensions=function(){return this._widget.getViewportDimensions()},o.prototype.getViewportDimensions=function(){return this._widget.getViewportDimensions()},o.prototype.setPlugins=function(e){this._widget.setPlugins(e)},o.prototype.initPlugins=function(){this._widget.initPlugins()},o.prototype.isApplicationInWidget=function(){return!!this._widget},o}),define("DS/WAfrContainerAsWidget/WAfrContainerAsWidget",["UWA/Class/Promise","UWA/Data","DS/WAfrDebug/mod_Performances","WebappsUtils/WebappsUtils"],function(e,t,n,o){var r=1,i=!1,a=n.Performances,s=new a,d=function(){this._container=null};return d.setDefaultVersion=function(e){r=e},d.getWidgetURL=function(e){var t=e.uwaUrl;return t||(t=window.location.href),t},d.getParametersInUrl=function(e,t){var n,r=e;if(r||(r=d.getWidgetURL(t)),r){var i="?afrWebService",a=r.indexOf(i);if(a>0){var s=r.substring(a+i.length,r.length).split("/"),p=null;n={protocol:"http",host:"",port:"8080",service:null,afrAppId:"",debug:"true",containerId:null};for(var c=0;c<s.length;c++)2===(p=s[c].split(":")).length&&(n[p[0]]=p[1]);var u=n.service?n.service+"/wafr/apps/":"";return n.protocol&&n.host&&(u=n.protocol+"://"+n.host+":"+n.port+"/"+u),{afrService:u,afrServicePort:n.port,afrAppId:n.appId,debug:"true"===n.debug,containerId:n.containerId,forceProxy:"true"===n.forceProxy}}if(i=encodeURIComponent("forDebug:"),(a=r.indexOf(i))>0){var l=r.substring(a+i.length,r.length);return l=decodeURIComponent(l),JSON.parse(l)}if((a=r.indexOf("?"))>0){var f=r.substring(a+1);return n={conf:"",afrAppId:"",debug:"true"},f.split("&").forEach(function(e){var t=e.split("=");"appId"===t[0]?n.afrAppId=decodeURIComponent(t[1]):n[t[0]]=decodeURIComponent(t[1])}),n.conf?{configUrl:o.getWebappsBaseUrl()+n.conf+"/assets/json/"+n.afrAppId+"_conf.json",debug:n.debug}:{afrAppId:n.afrAppId,debug:"true"==n.debug,containerId:null,forceProxy:"true"===n.forceProxy}}}return null},d.loadWidget=function(t){if(t||(t=window.widget),this.perfLoadWigToken=s.start("WAFR: load widget"),t){var n=function(e,n){t.launched?d.onReadyWidget({i_widget:t}).then(e,n):t.onLoad=function(){d.onReadyWidget({i_widget:t}).then(e,n)}};return new e(function(e,r){try{var a=t.uwaUrl||o.getWebappsBaseUrl();if(!(t.uwaUrl&&!a.startsWith("http://localhost")))return n(e,r),!0;require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","UWA/Data"],function(o,a){let s;s="0.1"===t.data.afrVersion&&t.data.afrAppId?t.data.afrAppId:t.data.appId,"X3DPLAW_AP"===t.data.appId&&"CAT3DPLAW_AP"===t.data.afrAppId&&t.setValue("afrAppId",s),o.getAppInfo({appId:s,onFailure:function(e){console.log(e)},onComplete:function(o){if(!o)throw new Error("no app has been retrieved from compass APIs");var s="";o.brand&&"string"==typeof o.brand&&"3DEXPERIENCE"!==o.brand&&"SOLIDWORKS"!==o.brand&&(s=o.brand),i=o.thirdParty,t.setMetas({brand:s});let d=null;if(o.config)d=o.config;else for(var p=0;p<o.platforms.length;p++)if((o.platforms[p].id===o.platformId||o.platforms[p].id==t.data.x3dPlatformId)&&o.platforms[p].config){d=o.platforms[p].config;break}var c;null!==d?(console.debug("[WebAfr] Application using WebAfr web service."),c=d,a.request(c,{type:"json",responseType:"json",onComplete:function(o){return new Promise(function(e,t){return o.afrConfigurations?o.afrPreferences?(n=o.afrPreferences,new Promise(function(e,t){require(["DS/MePreferencesClientAPI/MePreferencesClientAPI"],function(o){o&&o.readPreferences?o.readPreferences([{Repository:n.repositoryName,PreferenceNames:[n.preferenceName]}]).then(function(n){var o;return n&&n.repositories&&n.repositories[0]&&n.repositories[0].preferences&&n.repositories[0].preferences[0]&&n.repositories[0].preferences[0].value&&(o=n.repositories[0].preferences[0].value),"boolean"==typeof o?e(o):"string"==typeof o?e("true"===o.toLowerCase()):t(new Error("[AFR] The AFR preference is not of a good type"))}):e(!1)})})).then(function(t){return e(t?o.afrConfigurations[1]:o.afrConfigurations[0])},function(t){return console.warn("[AFR] Preference has no value, fallback to default configuration"),e(o.afrConfigurations[1])}):t(new Error("[AFR] Cannot retrieve the correct configuration without preference")):e(o);var n}).then(function(o){for(var i in o&&Object.keys(t.data).forEach(function(e){e.startsWith("afr")&&t.setValue(e,void 0)}),o)t.setValue(i,o[i]);return n(e,r),!0})}})):(console.debug("[WebAfr] Application NOT using WebAfr web service."),delete t.data.afrService,n(e,r))}})})}catch(e){throw new Error("failed to start the widget : "+e)}return!0})}throw new Error("widget do not exist ")},d.onReadyWidget=function(n){s.stop(this.perfLoadWigToken);var o=d.getParametersInUrl(void 0,n.i_widget);return o?o.configUrl?new e(function(e,r){t.request(o.configUrl,{type:"json",responseType:"json",onComplete:function(t){t&&t.afrService?(t.debug=o.debug,t.forceProxy=n&&n.forceProxy,d.loadContainer(t,void 0,n.i_widget).then(e,r)):(t.afrService,d.loadContainer(t,void 0,n.i_widget).then(e,r))},onFailure:r})}):d.loadContainer(o,void 0,n.i_widget):!n.i_widget.data.afrVersion||"0.1"!=n.i_widget.data.afrVersion&&"1"!=n.i_widget.data.afrVersion?d.loadContainer(void 0,2,n.i_widget):d.loadContainer(void 0,1,n.i_widget)},d.createContainer=function(e,t){var n=new e.containerViewCtor({debug:e.debug,version:e.version,config:e.config,i_widget:t});e.containerOptions.view=n;var o=new e.containerCtor(e.containerOptions);return e.bDontUseIframe||(t.body.empty(!0),n.inject(t.body),t.setTitle(""),t.setTitle=function(e){o.updateTitle({title:e})},t.getTitle=function(){return o.productTitle}),e.config&&n.setValues(e.config),o},d.loadContainer=function(t,n,a,s){n||(n=r);var p="DS/WAfrContainer/Container",c=!1;a||(a=window.widget);let u=s?s.appOptions:void 0;return t&&(c=t.debug,t.debug&&(t.customAfrContainer="DS/AppsTester/Container",delete t.debug),t.customAfrContainer&&(p=t.customAfrContainer,delete t.customAfrContainer),t.containerId&&(a.id=t.containerId)),new e(function(e,r){require([p,"DS/WAfrContainerAsWidget/ContainerView",n>=2?"DS/WAfrContainerAsWidget/default_config":"DS/WAfrContainerAsWidget/old_config"],function(p,l,f){var m=a.uwaUrl||o.getWebappsBaseUrl(),g=a.uwaUrl&&!m.startsWith("http://localhost"),h=d.createContainer({containerViewCtor:l,containerCtor:p,containerOptions:{config:f,baseUrl:m,proxified:g,forceProxy:!(!t||!t.forceProxy)&&t.forceProxy,version:n,isTPA:i,winID:s?s.winID:void 0,appContent:u&&u.applicationContent?u.applicationContent:void 0},version:n,config:t,debug:c,bDontUseIframe:s?s.bDontUseIframe:void 0},a);h.loadCurrentConfig().then(function(){e(h)},r)},r)})},d}),define("DS/WAfrUIStandardComponents/WAfrWidgetProxy",[],function(){"use strict";function e(){return new Error("The function is not defined outside a Widget scope.")}var t=function(e){this.data={},this.bus={},this.metas={},this.title="",this.modelEvents=e,this.subscribeMap=new Map};return t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data[e]},t.prototype.setValues=function(e){var t={};for(var n in this.data)t[n]=this.data[n];for(var n in e)t[n]=e[n];this.data=t},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.addEvent=function(e,t,n,o){const r=this.modelEvents.subscribe({event:e},t),i={name:e,listener:t};this.subscribeMap.set(r,i)},t.prototype.removeEvent=function(e,t,n,o){e&&t?this.subscribeMap.forEach((n,o)=>{n.listener&&n.listener===t&&n.name===e&&this.modelEvents.unsubscribe(o)}):this.modelEvents.unsubscribeAll({event:e})},t.prototype.addEventOnce=function(e,t,n,o){this.modelEvents.subscribeOnce({event:e},t)},t.prototype.dispatchEvent=function(e,t,n){let o={};o.event=e,o.data=t,this.modelEvents.publish(o)},t.prototype.deleteValue=function(e){delete this.data[e]},t.prototype.getValues=function(){return this.data},t.prototype.getId=function(){return this.id},t.prototype.setIcon=function(e){this.icon=e},t.prototype.setMetas=function(e){this.metas=e},t.prototype.isApplicationInWidget=function(){return!1},t.prototype.initPreferences=e,t.prototype.hasPreference=e,t.prototype.hasPreferences=e,t.prototype.setPreferences=e,t.prototype.mergePreferences=e,t.prototype.getPreferences=e,t.prototype.addPreference=e,t.prototype.getPreference=e,t.prototype.setBrand=e,t.prototype.getTitleHeader=e,t.prototype.setTitleHeader=e,t.prototype.getLanguage=e,t.prototype.setDir=e,t.prototype.getView=e,t.prototype.getAvailableViews=e,t.prototype.getUrl=e,t.prototype.setOptions=e,t.prototype.setCounter=e,t.prototype.getViewportDimensions=e,t.prototype.setPlugins=e,t.prototype.initPlugins=e,t});var WAfrStandardComponentKey={AppManager:"AFR_AppManager",ModelEvents:"AFR_ModelEvents",NotificationManager:"AFR_NotificationManager"};Object.freeze(WAfrStandardComponentKey),define("DS/WAfrContainerAsWidget/old_config",[],function(){"use strict";return{interpreters:[],components:[{key:WAfrStandardComponentKey.AppManager,code:"DS/WAfrAppManager/mod_AppManager",ctor:"AppManager"},{key:WAfrStandardComponentKey.ModelEvents,code:"DS/WAfrModelEvents/mod_ModelEvents"},{key:WAfrStandardComponentKey.NotificationManager,code:"DS/WAfrUIStandardComponents/NotificationManager"}]}}),define("DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities",[],function(){"use strict";function e(e,t){t.getId=e.getId.bind(e),t.isAvailable=e.isAvailable.bind(e),t.onAvailabilityEvent=e.onAvailabilityEvent.bind(e),t.removeAvailabilityEventSubscription=e.removeAvailabilityEventSubscription.bind(e),t.getI18n=e.getI18n.bind(e),t.getAccelerator=e.getAccelerator.bind(e),t.isExecutable=e.isExecutable.bind(e),t.onIsEnabledChangeEvent=e.onIsEnabledChangeEvent.bind(e),t.removeIsEnabledChangeEventSubscription=e.removeIsEnabledChangeEventSubscription.bind(e)}function t(t,n){e(t,n),n.getIcon=t.getIcon.bind(t),n.onIconChangedEvent=t.onIconChangedEvent.bind(t),n.removeIconChangedEventSubscription=t.removeIconChangedEventSubscription.bind(t),n.execute=t.execute.bind(t),n.onLifeCycleEvent=t.onLifeCycleEvent.bind(t),n.removeLifeCycleEventSubscription=t.removeLifeCycleEventSubscription.bind(t),n.onI18nChangedEvent=t.onI18nChangedEvent.bind(t),n.removeI18nEventSubscription=t.removeI18nEventSubscription.bind(t)}function n(e){var n={};return t(e,n),n}function o(t){var o={};return function(t,o){e(t,o),o.onStateEvent=t.onStateEvent.bind(t),o.getState=t.getState.bind(t),o.setState=t.setState.bind(t);var r=t.getCheckHandler(),i=t.getUncheckHandler();o.onCheckHandler=r?n(r):null,o.onUncheckHandler=i?n(i):null,o.removeStateEventSubscription=t.removeStateEventSubscription.bind(t),o.accept=function(e){return e.visitCheckHandler(o)}}(t,o),o}return{createActionHandlerProxy:function(e){var n={};return function(e,n){t(e,n),n.accept=function(e){return e.visitActionHandler(n)}}(e,n),n},createCommandHandlerProxy:function(e){var n={};return function(e,n){t(e,n),n.getState=e.getState.bind(e),n.accept=function(e){return e.visitCommandHandler(n)}}(e,n),n},createCheckHandlerProxy:o,createRadioHandlerProxy:function(t){var n={};return function(t,n){e(t,n);for(var r=t.getElements(),i=r.length,a=0,s=[];a<i;++a)s.push(o(r[a]));n.items=s,n.isUnselectAuthorized=t.isUnselectAuthorized.bind(t),n.getSelectedItem=function(){var e=t.getSelectedItem(),n=null;return e&&(n=o(e)),n},n.getSelectedItemId=t.getSelectedItemId.bind(t),n.getRadioItemState=t.getRadioItemState.bind(t),n.setRadioItemState=t.setRadioItemState.bind(t),n.onItemStateEvent=t.onItemStateEvent.bind(t),n.removeItemStateEventSubscription=t.removeItemStateEventSubscription.bind(t)}(t,n),n}}}),define("DS/WAfrUIStandardComponents/NotificationManager",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],function(e,t){"use strict";var n=function(){t.setNotificationManager(e)};return n.prototype.notifyError=function(e){if(e){var t={level:"error",title:e.title,message:e.message,sticky:!1};this.addNotif(t)}},n.prototype.notifySuccess=function(e){var t={level:"success",title:e.title,message:e.message,sticky:!1};this.addNotif(t)},n.prototype.addNotif=function(t){e.addNotif(t)},n.prototype.createExposedComponent=function(){return{notifyError:this.notifyError.bind(this),notifySuccess:this.notifySuccess.bind(this),addNotif:this.addNotif.bind(this)}},n}),define("DS/WAfrContainerAsWidget/ContainerViewProxy",["DS/WAfrContainerAsWidget/ContainerView"],function(e){"use strict";let t=function(t){this.view=t||new e};return t.prototype.initPreferences=function(){this.view.initPreferences()},t.prototype.hasPreference=function(e){return this.view.hasPreference(e)},t.prototype.hasPreferences=function(){return this.view.hasPreferences()},t.prototype.setPreferences=function(e){this.view.setPreferences(e)},t.prototype.mergePreferences=function(e){this.view.mergePreferences(e)},t.prototype.getPreferences=function(){return this.view.getPreferences()},t.prototype.addPreference=function(e){this.view.addPreference(e)},t.prototype.getPreference=function(e){return this.view.getPreference(e)},t.prototype.addEvent=function(e,t,n,o){return this.view.addEvent(e,t,n,o)},t.prototype.removeEvent=function(e,t,n,o){return this.view.removeEvent(e,t,n,o)},t.prototype.addEventOnce=function(e,t,n,o){return this.view.addEventOnce(e,t,n,o)},t.prototype.dispatchEvent=function(e,t,n){return this.view.dispatchEvent(e,t,n)},t.prototype.deleteValue=function(e){return this.view.deleteValue(e)},t.prototype.getValue=function(e){return this.view.getValue(e)},t.prototype.setValue=function(e,t){return this.view.setValue(e,t)},t.prototype.setValues=function(e){return this.view.setValues(e)},t.prototype.getValues=function(){return this.view.getValues()},t.prototype.getId=function(){return this.view.getId()},t.prototype.getTitle=function(){return this.view.getTitle()},t.prototype.setTitle=function(e){this.view.setTitle(e)},t.prototype.setIcon=function(e){this.view.setIcon(e)},t.prototype.setBrand=function(e){this.view.setBrand(e)},t.prototype.getTitleHeader=function(){return this.view.getTitleHeader()},t.prototype.setTitleHeader=function(e){this.view.setTitleHeader(e)},t.prototype.getLanguage=function(){return this.view.getLanguage()},t.prototype.setDir=function(e){this.view.setDir(e)},t.prototype.getView=function(){return this.view.getView()},t.prototype.getAvailableViews=function(){return this.view.getAvailableViews()},t.prototype.getUrl=function(){return this.view.getUrl()},t.prototype.setOptions=function(e){this.view.setOptions(e)},t.prototype.setCounter=function(e,t){this.view.setCounter(e,t)},t.prototype.getViewportDimensions=function(){return this.view.getViewportDimensions()},t.prototype.setPlugins=function(e){this.view.setPlugins(e)},t.prototype.initPlugins=function(){this.view.initPlugins()},t.prototype.isApplicationInWidget=function(){return this.view.isApplicationInWidget()},t}),define("DS/WAfrUIStandardComponents/mod_WidgetProxyComponent",["DS/WAfrContainerAsWidget/ContainerViewProxy","DS/WAfrUIStandardComponents/WAfrWidgetProxy"],function(e,t){"use strict";var n=Object.create(null);n.DEFAULT_COMPONENT_NAME="AFR_WidgetProxyComponent";return n.WidgetProxyComponent=class{constructor(){this._private={}}initialize(){let n;const o=this.getExecutionContext();if(o){const t=o.getContainerView();if(!t)throw new Error("Error while creating the ContainerViewProxy. No container view retrieved");n=new e(t)}else n=new e;if(n.isApplicationInWidget())this.widgetProxy=n;else{let e=o.getComponent("AFR_ModelEvents");this.widgetProxy=new t(e)}return Promise.resolve()}clean(){return Promise.resolve()}destroy(){return Promise.resolve()}createExposedComponent(){const e=this,t=new Error("[WAfr- WidgetProxyComponent] WidgetProxy attribute is not defined");return{setValue:function(n,o){return e.widgetProxy?e.widgetProxy.setValue(n,o):t},getValue:function(n){return e.widgetProxy?e.widgetProxy.getValue(n):t},setValues:function(n){return e.widgetProxy?e.widgetProxy.setValues(n):t},getValues:function(){return e.widgetProxy?e.widgetProxy.getValues():t},getTitle:function(){return e.widgetProxy?e.widgetProxy.getTitle():t},setTitle:function(n){return e.widgetProxy?e.widgetProxy.setTitle(n):t},addEvent:function(n,o,r,i){return e.widgetProxy?e.widgetProxy.addEvent(n,o,r,i):t},addEventOnce:function(n,o,r,i){return e.widgetProxy?e.widgetProxy.addEventOnce(n,o,r,i):t},dispatchEvent:function(n,o,r){return e.widgetProxy?e.widgetProxy.dispatchEvent(n,o,r):t},deleteValue:function(n){return e.widgetProxy?e.widgetProxy.deleteValue(n):t},getId:function(){return e.widgetProxy?e.widgetProxy.getId():t},setIcon:function(n){return e.widgetProxy?e.widgetProxy.setIcon(n):t},setMetas:function(n){return e.widgetProxy?e.widgetProxy.setMetas(n):t},removeEvent:function(n,o,r,i){return e.widgetProxy?e.widgetProxy.removeEvent(n,o,r,i):t},initPreferences:function(){return e.widgetProxy?e.widgetProxy.initPreferences():t},hasPreference:function(n){return e.widgetProxy?e.widgetProxy.hasPreference(n):t},hasPreferences:function(){return e.widgetProxy?e.widgetProxy.hasPreferences():t},setPreferences:function(n){return e.widgetProxy?e.widgetProxy.setPreferences(n):t},mergePreferences:function(n){return e.widgetProxy?e.widgetProxy.mergePreferences(n):t},getPreferences:function(){return e.widgetProxy?e.widgetProxy.getPreferences():t},addPreference:function(n){return e.widgetProxy?e.widgetProxy.addPreference(n):t},getPreference:function(n){return e.widgetProxy?e.widgetProxy.getPreference(n):t},setBrand:function(n){return e.widgetProxy?e.widgetProxy.setBrand(n):t},getTitleHeader:function(){return e.widgetProxy?e.widgetProxy.getTitleHeader():t},setTitleHeader:function(n){return e.widgetProxy?e.widgetProxy.setTitleHeader(n):t},getLanguage:function(){return e.widgetProxy?e.widgetProxy.getLanguage():t},setDir:function(n){return e.widgetProxy?e.widgetProxy.setDir(n):t},getView:function(){return e.widgetProxy?e.widgetProxy.getView():t},getAvailableViews:function(){return e.widgetProxy?e.widgetProxy.getAvailableViews():t},getUrl:function(){return e.widgetProxy?e.widgetProxy.getUrl():t},setOptions:function(n){return e.widgetProxy?e.widgetProxy.setOptions(n):t},setCounter:function(n,o){return e.widgetProxy?e.widgetProxy.setCounter(n,o):t},getViewportDimensions:function(){return e.widgetProxy?e.widgetProxy.getViewportDimensions():t},setPlugins:function(n){return e.widgetProxy?e.widgetProxy.setPlugins(n):t},initPlugins:function(){return e.widgetProxy?e.widgetProxy.initPlugin():t},isApplicationInWidget:function(){return e.widgetProxy?e.widgetProxy.isApplicationInWidget():t}}}},n}),define("DS/WAfrUIStandardComponents/mod_UIComponent",["DS/WAfrUIStandardComponents/UIFrame","DS/Utilities/TouchUtils","DS/WAfrUIModelManagers/MainUIComponentManager","DS/WAfrUIModelManagers/ContextualUIComponentManager","DS/WAfrHandlers/mod_HandlerComponent","DS/WAfrTweakers/TweakerHandlerGenerateMethods","DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities"],function(e,t,n,o,r,i,a){"use strict";var s={DEFAULT_COMPONENT_NAME:"Afr_UIComponent"},d=a.createActionHandlerProxy,p=a.createCommandHandlerProxy,c=a.createCheckHandlerProxy,u=a.createRadioHandlerProxy;return s.UIComponent=function(){this._properties={},this._properties.components={panels:[]},this._properties._mainComponentAvailability=!0,this._properties._mainUIComponentManager=new n,this._properties._contextualUIComponentManager=new o},s.UIComponent.prototype.createDefaultHandlerRepresentation=function(e){var n=null;if(e||e.id){var o=this.getExecutionContext();if(o){var a=o.getComponent(r.DEFAULT_COMPONENT_NAME);if(a){var s=a.getLeafHandlerMaps(),c=null,u=null,l=s.actionHandlers[e.id];if(l?(c="actionHandler",u=d(l)):(l=s.commandHandlers[e.id])&&(c="commandHandler",u=p(l)),u&&e.representationType&&"WelcomeScreenButton"===e.representationType)return function(e,t){return new Promise((e,t)=>{require(["DS/WelcomeScreenView/WelcomeScreenButtonController"],t=>e(t),t)}).then(n=>{let o,r=function(e){return o.controller.subscribe({event:"REMOVE_CUSTOM_CONTENT"},e)},i=function(e){o.controller.unsubscribe(e)};return o=t.hasCustomContent?{id:t.id,hasCustomContent:!0,i18n:e.getI18n(),icon:e.getIcon().hasOwnProperty("fonticon")?e.getIcon().fonticon:"",controller:new n({onAction:t=>new Promise((t,n)=>{e.execute({args:{viewCallback:t,subscribeToCancelCustomContentFunction:r,unsubscribeToCancelCustomContentFunction:i}})})})}:{id:t.id,i18n:e.getI18n(),icon:e.getIcon().hasOwnProperty("fonticon")?e.getIcon().fonticon:"",controller:new n({onAction:t=>(e.execute(),Promise.resolve())})},Promise.resolve(o)})}(u,e);if(u&&e.representationType&&"AfrHomePage"===e.representationType)return function(e,t){return new Promise((e,t)=>{require(["DS/AfrHomePageV3/mod_AfrHomePageControllers"],t=>e(t),t)}).then(n=>{const o=n.HomePageButtonController;if(!t.id)throw new Error("[mod_UIComponent] Missing id");const r=t.id;if(!e.getI18n()||!e.getI18n().title)throw new Error("[mod_UIComponent] Missing Handler title");const i=e.getI18n().title,a=t.emphasize;if(!e.getIcon()||!e.getIcon().fonticon)throw new Error("[mod_UIComponent] Missing Handler icon");return{id:r,title:i,emphasize:a,icon:e.getIcon().fonticon,controller:new o({onAction:()=>e.execute()})}})}(u,e);if(u&&c){let e=i[c]({value:u,typePath:c,touchMode:t.getTouchMode()});n=Promise.resolve(e).then(function(e){return Promise.resolve(e.getContent())})}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.prototype.createCheckHandlerRepresentation=function(e){var n=null;if(e||e.id){var o=this.getExecutionContext();if(o){var a=o.getComponent(r.DEFAULT_COMPONENT_NAME);if(a){var s=a.getCheckHandlerMap()[e.id];if(s){var d=c(s);let e=i.checkHandlerButton({value:d,typePath:"checkHandlerButton",touchMode:t.getTouchMode()});n=Promise.resolve(e).then(function(e){return Promise.resolve(e.getContent())})}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.prototype.createRadioHandlerRepresentation=function(e){var n=null,o={default:"radioHandler",singleButton:"radioHandlerLoopButton"};if(e||e.id){var a=o.default;if(e.representationType&&(o.hasOwnProperty(e.representationType)?a=o[e.representationType]:n=Promise.reject(new Error("The specified representation type does not exist."))),null===n){var s=this.getExecutionContext();if(s){var d=s.getComponent(r.DEFAULT_COMPONENT_NAME);if(d){var p=d.getRadioHandlerMap()[e.id];if(p){var c=u(p);let e=i[a]({value:c,typePath:a,touchMode:t.getTouchMode()});n=Promise.resolve(e).then(function(e){return Promise.resolve(e.getContent())})}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.DEFAULT_COMPONENT_NAME=s.DEFAULT_COMPONENT_NAME,s.UIComponent.prototype.createExposedComponent=function(){return{deactivateMainComponent:this.deactivateMainComponent.bind(this),activateMainComponent:this.activateMainComponent.bind(this),hideMainComponent:this.hideMainComponent.bind(this),showMainComponent:this.showMainComponent.bind(this),getContextualUIComponentManager:this.getContextualUIComponentManager.bind(this),activateSection:this.activateSection.bind(this),getActiveSections:this.getActiveSections.bind(this),pinSection:this.pinSection.bind(this),unpinSection:this.unpinSection.bind(this),isSectionPinnedByUser:this.isSectionPinnedByUser.bind(this),createDefaultHandlerRepresentation:this.createDefaultHandlerRepresentation.bind(this),createCheckHandlerRepresentation:this.createCheckHandlerRepresentation.bind(this),createRadioHandlerRepresentation:this.createRadioHandlerRepresentation.bind(this)}},s.UIComponent.prototype.destroy=function(){return Promise.resolve()},s.UIComponent.prototype.initialize=function(){var n=[];this._properties._mainUIComponentManager.setContext({executionContext:this.getExecutionContext(),UIComponent:this.getExecutionContext().getComponent(this._private._identifier),UIFrame:this.getExecutionContext().getComponent(e.DEFAULT_COMPONENT_NAME)}),this._properties._mainComponentAvailability&&n.push(this._properties._mainUIComponentManager.generate({touchMode:t.getTouchMode()}));var o=this.getExecutionContext();return this._properties._contextualUIComponentManager.setContext({executionContext:o,UIComponent:void 0===o?void 0:o.getComponent(this._private._identifier),UIFrame:void 0===o?void 0:o.getComponent(e.DEFAULT_COMPONENT_NAME),Viewer:void 0===o?void 0:void 0===o.getApplicationComponent("Viewer")?void 0:o.getApplicationComponent("Viewer").get3DViewer()}),Promise.all(n)},s.UIComponent.prototype.configure=function(){return Promise.resolve()},s.UIComponent.prototype.clean=function(){var t,n=this;n._properties.flatModel=void 0,n._properties.tagList=void 0,n._properties._mainComponentAvailability=!0,n._properties._mainUIComponentManager.clean(),n._properties._contextualUIComponentManager.dispose();var o=n.getExecutionContext().getComponent(e.DEFAULT_COMPONENT_NAME);if(o&&(t=o.getImmersiveFrame()),t&&n._properties.components&&n._properties.components.panels)for(var r,i;0!==n._properties.components.panels.length||void 0!==n._properties.components.panels[0];)i=n._properties.components.panels[0],n._properties.components.panels.splice(0,1),(r=i.windowGroup)&&(t.removeWindow(r),r.destroy()),i&&(t.removeWindow(i),i.destroy());return Promise.resolve()},s.UIComponent.prototype.setGlobalFlatModel=function(e){this._properties.flatModel=e.model},s.UIComponent.prototype.setTagList=function(e){this._properties.tagList=e.tab},s.UIComponent.prototype.deactivateMainComponent=function(){this._properties._mainComponentAvailability=!1,this.hideMainComponent()},s.UIComponent.prototype.activateMainComponent=function(){this._properties._mainComponentAvailability=!0},s.UIComponent.prototype.activateSection=function(e){var t=this;void 0!==t&&void 0!==t._properties&&void 0!==t._properties._mainUIComponentManager&&(Array.isArray(e)?t._properties._mainUIComponentManager.activateSections(e):t._properties._mainUIComponentManager.activateSection(e))},s.UIComponent.prototype.getActiveSections=function(){return void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager?this._properties._mainUIComponentManager.getActiveSections():null},s.UIComponent.prototype.pinSection=function(e){if(void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager)return this._properties._mainUIComponentManager.pinSection(e)},s.UIComponent.prototype.unpinSection=function(e){if(void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager)return this._properties._mainUIComponentManager.unpinSection(e)},s.UIComponent.prototype.isSectionPinnedByUser=function(e){if(void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager)return this._properties._mainUIComponentManager.isSectionPinnedByUser(e)},s.UIComponent.prototype.hideMainComponent=function(){void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager&&this._properties._mainUIComponentManager.hide()},s.UIComponent.prototype.showMainComponent=function(){void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager&&this._properties._mainUIComponentManager.show()},s.UIComponent.prototype.setMainComponentActivatedCategory=function(e){void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager&&this._properties._mainUIComponentManager.setActivatedCategory(e)},s.UIComponent.prototype.setMainComponentCategoriesOrder=function(e){void 0!==this&&void 0!==this._properties&&void 0!==this._properties._mainUIComponentManager&&this._properties._mainUIComponentManager.setCategoriesOrder(e)},s.UIComponent.prototype.getContextualUIComponentManager=function(){return this._properties._contextualUIComponentManager},s.UIComponent.prototype.setCategories=function(e){this._properties.categories=e},s.UIComponent.prototype.getCategories=function(){return this._properties.categories},s}),define("DS/WAfrUIStandardComponents/mod_UIInterpreter",["UWA/Class/Promise","DS/WAfrUIStandardComponents/mod_UIComponent","DS/WAfrHandlers/mod_HandlerComponent","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities","DS/WAfrUIStandardComponents/UIFrame"],function(e,t,n,o,r,i,a){"use strict";var s=i.createActionHandlerProxy,d=i.createCommandHandlerProxy,p=i.createCheckHandlerProxy,c=i.createRadioHandlerProxy;function u(){this._treeDocument=void 0,this._uiComponent=void 0,this._tagList=[]}function l(e,t){if(!e||!t)throw new Error("Missing parameters.");t.handlerList&&t.handlerList.forEach(function(t){for(var n in t)e._tagList.indexOf(n)<0&&e._tagList.push(n)})}function f(e,t){if(!e||!t)throw new Error("Missing parameters.");t.handlerList.forEach(function(t){var n,r,i={tagList:e._tagList,elem:t};e._treeDocument.addChild((r=new o({label:(n=i).elem.identifier,icon:"",grid:{label:n.elem.identifier,type:null,tweaker:null},useAsyncPreExpand:!1}),n.tagList.forEach(function(e){r.options.grid[e]=n.elem[e]}),r))})}function m(e,t){if(!e||!t)throw new Error("Missing parameters.");void 0===e._categories&&(e._categories={});let n=0;const o=t.categories.length;let r=null;for(;n<o;++n)r=t.categories[n],e._categories[r.identifier]=r}let g=!1;const h=localStorage.getItem("DEBUG_AFR_I18N");null!==h&&("string"==typeof h&&"true"===h||"boolean"==typeof h&&h)&&(console.warn("[DEBUG] DS/WAfrUIStandardComponents/mod_UIInterpreter: I18N Debug mode activated.","\n[DEBUG] DO NOT USE IN PRODUCTION.",'\n[DEBUG] Be sure to activate "Verbose" level in the DevTools to see all logs.'),g=!0);const C="font-weight:bold;",y="color:#368EC4;",v="color:#EA4F37;";function w(e){return new Promise((t,n)=>{require([e],t,n)})}function _(e,t,n){let o=Promise.resolve();if("string"==typeof e)if(void 0===n||n.includes(t))o=w("i18n!"+e);else{g&&console.debug(`%c[mod_UIInterpreter~getI18nFromPath][I18N]%c üè≥Ô∏èü©π Fallback I18n (runtime) for%c ${e}%c to %cen%c. Requested%c ${t}%c but filtered by%c [${n?n.join(", "):"en"}]`,`${C} ${y}`,`${y}`,`${C} ${y}`,`${y}`,`${C} ${y}`,`${y}`,`${C} ${y}`,`${y}`,`${C} ${y}`);const r="text!"+e+"_en.json";o=w(r).then(t=>{try{return JSON.parse(t)}catch(t){const n=new Error(`Internal Error. ${e} content is not a valid JSON.`);return g&&console.debug(`%c[mod_UIInterpreter~getI18nFromPath][I18N]%c üè≥Ô∏è‚ùå Error computing I18n for%c ${r}%c. The content is not a valid JSON]`,`${C} ${v}`,`${v}`,`${C} ${v}`,`${v}`),Promise.reject(n)}})}else o=Promise.reject(new Error("path is not a string"));return o}u.prototype._fetchI18nData=function(e,t){let n=Promise.resolve();const o=function(e,t){let n;return e&&t&&e.stdConf&&e.stdConf[t]&&(n=e.stdConf[t]),n}(e,"i18n");if(!o||o&&"runtime"===o){if(g&&console.debug("%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏è i18n title for UIModel categories are resolved dynamically at runtime.",`${C} ${y}`,`${y}`),e&&e.UIModel&&e.UIModel.categories){let o=e.UIModel,r=[];const i=o.categories.length;let a=null;const s=e&&e.internationalization?e.internationalization:void 0;for(let e=0;e<i;++e)(a=o.categories[e])&&a.internationalization&&a.internationalization.path?(g&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏èüîé Compute I18n (runtime) for%c ${a.identifier}%c in%c ${t}%c filtered with the following array%c [${s?s.join(", "):"en"}]`,`${C} ${y}`,`${y}`,`${C} ${y}`,`${y}`,`${C} ${y}`,`${y}`,`${C} ${y}`),r.push(_(a.internationalization.path,t,s))):r.push(Promise.reject(new Error(`Category ${a.identifier} doesn't have a path property set for internationalization. Check the wafrapp file definition.`)));n=Promise.allSettled(r).then(e=>{if(o.categories.length===e.length)for(let t=0;t<e.length;++t){const n=e[t];let r=o.categories[t];if("fulfilled"===n.status){const e=n.value,t=r.identifier+".Title";g&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏è‚úîÔ∏è Retrieved I18n for%c ${r.identifier}%c.`,`${C} ${y}`,`${y}`,`${C} ${y}`,`${y}`,e),r.internationalization.title=e[t]}else g&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏è‚ùå Error computing I18n for%c ${r.identifier}%c. Identifier of the category will be used as a fallback instead of the title.`,`${C} ${v}`,`${v}`,`${C} ${v}`,`${v}`),g&&console.debug(n.reason)}})}}else g&&console.debug("%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏è i18n title for UIModel categories are retrieved from buildtime data.",`${C} ${y}`,`${y}`);return n},u.prototype.interpret=function(e,n,o){let i=Promise.resolve();if(void 0===e||void 0===n)return i;this._executionContext=n;var s=t.DEFAULT_COMPONENT_NAME;this._uiComponent=n.getComponent(s);var d=e.UIModel;const p=window.widget?window.widget.lang:"en";return g&&console.debug(`%c[mod_UIInterpreter.interpret][I18N]%c üè≥Ô∏è Environment current lang:%c ${p}`,`${C} ${y}`,`${y}`,`${C} ${y}`),(i=this._fetchI18nData(e,p)).then(()=>{this._treeDocument=new r,this._treeDocument.options.shouldBeSelected=function(e){return!1},d&&d.handlerList&&(l(this,d),f(this,d),void 0!==d.mainComponent&&(this._mainComponentAvailability=d.mainComponent.mainComponentAvailability,this._mainComponentDefaultCategory=d.mainComponent.defaultActivatedCategory,this._mainComponentCategoriesOrder=d.mainComponent.categoriesOrder),d.categories&&m(this,d));var e=n.getComponent(a.DEFAULT_COMPONENT_NAME);if(!e)return Promise.reject(new Error("Cannot find the UIFrame component"));var t=!1;d&&d.statusComponent&&d.statusComponent._specialAuthorization&&(t=!0),e._setHasStatusBar(t)})},u.prototype.commit=function(){var t=this,o=n.DEFAULT_COMPONENT_NAME;t._handlerComponent=t._executionContext.getComponent(o);var r=t._handlerComponent._private._chkHdlrMap,i=t._handlerComponent._private._radioHdlrMap,a=t._handlerComponent.getLeafHandlerMaps(),u=a.actionHandlers,l=a.commandHandlers,f=!1;if(!this._handlerComponent)throw new Error("HandlerComponent not found");var m=this._treeDocument.getChildren();return this._treeDocument.prepareUpdate(),m.forEach(function(e){var t=e.options.grid.identifier,n="";if(u.hasOwnProperty(t))n=void 0!==e.options.grid.set?"commandFlyout":"actionHandler",Array.isArray(e.options.grid.category)&&e.options.grid.category.includes("WAfrFront")&&(f=!0),e.updateOptions({grid:{type:n,typeView:"actionHandler",handler:s(u[t])}});else if(l.hasOwnProperty(t))n=void 0!==e.options.grid.set?"commandFlyout":"commandHandler",Array.isArray(e.options.grid.category)&&e.options.grid.category.includes("WAfrFront")&&(f=!0),e.updateOptions({grid:{type:n,typeView:"commandHandler",handler:d(l[t])}});else if(r.hasOwnProperty(t))n=void 0!==e.options.grid.set?"commandFlyout":"checkHandlerButton",Array.isArray(e.options.grid.category)&&e.options.grid.category.includes("WAfrFront")&&(f=!0),e.updateOptions({grid:{type:n,typeView:"checkHandlerButton",handler:p(r[t])}});else if(i.hasOwnProperty(t)){n=void 0!==e.options.grid.set?"commandFlyout":"radioHandler",Array.isArray(e.options.grid.category)&&e.options.grid.category.includes("WAfrFront")&&(f=!0);let o="radioHandler";void 0!==e.options.grid.typeRepresentation&&(n=o=e.options.grid.typeRepresentation),e.updateOptions({grid:{type:n,typeView:o,handler:c(i[t])}})}}),t._treeDocument.pushUpdate(),t._uiComponent.setTagList({tab:t._tagList}),t._uiComponent.setGlobalFlatModel({model:t._treeDocument}),!1===t._mainComponentAvailability&&t._uiComponent.deactivateMainComponent(),t._uiComponent._isMABAvailable=f,t._uiComponent.setMainComponentCategoriesOrder(t._mainComponentCategoriesOrder),t._uiComponent.setCategories(t._categories),e.resolve()},u.prototype.enrich=function(e,t){if(!e||!t)throw new Error("Missing parameters");const n=e.UIModel;let o=Promise.resolve();return n&&n.handlerList&&(l(this,n),f(this,n),void 0!==n.mainComponent&&Array.isArray(n.mainComponent.categoriesOrder)&&(void 0===this._mainComponentCategoriesOrder?this._mainComponentCategoriesOrder=n.mainComponent.categoriesOrder:this._mainComponentCategoriesOrder=this._mainComponentCategoriesOrder.concat(n.mainComponent.categoriesOrder)),n.categories&&m(this,n),o=this.commit()),o};var A={generateInterpreter:function(e,t){return Promise.resolve(new u)}};return A});WAfrStandardComponentKey={A2XClientComponent:"A2XClientComponent",AppManager:"AFR_AppManager",ModelEvents:"AFR_ModelEvents",AvailabilityModesComponent:"AFR_AvailabilityModesComponent",HandlerComponent:"AFR_HandlerComponent",CommandsManagerComponent:"AFR_CommandsManager",UIFrame:"AFR_UIFrameManager",UIComponent:"Afr_UIComponent",UndoRedoComponent:"AFR_UndoRedoComponent",CSComponent:"AFR_CSComponent",NotificationManager:"AFR_NotificationManager",RecordComponent:"AFR_RecordComponent",AcceleratorManagementComponent:"AFR_AcceleratorManagementComponent",WidgetProxyComponent:"AFR_WidgetProxyComponent",A2XHeaderComponent:"AFR_A2XHeaderComponent"};Object.freeze(WAfrStandardComponentKey),define("DS/WAfrContainerAsWidget/default_config",["DS/WAfrAppManager/mod_AppManager","DS/WAfrHandlers/mod_HandlerInterpreter","DS/WAfrUIStandardComponents/mod_UIInterpreter","DS/WAfrCommandsArchitecture/mod_CommandsInterpreter","DS/WAfrAcceleratorManager/mod_AcceleratorInterpreter"],function(e,t,n,o,r){"use strict";return{interpreters:[{module:t,target:WAfrStandardComponentKey.HandlerComponent},{module:n,target:WAfrStandardComponentKey.UIComponent},{module:o,target:WAfrStandardComponentKey.CommandsManagerComponent},{module:r,target:WAfrStandardComponentKey.AcceleratorManagementComponent}],components:[{key:WAfrStandardComponentKey.A2XClientComponent,code:"DS/WA2XCommunication/mod_WA2XClientComponent",ctor:"WA2XClientComponent",when:"a2x==true"},{key:WAfrStandardComponentKey.AppManager,code:"DS/WAfrAppManager/mod_AppManager",ctor:"AppManager"},{key:WAfrStandardComponentKey.ModelEvents,code:"DS/WAfrModelEvents/mod_ModelEvents"},{key:WAfrStandardComponentKey.AvailabilityModesComponent,code:"DS/WAfrAvailabilityModes/mod_AvailabilityModesComponent",ctor:"AvailabilityModesComponent"},{key:WAfrStandardComponentKey.HandlerComponent,code:"DS/WAfrHandlers/mod_HandlerComponent",ctor:"HandlerComponent"},{key:WAfrStandardComponentKey.CommandsManagerComponent,code:"DS/WAfrCommandsArchitecture/mod_CommandsManagerComponent",ctor:"CommandsManagerComponent"},{key:WAfrStandardComponentKey.UIFrame,code:"DS/WAfrUIStandardComponents/UIFrame"},{key:WAfrStandardComponentKey.UIComponent,code:"DS/WAfrUIStandardComponents/mod_UIComponent",ctor:"UIComponent"},{key:WAfrStandardComponentKey.UndoRedoComponent,code:"DS/WAfrUndoRedo/WAfrUndoRedoComponent",ctor:"WAfrUndoRedoComponent"},{key:WAfrStandardComponentKey.CSComponent,code:"DS/AfrCS/WAfrCSComponent"},{key:WAfrStandardComponentKey.NotificationManager,code:"DS/WAfrUIStandardComponents/NotificationManager"},{key:WAfrStandardComponentKey.RecordComponent,code:"DS/WAfrODTServices/mod_CommandRecorderComponent",when:"CaptureMode==true"},{key:WAfrStandardComponentKey.AcceleratorManagementComponent,code:"DS/WAfrAcceleratorManager/mod_AcceleratorManagementComponent",ctor:"AcceleratorManagementComponent"},{key:WAfrStandardComponentKey.WidgetProxyComponent,code:"DS/WAfrUIStandardComponents/mod_WidgetProxyComponent",ctor:"WidgetProxyComponent"},{key:WAfrStandardComponentKey.A2XHeaderComponent,code:"DS/WAfrA2XHeaders/mod_WAfrA2XHeaderComponent",ctor:"WAfrA2XHeaderComponent",when:"a2x==true"}]}});