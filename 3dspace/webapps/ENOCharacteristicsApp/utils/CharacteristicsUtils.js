define("DS/ENOCharacteristicsApp/utils/CharacteristicsUtils",["UWA/Core","UWA/Class","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOCharacteristicsApp/utils/Constants","DS/PlatformAPI/PlatformAPI","DS/WebappsUtils/WebappsUtils","DS/ENOCharacteristicsApp/utils/RequestUtil","DS/ENOCharacteristicsApp/utils/Notification","DS/ENOCharacteristicsApp/service/CharacteristicsServiceWrapper","i18n!DS/ENOCharacteristicsApp/assets/nls/ENOCharacteristicsApp"],function(e,i,t,a,r,n,o,l,s,p,c){return i.singleton({allDimensionSet:{},dimensionNameToIdMap:{},dimensionDisplayUnitMap:{},missedTargetActionMap:{},extensionsInfo:{},dimensionIdToObjMap:{},displayUnitIdToObjMap:{},dimensionId_uomValue_To_uomId:{},allTypeSet:{},allTypeList:[],allTypeMap:{},processDimensionDisplayUnit:function(){for(var e=0;e<this.allDimensionSet.length;e++){var i=this.allDimensionSet[e],t=i.id,a=i.displayName;this.dimensionNameToIdMap[a]=t,this.dimensionIdToObjMap[t]=i;var r=i.units,n={};if(r&&r.length>0){for(var o=0;o<r.length;o++){var l=r[o],s=l.id,p=l.displayName;this.displayUnitIdToObjMap[s]=l,n[p]=l,this.dimensionId_uomValue_To_uomId[t+":"+p]=s}this.dimensionDisplayUnitMap[t]=n}}this.dimensionIdToObjMap.USER_DEFINED_UNIT=c.label_OtherDimension,this.dimensionNameToIdMap[c.label_OtherDimension]="USER_DEFINED_UNIT",this.missedTargetActionMap[c.label_NoActionRequired]="No Action Required",this.missedTargetActionMap[c.label_HoldandRetest]="Hold and Retest",this.missedTargetActionMap[c.label_ShipandMonitor]="Ship and Monitor"},addTreeNodeModel:function(e,i){i.addRoot(this.getTreeNodeModelFromData(e))},getformatedDate:function(e){this.dataFormatter||(this.dataFormatter=new Intl.DateTimeFormat(this.getLanguage(),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}));try{return this.dataFormatter.format(new Date(e)).replace(",","")}catch(i){return e}},getLanguage:function(){if(this.mLanguage)return this.mLanguage;try{if(window.parent&&window.parent.dsLang)return window.parent.dsLang;if(widget)return widget.lang}catch(e){}return"en"},getTreeNodeModelFromData:function(e){var i=e.modified?e.modified:e.lastModifiedLocalFormat,t=e.originated?e.originated:e.originatedDate,r=this.getformatedDate(i),n=this.getformatedDate(t),o=this.getImageForChar("I_Documents"),l=this.getIconForChar("I_Docs"),s=e.label?e.label:e["attribute[Title]"],p=new a({label:s,description:"<div>"+e.type+" | "+e.revision+"</div><div>"+(e.state?e.state:e.current)+" | "+r+"</div>"+e.name+"<div>"+c.label_Description+": "+(e.description||"-")+"</div>",thumbnail:o,icons:[l],grid:{id:e.physicalid,label:s,name:e.name,description:e.description,lastModifiedLocalFormat:r,originatedDate:n,lastmodified:e.modified,type:e.type,"ds6w:type":e.type,typeDBName:e.type,state:e.current,owner:e.owner,"ds6w:responsible":e.owner,revision:e.revision,"ds6wg:revision":e.revision}});return p.getID=function(){return p.options.grid.id},p.getRevision=function(){return p.options.grid.revision},p.getTitle=function(){return p.options.grid.attribute[Title]},p.getTypeActualName=function(){return p.options.grid.type},p.getType=function(){return p.options.grid.type},p.setSearchFilterState=function(e){this.options.filteringContext.isFilterOutBySearch=e},p},getDisplayUnit:function(e){if(this.dimensionDisplayUnitMap)return this.dimensionDisplayUnitMap[e]},getDBDisplayUnit:function(e,i){if(i)return i[e]},isTouchDevice:function(){return"ontouchstart"in document.documentElement},downloadCSV:function(e,i){var t="";"en"!=this.getLanguage()&&(t="\ufeff"),t+=e;var a={blob:new Blob([t]),fileName:i};this.downloadFileonBrowser(a)},downloadFileonBrowser:function(e){if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e.blob,e.fileName);else{var i=window.URL.createObjectURL(e.blob);if(l.isSafarionIPadorPod())window.open(i,"_blank");else{var t=new UWA.Element("a",{href:i,download:e.fileName}).inject(document.body);t.hide(),t.click(),setTimeout(function(){t.destroy(),window.URL.revokeObjectURL(i)},100)}}},getIconForChar:function(e){return o.getWebappsAssetUrl("ENOCharacteristicsApp","icons/32/"+e+".png")},getImageForChar:function(e){return o.getWebappsAssetUrl("ENOCharacteristicsApp","images/"+e+".png")},emptyMsg:function(e){var i=UWA.createElement("div",{class:"grid-empty-tile wux-datagridview-emptycontentmessage char-grid"}),t=UWA.createElement("div");t.innerHTML="No Objects Found",t.inject(i),i.inject(e)},hideUnhideToggle:function(e,i){"hide"===i?e.forEach(function(e){e.fieldControl.elements.container.classList.add("xsr-char-hidden")}):"unhide"===i&&e.forEach(function(e){e.fieldControl.elements.container.classList.remove("xsr-char-hidden")})},setLimitsToNumeric:function(e,i){if(i)return e.formFields.LowerTarget.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.Target.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.UpperTarget.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.LowerSpecificationLimit.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.UpperSpecificationLimit.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.LowerRoutineReleaseLimit.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.UpperRoutineReleaseLimit.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.PrecisionText.inputfield.pattern="^[+]?[0-9]*[0-9,.]+$",e.formFields.LowerTarget.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.Target.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.UpperTarget.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.LowerSpecificationLimit.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.UpperSpecificationLimit.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.LowerRoutineReleaseLimit.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.UpperRoutineReleaseLimit.inputfield.placeholder=c.placeholder_Real_Numeric,void(e.formFields.PrecisionText.inputfield.placeholder=c.placeholder_Real_Numeric);e.formFields.LowerTarget.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.Target.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.UpperTarget.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.LowerSpecificationLimit.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.UpperSpecificationLimit.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.LowerRoutineReleaseLimit.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.UpperRoutineReleaseLimit.inputfield.pattern="^[-+]?[0-9]*[0-9,.]+$",e.formFields.LowerTarget.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.Target.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.UpperTarget.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.LowerSpecificationLimit.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.UpperSpecificationLimit.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.LowerRoutineReleaseLimit.inputfield.placeholder=c.placeholder_Real_Numeric,e.formFields.UpperRoutineReleaseLimit.inputfield.placeholder=c.placeholder_Real_Numeric},createSpecData:function(e){var i={};return i.title=e.title,i.description=e.description,i.notes=e.notes,i.current=r.MATURITY_IN_WORK,i.currentDisplayName=c.StateInWork,i.revision="1",i.type=e.type,i.typeDisplayName=this.allTypesMap[e.type],i.physicalid=e.physicalid,i},createCharData:function(e){var i={};return i.title=e.title,i.description=e.description,i.notes=e.notes,i.category=e.category,i.dimension=e.dimension,i.displayUnit=e.storageUnit,i.current=c.StateExists,i.revision="1",i.type=e.type,i.physicalId=e.physicalId,i.physicalID=e.physicalId,i.min=e.min,i.max=e.max,i.lowerSpecificationLimit=e.lowerSpecificationLimit,i.upperSpecificationLimit=e.upperSpecificationLimit,i.target=e.target,i.lowerRoutineReleaseLimit=e.lowerRoutineReleaseLimit,i.upperRoutineReleaseLimit=e.upperRoutineReleaseLimit,i.priority=isNaN(e.priority)?"":e.priority,i.missedTargetAction=e.missedTargetAction,i.charPrecision=e.precision,i.isMinIncluded=e.isMinIncluded,i.isMaxIncluded=e.isMaxIncluded,i.isLowerRoutineReleaseLimitIncluded=e.isLowerRoutineReleaseLimitIncluded,i.isUpperRoutineReleaseLimitIncluded=e.isUpperRoutineReleaseLimitIncluded,i.isLowerSpecificationLimitIncluded=e.isLowerSpecificationLimitIncluded,i.isUpperSpecificationLimitIncluded=e.isUpperSpecificationLimitIncluded,i.testMethods=[],e.testMethods.forEach(function(t){i.testMethods.push({physicalid:t,name:e.testMethodsData.get(t)})}),i},createDupCharData:function(e){var i={};return i.title=e.title,i.description=e.description,i.notes=e.notes,i.category=e.category,i.dimension=e.dimension,i.displayUnit=e.storageUnit,i.current=c.StateExists,i.revision="1",i.type=e.type,i.physicalId=e.physicalid,i.physicalID=e.physicalid,i.min=e.min,i.max=e.max,i.lowerSpecificationLimit=e.lowerSpecificationLimit,i.upperSpecificationLimit=e.upperSpecificationLimit,i.target=e.target,i.lowerRoutineReleaseLimit=e.lowerRoutineReleaseLimit,i.upperRoutineReleaseLimit=e.upperRoutineReleaseLimit,i.priority=isNaN(e.priority)?"":e.priority,i.missedTargetAction=e.missedTargetAction,i.charPrecision=e.precision,i.isMinIncluded=e.isMinIncluded,i.isMaxIncluded=e.isMaxIncluded,i.isLowerRoutineReleaseLimitIncluded=e.isLowerRoutineReleaseLimitIncluded,i.isUpperRoutineReleaseLimitIncluded=e.isUpperRoutineReleaseLimitIncluded,i.isLowerSpecificationLimitIncluded=e.isLowerSpecificationLimitIncluded,i.isUpperSpecificationLimitIncluded=e.isUpperSpecificationLimitIncluded,i.sequence=e.sequence,i.additionalAttributes=e.additionalAttributes,i.testMethods=[],e.testMethods&&e.testMethods.forEach(function(e){i.testMethods.push({physicalid:e.physicalid,name:e.name})}),i},CharLimitsValidation:function(e){var i=!0,t="validation Passed",a=e.getLowerSpecificationLimit()?parseFloat(e.getLowerSpecificationLimit()):"",r=e.getUpperSpecificationLimit()?parseFloat(e.getUpperSpecificationLimit()):"",n=e.getLowerTarget()?parseFloat(e.getLowerTarget()):"",o=e.getUpperTarget()?parseFloat(e.getUpperTarget()):"",l=e.getLowerRoutineReleaseLimit()?parseFloat(e.getLowerRoutineReleaseLimit()):"",s=e.getUpperRoutineReleaseLimit()?parseFloat(e.getUpperRoutineReleaseLimit()):"",p=e.getDisplayTarget()?parseFloat(e.getDisplayTarget()):"",d=e.isLowerTargetIncluded(),u=e.isUpperTargetIncluded(),m=e.isLowerRoutineIncluded(),f=e.isUpperRoutineIncluded(),g=e.isLowerSpecificationIncluded(),h=e.isUpperSpecificationIncluded();if(isNaN(e.getLowerSpecificationLimit())||isNaN(e.getUpperSpecificationLimit())||isNaN(e.getLowerTarget())||isNaN(e.getUpperTarget())||isNaN(e.getLowerRoutineReleaseLimit())||isNaN(e.getUpperRoutineReleaseLimit())||isNaN(e.getDisplayTarget())||e.getLowerSpecificationLimit().contains(".")&&e.getLowerSpecificationLimit().lastIndexOf(".")+1===e.getLowerSpecificationLimit().length||e.getUpperSpecificationLimit().contains(".")&&e.getUpperSpecificationLimit().lastIndexOf(".")+1===e.getUpperSpecificationLimit().length||e.getLowerTarget().contains(".")&&e.getLowerTarget().lastIndexOf(".")+1===e.getLowerTarget().length||e.getUpperTarget().contains(".")&&e.getUpperTarget().lastIndexOf(".")+1===e.getUpperTarget().length||e.getLowerRoutineReleaseLimit().contains(".")&&e.getLowerRoutineReleaseLimit().lastIndexOf(".")+1===e.getLowerRoutineReleaseLimit().length||e.getUpperRoutineReleaseLimit().contains(".")&&e.getUpperRoutineReleaseLimit().lastIndexOf(".")+1===e.getUpperRoutineReleaseLimit().length||e.getDisplayTarget().contains(".")&&e.getDisplayTarget().lastIndexOf(".")+1===e.getDisplayTarget().length)return{isValidated:!1,msg:c.ErrRealAndNumeric};let L={upperValue:r,upperInclusive:h,lowerValue:a,lowerInclusive:g},w={upperValue:s,upperInclusive:f,lowerValue:l,lowerInclusive:m},R={upperValue:o,upperInclusive:u,target:p,lowerValue:n,lowerInclusive:d};return t=(i=!!(i=this.validateRangeObj(L,!1))&&this.validateRangeObj(w,!1))?"":c.Message_ValidateUpperLowerValue,t=(i=!!i&&this.validateRangeObj(R,!0))||t?t:c.Message_ValidateAcceptanceValues,t=(i=!!i&&this.compareRangeObj(L,w,!1))||t?t:c.Message_RoutineWithInSpecLimits,t=(i=!!i&&this.compareRangeObj(L,R,!0))||t?t:c.Message_AcceptanceWithInSpecLimits,{isValidated:i=!!i&&this.compareRangeObj(w,R,!0),msg:t=i||t?t:c.Message_AcceptanceWithInRoutineLimits}},validateRangeObj:function(e,i){let t=!0;return e.upperValue&&e.lowerValue&&(t=!!(e.upperInclusive&&e.lowerInclusive&&e.lowerValue<=e.upperValue)||e.lowerValue<e.upperValue),i&&t&&e.target&&(e.lowerValue&&(t=!!(e.lowerInclusive&&e.lowerValue<=e.target||!e.lowerInclusive&&e.lowerValue<e.target)),e.upperValue&&t&&(t=!!(e.upperInclusive&&e.upperValue>=e.target||!e.upperInclusive&&e.upperValue>e.target))),t},compareRangeObj:function(e,i,t){let a=!0;return e.upperValue&&(i.upperValue||i.lowerValue)&&(i.upperValue&&(a=!!((e.upperInclusive||!e.upperInclusive&&!i.upperInclusive)&&e.upperValue>=i.upperValue||e.upperValue>i.upperValue)),i.lowerValue&&a&&(a=!!(e.upperInclusive&&i.lowerInclusive&&e.upperValue>=i.lowerValue||e.upperValue>i.lowerValue))),e.lowerValue&&(i.upperValue||i.lowerValue)&&a&&(i.upperValue&&(a=!!(e.lowerInclusive&&i.upperInclusive&&e.lowerValue<=i.upperValue||e.lowerValue<i.upperValue)),i.lowerValue&&a&&(a=!!((e.lowerInclusive||!e.lowerInclusive&&!i.lowerInclusive)&&e.lowerValue<=i.lowerValue||e.lowerValue<i.lowerValue))),t&&i.target&&a&&(e.upperValue&&(a=!!(e.upperInclusive&&e.upperValue>=i.target||e.upperValue>i.target)),e.lowerValue&&a&&(a=!!(e.lowerInclusive&&e.lowerValue<=i.target||e.lowerValue<i.target))),a},disableEditableContainers:function(){document.querySelectorAll(".uom-container-perf-spec").forEach(function(e){e.addClassName("xsr-hide-container")}),document.querySelectorAll(".uom-container-read-only").forEach(function(e){e.hasClassName("xsr-hide-container")&&e.removeClassName("xsr-hide-container")}),document.querySelectorAll(".routine-edit-container").forEach(function(e){e.addClassName("xsr-hide-container")}),document.querySelectorAll(".routine-limits-container-read-only").forEach(function(e){e.hasClassName("xsr-hide-container")&&e.removeClassName("xsr-hide-container")}),document.querySelectorAll(".specification-edit-container").forEach(function(e){e.addClassName("xsr-hide-container")}),document.querySelectorAll(".specification-limits-container-read-only").forEach(function(e){e.hasClassName("xsr-hide-container")&&e.removeClassName("xsr-hide-container")})}})});