define("DS/ENOCharacteristicsApp/view/NewDialog",["UWA/Core","UWA/Class/View","DS/Controls/Button","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOCharacteristicsApp/utils/CharacteristicsMask","i18n!DS/ENOCharacteristicsApp/assets/nls/ENOCharacteristicsApp"],function(t,e,i,a,n,o,l){"use strict";return e.extend({setup:function(t){this._parentView=t,this.options=t},render:function(){return this.elements.mContainer=new t.Element("div",{class:"char-dialog-container"}),this._dialog=null,this.container=this.elements.mContainer,this.container.inject(this.options.renderTo),this._showDialog(this.options),this},closeDialog:function(){this.destroy(),"DELRME_AP"!==widget.data.appId&&"DELRMEC_AP"!==widget.data.appId||!this._dialog||this._dialog.close()},destroyPrevDialog:function(){var t=document.getElementsByClassName("char-dialog-container");t.length>0&&t[0].destroy()},_showDialog:function(e){var o=new t.Element("div",{class:"char-dialog-immersiveframe"}).inject(this.container),s=new n;s.inject(o);var d=this,r=e.position||{at:"center",my:"center"},c=e.width?e.width:"",h=e.minWidth?e.minWidth:c,g=e.height?e.height:-1,u=(e.minHeight&&e.minHeight,!e.largeButtons||e.largeButtons);this._dialog=new a({title:e.Title?e.Title:"",immersiveFrame:"DELRME_AP"!==widget.data.appId&&"DELRMEC_AP"!==widget.data.appId?s:void 0,position:r,resizableFlag:!0,domId:"char-new-dialog",modalFlag:!0,titleBarVisibleFlag:void 0===e.titleBarVisibleFlag||e.titleBarVisibleFlag,closeButtonFlag:void 0===e.closeButtonFlag||e.closeButtonFlag,width:c,minWidth:h,height:g,content:e.Content?e.Content:""});var C=new i({allowUnsafeHTMLLabel:!1,touchMode:u,label:e.CancelLabel?e.CancleLabel:l.label_Button_Cancel,onClick:function(t){d.dispatchEvent("EVENT_CLICK_CHAR_CANCEL"),d.closeDialog()}}),p=new i({label:e.OKLabel?e.OKLabel:l.CreateandClose,disabled:!0,allowUnsafeHTMLLabel:!1,touchMode:u,onClick:function(t){var e=t.dsModel;e.dialog,d.dispatchEvent("EVENT_CLICK_CHAR_OK")}}),_=new i({allowUnsafeHTMLLabel:!1,label:e.ApplyLabel?e.ApplyLabel:l.Create,disabled:!0,touchMode:u,onClick:function(t){d.dispatchEvent("EVENT_CLICK_CHAR_APPLY")}});return e.NoButtons?d.listenTo(d,"CHAR_SHOW_DIALOG_CLOSE_BUTTON",function(t){t&&t.Close&&(C.label=l.label_Button_Close,this._dialog.buttons={Ok:C},this._dialog.closeButtonFlag=!0)}):this._dialog.buttons={Cancel:C,Ok:p,Apply:_},e.RemoveApplyButton&&this._dialog.buttons.Apply.remove(),d.listenTo(d,"CONTAINS_DIRTY_FIELD",function(t){t?(this._dialog.buttons.Ok.disabled=!1,this._dialog.buttons.Apply.disabled=!1):(this._dialog.buttons.Ok.disabled=!0,this._dialog.buttons.Apply.disabled=!0)}),this._dialog.addEventListener("close",function(t){d.destroy()}),this._dialog},maskOrUnMaskDialog:function(t){var e=document.getElementsByClassName("char-dialog-container");if(e&&e.length>0){var i=e[0].getElementsByClassName("wux-windows-window-maincontent")[0];i&&o.isMasked(i)?o.unmaskLoader(i):i&&o.maskLoader(i,t)}}})});