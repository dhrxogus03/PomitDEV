define("DS/ENOCharacteristicsApp/model/SpecificationModel",["DS/SpecGridView/model/GridItemModel","DS/ENOCharacteristicsApp/utils/Constants","DS/WebappsUtils/WebappsUtils","DS/ENOCharacteristicsApp/model/CharacteristicsModel","i18n!DS/ENOCharacteristicsApp/assets/nls/ENOCharacteristicsApp"],function(t,e,i,s,o){"use strict";return class extends t{constructor(t){super(),this.appCore=t.appCore;let e={title:"",description:"",notes:"",revision:"",maturity:"",type:"",category:"",lastRevision:"",relationshipActualName:"",relationship:"",nextRevisionID:""};Object.keys(e).forEach(t=>{Object.defineProperty(this.options.grid,t,{value:e[t],writable:!0,enumerable:!0,configurable:!0})})}getTreeModel(){return this.options.label=this.getType(),this.updateOptions(this.options),this}getParentMaturityState(){return this.appCore.specRouteManager.getActiveSpecItem().getMaturityActualName()}getTitle(){return this.options.grid.title}setTitle(t){this.options.grid.title=t}getDescription(){return this.options.grid.description}setDescription(t){this.options.grid.description=t}getNotes(){return this.options.grid.notes}setNotes(t){this.options.grid.notes=t}getRevision(){return this.options.grid.revision}setRevision(t){this.options.grid.revision=t}getMaturity(){return this.options.grid.maturity}setMaturity(t){super.setMaturity(t),this.options.grid.maturity=t}setMaturityActualName(t){super.setMaturityActualName(t)}getCategory(){return this.options.grid.category}getType(){return this.options.grid.type}setCategory(t){this.options.grid.category=t}setType(t){this.options.grid.type=t}getName(){return this.options.grid.name}setName(t){super.setName(t),this.options.grid.name=t}getTree(){return this.options.grid.tree}setTree(t){this.setLabel(t),this.options.grid.tree=this.options.grid["ds6w:label"]=t}getRelationship(){return this.options.grid.relationship}setRelationship(t){this.options.grid.relationship=t}getRelationshipActualName(){return this.options.grid.relationshipActualName}setRelationshipActualName(t){this.options.grid.relationshipActualName=t}getNextRevisionID(){return this.options.grid.nextRevisionID}setNextRevisionID(t){this.options.grid.nextRevisionID=t}isLastRevision(){return this.options.grid.lastRevision}setLastRevision(t){this.options.grid.lastRevision=t}setTypeIcon(){var t=i.getWebappsAssetUrl("ENOCharacteristicsApp","icons/32/I_PerformanceSpecificationGrid.png");this.options.grid.typeIcon.push(t),this.options.icons.push(t)}canBeRevised(){return this.isReleased()||this.isObsolete()}isDerivedSpec(){return this.options.grid.isDerivedSpec}setIsDerivedSpec(t){this.options.grid.isDerivedSpec=t,this.options.color=t?"#78befa":"#005685"}getPreviousRevisionID(){return this.options.grid.previousRevisionID}setPreviousRevisionID(t){return this.options.grid.previousRevisionID=t}set(t){let i=t.physicalid||"",s=t.policy||e.POLICY_PERFORMANCE_SPEC,o=t.relationship||e.REL_PERFORMANCE_SPEC,r=t.name||"",n=t.type||"",a=t.typeDisplayName||n,p=t.relationshipDisplayName||o,h=t.policyDisplayName||s;if(!(i&&n&&s))throw"Required data is missing";return this.setPhysicalId(i),this.setTypeActualName(n),this.setPolicyActualName(s),this.setRelationshipActualName(o),this.setName(r),this.setPolicy(h),this.setRelationship(p),this.setType(a),this.setTypeIcon(),this.syncModel(t),this.updateOptions(this.options),this}syncModel(t){let i=this,r=t.title||this.getTitle()||"";this.setTitle(r);let n=t.description||this.getDescription()||"";this.setDescription(n);let a=t.notes||this.getNotes()||"";this.setNotes(a);let p=t.revision||this.getRevision()||"";this.setRevision(p);let h=t.derived||!1;this.setIsDerivedSpec(h);let l=t.current||this.getMaturityActualName()||"";this.setMaturityActualName(l);let c="";switch(l){case e.MATURITY_IN_WORK:c=o.MATURITY_IN_WORK?o.MATURITY_IN_WORK:"In Work";break;case e.MATURITY_FROZEN:c=o.MATURITY_FROZEN?o.MATURITY_FROZEN:"Frozen";break;case e.MATURITY_RELEASED:c=o.MATURITY_RELEASED?o.MATURITY_RELEASED:"Released";break;case e.MATURITY_OBSOLETE:c=o.MATURITY_OBSOLETE?o.MATURITY_OBSOLETE:"Obsolete"}this.setMaturity(c);let d=t.typeDisplayName||this.getTree()||"";this.setType(d),this.setTree(d);let u=t.category||"";this.setCategory(u);let g=t["next.physicalid"]||this.getNextRevisionID()||null;this.setNextRevisionID(g);let R=!this.getNextRevisionID();this.setLastRevision(R);let y=t["previous.physicalid"]||this.getPreviousRevisionID()||null;this.setPreviousRevisionID(y),t.characteristics&&(this.hasChildren()||(this.removeChildren(),t.characteristics.sort((t,e)=>{const i=parseInt(t.sequence),s=parseInt(e.sequence);return i<s?-1:i>s?1:0}),t.characteristics.forEach(t=>{let e=new s({appCore:i.appCore}).set(t);this.addChild(e)}),this.expand())),t.additionalAttributes?t.additionalAttributes.forEach(t=>{let e=t.extension+"||"+t.name,s=e+"_type",o=t.value;i.options.grid[e]=o,i.options.grid[s]=t.type}):i.appCore.defaultExtensionAttributes&&t.enableDefaultExtensions&&i.appCore.defaultExtensionAttributes.forEach(function(t){if("XP_PerformanceSpec_Ext"===t.extension){let e=t.extension+"||"+t.name,s=e+"_type",o=i.options.grid[e];i.options.grid[e]=o||t.defaultValue,i.options.grid[s]=t.type}})}}});