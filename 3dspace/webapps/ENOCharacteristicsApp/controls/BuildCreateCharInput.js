define("DS/ENOCharacteristicsApp/controls/BuildCreateCharInput",["UWA/Core","UWA/Class","DS/ENOCharacteristicsApp/utils/CharacteristicsValidation","DS/ENOCharacteristicsApp/utils/Constants","DS/ENOCharacteristicsApp/utils/Notification","i18n!DS/ENOCharacteristicsApp/assets/nls/ENOCharacteristicsApp"],function(t,i,e,s,n,r){"use strict";return i.extend({init:function(t){this.formFields=t.formFields,this.parentId=t.parentId,this.testMethods=t.testMethods,this.isRoutineReleaseLimitsDisabled=t.isRoutineReleaseLimitsDisabled,this.isSpecificationLimitsDisabled=t.isSpecificationLimitsDisabled},setRequestInputs:function(t){var i=t.allowedValueList,a={isAggregated:!0};if(a.type=this.getInput("Type"),a.title=this.getInput(s.KEY_TITLE),this.getInput("Type")===s.MEASUREMENT_CHAR){var o=this.getInput(s.KEY_DIMENSION)||this.getInput(s.KEY_DIMENSIONTEXT);o&&(a.dimension=o)}this.dbDimensionList;if(this.getInput("Type")===s.MEASUREMENT_CHAR){var I=this.getInput(s.DISPLAY_UNIT)||this.getInput(s.DISPLAY_UNIT_TEXT);a.storageUnit=I}this.getInput(s.LOWER_TARGET),this.getInput(s.UPPER_TARGET);a.multiple=i||[],a.overrideAllowedOnChild=!0,a.ObjectID=this.parentId,a.title=this.getInput(s.KEY_TITLE),a.name="",a.description=this.getInput(s.DESCRIPTION),a.priority=parseInt(this.getInput(s.PRIORITY));var p=this.formFields.TestMethod.inputfield.selectedItems,u=[];if(p&&p.length>0)for(var l=0;l<p.length&&p[l]._options.value;l++)u.push(p[l]._options.value);a.testMethods=u,this.getInput("Type")===s.MEASUREMENT_CHAR?(a.min=this.getInput(s.LOWER_TARGET),a.isMinIncluded=!!this.getInput(s.LOWER_INCl),a.target=this.getInput(s.TARGET),a.max=this.getInput(s.UPPER_TARGET),a.isMaxIncluded=!!this.getInput(s.UPPER_INCl)):a.target=this.getInput("TargetNew");if(a.dimension){if(a.min&&a.target&&a.min===a.target&&a.minIncluded===s.FALSE)return n.clearNotifications(),void n.displayNotification({eventID:"error",msg:r.Message_TargetLowerUpperInclusive});if(a.max&&a.target&&a.max===a.target&&a.maxIncluded===s.FALSE)return n.clearNotifications(),void n.displayNotification({eventID:"error",msg:r.Message_TargetLowerUpperInclusive});if(a.minIncluded===s.TRUE&&""===a.min||a.maxIncluded===s.TRUE&&""===a.max)return n.clearNotifications(),void n.displayNotification({eventID:"error",msg:r.Message_AcceptanceLimitEmptyCheck});if(a.min===a.max&&""===a.target&&a.minIncluded===s.FALSE&&a.maxIncluded===s.FALSE&&""!=a.min&&""!=a.max)return n.clearNotifications(),void n.displayNotification({eventID:"error",msg:r.Message_LowerUpper_TargetEmpty})}if(o===s.DIMENSION_BOOLEAN){var c=this.getInput(s.ALT_TARGET);a.target=c===s.YES?s.TRUE:s.FALSE||s.FALSE}if(o===s.DIMENSION_SUBJECTIVITY){var d=a.multiple;if(""===a.target||a.multiple===[]||""===a.comparedToStd)return n.clearNotifications(),void n.displayNotification({eventID:"error",msg:r.Message_SubjectivityEmptyError});if(a.multiple){var g=d.length;if(g>1&&g%2==0)return n.clearNotifications(),void n.displayNotification({eventID:"error",msg:r.Message_BadAllowedValueSize})}if(d&&a.target&&!d.includes(a.target))return n.clearNotifications(),void n.displayNotification({eventID:"error",msg:r.Message_SubTargetNotIncl_Allowed_Error})}if((o!==s.DIMENSION_REAL&&o!==s.DIMENSION_INTEGER||(a.storageUnit=this.getInput(s.ALT_DISPLAY_UNIT)),this.getInput("Type")===s.MEASUREMENT_CHAR&&(a.precision=this.getInput(s.PRICISION)||this.getInput(s.PRICISION_TEXT),this.isSpecificationLimitsDisabled||(a.lowerSpecificationLimit=this.getInput(s.LOWER_SPECIFICATION_LIMIT),a.upperSpecificationLimit=this.getInput(s.UPPER_SPECIFICATION_LIMIT),a.isLowerSpecificationLimitIncluded=!!this.getInput("LowerSpecificationIncluded"),a.isUpperSpecificationLimitIncluded=!!this.getInput("UpperSpecificationIncluded")),this.isRoutineReleaseLimitsDisabled||(a.lowerRoutineReleaseLimit=this.getInput(s.LOWER_ROUTINE_LIMIT),a.upperRoutineReleaseLimit=this.getInput(s.UPPER_ROUTINE_LIMIT),a.isLowerRoutineReleaseLimitIncluded=!!this.getInput("LowerRoutineIncluded"),a.isUpperRoutineReleaseLimitIncluded=!!this.getInput("UpperRoutineIncluded"))),a.notes=this.getInput(s.CHAR_NOTES),a.missedTargetAction=this.getInput(s.MISSED_TARGET_ACTION),a.dimension&&["StringParameter","SubjectivityParameter","BooleanParameter"].includes(a.dimension))&&(a.lowerSpecificationLimit||a.upperSpecificationLimit||a.lowerRoutineReleaseLimit||a.upperRoutineReleaseLimit||a.min||a.target||a.max))return e.validateNumericLimitValues(this.formFields,"error")?a:void 0;return a},getInput:function(t){var i=[],e=this.formFields[t].inputfield;if(Array.isArray(e)){for(var s=0;s<e.length;s++)e[s].checkFlag?i.push(e[s].checkFlag):e[s].value?i.push(e[s].value.trim()):i.push("");return i}return i=e.checkFlag?e.checkFlag:e.value&&"string"==typeof e.value?e.value.trim():"number"==typeof e.value?e.value:""}})});