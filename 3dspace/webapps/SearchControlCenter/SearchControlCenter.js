/*!  COPYRIGHT DASSAULT SYSTEMES 2014   */
define("DS/SearchControlCenter/control/SCCColorPicker",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Element","UWA/Controls/Abstract","DS/Controls/Tab","DS/Controls/ColorPalette","DS/Controls/ColorChooser","DS/Controls/Popup","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNInfraUX/SearchPreferences"],function(e,t,a,r,n,i,o,s,c,l,d){"use strict";return n.extend(a,{name:"scc-colorPicker",_colorPickerPopup:null,_tab:null,_defaultColorPalette:null,_recentColorPalette:null,_colorChooser:null,_currentColor:"#ffffff",_colorPickerLabel:null,divCustomColorChooser:null,_swatches_default:[{value:"#FEE000"},{value:"#009DDB"},{value:"#FF8A2E"},{value:"#9B2C98"},{value:"#00AA86"},{value:"#F564A3"},{value:"#8DDEE4"},{value:"#CC092F"},{value:"#E2D5CC"},{value:"#6FBC4B"},{value:"#70036B"},{value:"#002596"},{value:"#C6C68B"},{value:"#7F7F7F"},{value:"#4EA8B7"},{value:"#007A4C"},{value:"#ADADAD"},{value:"#127277"},{value:"#6D2815"},{value:"#000000"},{value:"#4D62BA"}],_swatches_recent:null,init:function(e){this._parent(e),this._buildUI(e)},_buildUI:function(t){e.is(t)&&e.is(t.initialValue,t.colorPickerLabel)&&(this._currentColor=t.initialValue,this._colorPickerLabel=t.colorPickerLabel),this.elements.container=r.create("div",{class:"div-scc-color-picker"}),this.elements.content=r.create("div",{class:"scc_color_picker_"+t.colorPickerLabel.replace(/[/\s]/g,"_"),styles:{"border-radius":"5px",border:"1px solid #000000",background:this._currentColor,width:"39px",height:"39px"},events:{click:this._buildColorPickerUI.bind(this)}}).inject(this.elements.container)},_buildColorPickerUI:function(t){var a=this;e.is(a.divCustomColorChooser)&&e.is(a._colorPickerPopup)||(a.divCustomColorChooser=r.create("div",{class:"container-custom-color-picker",id:"container_custom_color_picker"}),a._tab=new i({displayStyle:"strip"}).inject(a.divCustomColorChooser),a._tab.add({label:l.get("SCCColorPicker.tab.ColorPalette.title"),isSelected:!0,content:a._buildColorPalette()}),a._tab.add({label:l.get("SCCColorPicker.tab.ColorChooser.title"),content:a._buildColorChooser()}),a._colorPickerPopup=new c({target:t.target,trigger:"click",toggleFlag:!1,position:"top",alignment:"near",offset:{x:5,y:-255},touchMode:!0}),a._colorPickerPopup.show(),a._colorPickerPopup.setBody(a.divCustomColorChooser),a._colorPickerPopup.addEventListener("hide",function(e){e.stopPropagation(),a._cleanup()}))},_buildColorPalette:function(){var e=r.create("div",{class:"scc-custom-color-picker",id:"scc_custom_color_picker_palette_tab_container"}),t=r.create("div",{class:"div-scc-custom-color-picker",id:"div_scc_custom_color_picker_default"}).inject(e);r.create("p",{class:"scc-custom-color-picker-title",id:"scc_custom_color_picker_title_default",text:l.get("SCCColorPicker.ColorPalette.default.title")}).inject(t);if(this._defaultColorPalette=new o({swatches:this._swatches_default,domId:"color_palette_default",touchMode:!0}).inject(t),this._getRecentSwatches().length>0){var a=r.create("div",{class:"div-scc-custom-color-picker",id:"div_scc_custom_color_picker_recent"}).inject(e);r.create("p",{class:"scc-custom-color-picker-title",id:"scc_custom_color_picker_title_recent",text:l.get("SCCColorPicker.ColorPalette.recent.title")}).inject(a);this._recentColorPalette=new o({swatches:this._getRecentSwatches(),domId:"color_palette_recent",touchMode:!0}).inject(a),this._recentColorPalette.addEventListener("change",this._onColorChange.bind(this),!1)}return this._defaultColorPalette.addEventListener("change",this._onColorChange.bind(this),!1),e},_buildColorChooser:function(){var e=r.create("div",{class:"scc-custom-color-chooser .scc-chooser-tab-container",id:"scc_custom_color_chooser_palette_tab_container"});return this._colorChooser=new s({domId:"color_chooser",value:this._currentColor,referenceValue:this._currentColor,touchMode:!0}).inject(e),this._colorChooser.addEventListener("change",this._onColorChange.bind(this),!1),e},_onColorChange:function(t){t.stopPropagation();var a=this._getNewColor(t.dsModel.domId);if(e.is(a,"string")&&a.indexOf("#")<0&&(a="#"+a),this._currentColor!==a)this._currentColor=a,this.elements.content.setStyle("background",a),"color_chooser"===t.dsModel.domId&&this._storeRecentSwatches(a),this._cleanup(),this.dispatchEvent("onColorChange",{color:this._currentColor,target:this.elements.container});else{if(!this._colorChooser.pointerdownCanvasP&&"color_chooser"===t.dsModel.domId)return;this._cleanup()}},_getNewColor:function(e){switch(e){case"color_chooser":return this._colorChooser.pointerdownCanvasP?this._colorChooser.value:this._currentColor;case"color_palette_default":return this._defaultColorPalette.value;case"color_palette_recent":return this._recentColorPalette.value;default:return this._currentColor}},_getCurrentColor:function(){return this._currentColor},_getRecentSwatches:function(){var t=d.getLocalStorageItem("_swatches_recent");return e.is(t)?JSON.parse(t):[]},_storeRecentSwatches:function(t){var a=JSON.parse(d.getLocalStorageItem("_swatches_recent"));e.is(a,"array")||(a=[]);var r=a.findIndex(e=>e.value.trim()===t.trim());r>=0&&a.splice(r,1),a.length>=10&&a.shift(),a.push({value:t}),d.setLocalStorageItem("_swatches_recent",JSON.stringify(a))},_cleanup:function(){e.is(this._defaultColorPalette)&&(this._defaultColorPalette.destroy(),this._defaultColorPalette=null),e.is(this._recentColorPalette)&&(this._recentColorPalette.destroy(),this._recentColorPalette=null),e.is(this._colorChooser)&&(this._colorChooser.destroy(),this._colorChooser=null),e.is(this._tab)&&(this._tab.destroy(),this._tab=null),e.is(this._colorPickerPopup)&&(this._colorPickerPopup.destroy(),this._colorPickerPopup=null),e.is(this.divCustomColorChooser)&&(this.divCustomColorChooser.destroy(),this.divCustomColorChooser=null)}})}),define("DS/SearchControlCenter/Model/SearchControlCenterFacetListModel",["UWA/Core","UWA/Class/Model"],function(e,t){"use strict";return t.extend({defaults:function(){return{id:"",title:"",subtitle:"",tooltip:"",domainid:"",facetJS:"",image:""}}})}),define("DS/SearchControlCenter/scripts/SearchcontrolCenterModel",["UWA/Element","UWA/Core","UWA/Class","UWA/Class/Debug"],function(e,t,a,r){"use strict";var n=a.singleton(r,{_searchControlCenterSettingsJSON:{},_datasource_InternalName_Mapping:{},_types_InternalName_Mapping:{},_attributes_InternalName_Mapping:{},_local_AttributeDisplay_Cache_For_Types:[],_local_AttributeDisplay_Cache_For_6WTags:[],gate_Local_Attribute_Cache:function(){return this._local_AttributeDisplay_Cache_For_Types},clear_Local_Attribute_Cache:function(){this._local_AttributeDisplay_Cache_For_Types.length>0&&(this._local_AttributeDisplay_Cache_For_Types=[])},clear_Local_6WTags_Cache:function(){this._local_AttributeDisplay_Cache_For_6WTags.length>0&&(this._local_AttributeDisplay_Cache_For_6WTags=[])},initiate_Local_Attribute_Cache:function(e){this._local_AttributeDisplay_Cache_For_Types.length>0&&(this._local_AttributeDisplay_Cache_For_Types=[]),e.length>0&&(this._local_AttributeDisplay_Cache_For_Types=e)},update_Local_Attributes_Cache:function(e){var a=this._local_AttributeDisplay_Cache_For_Types,r=e.datasource,n=e.type,i=e.preferredAttributeList,o=e.excludeAttributeList,s=!1;if(a.length>0){e.attributes;if(t.is(a,"array")&&t.is(n,"string")&&t.is(r,"string"))for(var c=0;c<a.length;c++){var l=a[c];t.is(l)&&n===l.uri&&r===l.source&&(t.is(i,"array")&&i.length>0&&(l.predicates=i,s=!0),t.is(o,"array")&&o.length>0&&(l.excluded_predicates=o,s=!0))}}if(!1===s){var d=[],u={};u.source=r,u.uri=n,t.is(i,"array")&&i.length>0&&(u.predicates=i),t.is(o,"array")&&o.length>0&&(u.excluded_predicates=o),a.length>0?a.push(u):(d.push(u),this._local_AttributeDisplay_Cache_For_Types=d)}},setSettingsJSON:function(e){t.is(e)&&(this._searchControlCenterSettingsJSON=e)},gateSettingsJSON:function(){return this._searchControlCenterSettingsJSON},gateTabSettingJSON:function(e){let a={};if(t.is(e)&&t.is(e.facetID,"string")){let o,s=e.facetID,c=n._searchControlCenterSettingsJSON;if(t.is(e.settingsJSON)&&(c=e.settingsJSON),o=t.is(c,"string")?JSON.parse(c):c,t.is(o)){let e=Object.keys(o),n=null;for(let c=0;c<e.length;c++){let l=e[c];if(t.is(l)&&o.hasOwnProperty(l))if("search_settings"===l&&"SearchControl_General"===s){if(n=o.search_settings,t.is(n)){a=n,o.result_categories&&(a.result_categories=o.result_categories),o.search_synonyms&&(a.search_synonyms=o.search_synonyms);break}}else if("type_custo"===l&&"SearchControl_SearchTypes"===s)n=o.type_custo,t.is(n)&&(a.type_custo=n);else if("tagRelationships"===l&&"SearchControl_6WTags"===s)a.tagRelationships=o.tagRelationships;else if("tagColorization"===l&&"SearchControl_6WTags"===s)a.tagColorization=o.tagColorization;else if("hierarchical_predicates"===l&&"SearchControl_6WTags"===s)a.hierarchical_predicates=o.hierarchical_predicates;else if("controlledVocabulary"===l&&"SearchControl_6WTags"===s)a.controlledVocabulary=o.controlledVocabulary;else if("enterprise_ontology"===l&&"SearchControl_6WTags"===s)a.enterprise_ontology=o.enterprise_ontology;else if("current_enterprise_ontology_title"===l&&"SearchControl_6WTags"===s)a.current_enterprise_ontology_title=o.current_enterprise_ontology_title;else if("enterprise_ontology_history"===l&&"SearchControl_6WTags"===s)a.enterprise_ontology_history=o.enterprise_ontology_history;else if("companyTagsSearchSuggest"===l&&"SearchControl_6WTags"===s)a.companyTagsSearchSuggest=o.companyTagsSearchSuggest;else if("controlledVocabMode"===l&&"SearchControl_6WTags"===s)a.controlledVocabMode=o.controlledVocabMode;else if("attribute_custo"===l&&"SearchControl_6WTags"===s){if(n=o.attribute_custo,t.is(n)){if(n.hasOwnProperty("ds6w:type")){var r=n["ds6w:type"];if(t.is(r,"array"))for(var i=0;i<r.length;i++)if(UWA.is("AllDataSourcesandTypes"===r[i].source)){a=r[i];break}}n.hasOwnProperty("attributes_display")&&(a.attributes_display=n.attributes_display),n.hasOwnProperty("context_apps_predicates")&&(a.context_apps_predicates=n.context_apps_predicates)}}else"attribute_custo"===l&&"SearchControl_SearchTypes"===s?(n=o.attribute_custo,t.is(n)&&(a.attribute_custo=n)):"results_attributes_display_customization"===l&&"SearchControl_ResultsAttributesDisplay"===s&&(n=o.results_attributes_display_customization,t.is(n)&&(a.results_attributes_display_customization=n))}}}return a},updateSettingsJSON:function(e){var a,r,i,o=!1;if(a=t.is(e,"string")?JSON.parse(e):e,t.is(n._searchControlCenterSettingsJSON)?(r=t.is(n._searchControlCenterSettingsJSON,"string")?JSON.parse(n._searchControlCenterSettingsJSON):n._searchControlCenterSettingsJSON,t.is(r)&&(i=Object.keys(r))):o=!0,t.is(a))for(var s=Object.keys(a),c=0;c<s.length;c++){var l=s[c];if(t.is(l)&&a.hasOwnProperty(l))if("SearchControl_General"===l){var d=a.SearchControl_General,u=null,p=null;d&&d.result_categories&&(u=d.result_categories,delete d.result_categories),d&&d.search_synonyms&&(p=d.search_synonyms,delete d.search_synonyms),!0===o||0===i.length?(n._searchControlCenterSettingsJSON.search_settings=d,u&&(n._searchControlCenterSettingsJSON.result_categories=u),p&&(n._searchControlCenterSettingsJSON.search_synonyms=p)):(r.search_settings=d,u&&(r.result_categories=u),p&&(r.search_synonyms=p))}else if("SearchControl_SearchTypes"===l){var _=a.SearchControl_SearchTypes;if(!0===o||0===i.length)n._searchControlCenterSettingsJSON.type_custo=_;else if(i.length>0){let e=!1;for(let a=0;a<i.length;a++){let n=i[a];if(t.is(n)&&r.hasOwnProperty(n)&&"type_custo"===n){var h=r[n];h.type_display=_.type_display,h.SEARCH_INSTANCES=_.SEARCH_INSTANCES,h.easyTypeAccess=_.easyTypeAccess,h.excluded_types=_.excluded_types,h.default_datasourceandtype=_.default_datasourceandtype,e=!0}}!1===e&&(r.type_custo=_)}}else if("SearchControl_SearchAttributes"===l||"SearchControl_6WTags"===l){var g=!1,m=a.SearchControl_SearchAttributes;if(t.is(m)||(m=a.SearchControl_6WTags,g=!0),m.tagRelationships&&(n._searchControlCenterSettingsJSON.tagRelationships=m.tagRelationships),m.tagColorization&&(n._searchControlCenterSettingsJSON.tagColorization=m.tagColorization),m.hierarchical_predicates&&(n._searchControlCenterSettingsJSON.hierarchical_predicates=m.hierarchical_predicates),m.enterprise_ontology&&(n._searchControlCenterSettingsJSON.enterprise_ontology=m.enterprise_ontology),m.current_enterprise_ontology_title&&(n._searchControlCenterSettingsJSON.current_enterprise_ontology_title=m.current_enterprise_ontology_title),m.enterprise_ontology_history&&(n._searchControlCenterSettingsJSON.enterprise_ontology_history=m.enterprise_ontology_history),m.hasOwnProperty("companyTagsSearchSuggest")&&(n._searchControlCenterSettingsJSON.companyTagsSearchSuggest=m.companyTagsSearchSuggest),m.hasOwnProperty("controlledVocabMode")&&(n._searchControlCenterSettingsJSON.controlledVocabMode=m.controlledVocabMode),!0!==o&&0!==i.length||(n._searchControlCenterSettingsJSON.attribute_custo=m),m.controlledVocabulary)n._searchControlCenterSettingsJSON.controlledVocabulary=m.controlledVocabulary;else if(i.length>0){let e=!1;for(let a=0;a<i.length;a++){let n=i[a];if(t.is(n)&&r.hasOwnProperty(n)&&"attribute_custo"===n){var f=r[n];g&&(f.attributes_display=m.attributes_display);var C=f["ds6w:type"],y=m["ds6w:type"];if(t.is(y)&&y.length>0&&!g)f["ds6w:type"]=y;else{var v,b=!1;if(t.is(y,"array")&&y.length>0)for(var S=0;S<y.length;S++)if(y[S].hasOwnProperty("source")&&"AllDataSourcesandTypes"===y[S].source){v=y[S];break}if(t.is(C,"array")&&C.length>0&&t.is(v)){for(var x=0;x<C.length;x++){var D=C[x];t.is(D)&&D.source===v.source&&(C[x]=v,b=!0)}!1===b&&C.push(y[0])}else t.is(y)&&(f["ds6w:type"]=y)}if(m.hasOwnProperty("context_apps_predicates"))if(f.hasOwnProperty("context_apps_predicates")){var T=f.context_apps_predicates,w=m.context_apps_predicates,A=(b=!1,Object.keys(w[0]));if(A.length>0){for(var I=0;I<T.length;I++)if(T[I].hasOwnProperty(A[0])){T[I]=w[0],b=!0;break}!1===b&&T.push(w[0])}}else f.context_apps_predicates=m.context_apps_predicates;e=!0}}!1===e&&(r.attribute_custo=m)}}else"SearchControl_ColumnCusto"===l?r.column_custo=a.SearchControl_ColumnCusto:"SearchControl_ResultsAttributesDisplay"===l&&(r.results_attributes_display_customization=a.SearchControl_ResultsAttributesDisplay)}},setDatasourceInternalMapping:function(e){t.is(e)&&(this._datasource_InternalName_Mapping=e)},getDatasourceInternalMappingValue:function(e){var a=this._datasource_InternalName_Mapping;if(t.is(a)&&t.is(e,"string"))for(var r=Object.keys(a),n=0;n<r.length;n++)if(a[r[n]]===e)return r[n]},getDatasourceDisplayMappingValue:function(e){var a=this._datasource_InternalName_Mapping;if(t.is(a)&&t.is(e,"string"))for(var r=Object.keys(a),n=0;n<r.length;n++)if(r[n]===e)return a[r[n]]},setAttributesInternalMappingForAllDataSourcesAndTypes:function(e,a){t.is(a)&&(this._types_InternalName_Mapping[e]=a)},getAttributesInternalMappingValueForAllDataSourcesAndTypes:function(e,a){if(t.is(a,"string")&&t.is(e,"string")){var r=this._types_InternalName_Mapping[e];if(t.is(r))for(var n=Object.keys(r),i=0;i<n.length;i++)if(r[n[i]]===a)return n[i]}},getAttributesDisplayMappingValueForAllDataSourcesAndTypes:function(e,a){if(t.is(a,"string")&&t.is(e,"string"))for(var r=Object.keys(this._types_InternalName_Mapping),n=0;n<r.length;n++){if(e===r[n])return this._types_InternalName_Mapping[e][a]}},setTypeInternalMapping:function(e,a){t.is(a)&&(this._types_InternalName_Mapping[e]=a)},getTypeInternalMappingValue:function(e,a){if(t.is(a,"string")&&t.is(e,"string")){var r=this._types_InternalName_Mapping[e];if(t.is(r))for(var n=Object.keys(r),i=0;i<n.length;i++)if(r[n[i]]===a)return n[i]}},getTypeDisplayMappingValue:function(e,a){if(t.is(a,"string")&&t.is(e,"string"))for(var r=Object.keys(this._types_InternalName_Mapping),n=0;n<r.length;n++){if(e===r[n])return this._types_InternalName_Mapping[e][a]}},setAttributeInternalMapping:function(e,a,r){if(t.is(r)&&t.is(a,"string")&&t.is(e,"string")){var n={};n[a]=r;var i=Object.keys(this._attributes_InternalName_Mapping);if(i.length<=0)this._attributes_InternalName_Mapping[e]=n;else{for(var o=!1,s=0;s<i.length;s++)if(this._attributes_InternalName_Mapping[i[s]]===e){var c=this._attributes_InternalName_Mapping[i[s]];if(t.is(c)){c[a]=r,o=!0;break}}if(!1===o){var l=this._attributes_InternalName_Mapping[e];t.is(l)&&(l[a]=r)}}}},getAttributeInternalMapping:function(e,a,r){if(t.is(e,"string")&&t.is(a,"string")&&t.is(r,"string")){var n=this._attributes_InternalName_Mapping[e];if(t.is(n))for(var i=Object.keys(n),o=0;o<i.length;o++)if(i[o]===a)for(var s=n[i[o]],c=Object.keys(s),l=0;l<c.length;l++)if(s[c[l]]===r)return c[l]}}});return n}),define("DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept",["UWA/Core","UWA/Class/Debug","UWA/Class/Model","UWA/Class/Collection"],function(e,t,a,r){"use strict";var n=a.extend(t,{setup:function(e){this.set("narrower",new r([],{model:n})),this.set("broader",new r([],{model:n}));let t=e.id.split(":");t.length>0&&this.set("ontology",t[0]+":")},getLabel:function(){return this.get("label")},getURI:function(){return this.get("uri")},getShortURI:function(){return this.id},getOntology:function(){return this.get("ontology")},setAsRootWConcept:function(){this.set("isRootWConcept",!0)},setAsRootConcept:function(){this.set("isRootConcept",!0)},IsARootConcept:function(){return this.get("isRootConcept")},getURIPath:function(){let e=[],t=this;for(;t;)e.push(t.getURI()),t=t.getBroaderConcept();return e.reverse()},getRootConcept:function(){let e,t;for(;Array.isArray(e=this.getBroaderConcept())&&e.length>0;)t=e,e[0].getRootConcept();if(t)return t[0].getURI()},getRootW:function(){return this.get("rootW")},getBroaderConcept:function(){return this.get("broader")},_addBroaderConcept:function(e){this.get("broader").add(e)},addNarrowerConcept:function(e){this.get("narrower").add(e),e._addBroaderConcept(this)},getNarrowerConcept:function(){return this.get("narrower").toArray()},setAsTaggable:function(){this.set("taggable",!0)},setAsDeprecated:function(){this.set("deprecated",!0)},canBeTagged:function(){return this.get("taggable")},isDeprecated:function(){return this.get("deprecated")}});return n}),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCInContextSearchManager",["UWA/Core","UWA/Class","DS/SNInfraUX/SearchCom","UWA/Utils/InterCom"],function(e,t,a,r){"use strict";return t.singleton({_socket:null,_selectedId:null,_selectedLabel:null,init:function(){this._socket=new r.Socket("socket_id_#scc_incontext_search#",{dispacthRetryInterval:0}),this._socket.subscribeServer("SearchComServer")},search:function(e){let t=this;return new Promise(function(a,r){let n=t._getInContextOptions(e);t._socket.dispatchEvent("RegisterContext",n),t._socket.addListener("RegisterContext_Response",function(){t._socket.dispatchEvent("InContextSearch",n),t._socket.addListener("InContextSearch_Response",function(e){t._searchSelecteObj(t,e).then(function(){let e={label:t._selectedLabel,id:t._selectedId};a(e),t._socket.addListener("onCloseTransient",t._cleanUpContext.bind(t))},function(){r()})},function(){r("no object selected, cancel clicked")})},function(){r("Company Tags For Search Suggest is not activated"),t._socket.addListener("onCloseTransient",t._cleanUpContext.bind(t))})})},_searchSelecteObj:function(e,t){console.log("In _searchSelecteObj");let a=this;return new Promise(function(e,r){"in_app_ok"===t.selected_command?(a._selectedLabel=t.selected_objects[0]["ds6w:label"],a._selectedId=t.selected_objects[0].resourceid,e(a._selectedId)):r()})},getSelectedOject:function(){return this._selectedId},_getInContextOptions:function(e){return{widget_id:"widget_id_#scc_incontext_search#",app_socket_id:"socket_id_#scc_incontext_search#",title:e.title,default_search_criteria:"",search_criteria_to_display:"",precond:e.precond,default_with_precond:!0,mode:"furtive",search_criteria_to_display:"",source:[e.source]}},_cleanUpContext:function(){this._socket.dispatchEvent("UnregisterContext",{widget_id:"widget_id_#scc_incontext_search#"}),this._socket.removeListener("RegisterContext_Response"),this._socket.removeListener("onCloseTransient")},destroy:function(){this._socket.unsubscribeServer("SearchComServer"),this._socket=null}})}),define("DS/SearchControlCenter/control/SCCCard",["UWA/Core","UWA/Element","UWA/Controls/Abstract","DS/Controls/TooltipModel"],function(e,t,a,r){"use strict";return a.extend({name:"scc-card",_title:null,_body:null,_value:null,init:function(e){this._parent(e),this._buildUI(e)},_buildUI:function(a){this._title=a.header.label,this._value=e.is(a.header.value)?a.header.value:a.header.label,this.elements.container=t.create("div",{class:"scc-card-container"}),this.elements.header=t.create("div",{class:"scc-card-header scc-card-flex"}).inject(this.elements.container),e.is(a.className)&&this.elements.header.addClassName(a.className);var n=t.create("p",{class:"scc-card-header-text",text:this._truncateString(a.header.label,25)}).inject(this.elements.header);e.is(a.className)&&n.addClassName(a.className),n.tooltipInfos=new r({shortHelp:a.header.label,position:"top",touchMode:!0}),!0===a.closable&&t.create("div",{class:"fonticon fonticon-clear fonticon-x search_center_delete_button_margin scc-card-close-button",styles:{color:"#b4b6ba"},events:{click:this._onClick.bind(this),mouseover:this._onMouseOver.bind(this),mouseout:this._onMouseOut.bind(this)}}).inject(this.elements.header),!0===a.isBodyRequired&&(this.elements.header.setStyle("border-bottom","1px solid #b2adad"),this.elements.body=t.create("div",{class:"scc-card-body"}).inject(this.elements.container))},_onClick:function(t){let a=e.clone(this.options);a.target=this.elements.container,this.dispatchEvent("onClose",a)},_onMouseOver:function(e){e.currentTarget.setStyle("color","#3d3d3d")},_onMouseOut:function(e){e.currentTarget.setStyle("color","#b4b6ba")},getTitle:function(){return this._title},getValue:function(){return this._value},getHeaderElement:function(){return this.elements.header},getBodyElement:function(){return this.elements.body},appendChildToBody:function(e){e.inject(this.elements.body)},_truncateString:function(t,a){return!e.is(t)||t.length<=a?t:t.slice(0,a)+" ..."}})}),define("DS/SearchControlCenter/Collection/SearchControlCenterFacetListCollection",["UWA/Core","UWA/Utils","UWA/Class/Collection","DS/SNSearchResultsCusto/utils/SearchResultsCustomizationPreferences","DS/SearchControlCenter/Model/SearchControlCenterFacetListModel","WebappsUtils/WebappsUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,a,r,n,i,o,s){"use strict";return a.extend({model:n,setup:function(){e.log("SearchControlCenterFacetListCollection::setup"),this.url=i.getWebappsAssetUrl("SearchControlCenter","SearchControlCenter_Entries.json")},sync:function(t,a,r){e.log("SearchControlCenterFacetListCollection::sync"),r.proxy="passport",r.headers={"Accept-Language":widget.lang},this._parent.apply(this,[t,a,r])},parse:function(t){e.log("SearchControlCenterFacetListCollection::parse");var a=!1,r=!0,n=null;e.is(window)&&e.is(window.location)&&e.is(window.location.search,"string")&&(n=window.location.search.substring(1)),e.is(n,"string")&&n.length>0&&(n.indexOf("AdminColumnsSearch")>=0||n.indexOf("SearchDisplayName")>=0)&&(a=!1),-1===t.facets.findIndex(e=>"SearchControl_ResultsAttributesDisplay"===e.facetID)&&(r=!0,t.facets.splice(1,0,{facetID:"SearchControl_ResultsAttributesDisplay",srcJS:"DS/SearchControlCenter/scripts/SearchcontrolResultsAttributesDisplay",iconName:"search_attributesCustomization_fontIcon.png"}));var i,c,l=[];return Array.isArray(t.facets)&&t.facets.forEach(function(e){var t=!0;i=s[e.facetID],c=s[e.facetID+".subTitle"];var n=o.getURL()+"/webapps/SearchControlCenter/assets/img/"+e.iconName;"SearchControl_ColumnCusto"===e.facetID&&!1===a&&(t=!1),"SearchControl_ResultsAttributesDisplay"===e.facetID&&!1===r&&(t=!1),!0===t&&l.push({title:i,subtitle:c,introduction:"",image:n,facetJS:e.srcJS,domainid:e.facetID,id:e.facetID})}),l}})}),define("DS/SearchControlCenter/scripts/SearchControlCenterServices",["UWA/Element","UWA/Core","UWA/Promise","DS/UIKIT/Alert","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SNVocabAccess","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/SNResultUX/utils/SearchServices","DS/SNResultUX/utils/SearchViewOptions","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","css!DS/SearchControlCenter/SearchControlCenter","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_){"use strict";var h={parentCardDiv:null,draggedCardBlock:null,platformID:null,platformDisplayName:null,_datasourceList:[],_datSourceToVocabID:{},_Service_Nls_promise:a.deferred(),_applyButton:null,_restoreButton:null,_buttonStatus:!1,_URL:null,createWdgAlert:function(){return new r({closable:!0,visible:!0,autoHide:!0,hideDelay:2500})},updateButtons:function(e,a){t.is(e)&&t.is(a)&&(this._applyButton=e,this._restoreButton=a)},isButtonDisabled:function(){return this._buttonStatus=!1,t.is(this._applyButton)&&t.is(this._restoreButton)&&!0===this._applyButton.isDisabled()&&!0===this._restoreButton.isDisabled()&&(this._buttonStatus=!0),this._buttonStatus},disableButtons:function(){t.is(this._applyButton)&&t.is(this._restoreButton)&&(!1===this._applyButton.isDisabled()&&this._applyButton.setDisabled(!0),!1===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!0))},enableButtons:function(){t.is(this._applyButton)&&t.is(this._restoreButton)&&(!0===this._applyButton.isDisabled()&&this._applyButton.setDisabled(!1),!0===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!1))},enableRestoreButton:function(){t.is(this._restoreButton)&&!0===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!1)},getButtonStatus:function(){return this._buttonStatus},reSetButtonStatus:function(){this._buttonStatus=!1},putMask:function(e){_.mask(e)},removeMask:function(e){_.unmask(e)},setPlatformID:function(e){t.is(e)&&(h.platformID=e)},getPlatformID:function(){if(t.is(h.platformID))return h.platformID},setPlatformDisplayName:function(e){t.is(e)&&(h.platformDisplayName=e)},getDataSourceList:function(e){var a=[],r=[];if(this._datasourceList.length>0)return this._datasourceList;if(t.is(h.platformID)){var n=i.getAvailableSources(h.platformID);if(t.is(n)){(e=e||{}).dataSources=n;var c=o.getValidDatasources(e);if(t.is(c)){if(t.is(c.dataSourceNames,"array")){r=c.dataSourceNames,r=l.filterSourceList(r);for(var d=0;d<r.length;d++)h._datSourceToVocabID[r[d]]=s.getVocabularyName(r[d])}t.is(c.dataSourceServices,"array")&&(a=c.dataSourceServices)}}return a.length>0&&this.getNLSValues(r,a,"ds6w:dataSource"),h._Service_Nls_promise.promise}},getVocabID:function(e){let a;return t.is(e)&&t.is(h._datSourceToVocabID)&&(a=h._datSourceToVocabID[e]),a},getNLSValues:function(e){var a={};a.dataSourceLists=e;var r=d.getNlsOfDataSources(a);if(t.is(r,"array")){var i={};i.AllDataSourcesandTypes=u.get("searchAttributes.DataSource.AllDataSourcesandTypes");for(var o=0;o<r.length;o++)i[e[o]]=r[o],h._datasourceList.push(r[o]);n.setDatasourceInternalMapping(i)}h._Service_Nls_promise.resolve(h._datasourceList)},getDatasourceInternalName:function(e){if(t.is(e))return n.getDatasourceInternalMappingValue(e)},getDatasourceDisplayName:function(e){if(t.is(e))return n.getDatasourceDisplayMappingValue(e)},updateAttributesMappingForAllDataSourcesAndTypes:function(e,a){t.is(e,"string")&&n.setAttributesInternalMappingForAllDataSourcesAndTypes(e,a)},getAttributesInternalNameForAllDataSourcesAndTypes:function(e,a){if(t.is(e))return n.getAttributesInternalMappingValueForAllDataSourcesAndTypes(e,a)},getAttributesDisplayNameForAllDataSourcesAndTypes:function(e,a){if(t.is(e))return n.getAttributesDisplayMappingValueForAllDataSourcesAndTypes(e,a)},updateTypesMapping:function(e,a){t.is(e,"string")&&n.setTypeInternalMapping(e,a)},getTypesInternalName:function(e,a){if(t.is(e))return n.getTypeInternalMappingValue(e,a)},getTypesDisplayName:function(e,a){if(t.is(e))return n.getTypeDisplayMappingValue(e,a)},updateAttributesMapping:function(e,a,r){t.is(e,"string")&&n.setAttributeInternalMapping(e,a,r)},getAttributesInternalName:function(e,a,r){if(t.is(e))return n.getAttributeInternalMapping(e,a,r)},getSettingsJSONFromTabName:function(e){if(t.is(e))return n.gateTabSettingJSON(e)},setLocalCacheForAttribute:function(e){if(t.is(e))return n.initiate_Local_Attribute_Cache(e)},updateLocalCacheForAttribute:function(e){if(t.is(e))return n.update_Local_Attributes_Cache(e)},getLocalCacheForAttribute:function(){return n.gate_Local_Attribute_Cache()},clearLocalCacheForAttribute:function(){return n.clear_Local_Attribute_Cache()},clearLocalCacheFor6WTags:function(){return n.clear_Local_6WTags_Cache()},encryptData:function(e,t){const a=e=>e.split("").map(e=>e.charCodeAt(0));return t.split("").map(a).map(t=>a(e).reduce((e,t)=>e^t,t)).map(e=>("0"+Number(e).toString(16)).substr(-2)).join("")},decryptData:function(e,t){return t.match(/.{1,2}/g).map(e=>parseInt(e,16)).map(t=>(e=>e.split("").map(e=>e.charCodeAt(0)))(e).reduce((e,t)=>e^t,t)).map(e=>String.fromCharCode(e)).join("")},setURL:function(e){this.url=e},getURL:function(){return this.url},updateMemoryModel:function(e){t.is(e)&&n.setSettingsJSON(e)},getPredicatesList:function(){return new a(function(e,t){let a={onComplete:function(t){UWA.log("Got a predicates result!"+t),e(t)},onFailure:function(e){UWA.log("predicates service request Fail!"+e),t(e)},tenantId:h.platformID,lang:widget.lang,apiVersion:"R2021x"};c.getFedProperties(a)})},isThisNotARootPredicate:function(e){return""!==e.subPropertyOf},filterPredicatesList:function(e){let t,a,r={},n=[];for(a in e)if(e[a].properties.length>0){let r=(t=e[a].properties).length;if(void 0!==t&&r>0){e[a].properties=t.filter(this.isThisNotARootPredicate),t.sort(function(e,t){let a=e.label;a=a.toUpperCase();let r=t.label;return a<(r=r.toUpperCase())?-1:a>r?1:0});for(let e=0;e<r;e++)n.push(t[e].curi)}}return n.push("computedCountryInfo"),r.predicates=n,r},getSettingsFromDB:function(){return n.gateSettingsJSON()},loadDataSourcesandClasses:function(){var e=this;return new a(function(t,r){e.getAvailableSources().then(function(r){r=r.filter(function(e){return e.status}),a.all(e.loadVocabClassesForSources(r)).then(function(e){t(e)})})})},getAvailableSources:function(){let e=this;return new a(function(t,a){let r=e.getPlatformID();t(i.getAvailableSources(r))})},loadVocabClassesForSources:function(e){let t=[],r=this.getPlatformID(),n=o.getLanguage();return e.forEach(e=>{e.status&&t.push(new a((t,a)=>{s.loadVocabularyClasses({vocabId:e.service,tenantId:r,lang:n},t)}))}),t}};return h}),define("DS/SearchControlCenter/scripts/SearchcontrolSearchTypes",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/Controls/ComboBox","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SNVocabAccess","DS/SNResultUX/utils/ExternalComponentHelpers","DS/WUXAutoComplete/AutoComplete"],function(e,t,a,r,n,i,o,s,c,l){"use strict";let d={datasourceComboBox:null,defaultDatasourceComboBox:null,_defaultDatasource:null,_vocabClassPromises:{},_vocabPropertiesPromises:{},_attributesMap:{},_uriNamesOfPreferredTypes:[],_preferredDatasourceNames:[],_excludeDatasourceNames:[],_uriNamesOfExcludeType:[],onRenderFacet:function(n){let s=e.create("div",{class:"scc_main_div",id:"search-center-Types"}).inject(n),u=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"confofDisplayTypeSpan"}).inject(s),p=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"confofDisplayTypeText"}).inject(u);d.EditConfDisplayTypeON=new a({type:"switch",label:i.get("Advanced.EditConfDisplayType.title"),touchMode:!0,value:0}).inject(p),d.EditConfDisplayTypeON.addEventListener("change",function(){o.enableButtons(),!1===d.EditConfDisplayTypeON.checkFlag?(h.addClassName("search_center_disable"),f.addClassName("search_center_disable"),y.addClassName("search_center_disable"),b.addClassName("search_center_disable"),x.addClassName("search_center_disable"),d.divAvailableTypesSpan.addClassName("search_center_disable"),d.divAvailableTypesSpan2.addClassName("search_center_disable"),d.divExcludedTypesSpan.addClassName("search_center_disable"),d.divExcludedTypesSpan2.addClassName("search_center_disable"),T.addClassName("search_center_disable"),A.addClassName("search_center_disable"),N.addClassName("search_center_disable"),W.addClassName("search_center_disable"),B.addClassName("search_center_disable"),P.addClassName("search_center_disable"),F.addClassName("search_center_disable"),k.addClassName("search_center_disable")):(h.removeClassName("search_center_disable"),f.removeClassName("search_center_disable"),y.removeClassName("search_center_disable"),b.removeClassName("search_center_disable"),x.removeClassName("search_center_disable"),d.divAvailableTypesSpan.removeClassName("search_center_disable"),d.divAvailableTypesSpan2.removeClassName("search_center_disable"),d.divExcludedTypesSpan.removeClassName("search_center_disable"),d.divExcludedTypesSpan2.removeClassName("search_center_disable"),T.removeClassName("search_center_disable"),A.removeClassName("search_center_disable"),N.removeClassName("search_center_disable"),W.removeClassName("search_center_disable"),B.removeClassName("search_center_disable"),P.removeClassName("search_center_disable"),F.removeClassName("search_center_disable"),k.removeClassName("search_center_disable"))}.bind(this));let _=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(p);c.popin(_,{trigger:"hover",position:"right",body:i.get("searchType.ConfigDisplayType.popover")});let h=e.create("div",{class:"search_center_general_tab_div search_center_disable search_center_margin ",id:"SearchonInstances"}).inject(s),g=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"SearchonInstancesText"}).inject(h);d.SearchonInstancesON=new a({type:"switch",label:i.get("searchType.instanceSearch"),touchMode:!0,value:0}).inject(g),d.SearchonInstancesON.addEventListener("change",function(){o.enableButtons(),!0===d.SearchonInstancesON.checkFlag?this._searchonInstances=!0:this._searchonInstances=!1}.bind(this));let m=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(g);c.popin(m,{trigger:"hover",position:"right",body:i.get("searchType.SerchOnInstances.popover")});let f=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"default_dataSource_display_span"}).inject(s),C=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_disable search_center_top_margin",id:"default_dataSource_display_text"}).inject(f),y=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"default_datasource_display_span"}).inject(s),v=e.create("div",{class:"search_center_div_left_6w",id:"Default_Data_Source_Display_Combo"}).inject(y);e.create("p",{class:"search_center_text",text:i.get("SearchType.DefaultDataSource")}).inject(C),d.defaultDatasourceComboBox=new r({placeholder:i.get("Choose_default_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(v),v.setStyle("display","grid"),d.defaultDatasourceComboBox.elements.container.setStyle("max-width","unset"),d.defaultDatasourceComboBox.addEventListener("change",function(){let e=i.get("General.None");d.defaultDatasourceComboBox.currentValue===e&&(d.defaultDatasourceComboBox.selectedIndex=-1),o.enableButtons()});let b=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"datasource_display_span"}).inject(s),S=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"datasource_display_type_text"}).inject(b),x=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"Data_Source_Display_Span"}).inject(s),D=e.create("div",{class:"search_center_div_left_6w",id:"Data_Source_Display_Combo"}).inject(x);e.create("p",{class:"search_center_text",text:i.get("searchAttributes.DataSource")}).inject(S),d.DatasourceComboBox=new r({placeholder:i.get("Choose_data_source"),touchMode:!0,enableSearchFlag:!0}).inject(D),D.setStyle("display","grid"),d.DatasourceComboBox.elements.container.setStyle("max-width","unset"),d.divAvailableTypesSpan=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"availabale_types_div"}).inject(s),d.divAvailableTypesText=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"available_types_text_div"}).inject(d.divAvailableTypesSpan),d.divAvailableTypesSpan2=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"avaialable_types_span"}).inject(s),d.divAvailableTypesAutoComp=e.create("div",{class:"search_center_div_left_6w",id:"avaialble_types_autocomp"}).inject(d.divAvailableTypesSpan2),e.create("p",{class:"search_center_text",text:i.get("SearchType.AvailableTypes")}).inject(d.divAvailableTypesText),d.availableTypesAutocomp=new l({allowFreeInputFlag:!1,placeholder:i.get("Search")}).inject(d.divAvailableTypesAutoComp),d.availableTypesAutocomp.elements.container.children[0].setStyles({height:"38px"}),d.availableTypesAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.availableTypesAutocomp.addEventListener("change",function(){o.enableButtons();let e=d.excludedTypesAutocomp.value,a=d.availableTypesAutocomp.value;if(a.length>0){let n=a[a.length-1];if(t.is(e)&&e.length>0){if(e.indexOf(n)>-1){let e=d.availableTypesAutocomp.selectedItems.length;d.availableTypesAutocomp._selectionChips.removeChip(e-1);a.splice(-1,1);d.availableTypesAutocomp.selectedItems.splice(-1,1);let t=i.get("SearchType.preferredTypeWarning");var r=o.createWdgAlert();r.inject(widget.body,"top"),r.add({className:"warning applyChangesAlert",message:t})}}}}),d.divExcludedTypesSpan=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"excluded_types_div"}).inject(s),d.divExcludedTypesText=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"excluded_types_text_div"}).inject(d.divExcludedTypesSpan),d.divExcludedTypesSpan2=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"excluded_types_text_div2"}).inject(s),d.divExcludedTypesAutoComp=e.create("div",{class:"search_center_div_left_6w",id:"excluded_types_autocomp_div"}).inject(d.divExcludedTypesSpan2),e.create("p",{class:"search_center_text",text:i.get("SearchType.ExcludedTypes")}).inject(d.divExcludedTypesText),d.excludedTypesAutocomp=new l({allowFreeInputFlag:!1,placeholder:i.get("Search")}).inject(d.divExcludedTypesAutoComp),d.excludedTypesAutocomp.elements.container.children[0].setStyles({height:"38px"}),d.excludedTypesAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.excludedTypesAutocomp.addEventListener("change",function(){o.enableButtons();let e=d.excludedTypesAutocomp.value,a=d.availableTypesAutocomp.value;if(e.length>0){let n=e[e.length-1];if(t.is(a)&&a.length>0){if(a.indexOf(n)>-1){let t=d.excludedTypesAutocomp.selectedItems.length;d.excludedTypesAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.excludedTypesAutocomp.selectedItems.splice(-1,1);let a=i.get("SearchType.excludeTypeWarning");var r=o.createWdgAlert();r.inject(widget.body,"top"),r.add({className:"warning applyChangesAlert",message:a})}}}}),d.DatasourceComboBox.addEventListener("change",function(){o.enableButtons();let e=i.get("General.None");d.DatasourceComboBox.currentValue===e&&(d.DatasourceComboBox.selectedIndex=-1);let a=[];if(d.excludedTypesAutocomp.elementsTree=a,d.availableTypesAutocomp.elementsTree=a,t.is(d.DatasourceComboBox.currentValue)){c.mask(d.divAvailableTypesAutoComp),c.mask(d.divExcludedTypesAutoComp);let e=o.getDatasourceInternalName(d.DatasourceComboBox.currentValue);d._loadClasses({datasourceURI:e}).then(function(a){d.availableTypesAutocomp.elementsTree=a,d.excludedTypesAutocomp.elementsTree=a;let r=[];for(let a=0;a<d._uriNamesOfPreferredTypes.length;a++){let n=d._uriNamesOfPreferredTypes[a];if(t.is(n)&&e===d._preferredDatasourceNames[a]){let e=o.getTypesDisplayName(d._preferredDatasourceNames[a],n);r.push(e)}}d.availableTypesAutocomp.value=r;let n=[];for(let a=0;a<d._uriNamesOfExcludeType.length;a++){let r=d._uriNamesOfExcludeType[a];if(t.is(r)&&e===d._excludeDatasourceNames[a]){let e=o.getTypesDisplayName(d._excludeDatasourceNames[a],r);n.push(e)}}d.excludedTypesAutocomp.value=n,c.unmask(d.divAvailableTypesAutoComp),c.unmask(d.divExcludedTypesAutoComp),o.disableButtons()})}o.disableButtons()});e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-empty-div"}).inject(s),e.create("div",{class:"search_center_general_display_flex search_center_add_bottom_border",id:"general-tab-border"}).inject(s);let T=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"avail-properties_display_span"}).inject(s),w=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"available_properties_text"}).inject(T),A=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"available_properties_display_span"}).inject(s),I=e.create("div",{class:"search_center_div_left_6w",id:"Avail_PropertiesDisplay_Combo_datasource"}).inject(A);e.create("p",{class:"search_center_text",text:i.get("SearchType.AvailableProperties")}).inject(w),d.availPropDatasourceComboBox=new r({placeholder:i.get("Select_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(I),I.setStyle("display","grid"),d.availPropDatasourceComboBox.elements.container.setStyle("max-width","unset");let N=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"properties_type_display_span"}).inject(s),j=e.create("div",{class:"search_center_div_left_6w",id:"Avail_Properties_Typeselection"}).inject(N);d.availPropTypeComboBox=new r({placeholder:i.get("Select_type"),touchMode:!0,enableSearchFlag:!0}).inject(j),j.setStyle("display","grid"),d.availPropTypeComboBox.elements.container.setStyle("max-width","unset"),d.availPropDatasourceComboBox.addEventListener("change",function(){o.enableButtons();let e=i.get("General.None");d.availPropDatasourceComboBox.currentValue===e&&(d.availPropDatasourceComboBox.selectedIndex=-1);let a=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue);t.is(a)&&(d.availPropTypeComboBox.elementsList=[],d._loadClasses({datasourceURI:a}).then(function(e){d.availPropTypeComboBox.elementsList=e}))});let W=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"available_properties_span"}).inject(s),O=e.create("div",{class:"search_center_div_left_6w",id:"Available_Property_Comp"}).inject(W);d.AvailablePropertyAutocomp=new l({multiSearchMode:!0,placeholder:i.get("Search")}).inject(O),d.AvailablePropertyAutocomp.elements.container.children[0].setStyles({height:"38px"}),d.AvailablePropertyAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.AvailablePropertyAutocomp.addEventListener("change",function(){o.enableButtons();let e=d.AvailablePropertyAutocomp.value;if(e.length>0){let r=e[e.length-1],n=!1,s=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),c=o.getTypesInternalName(s,d.availPropTypeComboBox.currentValue);if(t.is(d.availPropDatasourceComboBox.currentValue)&&t.is(d.availPropTypeComboBox.currentValue)){let e=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),a=o.getTypesInternalName(e,d.excludePropTypeComboBox.currentValue);if(s===e&&c===a){let e=d.ExcludedPropertyAutocomp.value;if(t.is(e)&&e.length>0){e.indexOf(r)>-1&&(n=!0)}}}if(!1===n){let e=o.getLocalCacheForAttribute();if(t.is(e)&&e.length>0)for(let a=0;a<e.length;a++){let i=e[a];if(c===i.uri&&s===i.source){let e=i.excluded_predicates;if(t.is(e)&&e.length>0){for(let t=0;t<e.length;t++){let e=i.excluded_predicates[t].uri;if(d._attributesMap[e]===r){n=!0;break}}}}if(!0===n)break}}if(!0===n){let t=d.AvailablePropertyAutocomp.selectedItems.length;d.AvailablePropertyAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.AvailablePropertyAutocomp.selectedItems.splice(-1,1);let r=i.get("searchAttributes.preferredAttrWarning");var a=o.createWdgAlert();a.inject(widget.body,"top"),a.add({className:"warning applyChangesAlert",message:r})}}}),d.availPropTypeComboBox.addEventListener("change",function(){d.AvailablePropertyAutocomp.elementsTree=[];let e=d.availPropTypeComboBox.currentValue;if(e){let a=d.availPropDatasourceComboBox.currentValue+"+"+e;c.unmask(O),c.mask(O),d._fetchProperties({uniqueKey:a}).then(function(e){d.AvailablePropertyAutocomp.elementsTree=e;let a=o.getLocalCacheForAttribute();if(t.is(a)&&a.length>0){let e=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),r=o.getTypesInternalName(e,d.availPropTypeComboBox.currentValue);for(let n=0;n<a.length;n++){let i=a[n];if(r===i.uri&&e===i.source){let e=i.predicates;if(t.is(e)&&e.length>0){let t=[];for(let a=0;a<e.length;a++){let e=i.predicates[a].uri,r=d._attributesMap[e];t.push(r)}d.AvailablePropertyAutocomp.value=t;break}d.AvailablePropertyAutocomp.value=[]}}}o.disableButtons(),c.unmask(O)})}o.disableButtons()});let B=e.create("div",{class:"search_center_general_tab_div search_center_disable search_center_top_margin",id:"exclude_properties_display_span"}).inject(s),E=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"exculded_properties_text"}).inject(B),P=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"exclude_properties_display"}).inject(s),R=e.create("div",{class:"search_center_div_left_6w",id:"ExcludePropertiesDisplay_datasource"}).inject(P);e.create("p",{class:"search_center_text",text:i.get("SearchType.ExcludedProperties")}).inject(E),d.excludePropDatasourceComboBox=new r({placeholder:i.get("Select_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(R),R.setStyle("display","grid"),d.excludePropDatasourceComboBox.elements.container.setStyle("max-width","unset");let F=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"exclude_propertiestype_span"}).inject(s),M=e.create("div",{class:"search_center_div_left_6w",id:"Exclude_PropertiesType_DisplayCombo"}).inject(F);d.excludePropTypeComboBox=new r({placeholder:i.get("Select_type"),touchMode:!0,enableSearchFlag:!0}).inject(M),M.setStyle("display","grid"),d.excludePropTypeComboBox.elements.container.setStyle("max-width","unset"),d.excludePropDatasourceComboBox.addEventListener("change",function(){o.enableButtons();let e=i.get("General.None");d.excludePropTypeComboBox.currentValue===e&&(d.excludePropTypeComboBox.selectedIndex=-1);let a=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue);t.is(a)&&(d.excludePropTypeComboBox.elementsList=[],d._loadClasses({datasourceURI:a}).then(function(e){d.excludePropTypeComboBox.elementsList=e}))});let k=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"excluded_properties_span"}).inject(s),U=e.create("div",{class:"search_center_div_left_6w",id:"Excluded_Property_Comp"}).inject(k);d.ExcludedPropertyAutocomp=new l({multiSearchMode:!0,placeholder:i.get("Search")}).inject(U),d.ExcludedPropertyAutocomp.elements.container.children[0].setStyles({height:"38px"}),d.ExcludedPropertyAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.ExcludedPropertyAutocomp.addEventListener("change",function(){o.enableButtons();let e=d.ExcludedPropertyAutocomp.value;if(e.length>0){let r=e[e.length-1],n=!1,s=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),c=o.getTypesInternalName(s,d.excludePropTypeComboBox.currentValue);if(t.is(d.availPropDatasourceComboBox.currentValue)&&t.is(d.availPropTypeComboBox.currentValue)){let e=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),t=o.getTypesInternalName(e,d.availPropTypeComboBox.currentValue);if(e===s&&t===c){let e=d.AvailablePropertyAutocomp.value;if(e.length>0){e.indexOf(r)>-1&&(n=!0)}}}if(!1===n){let e=o.getLocalCacheForAttribute();if(t.is(e)&&e.length>0)for(let a=0;a<e.length;a++){let i=e[a];if(c===i.uri&&s===i.source){let e=i.predicates;if(t.is(e)&&e.length>0){for(let t=0;t<e.length;t++){let e=i.predicates[t].uri;if(d._attributesMap[e]===r){n=!0;break}}}}if(!0===n)break}}if(!0===n){let t=d.ExcludedPropertyAutocomp.selectedItems.length;d.ExcludedPropertyAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.ExcludedPropertyAutocomp.selectedItems.splice(-1,1);let r=i.get("searchAttributes.excludeAttrWarning");var a=o.createWdgAlert();a.inject(widget.body,"top"),a.add({className:"warning applyChangesAlert",message:r})}}}),d.excludePropTypeComboBox.addEventListener("change",function(){d.ExcludedPropertyAutocomp.elementsTree=[];let e=d.excludePropTypeComboBox.currentValue;if(e){let a=d.excludePropDatasourceComboBox.currentValue+"+"+e;c.unmask(U),c.mask(U),d._fetchProperties({uniqueKey:a}).then(function(e){d.ExcludedPropertyAutocomp.elementsTree=e;let a=o.getLocalCacheForAttribute();if(t.is(a)&&a.length>0){let e=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),r=o.getTypesInternalName(e,d.excludePropTypeComboBox.currentValue);for(let n=0;n<a.length;n++){let i=a[n];if(r===i.uri&&e===i.source){let e=i.excluded_predicates;if(t.is(e)&&e.length>0){let t=[];for(let a=0;a<e.length;a++){let e=i.excluded_predicates[a].uri,r=d._attributesMap[e];t.push(r)}d.ExcludedPropertyAutocomp.value=t}else d.ExcludedPropertyAutocomp.value=[]}}}o.disableButtons(),c.unmask(U)})}o.disableButtons()});let L=[];if(L.push(i.get("General.None")),o._datasourceList.length>0){let e=o._datasourceList;if(t.is(e,"array")){let t=L.concat(e);d.DatasourceComboBox.elementsList=t,d.defaultDatasourceComboBox.elementsList=t,d.availPropDatasourceComboBox.elementsList=e,d.excludePropDatasourceComboBox.elementsList=e}}else o.getDataSourceList().then(function(e){if(t.is(e,"array")){let t=L.concat(e);d.DatasourceComboBox.elementsList=t,d.defaultDatasourceComboBox.elementsList=t,d.availPropDatasourceComboBox.elementsList=e,d.excludePropDatasourceComboBox.elementsList=e}})},_loadClasses:function(e){if(!e||!e.datasourceURI)return null;let a=e.datasourceURI;if(!this._vocabClassPromises[e.datasourceURI]){this._vocabClassPromises[e.datasourceURI]=new Promise(function(e,r){let n={};n.vocabId=o._datSourceToVocabID[a],n.tenantId=o.platformID,n.lang=o._language,s.loadVocabularyClasses(n,function(n){if(n.classInfos.length>0){let r=[],i={};for(let e=0;e<n.classInfos.length;e++)t.is(n.classInfos[e].nlsName,"string")&&t.is(n.classInfos[e].uri)&&(r.push(n.classInfos[e].nlsName),i[n.classInfos[e].uri]=n.classInfos[e].nlsName);o.updateTypesMapping(a,i),e(r)}else{let e=o.createWdgAlert(),t=i.get("SearchType.NoTypesWarning");e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:t}),r()}})})}return this._vocabClassPromises[e.datasourceURI]},_fetchProperties:function(e){if(!e||!e.uniqueKey)return null;if(!this._vocabPropertiesPromises[e.uniqueKey]){let a=e.uniqueKey;this._vocabPropertiesPromises[e.uniqueKey]=new Promise(function(e,r){let n=a.indexOf("+"),i=a.substring(0,n),c=a.substring(n+1),l=o.getDatasourceInternalName(i),u=o.getTypesInternalName(l,c);if(t.is(u)){let a={};a.className=u,a.tenantId=o.platformID,s.loadRelevantPredicates(a,function(a){if(a.vocabularyPredicateInfo.length>0){a.vocabularyPredicateInfo.sort(function(e,a){let r=e.nlsName;t.is(r)||(r=e.uri),r=r.toUpperCase();let n=a.nlsName;return t.is(n)||(n=a.uri),r<(n=n.toUpperCase())?-1:r>n?1:0});let r=[];for(let e=0;e<a.vocabularyPredicateInfo.length;e++)if(t.is(a.vocabularyPredicateInfo[e].nlsName,"string")&&t.is(a.vocabularyPredicateInfo[e].uri)){if("ds6w:label"===a.vocabularyPredicateInfo[e].uri||"ds6w:identifier"===a.vocabularyPredicateInfo[e].uri||"ds6w:modified"===a.vocabularyPredicateInfo[e].uri||"ds6w:description"===a.vocabularyPredicateInfo[e].uri||"ds6w:responsible"===a.vocabularyPredicateInfo[e].uri||"ds6w:created"===a.vocabularyPredicateInfo[e].uri)continue;r.push(a.vocabularyPredicateInfo[e].nlsName),d._attributesMap[a.vocabularyPredicateInfo[e].uri]=a.vocabularyPredicateInfo[e].nlsName}o.updateAttributesMapping(l,u,d._attributesMap),e(r)}else r()})}})}return this._vocabPropertiesPromises[e.uniqueKey]},getTabInputsToStore:function(){let e={type_display:d.EditConfDisplayTypeON.checkFlag,SEARCH_INSTANCES:d.SearchonInstancesON.checkFlag},a=[],r={},n=o.getDatasourceInternalName(d.defaultDatasourceComboBox.currentValue);t.is(n)&&(r.source=n,a.push(r)),e.default_datasourceandtype=a;let i=o.getDatasourceInternalName(d.DatasourceComboBox.currentValue),s=[],c=[],l=[];if(t.is(d.availableTypesAutocomp.selectedItems)){let e=d.availableTypesAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=o.getTypesInternalName(i,d.availableTypesAutocomp.selectedItems[a]._options.label),e.source=i,t.is(e.uri)&&t.is(e.source)&&(l.push(e),c.push(i),s.push(e.uri))}}let u=[],p=[],_=[];if(t.is(d.excludedTypesAutocomp.selectedItems)){let e=d.excludedTypesAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=o.getTypesInternalName(i,d.excludedTypesAutocomp.selectedItems[a]._options.label),e.source=i,t.is(e.uri)&&t.is(e.source)&&(_.push(e),u.push(e.uri),p.push(i))}}if(t.is(d._uriNamesOfPreferredTypes)){let t=[],a=[];for(let e=0;e<d._preferredDatasourceNames.length;e++)if(i!==d._preferredDatasourceNames[e]){t.push(d._uriNamesOfPreferredTypes[e]),a.push(d._preferredDatasourceNames[e]);let r={};r.uri=d._uriNamesOfPreferredTypes[e],r.source=d._preferredDatasourceNames[e],l.push(r)}d._uriNamesOfPreferredTypes=t,d._preferredDatasourceNames=a,s.length>1&&(d._uriNamesOfPreferredTypes=d._uriNamesOfPreferredTypes.concat(s),d._preferredDatasourceNames=d._preferredDatasourceNames.concat(c)),e.easyTypeAccess=l}if(t.is(d._uriNamesOfExcludeType)){let t=[],a=[];for(let e=0;e<d._excludeDatasourceNames.length;e++)if(i!==d._excludeDatasourceNames[e]){t.push(d._uriNamesOfExcludeType[e]),a.push(d._excludeDatasourceNames[e]);let r={};r.uri=d._uriNamesOfExcludeType[e],r.source=d._excludeDatasourceNames[e],_.push(r)}d._uriNamesOfExcludeType=t,d._excludeDatasourceNames=a,s.length>1&&(d._uriNamesOfExcludeType=d._uriNamesOfExcludeType.concat(u),d._excludeDatasourceNames=d._excludeDatasourceNames.concat(p)),e.excluded_types=_}let h={},g=[],m=o.getLocalCacheForAttribute();t.is(m,"array")&&m.length>0&&(g=m);let f={},C=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),y=o.getTypesInternalName(C,d.availPropTypeComboBox.currentValue),v=[];if(t.is(d.AvailablePropertyAutocomp.selectedItems)){let e=d.AvailablePropertyAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=o.getAttributesInternalName(C,y,d.AvailablePropertyAutocomp.selectedItems[a]._options.label),t.is(e.uri)&&v.push(e)}}v.length>0&&(f.datasource=C,f.type=y,f.preferredAttributeList=v,o.updateLocalCacheForAttribute(f));let b={},S=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),x=o.getTypesInternalName(S,d.excludePropTypeComboBox.currentValue),D=[];if(t.is(d.ExcludedPropertyAutocomp.selectedItems)){let e=d.ExcludedPropertyAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=o.getAttributesInternalName(S,x,d.ExcludedPropertyAutocomp.selectedItems[a]._options.label),t.is(e.uri)&&D.push(e)}}D.length>0&&(b.datasource=S,b.type=x,b.excludeAttributeList=D,o.updateLocalCacheForAttribute(b)),h["ds6w:type"]=o.getLocalCacheForAttribute();let T={};return T.SearchControl_SearchTypes=e,T.SearchControl_SearchAttributes=h,T},onResetTab:function(e){let a,r,n;if((a=t.is(e,"string")?JSON.parse(e):e).hasOwnProperty("type_custo")&&(r=a.type_custo),a.hasOwnProperty("attribute_custo")&&(n=a.attribute_custo),t.is(r)){if(r.hasOwnProperty("type_display")){let e=r.type_display;t.is(e)&&(d.EditConfDisplayTypeON.checkFlag=e)}if(r.hasOwnProperty("SEARCH_INSTANCES")){let e=r.SEARCH_INSTANCES;t.is(e)&&(d.SearchonInstancesON.checkFlag=e)}else d.SearchonInstancesON.checkFlag=!1;if(r.hasOwnProperty("default_datasourceandtype")){let e=r.default_datasourceandtype;if(t.is(e)&&e.length>0){let t=e[e.length-1],a=o.getDatasourceDisplayName(t.source);d.defaultDatasourceComboBox.elementsList.length>0?d.defaultDatasourceComboBox.currentValue=a:d._defaultDatasource=a}else d.defaultDatasourceComboBox.selectedIndex=-1}else d.defaultDatasourceComboBox.selectedIndex=-1;let e=[],a=[],n=[],i=[];if(r.hasOwnProperty("easyTypeAccess")){let n=r.easyTypeAccess;if(t.is(n,"array"))for(let r=0;r<n.length;r++){let i=n[r].uri,o=n[r].source;t.is(o)&&a.push(o),t.is(i)&&e.push(i)}}if(d._uriNamesOfPreferredTypes=e,d._preferredDatasourceNames=a,r.hasOwnProperty("excluded_types")){let e=r.excluded_types;if(t.is(e,"array"))for(let a=0;a<e.length;a++){let r=e[a].uri,o=e[a].source;t.is(o)&&n.push(o),t.is(r)&&i.push(r)}}d._uriNamesOfExcludeType=i,d._excludeDatasourceNames=n;let s=null;a.length>0?s=a[0]:n.length>0&&(s=n[0]),t.is(s)&&(d.DatasourceComboBox.selectedIndex=-1,o.loadDataSourcesandClasses().then(function(e){if(t.is(e)){let e=o.getDatasourceDisplayName(s);d.DatasourceComboBox.currentValue=e}}))}if(t.is(n)&&(o.clearLocalCacheForAttribute(),n.hasOwnProperty("ds6w:type"))){let e=n["ds6w:type"];if(t.is(e,"array")){let a=t.clone(e,!0);o.setLocalCacheForAttribute(a);let r=e.length,n=e[r-1],i=n.source;"AllDataSourcesandTypes"===i&&r>1&&(n=e[r-2]);let s=n.uri;if(t.is(s)){n.predicates,n.excluded_predicates;o.loadDataSourcesandClasses().then(function(e){if(t.is(e)){let e=o.getDatasourceDisplayName(i);d.availPropDatasourceComboBox.currentValue=e,d.excludePropDatasourceComboBox.currentValue=e,d._loadClasses({datasourceURI:i}).then(function(e){d.availPropTypeComboBox.elementsList=e,d.excludePropTypeComboBox.elementsList=e,d.availPropTypeComboBox.selectedIndex=-1,d.excludePropTypeComboBox.selectedIndex=-1;let t=o.getTypesDisplayName(i,s);d.availPropTypeComboBox.currentValue=t,d.excludePropTypeComboBox.currentValue=t})}})}else d.availPropDatasourceComboBox.selectedIndex=-1,d.excludePropDatasourceComboBox.selectedIndex=-1,d.availPropTypeComboBox.selectedIndex=-1,d.excludePropTypeComboBox.selectedIndex=-1,d.AvailablePropertyAutocomp.value=[],d.ExcludedPropertyAutocomp.value=[]}}o.removeMask(widget.body)}};return d}),define("DS/SearchControlCenter/scripts/SearchcontrolResultsAttributesDisplay",["UWA/Element","UWA/Core","DS/Controls/ComboBox","DS/Controls/Toggle","DS/SearchControlCenter/scripts/SearchControlCenterServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SNSearchResultsCusto/views/SearchResultsCustomizationPanel","DS/SNSearchResultsCusto/utils/SearchResultsCustomizationPreferences","DS/MessageBus/MessageBus"],function(e,t,a,r,n,i,o,s,c,l,d){"use strict";return{activeCustoComboBox:null,customizationTool:null,deletingFromTenantSettings:!1,BETAcustomizationEnabled:!1,_activeCustoObject:{},onRenderFacet:function(t){this.tenant=n.platformID,l.loadCustomizationTenantSettings(this.tenant),this.BETAcustomizationEnabled=l.isBETAEnabled(),this._setActiveCustomization();var i=e.create("div",{class:"scc_main_div",id:"search-center-general0"}).inject(t),u=e.create("div").inject(i);u.setStyle("margin-bottom","30px");let p=e.create("div",{class:"search_center_general_tab_div search_center_margin "}).inject(u),_=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"Enable_option_customization_for_all_views"}).inject(p);this.divBETACustomizationToggle=new r({type:"switch",label:o.get("AttributesCustomization.enable_BETA_customization"),touchMode:!0,checkFlag:this.isBETAEnabled}).inject(_),this.divBETACustomizationToggle.addEventListener("change",function(){n.enableButtons(),!1===this.divBETACustomizationToggle.checkFlag?(this.BETAcustomizationEnabled=!1,h.addClassName("search_center_disable"),x.addClassName("search_center_disable"),this.custoManagementToolContainer.addClassName("search_center_disable")):(this.BETAcustomizationEnabled=!0,h.removeClassName("search_center_disable"),x.removeClassName("search_center_disable"),this.custoManagementToolContainer.removeClassName("search_center_disable"))}.bind(this));var h=e.create("div").inject(i);h.setStyle("margin-bottom","50px"),this.BETAcustomizationEnabled||h.addClassName("search_center_disable");var g=e.create("div",{class:"search_center_div_left search_center_general_display_flex"}).inject(h);e.create("p",{class:"search_center_text_heading",text:o.get("AttributesCustomization.active_customization")}).inject(g);var m=e.create("div",{class:"search_center_top_margin search_center_general_tab_div"}).inject(h),f=e.create("div",{class:"search_center_general_display_flex search_center_div_left"}).inject(m);e.create("p",{class:"search_center_text",text:o.get("AttributesCustomization.active_customization_label")}).inject(f);var C=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(m);s.tooltip(C,{position:"top",shortHelp:o.get("AttributesCustomization.active_customization_info")});var y=e.create("div",{class:"search_center_general_display_flex search_center_general_tab_div"}).inject(h),v=e.create("div",{class:"search_center_div_left"}).inject(y);v.setStyle("display","grid");var b=l.buildUserCustomizationList(),S=b.findIndex(e=>e===this.activeCustoId);this.activeCustoComboBox=new a({elementsList:b,currentValue:b[S]||"Default",touchMode:!0,enableSearchFlag:!0}).inject(v),this.activeCustoComboBox.elements.container.setStyle("max-width","unset"),this.activeCustoComboBox.addEventListener("change",function(e){e.preventDefault(),l.switchActiveCustomization(e.dsModel.currentValue),this.activeCustoId=e.dsModel.currentValue,this.custoManagementToolContainer.empty(),this.disableTenantSetting=!0,this.customizationTool.setup(this,this.custoManagementToolContainer),this.deletingFromTenantSettings=!1,n.enableButtons()}.bind(this));var x=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(i);e.create("p",{class:"search_center_text_heading",text:o.get("AttributesCustomization.Results_Attributes_management_tool")}).inject(x),this.custoManagementToolContainer=e.create("div",{class:"scc_main_div"}).inject(i),this.BETAcustomizationEnabled||(x.addClassName("search_center_disable"),this.custoManagementToolContainer.addClassName("search_center_disable")),this.customizationTool=new c,this.isSCC=!0,this.customizationTool.setup(this,this.custoManagementToolContainer),d.subscribe({channel:"3dSearch_results_customization",topic:"3dSearch_new_customization_in_localStorage",callback:()=>{this._updateCustomizationSelector()}}),d.subscribe({channel:"3dSearch_results_customization",topic:"3dSearch_customization_deleted_from_localStorage",callback:()=>{this.deletingFromTenantSettings=!0,this._updateCustomizationSelector();let e=n.createWdgAlert();e.inject(widget.body,"top");let t=o.get("AttributesCustomization.apply_settings_delete_customization");e.add({className:"warning applyChangesAlert",message:t})}}),n.removeMask(widget.body)},getTabInputsToStore:function(){var e={SearchAttributesDisplayAdminDefinition:[]},a=l.getCustomizationById(this.activeCustoId);return t.is(a)&&(e=a.exportCustomizationToJSON("SearchAttributesDisplayAdminDefinition")),e.BETAcustomizationEnabled=this.BETAcustomizationEnabled,e},onResetTab:function(e){if(t.is(e)){var a=e.results_attributes_display_customization;if(t.is(a)&&(!0===a.BETAcustomizationEnabled?this.divBETACustomizationToggle.checkFlag=!0:this.divBETACustomizationToggle.checkFlag=!1),t.is(a)&&"Default"===a.active_customization){l.switchActiveCustomization("Default");var r=l.buildUserCustomizationList(),n=r.findIndex(e=>"Default"===e);-1===n&&(n=0),this.activeCustoComboBox.currentValue=r[n],this.custoManagementToolContainer.empty(),this.customizationTool.setup(this,this.custoManagementToolContainer)}}},_setActiveCustomization:function(){var e=l.getActiveCustomization();t.is(e)?t.is(e.customizationId)?this.activeCustoId=e.customizationId:this.activeCustoId=e.getCustomizationId():this.activeCustoId="Default"},_updateCustomizationSelector:function(){var e=l.buildUserCustomizationList(),t=e.findIndex(e=>e===this.activeCustoId);this.activeCustoComboBox.elementsList=e,this.activeCustoComboBox.currentValue=t}}}),define("DS/SearchControlCenter/scripts/SearchcontrolColumnCusto",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/MessageBus/MessageBus","DS/SNInfraUX/Logger","css!DS/SearchControlCenter/SearchControlCenter","DS/SNInfraUX/SearchControlCenterFetchService","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,o,s,c,l,d,u,p){"use strict";var _={importButton:null,fileChooser:null,jsonReader:null,_uploadeJsonFileName:null,displayCustoImportButton:null,displayCustoFileChooser:null,displayCustoJsonReader:null,_displayCustoUploadeJsonFileName:null,_columnCustoMemoryObject:null,_displayNameMemoryObject:null,_showColumnCusto:!1,_showDisplayNameCusto:!1,onRenderFacet:function(t){var a=null;UWA.is(window)&&UWA.is(window.location)&&UWA.is(window.location.search,"string")&&(a=window.location.search.substring(1)),UWA.is(a,"string")&&a.length>0&&a.indexOf("AdminColumnsSearch")>=0&&(this._showColumnCusto=!0),UWA.is(a,"string")&&a.length>0&&a.indexOf("SearchDisplayName")>=0&&(this._showDisplayNameCusto=!0);var r=e.create("div",{class:"search_center_columncusto_main_div",id:"search-type-tab-view-mode"}).inject(t);if(!0===this._showColumnCusto){var o=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r),c=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex",id:"search-type-display-text"}).inject(o);e.create("p",{class:"search_center_right_text",text:d.get("SearchColumnCusto.ImportColumnCusto")}).inject(c);var l=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r);e.create("div",{class:"search_center_div_left_columncusto_chooser search_center_general_display_flex",id:"search-type-display-text"}).inject(l);var u=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"90%",position:"relative"}}).inject(l),h=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{width:"50%",position:"center","margin-left":"5px"}}).inject(l);_.fileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:"Upload Search Column Customization",buttonText:"Browse",events:{onChange:this._onFileInputChange.bind(this)}}).inject(u);var g=this;_.importButton=new i({id:"import_button_id",value:d.get("importButton.title"),className:"default",disabled:!0,events:{onClick:function(){g._OnImportClick(),s.log("inside _OnImportClick() ")}}}).inject(h);var m=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-column-custo-display"}).inject(r),f=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex"}).inject(m);e.create("p",{class:"search_center_right_text",id:"search-column-custo-display-text"}).inject(f)}if(!0===this._showDisplayNameCusto){var C=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r),y=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex",id:"search-type-display-text"}).inject(C);e.create("p",{class:"search_center_right_text",text:d.get("SearchColumnCusto.ImportDisplayNameCusto")}).inject(y);var v=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r);e.create("div",{class:"search_center_div_left_columncusto_chooser search_center_general_display_flex",id:"search-type-display-text"}).inject(v);var b=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"90%",position:"relative"}}).inject(v),S=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{width:"50%",position:"center","margin-left":"5px"}}).inject(v);_.displayCustoFileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:d.get("SearchColumnCusto.UploadDisplayNameCusto"),buttonText:"Browse",events:{onChange:this._onDisplayNameFileInputChange.bind(this)}}).inject(b);g=this;_.displayCustoImportButton=new i({id:"import_button_id",value:d.get("importButton.title"),className:"default",disabled:!0,events:{onClick:function(){g._OnDisplayNameImportClick(),s.log("inside _OnDisplayNameImportClick() ")}}}).inject(S);var x=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-column-custo-display"}).inject(r),D=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex"}).inject(x);e.create("p",{class:"search_center_right_text",id:"search-displayname-custo-display-text"}).inject(D)}p.unmask(widget.body)},_onFileInputChange:function(e){var a=e.target.files[0].name;(this._uploadeJsonFileName=a,t.is(a,"string"))&&("json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(_.jsonReader=new FileReader,_.jsonReader.readAsText(e.target.files[0]),_.importButton.enable()):(_.importButton.disable(),_.fileChooser.clear(),alert(d.get("wrongJsonFileTypeSelectionWarning"))))},_OnImportClick:function(){document.getElementById("search-column-custo-display-text").innerHTML="The column custo file to upload: "+this._uploadeJsonFileName,_.importButton.disable(),u.enableButtons()},_onDisplayNameFileInputChange:function(e){var a=e.target.files[0].name;(this._displayCustoUploadeJsonFileName=a,t.is(a,"string"))&&("json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(_.displayCustoJsonReader=new FileReader,_.displayCustoJsonReader.readAsText(e.target.files[0]),_.displayCustoImportButton.enable()):(_.displayCustoImportButton.disable(),_.fileChooser.clear(),alert(d.get("wrongJsonFileTypeSelectionWarning"))))},_OnDisplayNameImportClick:function(){document.getElementById("search-displayname-custo-display-text").innerHTML="The display name custo file to upload: "+this._displayCustoUploadeJsonFileName,_.displayCustoImportButton.disable(),u.enableButtons()},getTabInputsToStore:function(){t.is(this._uploadeJsonFileName)&&(document.getElementById("search-column-custo-display-text").innerHTML="The column custo file applied: "+this._uploadeJsonFileName,_.importButton.disable()),t.is(this._displayCustoUploadeJsonFileName)&&(document.getElementById("search-displayname-custo-display-text").innerHTML="The display name custo file applied: "+this._displayCustoUploadeJsonFileName,_.displayCustoImportButton.disable()),u.enableRestoreButton();var e={},a={};if(t.is(this._uploadeJsonFileName)?(t.is(_.jsonReader.result)&&t.is(_.jsonReader.result)&&((e=JSON.parse(_.jsonReader.result)).uploadedColumnCustoFileName=this._uploadeJsonFileName),a.searchColumnCustoInputs=e):a.searchColumnCustoInputs=this._columnCustoMemoryObject,t.is(this._displayCustoUploadeJsonFileName)){var r={};t.is(_.displayCustoJsonReader.result)&&t.is(_.displayCustoJsonReader.result)&&((r=JSON.parse(_.displayCustoJsonReader.result)).uploadedDisplayCustoFileName=this._displayCustoUploadeJsonFileName),a.searchDisplayCustoInputs=r}else a.searchDisplayCustoInputs=this._displayNameMemoryObject;return a},onResetTab:function(e){l.getSearchSettings({tenantID:u.platformID}).then(function(e){var a;let r="",n="";if((a=t.is(e,"string")?JSON.parse(e):e).hasOwnProperty("column_custo")){var i=a.column_custo;t.is(i)&&i.hasOwnProperty("searchColumnCustoInputs")&&(_._columnCustoMemoryObject=i.searchColumnCustoInputs,t.is(_._columnCustoMemoryObject)&&t.is(_._columnCustoMemoryObject.uploadedColumnCustoFileName,"string")&&(r=_._columnCustoMemoryObject.uploadedColumnCustoFileName)),t.is(i)&&i.hasOwnProperty("searchDisplayCustoInputs")&&(_._displayNameMemoryObject=i.searchDisplayCustoInputs,t.is(_._displayNameMemoryObject)&&t.is(_._displayNameMemoryObject.uploadedDisplayCustoFileName,"string")&&(n=_._displayNameMemoryObject.uploadedDisplayCustoFileName))}!0===_._showColumnCusto&&(document.getElementById("search-column-custo-display-text").innerHTML=r.trim().length>0?"Current applied custo file: "+r:"There is no custom file applied yet."),!0===_._showDisplayNameCusto&&(document.getElementById("search-displayname-custo-display-text").innerHTML=n.trim().length>0?"Current applied display custo file: "+n:"There is no custom file applied yet.")},function(){}),this._uploadeJsonFileName=null,!0===_._showColumnCusto&&(_.fileChooser.clear(),_.importButton.disable())}};return _}),define("DS/SearchControlCenter/scripts/SearchcontrolExportImport",["UWA/Element","UWA/Core","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/SNInfraUX/Logger","DS/SNInfraUX/SNVocabAccess","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNResultUX/utils/SearchServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SNInfraUX/SearchControlCenterFetchService"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_){"use strict";let h={_importButton:null,_exportButton:null,_fileChooser:null,_jsonReader:null,_postURL:null,_uploadeJsonFileName:null,onRenderFacet:function(t){let i=e.create("div",{class:"scc_main_div",id:"scc_main_div"}).inject(t),o=e.create("div",{id:"search_center_main_div"}).inject(i),s=e.create("div",{class:"search_center_add_bottom_border search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(o);e.create("p",{class:"search_center_text_heading",text:d.get("ImportExport.Import_Search_Configuration")}).inject(s);let c=e.create("div",{class:"search_center_margin",id:"search-type-display"}).inject(o),l=e.create("div",{id:"search-type-display-text"}).inject(c);e.create("p",{text:d.get("ImportExport.Import_Configuration_File")}).inject(l);let p=e.create("div",{class:"search_center_general_display_flex",id:"search-type-display-text"}).inject(c),_=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"30%",position:"relative"}}).inject(p),g=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{position:"center","margin-left":"5px"}}).inject(p);h._fileChooser=new a({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:"Select a file ...",buttonText:"Browse",events:{onChange:this._onFileInputChange.bind(this)}}).inject(_);let m=this;h._importButton=new r({id:"import_button_id",value:d.get("ImportExport.Import_Button.title"),className:"default",disabled:!0,icon:"fonticon fonticon-upload",events:{onClick:function(){m._OnImportClick(),n.log("inside _OnImportClick() ")}}}).inject(g);let f=e.create("div",{id:"search-column-custo-display"}).inject(c),C=e.create("div",{}).inject(f);e.create("p",{text:d.get("ImportExport.Import_Valid_with_Json"),id:"search-column-custo-display-text"}).inject(C);let y=e.create("div",{class:"search_center_import_export_margin",id:"search_center_main_div"}).inject(i),v=e.create("div",{class:"search_center_add_bottom_border search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(y);e.create("p",{class:"search_center_text_heading",text:d.get("ImportExport.Export_Search_Configuration")}).inject(v);let b=e.create("div",{class:"search_center_margin",id:"search-type-display"}).inject(y),S=e.create("div",{class:"search_center_import_export_border",id:"search-type-display-text"}).inject(b);e.create("p",{class:"search_center_export_msgbox_margin",text:d.get("ImportExport.Export_Details_Text")}).inject(S);let x=e.create("div",{class:"search_center_general_tab_div",id:"search-type-display-text"}).inject(b);h._exportButton=new r({id:"Export_button_id",value:d.get("ImportExport.Export_Button.title"),className:"default",icon:"fonticon fonticon-export",events:{onClick:function(){m._OnExportClick(),n.log("inside _OnExportClick() ")}}}).inject(x),u.removeMask(widget.body)},_onFileInputChange:function(e){let a=e.target.files[0].name;if(this._uploadeJsonFileName=a,t.is(a,"string")){"json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(h._jsonReader=new FileReader,h._jsonReader.readAsText(e.target.files[0]),h._importButton.enable()):(h._importButton.disable(),h._fileChooser.clear(),alert(d.get("wrongJsonFileTypeSelectionWarning")))}u.removeMask(widget.body)},_OnImportClick:function(){if(t.is(this._uploadeJsonFileName)&&t.is(h._jsonReader.result)){let e,a=u.decryptData("SCCConfiguration",h._jsonReader.result);try{e=JSON.parse(a)}catch(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("ImportExport.jsonmodified");t.add({className:"error applyChangesAlert",message:a})}t.is(e)&&this._validateImportedFile(e)}h._importButton.disable()},_OnExportClick:function(){let e=u.getSettingsFromDB(),t=JSON.stringify(e),a=u.encryptData("SCCConfiguration",t);this.downloadFile(a,"","application/json")},downloadFile:function(e,a,r){if(!t.is(e))return;if(!t.is(r))return;let n,i=document,o=i.createElement("a"),s=r;if(r=r||"application/octet-stream",r+=";charset=UTF-8,",!a){let e=new Date;a="SCC Export - "+e.getFullYear()+(e.getMonth()+1)+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()+".json"}let l;if(navigator.msSaveBlob&&!c.odtMode)return navigator.msSaveBlob(new Blob(["\ufeff"+e],{type:r}),a);"download"in o?(l=new Blob(["\ufeff"+e],{type:r}),n=URL.createObjectURL(l),o.setAttribute("download",a)):(UWAClient.Engine.safari&&UWAClient.Platform.ios?(l=new Blob(["\ufeff"+e],{type:s}),n=(window.URL?URL:window.webkitURL).createObjectURL(l)):n="data:"+r+"\ufeff"+encodeURIComponent(e),o.setAttribute("target","_blank"),o.setAttribute("download",a)),o.href=n,o.setAttribute("style","display:none;"),i.body.appendChild(o),setTimeout(function(){if(o.click)o.click();else if(document.createEvent){let e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),o.dispatchEvent(e)}i.body.removeChild(o)},100)},_validateImportedFile:function(e){let a=this,r=e;t.is(r)&&u.loadDataSourcesandClasses().then(function(n){u.getAvailableSources();let i=[],o=[],s=!1;if(t.is(n,"array")&&n.forEach(function(e){i.push(e.classInfos)}),t.is(r)){let n={facetID:"SearchControl_General"};n.settingsJSON=r;u.getSettingsJSONFromTabName(n);n.facetID="SearchControl_6WTags";u.getSettingsJSONFromTabName(n);n.facetID="SearchControl_SearchTypes";let c=u.getSettingsJSONFromTabName(n);if(c.hasOwnProperty("type_custo")){let e=c.type_custo;if(!0===e.type_display){if(t.is(e.default_datasourceandtype)&&e.default_datasourceandtype.length>0){let a=e.default_datasourceandtype[0].source;if(t.is(a)){let e=u.getVocabID(a);t.is(e)||o.push(a)}}if(e.hasOwnProperty("easyTypeAccess")){e.easyTypeAccess.forEach(function(e){let t=e.uri,a=e.source;for(let e=0;e<i.size;e++)if(u.getVocabID(a)===i[e][0].service){i[e].findIndex(function(e){if(e.uri===t&&u.getVocabID(a)===e.service)return!0})<0&&o.push(t);break}})}if(e.hasOwnProperty("excluded_types")){e.excluded_types.forEach(function(e){let t=e.uri,a=e.source;for(let e=0;e<i.size;e++)if(u.getVocabID(a)===i[e][0].service){i[e].findIndex(function(e){if(e.uri===t&&u.getVocabID(a)===e.service)return!0})<0&&o.push(t);break}})}}}if(c.hasOwnProperty("attribute_custo")){let r=c.attribute_custo;if(r.hasOwnProperty("ds6w:type")){let n=r["ds6w:type"];if(t.is(n,"array")&&n.length>1){let r=n.length,c=[];for(let e=1;e<r;e++){let a=n[e];if(t.is(a)){let e=a.uri,t=a.source;for(let r=0;r<i.size;r++)if(u.getVocabID(t)===i[r][0].service){i[0].findIndex(function(r){if(r.uri===e&&u.getVocabID(t)===r.service)return c.push(a),!0})<0&&o.push(e);break}}}c.length&&(s=!0,Promise.all(a._loadPredicatesOfTypes(c)).then(function(t){let r=c,n=t.length;for(let e=0;e<n;e++)r[e].uri===t[e].type&&r[e].predicates.forEach(function(a){let r=a.uri;t[e].vocabularyPredicateInfo.findIndex(function(e){if(e.uri===r)return!0})<0&&o.push(r)});a._manageImport(o,e)}))}}}!1===s&&a._manageImport(o,e)}})},_loadPredicatesOfTypes:function(e){let t=[],a=u.getPlatformID();return e.forEach(e=>{e.uri&&t.push(new Promise((t,r)=>{i.loadRelevantPredicates({className:e.uri,tenantId:a},t)}))}),t},_manageImport:function(e,a){let r=this;if(t.is(e,"array")&&e.length>0){let t="";t+="<br>"+d.get("ImportExport.Import_Failed_Message")+"<br><br>",e.forEach(function(e){t+="&nbsp;&nbsp;&nbsp;&nbsp;"+e+"<br>"}),p.modal({title:d.get("ImportExport.Import_Error"),content:t,visibleFlag:!0,CB:[{buttonKind:"YES",label:d.get("ImportExport.yesButton"),function:()=>{p.destroyModal()}}]})}else r._importIntoDB(a)},_importIntoDB:function(e){s.getServiceUrl({serviceName:"3DSpace",platformId:u.platformID,onComplete:function(t){if(UWA.is(t,"string")){h._postURL=t+"/resources/SNAPI/infra_services/searchsettings?tenant="+u.platformID;let a=e,r={timeout:5e4,method:"POST",data:JSON.stringify(a),type:"json",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(){u.updateMemoryModel(e),_._searchControlCenterSettingsJSONFromDB=a;let t=u.createWdgAlert();t.inject(widget.body,"top");let r=d.replace(d.get("ImportExport.successmsg"),{tenant_name:u.platformDisplayName});t.add({className:"success applyChangesAlert",message:r})},onFailure:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("ImportExport.failuremsg");a+=e,t.add({className:"error applyChangesAlert",message:a})},onTimeout:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("SearchInfra.timeoutmsg");a+=e,t.add({className:"error applyChangesAlert",message:a})}};o.authenticatedRequest(h._postURL,r)}},onFailure:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})},getTabInputsToStore:function(){},onResetTab:function(e){}};return h}),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils",["UWA/Core","UWA/Class","UWA/Promise","UWA/Class/Collection","DS/WAFData/WAFData","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNInfraUX/TaggerConfigAccess","DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_){"use strict";return t.singleton({init:function(){let t=s.getOption("rootWConcepts"),i=s.getOption("concepts_rootW_Mapping"),o=new r([],{model:p}),l=new r([],{model:p}),u=new Map,h=new Map,g=[],m=[],f=[],C=[],y=[],v=[],b=[],S=[],x=[],D={},T=[],w=null,A=null,I={};this.hasConcepts=function(){return o.length>0},this.getConcept=function(e){return o.get(e)},this.getCurrentConceptCollection=function(){return o},this.getOldConceptCollection=function(){return l},this.getConceptsInfo=function(){return D},this.getRenamedConcepts=function(){if(g.length>0)return g},this.getMovedConcepts=function(){if(m.length>0)return m},this.getDuplicateConcepts=function(){if(f.length>0)return f},this.getNewConcepts=function(){if(C.length>0)return C},this.getDeletedConcepts=function(){if(y.length>0)return y},this.getUnDeprecatedConcepts=function(){if(S.length>0)return S},this.getDeprecatedConcepts=function(){x=[],S=[];let e=b.length,t=v.length;if(e>0?b.forEach(function(e){v.forEach(function(t){e.getLabel()!=t.getLabel()&&x.push(t)})}):x=v,e>t&&b.forEach(function(e){t>0?v.forEach(function(t){e.includes(t)||S.push(e)}):S=b}),x.length>0)return x},this.isConceptAvailable=function(e){if("string"==typeof e&&e)return h.has(e.toLowerCase())};let N=function(e){let t=new p({id:e.shortURI,uri:e.uri,label:e.label}),a=e.types;return Array.isArray(a)||(a=[]),t.set("types",a),-1!==a.indexOf("ds6wclassifier:Tag")&&t.setAsTaggable(),-1!==a.indexOf("owl:DeprecatedClass")&&t.setAsDeprecated(),u.set(e.label,!0),h.set(e.label.toLowerCase(),!0),t};this.SetDeprecatedConcepts=function(){b=v,v=[],o.forEach(function(e){!0===e.isDeprecated()&&v.push(e)})},this._parseConceptsInfo=function(e,a,n){try{a=UWA.is(a,"string")?JSON.parse(a):a,D=a,l=o,o=function(e){let a=new r([],{model:p});return e.forEach(function(e){let r=a.get(e.shortURI);if(r)throw new Error(e.shortURI+" is already available from "+r.get("uri"));if(r=N(e),a.add(r),UWA.is(e.broader,"array")){let n=e.broader[0].shortURI;1==e.broader.length&&"ds6wclassifier:Root"===n?(r.setAsRootWConcept(),r.set("rootW",i[r.id.toLowerCase()])):e.broader.forEach(function(e){n=e.shortURI;let i=a.get(n);i||(i=N(e),a.add(i)),i.addNarrowerConcept(r),i.canBeTagged()&&r.setAsTaggable(),-1!=t.indexOf(i.id.toLowerCase())&&r.setAsRootConcept()})}}),a}(a),n(a)}catch(e){console.log("FAILED to parse /3drdfpersist/resources/v1/ontologies/ response"),n([])}};let j=!0;this.CompareDataSets=function(t,a){if(g=[],C=[],y=[],m=[],f=[],0===t.length)return console.log("No previous Dataset To compare"),!0;if(t.length===a.length)t.forEach(function(t){a.forEach(function(a){if(t.get("label")!=a.get("label")&&t.get("uri")===a.get("uri")){let e={original_concept:t,renamed_concept:a};g.push(e)}if(t.getBroaderConcept().length>0&&t.get("uri")===a.get("uri")){if(!e.is(a.getBroaderConcept())&&a.getBroaderConcept().length>0)console.log("Father movement");else if(e.is(t.getBroaderConcept())&&t.getBroaderConcept().length>0&&t.getBroaderConcept().at(0).getURI()!=a.getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t,previous_father:t.getBroaderConcept().at(0),current_father:a.getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}}else if(e.is(t)&&t.get("label")===a.get("label")&&t.getURI()!=a.getURI()&&e.is(t.getBroaderConcept())&&a.getBroaderConcept().length>0&&e.is(t.getBroaderConcept())&&a.getBroaderConcept().length>0&&t.getBroaderConcept().at(0).getLabel()===a.getBroaderConcept().at(0).getLabel()){let e={org_concept:t,duplicate:a};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}})});else if(a.length>t.length)for(let r=0;r<a._models.length;r++){let n=!1;for(let i=0;i<t._models.length;i++){if(t._models[i].get("label")!=a._models[r].get("label")&&t._models[i].get("uri")===a._models[r].get("uri")){let e={original_concept:t._models[i],renamed_concept:a._models[r]};g.push(e)}if(e.is(t._models[i])&&t._models[i].get("label")===a._models[r].get("label")&&t._models[i].getURI()!=a._models[r].getURI()&&e.is(t._models[i].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&e.is(a._models[r].getBroaderConcept())&&a._models[r].getBroaderConcept().length>0&&t._models[i].getBroaderConcept().at(0).getLabel()===a._models[r].getBroaderConcept().at(0).getLabel()){let e={org_concept:t._models[i],duplicate:a._models[r]};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}if(t._models[i].get("uri")===a._models[r].get("uri")){if(n=!0,e.is(t._models[i])&&t._models[i].get("uri")===a._models[r].get("uri"))if(!e.is(a._models[r].getBroaderConcept())&&a._models[r].getBroaderConcept().length>0)console.log("Father Removed");else if(e.is(t._models[i].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&t._models[i].getBroaderConcept().at(0).getURI()!=a._models[r].getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t._models[i],previous_father:t._models[i].getBroaderConcept().at(0),current_father:a._models[r].getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}break}}n||C.push(a._models[r])}else if(a.length<t.length)for(let r=0;r<t._models.length;r++){let n=!1;for(let i=0;i<a._models.length;i++){if(t._models[r].get("label")!=a._models[i].get("label")&&t._models[r].get("uri")===a._models[i].get("uri")){let e={original_concept:t._models[r],renamed_concept:a._models[i]};g.push(e)}if(e.is(t._models[r])&&t._models[r].get("label")===a._models[i].get("label")&&t._models[r].getURI()!=a._models[i].getURI()&&e.is(t._models[r].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&e.is(a._models[i].getBroaderConcept())&&a._models[i].getBroaderConcept().length>0&&t._models[r].getBroaderConcept().at(0).getLabel()===a._models[i].getBroaderConcept().at(0).getLabel()){let e={org_concept:t._models[r],duplicate:a._models[i]};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}if(t._models[r].get("uri")===a._models[i].get("uri")){if(n=!0,t._models[r].getBroaderConcept().length>0&&t._models[r].get("uri")===a._models[i].get("uri"))if(e.is(a._models[i].getBroaderConcept())){if(e.is(t._models[r].getBroaderConcept())&&t._models[r].getBroaderConcept().length>0&&t._models[r].getBroaderConcept().at(0).getURI()!=a._models[i].getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t._models[r],previous_father:t._models[r].getBroaderConcept().at(0),current_father:a._models[i].getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}}else console.log("Father movement");break}}n||(y.push(t._models[r]),j=!1)}return j};let W=function(t){let a=t;return I[a]||(I[a]=new Promise(function(a,r){let n=e.is(_.platformID)?_.platformID:c.getActiveTenant();d.getServiceUrl({serviceName:t,platformId:n,onComplete:function(e){e?a(e):r()},onFailure:function(e){r(e)}})})),I[a]};function O(t){let r=e.is(_.platformID)?_.platformID:c.getActiveTenant(),i=[],o=[],s=[];return new a(function(c,l){t.forEach(function(t){let i={massive:!0,predicate:t.predicate,literalValue:t.literal,tenant:r};s.push(function(t){return new a(function(a,r){let i={method:"DELETE",type:"text",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){let r={tag:t.literalValue,status:"deleted"};a(r)},onFailure:function(){let e={tag:t.literalValue,status:"rejected"};r(e)},onTimeout:function(){r("TIMEOUT during delete company tag for "+t.literalValue)}};console.log("Sending delete manual tag request"),n.authenticatedRequest(w+"/resources/6w/tags?"+e.Utils.toQueryString(t),i)})}(i))}),a.allSettled(s).then(function(e){let t=e.length;e.forEach(function(e){"rejected"===e.value.status&&o.push(e.value.tag),"deleted"===e.value.status&&i.push(e.value.tag)}),o.length>0&&console.log("Deletetion of tags failed for "+o.length+" tags"),i.length>0&&console.log("Succewssfull deletetion of "+i.length+" tags"),t===o.length&&console.log("All tags failed to delete"),t===i.length&&console.log("All tags deleted successfully"),c(i,o)})})}this.getOntologyConceptsFromSessionId=function(e){let t=this;return console.log("Creating a new promise to retrive concepts for applicativeId="+e[0].applicativeId+", and datasetTitle="+e[0].datasetTitle),new a(function(a){W("ontology").then(function(r){if(r.length>0){var i={method:"GET",headers:{Accept:"application/json"},url:r+"/3drdfklet/resources/v2/ontologies/concepts?recurse=all&applicativeId="+e[0].applicativeId,onComplete:function(r){t._parseConceptsInfo(e[0].applicativeId,r,a),SetDeprecatedConcepts(),t.CompareDataSets(l,o),a()},onFailure:function(){console.log(`FAILED to retrieve concents in applicativeId=${e[0].applicativeId}`),a([])}};n.authenticatedRequest(i.url,i)}else console.log("_getSericeURL did not provide data in expected format"),a([])},function(){console.log("_getSericeURL FAILED"),a([])})})},this.deleteTags=function(t){var r=[];return new a(function(a,n){let i=20;var o=[];t.forEach(function(t){e.is(t)&&"fullfilled"===t.state&&UWA.is(t.value.tags,"array")&&t.value.tags.length>0&&(o=o.concat(t.value.tags))}),function e(){let t=o.splice(0,i);t.length>0?O(t).then(function(t,a){e();let n={successdelete:t,failuredelete:a};r.push(n)}):a(r)}()})},this.deleteExistingManualCompanyTags=function(){let e=this,t=["ds6w:whatCompanyTag","ds6w:whereCompanyTag","ds6w:whoCompanyTag","ds6w:whenCompanyTag","ds6w:whyCompanyTag","ds6w:howCompanyTag"];return new a(function(r,n){W("6WTags").then(function(i){w=i,console.log("Tags url = "+w),W("3DSpace").then(function(n){A=n,console.log("Space url = "+A);let i=[];t.forEach(function(t){i.push(e.getTagsForWPromise(t,w)),i.push(e.getTagsForWPromise(t,A))}),a.allSettled(i).then(function(t){console.log("Need to call delete tags now"),e.deleteTags(t).then(function(e){r(e)})})},function(){console.log("_getSericeURL for 3DSpace FAILED"),n("_getSericeURL for 3DSpace FAILED")})},function(){console.log("_getSericeURL for 6WTags FAILED"),n("_getSericeURL for 6WTags FAILED")})})},this.getTagsForWPromise=function(t,r){return new a(function(a,i){let o={method:"GET",type:"text",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(r){T=[];let n=JSON.parse(r);e.is(n)&&UWA.is(n.data,"array")&&n.data.forEach(function(e){UWA.is(n.data[0].tag,"array")&&e.tag.forEach(function(e){let t={predicate:e.predicate,literal:e.object.literal};T.push(t)})}),console.log("Fetched Company tags for : "+t),a({tags:T,fetchStatus:"success"})},onFailure:function(e){console.log("FAILED to retrieve company tags for:  "+t),i({tags:e,fetchStatus:"failure"})},onTimeout:function(){console.log("TIMEOUT during get comopany tags for: "+t),i("TIMEOUT during get comopany tags")}},s=e.is(_.platformID)?_.platformID:c.getActiveTenant(),l={predicate:t,literalValue:"*",tenant:s};n.authenticatedRequest(r+"/resources/6w/tags?"+e.Utils.toQueryString(l),o)})}}}).init()}),define("DS/SearchControlCenter/scripts/SearchControlCenterInfra",["UWA/Element","UWA/Core","UWA/Promise","DS/UIKIT/Input/Button","DS/UIKIT/Accordion","DS/WAFData/WAFData","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/3DSearchControl_UIsettings.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchControlCenterFetchService","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/UIKIT/Alert","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchPreferences","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_,h,g,m,f,C,y){"use strict";return{url3DSpacepromise:a.deferred(),CSVpromise:a.deferred(),initInfraPromise:a.deferred(),_postURL:null,_listOfFacets:[],_listOfFacetNames:[],uiRefresh:function(){this._listOfFacetNames.length>0?this._OnResetClick():this.init()},initInfra:function(){var e=this,a={onComplete:function(){var a={tenantID:_.platformID,key:"SCC_UI"};p.getSearchSettings(a).then(function(a){var r;r=t.is(a,"string")?JSON.parse(a):a,h.setSettingsJSON(r),e.initInfraPromise.resolve()},function(t){y.unmask(widget.body),e.initInfraPromise.reject();var a=_.createWdgAlert();a.inject(widget.body,"top");var r=s.get("SearchInfra.failuremsg");r+=t,a.add({className:"error",message:r})})},onFailure:function(){e.initInfraPromise.reject(),y.unmask(widget.body),l.log("Login fails !!")}};return a.tenantID=widget.getValue("x3dPlatformId"),t.is(a.tenantID)&&""!==a.tenantID||(a.tenantID="OnPremise"),g.getServiceUrl({serviceName:"3DSearch",platformId:a.tenantID,onComplete:function(e){var r;t.is(e,"array")?r=e[0].url:t.is(e,"string")&&(r=e),t.is(r)&&(a.fedSearchURL=r),t.is(a.tenantID,"string")&&(d.login(a),_.setPlatformID(a.tenantID))},onFailure:function(e){var t=_.createWdgAlert();t.inject(widget.body,"top");var a=s.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error",message:a})}}),g.getPlatformConfig({serviceName:"3DSpace",onComplete:function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.platformId===a.tenantID){_.setPlatformDisplayName(r.displayName);break}}}}),this.initInfraPromise.promise},getDefaultPredicates:function(){var e=[],a=!1,r=C.getLocalStorageItem("TagNavigator-simplifiedTagger");return t.is(r)&&"true"===r&&(a=!0),a&&e.push({uri:"computedCountryInfo"}),e.push({uri:"ds6w:dataSource"}),e.push({uri:"ds6w:type"}),a||e.push({uri:"ds6w:category"}),e.push({uri:"ds6w:modified"}),a&&e.push({uri:"ds6w:created"}),e.push({uri:"ds6w:lastModifiedBy"}),e.push({uri:"ds6w:responsible"}),e},check3DSpaceAvailablity:function(){var e=widget.getValue("x3dPlatformId");t.is(e)&&""!==e||(e="OnPremise");var a=this;return g.getServiceUrl({serviceName:"3DSpace",platformId:e,onComplete:function(e){if(t.is(e))a.url3DSpacepromise.resolve(e);else{var r=new Error("no platform");a.url3DSpacepromise.reject(r)}},onFailure:function(){var e=new Error("no platform");a.url3DSpacepromise.reject(e)}}),this.url3DSpacepromise.promise},checkCSVAvailability:function(){var e=this;return f.getGrantedRoles(function(t){for(var a=!1,r=0;r<t.length;r++)if("CSV"===t[r].id){a=!0;break}if(a)e.CSVpromise.resolve(t);else{var n=new Error("no access");e.CSVpromise.reject(n)}}),this.CSVpromise.promise}}}),define("DS/SearchControlCenter/Views/SearchControlCenterLayoutView",["UWA/Core","UWA/Class/View","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Alert","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchControlCenterFetchService","DS/SearchControlCenter/scripts/SearchControlCenterInfra","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","text!DS/SearchControlCenter/assets/SearchControlCenter_defaults.json","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/WAFData/WAFData","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_,h,g,m,f){"use strict";var C=t.extend({tagName:"div",className:"generic-detail",_postURL:null,_sccDefaultSettings:null,_containerSpan:null,init:function(e){e&&(this.model=e.model),this._parent.call(this,e),i.getPredicatesList(),i.loadDataSourcesandClasses()},setup:function(t){e.log("SCCLayoutView::setup!"),e.log(t)},render:function(){e.log("SCCLayoutView::render");var t=this;t._containerSpan=new e.Element("div",{class:"search_center_scroll",id:"search-control-center-general"}),t._containerSpan.inject(t.container),t._containerSpan.classList.add("search_center_container"),f.mask(widget.body),require([t.model._attributes.facetJS],function(e){e.onRenderFacet(t._containerSpan);let a={facetID:t.model._attributes.id};var r=i.getSettingsJSONFromTabName(a);e.onResetTab(r),i.disableButtons()});var a=new e.Element("div",{class:"search-control-buttonContainer"});a.inject(t.container);var n=new r({id:"id_in_app_apply",value:p.get("ApplyButton.title"),className:"default  primary in_app_search_center_btn",events:{onClick:function(){t._OnApplyClick(!1),h.log("inside _OnApplyClick() ")}}}).inject(a,"bottom"),o=new r({id:"id_in_app_cancel",value:p.get("CancelButton.title"),className:"default in_app_search_center_btn",events:{onClick:function(){t._OnCancelClick(),h.log("inside _OnCancelClick() ")}}}).inject(a);new r({id:"id_in_app_restore",value:p.get("RestoreButton.title"),className:"default in_app_search_center_btn search_center_button_right_margin",events:{onClick:function(){t._OnResetClick(),h.log("inside _OnResetClick() ")}}}).inject(a);return i.updateButtons(n,o),i.disableButtons(),this},_OnCancelClick:function(){i.reSetButtonStatus();var e=this;require([e.model._attributes.facetJS],function(t){var a={facetID:e.model._attributes.id},r=i.getSettingsJSONFromTabName(a);t.onResetTab(r),i.disableButtons()})},_OnApplyClick:function(t){i.reSetButtonStatus();var a=this,r=t;require([a.model._attributes.facetJS],function(t){var n=t.getTabInputsToStore();if(e.is(n)){var s=a.model._attributes.id,d={};"SearchControl_SearchTypes"===s?d=n:d[s]=n,l.updateSettingsJSON(d)}i.disableButtons(),c.getServiceUrl({serviceName:"3DSpace",platformId:i.platformID,onComplete:function(t){if(e.is(t,"string")){C._postURL=t+"/resources/SNAPI/infra_services/searchsettings?tenant="+i.platformID;var n=null;r?(n=a._sccDefaultSettings,!0!==g.getOption("allowEnterpriseDictionaryModification")&&(n.enterprise_ontology=l.gateSettingsJSON().enterprise_ontology)):n=l.gateSettingsJSON();var s={timeout:5e4,method:"POST",data:JSON.stringify(n),type:"json",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(){if(r){a._updateMemoryModel(),(t=i.createWdgAlert()).inject(widget.body,"top");var e=p.replace(p.get("SearchInfra.restoreToDefaultsuccessmsg"),{tenant_name:i.platformDisplayName});t.add({className:"success applyChangesAlert",message:e})}else{var t;o._searchControlCenterSettingsJSONFromDB=l._searchControlCenterSettingsJSON,(t=i.createWdgAlert()).inject(widget.body,"top");e=p.replace(p.get("SearchInfra.successmsg"),{tenant_name:i.platformDisplayName});t.add({className:"success applyChangesAlert",message:e})}a._updateUI()},onFailure:function(e){if(r){(a=i.createWdgAlert()).inject(widget.body,"top");var t=p.get("SearchInfra.restoreToDefaultfailuremsg");t+=e,a.add({className:"error applyChangesAlert",message:t})}else{var a;(a=i.createWdgAlert()).inject(widget.body,"top");t=p.get("SearchInfra.failuremsg");t+=e,a.add({className:"error applyChangesAlert",message:t})}},onTimeout:function(e){var t=i.createWdgAlert();t.inject(widget.body,"top");var a=p.get("SearchInfra.timeoutmsg");a+=e,t.add({className:"error applyChangesAlert",message:a})}};require(["DS/SNInfraUX/SearchSettings"],function(e){(e.getOption("ODTLogs")||e.getOption("ODTLogs-SCCSettings"))&&h.warn("ODTLogs-SCCSettings:"+JSON.stringify(s))}),_.authenticatedRequest(C._postURL,s)}},onFailure:function(e){var t=i.createWdgAlert();t.inject(widget.body,"top");var a=p.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})})},_OnResetClick:function(){var t=this;f.modal({title:p.get("SearchInfra.restoreToDefaultHeader"),content:p.replace(p.get("SearchInfra.restoreToDefaultConfirmationmsg"),{tenant_name:i.platformDisplayName}),visibleFlag:!0,CB:[{buttonKind:"YES",label:p.get("SearchInfra.yesButton"),function:()=>{t._sccDefaultSettings=JSON.parse(d);let a=t._sccDefaultSettings.attribute_custo;a["ds6w:type"]=[];var r=a["ds6w:type"];let n=t._getdefault3DSearchPredicate();r.push(n),e.is(t._sccDefaultSettings)&&t._OnApplyClick(!0),f.destroyModal()}},{buttonKind:"cancel",label:p.get("SearchInfra.noButton")}]})},_updateMemoryModel:function(){var e=this;e._sccDefaultSettings&&(l.setSettingsJSON(e._sccDefaultSettings),o._searchControlCenterSettingsJSONFromDB=e._sccDefaultSettings,require([e.model._attributes.facetJS],function(t){var a={facetID:e.model._attributes.id},r=i.getSettingsJSONFromTabName(a);t.onResetTab(r),i.disableButtons()}))},_updateUI:function(){let t=this;require([t.model._attributes.facetJS],function(a){if(e.is(a)&&e.is(a.onUpdateUI,"function")){let e=t.model._attributes.id;a.onUpdateUI(e)}})},_getdefault3DSearchPredicate:function(){let e={};return e.source="AllDataSourcesandTypes",o.getAppWisePredicates(m.getSearchAppId(),!0).then(t=>{let a=[];t.hasOwnProperty("preferred_predicates")&&t.preferred_predicates.length>0&&(a=t.preferred_predicates),null!=a&&(e.predicates=a)}),e},destroy:function(){this.stopListening(),this._parent.apply(this,arguments)}});return C}),define("DS/SearchControlCenter/scripts/SearchControlCenterWidget",["UWA/Core","UWA/Class/Model","UWA/Class/Collection","UWA/Class/View","WebappsUtils/WebappsUtils","DS/W3DXComponents/Skeleton","DS/W3DXComponents/ContentSet","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SearchControlCenter/Views/SearchControlCenterLayoutView","DS/SearchControlCenter/scripts/SearchControlCenterInfra","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,a,r,n,i,o,s,c,l,d,u){"use strict";var p={bones:null,height:"auto",licenceAlert:null,unMaximizedHeight:null,generalViewOpts:{contents:{useInfiniteScroll:!1,usePullToRefresh:!1}},setBodyHeight:function(e){e&&("auto"!==e&&(e+="px"),widget.body.setStyle("height",e))},buildSkeleton:function(){var t=c;return new i({domains:{collection:"DS/SearchControlCenter/Collection/SearchControlCenterFacetListCollection",view:null,swipe:!1,viewOptions:p.generalViewOpts,idCardOptions:{actions:function(){return null},facets:function(){return[{text:"Edit",icon:"tools",handler:i.getRendererHandler(t)}]}}}},{root:"domains",startRoute:"/domains/SearchControl_General/?facet=0",useRootChannelView:!1,responsiveTrigger:function(){var e=widget.getView().type;return"channel"===widget.getValue("view")&&("maximized"===e||"fullscreen"===e)},events:{onItemClick:function(t){e.log(t)},onSlide:function(t,a){e.log(t),e.log(a)}}})},onLoad:function(){function t(e){var t=d.createWdgAlert();t.options.autoHide=!1,t.inject(widget.body,"top"),t.add({className:"warning",message:e})}p.bones&&p.bones.destroy(),d.putMask(widget.body),l.check3DSpaceAvailablity(),l.checkCSVAvailability(),l.initInfra().then(function(a){l.check3DSpaceAvailablity().then(function(a){l.checkCSVAvailability().then(function(t){var a="";a=d.getPlatformID(),e.is(a)&&""!==a||(a=e.is(widget.getValue("x3dPlatformId"))?widget.getValue("x3dPlatformId"):"OnPremise",d.setPlatformID(a)),widget.setTitle(a),s.getServiceUrl({serviceName:"3DSpace",platformId:a,onComplete:function(e){d.setURL(e),p.bones=p.buildSkeleton(),widget.body.setContent(p.bones.render())},onFailure:function(e){var t=d.createWdgAlert();t.inject(widget.body,"top");var a=u.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})},function(e){t(u.get("html.license"))})},function(e){t(u.get("html.platform"))}),d.removeMask(widget.body)},function(e){t(u.get("html.InitInfra")),d.removeMask(widget.body)})},onRefresh:function(e){this.onLoad()},onViewChange:function(e){}};return p}),define("DS/SearchControlCenter/scripts/SCCSynonymsDictonary",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/SNResultUX/utils/ExternalComponentHelpers","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,a,r,n,i,o,s){"use strict";return{importButton:null,fileChooser:null,checkboxActivateSynonyms:null,jsonReader:null,newSynonymsToStore:null,storedSynonyms:null,onRender:function(c){var l=this,d=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-search_synonyms-text"}).inject(c);e.create("p",{class:"search_center_text_heading",text:o.get("GeneralTab.SearchSynonyms.title")}).inject(d);var u=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-abbreviated-count"}).inject(c),p=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-synonyms-toggle"}).inject(u);this.checkboxActivateSynonyms=new a({type:"switch",label:o.get("GeneralTab.SearchSynonyms.checkbox.label"),className:"primary",touchMode:!0}).inject(p),this.checkboxActivateSynonyms.addEventListener("change",function(){!t.is(l.storedSynonyms)&&l.checkboxActivateSynonyms.checkFlag||s.enableButtons(),l._setBrowseFileState(l.checkboxActivateSynonyms.checkFlag)},!1);var _=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(u);i.tooltip(_,{position:"top",shortHelp:o.get("GeneralTab.SearchSynonyms.checkbox.info")}),this.divFileChooserSpan=e.create("div",{class:"search_center_margin search_center_disable",id:"div-file-chooser-span"}).inject(c);var h=e.create("div",{class:"",id:"div-file-chooser-lable"}).inject(this.divFileChooserSpan),g=(e.create("p",{class:"search_center_text",text:o.get("GeneralTab.SearchSynonyms.FileChooser.label"),styles:{}}).inject(h),e.create("div",{class:"search_center_div_left search_center_div_uidisplay search_center_general_display_flex",id:"search-type-display"}).inject(this.divFileChooserSpan)),m=e.create("div",{class:" ",id:"search-synonyms-file-chooser",styles:{width:"85%",position:"relative"}}).inject(g);this.fileChooser=new r({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.new"),buttonText:o.get("GeneralTab.SearchSynonyms.FileChooser.buttonText"),events:{onChange:this._onFileInputChange.bind(this)}}).inject(m);var f=e.create("div",{class:"",id:"search-synonyms-file-import",styles:{"margin-left":"5px","margin-right":"5px",width:"15%",position:"center"}}).inject(g),C=this;this.importButton=new n({id:"import_button_id",value:o.get("GeneralTab.SearchSynonyms.FileChooser.validate"),className:"default",disabled:!0,events:{onClick:function(){C._onImportClick()}}}).inject(f)},_onFileInputChange:function(e){var a=e.target.files[0],r=a.name;t.is(r,"string")&&("json"===r.slice(2+(r.lastIndexOf(".")-1>>>0))?t.is(this.storedSynonyms)?this._confirmAndReadFileAsText(a):this._readFileAsText(a):(this.importButton.disable(),this.fileChooser.clear(),this._showAlert(o.get("GeneralTab.SearchSynonyms.errors.JsonOnly"),"error")))},_onImportClick:function(){try{this._isValidJson(this.jsonReader)&&(s.enableButtons(),this._showAlert(o.get("GeneralTab.SearchSynonyms.success.ValidJson"),"success"))}catch(e){this.fileChooser.clear(),this._showAlert(e.message,"error")}this.importButton.disable()},_isValidJson:function(e){var a=null;if(!t.is(e.result))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.InvalidJson"));try{a=JSON.parse(e.result)}catch(e){throw new Error(o.get("GeneralTab.SearchSynonyms.errors.ParsingError"))}if(!t.is(a,"object"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"));return Object.keys(a).forEach(function(e){if(!t.is(a[e],"array"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"));a[e].forEach(e=>{if(!t.is(e,"string"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"))})}),this.newSynonymsToStore=a,!0},updateTabInputsToStore:function(e){let a={};a.activateSnonyms=this.checkboxActivateSynonyms.checkFlag,a.synonyms=t.is(this.newSynonymsToStore)?this.newSynonymsToStore:this.storedSynonyms,e.search_synonyms=a},onResetTab:function(e){if(t.is(e)){var a=e.activateSnonyms;this.storedSynonyms=e.synonyms,this.checkboxActivateSynonyms.checkFlag=a,t.is(this.storedSynonyms)&&(this.fileChooser.elements.textfield.placeholder=o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.override"))}else this.fileChooser.elements.textfield.placeholder=o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.new"),this.checkboxActivateSynonyms.checkFlag=!1,this.storedSynonyms=null;this.fileChooser.clear(),this.importButton.disable()},_showAlert:function(e,t){var a=s.createWdgAlert();a.inject(widget.body,"top"),a.add({className:t,message:e})},_readFileAsText:function(e){"undefined"!=typeof FileReader&&(this.jsonReader=new FileReader,this.jsonReader.readAsText(e),this.importButton.enable())},_confirmAndReadFileAsText:function(e){var t=this;i.modal({title:o.get("GeneralTab.SearchSynonyms.warning.header"),content:o.get("GeneralTab.SearchSynonyms.warning.body"),CB:[{buttonKind:"YES",label:o.get("GeneralTab.SearchSynonyms.warning.button.Yes"),function:()=>{t._readFileAsText(e),i.destroyModal()}},{buttonKind:"no",label:o.get("GeneralTab.SearchSynonyms.warning.button.No"),function:()=>{t.fileChooser.clear(),t.importButton.disable(),i.destroyModal()}}]})},_setBrowseFileState:function(e){!0===e?this.divFileChooserSpan.removeClassName("search_center_disable"):this.divFileChooserSpan.addClassName("search_center_disable")}}}),define("DS/SearchControlCenter/scripts/ControlledVocabulary/ControlledVocabularyServices",["UWA/Core","UWA/Promise","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/WAFData/WAFData","DS/SNInfraUX/SearchUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t,a,r,n,i,o){"use strict";return{_tenantOntologies:{},_tenantCommunities:{},_fetchSwymCommunities:function(e,t){var a=this;let r=i.getPlatformID(),n=this._tenantCommunities[r];return n||(n=new Promise(function(e){a._apiCalltoFetchSwymCommunities(function(t){e(t)},function(t){e([])})}),this._tenantCommunities[r]=n),n},_apiCalltoFetchSwymCommunities:function(t,a){let s=i.getPlatformID();o.getServiceUrl({serviceName:"3DSearch",platformId:s,onComplete:function(i){!function(i){var o={label:"3DSearch-"+n.getUserId()+"-"+(new Date).getTime(),query:'[ds6w:type]:"swym:Community"',with_nls:!1,with_synthesis:!1,with_synthesis_hierarchical:!1,with_indexing_date:!1,select_file:[],source:["swym"],select_predicate:["ds6w:label"],tenant:s,nresults:1e3,refine:{},specific_source_parameter:{}},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:e.Json.encode(o),url:i+"/search",onComplete:function(e){try{e=JSON.parse(e)}catch(t){e=t}return t(e.results)},onFailure:function(e){try{e=JSON.parse(e)}catch(t){e=t}return a(e)}};r.authenticatedRequest(c.url,c)}(i)},onFailure:function(){a("FAILED to retrieve 3DSearch url for tenant")}})},_fetchOntologies:function(){let e=this,t=i.getPlatformID();var a=this._tenantOntologies[t];return a||(a=new Promise(function(t){e._apiCalltoFetchOntologies(function(e){t(e)},function(e){t([])})}),this._tenantOntologies[t]=a),a},_apiCalltoFetchOntologies:function(e,t){var a=i.getPlatformID();o.getServiceUrl({serviceName:"ontology",platformId:a,onComplete:function(a){!function(a){var n={method:"GET",headers:{Accept:"application/json"},url:a+"/3drdfpersist/resources/v1/ontologies",onComplete:function(t){try{t=JSON.parse(t)}catch(e){t=e}return e(t)},onFailure:function(e){try{e=JSON.parse(e)}catch(t){e=t}return t(e)}};r.authenticatedRequest(n.url,n)}(a)},onFailure:function(){resolve([])}})}}}),define("DS/SearchControlCenter/scripts/ControlledOntology/OntologyDatasetsHelpers",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Promise","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/Api/SearchApi","DS/SNInfraUX/SearchRessources","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/Logger","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/SNInfraUX/SearchSettings","DS/SearchControlCenter/scripts/SearchControlCenterServices","text!DS/SearchControlCenter/assets/Ontology_Datasets.json","text!DS/SearchControlCenter/assets/Ontology_Datasets_user.json"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_,h,g,m,f){"use strict";let C=t.singleton(a,{_treeDocument:null,_distributionServiceURLPromise:null,_ontologyServiceURLPromise:null,_urldistribution:"/3drdfpersist/governance/v3/datasets/",_distribution:"/distributions?mask=standard",_urlontology:"/3drdfklet/resources/v2/ontologies/concepts?recurse=all&relation=broaderOf&offset=0&applicativeId=",_testQA:h.getOption("allowEnterpriseDictionaryModification"),init:function(){this._distributionServiceURLPromise=C._getSericeURLPromise("lakegovernance"),this._ontologyServiceURLPromise=C._getSericeURLPromise("ontology"),this._treeDocument=new o({useAsyncPreExpand:!0,shouldAcceptDrag:function(){return!1},shouldAcceptDrop:function(){return!1}})},buildSearchResults:function(t){let a=this;e.is(t)&&e.is(t.onComplete,"function")&&(e.is(a._treeDocument)&&e.is(a._treeDocument.destroy,"function")&&(a._treeDocument.destroy(),a._treeDocument=null),a._treeDocument=new o({useAsyncPreExpand:!0,shouldAcceptDrag:function(){return!1},shouldAcceptDrop:function(){return!1}}),p.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_buildSearchResults"),a._getResultPromise().then(function(r){if(p.log("response OK"),a._treeDocument.prepareUpdate(),r.length>0){let t=JSON.parse(r);e.is(t.datasets)&&t.datasets.forEach(function(t){if("dataset"===t["@type"]){let r={},n=!1,i="",o=t.publisher.substring(t.publisher.indexOf(":")+1),c=new Date(t.modificationDate).toDateString();a._getPublisherInfo(o).then(function(o){if(e.is(o.results)&&o.results.forEach(function(e){e.attributes.forEach(function(e){"ds6w:label"===e.name&&(i=e.value)})}),r.id=t["@id"],r.label=t.title+" | "+c+" | "+i,r.title=t.title,r.description=t.description,r.tooltip=t.description,r.publisher=i,r.modificationdate=t.modificationDate,!0===(n=!0)){let e=new s(r);a._treeDocument.addRoot(e)}})}})}a._treeDocument.pushUpdate(),t.onComplete.call(void 0,a._treeDocument),p.groupEnd()},function(){if(p.log("response KO"),!0===a._testQA){require(["text!DS/SearchControlCenterPO/assets/DataSetOntology_tst.json"],function(r){let n=JSON.parse(r);if(e.is(n,"array")){let r=n.length;a._treeDocument.prepareUpdate();for(let e=0;e<r;e++){let t=new s({id:n[e].dataset,label:n[e].datasetTitle});a._treeDocument.addRoot(t)}a._treeDocument.pushUpdate(),e.is(t.onFailure,"function")&&t.onFailure.call(void 0,a._treeDocument)}})}p.groupEnd()}))},setselected:function(t){if(!e.is(t,"array")||!e.is(this._treeDocument))return;let a=!1;this._treeDocument.prepareUpdate();let r=t.length,n=this._treeDocument.getRoots(),i=n.length;for(let o=0;o<r;o++){let r=t[o],s=r&&r.datasetTitle;if(e.is(s)&&s.length)for(let e=0;e<i;e++){let t=n[e];t&&t._options.label===s&&(t.select(),e=i,a=!0)}}return this._treeDocument.pushUpdate(),a},getConceptsOfConcept:function(t){if(e.is(t)&&e.is(t.onComplete,"function")&&e.is(t.applicativeId)){let a=this;C._getontologySericeURLPromise().then(function(r){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(a,r){let n=JSON.parse(a);e.is(n)&&t.onComplete.call(void 0,n)},onFailure:function(e){p.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::getConceptsOfConcept onFailure: ",e)}},o=r+a._urlontology+t.applicativeId;n.authenticatedRequest(o,i)},function(){reject("Failed to retireve distribution service url")})}},getDataSetStructure:function(t){let a=this;if(p.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::getDataSetStructure"),!e.is(a._treeDocument)||!e.is(t)||!e.is(t.onComplete,"function"))return void p.groupEnd();let r=a._treeDocument.getXSO().get(),n=r.length;if(n){let i,o,s,c=r[n-1];null!=(i=e.is(c._options.id)?c._options.id:void 0)&&(o=i.replace("<",""),s=o.replace(">",""));let l={id:c._options.id,object:c._options,onComplete:function(a){if(e.is(a,"object")){let e={dataset:c._options.id,applicativeId:s,datasetTitle:c._options.title,"session@id":a["@id"],sessionTitle:a.title,publisher:c._options.publisher,modificationdate:c._options.modificationdate,label:c._options.label};t.onComplete.call(void 0,e),p.log("onComplete: ",e),p.groupEnd()}},onFailure:function(){if(!0===a._testQA){require(["text!DS/SearchControlCenterPO/assets/DataSetOntology_tst.json"],function(a){let r=JSON.parse(a);for(let a=0;a<r.length;a++){let n=r[a];if(n.datasetTitle===c._options.label){e.is(t.onFailure,"function")&&t.onFailure.call(void 0,n),p.log("onFailure: ",n);break}}})}p.groupEnd()}};a._querydistributions(l)}else t.onComplete.call(void 0,void 0),p.groupEnd()},clean:function(){e.is(this._treeDocument)&&e.is(this._treeDocument.removeRoots,"function")&&this._treeDocument.removeRoots(),e.is(this._treeDocument)&&e.is(this._treeDocument.destroy,"function")&&(this._treeDocument.destroy(),this._treeDocument=null)},destroy:function(){this._parent(),e.is(this._treeDocument)&&e.is(this._treeDocument.destroy,"function")&&(this._treeDocument.destroy(),this._treeDocument=null)},_getResultPromise:function(){let t=this;return new r(function(a,r){p.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_getResultPromise");let i=t._getTenant();require(["DS/UWPClientCode/PublicAPI","DS/PlatformAPI/PlatformAPI"],function(t,o){var s;if(t.getApplicationConfiguration("app.urls.registry")||o.getApplicationConfiguration("app.urls.registry"))s=t.getApplicationConfiguration("app.urls.registry")||o.getApplicationConfiguration("app.urls.registry");else{s=`${t.getApplicationConfiguration("app.urls.myapps")||o.getApplicationConfiguration("app.urls.myapps")}/resources/AppsMngtRegistry/`}s?(p.log("registryUrl found, registryUrl="+s),_.getServicesByPlatform({platforms:[i],services:["lakegovernance"],config:{url:s}}).then(function(t){if(p.log("i3DXCompassRegistryClient.getServicesByPlatform returns: "+JSON.stringify(t)),Array.isArray(t)&&t.length>0&&Array.isArray(t[0].services)&&t[0].services.length>0&&t[0].services[0].url){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(t){a(e.extend(t))},onFailure:function(e){r(e)}},o=t[0].services[0].url+"/3drdfpersist/governance/v3/datasets";n.authenticatedRequest(o,i)}else p.error("i3DXCompassRegistryClient.getServicesByPlatform did not provide data in expected format"),a([])},function(){p.error("i3DXCompassRegistryClient.getServicesByPlatform FAILED"),a([])})):(p.error("FAILED to retrieve registryUrl"),a([]))})})},_getPublisherInfo:function(t){let a=this;return new r(function(r,n){p.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_getPublisherInfo");let i=e.extend(a._buildSearchQuery(t),{onComplete:function(t){r(e.extend(t))},onFailure:function(e){n(e)}});p.log("searchOptions:",i),c.search(i),p.groupEnd()})},_buildSearchQuery:function(t){let a=this,r={usersgroup:{additional_query:' AND ([ds6w:identifier]:"'+t+'" OR [ds6w:resourceUid]:"'+t+'")'},swym:{additional_query:' AND ( resourceid:"iam:'+t+'" OR [ds6w:resourceUid]:"'+t+'")'}},n=JSON.parse(f);if(e.is(n,"object")){let e=a._getTenant(),i=n.nresults?n.nresults:h.getOption("max_selection_for_selectall",{tenant:e});n.label="3DSearch-"+t+"-"+(new Date).getTime(),n.tenant=e,n.nresults=i,n.specific_source_parameter=r}return n},_querydistributions:function(t){if(p.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_querydistributions"),!e.is(t)||!e.is(t.id))return;let a=this;C._getdistributionSericeURLPromise().then(function(r){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(a,r){let n=JSON.parse(a);if(e.is(n,"object")){let a=n.distributions;if(e.is(a,"array")){let r=a.length,n=0;for(;n<r;n++){let r=a[n];e.is(r,"object")&&t.onComplete.call(void 0,r)}}}},onFailure:function(e){p.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_querydistributions onFailure: ",e),t.onFailure.call(void 0,e)}},o=r+a._urldistribution+t.id+a._distribution;n.authenticatedRequest(o,i)},function(){reject("Failed to retireve distribution service url")})},_getSericeURLPromise:function(e){let t=this;return new r(function(a,r){let n=t._getTenant();i.getServiceUrl({serviceName:e,platformId:n,onComplete:function(e){e?a(e):!0===t._testQA?a(e):r()},onFailure:function(e){r(e)}})})},_getdistributionSericeURLPromise:function(){return this._distributionServiceURLPromise},_getontologySericeURLPromise:function(){return this._ontologyServiceURLPromise},_getTenant:function(){return e.is(g.platformID)?g.platformID:u.getActiveTenant()}});return C}),define("DS/SearchControlCenter/scripts/ControlledVocabulary/SCCControlledVocabulary",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SearchControlCenter/scripts/ControlledVocabulary/ControlledVocabularyServices","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,o,s,c,l,d,u,p){"use strict";return{communityOntologyMapping:[],render:function(e){this._parentDiv=e,this.renderControlledSection(this._parentDiv)},getTabInputsToStore:function(){return this.communityOntologyMapping},getInputFromStore:function(e){let t=this;e&&(this.communityOntologyMapping=e.slice(0)),this.ontologies&&0===Object.keys(this.ontologies).length&&empty.constructor===Object||t.divCreatedCategoriesSection&&(t.divCreatedCategoriesSection.empty(),t.communityOntologyMapping.forEach((e,a)=>{t.renderMappingsRow(t.divCreatedCategoriesSection,e)}))},renderControlledSection:function(t){this.mainControlDivSection=e.create("div",{class:"search_center_main_div ",id:"control-vocab-main"}).inject(t);var a=e.create("div",{class:"",id:"control-vocab-title"}).inject(this.mainControlDivSection);e.create("p",{class:"control_vocab_text_heading",text:u.get("6WTagsFilter.ControlledVocab.title")}).inject(a),this.renderActivateControlVocab(this.mainControlDivSection),this.renderCommunitySection(this.mainControlDivSection)},renderActivateControlVocab:function(t){var a=this,r=e.create("div",{class:"search_center_general_display_flex search_center_margin",id:"activate-control-vocab"}).inject(t),i=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"activate-control_vocab-toggle"}).inject(r);this.checkboxActivateControlVocab=new n({type:"checkbox",label:u.get("6WTagsFilter.ControlledVocab.CheckBox.label"),className:"primary",touchMode:"true"}).inject(i);var o=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(r);o.setStyle("color","#b4b6ba"),o.addEventListener("mouseover",this._manageMouseOver,!1),o.addEventListener("mouseout",this._manageMouseOut,!1),p.popin(o,{trigger:"hover",position:"top",body:u.get("InstantSearch.Activate_Instant_Search.popover")}),this.checkboxActivateControlVocab.addEventListener("change",function(e){a.toggleDisableStateOfInputFields()})},toggleDisableStateOfInputFields:function(){1==this.checkboxActivateControlVocab.checkFlag?this.divCategoriesSection.removeClassName("search_center_disable"):this.divCategoriesSection.addClassName("search_center_disable")},renderCommunitySection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"control_vocab_category_section search_center_disable"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection),this.renderMappings(this.divCategoriesSection)},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("control_vocab_add_category_row_span"),a},_createCommunityControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new s;this.communityAutocomplete=new o({placeholder:u.get("6WTagsFilter.ControlledVocab.Community.title"),touchMode:!0,enableSearchFlag:!0,elementsTree:n,multiSearchMode:!1}).inject(r),this.communityAutocomplete.elements.container.setStyle("max-width","unset"),this.communityAutocomplete.addEventListener("change",this._onChangeCommunity.bind(this)),l._fetchSwymCommunities().then(function(e){t.is(e,"array")&&e.length?e.forEach((e,t)=>{if(e.hasOwnProperty("attributes")){let t,a;e.attributes.filter(function(e){if("internal"==e.format&&"resourceid"==e.name){let a=e.value.split(":");t=a[a.length-1]}"attribute"==e.format&&"ds6w:label"==e.name&&(a=e.value)}),n.addRoot(new c({label:a,value:t}))}}):console.log("The fed search failed")});var i=this;return this.selectedCommunity,this.communityAutocomplete.addEventListener("change",function(){i.enableAddCategoryButton()}),this.communityAutocomplete},_onChangeCommunity:function(e){if(this.communityAutocomplete.value){let e=this.communityAutocomplete.value,t=this.communityOntologyMapping.filter(function(t){return t.id==e});t&&t.length&&(this._updateCommunity=t[0].id,this.updateCategoryButton.elements.container.setStyle("display","inline-flex"),this.updateCategoryButton._disabledState=!1,this.updateCategoryButton.disabled=!1,this.addCategoryButton.elements.container.setStyle("display","none"))}else this.updateCategoryButton.elements.container.setStyle("display","none"),this.addCategoryButton.elements.container.setStyle("display","inline-flex")},_createOntologyControl:function(a){let r=this;var n=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),i=new s;return this.ontologyAutocomplete=new o({placeholder:u.get("6WTagsFilter.ControlledVocab.Ontology.title"),touchMode:!0,enableSearchFlag:!0,elementsTree:i}).inject(n),this.ontologyAutocomplete.elements.container.setStyle("max-width","unset"),this.ontologiesObj={},l._fetchOntologies().then(function(e){t.is(e,"array")&&e.length?(e.forEach((e,t)=>{"ds6wclassifier:"!==e.shortURI&&e.hasOwnProperty("label")&&(r.ontologiesObj[e.shortURI]=e.label,i.addRoot(new c({label:e.label,value:e.shortURI})))}),r.getInputFromStore()):console.log("The failure is because:"+e)}),this.ontologyAutocomplete.addEventListener("change",function(){r.enableAddCategoryButton()}),this.ontologyAutocomplete},renderDisableFreeTagging:function(t){var a=e.create("div",{class:"search_center_general_display_flex search_center_margin",id:"disable-free-tagging"}).inject(t),r=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"disable-free-tagging-toggle"}).inject(a);this.checkboxDisableFreeTagging=new n({type:"checkbox",label:u.get("6WTagsFilter.ControlledVocab.DisableFreeTagging.label"),className:"primary",touchMode:"true"}).inject(r);var i=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(a);i.setStyle("color","#b4b6ba"),i.addEventListener("mouseover",this._manageMouseOver,!1),i.addEventListener("mouseout",this._manageMouseOut,!1),p.popin(i,{trigger:"hover",position:"top",body:u.get("InstantSearch.Activate_Instant_Search.popover")})},enableAddCategoryButton:function(){this.communityAutoCompleteDiv.value&&this.ontologyAutoCompleteDiv.value&&this.ontologyAutoCompleteDiv.value.length?(this.addCategoryButton.disabled=!1,d.enableButtons()):this.addCategoryButton.disabled=!0},renderAddButtonCategoryRow:function(t){var a=e.create("div",{class:"search_center_div_uidisplay search_center_margin search_center_category_add_add",id:"add-btn-control_vocab"}).inject(t);this.addCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:u.get("InstantSearch.Category.Action.AddNewCategory")}).inject(a),this.updateCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:u.get("6WTagsFilter.ControlledVocab.UpdateButton.label")}).inject(a),this.updateCategoryButton.elements.container.setStyle("display","none"),this.addCategoryButton.getContent().addEventListener("buttonclick",this._onAddClick.bind(this)),this.updateCategoryButton.getContent().addEventListener("buttonclick",this._onAddClick.bind(this,!0))},_onAddClick:function(e){let t=this,a={type:"swym:Community"};if(this._updateCommunity){this.communityOntologyMapping.forEach(e=>{if(e.id==t._updateCommunity){if(t.ontologyAutoCompleteDiv.selectedItems.length){t.ontologyAutoCompleteDiv.value.forEach((a,r)=>{-1==e.ontologies.indexOf(a)&&e.ontologies.push(t.ontologyAutoCompleteDiv.value[r])})}e.freeInput=t.checkboxDisableFreeTagging.checkFlag}})}else a.id=t.communityAutoCompleteDiv.value,a.name=t.communityAutoCompleteDiv.selectedItems.getAttributeValue("label"),a.ontologies=t.ontologyAutoCompleteDiv.value,a.freeInput=t.checkboxDisableFreeTagging.checkFlag,t.communityOntologyMapping.push(a);console.log("The community mappings:"+JSON.stringify(t.communityOntologyMapping)),t.communityAutoCompleteDiv.value="",t.ontologyAutoCompleteDiv.value=[],t.checkboxDisableFreeTagging.checkFlag=!1,t.updateCategoryButton.elements.container.setStyle("display","none"),t.addCategoryButton.elements.container.setStyle("display","inline-flex"),this._updateCommunity=null,t.divCreatedCategoriesSection.empty(),t.communityOntologyMapping.forEach((e,a)=>{t.renderMappingsRow(t.divCreatedCategoriesSection,e)})},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{class:"search_center_add_category_section"}).inject(t);var a=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),r=this._createCommunityControl({class:"control_vocab_community_title",divRow:a}),n=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection}),i=this._createOntologyControl({class:"control_vocab_ontology_title",divRow:n}),o=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection});this.renderDisableFreeTagging(o);this.communityAutoCompleteDiv=r,this.ontologyAutoCompleteDiv=i,this.renderAddButtonCategoryRow(this.divAddCategoriesSection)},_createCategoryRowSpan:function(t){var a=e.create("div",{class:t.class}).inject(t.parentDiv);return a.addClassName("search_center_category_row_span"),a},_createCategoryRowHtmlDiv:function(t){var a=e.create("div",{class:t.class,html:this._getCategoryRowHtml(t)}).inject(t.parentDiv);return a.addClassName("search_center_category_row_html"),a},_getCategoryRowHtml:function(e){var t=this;let a=e.mappingInfo.ontologies.map(e=>t.ontologiesObj[e]);return e.mappingInfo.name+" - "+a},renderMappings:function(t){let a=this;this.divCreatedCategoriesSection=e.create("div",{class:"search_center_created_categories_section"}).inject(t),this.communityOntologyMapping&&this.communityOntologyMapping.length&&(this.divCreatedCategoriesSection.empty(),this.communityOntologyMapping.forEach((e,t)=>{a.renderMappingsRow(a.divCreatedCategoriesSection,e)}))},renderMappingsRow:function(e,t){var a=this._createCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",parentDiv:e});this._createCategoryRowHtmlDiv({class:"search_center_general_tab_div search_center_margin",parentDiv:a,mappingInfo:t})}}}),define("DS/SearchControlCenter/scripts/SearchcontrolGeneralTabCategories",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/Controls/LineEditor","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/SNVocabAccess","DS/SNInfraUX/SearchResultCategories","DS/SearchControlCenter/scripts/SearchControlCenterServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/SearchControlCenter_defaults.json","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchPreferences","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_,h,g,m,f,C,y){"use strict";var v="fake:dashboard",b={_categories:null,_parentDiv:null,_vocabPromise:{},render:function(e){this._parentDiv=e},loadCategories:function(){if(b._categories.suggestion=b._categories.suggestion||{},!t.is(b._categories.suggestion.list,"array")){var e=JSON.parse(g);b._categories.suggestion.list=e.result_categories.suggestion.list.concat([])}b._categories.suggestion.list=b._categories.suggestion.list||[];for(var a=b._categories.suggestion.list.length-1;a>=0;a--)!1===b._categories.suggestion.list[a].active&&b._categories.suggestion.list.splice(a,1);return b._categories},getTabInputsToStore:function(e){return-1!==["iphone","ipad","android"].indexOf(f.getDeviceCategory())?(C.setItem("InstantSearchSCC",!1),void C.commit()):m.getOption("deactivate_FUN108944")?void 0:(e.result_categories=b._categories,e.activate_instant_search=b.checkboxActivateInstantSearch.checkFlag,e.activate_instant_search_apps=b.checkboxActivateApplicationCategory.checkFlag,e)},onResetTab:function(e){if(-1!==["iphone","ipad","android"].indexOf(f.getDeviceCategory()))return C.setItem("InstantSearchSCC",!1),void C.commit();m.getOption("deactivate_FUN108944")||(this._categories=t.is(e.result_categories)?t.clone(e.result_categories):{},this.loadCategories(),this.renderInstantSearchSection(this._parentDiv),t.is(e.activate_instant_search)&&(this.checkboxActivateInstantSearch.checkFlag=e.activate_instant_search),t.is(e.activate_instant_search_apps)?this.checkboxActivateApplicationCategory.checkFlag=e.activate_instant_search_apps:this.checkboxActivateApplicationCategory.checkFlag=!0,this.setCategoriesSectionEnableState())},_checkActivateInstantSearch:function(){0==this._categories.suggestion.list.length?(this.checkboxActivateInstantSearch.checkFlag=!1,this.checkboxActivateInstantSearch.disabled=!0):this.checkboxActivateInstantSearch.disabled=!1},renderInstantSearchSection:function(t){this.divInstantSearchSection&&this.divInstantSearchSection.destroy(),this.divInstantSearchSection=e.create("div",{class:"",id:"general-tab-instantsearch-section"}).inject(t);var a=e.create("div",{class:"",id:"general-tab-instantsearch-title"}).inject(this.divInstantSearchSection);e.create("p",{class:"search_center_text_heading",text:h.get("General.Instant_search.Title")}).inject(a),this.renderActivateInstantSearch(this.divInstantSearchSection),this.renderActivateApplicationCategory(this.divInstantSearchSection),this.renderCategoriesSection(this.divInstantSearchSection)},renderActivateInstantSearch:function(t){var a=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-activate-instant-search"}).inject(t),r=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-instant-search-toggle"}).inject(a);this.checkboxActivateInstantSearch=new n({type:"switch",label:h.get("InstantSearch.Activate_Instant_Search"),className:"primary",touchMode:!0}).inject(r);var i=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(a);y.popin(i,{trigger:"hover",position:"top",body:h.get("InstantSearch.Activate_Instant_Search.popover")}),this.checkboxActivateInstantSearch.addEventListener("change",function(){b.setCategoriesSectionEnableState(),p.enableButtons()})},renderActivateApplicationCategory:function(t){this.divActivateApplicationCategorySpan&&this.divActivateApplicationCategorySpan.destroy(),this.divActivateApplicationCategorySpan=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-activate-application-category"}).inject(t);var a=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-application-category-toggle"}).inject(this.divActivateApplicationCategorySpan);this.checkboxActivateApplicationCategory=new n({type:"switch",label:h.get("InstantSearch.Activate_Application_Category"),className:"primary",touchMode:!0}).inject(a);var r=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(this.divActivateApplicationCategorySpan);y.popin(r,{trigger:"hover",position:"top",body:h.get("InstantSearch.Activate_Application_Category.popover")}),this.checkboxActivateApplicationCategory.addEventListener("change",function(){p.enableButtons()})},renderCategoriesSection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"search_center_category_section"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection),this.renderCategories(this.divCategoriesSection),this._checkActivateInstantSearch()},renderCategories:function(t){var r=this;return this._renderedCategories=[],this.divCreatedCategoriesSection=e.create("div",{class:"search_center_div_left  search_center_created_categories_section"}).inject(t),this.divCreatedCategoriesSectionHeader=e.create("div",{class:"search_center_div_left  search_center_created_categories_section_header ",html:h.get("InstantSearch.Categories.section.header")}).inject(this.divCreatedCategoriesSection),new a(function(e,t){var n=r.loadCategories(),i=[];n.suggestion.list.forEach(function(e,t){i.push(r.ensureVocabLoaded(e.source))});var o=[];a.all(i).then(function(t){n.suggestion.list.forEach(function(e,a){o.push(r.renderCategoryRow(e,r.divCreatedCategoriesSection,t[a]))}),a.all(o).then(e)})})},setCategoriesSectionEnableState:function(){1==this.checkboxActivateInstantSearch.checkFlag?(this.divCategoriesSection.removeClassName("search_center_disable"),this.divActivateApplicationCategorySpan.removeClassName("search_center_disable")):(this.divCategoriesSection.addClassName("search_center_disable"),this.divActivateApplicationCategorySpan.addClassName("search_center_disable"))},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("search_center_add_category_row_span"),a},_createCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("search_center_category_row_span"),a},_createCategoryTitleControl:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.divRow),r=new s({placeholder:h.get("InstantSearch.Title_Instant_Search"),touchMode:!0}).inject(a);r.elements.container.setStyle("display","grid"),r.elements.container.setStyle("max-width","unset");var n=this;return r.addEventListener("change",function(){var e=r.value.trim(),a=n._validateCategoryTitle(e,t.category_id);if(e&&a){if(!r.elements.container.hasClassName("result_category_input_error")){r.elements.container.addClassName("result_category_input_error");var i=p.createWdgAlert();i.inject(r.elements.container,"top");var o=h.get("InstantSearch.Category.DuplicateTitle",{title:a});i.add({className:"warning applyChangesAlert",message:o})}}else r.elements.container.removeClassName("result_category_input_error");n.enableAddCategoryButton()}),r},_createCategoryDatasourceControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new i({placeholder:h.get("Choose_data_source"),touchMode:!0,enableSearchFlag:!0,elementsList:[]}).inject(r);n.elements.container.setStyle("width","100%"),this.getDataSourceList().then(function(e){if(n.elementsList=e,t.is(a.selectedSource)){var r=e.indexOf(p.getDatasourceDisplayName(a.selectedSource));r>=0&&(n.selectedIndex=r)}});var o=this;return n.addEventListener("change",function(){o.enableAddCategoryButton()}),n},_createCategoryTypeControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new o({placeholder:h.get("Choose_type"),touchMode:!0,disabled:!0,enableSearchFlag:!0}).inject(r);function i(e,t){var a=[];return e.getChildren().forEach(function(e,r){t.indexOf(e.getAttributeValue("uri"))>=0&&a.push(e)}),a}function s(e){if(e.getChildren().length>0)n.elementsTree=e,n.disabled=!1,1==e.getChildren().length&&(n.selectedItems=i(e,e.getChildren()[0].getAttributeValue("uri")?[e.getChildren()[0].getAttributeValue("uri")]:[]),n.disabled=!0);else{n.disabled=!0;var t=p.createWdgAlert(),a=h.get("SearchType.NoTypesWarning");t.add({className:"warning applyChangesAlert",message:a})}c._promiseTypeListLoaded&&c._promiseTypeListLoaded.resolve(e)}n.elements.container.setStyle("max-width","unset");var c=this,l=a.datasourceComboBox;return l&&l.addEventListener("change",function(){var e=p.getDatasourceInternalName(l.currentValue);c.ensureVocabLoaded(e).then(s)}),a.vocabTypesTreeDocument&&(s(a.vocabTypesTreeDocument),t.is(a.selectedTypes,"array")&&(n.selectedItems=i(a.vocabTypesTreeDocument,a.selectedTypes))),n.addEventListener("change",function(){var e=n.selectedItems.length,t=m.getOption("instant_search_category_max_types");if(e>t){if(!n.elements.container.hasClassName("result_category_input_error")){n.elements.container.addClassName("result_category_input_error");var a=p.createWdgAlert();a.inject(n.elements.container,"top");var r=h.get("InstantSearch.Category.TypeCountMax",{max_count:t});a.add({className:"warning applyChangesAlert",message:r})}}else n.elements.container.removeClassName("result_category_input_error");c.enableAddCategoryButton()}),n},_getCategoryRowTitleHtml:function(e){return u.getCategoryTitleNls(e)},_getCategoryRowTitleAndSourceSeparatorHtml:function(){return" - "},_getCategoryRowSourceAndTypesSeparatorHtml:function(){return" - "},_getCategoryRowTypesSeparatorHtml:function(){return", "},_getCategoryRowSourceHtml:function(e){return p.getDatasourceDisplayName(e.source)||"Source Not Found"},_getCategoryRowTypesHtml:function(e,a){var r=this,n="";return t.is(e.types,"array")&&a.getChildren().forEach(function(t,a){var i=t.getAttributeValue("uri");e.types.indexOf(i)>=0?(n&&(n+=r._getCategoryRowTypesSeparatorHtml()),n+=p.getTypesDisplayName(e.source,i)):i==v&&(n+=t.getAttributeValue("nls"))}),n},_getCategoryRowHtml:function(e){var t=this._getCategoryRowTitleHtml(e.category);return t+=this._getCategoryRowTitleAndSourceSeparatorHtml(e),t+=this._getCategoryRowSourceHtml(e.category),t+=this._getCategoryRowSourceAndTypesSeparatorHtml(e),t+=this._getCategoryRowTypesHtml(e.category,e.model)},_createCategoryRowHtmlDiv:function(t){var a=e.create("div",{class:t.class,id:t.id,html:this._getCategoryRowHtml(t)}).inject(t.parentDiv);return a.addClassName("search_center_category_row_html"),a},_setSelectedDatasource:function(e){var a=this;this.getDataSourceList().then(function(r){if(a.datasourceComboBox.elementsList=r,t.is(e)){var n=r.indexOf(p.getDatasourceDisplayName(e));n>=0&&(a.datasourceComboBox.selectedIndex=n)}})},_setSelectedTypes:function(e,t){var a=[];e.getChildren().forEach(function(e,r){t.indexOf(e.getAttributeValue("uri"))>=0&&a.push(e)}),this.typeAutocomplete.selectedItems=a},_setCategoryInEditMode:function(e){var t=this;e.parentDiv.addClassName("search_category_row_in_edit"),t._categoryInMod=e.category.id,t._disableDeleteModifyAllCategories(),t.categoryTitleLine.value=u.getCategoryTitleNls(e.category),t._promiseTypeListLoaded=a.deferred(),t._promiseTypeListLoaded.promise.then(function(a){t._setSelectedTypes(a,e.category.types),t.divAddCategoriesSection.removeClassName("search_center_disable")}),t._setSelectedDatasource(e.category.source),t.cancelAddCategoryButton.show(),t.addCategoryButton.disabled=!0,t.addCategoryButton.label=h.get("InstantSearch.Category.Action.SaveCategory")},_createCategoryRowActionsDiv:function(t){var a=this,r=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);r.addClassName("search_result_category_row_actions");var n=e.create("div",{class:"fonticon fonticon-1x fonticon-pencil search_result_category_row_action"}).inject(r);n.addEventListener("click",function(){a._setCategoryInEditMode(t)},!1),n.addEventListener("mouseover",function(){n.addClassName("search_category_action_mouse_hover")},!1),n.addEventListener("mouseout",function(){n.removeClassName("search_category_action_mouse_hover")},!1);var i=e.create("div",{class:"fonticon fonticon-trash search_result_category_row_action"}).inject(r);return i.addEventListener("click",function(){a._removeCategoryModel(t.category.id),p.enableButtons(),a.renderCategoriesSection()},!1),i.addEventListener("mouseover",a._manageMouseOver,!1),i.addEventListener("mouseout",a._manageMouseOut,!1),r},renderCategoryRow:function(e,t,r){var n=this;return new a(function(a,i){var o=n._createCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"search-result-category-"+e.id,parentDiv:t});n._createCategoryRowHtmlDiv({class:"search_center_general_tab_div search_center_margin",id:"search-result-category-html-"+e.id,parentDiv:o,category:e,model:r}),n._createCategoryRowActionsDiv({class:"search_center_margin",model:r,category:e,parentDiv:o}),n._renderedCategories.push({id:e.id,div:o}),a()})},enableAddCategoryButton:function(){this.categoryTitleLine.value.trim()&&!this.categoryTitleLine.elements.container.hasClassName("result_category_input_error")&&this.datasourceComboBox.currentValue&&!this.typeAutocomplete.elements.container.hasClassName("result_category_input_error")?this.addCategoryButton.disabled=!1:this.addCategoryButton.disabled=!0},renderAddButtonCategoryRow:function(t){var a=this,n=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_category_add",id:"add-search-result-category"}).inject(t),i=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex search_center_category_add_cancel",id:"add-search-result-category-cancel-button"}).inject(n);this.cancelAddCategoryButton=new r({touchMode:!0,disabled:!1,label:h.get("InstantSearch.Category.Action.CancelAddCategory")}).inject(i),this.cancelAddCategoryButton.getContent().addEventListener("buttonclick",function(){a.renderCategoriesSection()}),this.cancelAddCategoryButton.hide();var o=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex search_center_category_add_add",id:"add-search-result-category-add-button"}).inject(n);this.addCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:h.get("InstantSearch.Category.Action.AddNewCategory")}).inject(o);var s=m.getOption("instant_search_category_max_categories");this._categories.suggestion.list.length>=s&&t.addClassName("search_center_disable"),this.addCategoryButton.getContent().addEventListener("buttonclick",function(){function e(e){a.typeAutocomplete.selectedItems&&a.typeAutocomplete.selectedItems.forEach(function(t,a){var r=t.getAttributeValue("uri");r&&(r==v&&(r="Dashboard",e.match_on="context_name"),e.types.push(r))})}if(a._categoryInMod){var t={id:a._categoryInMod,custom:!0,name:a.categoryTitleLine.value,source:p.getDatasourceInternalName(a.datasourceComboBox.currentValue),types:[]};e(t),a._replaceCategoryModel(t)}else{var r={id:(new Date).getTime(),custom:!0,name:a.categoryTitleLine.value,source:p.getDatasourceInternalName(a.datasourceComboBox.currentValue),types:[]};e(r),a._addCategoryModel(r)}p.enableButtons(),a.renderCategoriesSection()})},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{class:" search_center_div_left search_center_add_category_section"}).inject(t);var a=this._createAddCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),r=this._createCategoryTitleControl({class:"search_center_category_title",id:"search-result-category-title",divRow:a}),n=this._createCategoryDatasourceControl({class:"search_center_category_source",id:"add-search-result-category-source-combo",divRow:a});n.disabled=!1;var i=this._createAddCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection}),o=this._createCategoryTypeControl({class:"search_center_category_types",id:"add-search-result-category-type-combo",divRow:i,datasourceComboBox:n});this.categoryTitleLine=r,this.datasourceComboBox=n,this.typeAutocomplete=o,this._categoryInMod=null,this.renderAddButtonCategoryRow(this.divAddCategoriesSection)},_removeCategoryModel:function(e){for(var t=0;t<this._categories.suggestion.list.length;t++)if(this._categories.suggestion.list[t].id==e){this._categories.suggestion.list.splice(t,1);break}},_replaceCategoryModel:function(e){for(var t=0;t<this._categories.suggestion.list.length;t++)if(this._categories.suggestion.list[t].id==e.id){this._categories.suggestion.list.splice(t,1,e);break}},_validateCategoryTitle:function(e,t){for(var a=0;a<this._categories.suggestion.list.length;a++){var r=u.getCategoryTitleNls(this._categories.suggestion.list[a]);if(r.toLowerCase()==e.toLowerCase()&&(!this._categoryInMod||this._categoryInMod&&this._categories.suggestion.list[a].id!=this._categoryInMod))return r}return!1},_addCategoryModel:function(e){this._categories.suggestion.list.push(e)},_disableDeleteModifyAllCategories:function(){b._renderedCategories.forEach(function(e,t){e.div.addClassName("search_center_disable")})},ensureVocabLoaded:function(e){var r=this;return this._vocabPromise[e]||(this._vocabPromise[e]=new a(function(a,n){r.getDataSourceList().then(function(){var r={};r.vocabId=p._datSourceToVocabID[e],r.tenantId=p.platformID,d.loadVocabularyClasses(r,function(r){var n=[],i={},o=new c;if(o.prepareUpdate(),"dashboard"==e&&0==r.classInfos.length&&(r.classInfos=[{nlsName:h.get("Type.dashboard"),uri:v}]),"drive"==e){var s=new l({label:""});o.addRoot(s)}else for(let e=0;e<r.classInfos.length;e++)if(t.is(r.classInfos[e].nlsName,"string")&&t.is(r.classInfos[e].uri)){n.push(r.classInfos[e].nlsName),i[r.classInfos[e].uri]=r.classInfos[e].nlsName;s=new l({label:r.classInfos[e].nlsName,grid:{nls:r.classInfos[e].nlsName,uri:r.classInfos[e].uri}});o.addRoot(s)}o.pushUpdate(),p.updateTypesMapping(e,i),a(o)})})})),this._vocabPromise[e]},getDataSourceList:function(){function e(e){for(var t=-1,a=e.concat(),r=0;r<a.length;r++)if("other"===p.getDatasourceInternalName(a[r])){t=r;break}return t>-1&&a.splice(t,1),a}return this._datasourceListPromise||(this._datasourceListPromise=new a(function(a,r){var n=m.getOption("dataSourcesToFilterFromAdvancedSearch");delete n.dashboard;var i=p.getDataSourceList({dataSourcesToFilterFromAdvancedSearch:n});t.is(i,"array")?a(e(i)):i.then(function(t){a(e(t))})})),this._datasourceListPromise}};return b}),define("DS/SearchControlCenter/scripts/SearchcontrolGeneralTab",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/Editor","DS/MessageBus/MessageBus","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SearchcontrolGeneralTabCategories","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","i18n!DS/SNResultUX/assets/nls/SNResultUX.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNResultUX/utils/SearchViewOptions","DS/SearchControlCenter/scripts/SCCSynonymsDictonary","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_,h,g){"use strict";var m={viewModeComboBox:null,deltaTimeComboBox:null,dateModeComboBox:null,csvSeparatorComboBox:null,revisionComboBox:null,numberResultComboBox:null,checkboxAbbreviatedcount:null,checkboxAccessPLMParameters:null,checkboxSuggestions:null,checkboxSnippets:null,checkboxForceAdvSearch:null,checkboxForceGuidedMode:null,_viewModeObject:{},_dateModeObject:{},_csvSeparatorObject:{},_revisionObject:{},onRenderFacet:function(n){var i=p.getOption("OneSearch"),c=e.create("div",{class:"scc_main_div",id:"search-center-general0"}).inject(n),f=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(c);e.create("p",{class:"search_center_text_heading",text:l.get("General.Results_display")}).inject(f);var C=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-view-mode"}).inject(c),y=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-view-mode-text"}).inject(C),v=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-tab-view-mode"}).inject(c),b=e.create("div",{class:"search_center_div_left",id:"general-tab-view-mode-combo"}).inject(v);e.create("p",{class:"search_center_text",text:l.get("Default_View_Mode_After_CacheCleaning")}).inject(y);var S=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(C);g.tooltip(S,{position:"top",shortHelp:l.get("Default_View_Mode_After_CacheCleaning.popover")});var x=[],D=i;if(m._viewModeObject=_.getAvailableViews({simple_search_experience:D,getAllViews:!0}),t.is(m._viewModeObject)&&m._viewModeObject.length>0)for(let e=0;e<m._viewModeObject.length;e++){var T={},w=m._viewModeObject[e];T.labelItem=w.title,T.iconItem=w.icon,x.push(T)}m.viewModeComboBox=new r({elementsList:x,nbDisplayedElements:x.length,currentValue:x[0],touchMode:!0,enableSearchFlag:!0}).inject(b),b.setStyle("display","grid"),m.viewModeComboBox.elements.container.setStyle("max-width","unset");var A=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-recent-time"}).inject(c),I=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-recent-time-text"}).inject(A),N=(v=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-tab-recent_content"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-recent-time-combo"}).inject(v));e.create("p",{class:"search_center_text",text:l.get("Recent_Content_Delta_Time")}).inject(I);var j=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(A);g.tooltip(j,{position:"top",shortHelp:l.get("Recent_Content_Delta_Time.popover")});var W=["5"+l.get("Minutes"),"10"+l.get("Minutes"),"15"+l.get("Minutes"),"20"+l.get("Minutes"),"25"+l.get("Minutes"),"30"+l.get("Minutes")];if(m.deltaTimeComboBox=new r({elementsList:W,nbDisplayedElements:W.length,currentValue:W[0],touchMode:!0,enableSearchFlag:!0}).inject(N),N.setStyle("display","grid"),m.deltaTimeComboBox.elements.container.setStyle("max-width","unset"),m._dateModeObject=p.getOption("date_display_mode_array"),t.is(m._dateModeObject,"array")&&m._dateModeObject.length>0){var O=[];for(let e=1;e<m._dateModeObject.length;e++){var B=m._dateModeObject[e];t.is(B,"object")&&t.is(B.id,"string")?O.push(d.get(B.id+".title")):u.error("Bad definition of date_display_mode_array !!!",m._dateModeObject)}if(O.length>0){var E=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-date-mode"}).inject(c),P=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-date-mode-text"}).inject(E),R=(v=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-tab-date_mode"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-date-mode-combo"}).inject(v));e.create("p",{class:"search_center_text",text:d.get("Default_Date_Mode")}).inject(P),m.dateModeComboBox=new r({elementsList:O,nbDisplayedElements:O.length,currentValue:O[0],touchMode:!0,enableSearchFlag:!0}).inject(R),R.setStyle("display","grid"),m.dateModeComboBox.elements.container.setStyle("max-width","unset")}}if(m._csvSeparatorObject=p.getOption("csvSeparatorArray"),t.is(m._csvSeparatorObject,"array")&&m._csvSeparatorObject.length>0){var F=[];for(let e=1;e<m._csvSeparatorObject.length;e++){var M=m._csvSeparatorObject[e];t.is(M,"object")&&t.is(M.id,"string")?F.push(d.get(M.id+".title")):u.error("Bad definition of csvSeparatorArray !!!",m._csvSeparatorObject)}if(F.length>0){var k=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-csv-mode"}).inject(c),U=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-csv-mode-text"}).inject(k),L=(v=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-csv"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-csv-mode-combo"}).inject(v));e.create("p",{class:"search_center_text",text:d.get("Default_Csv_Separator")}).inject(U),m.csvSeparatorComboBox=new r({elementsList:F,nbDisplayedElements:F.length,domId:"combo-csv-mode",currentValue:F[0],touchMode:!0,enableSearchFlag:!0}).inject(L),L.setStyle("display","grid"),m.csvSeparatorComboBox.elements.container.setStyle("max-width","unset")}}if(m._revisionObject=p.getOption("show_search_results_revision_array"),t.is(m._revisionObject)&&m._revisionObject.length>0){var V=[];for(let e=0;e<m._revisionObject.length;e++){var H=m._revisionObject[e];t.is(H,"object")&&t.is(H.id,"string")?V.push(d.get(H.id+".title")):u.error("Bad definition of show_search_results_revision_array !!!",m._revisionObject)}if(V.length>0){var z=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-revision"}).inject(c),J=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-revision-type-text"}).inject(z),X=(v=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-revision"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-revision-type-combo"}).inject(v));e.create("p",{class:"search_center_text",text:d.get("Show_Search_Results")}).inject(J),m.revisionComboBox=new r({elementsList:V,nbDisplayedElements:V.length,currentValue:V[0],touchMode:!0,enableSearchFlag:!0}).inject(X),X.setStyle("display","grid"),m.revisionComboBox.elements.container.setStyle("max-width","unset")}}var G=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-number-result"}).inject(c),q=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-number-result-text"}).inject(G),K=(v=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-no_of_results"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-number-result-combo"}).inject(v));e.create("p",{class:"search_center_text",text:l.get("max_selection_for_selectall")}).inject(q);var Q=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(G);g.tooltip(Q,{position:"top",shortHelp:l.get("max_selection_for_selectall.popover")});var Y=["200"+l.get("Items"),"400"+l.get("Items"),"600"+l.get("Items"),"800"+l.get("Items"),"1000"+l.get("Items")];m.numberResultComboBox=new r({elementsList:Y,nbDisplayedElements:Y.length,currentValue:Y[0],touchMode:!0,enableSearchFlag:!0}).inject(K),K.setStyle("display","grid"),m.numberResultComboBox.elements.container.setStyle("max-width","unset");var $=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-default-sort-option"}).inject(c),Z=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-default-sort-option-text"}).inject($),ee=(v=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-sort_option"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-default-sort-option-combo"}).inject(v)),te=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject($);g.tooltip(te,{position:"top",shortHelp:d.get("default_sort.popover")}),ee.setStyle("display","grid"),e.create("p",{class:"search_center_text",text:l.get("GeneralTab.DefaultSort.title")}).inject(Z);var ae=[{label:d.get("sort_by")+" "+d.get("relevancySort"),trueLabel:d.get("relevancySort"),icon:"sorting"},{label:d.get("sort_by")+" "+d.get("ds6w:modified_SortAsc"),trueLabel:d.get("ds6w:modified_SortAsc"),icon:"date-sorting-31-1"},{label:d.get("sort_by")+" "+d.get("ds6w:modified_SortDesc"),trueLabel:d.get("ds6w:modified_SortDesc"),icon:"date-sorting-1-31"},{label:d.get("sort_by")+" "+d.get("ds6w:label_SortAsc"),trueLabel:d.get("ds6w:label_SortAsc"),icon:"alpha-sorting-a-z"},{label:d.get("sort_by")+" "+d.get("ds6w:label_SortDesc"),trueLabel:d.get("ds6w:label_SortDesc"),icon:"alpha-sorting-z-a"},{label:d.get("sort_by")+" "+d.get("ds6w:type"),trueLabel:d.get("ds6w:type"),icon:"tag-sorting"}];m.defaultSortOptionComboBox=new r({elementsList:ae,nbDisplayedElements:ae.length,selectedIndex:0,touchMode:!0,enableSearchFlag:!1,getMainElementCustomization:this.updateSortLabelCallback}).inject(ee),m.defaultSortOptionComboBox.addEventListener("change",function(){o.enableButtons()});var re=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(c);e.create("p",{class:"search_center_text_heading",text:l.get("General.UI_display")}).inject(re);var ne=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-abbreviated-count"}).inject(c),ie=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-abbreviated-count-toggle"}).inject(ne);m.checkboxAbbreviatedcount=new a({type:"switch",label:l.get("QuantityDisplay.Abbreviated_count_display"),className:"primary",touchMode:!0}).inject(ie);var oe=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ne);g.tooltip(oe,{position:"top",shortHelp:l.get("QuantityDisplay.Abbreviated_count_display.popover")});var se=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-access-PLMParameters"}).inject(c),ce=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-PLMParameters-toggle"}).inject(se);m.checkboxAccessPLMParameters=new a({type:"switch",label:l.get("Advancedsearch.Access_to_plmparameters.title"),className:"primary",touchMode:!0}).inject(ce);var le=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(se);g.tooltip(le,{position:"top",shortHelp:l.get("Advancedsearch.Access_to_plmparameters.popover")});var de=p.getOption("OneSearchOFF");if(t.is(i)&&!0===i&&!0!==de){var ue=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-suggestions"}).inject(c),pe=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-Suggestions-toggle"}).inject(ue);m.checkboxSuggestions=new a({type:"switch",label:l.get("suggestion.title"),className:"primary",touchMode:!0}).inject(pe);var _e=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ue);g.tooltip(_e,{position:"top",shortHelp:l.get("suggestion.popover")});var he=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-snippets"}).inject(c),ge=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-Snippets-toggle"}).inject(he);m.checkboxSnippets=new a({type:"switch",label:l.get("search_snippets.title"),className:"primary",touchMode:!0}).inject(ge);var me=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(he);g.tooltip(me,{position:"top",shortHelp:l.get("search_snippets.popover")}),m.checkboxSuggestions.addEventListener("change",function(){o.enableButtons()}),m.checkboxSnippets.addEventListener("change",function(){o.enableButtons()})}var fe=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-force-AdvancedSearch"}).inject(c),Ce=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-force-AdvancedSearch-toggle"}).inject(fe);m.checkboxForceAdvSearch=new a({type:"switch",label:l.get("General.InContextSearch.forceAdvancedSearch.label"),className:"primary",touchMode:!0}).inject(Ce);var ye=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(fe);g.tooltip(ye,{position:"top",shortHelp:l.get("General.InContextSearch.forceAdvancedSearch.popover")}),m.checkboxForceAdvSearch.addEventListener("change",function(){o.enableButtons()});if(t.is(!0)){var ve=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-force-GuidedMode"}).inject(c),be=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-force-GuidedMode-toggle"}).inject(ve);m.checkboxForceGuidedMode=new a({type:"switch",label:l.get("General.forceGuidedMode.label"),className:"primary",touchMode:!0}).inject(be);var Se=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ve);g.tooltip(Se,{position:"top",shortHelp:l.get("General.forceGuidedMode.popover")}),m.checkboxForceGuidedMode.addEventListener("change",function(){o.enableButtons()})}h.onRender(c),s.render(c),m.viewModeComboBox.addEventListener("change",function(){o.enableButtons()}),m.deltaTimeComboBox.addEventListener("change",function(){o.enableButtons()}),m.numberResultComboBox.addEventListener("change",function(){o.enableButtons()}),m.checkboxAbbreviatedcount.addEventListener("change",function(){o.enableButtons()}),m.checkboxAccessPLMParameters.addEventListener("change",function(){o.enableButtons()}),m.dateModeComboBox.addEventListener("change",function(){o.enableButtons()}),t.is(m.csvSeparatorComboBox)&&m.csvSeparatorComboBox.addEventListener("change",function(){o.enableButtons()}),m.revisionComboBox.addEventListener("change",function(){o.enableButtons()}),o.removeMask(widget.body)},getTabInputsToStore:function(){var e=m.deltaTimeComboBox.currentValue;t.is(e)&&(e=e.replace(l.get("Minutes"),""));var a=m.viewModeComboBox.currentValue;if(t.is(a))for(let e=0;e<m._viewModeObject.length;e++){var r=m._viewModeObject[e];if(a===r.title){a=r.id;break}}var n=m.numberResultComboBox.currentValue;t.is(n)&&(n=n.replace(l.get("Items"),""));var i=m.dateModeComboBox.currentValue;if(t.is(i))for(let e=0;e<m._dateModeObject.length;e++){var o=m._dateModeObject[e];if(i===d.get(o.id+".title")){i=o;break}}var c=t.is(m.csvSeparatorComboBox)?m.csvSeparatorComboBox.currentValue:d.get("COMMA.title");if(t.is(c))for(let e=0;e<m._csvSeparatorObject.length;e++){var u=m._csvSeparatorObject[e];if(c===d.get(u.id+".title")){c=u;break}}var _=m.revisionComboBox.currentValue;if(t.is(_))for(let e=0;e<m._revisionObject.length;e++){var g=m._revisionObject[e];if(_===d.get(g.id+".title")){_=g;break}}var f={},C=m.defaultSortOptionComboBox.selectedIndex;switch(C){case 0:f={label:"relevancySort",value:"relevance",type:"group"};break;case 1:f={label:"ds6w:modified_SortAsc",value:"ds6w:modified",order:"asc",type:"num"};break;case 2:f={label:"ds6w:modified_SortDesc",value:"ds6w:modified",order:"desc",type:"num"};break;case 3:f={label:"ds6w:label_SortAsc",value:"ds6w:label",order:"asc",type:"alpha"};break;case 4:f={label:"ds6w:label_SortDesc",value:"ds6w:label",order:"desc",type:"alpha"};break;case 5:f={label:"ds6w:type",value:"ds6w:type",type:"type"}}var y={defaultViewModeAfterCacheCleaning:a,defaultDateMode:i,defaultCsvSeparator:c,defaultRevision:_,Recent_Content_Delta_Time:e,max_selection_for_selectall:n,preciseCount:!0!==m.checkboxAbbreviatedcount.checkFlag,enablePLM:m.checkboxAccessPLMParameters.checkFlag,forceAdvancedSearch:m.checkboxForceAdvSearch.checkFlag,GuidedMode:m.checkboxForceGuidedMode?m.checkboxForceGuidedMode.checkFlag:void 0,searchDefaultSort:f,searchDefaultSortIndex:C},v=p.getOption("OneSearch"),b=p.getOption("OneSearchOFF");return t.is(v)&&!0===v&&!0!==b&&(y.suggest_admin=m.checkboxSuggestions.checkFlag,y.search_snippet_admin=m.checkboxSnippets.checkFlag),s.getTabInputsToStore(y),h.updateTabInputsToStore(y),y},onResetTab:function(e){var a;if(a=t.is(e,"string")?JSON.parse(e):e,t.is(a)){if(a.hasOwnProperty("defaultViewModeAfterCacheCleaning")){var r=a.defaultViewModeAfterCacheCleaning;if(t.is(r)){for(let e=0;e<m._viewModeObject.length;e++){var n=m._viewModeObject[e];if(r===n.id){r=n.title;break}}m.viewModeComboBox.currentValue=r}}if(a.hasOwnProperty("searchDefaultSortIndex")){var i=a.searchDefaultSortIndex;t.is(i)&&(m.defaultSortOptionComboBox.selectedIndex=i)}if(a.hasOwnProperty("Recent_Content_Delta_Time")){var o=a.Recent_Content_Delta_Time;t.is(o)&&(o+=l.get("Minutes"),m.deltaTimeComboBox.currentValue=o)}if(a.hasOwnProperty("max_selection_for_selectall")){var c=a.max_selection_for_selectall;t.is(c)&&(c+=l.get("Items"),m.numberResultComboBox.currentValue=c)}if(a.hasOwnProperty("defaultDateMode")){var u=a.defaultDateMode;if(t.is(u)){for(let e=0;e<m._dateModeObject.length;e++){var _=m._dateModeObject[e];if(u.id===_.id){u=d.get(_.id+".title");break}}m.dateModeComboBox.currentValue=u}}else t.is(m._dateModeObject)&&t.is(m._dateModeObject[0])&&(m.dateModeComboBox.currentValue=d.get(m._dateModeObject[0].id+".title"));if(m.csvSeparatorComboBox)if(a.hasOwnProperty("defaultCsvSeparator")){var g=a.defaultCsvSeparator;if(t.is(g)){for(let e=0;e<m._csvSeparatorObject.length;e++){var f=m._csvSeparatorObject[e];if(g.id===f.id){g=d.get(f.id+".title");break}}m.csvSeparatorComboBox.currentValue=g}}else t.is(m._csvSeparatorObject)&&t.is(m._csvSeparatorObject[0])&&(m.csvSeparatorComboBox.currentValue=d.get(m._csvSeparatorObject[0].id+".title"));if(a.hasOwnProperty("defaultRevision")){var C=a.defaultRevision;if(t.is(C)){for(let e=0;e<m._revisionObject.length;e++){var y=m._revisionObject[e];if(C.id===y.id){C=d.get(y.id+".title");break}}m.revisionComboBox.currentValue=C}}else m.revisionComboBox.currentValue=d.get(m._revisionObject[0].id+".title");if(a.hasOwnProperty("preciseCount")){var v=a.preciseCount;t.is(v)&&(m.checkboxAbbreviatedcount.checkFlag=!0!==v)}if(a.hasOwnProperty("enablePLM")){var b=a.enablePLM;t.is(b)&&(m.checkboxAccessPLMParameters.checkFlag=b)}if(a.hasOwnProperty("forceAdvancedSearch")){var S=a.forceAdvancedSearch;t.is(S)&&(m.checkboxForceAdvSearch.checkFlag=S)}if(a.hasOwnProperty("GuidedMode")){var x=a.GuidedMode;t.is(x)&&t.is(m.checkboxForceGuidedMode)&&(m.checkboxForceGuidedMode.checkFlag=x)}var D=p.getOption("OneSearch"),T=p.getOption("OneSearchOFF");if(t.is(D)&&!0===D&&!0!==T){if(a.hasOwnProperty("suggest_admin")){var w=a.suggest_admin;t.is(w)&&(m.checkboxSuggestions.checkFlag=w)}else m.checkboxSuggestions.checkFlag=!0;if(a.hasOwnProperty("search_snippet_admin")){var A=a.search_snippet_admin;t.is(A)&&(m.checkboxSnippets.checkFlag=A)}else m.checkboxSnippets.checkFlag=!0}s.onResetTab(a),h.onResetTab(a.search_synonyms)}},updateSortLabelCallback:function(){const e=this.elementsList[this.selectedIndex];return e&&e.trueLabel?{label:e.trueLabel}:{label:this.label}}};return m}),define("DS/SearchControlCenter/scripts/ControlledOntology/SCCControlledOntology",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/WUXAutoComplete/AutoComplete","DS/Controls/ComboBox","DS/SNInfraUX/SearchSettings","DS/SearchControlCenter/scripts/ControlledOntology/OntologyDatasetsHelpers","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchControlCenterFetchService","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,a,r,n,i,o,s,c,l,d,u){"use strict";return{_structureToStore:[],_structureStored:null,_mainControlDivSection:null,_warningReport:"",_deletedConcepts:!1,_hierarchicalFatherMovement:!1,_duplicateConcepts:!1,render:function(e){this._parentDiv=e,this.renderControlledSection(this._parentDiv)},destroy:function(){this._parent(),t.is(s)&&t.is(s.destroy,"function")&&(s.destroy(),s=null)},getTabInputsToStore:function(){let e=[];if(0===this._structureToStore.length){let a={facetID:"SearchControl_6WTags"},r=l.getSettingsJSONFromTabName(a);r.hasOwnProperty("enterprise_ontology")&&t.is(r.enterprise_ontology.dataset,"array")&&r.enterprise_ontology.dataset.length>0&&(e=[{dataset:r.enterprise_ontology.dataset[0].dataset,applicativeId:r.enterprise_ontology.dataset[0].applicativeId,datasetTitle:r.enterprise_ontology.dataset[0].datasetTitle,"session@id":r.enterprise_ontology.dataset[0]["session@id"],sessionTitle:r.enterprise_ontology.dataset[0].sessionTitle,publisher:r.enterprise_ontology.dataset[0].publisher,modificationdate:r.enterprise_ontology.dataset[0].modificationdate,label:r.enterprise_ontology.dataset[0].label}]),this._structureToStore=e}return this._structureToStore},getInputFromStore:function(e){!0===o.getOption("allowEnterpriseDictionaryModification")?(this._structureToStore=[],this._structureStored=e):t.is(e,"array")&&0!==e.length&&(this._structureStored=e,this._structureToStore=e)},getSelectedDatasetTitle:function(){return this.datasetAutocomplete.value},onUpdateUI:function(){let e=!1;this._structureStored&&this._structureStored.length?e=!0:this._structureToStore&&this._structureToStore.length&&(e=!0),!0===e||(this.datasetAutocomplete.value="",this.datasetAutocomplete.elementsTree=void 0,s.clean(),this.buildSearchResults())},renderControlledSection:function(t){this._mainControlDivSection=e.create("div",{class:"search_center_main_div",id:"control-Ontology-main"}).inject(t);e.create("div",{class:"",id:"control-Ontology-title"}).inject(this._mainControlDivSection);this.renderDataSetSection(this._mainControlDivSection)},renderDataSetSection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"control_vocab_category_section"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection)},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{}).inject(t);var a=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),r=this._createDatasetControl({class:"control_vocab_community_title",divRow:a});this.datasetAutoCompleteDiv=r},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("control_vocab_add_category_row_span"),a},_createDatasetControl:function(t){var a=e.create("div",{class:t.class,id:"Ontology_DataSet_Combo"}).inject(t.divRow);return this.datasetAutocomplete=new i({placeholder:u.get("6WTagsFilter.ControlledOntology.Dataset.title"),touchMode:!0,enableSearchFlag:!0,allowFreeInputFlag:!1,multiSearchMode:!0===o.getOption("allowEnterpriseDictionaryModification")}).inject(a),this.datasetAutocomplete.elements.container.setStyle("width","100%"),this.datasetAutocomplete.addEventListener("change",this._onChangeDataset.bind(this)),this.buildSearchResults(),this.datasetAutocomplete},buildSearchResults:function(){let e=this,a={onComplete:function(a){t.is(a)&&(e.datasetAutocomplete.elementsTree=a)},onFailure:function(a){t.is(a)&&(e.datasetAutocomplete.elementsTree=a)}};s.buildSearchResults(a)},_onChangeDataset:function(e){let a=this,r=!0,n=a.datasetAutocomplete.value;if(t.is(n,"array")){r=!1;let e=n.length;if(0===e)return void(a._structureToStore=[]);let t=!1,i=a._structureToStore.length;if(e<i)for(let r=i-1;r>=0;r--){let i=a._structureToStore[r];t=!0;for(let a=0;a<e;a++){if(n[a]===i.datasetTitle){t=!1;break}}!0===t&&(a._structureToStore.splice(r,1),r=-1)}if(!0===t)return}let i={onComplete:function(e){a._warningReport="",a._deletedConcepts=!1,a._hierarchicalFatherMovement=!1,a._duplicateConcepts=!1,a._addOrnotInDataSetStructure(e,r),c.getOntologyConceptsFromSessionId(a._structureToStore).then(function(){let e=c.getRenamedConcepts();e&&(a._warningReport+="<br><b>Renamed Concepts:</b><br><br>",e.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.original_concept.get("id")+" is renamed from "+e.original_concept.get("label")+" to "+e.renamed_concept.get("label")+"<br>"}));let r=c.getDeprecatedConcepts();r&&(a._warningReport+="<br><b>Deprecated Concepts:</b> <br><br>",r.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let n=c.getUnDeprecatedConcepts();n&&(a._warningReport+="<br><b>UnDeprecated Concepts:</b> <br><br>",n.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let i=c.getNewConcepts();t.is(i)&&(a._warningReport+="<br><b>New Concepts:</b> <br><br>",i.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let o=c.getDeletedConcepts();t.is(o)&&(a._deletedConcepts=!0,a.areConceptsMoved()||a.areConceptsDuplicated()?a._warningReport+="<br><b>Deployment not allowed, because deleted concepts found!!! </b><br><br><b> Deleted Concepts:</b> <br><br>":a._warningReport="<br><b>Deployment not allowed, because deleted concepts found!!! </b><br><br><b> Deleted Concepts:</b> <br><br>",o.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let s=c.getMovedConcepts();t.is(s)&&(a._hierarchicalFatherMovement=!0,a.areConceptsDeleted()||a.areConceptsDuplicated()?a._warningReport+="<br><b>Deployment not allowed, hierarchical father movement found!!! </b><br><br><b> Hierarchical Father Movement:</b> <br><br>":a._warningReport="<br><b>Deployment not allowed, hierarchical father movement found!!! </b><br><br><b> Hierarchical Father Movement:</b> <br><br>",s.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;<b>"+e.concept.get("id")+"</b> is moved from father <b>"+e.previous_father.get("id")+"</b> to father <b>"+e.current_father.get("id")+"</b><br>"}));let l=c.getDuplicateConcepts();t.is(l)&&(a._duplicateConcepts=!0,a.areConceptsDeleted()||a.areConceptsMoved()?a._warningReport+="<br><b>Deployment not allowed, duplicate concepts under same hierarchy found!!! </b><br><br><b> Duplicate Concepts:</b> <br><br>":a._warningReport="<br><b>Deployment not allowed, duplicate concepts under same hierarchy found!!! </b><br><br><b> Duplicate Concepts:</b> <br><br>",l.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;<b>"+e.org_concept.get("id")+"</b> is duplicated as <b>"+e.duplicate.get("id")+"</b> with label <b>"+e.duplicate.get("label")+"</b><br>"}))},function(){reject("Failed to compare datasets"),a._warningReport="<b>Failed to compare datasets</b><br><br>"})},onFailure:function(e){a._addOrnotInDataSetStructure(e,r)}};s.getDataSetStructure(i)},getWarningReport:function(){let e=this._warningReport;return""===e&&(e="<b>Old And New datasets are identical!</b>"),this.getSelectedDatasetTitle()||(e="<b>Please select a valid dataset!</b>"),e},areConceptsDeleted:function(){return this._deletedConcepts},areConceptsMoved:function(){return this._hierarchicalFatherMovement},areConceptsDuplicated:function(){return this._duplicateConcepts},_addOrnotInDataSetStructure:function(e,a){let r=this,n=t.is(e)&&e.datasetTitle,i=!0,o=r._structureToStore.length-1;if(t.is(a)&&!0===a)r._structureToStore=[],i=!0;else for(let e=o;e>=0;e--){if(r._structureToStore[e].datasetTitle===n){r._structureToStore.splice(e,1),i=!1;break}}!0===i&&r._structureToStore.push(e)}}}),define("DS/SearchControlCenter/scripts/SCCTagColorizationHelper",["UWA/Core","UWA/Promise","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/WAFData/WAFData","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchLogin","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchPreferences"],function(e,t,a,r,n,i,o,s,c){"use strict";return{getAllPredicates:function(e){var r=this;return new t(function(t,n){var i={};r.getAllTags().then(function(n){var o=r._getPredicateValuesWithSource(n);r._mergeTags(o,e),i.sourceInfo=o,r.getPredicateValuesNls(o).then(function(e){var r=Object.keys(e).map(function(e){return e.split("/").pop()});a.getResourcesInfo(r.join(","),{tenantId:s.getPlatformID(),onComplete:function(a){var r={};a.vocabularyElementNLSInfo.forEach(function(e){r[e.uri]=e.nlsName}),Object.keys(e).forEach(function(t){e[t].nls=r[t.split("/").pop()]}),i.colorization=e,t(i)},onFailure:function(){i.colorization={},t(i)}})})})})},getAllTags:function(){var a=this;return new t(function(t,o){var l=e.is(n.getOption("tagColorQuery"))?n.getOption("tagColorQuery"):e.is(c.getItem("tagColorQuery"))?c.getItem("tagColorQuery"):"[ds6w:modified]>1970/01/01";c.setItem("tagColorQuery",l);var d={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({with_indexing_date:!0,with_nls:!1,label:"3DSearch-SCC-TagColorization"+i.getUserId()+"-"+(new Date).getTime(),locale:i.getLanguage(),query:l,refine:{},specific_source_parameter:{},select_predicate:["ds6w:label"],source:[],tenant:s.getPlatformID(),nresults:1,order_by:"desc",order_field:"relevance",start:0,with_synthesis:!0})};a.get3DSearchSericeURLPromise().then(function(e){d.onComplete=function(e){var r=JSON.parse(e),n=a._removeUnsupportedTagValues(r.facets);t(n)},d.onFailure=function(e){o(e)},r.authenticatedRequest(e+"/search",d)})})},_removeUnsupportedTagValues:function(t){var a=[];if(e.is(t,"array")){var r=n.getOption("tagColorization");a=t.filter(function(e){return r.supported_value_types.indexOf(e.type)>=0&&r.unsupported_predicates.indexOf(e.sixw)<0})}return a},getPredicateValuesNls:function(a){var r=this;return new t(function(t,n){var i={},s={},c={};e.is(a)&&(Object.keys(a).forEach(function(e){i[e]||(i[e]=[]),Object.keys(a[e]).forEach(t=>{i[e].push({value:t,source:[o.getServiceFromSource(a[e][t])]})})}),Object.keys(i).forEach(function(e){var t=e.split("/").pop();s[t]=i[e]}),r.getTagValuesNls(s).then(function(e){Object.keys(i).forEach(function(t){var a=t.split("/").pop();c[t]||(c[t]={values:e[a]})}),t(c)}))})},getTagValuesNls:function(e){return new t(function(t,r){a.getNlsOfPropertiesValuesBySource(e,{tenantId:s.getPlatformID(),lang:i.getLanguage(),onComplete:function(e){t(e)},onFailure:function(){t({})}})})},get3DSearchSericeURLPromise:function(){return i.getSericeURLPromise(s.getPlatformID(),"3DSearch")},_getPredicateValuesWithSource:function(t){var a={};return e.is(t,"array")&&t.forEach(t=>{if(e.is(t.object,"string")){var r=t.sixw;a[r]||(a[r]={}),a[r][t.object]=t.sources[0]}}),a},_mergeTags:function(t,a){e.is(t)&&e.is(a)&&Object.keys(a).forEach(r=>{e.is(t[r])?t[r]=e.merge(t[r],a[r]):t[r]=e.clone(a[r],!0)})}}}),define("DS/SearchControlCenter/scripts/SCCTagColorization",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/ComboBox","DS/SearchControlCenter/control/SCCCard","DS/SearchControlCenter/control/SCCColorPicker","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SCCTagColorizationHelper","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/Controls/Toggle","DS/Controls/LineEditor","DS/SNInfraUX/SearchPreferences","DS/SNInfraUX/SearchSettings","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_){"use strict";return{_tagColorizeMap:null,_parentDiv:null,_predicateToCBMap:null,render:function(e){this._parentDiv=e,this._tagColorizeMap={},this._predicateToCBMap=new Map},onRender:function(a){var n=this;n.tabSettings=a,n._cleanupUI();var i=t.is(n.tabSettings)&&t.is(n.tabSettings.sourceInfo)?n.tabSettings.sourceInfo:void 0;s.getAllPredicates(i).then(function(a){n.tagsToShowInCB=t.clone(a.colorization,!0),n.tagsSource=t.clone(a.sourceInfo,!0),n.div6WtagsColorizeSpan=e.create("div",{class:"scc_taghierarchical_div",id:"search-center-tag-colorize"}).inject(n._parentDiv);var i=e.create("div",{class:"search_center_general_tab_div search_center_margin"}).inject(n.div6WtagsColorizeSpan),o=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"div_tag_olorize_text"}).inject(i);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:c.get("6WTagsFilter.ColorizeTagTitle")}).inject(o);var s=e.create("div",{class:"search_center_div_left",id:"div_tag_colorize_card_combo_span"}).inject(n.div6WtagsColorizeSpan);p.getOption("updateQuery")&&n._changeSearchQueryUI().inject(s);var l=e.create("div",{class:"search_center_div_datasource search_center_only_grid search_center_top_margin",id:"div_tag_colorize_combo_span"}).inject(s);n.tagColorizePredicatesComboBox=new r({elementsList:n._predicateToShowCB(),placeholder:c.get("6WTagsFilter.ColorizeTag.PredicateComboBox.placeholder"),touchMode:!0,mainElementVisibleFlag:!0}).inject(l),n.divTagColorizeCardSpan=e.create("div",{class:"div-tag-colorize-card-span",id:"div_tag_colorize_card_span"}).inject(s);var d=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(o);_.tooltip(d,{position:"top",shortHelp:c.get("6WTagsFilter.ColorizeTag.PredicateComboBox.info")}),n.tagColorizePredicatesComboBox.addEventListener("hide",n._onChangePredicates.bind(n),!1),t.is(n.tabSettings)&&n._createCardsWithStoredPredicates(n.tabSettings.colorization)})},_createCardsWithStoredPredicates:function(e){var a=this;t.is(e)&&Object.keys(e).length>0&&Object.keys(e).forEach(function(t){var r=e[t],n=a._createPredicateCard(t);Object.keys(a._storedValueToShow(t,r)).forEach(function(e){a._createPredicateValueCard(n.getBodyElement(),t,e,r[e])})})},_onChangePredicates:function(e){if(-1!==e.dsModel.selectedIndex){e.stopPropagation();var t=e.dsModel.value;e.dsModel.currentLabel;this._createPredicateCard(t),e.currentTarget.dsModel.selectedIndex=-1}},_createPredicateCard:function(a){var i=this,o=i.tagsToShowInCB[a].nls;if(i._isPredicateCardAlreadyPresent(a)){var s=c.get("6WTagsFilter.ColorizeTag.warning.predicateExist");this._showWarningAlert(s)}else{if(!(t.is(i._tagColorizeMap,"object")&&Object.keys(i._tagColorizeMap).length>=100)){var l=e.create("div",{class:"div-scc-card-container"}).inject(this.divTagColorizeCardSpan),d=new n({header:{label:o,value:a},closable:!0,isBodyRequired:!0,className:"scc-predicate-card"}).inject(l),u=e.create("div",{class:"div-tag-colorize-combo-box search_center_only_grid"}),p=new r({elementsList:i._valueToShowInCB(a),placeholder:c.get("6WTagsFilter.ColorizeTag.ValueComboBox.placeholder"),touchMode:!0,domId:"colorize_tag_"+o.replace(/[/\s]/g,"_"),mainElementVisibleFlag:!0}).inject(u);return d.appendChildToBody(u),i._storePredicateInMemory(a),i._predicateToCBMap.set(a,p),p.addEventListener("hide",function(e){i._onChangeValues(e,a)},!1),d.addEvent("onClose",function(e){i._removePredicate(e,a)}),i._removeFromCBModel(this.tagColorizePredicatesComboBox,a),d}s=c.get("6WTagsFilter.ColorizeTag.warning.predicateExeedsLimit");this._showWarningAlert(s)}},_onChangeValues:function(e,t){if(e.stopPropagation(),o.enableButtons(),-1!==e.dsModel.selectedIndex){e.dsModel.currentLabel;var a=e.dsModel.currentValue,r=e.currentTarget.getParent().getParent();this._createPredicateValueCard(r,t,a),e.dsModel.selectedIndex=-1}},_createPredicateValueCard:function(a,r,o,s){var l=this;if(l._isValueCardAlreadyPresent(r,o)){var d=c.get("6WTagsFilter.ColorizeTag.warning.predicateValueExist");this._showWarningAlert(d)}else{var u=l._tagColorizeMap[r];if(t.is(u,"object")&&Object.keys(u).length>=21){d=c.get("6WTagsFilter.ColorizeTag.warning.valueExeedsLimit");this._showWarningAlert(d)}else{var p=l.tagsToShowInCB[r].values[o],_=e.create("div",{class:"div-tag-colorize-predicate-value scc-card-flex"}),h=new i({initialValue:s,colorPickerLabel:p}).inject(_),g=new n({header:{label:p,value:o},closable:!0,isBodyRequired:!1,className:"scc-predicate-value-card"}).inject(_);_.inject(a),this._storePredicateValuesInMemory(r,o,h._getCurrentColor()),h.addEvent("onColorChange",function(e){l._onColorChange(e,r,o)}),g.addEvent("onClose",function(e){l._removePredicateValue(e,r,o)}),l._removeFromCBModel(l._predicateToCBMap.get(r),o)}}},_onColorChange:function(e,t,a){o.enableButtons(),this._storePredicateValuesInMemory(t,a,e.color)},_removePredicateValue:function(e,t,a){var r=e.target;o.enableButtons(),this._addToCBModel(this._predicateToCBMap.get(t),a,this.tagsToShowInCB[t].values[a]),this._removePredicateValueFromMemory(t,a),r.getParent().destroy()},_removePredicate:function(e,t){var a=e.target;o.enableButtons(),this._removePredicateFromMemory(t),this._addToCBModel(this.tagColorizePredicatesComboBox,t,this.tagsToShowInCB[t].nls),this._predicateToCBMap.delete(t),a.getParent().destroy()},getInputsToStore:function(){var e=this,a={};a.colorization=t.clone(this._tagColorizeMap,!0);var r={};return Object.keys(e._tagColorizeMap).forEach(t=>{Object.keys(e._tagColorizeMap[t]).forEach(a=>{r[t]||(r[t]={}),r[t][a]=e.tagsSource[t][a]})}),a.sourceInfo=r,e.tabSettings=a,a},_storePredicateInMemory:function(e){t.is(e)&&(t.is(this._tagColorizeMap[e])||(this._tagColorizeMap[e]={}))},_storePredicateValuesInMemory:function(e,a,r){if(t.is(e)&&t.is(a)&&t.is(r)){t.is(this._tagColorizeMap[e])||(this._tagColorizeMap[e]={});var n=this.tagsToShowInCB[e].values[a],i=this;Object.keys(this.tagsToShowInCB[e].values).forEach(function(t){i.tagsToShowInCB[e].values[t]==n&&(i._tagColorizeMap[e][t]=r)})}},_removePredicateValueFromMemory:function(e,a){if(t.is(e)&&t.is(a)){var r=this.tagsToShowInCB[e].values[a],n=this;Object.keys(this._tagColorizeMap[e]).forEach(function(t){n.tagsToShowInCB[e].values[t]==r&&delete n._tagColorizeMap[e][t]})}},_removePredicateFromMemory:function(e){t.is(e)&&delete this._tagColorizeMap[e]},_predicateToShowCB:function(){var e=this,t=[];return Object.keys(e.tagsToShowInCB).forEach(function(a){t.push({label:e.tagsToShowInCB[a].nls,value:a})}),t},_removeFromCBModel:function(e,a){var r=e.elementsList;if(t.is(r,"array")&&r.length>0){var n=t.clone(r,!0);n.forEach((t,r)=>{if(t.value===a)return n.splice(r,1),void(e.elementsList=n)})}},_addToCBModel:function(e,a,r){var n=e.elementsList;if(t.is(n,"array")){var i=t.clone(n,!0);i.push({label:r,value:a}),e.elementsList=i}},_valueToShowInCB:function(e){var t=this,a=[],r={};return Object.keys(t.tagsToShowInCB[e].values).forEach(function(n){var i=t.tagsToShowInCB[e].values[n];r[i]||(a.push({label:i,value:n}),r[i]=!0)}),a},_storedValueToShow:function(e,t){var a={},r={},n=this;return Object.keys(t).forEach(function(i){var o=n.tagsToShowInCB[e].values[i];a[o]||(r[i]=t[i],a[o]=!0)}),r},_isPredicateCardAlreadyPresent:function(e){return t.is(this._tagColorizeMap[e])},_isValueCardAlreadyPresent:function(e,a){return t.is(this._tagColorizeMap[e][a])},_showWarningAlert:function(e){var t=o.createWdgAlert();t.inject(widget.body,"top"),t.add({className:"warning applyChangesAlert",message:e})},_cleanupUI:function(){t.is(this.div6WtagsColorizeSpan)&&(this.div6WtagsColorizeSpan.destroy(),this.div6WtagsColorizeSpan=null),this._tagColorizeMap={},this._predicateToCBMap.clear()},_changeSearchQueryUI:function(){var t=this,a=e.create("div",{class:"div-change-search-query"}),r=e.create("div",{class:"div-change-search-query-toggle"}).inject(a),n=new l({type:"checkbox",label:c.get("6WTagsFilter.ColorizeTag.ChnageQuery.label"),checkFlag:!1,value:0}).inject(r),i=e.create("div",{class:"div-change-search-query-editor scc-card-flex search_center_disable",disabled:!0,styles:{height:"36px",border:"solid 1px #c9baba","border-radius":"4px"}}).inject(a),o=e.create("input",{placeholder:c.get("6WTagsFilter.ColorizeTag.ChnageQuery.placeholder"),type:"search",value:u.getItem("tagColorQuery"),styles:{width:"100%",border:"none","margin-left":"5px"}}).inject(i);e.create("div",{class:"fonticon fonticon-update",styles:{right:"12px",cursor:"pointer","margin-top":"6px","margin-right":"6px"},events:{click:function(){u.setItem("tagColorQuery",o.value),t.onRender(t.tabSettings)}}}).inject(i);return n.addEventListener("buttonclick",function(e){e.stopPropagation(),e.dsModel.checkFlag?i.removeClassName("search_center_disable"):i.addClassName("search_center_disable")}),a}}}),define("DS/SearchControlCenter/scripts/Searchcontrol6WTagsFilter",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/LineEditor","DS/Controls/Editor","DS/UIKIT/Popover","DS/UIKIT/Mask","DS/FedDictionaryAccess/FedDictionaryAccessAPI","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/SearchControlCenter_AllowedApps.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SCCTagColorization","DS/SearchControlCenter/scripts/ControlledVocabulary/SCCControlledVocabulary","DS/SearchControlCenter/scripts/ControlledOntology/SCCControlledOntology","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCInContextSearchManager","text!DS/SNInfraUX/assets/SearchcontrolCenter_TagRelationship.json","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/TaggerConfigAccess","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/SNInfraUX/SearchControlCenterFetchService","DS/UIKIT/Scroller","DS/SearchControlCenter/Views/SearchControlCenterLayoutView","DS/Controls/Button","DS/Controls/ButtonGroup","DS/SNInfraUX/SearchPreferences","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Windows/ImmersiveFrame","DS/TagNavigator/simplified/views/WrapperView","DS/Controls/Label","DS/Utilities/WebUXColorEnums"],function(e,t,a,r,n,i,o,s,c,l,d,u,p,_,h,g,m,f,C,y,v,b,S,x,D,T,w,A,I,N,j,W,O,B,E,P,R,F){"use strict";let M={preferredPredicatesComboBox:null,preferredWhatCards:null,preferredWhereCards:null,preferredWhoCards:null,preferredWhenCards:null,preferredHowCards:null,preferredWhyCards:null,excludedPredicatesComboBox:null,excludedWhatCards:null,excludedWhereCards:null,excludedWhoCards:null,excludedWhenCards:null,excludedHowCards:null,excludedWhyCards:null,checkboxAttributeDisplay:null,toggleActivateTagOperator:null,applicationCntxtComboBox:null,companyTagsSearchSuggest:null,_attributesMap:{},_6WSubProperties:[],_6WPredicatesMap:[],_listOfDefaultAndTags:[],_listOfIrrelevantAndTags:[],_appsMap:{},_filter6WRootPredicatesPromise:a.deferred(),_rootWOfPredicatesPromise:a.deferred(),_datasetInput:null,iconurlInput:"",prefixInput:"",scrollerText:"",_expertGrp:"",_advocacyGrp:"",scrollerBody:{},_controlledVocabMode:!1,_includeTagVal:"",_includeTagUri:"",_excludeTagVal:"",_includeWVal:"",_includeDHierarchyTagVal:"",_operatorOR:"",_operatorAND:"",_operatorXOR:"",_operatortag:"",_textOnCard:"",onRenderFacet:function(a){let i=e.create("div",{class:"scc_tagsDisplay_div",id:"search-center-6w1"}).inject(a),o=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"general-tab-resultsdisplay-text"}).inject(i);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:u.get("6WTagsFilter.tagsDisplay.title")}).inject(o);let c=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"controlledVocabModeSpan"}).inject(i),l=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"Enable_option_to_edit_tags_categories"}).inject(c);M.EditTagCategoryON=new r({type:"switch",label:"Enable option to edit tags categories",touchMode:!0,value:1}).inject(l),M.EditTagCategoryON.addEventListener("change",function(){_.enableButtons(),!1===M.EditTagCategoryON.checkFlag?(b.addClassName("search_center_disable"),S.addClassName("search_center_disable"),M.divWtreeWrapperview.addClassName("search_center_disable"),O.addClassName("search_center_disable")):(b.removeClassName("search_center_disable"),S.removeClassName("search_center_disable"),M.divWtreeWrapperview.removeClassName("search_center_disable"),O.removeClassName("search_center_disable"))}.bind(this));let d=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(l);new s({target:d,className:".inverted",trigger:"hover",animate:"true",position:"right",body:u.get("6WTagsFilter.EditTagCategory.popover"),title:""});let b=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"general-tab-resultsdisplay-text"}).inject(i);e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex",text:u.get("6WTagsFilter.SelectAppConfiguration.display")}).inject(b);let S=e.create("div",{class:"search_center_div_left_6w search_center_only_grid",id:"context-Application-6WTags-combo"}).inject(i),T=[],I=JSON.parse(p);if(t.is(I)&&I.hasOwnProperty("applications")&&t.is(I.applications,"array"))for(let e=0;e<I.applications.length;e++){let t=I.applications[e];M._appsMap[t.nlsName]=t.appID,T.push(t.nlsName)}M.applicationConfigComboBox=new n({elementsList:T,currentValue:T[0],selectedIndex:0,touchMode:!0,mainElementVisibleFlag:!0}).inject(S),M.applicationConfigComboBox.addEventListener("change",function(){_.enableButtons(),_.clearLocalCacheFor6WTags(),M.cleanUpAttributeTags();let e=M._getWtreeContents(M.divWhatContent);if(0===e.predicates.length&&0===e.excluded_predicates.length){let e=document.getElementById("content-what");M.collapseRootWArea(e)}let a=M._getWtreeContents(M.divWhoContent);if(0===a.predicates.length&&0===a.excluded_predicates.length){let e=document.getElementById("content-who");M.collapseRootWArea(e)}let r=M._getWtreeContents(M.divWhenContent);if(0===r.predicates.length&&0===r.excluded_predicates.length){let e=document.getElementById("content-when");M.collapseRootWArea(e)}let n=M._getWtreeContents(M.divWhereContent);if(0===n.predicates.length&&0===n.excluded_predicates.length){let e=document.getElementById("content-where");M.collapseRootWArea(e)}let i=M._getWtreeContents(M.divWhyContent);if(0===i.predicates.length&&0===i.excluded_predicates.length){let e=document.getElementById("content-why");M.collapseRootWArea(e)}let o=M._getWtreeContents(M.divHowContent);if(0===o.predicates.length&&0===o.excluded_predicates.length){let e=document.getElementById("content-how");M.collapseRootWArea(e)}w.getAppWisePredicates(M._appsMap[M.applicationConfigComboBox.currentValue],!1).then(function(e){let a=null,r=null;if(e.hasOwnProperty("preferred_predicates")&&(a=e.preferred_predicates),e.hasOwnProperty("excluded_predicates")&&(r=e.excluded_predicates),t.is(a)&&a.length>0)for(let e=0;e<a.length;e++){let t=a[e].uri,r=M._get6WVal(t),n={label:M._attributesMap[t],uri:t,wVal:r};M._includeTagValue(n)}if(t.is(r)&&r.length>0)for(let e=0;e<r.length;e++){let t=r[e].uri,a=M._get6WVal(t),n={label:M._attributesMap[t],uri:t,wVal:a};M._excludeTagValue(n)}},function(){console.log("Error: Default json for preferred predicates has not been defined yet for this APP")})}.bind(this));let W=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"general-tab-resultsdisplay-text"}).inject(i);e.create("p",{class:"button_tags search_center_general_display_flex",text:u.get("6WTagsFilter.SelectAppConfigurationtagline.display")}).inject(W);let O=e.create("div",{class:"search_center_div_right_6w search_center_only_grid search_center_top_margin",id:"6WtagsButtonspan"}).inject(i),B=new j({type:"checkbox"}).inject(O),E=new N({label:u.get("SearchCenter6WTagsFilter.includetagin6WtreeButton.value"),emphasize:"primary",displayStyle:"normal",domId:"includeTag",class:"button_tags"});B.addChild(E);let R=new N({label:u.get("SearchCenter6WTagsFilterexcludetagin6WtreeButton.value"),emphasize:"secondary",displayStyle:"normal",domId:"ExcludeTag",class:"button_tags"});B.addChild(R);let F=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"controlledVocabToggleSpan"}).inject(i),k=this,U=new x({className:"site-reset",closable:!0,header:u.get("SearchCenter6WTagsFilter.includetagin6WtreeButton.value"),body:"",footer:[new D({value:"Include",className:"primary",id:"Include_button",events:{onClick:function(){k._includeTagValue(),U.hide()}}}),new D({value:"Cancel",className:"default",id:"Include_cancel_button",events:{onClick:function(){U.hide()}}})]}).inject(F);U.setBody(this._createAppAttrControl("includeModal")),E.addEventListener("buttonclick",function(){U.show()});let L=new x({className:"site-reset",closable:!0,header:u.get("SearchCenter6WTagsFilterexcludetagin6WtreeButton.value"),body:"",footer:[new D({value:"Exclude",id:"Exclude_button",className:"primary",events:{onClick:function(){k._excludeTagValue(),L.hide()}}}),new D({value:"Cancel",className:"default",id:"Exclude_cancel_button",events:{onClick:function(){L.hide()}}})]}).inject(F);R.addEventListener("buttonclick",function(){L.show()}),L.setBody(this._createAppAttrControl("excludeModal")),M.divWtreeWrapperview=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6Wtree_wrapper",styles:{"overflow- y":"auto","overflow- x":"auto"}}).inject(i),M.divWtreeWrapperview.addClassName("root-wrapper-view-scc"),M.divWhatContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_What_Content_div"}),M.divWhoContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_Who_Content_div"}),M.divWhenContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_When_Content_div"}),M.divWhereContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_Where_Content_div"}),M.divWhyContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_Why_Content_div"}),M.divHowContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_How_Content_div"});const V=[{rootW:"ds6w:what",wExpandStatus:!0,expandDirection:"vertical",content:M.divWhatContent,noResize:!0},{rootW:"ds6w:who",wExpandStatus:!0,expandDirection:"vertical",content:M.divWhoContent,noResize:!1},{rootW:"ds6w:when",wExpandStatus:!0,expandDirection:"vertical",content:M.divWhenContent,noResize:!1},{rootW:"ds6w:where",wExpandStatus:!0,expandDirection:"vertical",content:M.divWhereContent,noResize:!1},{rootW:"ds6w:why",wExpandStatus:!0,expandDirection:"vertical",content:M.divWhyContent,noResize:!1},{rootW:"ds6w:how",wExpandStatus:!0,expandDirection:"vertical",content:M.divHowContent,noResize:!1}];for(let e of V){new P(e).render().inject(M.divWtreeWrapperview)}!1===M.EditTagCategoryON.checkFlag?(b.addClassName("search_center_disable"),S.addClassName("search_center_disable"),M.divWtreeWrapperview.addClassName("search_center_disable"),O.addClassName("search_center_disable")):(b.removeClassName("search_center_disable"),S.removeClassName("search_center_disable"),M.divWtreeWrapperview.removeClassName("search_center_disable"),O.removeClassName("search_center_disable"));let H=e.create("div",{class:"scc_tagsOperator_div",id:"search-center-6w2"}).inject(a),z=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"tagoperatortext"}).inject(H);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:u.get("6WTagsFilter.tagOperator.title")}).inject(z);let J=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"tagoperatorSpan"}).inject(H),X=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"toggleenabletagoperatortext"}).inject(J);M.toggleActivateTagOperator=new r({type:"switch",label:"Enable custom tags operator",value:0,touchMode:!0}).inject(X),M.toggleActivateTagOperator.addEventListener("change",function(){_.enableButtons(),!1===M.toggleActivateTagOperator.checkFlag?(M.tagRelationshipCards.addClassName("search_center_disable"),K.addClassName("search_center_disable")):(M.tagRelationshipCards.removeClassName("search_center_disable"),K.removeClassName("search_center_disable"))}.bind(this));let G=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(X);new s({target:G,className:".inverted",trigger:"hover",animate:"true",position:"right",body:u.get("6WTagsFilter.tagOperator.popover"),title:""});let q=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"general-tab-resultsdisplay-text"}).inject(H);e.create("p",{class:"button_tags search_center_general_display_flex",text:u.get("6WTagsFilter.Tagoperatortagline.display")}).inject(q);let K=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_disable",id:"general-tab-resultsdisplay-text"}).inject(H),Q=new N({label:u.get("AddTagOperatorButton.value"),emphasize:"primary",displayStyle:"normal",domId:"add_tag_operator",class:"button_tags"}).inject(K),Y=new x({className:"site-reset",closable:!0,header:u.get("AddTagOperatorButton.value"),body:"",footer:[new D({value:"Add",className:"primary",id:"Add_button",events:{onClick:function(){k._addtagOperator(),Y.hide()}}}),new D({value:"Cancel",className:"default",id:"Cancel_Add_button",events:{onClick:function(){Y.hide()}}})]}).inject(F);Y.setBody(this._createTagOperatorModal("tagOperatorModal")),Q.addEventListener("buttonclick",function(){Y.show()}),M.divDatagrid=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"Datagrid-div",styles:{"overflow- y":"auto","overflow- x":"auto",height:"auto"}}).inject(H),M.tagRelationshipCards=e.create("div",{class:"search_center_created_categories_section_header scc-tag-relationship-row search_center_disable",id:"tag_operator_tagRelationshipCards"}).inject(M.divDatagrid);let $=e.create("div",{class:"search_center_created_categories_section_header search_center_font_and_color search_center_general_display_flex",id:"Tag_operator_table_span"}).inject(M.tagRelationshipCards),Z=(e.create("div",{class:"search_center_font_and_color",text:u.get("Tag.display"),Styles:{width:"400px"}}).inject($),e.create("div",{class:"search_center_font_and_color margin_left_right",id:"OperatorText",text:u.get("Operator.display"),Styles:{"margin-right":"1px"}}).inject($),e.create("div",{class:"search_center_font_and_color  margin_left_right",text:u.get("Action.display"),Styles:{"margin-right":"1px"}}).inject($),M.tagRelationshipCards);if(Z.childElementCount>1?Z.show():Z.hide(),this._listOfDefaultAndTags.length<=0&&this._listOfIrrelevantAndTags.length<=0){let e=JSON.parse(y);if(t.is(e)&&e.hasOwnProperty("Predicates_Default_AND")&&t.is(e.Predicates_Default_AND,"array"))for(let t=0;t<e.Predicates_Default_AND.length;t++){let a=e.Predicates_Default_AND[t];this._listOfDefaultAndTags.push(a)}if(t.is(e)&&e.hasOwnProperty("Predicates_Irrelevant_AND")&&t.is(e.Predicates_Irrelevant_AND,"array"))for(let t=0;t<e.Predicates_Irrelevant_AND.length;t++){let a=e.Predicates_Irrelevant_AND[t];this._listOfIrrelevantAndTags.push(a)}}let ee=e.create("div",{class:"scc_taghierarchical_div",id:"search-center-6w3"}).inject(a),te=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"taghierarchicaltext"}).inject(ee);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:u.get("6WTagsFilter.taghierarchical.title")}).inject(te);let ae=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"taghierarchicalSpan"}).inject(ee),re=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"toggleenabletaghierarchicaltext"}).inject(ae);M.EnableTagHierarchicalON=new r({type:"switch",label:u.get("6WTagsFilter.taghierarchicaltoggle.label"),touchMode:!0,value:0}).inject(re),M.EnableTagHierarchicalON.addEventListener("change",function(){_.enableButtons(),!1===M.EnableTagHierarchicalON.checkFlag?(M.divDHierarchyWtree.addClassName("search_center_disable"),ie.addClassName("search_center_disable")):(M.divDHierarchyWtree.removeClassName("search_center_disable"),ie.removeClassName("search_center_disable"))}.bind(this));let ne=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(re);new s({target:ne,className:".inverted",trigger:"hover",animate:"true",position:"right",body:u.get("6WTagsFilter.EditTagHierarchical.popover"),title:""});let ie=e.create("div",{class:"search_center_div_right_6w search_center_general_display_flex",id:"divAddDeepHierarchyTag"}).inject(ee),oe=new N({label:u.get("AddDeepHierarchyTagButton.value"),emphasize:"primary",displayStyle:"normal",domId:"adddeepHierarchytag",class:"button_tags search_center_div_right"}).inject(ie),se=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"divAddDeepHierarchyTag"}).inject(i),ce=new x({className:"site-reset",closable:!0,header:u.get("AddDeepHierarchyTagButton.value"),body:"",footer:[new D({id:"addDeepHierarchy_addButton",value:"Add",className:"primary",events:{onClick:function(){k._includeDHierarchyTagValue(),ce.hide()}}}),new D({id:"addDeepHierarchy_cancelButton",value:"Cancel",className:"default",events:{onClick:function(){ce.hide()}}})]}).inject(se);oe.addEventListener("buttonclick",function(){ce.show()}),ce.setBody(this._createAppAttrControl("hierarchyModal")),M.divDHierarchyWtree=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6Wtree_hierarchy_wrapper",styles:{"overflow- y":"auto","overflow- x":"auto"}}).inject(ee),M.divDHierarchyWtree.addClassName("root-wrapper-view-scc"),M.divDHierarchyWhatContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhat_Content_div"}),M.divDHierarchyWhoContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWho_Content_div"}),M.divDHierarchyWhenContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhen_Content_div"}),M.divDHierarchyWhereContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhere_Content_div"}),M.divDHierarchyWhyContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhy_Content_div"}),M.divDHierarchyHowContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyHow_Content_div"});const le=[{rootW:"ds6w:what",wExpandStatus:!1,expandDirection:"vertical",content:M.divDHierarchyWhatContent,noResize:!0},{rootW:"ds6w:who",wExpandStatus:!1,expandDirection:"vertical",content:M.divDHierarchyWhoContent,noResize:!1},{rootW:"ds6w:when",wExpandStatus:!1,expandDirection:"vertical",content:M.divDHierarchyWhenContent,noResize:!1},{rootW:"ds6w:where",wExpandStatus:!1,expandDirection:"vertical",content:M.divDHierarchyWhereContent,noResize:!1},{rootW:"ds6w:why",wExpandStatus:!1,expandDirection:"vertical",content:M.divDHierarchyWhyContent,noResize:!1},{rootW:"ds6w:how",wExpandStatus:!1,expandDirection:"vertical",content:M.divDHierarchyHowContent,noResize:!1}];for(let e of le){new P(e).render().inject(M.divDHierarchyWtree)}!1===M.EnableTagHierarchicalON.checkFlag?(M.divDHierarchyWtree.addClassName("search_center_disable"),ie.addClassName("search_center_disable")):(M.divDHierarchyWtree.removeClassName("search_center_disable"),ie.removeClassName("search_center_disable"));let de=e.create("div",{class:"scc_taghierarchical_div",id:"tagCororize_div"}).inject(a),ue=e.create("div",{class:"scc_taghierarchical_div",id:"company_tag_div"}).inject(a);if(!0===this._isCompanyTagsActivated()){let a=e.create("div",{class:"search_center_category_section1 "}).inject(ue),n=(e.create("div",{class:"search_center_main_div"}).inject(ue),e.create("div",{class:"search_center_main_div"}).inject(ue),e.create("div",{id:"Company_Tag_Main_Div"}).inject(ue)),i=e.create("div",{class:"companyTagsLevelDiv"}).inject(n),o=(e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagsHeader",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel1i.text")}).inject(i),e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"currentDatasetSpan"}).inject(n)),c=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"currentDatasetText"}).inject(o);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel2i.text")}).inject(c);let l=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"datasetSelectSpan"}).inject(o);var pe=e.create("input",{type:"text",class:"form-control",id:"datasetInput",placeholder:u.get("6WTagsFilter.ControlledOntology.Dataset.title"),disabled:"true"}).inject(l);this._datasetInput=pe,this.getCurrentDatasetTitle(pe);var _e=new x({id:"datasetSelectormodal",className:"site-reset",closable:!0,header:"<h4>"+u.get("6WTagsFilter.CompanyTags.datasetSelectormodal.header")+"</h4>",body:"",footer:[new D({id:"datasetSelectormodalUpdateBtn",value:u.get("6WTagsFilter.CompanyTags.datasetSelectormodal.updateBtn"),className:"primary",events:{onClick:function(){_e.hide(),ge.hide(),h.show(),be.hide();var e=m.getSelectedDatasetTitle();e&&pe.setAttribute("placeholder",e)}}}),new D({id:"datasetSelectormodalCancelBtn",value:u.get("6WTagsFilter.CompanyTags.datasetSelectormodal.cancelBtn"),className:"default",events:{onClick:function(){_e.hide()}}})]}).inject(l);let d=e.create("div",{id:"comboBoxDiv"});_e.setBody(d);var he=e.create("span",{}).inject(l),ge=new D({id:"updateDatasetBtn",value:u.get("6WTagsFilter.CompanyTags.updateDatasetBtn.value"),events:{onClick:function(){w.getSearchSettings({tenantID:_.platformID}).then(function(e){if(e.hasOwnProperty("enterprise_ontology")&&t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0){let t=[{dataset:e.enterprise_ontology.dataset[0].dataset,datasetTitle:e.enterprise_ontology.dataset[0].datasetTitle,sessionId:e.enterprise_ontology.dataset[0].sessionId,"session@id":e.enterprise_ontology.dataset[0]["session@id"],sessionTitle:e.enterprise_ontology.dataset[0].sessionTitle}];f.getOntologyConceptsFromSessionId(t).then(function(){console.log("First time test")},function(){reject("Fail: First in session")})}e.hasOwnProperty("enterprise_ontology")&&t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0&&pe.setAttribute("placeholder",e.enterprise_ontology.dataset[0].datasetTitle)}),_e.show()}}}).inject(he);let p=e.create("div",{id:"companyTagslevel2iii ",class:"companyTagsLevelSubDiv"}).inject(l),h=e.create("div",{class:"companyTagsLevelSubDiv"}).inject(p);new D({value:u.get("6WTagsFilter.CompanyTags.testNDeployBtn.value"),id:"testNDeployBtn",class:"companyTagslevel2iiiaBtn",className:"primary",events:{onClick:function(){me.show(),me.setBody(m.getWarningReport()),Ce.enable(),(m.areConceptsDuplicated()||m.areConceptsMoved()||m.areConceptsDeleted()||!m.getSelectedDatasetTitle())&&Ce.disable()}}}).inject(h);h.hide();new D({value:u.get("6WTagsFilter.CompanyTags.testBtn.value"),id:"testBtn",class:"companyTagslevel2iiiaBtn",className:"default",events:{onClick:function(){ye.show(),ye.setBody(m.getWarningReport())}}}).inject(h),new D({value:u.get("6WTagsFilter.CompanyTags.cancelUpdateBtn.value"),id:"cancelUpdateBtn",class:"companyTagslevel2iiiaBtn",className:"default",events:{onClick:function(){h.hide(),ge.show(),be.show(),k.getCurrentDatasetTitle(pe)}}}).inject(h);let g=e.create("div",{class:"search_center_text companyTagsLevelSubDiv"}).inject(p);var me=new x({className:"site-reset",closable:!0,header:"<h4>"+u.get("6WTagsFilter.CompanyTags.statusModal.header")+"</h4>",footer:[]}).inject(g),fe=e.create("div",{}),Ce=new D({id:"statusModalFooterDeployBtn",value:u.get("6WTagsFilter.CompanyTags.deployBtn.value"),className:"primary",events:{onClick:function(){h.hide(),be.show(),ge.show(),me.hide(),m.onUpdateUI(),k.clickOnApply(),k.scrollerText=m.getSelectedDatasetTitle()+"\n"+k.scrollerText,k.scrollerBody.setText(k.scrollerText)}}}).inject(fe);new D({id:"statusModalFooterCancelDeployBtn",value:u.get("6WTagsFilter.CompanyTags.cancelDeployBtn.value"),className:"default",events:{onClick:function(){h.hide(),be.show(),ge.show(),me.hide(),k.getCurrentDatasetTitle(pe)}}}).inject(fe);me.setFooter(fe);var ye=new x({className:"site-reset",closable:!0,header:"<h4>"+u.get("6WTagsFilter.CompanyTags.statusModal2.header")+"</h4>",footer:[]}).inject(g),ve=e.create("div",{});new D({id:"statusModal2FooterCancelTestBtn",value:u.get("6WTagsFilter.CompanyTags.cancelDeployBtn.value"),className:"default",events:{onClick:function(){ye.hide()}}}).inject(ve);ye.setFooter(ve);var be=new D({value:u.get("6WTagsFilter.CompanyTags.statusBtn.value"),className:" success btn-sm active companyTagStatus",events:{onClick:function(){be.setFocus(!1)}}}).inject(g);let y=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"previousDeploymentSpan"}).inject(n),v=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"previousDeploymentText"}).inject(y);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel3i.text")}).inject(v);let b=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"previousDeploymentScroller"}).inject(y);this.scrollerBody=e.create("div",{id:"DataSetScroller",text:this.scrollerText?this.scrollerText:""}).inject(b),new A({element:this.scrollerBody}).inject(b);let S=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"CompanyTagsIconUrl"}).inject(n),T=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"iconInputText"}).inject(S);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel4i.text")}).inject(T);let I=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"companytagsicon"}).inject(S);M.iconurlInput=e.create("input",{type:"text",class:"form-control",id:"iconurlInput",placeholder:"Tag Icon Url...",value:""}).inject(I),M.iconurlInput.addEventListener("change",function(){_.enableButtons(),this._iconurlInput=M.iconurlInput.value}.bind(this));let j=e.create("div",{id:"iconUrlClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(I);M.iconUrlClear=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"iconUrlClear"}).inject(j),M.iconUrlClear.setStyle("color","#b4b6ba"),M.iconUrlClear.addEventListener("click",function(){M.iconurlInput.value="",this._iconurlInput=""},!1);let W=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"companyTagPrefix"}).inject(n),O=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"prefixInputText"}).inject(W);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel5i.text")}).inject(O);let B=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"companytagprefixdiv"}).inject(W);M.prefixInput=e.create("input",{type:"text",class:"form-control",id:"prefixInput",placeholder:"Tag Prefix...",value:""}).inject(B),M.prefixInput.addEventListener("change",function(){_.enableButtons(),this._prefixInput=M.prefixInput.value}.bind(this));let E=e.create("div",{id:"prefixClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(B);M.prefixClear=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"prefixClear"}).inject(E),M.prefixClear.setStyle("color","#b4b6ba"),M.prefixClear.addEventListener("click",function(){M.prefixInput.value="",this._prefixInput=""},!1);let P=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"companyTagSuggest"}).inject(n),R=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"suggestText"}).inject(P);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagsSearchSuggests.specify.label")}).inject(R);let F=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-center-TagSuggest-chkbox"}).inject(P);if(M.companyTagsSearchSuggest=new r({type:"checkbox",label:u.get("6WTagsFilter.CompanyTags.companyTagsSearchSuggests.specify.label"),className:"primary",checkFlag:!1,touchMode:!0}).inject(F),M.companyTagsSearchSuggest.addEventListener("change",function(){_.enableButtons()}.bind(this)),!0===this._isExpertIdeationActivated()){let t=e.create("div",{class:"search_center_add_category_section "}).inject(n),a=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"companyTagexpertideation"}).inject(t),r=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"companyTagexpertideationText"}).inject(a);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel7i.text")}).inject(r);let i=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"companyTagexpertideationChoose"}).inject(a);M.choose=new N({label:u.get("6WTagsFilter.CompanyTags.chooseBtn.value"),id:"chooseBtn",class:"search_center_text companyTagschooseBtn",className:"primary",domId:"Expertideation_chooseBtn"}).inject(i),M.expertGroupDisplay=e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagslevel4i",text:""}).inject(i);let o=e.create("div",{id:"companyTagexpertideationClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(a);M.fontIconTrash=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"expertIdeationFontIconTrash"}).inject(o),M.fontIconTrash.addEventListener("click",function(){console.log("In expertGroupRemove"),M.expertGroupDisplay.setText(""),M.expertGroupDisplay.hide(),M.choose.show(),M.fontIconTrash.hide()},!1),M.fontIconTrash.hide(),M.expertGroupDisplay.hide(),M.expertGroupDisplay.getText().length>0&&(M.choose.hide(),M.fontIconTrash.show(),M.expertGroupDisplay.setText(M.expertGroupDisplay.getText()),M.expertGroupDisplay.show()),M.choose.addEventListener("buttonclick",function(){C.search({title:"User group Results",precond:'[ds6w:type]:"foaf:Group"',source:["usersgroup"]}).then(function(e){e.label&&(M.choose.hide(),M.fontIconTrash.show(),M.expertGroupDisplay.setText(e.label),M.expertGroupDisplay.show())})}.bind(this))}if(!0===this._isDeleteCompanyTagActivated()){let t=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_add_category_bottom",id:"deleteManualCompanyTagSpan"}).inject(n),a=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"deleteManualCompanyTagText"}).inject(t);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel8ii.text")}).inject(a);let r=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"deleteManualCompanyTagInput"}).inject(t);new N({label:"lite-borders displayStyle",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(r)}if(!0===this._isAdvocacyActivated()){let t=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"companyTagadvocacyspan"}).inject(n),a=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"companyTagAdvocacyText"}).inject(t);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel9i.text")}).inject(a);let r=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"companyTagAdvocacyChoose"}).inject(t);M.chooseAdvocacy=new N({label:u.get("6WTagsFilter.CompanyTags.chooseBtn.value"),id:"chooseAdvocacy",class:"search_center_text companyTagschooseBtn",className:"primary",domId:"Advocacy_chooseBtn"}).inject(r),M.advocacyGroupDisplay=e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagslevel4i",text:""}).inject(r);let i=e.create("div",{id:"companyTagexpertideationClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(t);M.fontIconTrashA=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"advocacyFontIconTrash"}).inject(i),M.fontIconTrashA.addEventListener("click",function(){console.log("In advocacyGroupRemove"),M.advocacyGroupDisplay.setText(""),M.advocacyGroupDisplay.value="",M.advocacyGroupDisplay.hide(),M.chooseAdvocacy.show(),M.fontIconTrashA.hide()},!1),M.fontIconTrashA.hide(),M.advocacyGroupDisplay.hide(),M.chooseAdvocacy.addEventListener("buttonclick",function(){C.search({title:"Community Results",precond:'[ds6w:type]:"swym:Community"',source:["swym"]}).then(function(e){e.label&&(M.chooseAdvocacy.hide(),M.fontIconTrashA.show(),M.advocacyGroupDisplay.setText(e.label),M.advocacyGroupDisplay.value=e.id,M.advocacyGroupDisplay.show())})}.bind(this))}let U=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"controlledVocabModeSpan"}).inject(a),L=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"controlledVocabModeText"}).inject(U),V=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"controlledVocabToggleSpan"}).inject(U);M.ControlledVocabModeON=new r({type:"switch",label:"Enable Controlled Vocabulary Mode",touchMode:!0,value:0}).inject(L),M.ControlledVocabModeON.getContent().style.fontSize="14px",M.ControlledVocabModeON.addEventListener("change",function(){_.enableButtons(),!0===M.ControlledVocabModeON.checkFlag?this._controlledVocabMode=!0:this._controlledVocabMode=!1}.bind(this));let H=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(V);if(new s({target:H,trigger:"hover",animate:"true",position:"top",body:u.get("6WTagsFilter.CompanyTags.ControlledVocab.popover"),title:""}),!0===this._isDeleteAllExistingCompanyTagActivated()){let t=e.create("div",{class:"search_center_add_category_section "}).inject(n),a=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"deleteTagsSpan"}).inject(t),r=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"controlledVocabToggleSpan"}).inject(a);M.deletExistingCompanyTags=new N({label:u.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.value"),id:"deletExistingCompanyTags",class:"search_center_text",className:"error",emphasize:"high-attention"}).inject(r);var Se=new x({className:"site-reset",closable:!0,header:u.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.value"),body:u.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.message"),footer:[new D({value:"Delete",className:"error",events:{onClick:function(){Se.hide(),f.deleteExistingManualCompanyTags().then(function(e){console.log("Deletetion of Company Manual Tags Completed")},function(){console.log("Fail: Delete Manual tags failed")})}}}),new D({id:"datasetSelectormodalCancelBtn",value:"Cancel",className:"default",events:{onClick:function(){Se.hide()}}})]}).inject(r);M.deletExistingCompanyTags.addEventListener("buttonclick",function(){Se.show()})}}v.getOption("tagsColorCustomize")&&h.render(de),v.getOption("controlledVocabulary")&&(v.getOption("tagsColorCustomize")?g.render(ue):g.render(de)),!0===this._isCompanyTagsActivated()&&m.render(comboBoxDiv),this.unMasking()},unMasking(){_.removeMask(widget.body)},getPredicatesObject:function(){return new a(function(e,t){let a={onComplete:function(t){UWA.log("Got a predicates result!"+t),e(t)},onFailure:function(e){UWA.log("predicates service request Fail!"+e),t(e)},tenantId:_.platformID,lang:widget.lang,apiVersion:"R2021x"};l.getFedProperties(a)})},getRootWOfPredicates:function(){let e=this;if(M._6WSubProperties.length>0){let a=null;M._6WSubProperties.forEach(e=>{a=t.is(a)?a+","+e:e});let r={onComplete:function(a){UWA.log("Got a Root W of predicates result!"),t.is(a,"array")&&(M._6WPredicatesMap=a),e._rootWOfPredicatesPromise.resolve(a)},onFailure:function(t){UWA.log("getPropertiesRoots service request Fail!"+t),e._rootWOfPredicatesPromise.reject(t)},tenantId:_.platformID,lang:widget.lang};l.getPropertiesRoots(a,r)}return this._rootWOfPredicatesPromise.promise},isThisNotARootPredicates:function(e){return""!==e.subPropertyOf},filter6WRootPredicates:function(e){let a,r,n={},i={},o=[],s=[],c=[],l=[],d=[],p=[],_=[],h=M.applicationConfigComboBox.currentValue,g=M._appsMap[h];for(r in e)if(e[r].properties.length>0){let n=(a=e[r].properties).length;if(void 0!==a&&n>0){e[r].properties=a.filter(this.isThisNotARootPredicates),a.sort(function(e,t){let a=e.label;a=a.toUpperCase();let r=t.label;return a<(r=r.toUpperCase())?-1:a>r?1:0});for(let u=0;u<n;u++){if(b.checkSearchAppId(g)&&("ds6w:project"===a[u].curi||"ds6w:community"===a[u].curi))continue;let n=a[u].label,h=a[u].curi;if(t.is(n)&&""!==n){"ds6w"!==r&&(n=n+" ("+e[r].label+")");let t={value:h,label:n,Wval:a[u].subPropertyOf};switch(a[u].subPropertyOf){case"ds6w:what":s.push(t);break;case"ds6w:where":d.push(t);break;case"ds6w:who":p.push(t);break;case"ds6w:when":c.push(t);break;case"ds6w:how":_.push(t);break;case"ds6w:why":l.push(t)}o.push(n),i[a[u].curi]=n,M._attributesMap[a[u].curi]=n,M._6WPredicatesMap[a[u].curi]=a[u].subPropertyOf,M._6WSubProperties.push(a[u].curi)}}}}let m=W.getLocalStorageItem("TagNavigator-simplifiedTagger");if(t.is(m)&&"true"===m){let e=u.get("SearchCenter6WTagsFilter.Predicates.OwnerCountry"),t="computedCountryInfo",a={value:t,label:e,Wval:"ds6w:where"};o.push(e),d.push(a),i[t]=e,M._attributesMap[t]=e}return n.predicates=o,n.typeMap=i,n.whatpredicates=s,n.whopredicates=p,n.whenpredicates=c,n.wherepredicates=d,n.whypredicates=l,n.howpredicates=_,this._filter6WRootPredicatesPromise.resolve(),n},_createAppAttrControl:function(t){let a=this,r=[],i=e.create("div",{class:"search_center_div_left_6w",id:t+"-div",styles:{"min-height":"100px",width:"auto"}}),o=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:t+"-combodiv",styles:{float:"left",clear:"both",width:"fit-content"}}).inject(i),s=new n({elementsList:[{label:"What",icon:"fonticon fonticon-3ds-what"},{label:"Who",icon:"fonticon fonticon-3ds-who"},{label:"When",icon:"fonticon fonticon-3ds-when"},{label:"Where",icon:"fonticon fonticon-3ds-where"},{label:"Why",icon:"fonticon fonticon-3ds-why"},{label:"How",icon:"fonticon fonticon-3ds-how"}],class:"search_center_div_left_6w search_center_general_display_flex",placeholder:"Select a W category",touchMode:!0,enableSearchFlag:!1,actionOnClickFlag:!1,reachablePlaceholderFlag:!0}).inject(o);s.elements.container.setStyle("width","100%"),s.addEventListener("change",function(){a._includeWVal=s.currentValue,a._includeDHierarchyTagVal=s.currentValue,a.getPredicatesObject().then(function(e){let t=a.filter6WRootPredicates(e);a.getRootWOfPredicates().then(function(e){switch(a._includeWVal){case"What":r=t.whatpredicates;break;case"Who":r=t.whopredicates;break;case"When":r=t.whenpredicates;break;case"Where":r=t.wherepredicates;break;case"Why":r=t.whypredicates;break;case"How":r=t.howpredicates}l.elementsList=r,_.disableButtons()})},function(){})});e.create("p",{class:"control_Ontology_text_heading search_center_top_margin search_center_bottom_margin_minimal",text:u.get("Tag.display"),id:t+"-tag-text-div",styles:{float:"left",clear:"both"}}).inject(i);let c=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:t+"-attr-combo",styles:{float:"left",clear:"both",width:"-webkit-fill-available"}}).inject(i),l=new n({elementsList:r,styles:{width:"100%"},placeholder:"Find & select a tag",touchMode:!0,enableSearchFlag:!1,actionOnClickFlag:!1}).inject(c);return l.elements.container.setStyle("width","100%"),l.addEventListener("change",function(){a._includeTagVal=l.currentLabel,a._includeTagUri=l.currentValue}),i},ifExistinPredicates:function(e,t){return e.predicates.some(function(e){return e.label===t})},ifExistinExclPredicates:function(e,t){return e.excluded_predicates.some(function(e){return e.label===t})},_includeTagValue:function(a){let r,n=this;r=t.is(a)?a.label.replace(/\s+/g,"_"):n._includeTagVal.replace(/\s+/g,"_");let i,o=e.create("div",{class:"search_center_general_display_flex",id:"include-tag-div-treecontent",styles:{height:"28px"}}),s=e.create("div",{class:"search_center_general_display_flex",id:"include-tag-div-contenttag"}).inject(o),c=e.create("div",{class:"search_center_general_display_flex",id:"divtrashbutton_"+r}).inject(s),l=new N({displayStyle:"lite",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(c);if(t.is(a)){e.create("p",{text:a.label,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",a.uri)}else{e.create("p",{text:n._includeTagVal,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",n._includeTagUri)}l.addEventListener("buttonclick",function(e){let t="divtrashbutton_"+r,a=document.getElementById(t).getParent().getParent().getParent();if(a.childElementCount-1==0){let e=a.id;if(e.includes("What")){let e=document.getElementById("content-what");M.collapseRootWArea(e)}if(e.includes("Who")){let e=document.getElementById("content-who");M.collapseRootWArea(e)}if(e.includes("When")){let e=document.getElementById("content-when");M.collapseRootWArea(e)}if(e.includes("Where")){let e=document.getElementById("content-where");M.collapseRootWArea(e)}if(e.includes("How")){let e=document.getElementById("content-how");M.collapseRootWArea(e)}}o.destroy(),_.enableButtons()}),i=t.is(a)?a.wVal:n._includeWVal;let d=null,p=!1,h=!1,g=M._getWtreeContents(M.divWhatContent);if(0===g.predicates.length&&0===g.excluded_predicates.length){let e=document.getElementById("content-what");M.collapseRootWArea(e)}let m=M._getWtreeContents(M.divWhoContent);if(0===m.predicates.length&&0===m.excluded_predicates.length){let e=document.getElementById("content-who");M.collapseRootWArea(e)}let f=M._getWtreeContents(M.divWhenContent);if(0===f.predicates.length&&0===f.excluded_predicates.length){let e=document.getElementById("content-when");M.collapseRootWArea(e)}let C=M._getWtreeContents(M.divWhereContent);if(0===C.predicates.length&&0===C.excluded_predicates.length){let e=document.getElementById("content-where");M.collapseRootWArea(e)}let y=M._getWtreeContents(M.divWhyContent);if(0===y.predicates.length&&0===y.excluded_predicates.length){let e=document.getElementById("content-why");M.collapseRootWArea(e)}let v=M._getWtreeContents(M.divHowContent);if(0===v.predicates.length&&0===v.excluded_predicates.length){let e=document.getElementById("content-how");M.collapseRootWArea(e)}switch(i){case"What":if(t.is(a)?(p=M.ifExistinPredicates(g,a.label),h=M.ifExistinExclPredicates(g,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(g,n._includeTagVal),h=M.ifExistinExclPredicates(g,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhatContent);let e=document.getElementById("ds6w:what");M.toggleRootWArea(e)}break;case"Who":if(t.is(a)?(p=M.ifExistinPredicates(m,a.label),h=M.ifExistinExclPredicates(m,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(m,n._includeTagVal),h=M.ifExistinExclPredicates(m,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhoContent);let e=document.getElementById("ds6w:who");M.toggleRootWArea(e)}break;case"When":if(t.is(a)?(p=M.ifExistinPredicates(f,a.label),h=M.ifExistinExclPredicates(f,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(f,n._includeTagVal),h=M.ifExistinExclPredicates(f,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhenContent);let e=document.getElementById("ds6w:when");M.toggleRootWArea(e)}break;case"Where":if(t.is(a)?(p=M.ifExistinPredicates(C,a.label),h=M.ifExistinExclPredicates(C,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(C,n._includeTagVal),h=M.ifExistinExclPredicates(C,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhereContent);let e=document.getElementById("ds6w:where");M.toggleRootWArea(e)}break;case"Why":if(t.is(a)?(p=M.ifExistinPredicates(y,a.label),h=M.ifExistinExclPredicates(y,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(y,n._includeTagVal),h=M.ifExistinExclPredicates(y,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhyContent);let e=document.getElementById("ds6w:why");M.toggleRootWArea(e)}break;case"How":if(t.is(a)?(p=M.ifExistinPredicates(v,a.label),h=M.ifExistinExclPredicates(v,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(v,n._includeTagVal),h=M.ifExistinExclPredicates(v,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divHowContent);let e=document.getElementById("ds6w:how");M.toggleRootWArea(e)}}_.enableButtons()},_excludeTagValue:function(a){let r,n=this;r=t.is(a)?a.label.replace(/\s+/g,"_"):n._includeTagVal.replace(/\s+/g,"_");let i,o=e.create("div",{class:"search_center_general_display_flex",id:"exclude-tag-div-treecontent",styles:{height:"28px"}}),s=e.create("div",{class:"search_center_general_display_flex",id:"exclude-tag-div-treecontent2"}).inject(o),c=e.create("div",{class:"search_center_general_display_flex semi_circle",id:"divtrashbutton_"+r}).inject(s),l=new N({displayStyle:"lite",emphasize:"high-attention",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(c);if(t.is(a)){e.create("p",{class:"strike_through",text:a.label,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",a.uri)}else{e.create("p",{class:"strike_through",text:n._includeTagVal,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",n._includeTagUri)}l.addEventListener("buttonclick",function(){let e="divtrashbutton_"+r,t=document.getElementById(e).getParent().getParent().getParent();if(t.childElementCount-1==0){let e=t.id;if(e.includes("What")){let e=document.getElementById("content-what");M.collapseRootWArea(e)}if(e.includes("Who")){let e=document.getElementById("content-who");M.collapseRootWArea(e)}if(e.includes("When")){let e=document.getElementById("content-when");M.collapseRootWArea(e)}if(e.includes("Where")){let e=document.getElementById("content-where");M.collapseRootWArea(e)}if(e.includes("How")){let e=document.getElementById("content-how");M.collapseRootWArea(e)}}o.destroy(),_.enableButtons()}),i=t.is(a)?a.wVal:n._includeWVal;let d=null,p=!1,h=!1,g=M._getWtreeContents(M.divWhatContent);if(0===g.predicates.length&&0===g.excluded_predicates.length){let e=document.getElementById("content-what");M.collapseRootWArea(e)}let m=M._getWtreeContents(M.divWhoContent);if(0===m.predicates.length&&0===m.excluded_predicates.length){let e=document.getElementById("content-who");M.collapseRootWArea(e)}let f=M._getWtreeContents(M.divWhenContent);if(0===f.predicates.length&&0===f.excluded_predicates.length){let e=document.getElementById("content-when");M.collapseRootWArea(e)}let C=M._getWtreeContents(M.divWhereContent);if(0===C.predicates.length&&0===C.excluded_predicates.length){let e=document.getElementById("content-where");M.collapseRootWArea(e)}let y=M._getWtreeContents(M.divWhyContent);if(0===y.predicates.length&&0===y.excluded_predicates.length){let e=document.getElementById("content-why");M.collapseRootWArea(e)}let v=M._getWtreeContents(M.divHowContent);if(0===v.predicates.length&&0===v.excluded_predicates.length){let e=document.getElementById("content-how");M.collapseRootWArea(e)}switch(i){case"What":if(t.is(a)?(p=M.ifExistinPredicates(g,a.label),h=M.ifExistinExclPredicates(g,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(g,n._includeTagVal),h=M.ifExistinExclPredicates(g,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhatContent);let e=document.getElementById("ds6w:what");M.toggleRootWArea(e)}break;case"Who":if(t.is(a)?(p=M.ifExistinPredicates(m,a.label),h=M.ifExistinExclPredicates(m,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(m,n._includeTagVal),h=M.ifExistinExclPredicates(m,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhoContent);let e=document.getElementById("ds6w:who");M.toggleRootWArea(e)}break;case"When":if(t.is(a)?(p=M.ifExistinPredicates(f,a.label),h=M.ifExistinExclPredicates(f,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(f,n._includeTagVal),h=M.ifExistinExclPredicates(f,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhenContent);let e=document.getElementById("ds6w:when");M.toggleRootWArea(e)}break;case"Where":if(t.is(a)?(p=M.ifExistinPredicates(C,a.label),h=M.ifExistinExclPredicates(C,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(C,n._includeTagVal),h=M.ifExistinExclPredicates(C,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhereContent);let e=document.getElementById("ds6w:where");M.toggleRootWArea(e)}break;case"Why":if(t.is(a)?(p=M.ifExistinPredicates(y,a.label),h=M.ifExistinExclPredicates(y,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(y,n._includeTagVal),h=M.ifExistinExclPredicates(y,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divWhyContent);let e=document.getElementById("ds6w:why");M.toggleRootWArea(e)}break;case"How":if(t.is(a)?(p=M.ifExistinPredicates(v,a.label),h=M.ifExistinExclPredicates(v,a.label)):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(v,n._includeTagVal),h=M.ifExistinExclPredicates(v,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divHowContent);let e=document.getElementById("ds6w:how");M.toggleRootWArea(e)}}_.enableButtons()},_includeDHierarchyTagValue:function(a){let r,n=this;r=t.is(a)?a.label.replace(/\s+/g,"_"):n._includeTagVal.replace(/\s+/g,"_");let i,o=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-div-treecontent",styles:{height:"28px"}}),s=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-div-contenttag"}).inject(o),c=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-divtrashbutton_"+r}).inject(s),l=new N({displayStyle:"lite",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(c);if(t.is(a)){e.create("p",{text:a.label,id:"includeDHierarchy-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",a.uri)}else{e.create("p",{text:n._includeTagVal,id:"includeDHierarchy-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",n._includeTagUri)}l.addEventListener("buttonclick",function(){o.destroy();let e=document.getElementById("6Wtree_hierarchy_wrapper");if(0===M._getWtreeContents(M.divDHierarchyWhatContent).predicates.length){let t=e.childNodes[0].getChildren()[0];M.collapseRootWArea(t)}if(0===M._getWtreeContents(M.divDHierarchyWhoContent).predicates.length){let t=e.childNodes[1].getChildren()[0];M.collapseRootWArea(t)}if(0===M._getWtreeContents(M.divDHierarchyWhenContent).predicates.length){let t=e.childNodes[2].getChildren()[0];M.collapseRootWArea(t)}if(0===M._getWtreeContents(M.divDHierarchyWhereContent).predicates.length){let t=e.childNodes[3].getChildren()[0];M.collapseRootWArea(t)}if(0===M._getWtreeContents(M.divDHierarchyWhyContent).predicates.length){let t=e.childNodes[4].getChildren()[0];M.collapseRootWArea(t)}if(0===M._getWtreeContents(M.divDHierarchyHowContent).predicates.length){let t=e.childNodes[5].getChildren()[0];M.collapseRootWArea(t)}_.enableButtons()}),i=t.is(a)?a.wVal:n._includeWVal;let d=null,p=!1,h=document.getElementById("6Wtree_hierarchy_wrapper"),g=M._getWtreeContents(M.divDHierarchyWhatContent);if(0===g.predicates.length){let e=h.childNodes[0].getChildren()[0];M.collapseRootWArea(e)}let m=M._getWtreeContents(M.divDHierarchyWhoContent);if(0===m.predicates.length){let e=h.childNodes[1].getChildren()[0];M.collapseRootWArea(e)}let f=M._getWtreeContents(M.divDHierarchyWhenContent);if(0===f.predicates.length){let e=h.childNodes[2].getChildren()[0];M.collapseRootWArea(e)}let C=M._getWtreeContents(M.divDHierarchyWhereContent);if(0===C.predicates.length){let e=h.childNodes[3].getChildren()[0];M.collapseRootWArea(e)}let y=M._getWtreeContents(M.divDHierarchyWhyContent);if(0===y.predicates.length){let e=h.childNodes[4].getChildren()[0];M.collapseRootWArea(e)}let b=M._getWtreeContents(M.divDHierarchyHowContent);if(0===b.predicates.length){let e=h.childNodes[5].getChildren()[0];M.collapseRootWArea(e)}let S=g.predicates.length+m.predicates.length+f.predicates.length+C.predicates.length+y.predicates.length+b.predicates.length,x=v.getOption("max_deep_hierarchy_tags");if(S>=x){d=u.get("SearchCenter6WTagsFilter.hierarchicalPredicates.Message.MaxReached"),d=u.replace(d,{max:x});let e=_.createWdgAlert();return e.inject(widget.body,"top"),void e.add({className:"error applyChangesAlert",message:d})}switch(i){case"What":if(t.is(a)?p=M.ifExistinPredicates(g,a.label):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(g,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divDHierarchyWhatContent);let e=h.childNodes[0].getChildren()[0].getChildren()[1];M.toggleRootWArea(e)}break;case"Who":if(t.is(a)?p=M.ifExistinPredicates(m,a.label):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(m,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divDHierarchyWhoContent);let e=h.childNodes[1].getChildren()[0].getChildren()[1];M.toggleRootWArea(e)}break;case"When":if(t.is(a)?p=M.ifExistinPredicates(f,a.label):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(f,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divDHierarchyWhenContent);let e=h.childNodes[2].getChildren()[0].getChildren()[1];M.toggleRootWArea(e)}break;case"Where":if(t.is(a)?p=M.ifExistinPredicates(C,a.label):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(C,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divDHierarchyWhereContent);let e=h.childNodes[3].getChildren()[0].getChildren()[1];M.toggleRootWArea(e)}break;case"Why":if(t.is(a)?p=M.ifExistinPredicates(y,a.label):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(y,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divDHierarchyWhyContent);let e=h.childNodes[4].getChildren()[0].getChildren()[1];M.toggleRootWArea(e)}break;case"How":if(t.is(a)?p=M.ifExistinPredicates(b,a.label):t.is(n._includeTagVal)&&(p=M.ifExistinPredicates(b,n._includeTagVal)),p){let e=_.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(M.divDHierarchyHowContent);let e=h.childNodes[5].getChildren()[0].getChildren()[1];M.toggleRootWArea(e)}}_.enableButtons()},_addtagOperator:function(){let e=this;M.tagRelationshipCards.show();let a=e._getTagRelationshipCards(),r=a.length,n=[];for(let e=0;e<r;e++)n.push(a[e].uri);let i=e._textOnCard;if(t.is(i,"string")){let a="AllDataSourcesandTypes",r=_.getAttributesInternalNameForAllDataSourcesAndTypes(a,i),o=!1,s=null;if(t.is(r)){let t;if(n.length>0&&!1===o&&(t=n.indexOf(r))>-1&&(s=u.get("searchAttributes.AttributeWarning"),o=!0),!1===o){let t="OR";e._operatorOR?t="OR":e._operatorAND?t="AND":e._operatorXOR&&(t="XOR");let a={cardDiv:M.tagRelationshipCards,textOnCard:i,uri:r,tabName:"SearchControl_6WTags",operator:t};e.renderTagRelationshipRow(a),M.tagRelationshipCards.childNodes[0].hidden=!1,_.enableButtons()}else{let e=_.createWdgAlert();e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:s})}}}},_createTagOperatorModal:function(a){let i=this,o=e.create("div",{class:"search_center_div_left_6w",id:a+"-div",styles:{"min-height":"125px",width:"auto"}}),s=(e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex",id:a+"-text-div",text:u.get("Tag.display")}).inject(o),e.create("p",{class:"search_center_general_display_flex",id:a+"-combo-div"}).inject(o)),c=new n({elementsList:[],placeholder:u.get("SearchCenter6WTagsFilter.TagRelationship.AddPreferred_tags"),touchMode:!0,mainElementVisibleFlag:!0}).inject(s);i.getPredicatesObject().then(function(e){let t=i.filter6WRootPredicates(e);i.getRootWOfPredicates().then(function(e){c.elementsList=t.predicates,_.updateAttributesMappingForAllDataSourcesAndTypes("AllDataSourcesandTypes",t.typeMap),_.disableButtons()})},function(){});e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex search_center_top_margin",id:a+"-text-operator-display-div",text:u.get("Operator.display")}).inject(o);let l=e.create("p",{class:"search_center_general_display_flex search_center_top_margin",id:a+"-text-operator-radio-div"}).inject(o);l.addClassName("search_center_disable");let d=new r({type:"radio",label:"OR",value:0,id:a+"-OR",domId:"OR_Radio_toggle"}).inject(l),p=new r({type:"radio",label:"AND",value:0,domId:"AND_Radio_toggle"}).inject(l),h=new r({type:"radio",label:"XOR",value:1,domId:"XOR_Radio_toggle"}).inject(l);return d.elements.container.addClassName("some-class"),p.elements.container.addClassName("some-class"),h.elements.container.addClassName("some-class"),d.addEventListener("change",function(){i._operatorOR=d.checkFlag}.bind(this)),p.addEventListener("change",function(){i._operatorAND=p.checkFlag}.bind(this)),h.addEventListener("change",function(){i._operatorXOR=h.checkFlag}.bind(this)),c.addEventListener("change",function(){if(i._textOnCard=c.currentValue,t.is(i._textOnCard,"string")){let e="AllDataSourcesandTypes",t=_.getAttributesInternalNameForAllDataSourcesAndTypes(e,i._textOnCard);l.removeClassName("search_center_disable"),i._listOfIrrelevantAndTags.indexOf(t)>-1&&p.elements.container.addClassName("search_center_disable")}else l.addClassName("search_center_disable")}),o},_getTagRelationshipCards:function(){let e=[],a=M.tagRelationshipCards,r=a.childElementCount;for(let n=1;n<r;n++){let r=a.childNodes[n];if(t.is(r)){if(r.childElementCount>=3){let a={};a.uri=r.childNodes[0].getAttribute("sccURI"),a.operator=r.childNodes[1].childNodes[0].dsModel.currentValue,t.is(a.uri)&&e.push(a)}}}return e},renderTagRelationshipRow:function(a){let r=a.textOnCard;r=r.replace(/\s+/g,"_");let i=e.create("div",{class:"search_center_general_tab_div search_center_margin combo_height",id:r}).inject(a.cardDiv);i.addClassName("search_center_category_row_span");let o=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:r+"_Text_part",html:a.textOnCard,styles:{width:"400px"}}).inject(i);o.addClassName("search_center_category_row_html"),t.is(a.uri)&&o.setAttribute("sccuri",a.uri);let s=e.create("div",{class:"search_center_margin margin_left_right strike_through",id:r+"_Combo"}).inject(i),c=["OR","AND","XOR"];if(this._listOfIrrelevantAndTags.length>0&&t.is(a.uri)){this._listOfIrrelevantAndTags.indexOf(a.uri)>-1&&(c=["OR","XOR"])}M.operatorComboBox=new n({elementsList:c,touchMode:!0,mainElementVisibleFlag:!0}).inject(s),"OR"==a.operator?M.operatorComboBox.value="OR":"AND"==a.operator?M.operatorComboBox.value="AND":"XOR"==a.operator&&(M.operatorComboBox.value="XOR"),M.operatorComboBox.elements.container.setStyles({height:"26px","margin-top":"-3px",width:"100px"}),M.operatorComboBox.addEventListener("change",function(){_.enableButtons()});let l=e.create("div",{class:"fonticon fonticon-clear fonticon-trash scc_6wtags_tag_relationship_delete"}).inject(i);l.setStyle("color","#b4b6ba"),l.addClassName("margin_left_right"),l.addEventListener("click",function(e){if(t.is(e.currentTarget.parentElement)){let t=e.currentTarget.parentElement.parentElement;e.currentTarget.parentElement.destroy(),1===t.childNodes.length&&(t.childNodes[0].hidden=!0),_.enableButtons()}},!1),l.addEventListener("mouseover",function(e){e.currentTarget.setStyle("color","#3d3d3d")},!1),l.addEventListener("mouseout",function(e){e.currentTarget.setStyle("color","#b4b6ba")},!1)},clickOnApply:function(){_.enableButtons(),document.getElementById("id_in_app_apply").click(),_.disableButtons()},getTabInputsToStore:function(){let e={attributes_display:M.EditTagCategoryON.checkFlag},a=[],r={},n={},i=[];if(t.is(i,"array")&&1===i.length)t.is(i[0].source)&&(r.source=i[0].source),t.is(i[0].predicates)&&(r.predicates=i[0].predicates),t.is(i[0].excluded_predicates)&&(r.excluded_predicates=i[0].excluded_predicates),a.push(r);else{var o=[],s=[];r.source="AllDataSourcesandTypes";let e=M._getWtreeContents(M.divWhatContent),t=M._getWtreeContents(M.divWhoContent),n=M._getWtreeContents(M.divWhenContent),i=M._getWtreeContents(M.divWhereContent),d=M._getWtreeContents(M.divWhyContent),u=M._getWtreeContents(M.divHowContent),p=e.predicates.length,_=e.excluded_predicates.length;for(let t=0;t<p;t++){(c={}).uri=e.predicates[t].uri,o.push(c)}for(let t=0;t<_;t++){(l={}).uri=e.excluded_predicates[t].uri,s.push(l)}p=t.predicates.length,_=t.excluded_predicates.length;for(let e=0;e<p;e++){(c={}).uri=t.predicates[e].uri,o.push(c)}for(let e=0;e<_;e++){(l={}).uri=t.excluded_predicates[e].uri,s.push(l)}p=n.predicates.length,_=n.excluded_predicates.length;for(let e=0;e<p;e++){(c={}).uri=n.predicates[e].uri,o.push(c)}for(let e=0;e<_;e++){(l={}).uri=n.excluded_predicates[e].uri,s.push(l)}p=i.predicates.length,_=i.excluded_predicates.length;for(let e=0;e<p;e++){(c={}).uri=i.predicates[e].uri,o.push(c)}for(let e=0;e<_;e++){(l={}).uri=i.excluded_predicates[e].uri,s.push(l)}p=d.predicates.length,_=d.excluded_predicates.length;for(let e=0;e<p;e++){(c={}).uri=d.predicates[e].uri,o.push(c)}for(let e=0;e<_;e++){(l={}).uri=d.excluded_predicates[e].uri,s.push(l)}p=u.predicates.length,_=u.excluded_predicates.length;for(let e=0;e<p;e++){var c;(c={}).uri=u.predicates[e].uri,o.push(c)}for(let e=0;e<_;e++){var l;(l={}).uri=u.excluded_predicates[e].uri,s.push(l)}r.excluded_predicates=s,r.predicates=o,a.push(r)}let d=[],u={},p={},_=M.applicationConfigComboBox.currentValue,f=M._appsMap[_];t.is(r.predicates)&&(p.preferred_predicates=r.predicates),t.is(r.excluded_predicates)&&(p.excluded_predicates=r.excluded_predicates),u[f]=p,d.push(u),e.context_apps_predicates=d,"X3DSEAR_AP"===f&&(e["ds6w:type"]=a);let C=M._getWtreeContents(M.divDHierarchyWhatContent),y=M._getWtreeContents(M.divDHierarchyWhoContent),b=M._getWtreeContents(M.divDHierarchyWhenContent),S=M._getWtreeContents(M.divDHierarchyWhereContent),x=M._getWtreeContents(M.divDHierarchyWhyContent),D=M._getWtreeContents(M.divDHierarchyHowContent),T=[],w=C.predicates.length;for(let e=0;e<w;e++){let t={};t.uri=C.predicates[e].uri,T.push(t)}w=y.predicates.length;for(let e=0;e<w;e++){let t={};t.uri=y.predicates[e].uri,T.push(t)}w=b.predicates.length;for(let e=0;e<w;e++){let t={};t.uri=b.predicates[e].uri,T.push(t)}w=S.predicates.length;for(let e=0;e<w;e++){let t={};t.uri=S.predicates[e].uri,T.push(t)}w=x.predicates.length;for(let e=0;e<w;e++){let t={};t.uri=x.predicates[e].uri,T.push(t)}w=D.predicates.length;for(let e=0;e<w;e++){let t={};t.uri=D.predicates[e].uri,T.push(t)}return n.predicates=T,!0===v.getOption("activate_hierarchical_tag_depth")&&(e.hierarchical_predicates={specify_hierarchical_predicates:M.EnableTagHierarchicalON.checkFlag,hierarchical_predicates:n.predicates},this._checkHierarchicalTagUpdate(e.hierarchical_predicates),this._prev_hierarchical_predicates=e.hierarchical_predicates),v.getOption("tagsColorCustomize")&&(e.tagColorization=h.getInputsToStore()),v.getOption("controlledVocabulary")&&(e.controlledVocabulary=g.getTabInputsToStore()),!0===this._isCompanyTagsActivated()&&(e.enterprise_ontology={dataset:m.getTabInputsToStore(),iconURL:M.iconurlInput.value,tagPrefix:M.prefixInput.value,expertUserGrp:this._isExpertIdeationActivated()?M.expertGroupDisplay.getText():"",advocacyCommunityId:this._isAdvocacyActivated()?M.advocacyGroupDisplay.value:"",advocacyCommunityLabel:this._isAdvocacyActivated()?M.advocacyGroupDisplay.getText():""},t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0&&(e.current_enterprise_ontology_title=e.enterprise_ontology.dataset[0].datasetTitle),e.enterprise_ontology_history=M.scrollerText,e.companyTagsSearchSuggest=!!this._isCompanyTagsActivated()&&M.companyTagsSearchSuggest.checkFlag,e.controlledVocabMode=this._controlledVocabMode),e.tagRelationships={activate_tag_relationship:M.toggleActivateTagOperator.checkFlag,tagRelationship_predicates:M._getTagRelationshipCards(),tagRelationship_IrrelevantOpert:M._getTagIrrelevantOperator()},e},_getTagIrrelevantOperator:function(){let e={};return e.irrelevantANDPredicates=this._listOfIrrelevantAndTags,e},onResetTab:function(e){let a,r=this,n=null,i=null;if(_.clearLocalCacheFor6WTags(),a=t.is(e,"string")?JSON.parse(e):e,t.is(a)){if(c.mask(widget.body),M.getPredicatesObject().then(function(e){let o=M.filter6WRootPredicates(e);M.getRootWOfPredicates().then(function(e){M.cleanUpAttributeTags(),_.updateAttributesMappingForAllDataSourcesAndTypes("AllDataSourcesandTypes",o.typeMap);let s=M._getKeyByValue(M._appsMap,"X3DSEAR_AP");if(t.is(s)&&(M.applicationConfigComboBox.currentValue=s),w.getAppWisePredicates(M._appsMap[M.applicationConfigComboBox.currentValue],!1).then(function(e){if(M.cleanUpAttributeTags(),e.hasOwnProperty("preferred_predicates")&&(n=e.preferred_predicates),e.hasOwnProperty("excluded_predicates")&&(i=e.excluded_predicates),t.is(n)&&n.length>0)for(let e=0;e<n.length;e++){let t=n[e].uri,a=M._get6WVal(t),r={label:M._attributesMap[t],uri:t,wVal:a};M._includeTagValue(r),_.disableButtons()}if(t.is(i)&&i.length>0)for(let e=0;e<i.length;e++){let t=i[e].uri,a=M._get6WVal(t),r={label:M._attributesMap[t],uri:t,wVal:a};M._excludeTagValue(r),_.disableButtons()}},function(){console.log("Error: Default json for preferred predicates has not been defined yet for this APP")}),a.hasOwnProperty("tagRelationships")){let e=a.tagRelationships;t.is(e)&&(t.is(M.tagRelationshipCards)&&r.cleanUpTagRelationCards(),M.toggleActivateTagOperator.checkFlag=e.activate_tag_relationship,t.is(e.tagRelationship_predicates)&&e.tagRelationship_predicates.length>0&&(M.tagRelationshipCards.show(),r.getPredicatesObject().then(function(t){r.getRootWOfPredicates().then(function(t){for(let t=0;t<e.tagRelationship_predicates.length;t++){let a=e.tagRelationship_predicates[t].uri,n=M._attributesMap[a],i={cardDiv:M.tagRelationshipCards,textOnCard:n,uri:a,tabName:"SearchControl_6WTags",operator:e.tagRelationship_predicates[t].operator};r.renderTagRelationshipRow(i)}M.tagRelationshipCards.childNodes[0].hidden=!1,_.disableButtons()})})))}else t.is(M.toggleActivateTagOperator)&&(M.toggleActivateTagOperator.checkFlag=!1),t.is(M.tagRelationshipCards)&&(r.cleanUpTagRelationCards(),r.getRootWOfPredicates().then(function(e){if(M.tagRelationshipCards.show(),t.is(r._listOfDefaultAndTags)&&r._listOfDefaultAndTags.length>0){for(let e=0;e<r._listOfDefaultAndTags.length;e++){let t=r._listOfDefaultAndTags[e],a=M._attributesMap[t],n={cardDiv:M.tagRelationshipCards,textOnCard:a,uri:t,tabName:"SearchControl_6WTags",operator:"AND"};r.renderTagRelationshipRow(n)}M.tagRelationshipCards.childNodes[0].hidden=!1,_.disableButtons()}if(t.is(r._listOfIrrelevantAndTags)&&r._listOfIrrelevantAndTags.length>0){for(let e=0;e<r._listOfIrrelevantAndTags.length;e++){let t=r._listOfIrrelevantAndTags[e],a=M._attributesMap[t],n={cardDiv:M.tagRelationshipCards,textOnCard:a,uri:t,tabName:"SearchControl_6WTags",operator:"OR"};r.renderTagRelationshipRow(n)}M.tagRelationshipCards.childNodes[0].hidden=!1,_.disableButtons()}}));if(M._includeDHierarchyTagValue(),!0===v.getOption("activate_hierarchical_tag_depth")){let e=a.hierarchical_predicates,r=[];if(t.is(e)?(M.EnableTagHierarchicalON.checkFlag=e.specify_hierarchical_predicates,M._prev_hierarchical_predicates=e,r=e.hierarchical_predicates):t.is(M.EnableTagHierarchicalON)&&(M.EnableTagHierarchicalON.checkFlag=!1),M._cleanUpHierarchyTags(),t.is(r)&&r.length>0)for(let e=0;e<r.length;e++){let t=r[e].uri,a=M._get6WVal(t),n={label:M._attributesMap[t],uri:t,wVal:a};M._includeDHierarchyTagValue(n)}}_.disableButtons(),c.unmask(widget.body)})},function(){c.unmask(widget.body)}),a.hasOwnProperty("attributes_display")){let e=a.attributes_display;t.is(e)&&(M.EditTagCategoryON.checkFlag=e)}if(!0===v.getOption("activate_hierarchical_tag_depth")){let e=a.hierarchical_predicates;t.is(e)?(M.EnableTagHierarchicalON.checkFlag=e.specify_hierarchical_predicates,M._prev_hierarchical_predicates=e):t.is(M.EnableTagHierarchicalON)&&(M.EnableTagHierarchicalON.checkFlag=!1),M._cleanUpHierarchyTags()}if(v.getOption("tagsColorCustomize")&&h.onRender(e.tagColorization),v.getOption("controlledVocabulary")&&g.getInputFromStore(e.controlledVocabulary),!0===this._isCompanyTagsActivated()&&m.getInputFromStore(e.enterprise_ontology),a.hasOwnProperty("enterprise_ontology")){let e=a.enterprise_ontology;t.is(e)&&!0===this._isCompanyTagsActivated()&&(M.iconurlInput.value=e.iconURL,M.prefixInput.value=e.tagPrefix,!0===this._isExpertIdeationActivated()&&(M.expertGroupDisplay.setText(e.expertUserGrp),M.expertGroupDisplay.getText().length>0&&(M.choose.hide(),M.fontIconTrash.show(),M.expertGroupDisplay.show())),!0===this._isAdvocacyActivated()&&(M.advocacyGroupDisplay.setText(e.advocacyCommunityLabel),M.advocacyGroupDisplay.getText().length>0&&(M.chooseAdvocacy.hide(),M.fontIconTrashA.show(),M.advocacyGroupDisplay.show())))}!0===this._isCompanyTagsActivated()&&(M.companyTagsSearchSuggest.checkFlag=e.companyTagsSearchSuggest,M.scrollerText=e.enterprise_ontology_history,M.scrollerText=M.scrollerText?M.scrollerText:"",M.scrollerBody.setText(M.scrollerText),M.ControlledVocabModeON.checkFlag=e.controlledVocabMode)}},cleanUpTagRelationCards:function(){for(let e=M.tagRelationshipCards.childElementCount-1;e>0;e--){let a=M.tagRelationshipCards.childNodes[e];t.is(a)&&a.destroy()}M.tagRelationshipCards.childNodes[0].hidden=!0},_cleanUpHierarchyTags:function(){let e=M.divDHierarchyWhatContent.childElementCount;for(let t=e-1;t>=0;t--)M.divDHierarchyWhatContent.childNodes[t].destroy();for(let t=(e=M.divDHierarchyWhoContent.childElementCount)-1;t>=0;t--)M.divDHierarchyWhoContent.childNodes[t].destroy();for(let t=(e=M.divDHierarchyWhenContent.childElementCount)-1;t>=0;t--)M.divDHierarchyWhenContent.childNodes[t].destroy();for(let t=(e=M.divDHierarchyWhereContent.childElementCount)-1;t>=0;t--)M.divDHierarchyWhereContent.childNodes[t].destroy();for(let t=(e=M.divDHierarchyWhyContent.childElementCount)-1;t>=0;t--)M.divDHierarchyWhyContent.childNodes[t].destroy();for(let t=(e=M.divDHierarchyHowContent.childElementCount)-1;t>=0;t--)M.divDHierarchyHowContent.childNodes[t].destroy()},cleanUpAttributeTags:function(){let e=M.divWhatContent.childElementCount;for(let t=e-1;t>=0;t--)M.divWhatContent.childNodes[t].destroy();for(let t=(e=M.divWhoContent.childElementCount)-1;t>=0;t--)M.divWhoContent.childNodes[t].destroy();for(let t=(e=M.divWhenContent.childElementCount)-1;t>=0;t--)M.divWhenContent.childNodes[t].destroy();for(let t=(e=M.divWhereContent.childElementCount)-1;t>=0;t--)M.divWhereContent.childNodes[t].destroy();for(let t=(e=M.divWhyContent.childElementCount)-1;t>=0;t--)M.divWhyContent.childNodes[t].destroy();for(let t=(e=M.divHowContent.childElementCount)-1;t>=0;t--)M.divHowContent.childNodes[t].destroy()},_checkHierarchicalTagUpdate:function(e){let a=!1;if(t.is(this._prev_hierarchical_predicates))if(this._prev_hierarchical_predicates.specify_hierarchical_predicates!==e.specify_hierarchical_predicates)a=!0;else if(this._prev_hierarchical_predicates.hierarchical_predicates.length!==e.hierarchical_predicates.length)a=!0;else{let t=[];this._prev_hierarchical_predicates.hierarchical_predicates.forEach(e=>{t.push(e.uri)});for(let r=0;r<e.hierarchical_predicates.length;r++)if(t.indexOf(e.hierarchical_predicates[r].uri)<0){a=!0;break}}else a=!0;e.version=a?""+ +new Date:this._prev_hierarchical_predicates.version},_isOntologyActivated:()=>!0===b.isInternalProduction()||!0===v.getOption("allowEnterpriseDictionaryModification"),_isCompanyTagsActivated:()=>"OnPremise"!==_.platformID,_isDeleteCompanyTagActivated:()=>!0===v.getOption("DeleteManualCompanyTag"),_isDeleteAllExistingCompanyTagActivated:()=>!0===v.getOption("DeleteAllExistingCompanyTag"),_isExpertIdeationActivated:()=>!0===v.getOption("ExpertIdeation"),_isAdvocacyActivated:()=>!0===v.getOption("AdvocacyAnnotation"),_get6WVal:function(e){let a=null,r=M._6WPredicatesMap.find(function(t){return t.curi===e});return t.is(r)?("ds6w:what"===r.lineage&&(a="What"),"ds6w:where"===r.lineage&&(a="Where"),"ds6w:who"===r.lineage&&(a="Who"),"ds6w:when"===r.lineage&&(a="When"),"ds6w:how"===r.lineage&&(a="How"),"ds6w:why"===r.lineage&&(a="Why")):"computedCountryInfo"===e&&(a="Where"),a},_getWtreeContents:function(e){let a={},r=[],n=[],i=e.childElementCount;for(let a=0;a<i;a++){let i=e.childNodes[a];if(t.is(i)){let e=i.childElementCount;for(let a=0;a<e;a++){let e=i.childNodes[a];if(t.is(e)){let a=e.childElementCount;for(let i=0;i<a;i++){let a={},o={},s=e.childNodes[i].getAttribute("uri");t.is(s)&&("strike_through"===e.childNodes[i].className?(o.uri=e.childNodes[i].getAttribute("uri"),o.label=e.childNodes[i].textContent,n.push(o)):(a.uri=e.childNodes[i].getAttribute("uri"),a.label=e.childNodes[i].textContent,r.push(a)))}}}}}return a.predicates=r,a.excluded_predicates=n,a},_getKeyByValue:function(e,t){return Object.keys(e).find(a=>e[a]===t)},getCurrentDatasetTitle:function(e){w.getSearchSettings({tenantID:_.platformID}).then(function(a){if(a.hasOwnProperty("enterprise_ontology")&&t.is(a.enterprise_ontology.dataset,"array")&&a.enterprise_ontology.dataset.length>0){let t=a.enterprise_ontology.dataset[0].datasetTitle+" | "+a.enterprise_ontology.dataset[0].modificationdate+" | "+a.enterprise_ontology.dataset[0].publisher;e.setAttribute("placeholder",t)}})},collapseRootWArea:function(e){e.getChildren()[0].getChildren()[1].setStyles({"min-height":"0px"})},toggleRootWArea:function(e){var a,r,n,i,o=e.getElement(".rootw-arrow-container");e.getElement(".rootw-expander");if(e.getParent().getChildren()[0].getChildren()[1].setStyles({"min-height":"100px"}),e.hasClassName("hiddenW"),e.removeClassName("hiddenW"),o.addClassName("expanded"),o)for(n=0,i=(a=o.getParent().getChildren()).length;n<i;++n)(r=t.extendElement(a[n])).match(".root-container-inner")&&(t.extendElement(r.getChildren()[0]),r.setStyles({position:"relative",overflow:"hidden",opacity:1,height:"100%",visibility:"visible"})),r.match(".arrow")&&t.extendElement(r.getChildren()[0])},onUpdateUI:function(e){!0===this._isCompanyTagsActivated()&&m.onUpdateUI()}};return M});