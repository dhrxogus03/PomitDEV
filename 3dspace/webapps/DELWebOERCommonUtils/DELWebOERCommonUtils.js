define("DS/DELWebOERCommonUtils/mixins/CommandsHandlerMixin",[],function(){"use strict";return{getCommandHandler:function(){return this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent)},isCheckExecutable:function(e){return this.getCommandHandler().isCheckExecutable(e)},enableCmd:function(e){return this.getCommandHandler().enableHandler(e)},disableCmd:function(e){return this.getCommandHandler().disableHandler(e)},enableCheck:function(e){return this.getCommandHandler().enableCheck(e)},disableCheck:function(e){return this.getCommandHandler().disableCheck(e)},getCheckState:function(e){return this.getCommandHandler().getCheckState(e)},executeCommand:function(e){let t=this;return this.getCommandHandler().executeHandler({id:e.handlerId,args:e.args}).catch(e=>{throw t.logger.error(e),t.logger.error(e.getError()),t.logger.error(e.getDescription()),t.logger.error(e.getReturnValue()),new Error(e.getError())})}}}),define("DS/DELWebOERCommonUtils/utils/TrackUtils",["DS/Usage/TrackerAPI"],function(e){"use strict";let t={trackChanges:function(t){let i=t&&t.executionContext?t.executionContext:{},n=i.getComponent&&i.getComponent(WAfrStandardComponentKey.WidgetProxyComponent),r=i.getSourceApp&&i.getSourceApp().getId?i.getSourceApp().getId():null,o=n&&n.getValue("x3dPlatformId")?n.getValue("x3dPlatformId"):"OnPremise";if(t&&t.category&&t.action&&r&&o){let i={eventCategory:t.category,eventAction:t.action,eventLabel:t.label,eventValue:t.value,appID:r,tenant:o,persDim:t.dims,persVal:t.vals};e.trackPageEvent(i)}}};return t}),define("DS/DELWebOERCommonUtils/utils/NodeUtils",[],function(){"use strict";let e={getRirPath:function(t){return t.pathElement?e.getPathFromPathElement(t.pathElement):t.getRirPath()},getPathFromPathElement:function(e){let t=[];if(e.externalPath&&e.externalPath.length)for(let i=0;i<e.externalPath.length;i++){let n=e.externalPath[i].getModelIdentification();n&&t.push(n)}return t}};return e}),define("DS/DELWebOERCommonUtils/utils/CommonUtils",["UWA/Core","DS/WebappsUtils/WebappsUtils","DS/PlatformAPI/PlatformAPI"],function(e,t,i){"use strict";return{getValue:function t(i,n){var r;if("object"==typeof i)if(Object.prototype.hasOwnProperty.call(i,n))r=i[n];else for(let o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&(r=t(i[o],n),e.is(r)))return r;return r},processInChunk:function(e,t=1,i=0,n){if(Array.isArray(e)){let r=e.slice();if(r.length>t)for(let e=0,o=r.length;e<o;e+=t){let e=r.splice(0,t);n&&setTimeout(n.bind(null,e,0===r.length),i)}else n&&n(r,!0)}},getAssetsUrl:function(e,i){return t.getWebappsAssetUrl(e,i)},_isPerformanceLogEnabled:function(){return"true"===sessionStorage.getItem("DS/DELWeb3DUtils/DELWeb3DUtils.logPerformance")},markStart:function(e){this._isPerformanceLogEnabled()&&performance.mark(e+"Start")},markEnd:function(e,t){this._isPerformanceLogEnabled()&&(performance.mark(e+"End"),performance.measure(t+" : ",e+"Start",e+"End"))},getUserLogin:function(){var e=i.getUser();return e&&e.login?e.login:""},isArrayOfArray:function(t){let i=!1;return e.is(t,"array")&&t.length>0&&(i=e.is(t[0],"array")),i},bindComponentToMixin:function(t,i={}){let n={};return Object.keys(i).forEach(r=>{e.is(i[r],"function")?n[r]=i[r].bind(t):n[r]=i[r]}),n}}}),define("DS/DELWebOERCommonUtils/mixins/EventsMixin",[],function(){"use strict";return{getModelEvents:function(){return this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents)},publish:function(e={}){e.data=e.data||{},e.data.origin=this.getRegisteredIdentifier(),this.getModelEvents().publish(e)},subscribe:function(e,t){const i=this.getModelEvents().subscribe(e,t);return this.eventTokens.push(i),i},unsubscribe:function(e){return this.getModelEvents().unsubscribe(e)}}}),define("DS/DELWebOERCommonUtils/mixins/WebServicesMixin",["DS/WAFData/WAFData","UWA/Class/Promise","i18n!DS/DELWebOERCommonUtils/assets/nls/DELOERCommonServicesComp"],function(e,t,i){"use strict";return{executeRequestPromise:function(n,r){var o=this,s=r||{},a={Accept:"application/json, text/plain, application/octet-stream","Content-Type":"application/json"},l=this.getComponentFromIdentifier("DELCommonUtilsServices"),c=this.getNotificationManager();return new t((r,u)=>{var d=new URL(n+"");d.searchParams.set("tenant",l.getPlatformId()),s.headers=s.headers||{},UWA.merge(s.headers,a),UWA.merge(s.headers,{securityContext:`${l.getCurrentSecurityContext()}`}),function(n,r){return new t((t,s)=>{o._webServiceRequests||(o._webServiceRequests={});let a=UWA.Utils.getUUID(),l=e.authenticatedRequest(n.toString(),{method:r.method?r.method:"GET",type:r.dataType?r.dataType:"json",data:r.payload?UWA.Json.encode(r.payload):"",headers:r.headers,timeout:r.timeout||o.getTimeOut(),proxy:r&&r.proxy?r.proxy:"none",onComplete:function(e){t(e),delete o._webServiceRequests[a]},onTimeout:function(e){!0!==r.suppressNotif&&c&&c.addNotif&&c.addNotif({level:"warning",message:i.get("Warn.Timeout.Message"),sticky:!1}),s(e),delete o._webServiceRequests[a]},onFailure:function(e){s(e),delete o._webServiceRequests[a]},onCancel:function(){delete o._webServiceRequests[a]}});o._webServiceRequests[a]=l})}(d.toString(),s).then(r).fail(u)})},getCurrentSecurityContext:function(){return this.getComponentFromIdentifier("DELCommonUtilsServices").getCurrentSecurityContext()},getTimeOut:function(){return this.getWidgetComponent().getValue("webTimeout")||6e4},abortAllRequests:function(){this._webServiceRequests&&Object.values(this._webServiceRequests).forEach(function(e){e&&e.cancel&&e.cancel()}),delete this._webServiceRequests}}}),define("DS/DELWebOERCommonUtils/mixins/RootActionHandlerExtMixin",[],function(){"use strict";return{onRootsChange:async function(e={}){if(!(this.getRoots&&this.removeRoots&&this.empty&&this.addRoots))throw new Error("Invalid usage, in order to use this mixin please implement required functions in the component");let t=this,i=e.data,n=t.getRoots()||[],r=[],o=[];UWA.is(i)?(r=i.filter(e=>{let t=!0;return n.length>0&&(t=!n.some(t=>t.id===e.id)),t}),o=n.filter(e=>{let t=!1;return n.length>0&&(t=!i.some(t=>e.id===t.id)),t})):await t.empty(),o.length>0&&await t.removeRoots({items:o}),r.length>0&&await t.addRoots({items:r})}}}),define("DS/DELWebOERCommonUtils/utils/XSOManager",["UWA/Core","UWA/Class","DS/Logger/Logger","DS/Selection/XSO","DS/Selection/CSOManager"],function(e,t,i,n,r){"use strict";let o=i.getLogger("DS/DELWebOERCommonUtils/utils/XSOManager");var s=function(e){return{eventChannel:`DELOER/${e}`,useUniqueID:!0,getElementID:function(e={}){let t;return e.getId?t=e.getId():e.pathElement&&e.pathElement.getUID?t=e.pathElement.getUID():o.debug("Not a valid selection object, selection object should either be a node or path element"),t}}},a=new n(s("CSO")),l=new n(s("HSO")),c=new n(s("PSO")),u=[];return u.push(r.onPostAdd(function(e){a.add(e)})),u.push(r.onPostRemove(function(e){a.remove(e)})),t.singleton({init:function(e){this._parent(e)},getCSO:function(){return a},getHSO:function(){return l},getPSO:function(){return c}})}),define("DS/DELWebOERCommonUtils/DELWebBaseComponent",["UWA/Core","DS/Logger/Logger","DS/WAfrExecutionContext/mod_Component","DS/DELWebOERCommonUtils/mixins/EventsMixin","DS/DELWebOERCommonUtils/mixins/CommandsHandlerMixin"],function(e,t,i,n,r){"use strict";function o(e={}){return this.logger=null,this.eventTokens=[],this}return i.Component.implementsBy(o),o.prototype.initialize=async function(){let e=this.getRegisteredIdentifier(),i=sessionStorage.getItem("DELOER_AP.log.level");if(this.logger=t.getLogger(e),i)try{this.logger.setLevel(i)}catch(e){this.logger.error(e),this.logger.error("Invalid level is provided in session storage DELOER_AP.log.level")}this.logger.log("Component initialized")},o.prototype.clean=async function(){this.eventTokens.forEach(e=>{this.unsubscribe(e)}),this.eventTokens=[]},o.prototype.destroy=async function(){await this.clean(),delete this.eventTokens},o.prototype.getComponentFromIdentifier=function(e){try{return this.getExecutionContext().getComponent(e)}catch(t){return this.logger.error(t),this.logger.error(`Error occurred while getting the component ${e}`),null}},o.prototype.getWafrUIComponent=function(){return this.getComponentFromIdentifier(WAfrStandardComponentKey.UIComponent)},o.prototype.getWidgetComponent=function(){return this.getComponentFromIdentifier(WAfrStandardComponentKey.WidgetProxyComponent)},o.prototype.getUIFrameComponent=function(){return this.getComponentFromIdentifier(WAfrStandardComponentKey.UIFrame)},o.prototype.getNotificationManager=function(){return this.getComponentFromIdentifier(WAfrStandardComponentKey.NotificationManager)},o.prototype.loadJson=async function(e){let t;if(!e)throw new Error("No path found to load AMD Module");return t=await this.loadSource(`text!${e}`),t=JSON.parse(t)},o.prototype.loadNLS=async function(e){let t;if(!e)throw new Error("No nls path found to load AMD Module");return t=await this.loadSource(`i18n!${e}`)},o.prototype.loadSource=async function(e){let t;if(!e)throw new Error("Path not found to load AMD Module");return t=await new Promise((t,i)=>{try{require([e],function(e){t(e)})}catch(e){i(e)}})},o.prototype.getExposedComponent=function(){return this.publicAPI||(this.publicAPI={}),this.publicAPI},o.prototype.mixinProperties=function(e,t={}){if("object"!=typeof t)throw new Error("srcObj obj to update must be an object");let i;i=e.prototype,Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})},o.prototype.mixinProperties(o,n),o.prototype.mixinProperties(o,r),o}),define("DS/DELWebOERCommonUtils/mixins/IndexServicesMixin",["UWA/Class/Promise","DS/DELWebOERCommonUtils/mixins/WebServicesMixin"],function(e,t){"use strict";let i={getAttributeForIds:function(t,i,n){var r,o,s=this,a=function(t,i,n){return new e((e,r)=>{s.executeRequestPromise(s.get3DSpaceUrl()+"/cvservlet/fetch/v2",{method:"POST",payload:function(e,t,i){return{label:s.getRegisteredIdentifier()+"-"+Date.now(),physicalid:e,locale:"en",select_predicate:t,select_file:i}}(t,i,n)}).then(function(t){t&&UWA.is(t.error)?r(t.error.errorMessage):e(t)}).fail(function(e){r(e)})})},l=[],c=[];return UWA.is(t,"array")&&UWA.is(i,"array")?new UWA.Promise(function(u,d){if(t.length>1e4)for(r=0,o=t.length;r<o;r+=1e4)l=t.slice(r,r+1e4),c.push(a(l,i,n));else c.push(a(t,i,n));e.all(c).then(function(e){var t={};e.forEach(e=>{Object.assign(t,function(e){var t,i={};return e?(t="string"==typeof e?JSON.parse(e).results:e.results,UWA.is(t,"array")&&t.forEach(e=>{var t=null,n={};UWA.is(e.attributes,"array")&&(e.attributes.forEach(e=>{"resourceid"===e.name?t=e.value:n[e.name]?(UWA.is(n[e.name],"array")||(n[e.name]=[n[e.name]]),n[e.name].push(e.value)):n[e.name]=e.value}),i[t]=n)})):s.logger.error("Unable to parse data, as no response found from the fetch webservice"),i}(e))}),u(t)}).fail(d)}):UWA.Promise.reject("Invalid Input Provided")},get3DSpaceUrl:function(){let e=this.getComponentFromIdentifier("DELCommonUtilsServices");if(!e)throw new Error("Common Services Component is not available, \n                                 Component with the key DELCommonUtilsServices is mandatory to be available to use mixin IndexServicesMixin");return e.get3DSpaceUrl()},getProgressiveExpand:async function(e){return await this.executeRequestPromise(`${this.get3DSpaceUrl()}/cvservlet/progressiveexpand/v2?output_format=cvjson`,{method:"POST",payload:e})},getNavigateUrlOptions:function(){let e={dataType:"json",method:"POST"},t=new URL(`${this.get3DSpaceUrl()}/cvservlet/navigate`);return t.searchParams.set("SecurityContext",this.getCurrentSecurityContext()),e.url=t.toString(),e}};return i=Object.assign(i,t)}),define("DS/DELWebOERCommonUtils/DELWebCommandsAvailabilityComponent",["DS/DELWebOERCommonUtils/DELWebBaseComponent"],function(e){"use strict";return class extends e{constructor(e){if(super(e),!e.availabilityConfigPath)throw new Error("Invalid input, availabilityConfigPath is mandatory");this.configPath=e.availabilityConfigPath}async initialize(){let e=this;await super.initialize(),this.compConfig=await this.loadJson(this.configPath),this.compConfig&&this.compConfig.defaultAvailability&&UWA.is(this.compConfig.commands,"array")&&this.compConfig.commands.length>0&&(e.defaultAvailability=this.compConfig.defaultAvailability,e.commands=this.compConfig.commands,e.reset(),[{eventName:{event:"updateCommandAvailability"},callback:function(t){let i=t&&t.data?t.data:{},n=Object.keys(i)[0];e.defaultAvailability[n]&&e.updateAvailability(i)}},{eventName:{event:"resetCommandAvailability"},callback:e.reset}].forEach(e=>{this.subscribe(e.eventName,e.callback.bind(this))}))}async clean(){await super.clean(),this.unsubscribe(this.updateEventToken)}async destroy(){await super.destroy()}updateAvailability(e){let t=this;if(UWA.is(e,"object")){let i=Object.keys(e)[0],n=e[i];i&&t.commands.forEach(function(e){if(!0!==e.force){let r=e.modes||{};if(r[i]){let o,s=r[i];o=n&&Object.keys(n).length>0?Object.keys(n).some(e=>n[e]&&s[e]):e.defaultAvailability,t._manageVisibility(e,o)}}})}}_manageVisibility(e,t){let i=this.getCommandHandler();if(i)switch(e.handlerType){case"check":t?i.enableCheck(e.identifier):i.disableCheck(e.identifier);break;case"radio":t?i.enableRadio(e.identifier):i.disableRadio(e.identifier);break;default:t?i.enableHandler(e.identifier):i.disableHandler(e.identifier)}}reset(){var e=this;e.commands.forEach(function(t){if(UWA.is(t,"object")&&UWA.is(t.defaultAvailability,"boolean")&&!0!==t.force)e._manageVisibility(t,t.defaultAvailability);else{let i=UWA.is(t,"object")&&t.modes?t.modes:{};Object.keys(i).forEach(function(t){e.updateAvailability({[t]:e.defaultAvailability[t]})})}})}updateCommands(e){let t=this;UWA.is(e,"array")&&e.forEach(e=>{this.commands.forEach(t=>{t.identifier===e.identifier&&Object.assign(t,e)}),t._manageVisibility(e,!e.disable)})}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.updateAvailability=this.updateAvailability.bind(this),this.publicAPI.reset=this.reset.bind(this),this.publicAPI.updateCommands=this.updateCommands.bind(this),this.publicAPI}}}),define("DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin",["DS/DELWebOERCommonUtils/mixins/IndexServicesMixin"],function(e){"use strict";const t=Object.freeze({PROCESS:"PROCESS",RESOURCE:"RESOURCE",PRODUCT:"PRODUCT",MBOM:"MBOM"}),i=Object.freeze({DELLmiPPRSystemReference:t.PROCESS,DELFmiFunctionReference:t.MBOM,"interfaces/Resource":t.RESOURCE,VPMReference:t.PRODUCT,DELLmiHeaderWorkPlanReference:t.PROCESS}),n=["DELWkiInstructionReference","DELWkiSignOffReference","DELWkiAlertReference","DELWkiDataCollectPlanReference","DELWkiDataCollectChecklistReference","DELWkiDataCollectReference"];var r={PPRTYPES:t,getPPRType:function(e){var t;if(e){e=UWA.is(e,"array")?e.join("/"):e;for(const n of Object.keys(i))if(e.contains(n)){t=i[n];break}}return t},getTaxonomies:function(e){let t=this;return this.getAttributeForIds(e,["taxonomies"]).then(function(e){var t={};if(e)for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]&&UWA.is(e[i].taxonomies,"array")?e[i].taxonomies.join("/"):e[i].taxonomies);return t}).fail(function(i){t.logger.log(i),t.logger.error("Error occurred while fetching taxonomies for id ",e)})},isWKIType:function(e){return n.indexOf(e)>-1}};return r=Object.assign(r,e)}),define("DS/DELWebOERCommonUtils/components/DELOERCommonServicesComp",["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/Usage/TrackerAPI","DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERCommonUtils/mixins/IndexServicesMixin","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin"],function(e,t,i,n,r){"use strict";const o="xPref_CREDENTIAL";class s extends i{constructor(e){super(e),this.platformServices=null}async initialize(){let t=this;await super.initialize(),await new Promise(function(i,n){e.getPlatformServices({onComplete:async function(e){t.platformServices=e;try{let e,r,s=t.getWidgetComponent(),a=s.getValue(o),l=await t._getSecurityContext();if(!l)throw t.logger.log(`Unable to fetch the security context due to - ${JSON.stringify(l)}`),new Error("Unable to fetch the security context");e=l.securityContext,r=l.securityContextsList||[],a&&a===e?i():a&&r.includes(a)?i():(t.logger.debug("Security context stored in widget is not valid, updating valid security context"),s.setValue(o,e),i())}catch(e){n(e)}},onFailure:function(e){n(e)}})})}get3DSpaceUrl(){return this.getPlatformURL("3DSpace")}getPlatformURL(e){var t=this.getPlatformId();return this.getTenantInfo(t)[e]}getTenantInfo(e){var t={};for(let i=0;i<this.platformServices.length;i++)if(this.platformServices[i].platformId===e){t=this.platformServices[i];break}return t}getAppId(){return this.getExecutionContext().getSourceApp().getId()}getWidgetId(){return this.getWidgetComponent().getId()}getPlatformId(){let e=this.getWidgetComponent();return e.getValue("x3dPlatformId")?e.getValue("x3dPlatformId"):"OnPremise"}getCurrentSecurityContext(){let e,t=this.getWidgetComponent().getValue(o);return t?e=`ctx::${t}`:this.logger.error("Security Context is not available"),e}_getSecurityContext(){var e=require("DS/WAFData/WAFData");return new Promise((t,i)=>{e.authenticatedRequest(this.get3DSpaceUrl()+"/resources/modeler/pno/person?current=true&select=preferredcredentials&select=collabspaces",{method:"GET",headers:{Accept:"application/json"},onComplete:function(e){let i,n,r=function(e,t,i){return i+"."+t+"."+e};UWA.is(e,"string")&&(e=JSON.parse(e)),n=function(){let t=[],i=function(e){var t="",i="";for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let r=e[n];switch(n){case"organization":t=r.name;break;case"role":i=r.name}}return{org:t,role:i}};for(let n=0;n<e.collabspaces.length;n++){let o=e.collabspaces[n];for(let e=0;e<o.couples.length;e++){let n=i(o.couples[e]);t.push(r(o.name,n.org,n.role))}}return t}()||[],i=function(e){if(e&&e.preferredcredentials&&e.preferredcredentials.role&&e.preferredcredentials.organization&&e.preferredcredentials.collabspace)return r(e.preferredcredentials.collabspace.name,e.preferredcredentials.organization.name,e.preferredcredentials.role.name)}(e)||n[0],t({securityContext:i,securityContextsList:n})},onTimeout:function(e){i(e)},onFailure:function(e){i(e)}})})}async clean(){await super.clean(),this.abortAllRequests(),delete this.platformServices}async destroy(){await super.destroy()}canBeParallelized(){return!1}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.get3DSpaceUrl=this.get3DSpaceUrl.bind(this),this.publicAPI.getPlatformURL=this.getPlatformURL.bind(this),this.publicAPI.getTenantInfo=this.getTenantInfo.bind(this),this.publicAPI.getAppId=this.getAppId.bind(this),this.publicAPI.getWidgetId=this.getWidgetId.bind(this),this.publicAPI.getPlatformId=this.getPlatformId.bind(this),this.publicAPI.getCurrentSecurityContext=this.getCurrentSecurityContext.bind(this),this.publicAPI.executeRequestPromise=this.executeRequestPromise.bind(this),this.publicAPI.getAttributeForIds=this.getAttributeForIds.bind(this),this.publicAPI.getProgressiveExpand=this.getProgressiveExpand.bind(this),this.publicAPI.getNavigateUrlOptions=this.getNavigateUrlOptions.bind(this),this.publicAPI.PPRTYPES=this.PPRTYPES,this.publicAPI.getPPRType=this.getPPRType.bind(this),this.publicAPI.getTaxonomies=this.getTaxonomies.bind(this),this.publicAPI.isWKIType=this.isWKIType.bind(this),this.publicAPI}}return s.prototype.mixinProperties(s,n),s.prototype.mixinProperties(s,r),s});