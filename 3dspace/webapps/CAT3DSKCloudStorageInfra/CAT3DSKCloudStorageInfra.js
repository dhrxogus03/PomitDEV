define("DS/CAT3DSKCloudStorageInfra/CAT3DSKCloudStorageService",["DS/CoreEvents/Events","UWA/Core","DS/CAT3DWInfra/CAT3DWPreferenceManager","DS/MathematicsES/MathPoint2DJSImpl","UWA/Controls/Abstract","DS/WAFData/WAFData","DS/CAT3DWInfra/CAT3DWPlateformServices"],function(e,t,n,o,a,r,c){"use strict";var s=a.singleton({init:function(e){},getUserPreference:function(e){var t={success:!1,value:{}},o=void 0,a=n.getPreferenceValue("appMode");o="Desktop.",o+="whiteboard"===a?"3DWhiteboard.":"3DSketch.",n.getPreferenceValue("swymTenant")&&"odtTest1"!=n.getPreferenceValue("swymTenant")?c.get3DPassport(n.getPreferenceValue("swymTenant")).then(c.getx3DPhoto.bind(this,n.getPreferenceValue("swymTenant").toLowerCase())).then(c.logInX3DPhoto.bind(this,"/X3DPhoto/api/appstorage/v1/appstorage/getOrCreatePreference")).then(function(n){var a=n,r={};r.id=o,this._callRestApi(a,r).then(function(n){e&&(t.value=n,t.success=!0,e(t))}).catch(function(n){n&&(console.log(n),e(t))})}.bind(this)).catch(function(n){n&&(console.log(n),e(t))}):e(t)},setUserPreference:function(e,t){var o={success:!1},a=void 0,r=n.getPreferenceValue("appMode");a="Desktop.",a+="whiteboard"===r?"3DWhiteboard.":"3DSketch.",c.get3DPassport(n.getPreferenceValue("swymTenant")).then(c.getx3DPhoto.bind(this,n.getPreferenceValue("swymTenant").toLowerCase())).then(c.logInX3DPhoto.bind(this,"/X3DPhoto/api/appstorage/v1/appstorage/createPreference")).then(function(n){var r=n,c={};c.id=a,c.content=e,this._callRestApi(r,c).then(function(e){t&&(o.success=!0,t(o))}).catch(function(e){e&&(console.log(e),t(o))})}.bind(this)).catch(function(e){e&&(console.log(e),t(o))})},_callRestApi:function(e,t){return new UWA.Promise(function(n,o){r.authenticatedRequest(e,{method:"POST",timeout:5e4,headers:{"content-type":"application/json"},data:JSON.stringify(t),onComplete:function(e){n(e)}.bind(this),onFailure:function(e,t,n){o(e)}})}.bind(this))}});return UWA.namespace("DS/CAT3DSKCloudStorageInfra/CAT3DSKCloudStorageService",s)});