define("DS/DesignEnvironmentCreation/commands/DesignEnvCreateCmd",["DS/ApplicationFrame/Command"],e=>{"use strict";return class extends e{constructor(e){super(e,"create_newdesignenv_command"),this.options=e}execute(){require(["DS/DesignEnvironmentCreation/views/js/DesignEnvCreateDailog"],e=>{(new e).createDesignEnv()})}isSelCountSupported(e){return!0}}}),define("DS/DesignEnvironmentCreation/utils/DesignExperienceCreationConstants",[],()=>{return Object.freeze({EVENTS_ENXMODEL_ROOT_ADDTITLE:"ENXModel/Root/addTile",EVENTS_ENXMODEL_DESIGNEXP_ADD:"ENXModel/DesignEnv/add"})}),define("DS/DesignEnvironmentCreation/services/CreateDesignEnvService",["DS/DesignEnvironmentUX/ws/WSAccess","DS/DesignEnvironmentUX/utils/DesignEnvUtils","i18n!DS/DesignEnvironmentCreation/assets/nls/DesignExperienceCreation"],(e,t,n)=>{return class{constructor(){t.init({initURL:!0,initWSAccess:!0})}createDesignExperience(e){return this._createDEStructure(e)}_createDEStructure(t){let i={title:t.label};return new Promise((s,r)=>{self.widget.newDesignExpCreated=!0,self.widget.is3dExcite?e.createExperience(i).then(function(e){let n="string"==typeof e?JSON.parse(e):e;s({objectId:n.experienceID,objectType:n.experienceType,displayName:t.label,displayType:self.widget.authorized_DE_types[1]})}):e.createFolder(i).then(function(i){let r="string"==typeof i?JSON.parse(i):i,a=e.createFolder({title:n.contextLabel,rootFolder:r.id}),o=e.createFolder({title:n.wipLabel,rootFolder:r.id});Promise.all([a,o]).then(()=>{s({objectId:r.id,objectType:"Workspace",displayName:t.label,displayType:"Bookmark Workspace"})})})})}buildDesignExperienceItem(e){return{protocol:"3DXContent",version:"1.1",source:"X3DSEAR_AP",widgetId:"preview-c185fc",data:{items:[{envId:t.getPlatformId(),serviceId:"3DSpace",contextId:t.getSecurityContext(),objectId:e.objectId,objectType:e.objectType,displayName:e.displayName,displayType:e.displayType}]}}}}}),define("DS/DesignEnvironmentCreation/commands/NewENOExpDesignExperience",["DS/ENONewWidget/command/NewContentCommandBase","i18n!DS/DesignEnvironmentCreation/assets/nls/DesignExperienceCreation","DS/Controls/ModalLoader"],function(e,t,n){return e.extend({defaults:{newType:"ENOExpDesignExperience",prefType:"ENOExpDesignExperience",objType:"ENOExpDesignExperience"},init(e){this._parent(e),this.labelTopBar=t.createDesignExperienceDialogLabel,this.commandName=t.designExperienceLabel,this.tenant=widget.getValue("x3dPlatformId")||"OnPremise",this.addEventsForCommad()},getType(){return this.defaults.newType},getCommandLabel:()=>t.createDesignExperienceDialogLabel,getOptions(e){return{labelTopBar:this.labelTopBar,commandName:this.commandName,options:{preferedType:e&&e.type?e.type:this.defaults.prefType},type:this.defaults.objType}},showLoader(){n.displayModalLoader(widget.body)},hideLoader(){n.removeModalLoader(widget.body)},execute(e){var t;this.showLoader(),t=e?this.getCreateOptions(e):this.getCreateOptions({newType:this.getType()}),this.launchCreateNew(t)},addEventsForCommad(){var e=this;require(["DS/ENONewWidget/ENONew/Events"],function(t){t.addEvent("onNewInfraExit",function(t){t.newType!==e.getType()||e.isEnabled()||e.enable()}),t.addEvent("onCreationDialogAction",function(t){t&&"ready"===t.action&&e.hideLoader()})})}})}),define("DS/DesignEnvironmentCreation/views/js/DesignEnvCreateDailog",["UWA/Core","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/DesignEnvironmentUX/services/DesignEnvAlertManager","DS/DesignEnvironmentUX/utils/DesignEnvModelEvents","DS/DesignEnvironmentCreation/services/CreateDesignEnvService","DS/UIKIT/Mask","DS/Utilities/UUID","DS/DesignEnvironmentCreation/utils/DesignExperienceCreationConstants","i18n!DS/DesignEnvironmentCreation/assets/nls/DesignExperienceCreation","css!DS/DesignEnvironmentCreation/DesignEnvironmentCreation.css"],(e,t,n,i,s,r,a,o,l,d,c,E)=>{return class{constructor(){this.container=e.createElement("div",{class:"creation-designenv-container"}),this.createDEService=new o}createDesignEnv(){this.deDialog=this.buildDesignEnvCreationDialog()}buildDesignEnvCreationDialog(){return new t({title:E.createDesignExperienceDialogLabel,domId:"create-designEnv-dialog",content:this.getContent(),width:425,resizableFlag:!0,buttons:this.getButtons(),modalFlag:!0})}getContent(){return this.createTitleField(),this.container}createAndOpenDesignEnv(e){let t=this,n=this.titleFieldEditor.elements.inputField.value.trim(),i={label:n=n||`${E.designExperienceLabel}${d.v4()}`};l.mask(this.container,"Creating..."),this.createDEService.createDesignExperience(i).then(n=>{let i=t.createDEService.buildDesignExperienceItem(n);l.unmask(t.container),t.closeCreationDialog(e),a.publish({event:c.EVENTS_ENXMODEL_ROOT_ADDTITLE,data:{unserializedData:i,behavior:"WITHOUT_CONTEXT",broadcast:!0}}),require(["DS/PADServices/utils/GlobalModelEvents"],e=>{e.publish({event:c.EVENTS_ENXMODEL_DESIGNEXP_ADD,data:{designEnv:i.data.items}}),r.successAlert(E.DeCreationSuccessful),e.publish({event:"ENXModel/DesignEnv/addToRecents",data:{designEnvIds:[n.objectId],designExpDetails:{label:n.displayName,id:n.objectId}}}),e.publish({event:"ENXModel/DesignEnv/removeColumn"})})})}createTitleField(){let e=(new Date).toISOString().replace("T","-").replaceAll(":","-").substring(0,19);this.titleFieldEditor=new i({value:`${E.designExperienceLabel}-${e}`,selectAllOnFocus:!0}),this.createRowContent("titleFieldRow",E.createDesignExpTitleLabel,this.titleFieldEditor).inject(this.container)}createRowContent(t,n,i){var s=e.createElement("div",{class:t});let r=e.createElement("label",{html:n,class:"label-field"});var a=e.createElement("div",{class:"label-container"});"Title"==n?i.getContent().getElement("input").addClassName("field-editor"):i.getContent().addClassName("field-editor"),r.inject(a),a.inject(s);var o=e.createElement("div",{class:"field-editor-container"});return i.inject(o),o.inject(s),s}getButtons(){return{Ok:new n({label:E.buttonCreateDesignExperience,onClick:this.createAndOpenDesignEnv.bind(this)}),Cancel:new n({label:E.buttonCloseDesignExperienceDialog,onClick:this.closeCreationDialog.bind(this)})}}closeCreationDialog(e){e.dsModel.dialog.close()}}});