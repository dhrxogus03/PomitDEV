define("DS/DELWKOTreeListAuthoringModule/DELWKOUpperViewsModule",["UWA/Core","DS/DELPPWTreeListAuthoringModule_FD02/TreeListAuthoringBaseModule"],function(e,t){"use strict";return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","SelectionBehavior","TaggerBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","UXFactoryBehavior","ImplementBehavior","CapableResourceLinkBehaviour","ViewBehavior","ExpandFilterBehavior","LoadObjectBehavior","LinkBehavior","RootsBehavior","MfgProcessBehavior","MfgProcessCrossHighlightBehavior"],creator:function(n,o,i,r,a,c,d,s,u,f,l,h,g,p,v,B,R,y,T,E,D,I,M,b){var C,S,A,O,P,L,m,w,N,k,U,F,W,x,V,j,K,X=new(0,t.creator)(n,o,i,r,a,d,s,u,f,l,h,g,p,v,B,T),_=[],G=[];return C=function(t){var n,o=!1;return e.is(t)&&(n=a.getPPRType(t),o=_.indexOf(n)>-1),o},S=function(t){var n=!1;return e.is(t)&&e.is(t.get)&&(n=G.indexOf(t.get("type"))>-1),n},A=function(){var e=[];i.getSelectedNodes().forEach(function(t){e.push({nodeId:t.getInstancePID()||t.getReferencePID(),isSelected:t.isSelected(),absPath:t.getAbsolutePath()})}),e.length>0&&n.notify("reComputeCrossHighlight",[e])},O=function(e,t,n){C(e)&&X.onAddReference(e,t,n)},P=function(t){var n=!1,o=[];t=e.is(t,"array")?t:[t],i.withTransactionUpdate(function(){t.forEach(function(t){!function(t,o){var r,a;S(t)&&(r=t.get("from"),a=t.get("to"),e.is(o,"array")&&o.length>0&&o.indexOf(a)>-1||(o.push(a),h.isDocConnection(t)?i.updateDocAttributes(r):i.isNodeAdded(a)&&(i.updateAttributes(t),n=!0)))}(t,o)}),n&&A()})},L=function(t){var n=[],o=function(t,n){var o,r;if(S(t)&&(o=t.get("to"),!(e.is(n,"array")&&n.length>0&&n.indexOf(o)>-1||(n.push(o),i.isNodeAdded(o))))){if(r=a.getReference(o),e.is(r)){var c={loadChildren:!1};i.addNode(r,c)}A()}};e.is(t,"array")?i.withTransactionUpdate(function(){t.forEach(function(e){o(e,n)})}):o(t,n)},N=function(t){var n=function(e){(C(e)||S(e))&&X.onChangeIRPC(e)};e.is(t,"array")?i.withTransactionUpdate(function(){t.forEach(function(e){n(e)})}):n(t)},m=function(t){var n=function(e){C(e)&&X.onRemoveRefOrInst(e)};e.is(t,"array")?i.withTransactionUpdate(function(){t.forEach(function(e){n(e)})}):n(t)},w=function(t){var o,r=!1;t=e.is(t,"array")?t:[t],o=function(t){var o,a;e.is(t)?S(t)&&(o=t.get("from"),a=t.get("to"),h.isDocConnection(t)?i.updateDocAttributes(o):i.isNodeAdded(a)&&(i.updateAttributes(t),r=!0)):n.debug("ERROR: No model defined")},i.withTransactionUpdate(function(){t.forEach(function(e){o(e)}),r&&A()})},k=function(e){var t=a.getReferenceModel(e.newInstPIDArray[0]);C(t)&&X.onReparentInstances(e)},U=function(e){var t=a.getReferenceModel(e);C(t)&&X.onReparentBegin(e)},F=function(e){var t=a.getReferenceModel(e);C(t)&&X.onReparentEnd(e)},W=function(t){var n,o;if(e.is(t)&&(e.is(t.selectedNodeIds)&&e.is(t.selectedNodeIds.length>0)&&t.selectedNodeIds.forEach(function(e){i.unSelectNode(e)}),e.is(t.changed)))if(e.is(t.changed.childOccurencePath)){if(n=i.getNodeModel(t.changed.childOccurencePath),e.is(n)&&n.length>0)for(o=0;o<n.length;o++)if(n[o].getAbsolutePath().join()===t.changed.childOccurencePath.join()){n[o].select();break}}else if(n=i.getNodeModel(t.changed.nodeId),e.is(n)&&n.length>0)for(o=0;o<n.length;o++)n[o].isRoot(!0)&&n[o].select()},x=function(e){var t=[];(e=Array.isArray(e)?e:[e]).forEach(function(e){var n=a.getReferenceModel(e[0]);C(n)&&t.push(e)}),t.length>0&&X.onAddOccurrence(t)},V=function(e,t,o){var i={};n.notify("startProgress",i),K(e,t),n.notify("stopProgress",i),n.notify("ExpandFilterApplied")},K=function(t,i){if(n.getBehavior("WUXNodeModelBehavior"),e.is(o)){var r=o.getTreeDocument(),a=(o.getDataGridView(),[]),c=[];o.getTreeDocument().getRoots().forEach(e=>{a.push(e.getReferenceLabel()),c.push(e.getReferencePID())});let n={},i=[" "];if(t.forEach(function(e){c.includes(e)&&i.push(a[c.indexOf(e)])}),n.label={filterId:"set",filterModel:i,filterOptions:{keepChildren:!0,ensureVisible:!0}},r.setFilterModel(n),e.is(r)){var d=r.getFilterManager();if(e.is(d)){var s=d.getFilters().label;e.is(s)&&s._applyFilterModel()}}}},j=function(){var t=o.getDataGridView();e.is(t.getTreeDocument().getFilterManager().getFilters())&&e.is(t.getTreeDocument().getFilterManager().getFilters().label)&&(t.getTreeDocument().getFilterManager().getFilters().label.filterModel=[])},{listenTo:function(){return e.extend(X.listenTo(),{addReference:O,addConnection:P,addLinkedObject:L,removeReference:m,removeInstance:m,removeConnection:w,changeReference:N,changeInstance:N,changeConnection:N,reparentInstances:k,reparentBegin:U,reparentEnd:F,EGraphNodeSelect:W,addOccurrece:x,UpperViewsFilter:V,resetUpperViewsFilter:j})},onStart:function(e){if(X.onStart(e),!e.pprTypes||!e.linkTypes)throw new Error(n.getId()+": DELWKOUpperViewsModule initialization failed");_=e.pprTypes,G=e.linkTypes},onStop:function(){X.onStop()}}}}}),define("DS/DELWKOTreeListAuthoringModule/DELWKORoutingsModule",["UWA/Core","DS/DELPPWTreeListAuthoringModule_FD02/TreeListAuthoringBaseModule","DS/DELWKOModelServices/DELWKOSocketServices","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud"],function(e,t,n,o){"use strict";return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","SelectionBehavior","TaggerBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","UXFactoryBehavior","ImplementBehavior","CapableResourceLinkBehaviour","DuplicateAdvBehavior","ViewBehavior","ExpandFilterBehavior","SetSequencingModeBehavior","LoadObjectBehavior","RootsBehavior","LinkBehavior","ProductFlowLinkBehavior","CfgColumnsBehavior","MfgProcessBehavior","MfgProcessCrossHighlightBehavior"],creator:function(i,r,a,c,d,s,u,f,l,h,g,p,v,B,R,y,T,E,D,I,M,b,C,S,A,O,P,L){var m,w,N,k,U,F,W,x,V,j,K,X,_,G,H,z,Z,q=new(0,t.creator)(i,r,a,c,d,u,f,l,h,g,p,v,B,R,y,I),J=[],Y=[],Q=[];return N=function(t){var n,o=!1;return e.is(t)&&(n=d.getPPRType(t),o=J.indexOf(n)>-1),o},k=function(t){var n=!1;return e.is(t)&&e.is(t.get)&&(n=Y.indexOf(t.get("type"))>-1),n},U=function(e){return Q.indexOf(e)>-1},F=function(){var e=[];a.getSelectedNodes().forEach(function(t){e.push({nodeId:t.getInstancePID()||t.getReferencePID(),isSelected:t.isSelected(),absPath:t.getAbsolutePath()})}),e.length>0&&i.notify("reComputeCrossHighlight",[e])},W=function(e,t,n){N(e)&&q.onAddReference(e,t,n)},X=function(t,n){var o;e.is(t)&&a.isNodeAdded(t)&&(o=d.getImpactedConnections([t]),i.notify("addConnection",[o,n]))},x=function(t,n){var o=!1,r=[];n=n||{},t=e.is(t,"array")?t:[t],a.withTransactionUpdate(function(){t.forEach(function(t){!function(t,r){var c,d,s,u,f=!e.is(n.loadRelatedobjectsToView)||n.loadRelatedobjectsToView;k(t)&&("SecondaryCandidateResourceLink"===t.get("type")&&(t=S.cloneSecondaryCapableRscLinkWithFromAttr(t)),c=t.get("from"),d=t.get("to"),s=t.get("type"),u=c,e.is(r,"array")&&r.length>0&&r.indexOf(d)>-1||(r.push(d),p.isDocConnection(t)?a.updateDocAttributes(c):a.isNodeAdded(c)&&(e.is(m)&&m.linkType===s?a.updateBadge(u,m.badgeIcon):e.is(w)&&w.linkType===s&&a.updateBadge(u,w.badgeIcon),a.updateAttributes(t),o=!0,U(s)&&f&&i.notify("addLinkedObject",[t]))))}(t,r)}),o&&F()})},j=function(t){var n,o=!1,r=[];t=e.is(t,"array")?t:[t],n=function(t){var n,c;e.is(t)?k(t)&&("SecondaryCandidateResourceLink"===t.get("type")&&(t=S.cloneSecondaryCapableRscLinkWithFromAttr(t)),c=t.get("from"),p.isDocConnection(t)?a.updateDocAttributes(c):(n=t.get("type"),e.is(n,"string")?a.isNodeAdded(c)&&((e.is(m)&&m.linkType===n||e.is(w)&&w.linkType===n)&&r.push(c),a.updateAttributes(t),o=!0):i.debug("Could not get connection type"))):i.debug("ERROR: No model defined")},a.withTransactionUpdate(function(){t.forEach(function(e){n(e)}),o&&F(),r.length>0&&a.updateBadge(r,null)})},K=function(t){var n=function(e){(N(e)||k(e))&&q.onChangeIRPC(e)};e.is(t,"array")?a.withTransactionUpdate(function(){t.forEach(function(e){n(e)})}):n(t)},V=function(t){var n=function(e){N(e)&&q.onRemoveRefOrInst(e)};e.is(t,"array")?a.withTransactionUpdate(function(){t.forEach(function(e){n(e)})}):n(t)},_=function(e){var t=d.getReferenceModel(e.newInstPIDArray[0]);N(t)&&q.onReparentInstances(e)},G=function(e){var t=d.getReferenceModel(e);N(t)&&q.onReparentBegin(e)},H=function(e){var t=d.getReferenceModel(e);N(t)&&q.onReparentEnd(e)},z=function(t){var n,o;if(e.is(t)&&(e.is(t.selectedNodeIds)&&e.is(t.selectedNodeIds.length>0)&&t.selectedNodeIds.forEach(function(e){a.unSelectNode(e)}),e.is(t.changed)))if(e.is(t.changed.childOccurencePath)){if(n=a.getNodeModel(t.changed.childOccurencePath),e.is(n)&&n.length>0)for(o=0;o<n.length;o++)if(n[o].getAbsolutePath().join()===t.changed.childOccurencePath.join()){n[o].select();break}}else if(n=a.getNodeModel(t.changed.nodeId),e.is(n)&&n.length>0)for(o=0;o<n.length;o++)n[o].isRoot(!0)&&n[o].select()},Z=function(e){var t=[];(e=Array.isArray(e)?e:[e]).forEach(function(e){var n=d.getReferenceModel(e[0]);N(n)&&t.push(e)}),t.length>0&&q.onAddOccurrence(t)},{listenTo:function(){return e.extend(q.listenTo(),{addReference:W,addConnection:x,addOccurrece:Z,removeReference:V,removeInstance:V,removeConnection:j,changeReference:K,changeInstance:K,changeConnection:K,addRootNode:X,reparentInstances:_,reparentBegin:G,reparentEnd:H,EGraphNodeSelect:z})},onStart:function(t){if(q.onStart(t),!t.pprTypes||!t.linkTypes)throw new Error(i.getId()+": RoutingsModule initialization failed");J=t.pprTypes,Y=t.linkTypes,Q=e.is(t.loadConectedObjLinkTypes)?t.loadConectedObjLinkTypes:[],m=e.is(t.displayBadge)?t.displayBadge:null,w=e.is(t.displayBadgePS)?t.displayBadgePS:null,n.getSocket({onMessage:function(t){var n=(t=JSON.parse(t.data)).data.subject.type;n=n.toLowerCase();var r=t.data.subject.identifier,a=t.data.eventInformation.state,c=(i.getBehavior("WUXNodeModelBehavior"),{data:{}});if(c.data.state=a,c.forceUpdate=!0,c.onComplete=function(e){setTimeout(function(){},500)},e.is(a)&&"READY_FOR_EXECUTION"===a){var d=t.data.eventInformation.context;if(e.is(d)){var s=o.getReferenceModel(d.type+"/"+d.identifier);e.is(s)}}s=o.getReferenceModel(n+"/"+r),e.is(s)&&o.updateRef(s,c)},onError:function(e){}})},onStop:function(){q.onStop()}}}}});