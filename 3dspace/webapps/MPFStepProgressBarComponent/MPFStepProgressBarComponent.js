define("DS/MPFStepProgressBarComponent/StepProgressBarComponent",["UWA/Class/View","UWA/Core","DS/MPFView/GuidanceHelper","css!DS/MPFStepProgressBarComponent/MPFStepProgressBarComponent"],function(t,e,s){"use strict";return t.extend({className:"mpf-step-progress-bar",setup:function(t={}){this._parent(t),this.steps=t.steps||[],this.activeStep=t.activeStep||0,this.infoSteps=t.infoSteps||[],this.isVertical=!0===t.isVertical},render:function(){return this.isVertical?this.container.addClassName("vertical"):this.container.removeClassName("vertical"),this.container.setContent([this._buildStepItems(),this._buildProgressBarContainer(this._buildFilledProgressBar(),this._buildEmptyProgressBar())]),this},setVertical:function(t){this.isVertical=!1!==t,this.render()},setHorizontal:function(){this.setVertical(!1)},destroy(){this.steps=null,this.infoSteps=null,this._parent(),this.container=null},_buildProgressBarContainer:function(t,s){const i=100/this.steps.length,r=e.createElement("div",{class:"progress-bar-container",html:[t,s]});return this.isVertical||(r.setStyle("margin","0px "+(i/2).toString()+"%"),r.setStyle("width",100-i+"%")),r},_buildEmptyProgressBar:function(){const t=e.createElement("div",{class:"progress-bar"}),s=this.isVertical?"height":"width";return t.setStyle(s,"100%"),t},_buildFilledProgressBar:function(){const t=e.createElement("div",{class:"progress-bar fill"}),s=100/(this.steps.length-1)*this.activeStep,i=this.isVertical?"height":"width";return t.setStyle(i,s.toString()+"%"),t},_buildStepItems:function(){const t=[];let i;this.isVertical||(i=100/this.steps.length);let r="step-item";return this.steps.forEach((n,o)=>{r=o<=this.activeStep?"step-item active":"step-item",o%2&&(r+=" down");const a=e.createElement("div",{class:r,html:[e.createElement("div",{class:"step-name",text:n}),e.createElement("div",{class:"step-icon"})]});this.isVertical||a.setStyle("width",i.toString()+"%"),e.is(this.infoSteps[o])&&""!==this.infoSteps[o]&&new s({target:a,content:this.infoSteps[o]}),t.push(a)}),e.createElement("div",{class:"steps",html:t})}})}),define("DS/MPFStepProgressBarComponent/CartStepProgressBarComponent",["DS/MPFStepProgressBarComponent/StepProgressBarComponent","DS/MPFServices/ObjectService","DS/MPFCartModel/CartModel","i18n!DS/MPFStepProgressBarComponent/assets/nls/CartStepProgressBarComponent"],function(t,e,s,i){"use strict";const r={SUBMITTED:"SUBMITTED",WAITING_PAYMENT:"WAITING_PAYMENT",PAID:"PAID",PROCESSING:"PROCESSING",READY:"READY",SHIPPED:"SHIPPED",DELIVERED:"DELIVERED"};return t.extend({setup:function({cart:t,isBuyerView:i=!0,isShippingActivated:r=!1}={}){e.requiredOfPrototype(t,s,"options.cart must be a CartModel"),this.cart=t,this.isBuyerView=i,this.isShippingActivated=r,this.isShipTo=""!==this.cart.get("ShipTo");const n=this._getSteps();this._parent({steps:n,activeStep:this._getActiveStep(n),infoSteps:this._getStepDescription()}),this.listenTo(this.cart,"onSync",this.update.bind(this))},update(){this.activeStep=this._getActiveStep(this.steps),this.render()},destroy(){this.stopListening(),this._parent()},_getActiveStep:function(t){const e="PROCESSING_PAYMENT"===this.cart.getGlobalState()?"paid":this.cart.getGlobalState().toLowerCase();return t.indexOf(i.get(e))},_getSteps:function(){const t=[r.SUBMITTED,r.WAITING_PAYMENT,r.PAID,r.PROCESSING].map(t=>i.get(t.toLowerCase()));return this.isShippingActivated&&t.push(this.isShipTo?i.get(r.SHIPPED.toLowerCase()):i.get(r.READY.toLowerCase())),t.push(i.get(r.DELIVERED.toLowerCase())),t},_getDescriptionTranslation(t){return i.get(t+(this.isBuyerView?"":"_seller"))},_getStepDescription:function(){const t=["submittedInfo","waitingPaymentInfo","paidInfo","processingInfo"].map(t=>this._getDescriptionTranslation(t));return this.isShippingActivated&&t.push(this.isShipTo?this._getDescriptionTranslation("shippedInfo"):this._getDescriptionTranslation("readyInfo")),t.push(i.get("deliveredInfo")),t}})});