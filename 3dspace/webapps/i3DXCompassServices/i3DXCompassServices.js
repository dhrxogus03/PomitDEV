define("DS/i3DXCompassServices/i3DXCompassServices",[],function(){"use strict";var e="DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices",n=function(){var e={};return function(n,t){if(e[n])e[n]&&t(e[n]);else if(function(){var e;try{top.document,e=!0}catch(n){e=!1}return e}())try{top.require([n],function(o){e[n]=o,t(o)})}catch(o){try{require([n],function(o){e[n]=o,t(o)})}catch(e){t(null)}}else try{require([n],function(o){e[n]=o,t(o)})}catch(e){t(null)}}}();return{getPlatformServices:function(t){n(e,function(e){e.getPlatformServices({public:!0,platformId:t.platformId,onComplete:function(e){e?(t.platformId,t.onComplete(e)):t.onComplete()},onFailure:t.onFailure})})},getCompatibleApps:function(e){n("DS/i3DXCompassPlatformServices/OpenWith",function(n){var t=new n;return t.set3DXContent(e.content).retrieveCompatibleApps(function(n){t.set3DXContent(e.content),"function"==typeof e.onComplete&&e.onComplete(n)})})},getServiceUrl:function(t){n(e,function(e){e.getServiceUrl({public:!0,platformId:t.platformId,serviceName:t.serviceName,onComplete:function(e){e?(t.platformId,t.onComplete(e)):t.onComplete()},onFailure:t.onFailure})})}}}),define("DS/i3DXCompassServices/i3DXCompassPubSub",["UWA/Utils","UWA/Core","UWA/Class/Model","UWA/Class/Collection"],function(e,n,t,o){"use strict";var i="com.ds.compass",s=function(){return"undefined"!=typeof dscef},c=function(){var e={};return function(n,t){if(!e[n]&&function(){var e;try{top.document,e=!0}catch(n){e=!1}return e}())try{top.require([n],function(o){e[n]=o,t(o)})}catch(e){}else e[n]&&t(e[n])}}();return{subscribe:function(e,n){c("DS/MessageBus/MessageBus",function(t){t&&t.subscribe({channel:i,topic:e,callback:n})})},publish:function(r,u,a){var f=this;c("DS/MessageBus/MessageBus",function(c){var l=e.getUUID(),p={},b=n.clone(r);if(u){for(var m in u)u.hasOwnProperty(m)&&u[m]&&(u[m]instanceof t||u[m]instanceof o)&&u[m].toJSON&&(u[m]=u[m].toJSON());p=u?n.clone(u):{}}s()&&setTimeout(function(){dscef.sendString(b,JSON.stringify(p))},500),c&&(u||(u={}),a&&(f.subscribe(r+"Callback",function(e){e._PUB_SUB_ID===l&&(delete e._PUB_SUB_ID,f.unsubscribe(r+"Callback"),a.apply(f,arguments))}),-1===r.indexOf("Callback")&&(u._PUB_SUB_ID=l)),c.publish({channel:i,topic:r,data:u}))})},unsubscribe:function(e){c("DS/MessageBus/MessageBus",function(n){n&&n.unsubscribe({channel:i,topic:e})})},_subscribe:function(){throw new Error("use the subscribe method instead of _subscribe")},_publish:function(){throw new Error("use the publish method instead of _publish")},_initCefSubscriberIfNeeded:function(){s()&&require(["DS/PlatformAPI/PlatformAPI"],function(e){e.subscribe("webinwin:win:notification",function(e){if(console.log("Received a webinwin:win:notification"),console.log(e),e="string"==typeof e?JSON.parse(e):e,console.log(e),e&&e.topic){var n={channel:i,topic:e.topic,data:e.data};console.log(n),c("DS/MessageBus/MessageBus",function(e){e&&e.publish(n)})}})})}}});