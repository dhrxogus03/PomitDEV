define("DS/DocumentCommonInfra/components/DeleteDialog",["UWA/Core","UWA/Controls/Abstract","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Toggle","DS/Controls/Button","DS/Core/WebUXGlobalEnums","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/DataGridView/DataGridView","i18n!DS/DocumentCommonInfra/assets/nls/DocumentCommonInfra","css!DS/DocumentCommonInfra/css/DeleteDialog.css"],function(e,t,n,a,o,i,s,l,r,c,d,m){return t.extend({modal:{},name:"docm-delete-dialog",options:{className:""},_options:{},modelEvents:void 0,init:function(e){e.events&&(this.events=e.events,delete e.events),this._parent(e),this.events&&(e.events=this.events),this.selectionCount=this.options.getSelectedNodes().length,this.buildSkeleton()},buildSkeleton:function(){var t=this;t.components={},t.immersiveFrame=new n({identifier:"delete_dialog"}),t.components.mainContainer=e.createElement("div",{class:"MainContainer",styles:{display:"flex","flex-direction":"column",height:"100%"}}),t.components.warningMessage=e.createElement("div",{class:"warningMessage",styles:{display:"flex",float:"left","margin-bottom":"5px"}}).inject(t.components.mainContainer),t.components.warningImageSrc=t.options.platformUrls["3DSpace"]+"/webapps/DocumentCommonInfra/assets/images/warning.png",t.components.warningImage=e.createElement("img",{src:t.components.warningImageSrc,class:"Doc-Delete-Dialog-WarningImage",alt:"Image Description",width:"35px",height:"30px"}).inject(t.components.warningMessage),t.components.warningText=e.createElement("div",{class:"warningTextContainer",styles:{color:"#3d3d3d","font-size":"12px","margin-left":"10px","flex-grow":"1"}}).inject(t.components.warningMessage),t.components.warningText1=e.createElement("div",{class:"warningText",text:d.get("Delete_Warning1",{content:t.selectionCount>1?d.get("SelectedObjects"):t.options.getSelectedNodes()[0].options.title}),styles:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}).inject(t.components.warningText),t.components.warningText2=e.createElement("div",{class:"warningText",text:d.get("Delete_Warning2"),styles:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}).inject(t.components.warningText),t.components.confirmationToogle=new o({type:"checkbox",label:"I understand that deleted objects can't be recovered.",value:0,checkFlag:!1,domId:"confirmationToogle"}).inject(t.components.mainContainer),t.components.confirmationToogle.addEventListener("change",function(e){var n=e.dsModel;t.components.myDialog.buttons.Yes.disabled=!n.checkFlag}),t.selectionCount>1&&t.prepareGridView();var l=t.selectionCount>1?`- ${t.selectionCount} ${d.get("Objects")}`:" - "+t.options.getSelectedNodes()[0].options.title;t.components.myDialog=new a({immersiveFrame:t.immersiveFrame,domId:"Doc-Delete-Dialog",identifier:"Doc-DeleteDialog-"+t.selectionCount>1?"multi-selection":"single-selection",title:d.get("Delete")+l,content:t.components.mainContainer,activeFlag:!1,resizableFlag:!0,width:500,height:t.selectionCount>1?300:150,modalFlag:!0,buttons:{Yes:new i({label:d.get("Delete"),domId:"DocDialog-DeleteButton",disabled:!0,onClick:function(e){t.events&&t.events.publish({event:"doco-delete-dialog-action",data:{action:"Delete"}}),t.options&&t.options.onDelete&&t.options.onDelete({context:t,dialog:e.dsModel}),e.dsModel.dialog.destroy(),t.immersiveFrame.destroy(),e.dsModel=null},role:s.WUXCustomButtonRoleEnum.Validate}),Cancel:new i({onClick:function(e){t.events&&t.events.publish({event:"doco-delete-dialog-action",data:{action:"Cancel"}}),t.options&&t.options.onCancel&&t.options.onCancel({context:t,dialog:e.dsModel}),e.dsModel.dialog.destroy(),t.immersiveFrame.destroy(),e.dsModel=null}})}}),t.components.myDialog.height=t.selectionCount>1?300:150,t.components.myDialog.width=500,t.components.myDialog.addEventListener("close",e=>{t.immersiveFrame.destroy()}),t.immersiveFrame.inject(widget.body)},prepareGridView:function(){var t=[{dataIndex:"title",text:d.get("Title"),editableFlag:!1},{dataIndex:"preCheckStatus",text:d.get("Access_Check"),editableFlag:!1,alignment:"center",className:"coloured-boolean",typeRepresentation:"boolean"}];if(this.options.dialogCustomizations&&this.options.dialogCustomizations.customizeColumns){var n=this.options.dialogCustomizations.customizeColumns(t);n&&(t=n)}var a=this.prepareData();if(this.options.dialogCustomizations&&this.options.dialogCustomizations.customizeData){var o=this.options.dialogCustomizations.customizeData(a);o&&(a=o)}var i=new l;i.prepareUpdate();for(var s=0,m=a.length;s<m;s++){var u=a[s];u.grid.preCheckStatus||(u.grid.preCheckStatus=!0);var p=new r({label:u.title,grid:u.grid});i.addRoot(p)}if(i.expandAll(),i.pushUpdate(),this.options.dialogCustomizations&&this.options.dialogCustomizations.customizeTreeDocument){var g=this.options.dialogCustomizations.customizeTreeDocument(i);g&&(i=g)}this.components.gridView=e.createElement("div",{class:"doc-DeleteDialog-gridview",styles:{position:"relative","flex-grow":"1"}}).inject(this.components.mainContainer);var f={identifier:"doc-DeleteDialog-gridview",showSelectionCheckBoxesFlag:!1,treeDocument:i,columns:t};a.length>5&&(f.maxVisibleRowCount=5),this.components.dataGridView=new c(f),this.components.dataGridView.inject(this.components.gridView)},prepareData:function(){var t=[];return this.options.getSelectedNodes&&this.options.getSelectedNodes().length&&this.options.getSelectedNodes().forEach(n=>{t.push({title:e.clone(n.options.grid.title),grid:e.clone(n.options.grid)})}),t}})}),define("DS/DocumentCommonInfra/Model",["UWA/Core","DS/TreeModel/TreeNodeModel","DS/Tweakers/TypeRepresentationFactory","DS/Controls/Label","i18n!DS/DocumentCommonInfra/assets/nls/DocumentCommonInfra"],function(e,t,n,a,o){"use strict";var i=new n;function s(t,n){t.dataelements.originated&&(t.dataelements.originated=new Date(t.dataelements.originated)),t.dataelements.modified&&(t.dataelements.modified=new Date(t.dataelements.modified)),i.generateView(t.dataelements.modified,{readOnly:!0,typePath:"datetime",onViewCreated:function(e){t.dataelements.modifiedAsString=e.getContent().getText()}}),""==t.dataelements.reservedby&&(t.dataelements.reservedby=void 0),t.dataelements.type=t.type;var s={data:t,grid:t.dataelements};if(s.label=t.dataelements.title||t.dataelements.secondaryTitle||t.dataelements.name,s.title=t.dataelements.title||t.dataelements.secondaryTitle||t.dataelements.name,s.icons=[{iconName:"doc-text"}],s.grid.tree=s.title,s.thumbnail=t.dataelements.indexedImage||t.dataelements.image,s.taxonomies=[t.type],"TRUE"!=t.dataelements.isDocumentType||s.taxonomies.includes("Document")||s.taxonomies.push("Document"),s.thumbnail.endsWith("snresources/images/icons/small/I_CDM_Document.png")&&(s.thumbnail=s.thumbnail.replace("small/I_CDM_Document.png","large/I_TextDoc200x150.png")),s.icons=[t.dataelements.indexedTypeicon||t.dataelements.typeicon],t.relateddata&&t.relateddata.ownerInfo&&1==t.relateddata.ownerInfo.length&&t.relateddata.ownerInfo[0].dataelements&&(t.dataelements.owner={label:t.relateddata.ownerInfo[0].dataelements.fullname||t.relateddata.ownerInfo[0].dataelements.firstname+" "+t.relateddata.ownerInfo[0].dataelements.lastname,username:t.relateddata.ownerInfo[0].dataelements.name},n&&n["3DSwym"]&&(t.dataelements.owner.icon=n["3DSwym"]+"/api/user/getpicture/login/"+t.relateddata.ownerInfo[0].dataelements.name+"/format/mini")),t.relateddata&&t.relateddata.originatorInfo&&1==t.relateddata.originatorInfo.length&&t.relateddata.originatorInfo[0].dataelements&&(t.dataelements.originator={label:t.relateddata.originatorInfo[0].dataelements.fullname||t.relateddata.originatorInfo[0].dataelements.firstname+" "+t.relateddata.originatorInfo[0].dataelements.lastname,username:t.relateddata.originatorInfo[0].dataelements.name},n&&n["3DSwym"]&&t.relateddata.originatorInfo[0].dataelements.name&&(t.dataelements.originator.icon=n["3DSwym"]+"/api/user/getpicture/login/"+t.relateddata.originatorInfo[0].dataelements.name+"/format/mini")),t.relateddata&&t.relateddata.files&&t.relateddata.files.length>0){var r=[];t.relateddata.files.forEach(t=>{t.dataelements&&e.is(t.dataelements.title,"string")&&r.push(function(e){return e.substring(e.lastIndexOf(".")+1,e.length)||e}(t.dataelements.title))}),t.dataelements.fileExtension=r.join(", ")}return s.subLabel=function(t){var n=e.createElement("div",{class:"NameAndState"});return i.generateView(t.grid.owner,{readOnly:!0,typePath:"user",onViewCreated:function(e){e.inject(n)}}),new a({value:t.grid.stateNLS,emphasize:l.getStateEmphasisClassname(t.data)}).inject(n),n}(s),s.description=function(t){var n=e.createElement("div",{class:"property-description"});return i.generateView(o.get("e6wDocumentField.modified")+":",{readOnly:!0,typePath:"string",onViewCreated:function(e){e.inject(n)}}),i.generateView(t.grid.modified,{readOnly:!0,typePath:"datetime",onViewCreated:function(e){e.inject(n)}}),n}(s),s.customTooltip=`${o.get("e6wDocumentField.title")}: ${s.label}\n${o.get("e6wDocumentField.typeNLS")}: ${t.dataelements.typeNLS}\n${o.get("e6wDocumentField.owner")}: ${t.dataelements.owner?t.dataelements.owner.label:t.responsibleUid}\n${o.get("e6wDocumentField.revision")}: ${t.dataelements.revision} \n${o.get("e6wDocumentField.stateNLS")}: ${t.dataelements.stateNLS}\n${o.get("e6wDocumentField.modified")}: ${t.dataelements.modifiedAsString}\n${o.get("e6wDocumentField.collabSpaceTitle")}: ${t.dataelements.collabSpaceTitle}\n${o.get("e6wDocumentField.name")}: ${t.dataelements.name}`,s}var l=function(e,n){var a=s(e,n);a.updateData=function(e){o.updateOptions(s(e,n))};var o=new t(a);return o};return l.getStateEmphasisClassname=function(e){return"class-name-of-no-use doco-state-badge doco-state-"+e.dataelements.policy.replace(/ /g,"_")+"-"+e.dataelements.state.replace(/ /g,"_")},l}),define("DS/DocumentCommonInfra/MaturityColors",["UWA/Core","UWA/Element","DS/WAFData/WAFData"],function(e,t,n){"use strict";e.createElement("style",{html:" .doco-state-badge {\n        background-color: rgb(117, 117, 117);\n        color: white;\n        font-weight: bold;\n        padding: 0 4px;\n        margin: 1px 3px;\n        width: 80px;\n    }"}).inject(document.body);var a={},o={cachedPolicies:null,cachedPoliciesStatesIdentifier:[],cachedPoliciesStatesInfo:[],setup:function(e){o.options=e,o.load()},fetchPolicies:function(t,i){if(o.cachedPolicies&&o.cachedPolicies[widget.lang]&&t.every(o.hasStateInfoForDoc))i(o.cachedPolicies);else{var s={url:o.options.platformUrls["3DSpace"]+"/resources/lifecycle/maturity/getStateGraph?tenant="+o.options.platformUrls.platformId,type:"json",method:"POST",headers:{Accept:"application/json","Accept-Language":widget.lang,"Content-Type":"application/json",securitycontext:o.options.fetchSecurityContext()},data:JSON.stringify({data:t.map(function(e){return{physicalid:e.id}})}),onComplete:function(t){t.status&&null==t.status.errorMsg&&(o.cachedPolicies=o.cachedPolicies||{},o.cachedPolicies[widget.lang]=o.cachedPolicies[widget.lang]||{},t.data.policies.forEach(function(t){o.cachedPolicies[widget.lang][t.name]=o.cachedPolicies[widget.lang][t.name]||{},t.maturityGraph.states.forEach(function(n){o.cachedPolicies[widget.lang][t.name][n.stateSysName]=n;var i=t.name+"---"+n.stateSysName;if(!o.cachedPoliciesStatesIdentifier.includes(i)&&(o.cachedPoliciesStatesIdentifier.push(i),null==a[i])){var s=void 0;s="#FFFFFF"==n.activeColor?e.createElement("style",{html:` .doco-state-${t.name.replace(/ /g,"_")}-${n.stateSysName.replace(/ /g,"_")} {\n                                                            background-color: ${n.activeColor}; \n                                                            color: black;border: 2px solid black;\n                                                        }`}):e.createElement("style",{html:` .doco-state-${t.name.replace(/ /g,"_")}-${n.stateSysName.replace(/ /g,"_")} {\n                                                            background-color: ${n.activeColor}; }`}),a[i]=s,s.inject(document.body)}})})),i(o.cachedPolicies)},onFailure:function(e,t){}};n.authenticatedRequest(s.url,s)}},load:function(){var e=null;null!=e&&null!=(e=JSON.parse(e))&&(o.cachedPolicies=e)},hasStateInfoForDoc:function(e){if(o.cachedPolicies&&o.cachedPolicies[widget.lang]&&(null!=o.cachedPolicies[widget.lang][e.dataelements.policy]&&null!=o.cachedPolicies[widget.lang][e.dataelements.policy][e.dataelements.state]))return!0;return!1}};return o}),define("DS/DocumentCommonInfra/TrackerAPI",["DS/Usage/TrackerAPI"],function(e){"use strict";var t={sendTrackerPageEvent:function({category:n,action:a,label:o,pd:i,pv:s}){e.trackPageEvent({eventCategory:n,eventAction:a,eventLabel:o,appID:"ENXWDOC_AP",tenant:widget.data.x3dPlatformId||widget.tenant,persDim:t.preparePersonalDimensions(i),persVal:t.preparePersonalValues(s)})},getRegion:function(){var e,t;if(widget){var n=widget.uwaUrl;null!=n&&(e=n.split("-")),null!=e&&e.length>0&&(t=e[1])}return t},getClusterId:function(){var e,t;if(widget){var n=widget.uwaUrl;null!=n&&(e=n.split("-")),null!=e&&e.length>0&&(t=e[2])}return t},preparePersonalDimensions:function(e){let n={pd1:t.getRegion(),pd2:t.getClusterId(),pd3:widget.data.appId},a=Object.keys(n).length+1;return Object.keys(e).length>0&&Object.values(e).forEach(e=>{n["pd"+a]=e,a++}),n},preparePersonalValues:function(e){let t={},n=1;return Object.keys(e).length&&Object.values(e).forEach(e=>{t["pv"+n]=e,n++}),t}};return t}),define("DS/DocumentCommonInfra/DocDictionary",["UWA/Core","DS/WAFData/WAFData","DS/FedDictionaryAccess/FedDictionaryAccessAPI"],function(e,t,n){"use strict";return e.Class.extend({ready:e.Promise.deferred(),init:function(a){var o=this,i={url:a.tenantUrl+"/resources/dictionary/getTypeInfo?$filter=isOOTB+eq+false",type:"json",method:"POST",headers:{Accept:"application/json","Accept-Language":widget.lang,"Content-Type":"application/json"},data:JSON.stringify(["Document"]),onComplete:function(i,s){var l=["Document"];Object.keys(i).forEach(e=>{"Document Proxy"!=e&&l.push(e)});var r={url:a.tenantUrl+"/resources/dictionary/class/interfaces",type:"json",method:"POST",headers:{Accept:"application/json","Accept-Language":widget.lang,"Content-Type":"application/json"},data:JSON.stringify({classes:l}),onComplete:function(i,s){var r=[];i.results.forEach(e=>{e.interfaces.forEach(e=>{r.includes(e.name)||r.push(e.name)})});var c=new e.Promise(function(e,n){var o={url:a.tenantUrl+"/resources/dictionary/class/properties?$select=name,nlsName,protection",type:"json",method:"POST",headers:{Accept:"application/json","Accept-Language":widget.lang,"Content-Type":"application/json"},data:JSON.stringify({classes:[...l,...r]}),onComplete:function(t,n){var a={};t.results.forEach(e=>{e.properties.forEach(e=>a[e.name]=e.nlsName)}),e(a)},onFailure:function(e,t){n()}};t.authenticatedRequest(o.url,o)}),d=new e.Promise(function(t,o){n.getPropertiesForClass([...l,...r].map(e=>"ds6wg:"+e).join(),{tenantId:a.tenant,lang:widget.lang,apiVersion:"R2019x",onComplete:function(n){n=e.is(n,"string")?JSON.parse(n):n,t(n)},onFailure:function(e){o()}})});e.Promise.all([c,d]).then(function(e){o.ready.resolve(e)},function(){o.ready.reject()})},onFailure:function(e,t){o.ready.reject()}};t.authenticatedRequest(r.url,r)},onFailure:function(e,t){o.ready.reject()}};t.authenticatedRequest(i.url,i)}})}),define("DS/DocumentCommonInfra/Columns",["UWA/Core","DS/WAFData/WAFData","DS/DocumentCommonInfra/DocDictionary","DS/DocumentCommonInfra/Model","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/DocumentCommonInfra/TrackerAPI","i18n!DS/DocumentCommonInfra/assets/nls/DocumentCommonInfra"],function(e,t,n,a,o,i,s){"use strict";return e.Class.extend({ready:void 0,predefinedColumns:[{name:"title",includeAlways:!0,typeRepresentation:"url",dataIndex:"tree",pinned:"left",width:"300",className:"preview-column",curi:"ds6w:label"},{name:"name",typeRepresentation:"string",includeAlways:!0,className:"preview-column",curi:"ds6w:identifier"},{name:"policy",includeAlways:!0,hiddenAlways:!0},{name:"state",includeAlways:!0,hiddenAlways:!0},{name:"typeNLS",typeRepresentation:"string",includeAlways:!0,curi:"ds6w:type"},{name:"policyNLS",typeRepresentation:"string",visibleFlag:!1,curi:"ds6w:policy"},{name:"collabSpaceTitle",typeRepresentation:"string",curi:"ds6w:project"},{name:"revision",typeRepresentation:"string",includeAlways:!0,curi:"ds6wg:revision"},{name:"isLatestRevision",typeRepresentation:"boolean",className:"coloured-boolean",curi:"ds6w:isLastRevision"},{name:"files",typeRepresentation:"url",sortableFlag:!1,needsCustomImplementation:!0},{name:"lockStatus",typeRepresentation:"string",visibleFlag:!0,needsCustomImplementation:!0,curi:"ds6w:who/ds6w:responsible/ds6w:reservedBy",include:"lockerInfo",fields:["lockerInfo.name","lockerInfo.firstname","lockerInfo.lastname"]},{name:"description",typeRepresentation:"textBlock",visibleFlag:!1,curi:"ds6w:description"},{name:"organizationTitle",typeRepresentation:"string",includeAlways:!0,visibleFlag:!1,curi:"ds6w:organizationResponsible"},{name:"owner",typeRepresentation:"user",includeAlways:!0,needsCustomImplementation:!0,include:"ownerInfo",includeAlways:!0,fields:["ownerInfo.name","ownerInfo.firstname","ownerInfo.lastname"],curi:"ds6w:responsible"},{name:"originator",typeRepresentation:"user",includeAlways:!0,needsCustomImplementation:!0,visibleFlag:!1,include:"originatorInfo",fields:["originatorInfo.name","originatorInfo.firstname","originatorInfo.lastname"],curi:"ds6w:originator"},{name:"stateNLS",typeRepresentation:"tag",includeAlways:!0,needsCustomImplementation:!0,getCellSemantics:function(e){return{emphasize:a.getStateEmphasisClassname(e.nodeModel.options.data)}},curi:"ds6w:status"},{name:"originated",typeRepresentation:"datetime",visibleFlag:!1,curi:"ds6w:created"},{name:"modified",typeRepresentation:"datetime",includeAlways:!0,curi:"ds6w:modified"},{name:"comments",typeRepresentation:"string",visibleFlag:!1},{name:"hasModifyAccess",includeAlways:!0,hiddenAlways:!0},{name:"fileExtension",typeRepresentation:"string",visibleFlag:!1,curi:"ds6w:docExtension",include:"files",includeAlways:!0,fields:["files.name","files.title","files.revision","files.locker","files.image"]},{name:"secondaryTitle",hiddenAlways:!0},{name:"ownerInfo",conditionalInclude:"owner",include:"ownerInfo",includeAlways:!0,hiddenAlways:!0,fields:["ownerInfo.name","ownerInfo.firstname","ownerInfo.lastname"]},{name:"originatorInfo",conditionalInclude:"originator",include:"originatorInfo",includeAlways:!0,hiddenAlways:!0,fields:["originatorInfo.name","originatorInfo.firstname","originatorInfo.lastname"]}],externalColumns:[{name:"approvalStatus",text:o.getName(),dataIndex:"ApprovalStatus",typeRepresentation:"user",editableFlag:!1,visibleFlag:!1,compareFunction:function(e,t){return o.compareApprovalStatus(e,t)}}],predefinedColumnsDictionary:void 0,customColumnsSelectableDictionary:void 0,customColumnsDictionary:void 0,customColumns:void 0,init:function(a){let o=new Date;var l=this;l.ready=e.Promise.deferred(),l.predefinedColumnsDictionary={},l.customColumnsSelectableDictionary={},l.customColumnsDictionary={},l.customColumns=[];var r=new n(a);l.predefinedColumnsDictionary={},l.predefinedColumns.forEach(e=>{e.text=s.get("e6wDocumentField."+e.name),e.typeRepresentation&&(null==e.dataIndex&&(e.dataIndex=e.name),l.predefinedColumnsDictionary[e.name]=e)});var c=a.tenantUrl+"/resources/v1/modeler/documents";t.authenticatedRequest(c,{method:"post",type:"json",data:"$definition=true",onComplete:function(t){if(t.success){for(const o of t.definitions)if("e6w.documents.fields"==o.name){for(const t of o.items)if("document-custom-fields"==t.name){var n=t;n.items.shift();for(const t of n.items){var a={name:t.name,dataIndex:t.name,text:t.label,visibleFlag:!1,viewConfig:e.Json.isJson(t.viewConfig)?JSON.parse(t.viewConfig):void 0};if(a.viewConfig&&a.viewConfig.attributeType&&!a.viewConfig.multivalue){switch(a.viewConfig.attributeType){case"boolean":a.typeRepresentation="boolean",a.className="coloured-boolean";break;case"date":a.typeRepresentation="datetime";break;case"real":case"double":a.typeRepresentation="number";break;case"integer":a.typeRepresentation="integer";break;default:a.typeRepresentation="string"}"boolean"==a.viewConfig.attributeType?a.typeRepresentation="boolean":"date"==a.viewConfig.attributeType&&(a.typeRepresentation="datetime"),"real"!=a.viewConfig.attributeType&&"double"!=a.viewConfig.attributeType&&"integer"!=a.viewConfig.attributeType||function(e){e.compareFunction=function(e,t){return parseFloat(e)-parseFloat(t)}}(a)}t.units&&e.is(t.units.item,"array")&&t.units.item.forEach(e=>{e.default&&(a.getCellSemantics=function(t){return{units:e.display}})}),t.extension&&(a.selectable=t.extension+"."+t.name,l.customColumnsSelectableDictionary[a.selectable]=a),l.customColumns.push(a),l.customColumnsDictionary[t.name]=a}break}break}r.ready.promise.then(function(e){var t=e[0],n=e[1];l.customColumns.forEach(e=>{t[e.name]&&(e.text=t[e.name])}),n.forEach(e=>{e.properties.forEach(e=>{l.customColumnsSelectableDictionary[e.selectable]&&null==l.customColumnsSelectableDictionary[e.selectable].curi&&(l.customColumnsSelectableDictionary[e.selectable].curi=e.curi)})}),l.showableColumns=l.getColumns(),l.showableColumnsDataIndexDictionary={},l.showableColumns.forEach(e=>{l.showableColumnsDataIndexDictionary[e.dataIndex]=e}),l.ready.resolve(l.showableColumns);let a=new Date-o;i.sendTrackerPageEvent({category:"docm.columns.ready",action:"auto",label:"Widget Columns Ready",pd:{},pv:{totalTimeTaken:a,success:1,numberOfShowableCols:l.showableColumns.length}})})}else{l.ready.reject();let e=new Date-o;i.sendTrackerPageEvent({category:"docm.columns.ready",action:"auto",label:"Widget Columns Ready",pd:{},pv:{totalTimeTaken:e,failure:0}})}}})},getColumns:function(){return[...this.predefinedColumns.filter(e=>e.typeRepresentation),...this.externalColumns,...this.customColumns]},getQueryAsPerVisibleColumns:function(e){var t={include:["none"],fields:["none"]};this.sortableVisibleColumns=[];for(const n of e)null!=n.visibleFlag&&1!=n.visibleFlag||null==n.name||(t.fields.push(n.name),n.include&&t.include.push(n.include),n.fields&&t.fields.push(...n.fields),this.sortableVisibleColumns.push(n));for(const e of this.predefinedColumns)e.includeAlways&&(t.fields.includes(e.name)||(t.fields.push(e.name),e.include&&t.include.push(e.include),e.fields&&t.fields.push(...e.fields)));return t},getSortPredicate:function(e){if(this.showableColumnsDataIndexDictionary[e])return this.showableColumnsDataIndexDictionary[e].curi}})});