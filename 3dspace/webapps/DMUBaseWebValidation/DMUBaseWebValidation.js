define("DS/DMUBaseWebValidation/EXPValHighlight",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D","DS/DMUBaseExperience/DMUContextManager"],function(t,e,i){"use strict";return t.extend({init:function(n,s){this._parent(n,s);var r=this;this.addParameters([{name:"sPresentationSlideID",type:"string",JSONname:""},{name:"sRating",type:"string",JSONname:""},{name:"sRepRefMarkupID",type:"string",JSONname:""},{name:"lChangeActionIDs",type:"listStrings",JSONname:"",defaultValue:[]},{name:"lIssuesIDs",type:"listStrings",JSONname:"",defaultValue:[]},{name:"lAssociatedChecks",type:"listStrings",JSONname:"",defaultValue:[]},{name:"creationTime",type:"string",JSONname:""}]),this.setValType("DMUValidationExposedPresentation");var a=new e("Highlight");a.getDMUType=this.getType,a.getOwner=function(){return r},this.setNode(a);let o,u="DS/DMUReviewPersistence/EXPValHighlightContextualBar";this.initAuthoringData=function(){-1===i.getAuthoringFeatureTypes().indexOf("Highlight")||r.getContextualMenuCommandList?"DMUValidationExposedPresentation"!==r.getType()||r.getReadOnlyContextualMenuCmdList||require([u],function(t){o=new t,r.getSharedContextualMenuCommandList=o.getSharedContextualMenuCommandList,o.register({frmWindow:r._frmWindow,type:r.getType()})}):require([u],function(t){o=new t,r.getContextualMenuCommandList=o.getContextualMenuCommandList,r.getSharedContextualMenuCommandList=o.getSharedContextualMenuCommandList,o.register({frmWindow:r._frmWindow,type:r.getType()})})},this.removeAuthoringData=function(){o&&r.getSharedContextualMenuCommandList&&(r.getSharedContextualMenuCommandList=null,r.getContextualMenuCommandList=null,o.unregister({frmWindow:r._frmWindow,type:r.getType()}))},this.getRating=function(){return r.getAttribute("sRating")},this.setRating=function(t){r.setAttribute("sRating",t)},this.setFromJson=function(e){t.prototype.setFromJson.call(r,e),e&&(r.setAttribute("sPresentationSlideID",e.slideId),r.setAttribute("lAssociatedChecks",e.associatedCheck?e.associatedCheck:[]),r.setAttribute("sRating",e.rating),r.setAttribute("lChangeActionIDs",e.ChangeAction?e.ChangeAction:[]),r.setAttribute("lIssuesIDs",e.Issue?e.Issue:[]),r.setAttribute("sRepRefMarkupID",e.repRefMarkupId),r.setAttribute("creationTime",e.creationTime))},this.getHighlightObject=function(){return{slideId:r.getAttribute("sPresentationSlideID"),associatedCheck:r.getAttribute("lAssociatedChecks"),description:r.getAttribute("sDescription"),rating:r.getAttribute("sRating"),changeAction:r.getAttribute("lChangeActionIDs"),issues:r.getAttribute("lIssuesIDs"),repRefMarkupId:r.getAttribute("sRepRefMarkupID"),creationTime:r.getAttribute("creationTime"),name:r.getName(),id:r.getPlmID(),type:r.getValType()}},this.getAssociatedCheck=function(){return r.getAttribute("lAssociatedChecks")},this.addAssociatedCheck=function(t){let e=r.getAttribute("lAssociatedChecks");e&&t&&e.push(t),r.setAttribute("lAssociatedChecks",e)},this.removeAssociatedCheck=function(t){let e=r.getAttribute("lAssociatedChecks");if(e&&t){var i=e.indexOf(t);-1!==i&&e.splice(i,1),r.setAttribute("lAssociatedChecks",e)}},this.getPresentationSlideID=function(){return r.getAttribute("sPresentationSlideID")},this.setsPresentationSlideID=function(t){r.setAttribute("sPresentationSlideID",t)},this.initAuthoringData()}})}),define("DS/DMUBaseWebValidation/EXPValMarkup",["DS/DMUBaseWebValidation/EXPValObject"],function(t){"use strict";var e=t.extend({init:function(i,n){this._parent(i,n);let s=this,r=!1;this.addParameters([{name:"oMarkupContent",type:"objectDefinition",JSONname:""},{name:"lChildren",type:"listObjects",JSONname:"",defaultValue:[]},{name:"fTreeOrder",type:"float",JSONname:"",defaultValue:0},{name:"sInstPlmId",type:"string",JSONname:"",defaultValue:""},{name:"bWebMarkup",type:"boolean",JSONname:"",defaultValue:!1},{name:"bNoStream",type:"boolean",JSONname:"",defaultValue:!1}]),this.getTreeOrder=function(){return s.getAttribute("fTreeOrder")};let a=this.setReadOnly;this.setReadOnly=function(t){a(t);let e=s.getAttribute("oMarkupContent");e&&e.setReadOnly(t),s.getRepRef()&&s.getRepRef().setReadOnly(t);let i=s.getAttribute("lChildren");i&&i.length&&i.forEach(e=>{e.setReadOnly(t)})},this.setFromJson=function(e){t.prototype.setFromJson.call(s,e),s.setAttribute("fTreeOrder",e.treeOrder),s.setInstancePlmID(e.instanceId),e.children&&s.setChildren(e.children),s.setAttribute("bWebMarkup",e.webMarkup&&"true"===e.webMarkup),s.setAttribute("bNoStream",e.nostream&&"true"===e.nostream)},this.sortReplies=function(){let t=s.getAttribute("lChildren");if(t){t.sort(function(t,e){return t.getTreeOrder()-e.getTreeOrder()});for(var e=0;e<t.length;e++)t[e].sortReplies();s.setAttribute("lChildren",t)}},this.getMarkupContent=function(){return s.getAttribute("oMarkupContent")},this.setMarkupContent=function(t){s.setAttribute("oMarkupContent",t)},this.removeMarkupContent=function(){s.getAttribute("oMarkupContent")&&(r=!0,s.getAttribute("oMarkupContent").remove()),s.setAttribute("oMarkupContent",null)},this.isBeingRemoved=function(){return r},this.isLoaded=function(){return null!==s.getAttribute("oMarkupContent")},this.getChildren=function(){return s.getAttribute("lChildren")},this.setChildren=function(t){for(var e=0;e<t.length;e++)s.addChild(t[e])},this.addChild=function(t){if("Markup"===t.type||"ReviewMarkup"===t.type||"Reply"===t.type){var i=new e(s.getViewer(),s);i.setFromJson(t);let n=s.getAttribute("lChildren");n||(n=[]),n.push(i),s.setAttribute("lChildren",n)}},this.removeChild=function(t){let e=s.getAttribute("lChildren");if(e){for(var i=e.length-1;i>=0;i--)e[i].getName()===t&&(e[i].remove&&e[i].remove(),e.splice(i,1));s.setAttribute("lChildren",e)}},this.getRepRef=function(){let t=s.getValType(),e=s.getAttribute("lChildren");if(("Markup"===t||"Reply"===t)&&e)for(var i=0;i<e.length;i++)if("ReviewMarkup"===e[i].getValType())return e[i];return null},this.getParentRepRef=function(){var t=s.getParent();if(t)return t.getParent()&&"ReviewMarkup"===s.getValType()?t.getParent().getRepRef():"Reply"===s.getValType()?t.getRepRef():void 0},this.getReplies=function(){let t=[],e=s.getValType(),i=s.getAttribute("lChildren");if(i&&("Markup"===e||"Reply"===e))for(var n=0;n<i.length;n++)"Reply"===i[n].getValType()&&t.push(i[n]);return t},this.removeReply=function(t){let e=s.getAttribute("lChildren");if(e){for(var i=e.length-1;i>=0;i--)if(e[i].getPlmID()===t){e[i].remove(),e.splice(i,1);break}s.setAttribute("lChildren",e)}},this.getInstancePlmID=function(){return s.getAttribute("sInstPlmId")},this.setInstancePlmID=function(t){s.setAttribute("sInstPlmId",t)},this.isWebMarkup=function(){return"ReviewMarkup"===s.getValType()?Boolean(s.getAttribute("bWebMarkup")):s.getRepRef()?Boolean(s.getRepRef().getAttribute("bWebMarkup")):void 0},this.hasStream=function(){return"ReviewMarkup"===s.getValType()?!Boolean(s.getAttribute("bNoStream")):s.getRepRef()?!Boolean(s.getRepRef().getAttribute("bNoStream")):void 0}}});return e}),define("DS/DMUBaseWebValidation/EXPValParticipants",["DS/DMUBaseWebValidation/EXPValObject"],function(t){"use strict";return t.extend({init:function(e,i){this._parent(e,i);let n=this;this.addParameters([{name:"lJsonMembers",type:"listStrings",JSONname:"",defaultValue:[]}]),this.setFromJson=function(e){t.prototype.setFromJson.call(n,e),e.Members&&n.setJsonMembers(e.Members)},this.getJsonMembers=function(){return n.getAttribute("lJsonMembers")},this.setJsonMembers=function(t){for(var e=0;e<t.length;e++)this.addJsonMember(t[e])},this.addJsonMember=function(t){if(t&&t.name){let e=n.getAttribute("lJsonMembers");e||(e=[]),e.push(t.name)}},this.removeJsonMember=function(t){let e=n.getAttribute("lJsonMembers");if(e){for(var i=e.length-1;i>=0;i--)e[i].name===t&&e.splice(i,1);n.setAttribute("lJsonMembers",e)}}}})}),define("DS/DMUBaseWebValidation/EXPValObject",["DS/DMUBaseExperience/EXPObject"],function(t){"use strict";return t.extend({init:function(t,e){this._parent(t,e),this.addParameters([{name:"sPlmID",type:"string",JSONname:""},{name:"sValType",type:"string",JSONname:""},{name:"sName",type:"string",JSONname:""},{name:"sOwner",type:"string",JSONname:""},{name:"sDescription",type:"string",JSONname:""}]);let i=this;this.getType=function(){return i.getAttribute("sValType")},this.getValType=function(){return i.getAttribute("sValType")},this.setValType=function(t){i.setAttribute("sValType",t)},this.getPlmID=function(){return i.getAttribute("sPlmID")},this.setPlmID=function(t){i.setAttribute("sPlmID",t)},this.getParentID=function(){return i.getParent().getPlmID()},this.getName=function(){return i.getAttribute("sName")},this.setName=function(t){i.setAttribute("sName",t)},this.getOwner=function(){return i.getAttribute("sOwner")},this.setOwner=function(t){i.setAttribute("sOwner",t)},this.getDescription=function(){return i.getAttribute("sDescription")},this.setDescription=function(t){i.setAttribute("sDescription",t)}},setFromJson:function(t){this.setPlmID(t.id),this.setValType(t.type),t.name&&this.setName(t.name),t.owner&&this.setOwner(t.owner),t.description&&this.setDescription(t.description)}})}),define("DS/DMUBaseWebValidation/EXPValCheck",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D","DS/DMUBaseExperience/DMUContextManager"],function(t,e,i){"use strict";return t.extend({init:function(n,s){this._parent(n,s);var r=this;this.addParameters([{name:"lJsonRequirements",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lJsonHighlights",type:"listObjects",JSONname:"",defaultValue:[]},{name:"sStatus",type:"string",JSONname:""},{name:"creationTime",type:"string",JSONname:""}]),this.setValType("DMUValidationCheck");let a=new e("Check");a.getDMUType=this.getType,a.getOwner=function(){return r},this.setNode(a);let o;this.initAuthoringData=function(){-1===i.getAuthoringFeatureTypes().indexOf("Check")||r.getContextualMenuCommandList||require(["DS/DMUReviewPersistence/EXPValCheckContextualBar"],function(t){o=new t,r.getContextualMenuCommandList=o.getContextualMenuCommandList,r.getSharedContextualMenuCommandList=o.getSharedContextualMenuCommandList,o.register({frmWindow:r._frmWindow,type:r.getType()})})},this.removeAuthoringData=function(){o&r.getSharedContextualMenuCommandList&&(r.getSharedContextualMenuCommandList=null,r.getContextualMenuCommandList=null,o.unregister({frmWindow:r._frmWindow,type:r.getType()}))},this.getStatus=function(){return r.getAttribute("sStatus")},this.setStatus=function(t){r.setAttribute("sStatus",t)},this.setFromJson=function(e){if(t.prototype.setFromJson.call(r,e),r.setAttribute("sStatus",e.state),r.setAttribute("sDescription",e.description),r.setAttribute("creationTime",e.creationTime),e.children){let t;for(let i=0;i<e.children.length;i++)"Requirement"===(t=e.children[i]).type?r.addJsonRequirement(t):"DMUValidationExposedPresentation"===t.type&&r.addJsonHighlight(t)}},this.getCheckObject=function(){return{name:r.getName(),description:r.getAttribute("sDescription"),requirements:r.getAttribute("lJsonRequirements"),status:r.getAttribute("sStatus"),creationTime:r.getAttribute("creationTime"),id:r.getPlmID()}},this.getJsonRequirements=function(){return r.getAttribute("lJsonRequirements")},this.addJsonRequirement=function(e){if(e){let i=new t(r.getViewer(),r);i.setFromJson(e);let n=r.getAttribute("lJsonRequirements");n||(n=[]),n.push(i),r.setAttribute("lJsonRequirements",n)}},this.removeJsonRequirement=function(t){let e=r.getAttribute("lJsonRequirements");for(let i=e.length-1;i>=0;i--)e[i].getPlmID()===t&&(e[i].remove(),e.splice(i,1));r.setAttribute("lJsonRequirements",e)},this.getJsonHighlights=function(){r.getAttribute("lJsonHighlights")},this.addJsonHighlight=function(e){if(e){let i=new t(r.getViewer(),r);i.setFromJson(e);let n=r.getAttribute("lJsonHighlights");n||(n=[]),n.push(i),r.getParent()&&r.getParent().addHighlight(i),r.setAttribute("lJsonHighlights",n)}},this.removeJsonHighlight=function(t){let e=r.getAttribute("lJsonHighlights");for(let i=e.length-1;i>=0;i--)e[i].getPlmID()===t&&(e[i].remove(),e.splice(i,1));r.setAttribute("lJsonHighlights",e)},this.initAuthoringData()}})}),define("DS/DMUBaseWebValidation/EXPValValidated",["DS/DMUBaseWebValidation/EXPValObject"],function(t){"use strict";return t.extend({init:function(e,i){this._parent(e,i);let n=this;this.addParameters([{name:"lPathElements",type:"listObjects",JSONname:"",defaultValue:[]}]),this.setFromJson=function(e){t.prototype.setFromJson.call(this,e),e.validatedObjects&&n.setPathElements(e.validatedObjects)},this.getPathElements=function(){return n.getAttribute("lPathElements")},this.getValidatedInstanceNames=function(){let t=[],e=n.getAttribute("lPathElements");if(!e)return t;for(let i=0;i<e.length;i++)1===e[i].pathElement.length?t.push(e[i].referenceName):t.push(e[i].instanceName);return t},this.setPathElements=function(t){for(var e=0;e<t.length;e++)n.addPathElement(t[e])},this.addPathElement=function(t){if(t){let e=n.getAttribute("lPathElements");e||(e=[]),e.push({instanceName:t.instanceName,referenceName:t.referenceName,pathElement:t.PathElements}),n.setAttribute("lPathElements",e)}},this.removePathElement=function(t,e){let i=n.getAttribute("lPathElements");if(i){for(var s=i.length-1;s>=0;s--)(i[s].pathElement.equals(t)||i[s].pathElement.equals(e))&&i.splice(s,1);n.setAttribute("lPathElements",i)}}}})}),define("DS/DMUBaseWebValidation/EXPValContext",["DS/DMUBaseWebValidation/EXPValObject"],function(t){"use strict";return t.extend({init:function(e,i){this._parent(e,i);let n=this;this.addParameters([{name:"lJsonContexts",type:"listObjects",JSONname:"",defaultValue:[]}]),this.setFromJson=function(e){t.prototype.setFromJson.call(n,e),e.contexts&&n.setJsonContexts(e.contexts)},this.getJsonContextIDs=function(){let t=[],e=n.getAttribute("lJsonContexts");if(e)for(let i=0;i<e.length;i++)t.push(e[i].id);return t},this.getJsonContextNames=function(){var t=[],e=n.getAttribute("lJsonContexts");if(e)for(let i=0;i<e.length;i++)t.push(e[i].name);return t},this.getJsonContextTypes=function(){var t=[],e=n.getAttribute("lJsonContexts");if(e)for(let i=0;i<e.length;i++)t.push(e[i].type);return t},this.getJsonContexts=function(){return n.getAttribute("lJsonContexts")},this.setJsonContexts=function(t){if(t)for(let e=0;e<t.length;e++)n.addJsonContext(t[e])},this.addJsonContext=function(t){if(t){let e=n.getAttribute("lJsonContexts");e||(e=[]),e.push({id:t.id,type:t.type,name:t.name,usage:t.usage,loadedR2VInfo:t.loadedR2VInfo,subContext:t.subContext}),n.setAttribute("lJsonContexts",e)}},this.removeJsonContext=function(t){let e=n.getAttribute("lJsonContexts");if(e&&e.length){for(let i=e.length-1;i>=0;i--)e[i].id===t&&e.splice(i,1);n.setAttribute("lJsonContexts",e)}},this.getMainContext=function(){let t=null,e=n.getAttribute("lJsonContexts");if(e&&e.length)for(let i=0;i<e.length;i++)if(!e[i].subContext){t=e[i];break}return t},this.getMainContextID=function(){let t,e=n.getMainContext();return e&&(t=e.id),t},this.getMainContextType=function(){let t,e=n.getMainContext();return e&&(t=e.type),t},this.getMainContextName=function(){let t,e=n.getMainContext();return e&&(t=e.name),t},this.getSubContext=function(){let t=null,e=n.getAttribute("lJsonContexts");if(e&&e.length)for(let i=0;i<e.length;i++)if(e[i].subContext){t=e[i];break}return t},this.getSubContextID=function(){let t,e=n.getSubContext();return e&&(t=e.id),t},this.getSubContextType=function(){let t,e=n.getSubContext();return e&&(t=e.type),t},this.getSubContextName=function(){let t,e=n.getSubContext();return e&&(t=e.name),t}}})}),define("DS/DMUBaseWebValidation/EXPValHighlights",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D"],function(t,e){"use strict";return t.extend({init:function(t,i){this._parent(t,i);var n=this;this.setValType("Highlights");var s=new e("Highlights");s.getDMUType=this.getType,s.getOwner=function(){return n},this.setNode(s),this._issueCreationType="issue",this.getIssueCreationType=function(){return this._issueCreationType},this.setIssueCreationType=function(t){t&&(this._issueCreationType=t)};let r;this.initAuthoringData=function(){require(["DS/DMUReviewPersistence/EXPValHighlightsContextualBar"],function(t){r=new t,n.getContextualMenuCommandList=r.getContextualMenuCommandList,n.getSharedContextualMenuCommandList=r.getSharedContextualMenuCommandList,r.register({frmWindow:n._frmWindow,type:n.getType()})})},this.removeAuthoringData=function(){},this.initAuthoringData()}})}),define("DS/DMUBaseWebValidation/EXPValChecks",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D"],function(t,e){"use strict";return t.extend({init:function(t,i){this._parent(t,i);var n=this;this.setValType("Checks");let s=new e("Checks");s.getDMUType=this.getType,s.getOwner=function(){return n},this.setNode(s);let r;this.initAuthoringData=function(){require(["DS/DMUReviewPersistence/EXPValChecksContextualBar"],function(t){r=new t,n.getContextualMenuCommandList=r.getContextualMenuCommandList,n.getSharedContextualMenuCommandList=r.getSharedContextualMenuCommandList,r.register({frmWindow:n._frmWindow,type:n.getType()})})},this.removeAuthoringData=function(){},this.initAuthoringData()}})}),define("DS/DMUBaseWebValidation/EXPValValidation",["DS/DMUBaseWebValidation/EXPValObject","DS/DMUBaseWebValidation/EXPValMarkup","DS/DMUBaseWebValidation/EXPValValidated","DS/DMUBaseWebValidation/EXPValParticipants","DS/DMUBaseWebValidation/EXPValCheck","DS/DMUBaseWebValidation/EXPValChecks","DS/DMUBaseWebValidation/EXPValHighlights","DS/DMUBaseWebValidation/EXPValContext","DS/Visualization/Node3D"],function(t,e,i,n,s,r,a,o,u){"use strict";return t.extend({init:function(l,g){this._parent(l,g);let h=this;this.addParameters([{name:"sContextType",type:"string",JSONname:""},{name:"sStatus",type:"string",JSONname:""},{name:"sModifyAccess",type:"boolean",JSONname:"",defaultValue:!1},{name:"sRestrictedEdition",type:"boolean",JSONname:"",defaultValue:!1},{name:"oValidated",type:"objectDefinition",JSONname:""},{name:"oContext",type:"objectDefinition",JSONname:""},{name:"oParticipants",type:"objectDefinition",JSONname:""},{name:"lChecks",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lMarkups",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lHighlights",type:"listObjects",JSONname:"",defaultValue:[]},{name:"sSlideForPreview",type:"string",JSONname:""}]);let c=null,d=null,f=!1,m=new u("Validation");m.getDMUType=h.getValType,this.setNode(m);let p=new r(l,h),b=new a(l,h);m.addChild(p.getNode()),m.addChild(b.getNode()),this.getStatus=function(){return h.getAttribute("sStatus")},this.setStatus=function(t){"InProgress"===t?h.setStatus("inProgress"):"Failed"===t?h.setStatus("failed"):"Passed"===t?h.setStatus("passed"):h.setAttribute("sStatus",t)},this.getModifyAccessFlag=function(){return h.getAttribute("sModifyAccess")},this.setModifyAccessFlag=function(t){h.setAttribute("sModifyAccess",t)},this.getRestrictedEditionFlag=function(){return h.getAttribute("sRestrictedEdition")},this.setRestrictedEditionFlag=function(t){h.setAttribute("sRestrictedEdition",t)},this.getCurrentState=function(){return d},this.setCurrentState=function(t){d=t};let C=this.setReadOnly;this.setReadOnly=function(t){C(t);let e=h.getAttribute("lMarkups");e&&e.length&&e.forEach(e=>{e.setReadOnly(t)});let i=h.getAttribute("lHighlights");i&&i.length&&i.forEach(e=>{e.setReadOnly(t)});let n=h.getAttribute("lChecks");n&&n.length&&n.forEach(e=>{e.setReadOnly(t)})},this._parentRemove=this.remove,this.remove=function(){h.setCurrentMarkup(null),c=null,d=null,h._parentRemove()},this.updateVisibleMarkups=(()=>{let t=h.getParent();if(f)t.setVisibleMarkups(h.getMarkups().map(t=>{return("ReviewMarkup"===t.getValType()?t:t.getRepRef()).getMarkupContent()}).filter(Boolean));else{let e="ReviewMarkup"===c.getValType()?c:c.getRepRef();t.setVisibleMarkups(e&&e.getMarkupContent()?[e.getMarkupContent()]:[])}t.refreshNode()}),this.setFromJson=function(e){switch(t.prototype.setFromJson.call(h,e),e.contextType){case"1":h.setContextType("Product");break;case"2":h.setContextType("Simulation");break;case"3":h.setContextType("Image");break;case"4":h.setContextType("RFL");break;case"5":h.setContextType("PPR");break;case"6":h.setContextType("Shape");break;default:h.setContextType("")}h.setCurrentState(e.currentState),h.setStatus(e.status),h.setModifyAccessFlag("false"!==e.modifyAccess),h.setRestrictedEditionFlag(e.restrictedEdition),h.setSlideForPreview(e.slideForPreview)},this.getContextType=function(){return h.getAttribute("sContextType")},this.setContextType=function(t){h.setAttribute("sContextType",t)},this.getParticipants=function(){return h.getAttribute("oParticipants")},this.setParticipants=function(t){t instanceof n&&h.setAttribute("oParticipants",t)},this.removeParticipants=function(){h.getAttribute("oParticipants")&&h.getAttribute("oParticipants").remove(),h.setAttribute("oParticipants",null)},this.addValidatedNode=(t=>{let e=new u("Validated");e.getDocInfo=(()=>t.docInfo),m.addChild(e)}),this.removeValidatedNode=(t=>{this.getNode().getChildren().forEach(e=>{"Validated"===e.name&&e.getDocInfo().validatedPaths[0]===t&&m.removeChild(e)})}),this.getValidated=function(){return h.getAttribute("oValidated")},this.setValidated=function(t){t instanceof i&&h.setAttribute("oValidated",t)},this.removeValidated=function(){h.getAttribute("oValidated")&&h.getAttribute("oValidated").remove(),h.setAttribute("oValidated",null)},this.getContext=function(){return h.getAttribute("oContext")},this.setContext=function(t){t instanceof o&&h.setAttribute("oContext",t)},this.removeContext=function(){h.getAttribute("oContext")&&h.getAttribute("oContext").remove(),h.setAttribute("oContext",null)},this.getChecks=function(){return h.getAttribute("lChecks")},this.getChecksData=function(){var t=[],e=h.getAttribute("lChecks");if(!e)return;let i,n=0;for(var s=0;s<e.length;s++)t.push(e[s].getCheckObject()),e[s].getCheckObject().creationTime&&n++;return i=n===e.length?t.sort((t,e)=>{if(t.creationTime&&e.creationTime)return t.creationTime=t.creationTime.replace("@"," "),t.creationTime=t.creationTime.replace(":GMT"," GMT"),e.creationTime=e.creationTime.replace("@"," "),e.creationTime=e.creationTime.replace(":GMT"," GMT"),new Date(t.creationTime)<new Date(e.creationTime)?-1:new Date(t.creationTime)>new Date(e.creationTime)?1:0}):t},this.addCheck=function(t){if(t instanceof s){let e=h.getAttribute("lChecks");e||(e=[]),e.push(t),h.setAttribute("lChecks",e),p.getNode().addChild(t.getNode())}},this.removeCheck=function(t){let e=h.getAttribute("lChecks");if(e){for(let i=e.length-1;i>=0;i--)e[i].getPlmID()===t&&(p.getNode().removeChild(e[i].getNode()),e[i].remove(),e.splice(i,1));h.setAttribute("lChecks",e)}},this.getMarkups=function(){return h.getAttribute("lMarkups")},this.addMarkup=function(t){if(t instanceof e){let e=h.getAttribute("lMarkups");e||(e=[]),e.push(t),h.setAttribute("lMarkups",e)}},this.removeMarkup=function(t){let e=h.getAttribute("lMarkups");if(e){for(var i=e.length-1;i>=0;i--)if(e[i].getPlmID()===t){e[i].remove(),e.splice(i,1);break}h.setAttribute("lMarkups",e),h.updateVisibleMarkups()}},this.reorderMarkups=function(t){let e=h.getAttribute("lMarkups");e&&(t.forEach(function(t){let i=e.findIndex(e=>e.getRepRef().getPlmID()===t),n=e.splice(i,1)[0];e.push(n)}),h.setAttribute("lMarkups",e),h.fireEvent("onDMUValidationMarkupsReordered",{orderedMarkupIDs:t}))},this.sortMarkups=function(){let t=h.getAttribute("lMarkups");if(t){t.sort(function(t,e){return t.getTreeOrder()-e.getTreeOrder()});for(var e=0;e<t.length;e++)t[e].sortReplies();h.setAttribute("lMarkups",t)}},this.getFirstLevelRepRefs=function(){let t=[],e=h.getAttribute("lMarkups");for(var i=0;i<e.length;i++)t.push(e[i].getRepRef());return t},this.getAllRepRefs=function(){let t=[],e=function(t,i){var n=t.getRepRef();n&&i.push(n);for(var s=t.getReplies(),r=0;r<s.length;r++)e(s[r],i)},i=h.getAttribute("lMarkups");if(!i)return t;for(let n=0;n<i.length;n++)e(i[n],t);return t},this.getLoadedRepRefs=function(){for(var t=h.getAllRepRefs(),e=0;e<t.length;)t[e].isLoaded()?e++:t.splice(e,1);return t},this.getNextRepRef=function(t){for(var e=h.getAllRepRefs(),i=0;i<e.length;i++)if(e[i].getPlmID()===t)return i<e.length-1?e[i+1]:e[0]},this.getPreviousRepRef=function(t){for(var e=h.getAllRepRefs(),i=0;i<e.length;i++)if(e[i].getPlmID()===t)return i>0?e[i-1]:e[e.length-1]},this.getRepRef=function(t){for(var e=h.getAllRepRefs(),i=0;i<e.length;i++)if(e[i].getPlmID()===t)return e[i]},this.getHighlights=function(){return h.getAttribute("lHighlights")},this.getHighlightsData=function(){let t=[],e=h.getAttribute("lHighlights");if(!e)return t;let i,n=0;for(var s=0;s<e.length;s++)t.push(e[s].getHighlightObject()),e[s].getHighlightObject().creationTime&&n++;return i=n===e.length?t.sort((t,e)=>{if(t.creationTime&&e.creationTime)return t.creationTime=t.creationTime.replace("@"," "),t.creationTime=t.creationTime.replace(":GMT"," GMT"),e.creationTime=e.creationTime.replace("@"," "),e.creationTime=e.creationTime.replace(":GMT"," GMT"),new Date(t.creationTime)<new Date(e.creationTime)?-1:new Date(t.creationTime)>new Date(e.creationTime)?1:0}):t},this.addHighlight=function(e){let i=h.getAttribute("lHighlights");e instanceof t&&(i||(i=[]),i.push(e),b.getNode().addChild(e.getNode()),h.setAttribute("lHighlights",i))},this.removeHighlight=function(t){let e=h.getAttribute("lHighlights");if(e){for(var i=e.length-1;i>=0;i--)e[i].getPlmID()===t&&(b.getNode().removeChild(e[i].getNode()),e[i].remove(),e.splice(i,1));h.setAttribute("lHighlights",e)}},this.enableMultipleMarkupVisibility=(t=>{f!==t&&(h.getParent().enableMultipleMarkupVisibility(t),f=t,h.updateVisibleMarkups())}),this.setCurrentMarkup=function(t){if(c!==t){var e=h.getParent();if(e){var i=null;if(t&&(i="ReviewMarkup"!==t.getValType()?t:t.getParent()),i){if(!c||i.getPlmID()!==c.getPlmID()){var n="ReviewMarkup"===i.getValType()?i:i.getRepRef();n.getMarkupContent()&&(c=i,e.setCurrentSessionMarkup(n?n.getMarkupContent():null),e.refreshNode())}}else c&&(e.setCurrentSessionMarkup(null),c=null,e.refreshNode())}}},this.getCurrentMarkup=function(){return c},this.setSlideForPreview=function(t){h.setAttribute("sSlideForPreview",t)},this.getSlideForPreview=function(){var t=null,e=h.getAttribute("sSlideForPreview");return e&&""!==e&&(t=JSON.parse(e)),t}}})}),define("DS/DMUBaseWebValidation/EXPValImporter",["UWA/Class","DS/DMUBaseWebValidation/EXPValValidation","DS/DMUBaseWebValidation/EXPValMarkup","DS/DMUBaseWebValidation/EXPValValidated","DS/DMUBaseWebValidation/EXPValParticipants","DS/DMUBaseWebValidation/EXPValCheck","DS/DMUBaseWebValidation/EXPValContext","DS/DMUBaseWebValidation/EXPValHighlight"],function(t,e,i,n,s,r,a,o){"use strict";return t.extend({init:function(t){this.importValidationFromJSON=function(u,l){var g=null;if(u&&"DMUValidationValidation"===u.type&&u.children){g=new e(t.viewer.getViewer(),t.DMUExperience),t.DMUExperience.setValidation(g),g.setFromJson(u);for(var h=0;h<u.children.length;h++){var c=u.children[h],d=null;switch(c.type){case"Markup":d=new i(t.viewer.getViewer(),g),g.addMarkup(d);break;case"DMUValidationValidated":d=new n(t.viewer.getViewer(),g),g.setValidated(d);break;case"DMUValidationParticipants":d=new s(t.viewer.getViewer(),g),g.setParticipants(d);break;case"DMUValidationCheck":(d=new r(t.viewer.getViewer(),g)).setEditable(l),g.addCheck(d);break;case"DMUValidationContext":d=new a(t.viewer.getViewer(),g),g.setContext(d);break;case"DMUValidationExposedPresentation":(d=new o(t.viewer.getViewer(),g)).setEditable(l),g.addHighlight(d)}d&&d.setFromJson(c)}g.sortMarkups(),g.setReadOnly(t.DMUExperience.isReadOnly()),g.fireEvent("onDMUObjectInitialized",{dmuObject:g,editionMode:l})}return g}}})});