define("DS/RouteWebAppUX/Commands/AttachmentOpenWith",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","UWA/Class/Promise"],function(e,t,n){"use strict";let o=function(o){let s=function(e){let t=e,n=[],o={envId:widget.getValue("x3dPlatformId"),serviceId:"3DSpace",contextId:"",objectId:a(t,"id"),objectType:a(t,"Type"),displayName:a(t,"Title"),displayType:a(t,"Type"),facetName:"realized",path:[{resourceid:a(t,"id"),type:a(t,"Type")}]};return n.push(o),{protocol:"3DXContent",version:"1.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:n}}}(o),r=new t;r.set3DXContent(s);let u=[];if(e.is(r.retrieveCompatibleApps,"function"))return new n(function(e,t){r.retrieveCompatibleApps(function(t){t.forEach(function(e){u.push(i(e,null))}),e(u)},function(){t(new Error("Error while getting Open with menus"))})})},i=function(e,t){return{id:e.text,title:e.text,icon:e.icon,type:"PushItem",multisel:!1,action:{context:t,callback:e.handler}}},a=function(e,t){let n="";return e&&e.options.grid.id&&(n=e.options.grid[t]),n};return{getOpenWithMenu:e=>o(e)}}),define("DS/RouteWebAppUX/Utilities/RouteWebAppRouteViewUtils",["i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e){"use strict";const t={icon:"thumbs-up",title:e.approve,action:"Approve",emphasize:"success"},n={icon:"thumbs-down",title:e.reject,action:"Reject",emphasize:"high-attention"},o={icon:"comment",title:e.comment,action:"Comment",emphasize:"info"},i={icon:"check",title:e.accept,action:"Accept",emphasize:"success"};return{getRouteActivityStateNLS:t=>(function(t){let n,o;if(t)return t.contains("(")?(n=t.split("(")[0],o=t.split("(")[1],n=n.toLowerCase().replace(/ /g,""),e[n]+" ("+o):(t=t.toLowerCase().replace(/ /g,""),t=e[t])})(t),getRouteActivityStateIcon:e=>(function(e){let t="";if(e)return e.contains("Awaiting")?t="hourglass":"Approved"==e?t="thumbs-up":"Commented"==e?t="comment":"Stopped"==e?t="stop":"Rejected"==e?t="thumbs-down":"Notified"==e?t="notification-read":"Not Started"==e?t="play-flash-off":"Abstained"==e&&(t="ignore"),t})(e),getApprovalActionIcon:e=>(function(e){const a=[];return"Approve"===e?(a.push(t),a.push(n)):"Comment"===e?a.push(o):"Review"===e&&(a.push(i),a.push(n)),a})(e)}}),define("DS/RouteWebAppUX/Utilities/RouteWebAppParseJSONUtil",["UWA/Class"],function(e){"use strict";return e.extend({createDataForRequest:function(e,t){void 0===t&&(t=widget.data.csrf);var n={dataelements:e},o=new Array;return o.push(n),{csrf:t,data:o}}})}),define("DS/RouteWebAppUX/Utilities/CopyLinkContentAppId",["text!DS/RouteWebAppUX/assets/json/ContentAppListJson.json"],function(e){"use strict";let t;var n=JSON.parse(e);let o=function(e){var t="";return Object.entries(n).forEach(([n,o])=>{for(let i=0;i<o.length;i++)e==o[i]&&(t=n)}),t};return t={getAppId:e=>o(e),isCopyLink:e=>(function(e){return""==o(e)?"false":"true"})(e)}}),define("DS/RouteWebAppUX/RouteTracker/RouteDimension",[],function(){"use strict";var e;return e={ROUTEMANAGEMENT_WELCOMEPANEL:{ROUTEMANAGEMENT_ACTIVITY:"routeManagementActivity"},ROUTEMANAGEMENT_TASKVIEW:{ROUTEMANAGEMENT_INITIALTASKVIEW:"routeManagementInitialTaskView",ROUTEMANAGEMENT_TASKVIEWSWITCH:"routeManagementTaskViewSwitch"},ROUTEMANAGEMENT_SUMMARY:{ROUTEMANAGEMENT_OBJECTTYPE:"routeManagementObjectType"},ROUTEMANAGEMENT_ROUTE:{ROUTEMANAGEMENT_ROUTECOMMAND:"routeManagementRouteCommand"},ROUTEMANAGEMENT_TASK:{ROUTEMANAGEMENT_TASKCOMMAND:"routeManagementTaskCommand"},ROUTEMANAGEMENT_TEMPLATE:{ROUTEMANAGEMENT_TEMPLATECOMMAND:"routeManagementTemplateCommand"}},Object.freeze(e)}),define("DS/RouteWebAppUX/Utilities/Search/RouteWebAppSearchUtil",["UWA/Class","DS/UIKIT/Alert","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t,n){"use strict";return{getRefinementToSnN:(e,t,o,i)=>(function(e,t,o,i){var a={title:n[t],role:"",mode:"furtive",default_with_precond:!0,show_precond:!1,multiSel:o,idcard_activated:!1,select_result_max_idcard:!1,itemViewClickHandler:"",app_socket_id:e,widget_id:e,search_delegation:"3dsearch",default_search_criteria:"",source:["3dspace"],recent_search:{types:i},tenant:"OnPremise"};return a.global_actions=[{id:"incontextHelp",title:n["search.help"],icon:"fonticon fonticon-help",overflow:!1}],a})(e,t,o,i),getPrecondForDocumentSearch:()=>'( NOT (flattenedtaxonomies:"types/Person" OR flattenedtaxonomies:"types/Business Role" OR flattenedtaxonomies:"types/Security Context" OR flattenedtaxonomies:"types/Route" OR flattenedtaxonomies:"types/Route Template" OR flattenedtaxonomies:"types/Inbox Task"))'}}),define("DS/RouteWebAppUX/Model/RouteWebAppTaskAttachmentModel",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],function(e,t){"use strict";let n=new e;return{createModel:(e,o)=>(function(e){return n.prepareUpdate(),e.forEach(function(e){var o=new t({label:e.dataelements.title,width:300,grid:{id:e.id,Title:e.dataelements.title,Name:e.dataelements.name,Maturity:e.dataelements.stateNLS,Type:e.type},icons:[e.dataelements.icon]});n.addRoot(o)}),n.pushUpdate(),n})(e),getModel:()=>n,getSelectedRowsModel:()=>WrapperDataGridView.getSelectedRowsModel(n),getContentIDs:()=>(function(){if(null!=n){for(var e=n.getChildren(),t=[],o=0;o<e.length;o++)t.push(e[o]._options.grid.id);return t}})(),destroy:()=>{n=new e},deleteSelectedRows:()=>(function(){var e=n.getSelectedNodes();n.prepareUpdate();for(var t=0;t<e.length;t++)n.removeRoot(e[t]);if(n.pushUpdate(),0==n.getChildren().length){var o=document.querySelector(".taskAttachments-gridView-View");o&&o.addClassName("hideView")}})()}}),define("DS/RouteWebAppUX/Commands/ApprovalMaturityCmd",[],function(){"use strict";return{lifeCycle:e=>(function(e){require(["DS/LifecycleCmd/MaturityCmd"],function(t){let n=[],o=e.model.id;n.push({physicalid:o}),(new t).executeAsync(n).then(function(e){widget.routeWebAppMediator.publish("maturity-save",{model:e})})})})(e)}}),define("DS/RouteWebAppUX/Components/RouteWebAppMediator",["DS/CoreEvents/ModelEvents"],function(e){"use strict";var t=null,n=function(){t=new e};return n.prototype.publish=function(e,n){t.publish({event:e,data:n})},n.prototype.subscribe=function(e,n){return t.subscribe({event:e},n)},n.prototype.subscribeOnce=function(e,n){return t.subscribeOnce({event:e},n)},n.prototype.unsubscribe=function(e){t.unsubscribe(e)},n.prototype.getEventBroker=function(){return t},n.prototype.destroy=function(){t.destroy()},n}),define("DS/RouteWebAppUX/RouteTracker/RouteValue",[],function(){"use strict";return{ROUTEMANAGEMENT_SUMMARY:{ROUTEMANAGEMENT_OBJECTCOUNT:"routeManagementObjectCount"}}}),define("DS/RouteWebAppUX/Components/RouteWebAppNotifications",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],function(e,t){"use strict";let n=null,o=function(){n=e,t.setNotificationManager(n),t.setStackingPolicy(9)};return o.prototype.handler=function(){return document.getElementById("TaskApprovalDialog")?(t.inject(document.getElementById("TaskApprovalDialog")),document.getElementById("TaskApprovalDialog").scrollIntoView()):document.getElementsByClassName("wux-notification-screen").length>0||t.inject(document.body),n},o.prototype.notifview=function(){return t},o}),define("DS/RouteWebAppUX/RouteWebAppBootstrap",["UWA/Core","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/WAFData/WAFData","DS/RouteWebAppUX/Components/RouteWebAppMediator","DS/RouteWebAppUX/Components/RouteWebAppNotifications"],function(e,t,n,o,i){"use strict";let a,s,r,u;const l=function(){return c(),p(),new Promise(function(e,n){let o=new Promise(function(e,n){let o=widget.getValue("x3dPlatformId");t.getServiceUrl({serviceName:"3DSpace",platformId:o,onComplete:function(t){a="string"==typeof t?t:t[0].url,e()},onFailure:function(){a="",n()}})}),i=new Promise(function(e,n){t.getServiceUrl({serviceName:"3DSearch",onComplete:function(t){var n="OnPremise";if(r=t)for(var o=0;o<r.length;o++)if(n===r[o].platformId){s=r[o].url;break}e()},onFailure:function(e){r=[],n()}})}),l=new Promise(function(e,n){var o=widget.getValue("x3dPlatformId");t.getServiceUrl({serviceName:"3DDashboard",platformId:o,onComplete:function(t){u="string"==typeof t?t:t[0].url,e()},onFailure:function(){u="",n()}})});Promise.all([o,i,l]).then(t=>{e(t)},e=>{n(e)})})},c=function(){widget.routeWebAppMediator=new o},p=function(){widget.routeWebAppNotify=new i};return{init:(e,t,n)=>l(),getRouteServiceBaseURL:()=>(function(){if(a)return a+"/resources/v1/modeler/routes"})(),getTaskServiceBaseURL:()=>(function(){if(a)return a+"/resources/v1/modeler/tasks"})(),getCSRFToken:()=>new Promise(function(t,o){n.authenticatedRequest(a+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){t(e)}}))}),getTenantValue:()=>widget.data.routeCredentials&&widget.data.routeCredentials.tenant?widget.data.routeCredentials.tenant:widget.getValue("x3dPlatformId"),getSecurityContextValue:()=>widget.data.routeCredentials&&widget.data.routeCredentials.securityContext?widget.data.routeCredentials.securityContext:widget.ChangeMaturityWidget?widget.ChangeMaturityWidget.options.SecurityContext:widget.getValue("xPref_CREDENTIAL")?"ctx::"+widget.getValue("xPref_CREDENTIAL"):"",get3DSpaceURL:()=>(function(){if(a)return a})(),getDashboardURL:()=>(function(){if(u)return u})(),getSearchUrl:()=>(function(){if(s)return s})(),authenticatedRequest:(e,t)=>(function(e,t){n.authenticatedRequest(e,t)})(e,t)}}),define("DS/RouteWebAppUX/Commands/RouteWebAppRouteDocumentCommands",["DS/RouteWebAppUX/RouteWebAppBootstrap"],function(e){"use strict";let t=function(t,n,o,i,a,s){let r={document:{id:n,contextId:e.getSecurityContextValue(),serviceId:"3DSpace",envId:e.getTenantValue(),index:1,data:function(e){let t={};if(Array.isArray(e))for(let n=0;n<e.length;n++)t.title=e[n].Title,t.type=e[n].Type,t.name=e[n].Name;return t}(i),type:"Document"},platformUrls:{"3DSpace":e.get3DSpaceURL(),"3DDashboard":e.getDashboardURL()},onComplete:function(e){s&&s(e)}};r.document.filesCallback=function(e){a(e)};let u=new t;u.init(r);u.render()};return{init:(e,n,o,i,a,s)=>t(e,n,0,i,a,s)}}),define("DS/RouteWebAppUX/Utilities/CompassDataExchange",["DS/RouteWebAppUX/RouteWebAppBootstrap","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t){"use strict";let n=function(t){return{envId:e.getTenantValue()?e.getTenantValue():"OnPremise",serviceId:"3DSpace",contextId:e.getSecurityContextValue(),objectId:t.dataelements.id,objectType:"Route",displayName:t.dataelements.name,linkedContextTitle:t.linkedContextTitle,path:[{resourceid:t.dataelements.id,type:"Route"}]}},o=function(e){if("hyperlink"==e.fromPage){for(var t=[],n=0;n<e.route.length;n++)e.route[n].dataelements.approvalTaskId&&t.push(e.route[n].dataelements.id);return 1==t.length?"Inbox Task":"Route"}return"Route"},i=function(e,t){return{protocol:"3DXContent",version:"1.1",source:widget.getValue("appId")?widget.getValue("appId"):"ENXROUT_AP",widgetId:widget.id,data:{items:t,approvalObjectType:e}}};const a=function(e){return"Awaiting your Comment"==e?"Comment":"Awaiting your Approval"==e?"Approve":"Awaiting your Review"==e?"Review":""},s=function(e){let t=e.dataelements.contentApprovalStatus,n=e.relateddata.route;for(let e in n){let o=n[e];if(t===o.dataelements.activityState&&o.dataelements.approvalTaskId&&""==!o.dataelements.approvalTaskId){let e={};return e.routeId=o.dataelements.id,e.taskId=o.dataelements.approvalTaskId,null==o.dataelements.showAbstain||1==o.dataelements.showAbstain?e.showAbstain=!0:e.showAbstain=!1,e}}};return{getContentToLink:e=>(function(e){let t=[],a=o(e);return"Inbox Task"==a?e.route.forEach(function(o){if(o.dataelements.approvalTaskId){o.linkedContextTitle=e.title;let i=n(o);i.objectId=o.dataelements.approvalTaskId,t.push(i)}}):"hyperlink"==e.fromPage?e.route.forEach(function(o){o.dataelements.activityState.indexOf("Awaiting your")>-1&&(o.linkedContextTitle=e.title,t.push(n(o)))}):e.route.forEach(function(o){o.linkedContextTitle=e.title,t.push(n(o))}),i(a,t)})(e),getContentforApprovalLink:e=>(function(e){let t=o(e),a=[];return e.route.forEach(function(t){t.dataelements.activityState.indexOf("Awaiting your")>-1&&(t.linkedContextTitle=e.title,a.push(n(t)))}),i(t,a)})(e),createModel:e=>(function(e){let t={model:{}},n=e.dataelements;t.model.id=e.id,t.model.name=n.name,t.model.title=n.title,t.model.type=e.type,t.model.state="In Process",t.model.current=n.current,t.model.current_NLS=n.current_NLS,t.model.Activity_State=n.contentApprovalStatus,t.model.approvalAction=a(t.model.Activity_State),t.model.contentInfoExpression=n.ContentInfoExpression;let o=s(e);return o&&o.routeId&&o.taskId&&(t.model.routeId=o.routeId,t.model.taskId=o.taskId,t.model.showAbstain=o.showAbstain),e.relateddata&&(t.model.route=e.relateddata.route),t})(e),getActionsBasedOnApprovalStatus:e=>(function(e){return"Approve"==e?["Approve","Reject","Abstain"]:"Comment"==e?["Comment"]:"Review"==e?["Review"]:[]})(e),getApprovalAction:e=>a(e)}}),define("DS/RouteWebAppUX/Utilities/RouteLinkWidget",["DS/WidgetLink/WidgetLink","DS/PlatformAPI/PlatformAPI","DS/RouteWebAppUX/Utilities/CompassDataExchange","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t,n,o){"use strict";let i,a,s=function(e){a.publish("load-route-data",{dropData:e})},r=function(){return a=e.get(widget)};return i={init:(t,n)=>(function(t,n){return(a=e.get(t)).setLinkability(n),a})(t,n),checkIfLinked:()=>0!=a.getLinked().length,getWidgetLinkInstance:()=>r(),loadContent:e=>s(e),removeContent:e=>(function(e){a.publish("DS/ExternalWdgtCom/RemoveRoot",{data:e})})(e),removeAllContent:()=>{a.publish("DS/ExternalWdgtCom/RemoveAll")},subscribeForRouteEvents:e=>(function(e){return(a=r()).subscribe("load-route-data",function(n){t.publish("updateRouteContent-"+e.id,n)}),a})(e),refreshContent:e=>(function(e){a.publish("refresh-route-data",e)})(e),refreshRouteOnContentSelection:e=>(function(e){e.model.fromPage="summarypage-ctxCommand";let t=n.getContentToLink(e.model);s(t)})(e)}}),define("DS/RouteWebAppUX/Services/RouteWebAppRouteTaskServices",["UWA/Class/Promise","DS/WAFData/WAFData","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/RouteWebAppParseJSONUtil"],function(e,t,n,o){"use strict";return{makeWSCall:(e,o,i,a,s,r,u,l)=>(function(e,o,i,a,s,r,u,l){l=l||null;var c="",p=n.getSearchUrl();null!=l&&null!=l.isfederated&&1==l.isfederated&&(c=p+e);null!=l&&null!=l.acceptType&&""!=l.acceptType&&l.acceptType;null!=l&&null!=l.encodeSecurityContext&&""!=l.encodeSecurityContext&&l.encodeSecurityContext;var d=(new Date).getTime();c=-1==c.indexOf("?")?c+"?tenant=OnPremise&timestamp="+d:c+"&tenant=OnPremise&timestamp="+d,r=r||function(){},u=u||function(){};var m={};m.method=o,m.timeout=12e7,null!=l&&null!=l.isSwymUrl&&0!=l.isSwymUrl||(m.type="json"),i&&(m.auth={passport_target:i}),s&&(m.data=s),m.headers={Accept:"application/json","Content-Type":"application/json","Accept-Language":"en"},m.onComplete=function(e){r(e)},m.onFailure=function(e,t){console.log("Error in calling url: "+c),console.log("Error Detail: "+e),console.log("Error Data: "+JSON.stringify(t)),u(e,t)},m.onTimeout=function(){console.log("Timedout for url: "+c),widget.body&&Mask.unmask(widget.body)},t.authenticatedRequest(c,m)})(e,o,i,0,s,r,u,l)}}),define("DS/RouteWebAppUX/RouteTracker/RouteValueMapping",["DS/RouteWebAppUX/RouteTracker/RouteValue"],function(e){"use strict";var t={};return t[e.ROUTEMANAGEMENT_SUMMARY.ROUTEMANAGEMENT_OBJECTCOUNT]="pv1",t}),define("DS/RouteWebAppUX/RouteTracker/RouteDimensionMapping",["DS/RouteWebAppUX/RouteTracker/RouteDimension"],function(e){"use strict";var t={};return t[e.ROUTEMANAGEMENT_WELCOMEPANEL.ROUTEMANAGEMENT_ACTIVITY]={PersonalDimention:"pd1",allowedValues:["Routes","Templates","New Route","New Template"]},t[e.ROUTEMANAGEMENT_TASKVIEW.ROUTEMANAGEMENT_INITIALTASKVIEW]={PersonalDimention:"pd1",allowedValues:["GridView","GraphView"]},t[e.ROUTEMANAGEMENT_TASKVIEW.ROUTEMANAGEMENT_TASKVIEWSWITCH]={PersonalDimention:"pd2",allowedValues:["Switch to Grid View","Switch to Graph View"]},t[e.ROUTEMANAGEMENT_SUMMARY.ROUTEMANAGEMENT_OBJECTTYPE]={PersonalDimention:"pd1",allowedValues:["Route","Template"]},t[e.ROUTEMANAGEMENT_ROUTE.ROUTEMANAGEMENT_ROUTECOMMAND]={PersonalDimention:"pd1",allowedValues:["Route - Start","Route - Save as Draft","Route - Stop","Route - Restart","Route - Resume","Route - Change Owner","Route - Delete","Route - Save as Template","Route - Properties"]},t[e.ROUTEMANAGEMENT_TASK.ROUTEMANAGEMENT_TASKCOMMAND]={PersonalDimention:"pd1",allowedValues:["Task - Approve","Task - Reject","Task - Abstain","Task - Save for later","Task - Complete","Task - Accept","Task - Mark as Complete","Task - Select Assignee","Task - Change Assignee","Task - Accept Task","Task - Create Subroute","Task - Delete Subroute","Task - Delete","Task - Approval Process"]},t[e.ROUTEMANAGEMENT_TEMPLATE.ROUTEMANAGEMENT_TEMPLATECOMMAND]={PersonalDimention:"pd1",allowedValues:["Template - Release","Template - Save as Draft","Template - Set to Draft","Template - Set to Released","Template - Set to Archived","Template - Delete","Template - New Revision","Template - Revisions","Template - Create route from template","Template - Change Owner","Template - Maturity","Template - Properties"]},Object.freeze(t)}),define("DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenuItems",["DS/RouteWebAppUX/Commands/AttachmentOpenWith","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Dropdown","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/CopyLinkContentAppId","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t,n,o,i,a,s,r){"use strict";let u=function(e,t){var n=[];return e&&n.push({name:r.deleteContent,title:r.deleteContent,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},data:null,action:{callback:function(){t()}}}),n},l=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:i.getTenantValue(),objectId:e.options.grid.id,openLink:!0}),t},c=function(e){let t=i.getSecurityContextValue();var n=[{envId:i.getTenantValue()?i.getTenantValue():"OnPremise",serviceId:"3DSpace",contextId:t,objectId:e.options.grid.id,objectType:e.options.grid.Type,displayName:e.options.grid.Title,path:[{resourceid:e.options.grid.id,type:e.options.grid.Type}]}];return{protocol:"3DXContent",version:"1.1",source:"ENXROUT_AP",widgetId:widget.id,data:{items:n}}},p=function(e,t,n){var o="";return o=null==widget.ChangeMaturityWidget?widget.getValue("xPref_CREDENTIAL")?"ctx::"+widget.getValue("xPref_CREDENTIAL"):"":i.getSecurityContextValue(),{protocol:"3DXContent",version:"1.1",source:n,widgetId:"default-widget-id",data:{items:[{envId:i.getTenantValue(),serviceId:"3DSpace",contextId:o,objectId:e.options.grid.id,objectType:t,objectTaxonomies:[t]}]}}};return{addDownloadCommand:(e,t)=>(function(e,t){let n=e.Download,o={name:n.name,title:n.title,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x fonticon-"+n.fonticon},action:{callback:n.handler}};return t.push(o),t})(e,t),getOpenWithMenu:t=>(function(t){let n=[];return new Promise(function(o,i){e.getOpenWithMenu(t).then(e=>{e&&e.length>0&&n.push({id:"OpenWith",type:"PushItem",title:r.openWith,icon:"export",submenu:e}),o(n)},e=>{o(n)})})})(t),deleteMenuForAttachments:(e,t)=>(function(e,t){var n=!0;return e.forEach(e=>{"false"==e.canDeleteContent&&(n=!1)}),u(n,t)})(e,t),getCopyLink:(e,u)=>(function(e,u){return{type:"PushItem",title:r.copyLink,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-link"},action:{callback:function(){var u=void 0;let d=void 0;1==e.length?(d=e[0].options.grid.Type,u=e[0].options.grid.Title||e[0].options.grid.Name):u="";var m=UWA.createElement("div",{styles:{display:"flex"}}),A=new t("input",{attributes:{readonly:"readonly"}});A.getContent().setStyles({display:"inline-block","border-top-right-radius":0,"border-bottom-right-radius":0}),A.inject(m);var f=new n({value:"Copy Link",className:"block",events:{onClick:function(e){if(A.setFocus(),A.elements.input.select(),A.elements.input.setSelectionRange(0,99999),document.execCommand("copy"),g.hide(),u&&""!==u){var t=r.replace(r.copyLinkSubtitle,{tag1:u});widget.notify.handler().addNotif({level:"success",title:r.copyLinkCopied,subtitle:t,sticky:!1,allowUnsafeHTML:!1})}}}});f.getContent().setStyles({display:"inline-block","border-top-left-radius":0,"border-bottom-left-radius":0,padding:"0 10px"}),f.inject(m);var g=new o({body:m,closeOnClick:!1,events:{onClickOutside:function(e){console.log("DDClickOutside")}}}),b=widget.widgetDomain;if(null==b&&(b=i.getDashboardURL()),null==b)s.getPlatformServices({platformId:"OnPremise",onComplete:function(t){let n="",o=0;for(let r of e){var i=l(r),s=a.getAppId(d);"ENOPSTR_AP"==s?i=p(r,d,s):"ENXROUT_AP"==s&&(i=c(r));let e=t["3DDashboard"]+"#app:"+s+"/content:X3DContentId="+encodeURIComponent(JSON.stringify(i));0==o?(n+=e,o++):n=n+" "+e}g.hide(),g.show(),A.setFocus(),A.setValue(n),A.elements.input.select(),A.elements.input.setSelectionRange(0,99999,"backward"),f.getContent().click()}});else{let t="",n=0;for(let o of e){var R=l(o),v=a.getAppId(d);"ENOPSTR_AP"==v?R=p(o,d,v):"ENXROUT_AP"==v&&(R=c(o));let e=b+"#app:"+v+"/content:X3DContentId="+encodeURIComponent(JSON.stringify(R));0==n?(t+=e,n++):t=t+" "+e}g.hide(),g.show(),A.setFocus(),A.setValue(t),A.elements.input.select(),A.elements.input.setSelectionRange(0,99999,"backward"),f.getContent().click()}}}}})(e)}}),define("DS/RouteWebAppUX/Commands/RouteApprovalProcess",["UWA/Core","UWA/Class","DS/i3DXCompassPlatformServices/OpenWith","UWA/Class/Promise","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/CompassDataExchange","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t,n,o,i,a,s){"use strict";let r=function(e){return{id:s.approvalProcess,title:s.approvalProcess,icon:"route",type:"PushItem",multisel:!1,action:{callback:e.handler}}};return{getOpenWithMenu:t=>(function(t){let i=a.getContentToLink(t),u=new n;u.set3DXContent(i);let l=[];if(e.is(u.retrieveCompatibleApps,"function"))return new o(function(e,t){0==i.data.items.length&&e(),u.retrieveCompatibleApps(function(t){t.forEach(function(e){l.push(r(e,null))}),e(l[0])},function(){t(new Error(s.openWithError))})})})(t)}}),define("DS/RouteWebAppUX/RouteTracker/RouteValueBuilder",["DS/RouteWebAppUX/RouteTracker/RouteValueMapping"],function(e){"use strict";function t(){this.values={}}return t.prototype.add=function(t,n){return function(e){return"string"==typeof e&&e.length>0}(t)&&Object.keys(e).some(function(e){return e===t})&&"number"==typeof n&&(this.values[e[t]]=n),this},t.prototype.build=function(){return this.values},{create:function(){return new t}}}),define("DS/RouteWebAppUX/Services/RouteWebAppESignServices",["UWA/Class/Promise","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/RouteWebAppParseJSONUtil","DS/WAFData/WAFData"],function(e,t,n){"use strict";let o,i;return i=function(o,i){return new e(function(e,a){var s=t.get3DSpaceURL()+"/resources/v1/modeler/ESignRecord/"+i,r={},u={method:"PUT",type:"json",headers:{"Content-Type":"application/json"},wait:!0};r=(new n).createDataForRequest(r);var l=o.model.needsOwnerReview,c=""!=l&&"Yes"==l?"Review":"Complete",p={actionType:[{ObjectRevision:o.model.revision},{MaturityChange:{before:"To Do",after:c}}]};r.data[0].dataelements={ObjectActionTaken:JSON.stringify(p),ObjectReference:o.model.id,ObjectServiceID:"3DSpace",ObjectURI:"/resources/v1/modeler/tasks/"},u.data=JSON.stringify(r),u.onComplete=function(t){e(t)},u.onFailure=function(e,t){a(t||e)},t.authenticatedRequest(s,u)})},o={updateEsignRecordInformation:(e,t)=>i(e,t)}}),define("DS/RouteWebAppUX/Services/RouteWebAppCollabTaskServices",["UWA/Class/Promise","DS/RouteWebAppUX/RouteWebAppBootstrap"],function(e,t){"use strict";var n={};let o=function(n,o,i,a){return new e(function(e,o){var s,r=t.getTaskServiceBaseURL()+"/"+n.model.id;"Review"==n.model.state?(s={routeTaskReviewerComments:n.model.comments},"Accept"==n.model.taskReviewButton?s.state="Complete":"Reject"==n.model.taskReviewButton&&(s.state="Assign")):(s={routeTaskApprovalComments:n.model.comments},"saveForLater"!=n.model.taskActionButton&&("Yes"==n.model.needsOwnerReview?s.state="Review":s.state="Complete"),"Approve"!=n.model.taskActionButton&&"Reject"!=n.model.taskActionButton&&"Abstain"!=n.model.taskActionButton||(s.routeTaskApprovalAction=n.model.taskActionButton));var u={method:"PUT",type:"json",timeout:0,headers:{"Content-Type":"application/ds-json"},wait:!0},l={dataelements:s},c=new Array;c.push(l);var p={csrf:a.csrf,data:c};"saveForLater"==n.model.taskActionButton&&0!=i.length&&(p.data[0].relateddata={references:i}),u.data=JSON.stringify(p),u.onComplete=function(t){e(t)},u.onFailure=function(e,t){o(t||e)},t.authenticatedRequest(r,u)})},i=function(n,o,i){return new e(function(e,a){if(0==o.length)e();else{var s=t.getTaskServiceBaseURL()+"/"+n.model.id,r={method:"PUT",type:"json",timeout:0,headers:{"Content-Type":"application/ds-json"},wait:!0},u={dataelements:{}},l=new Array;l.push(u);var c={csrf:i.csrf,data:l};c.data[0].relateddata={references:o},r.data=JSON.stringify(c),r.onComplete=function(t){e(t)},r.onFailure=function(e,t){a(t||e)},t.authenticatedRequest(s,r)}})};return{fetchRouteTask:n=>(function(n){return new e(function(e,o){var i=t.getTaskServiceBaseURL()+"/"+n+"?$include=none,assignees,references&$fields=references.icon,revision",a={method:"GET",type:"json",timeout:0,headers:{"Content-Type":"application/ds-json"},wait:!0,onComplete:function(t){e(t)},onFailure:function(e,t){o(t||e)}};t.authenticatedRequest(i,a)})})(n),updateComment:(i,a,s)=>(function(i,a,s){return new e(function(e,o){t.getCSRFToken().then(function(t){n.csrf=JSON.parse(t).csrf,e()})}).then(function(){return o(i,a,s,n)})})(i,a,s),updateTaskAttachment:(o,a)=>(function(o,a){return new e(function(e,o){t.getCSRFToken().then(function(t){n.csrf=JSON.parse(t).csrf,e()})}).then(function(){return i(o,a,n)})})(o,a)}}),define("DS/RouteWebAppUX/Controller/RouteWebAppCollabTaskServicesController",["DS/RouteWebAppUX/Services/RouteWebAppCollabTaskServices","UWA/Promise"],function(e,t){"use strict";let n;return n={fetchRouteTask:function(n){return new t(function(t,o){e.fetchRouteTask(n).then(e=>{t(e)},e=>{o(e)})})},updateComment:function(n,o,i){return new t(function(t,a){e.updateComment(n,o,i).then(e=>{t(e)},e=>{a(e)})})},updateTaskAttachment:function(n,o){return new t(function(t,i){e.updateTaskAttachment(n,o).then(e=>{t(e)},e=>{i(e)})})}}}),define("DS/RouteWebAppUX/Controller/RouteWebAppESignServicesController",["DS/RouteWebAppUX/Services/RouteWebAppESignServices","UWA/Promise"],function(e,t){"use strict";let n;return n={updateEsignRecordInformation:function(n,o){return new t(function(t,i){e.updateEsignRecordInformation(n,o).then(e=>{t(e)},e=>{i(e)})})}}}),define("DS/RouteWebAppUX/RouteTracker/RouteDimensionBuilder",["DS/RouteWebAppUX/RouteTracker/RouteDimensionMapping"],function(e){"use strict";function t(e){return"string"==typeof e&&e.length>0}function n(){this.dimensions={}}return n.prototype.add=function(n,o){var i;return i=t(n)&&Object.keys(e).some(function(e){return e===n}),t(o)&&i&&(0==e[n].allowedValues.length||e[n].allowedValues.includes(o))&&(this.dimensions[e[n].PersonalDimention]=o),this},n.prototype.build=function(){return this.dimensions},{create:function(){return new n}}}),define("DS/RouteWebAppUX/Utilities/RouteWebAppDocumentUtils",["UWA/Promise","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/DocumentManagement/DocumentManagement"],function(e,t,n){"use strict";return{getDocumentsData:function(o){return new e(function(e,i){n.getDocuments(o,{tenant:t.getTenantValue(),securityContext:decodeURIComponent(t.getSecurityContextValue()),tenantUrl:t.get3DSpaceURL(),additionalURLParams:"$fields=indexedTypeicon",onComplete:function(t){t.success&&Array.isArray(t.data)?e(t):i()},onFailure:function(e){console.log(e),i()}})})},getCommands:function(e,n,o,i,a){var s=this,r=t.get3DSpaceURL(),u=t.getDashboardURL(),l=[i];s.getDocumentsData(l).then(function(i){var c=new n;c.subscribe({event:"docv2-show-notification"},function(e){widget.notify.handler().addNotif({level:e.level,title:e.title,subtitle:e.subtitle,sticky:e.sticky,allowUnsafeHTML:e.allowUnsafeHTML,message:e.message})}),c.subscribe({event:"docv2-undoedit-complete"},function(e){s.getDocumentsData(l).then(function(t){p=t.data[0],c.publish({event:"docv2-preview-reload-toolbar",data:{nodeModel:e.nodeModel}})})}),c.subscribe({event:"docv2-edit-complete"},function(e){s.getDocumentsData(l).then(function(t){p=t.data[0],c.publish({event:"docv2-preview-reload-toolbar",data:{nodeModel:e.nodeModel}})})}),c.subscribe({event:"docv2-update-complete"},function(e){s.getDocumentsData(l).then(function(t){p=t.data[0],c.publish({event:"docv2-preview-reload-toolbar",data:{nodeModel:e.nodeModel}}),c.publish({event:"docv2-preview-reload-viewer",data:{nodeModel:e.nodeModel}})})});var p=i.data[0],d={fetchSecurityContext:function(){return decodeURIComponent(t.getSecurityContextValue())},getSelectedNodes:function(){return[p]},getDocumentFromNodeModel:function(e){return e},platformUrls:{"3DSpace":r,"3DDashboard":u,platformId:t.getTenantValue()},events:c},m=new o(d),A=m.commands,f={entries:[A[e.DOWNLOAD]]};"Document"==p.type&&f.entries.push(A[e.COPY_LINK]),m.getWebUXContextMenuItemsForCurrentSelection(f.entries,!1).then(e=>{a(e)})})}}}),define("DS/RouteWebAppUX/RouteTracker/RouteEventBuilder",["DS/Usage/TrackerAPI","DS/RouteWebAppUX/RouteTracker/RouteDimensionBuilder","DS/RouteWebAppUX/RouteTracker/RouteValueBuilder"],function(e,t,n){"use strict";function o(e){this.category=e.category,this.action=e.action,this.tenant=e.tenant,this.scope="Dashboard",this.dimensionsBuilder=t.create(),this.valuesBuilder=n.create()}return o.prototype.setLabel=function(e){return this.label=e,this},o.prototype.setAppId=function(e){return"string"==typeof e&&(this.appId=e),this},o.prototype.setTenant=function(e){return"string"==typeof e&&(this.tenant=e),this},o.prototype.addDimension=function(e,t){return this.dimensionsBuilder.add(e,t),this},o.prototype.getDimensions=function(){return this.dimensionsBuilder.build()},o.prototype.getValues=function(){return this.valuesBuilder.build()},o.prototype.addPersonalValue=function(e,t){return this.valuesBuilder.add(e,t),this},o.prototype.send=function(){const t=this.dimensionsBuilder.build(),n=this.valuesBuilder.build();e.trackPageEvent({eventCategory:this.category,eventAction:this.action,eventLabel:this.label,scope:this.scope,persDim:t,appID:this.appId,persVal:n}),console.log("Cloud Probes for "+this.label+" scenario. Personal Dimensions = "+JSON.stringify(t)+" Personal Values = "+JSON.stringify(n))},{create:function(e){return new o(e)}}}),define("DS/RouteWebAppUX/Views/Form/RouteWebAppTaskViewUtil",["i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","DS/ENXESignature/Views/Dialogs/ESignatureAuthDialog","DS/Windows/ImmersiveFrame","DS/RouteWebAppUX/Model/RouteWebAppTaskAttachmentModel","DS/RouteWebAppUX/Controller/RouteWebAppCollabTaskServicesController","DS/DocumentManagement/DocumentManagement","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/RouteLinkWidget","DS/RouteWebAppUX/Controller/RouteWebAppESignServicesController"],function(e,t,n,o,i,a,s,r,u){"use strict";let l,c=function(t,n,o,a,s){var r=[];let u=[],l=[],c=[];var f=o.autoCompleteComponent;null!=f&&null!=f.selectedItems&&0!=f.selectedItems.length&&f.selectedItems.forEach(function(e){if(e.options.grid&&"upload"==e.options.grid.action)r.push(e.options.value);else{let t={};t.id=e.options.value,t.updateAction="CONNECT",u.push(t),l.push(e.options.value)}}),d(t,u,c),m(r,t.model.id).then(o=>{var r=o;null!=o&&0!=o.length&&o.forEach(function(e){let t={};t.id=e.data[0].id,t.updateAction="CONNECT",u.push(t)}),"saveForLater"==t.model.taskActionButton?p(t,n,u,a,s,r):i.updateTaskAttachment(t,u).then(e=>{p(t,n,u,a,s,r,l,c)},t=>{widget.routeWebAppMediator.publish("approval-dialog-button-enable");var n=e.failAttachment;null!=r&&A(r),t.error?widget.routeWebAppNotify.handler().addNotif({level:"error",title:n,message:t.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:n,sticky:!1})})},t=>{widget.routeWebAppMediator.publish("approval-dialog-button-enable");var n=e.failUpload;t&&t.result&&A(t.result),t.error?widget.routeWebAppNotify.handler().addNotif({level:"error",title:n,message:t.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:n,sticky:!1})})},p=function(e,t,n,o,a,s,l,c){i.updateComment(e,t,n).then(n=>{if(null!=e.model.eSignRecordId){let n=e.model.eSignRecordId;u.updateEsignRecordInformation(e,n).then(n=>{let i={level:"success",subtitle:o,sticky:!1};if(widget.routeWebAppMediator.publish("approval-dialog-close"),widget.routeWebAppMediator.publish("approval-dialog-show-message",{message:i}),"saveForLater"!=e.model.taskActionButton){e.routeId=t.id,widget.routeWebAppMediator.publish("task-action-on-save",e),r.getWidgetLinkInstance()&&r.checkIfLinked()&&r.refreshContent(e)}},e=>{console.log("Failed to update esign"+e)})}else{let n={level:"success",subtitle:o,sticky:!1};if(widget.routeWebAppMediator.publish("approval-dialog-close"),widget.routeWebAppMediator.publish("approval-dialog-show-message",{message:n}),"saveForLater"!=e.model.taskActionButton){e.routeId=t.id,widget.routeWebAppMediator.publish("task-action-on-save",e),r.getWidgetLinkInstance()&&r.checkIfLinked()&&r.refreshContent(e)}}},t=>{null!=s&&A(s),null!=l&&f(l,e.model.id),null!=c&&c.length>0&&i.updateTaskAttachment(e,c),widget.routeWebAppMediator.publish("approval-dialog-button-enable"),t.error?widget.routeWebAppNotify.handler().addNotif({level:"error",title:a,subtitle:t.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:a,sticky:!1})})},d=function(e,t,n){if(e.model.taskAttachments){let i=o.getContentIDs(),a=[];for(let t=0;t<e.model.taskAttachments.length;t++)a.push(e.model.taskAttachments[t].id);for(let e=0;e<a.length;e++)if(!i.includes(a[e])){let o={},i={};o.id=a[e],o.updateAction="DISCONNECT",t.push(o),(i=JSON.parse(JSON.stringify(o))).updateAction="CONNECT",n.push(i)}}},m=function(e,t){var n=[],o=0;return new Promise(function(t,i){0==e.length&&t();for(var r=0;r<e.length;r++){var u={onFailure:function(e){e.result=n,i(e)},onComplete:function(e){o++,n.push(e),r==o&&t(n)}};u.tenant=s.getTenantValue(),u.securityContext=s.getSecurityContextValue(),u.tenantUrl=s.get3DSpaceURL();var l={fileName:e[r].name,fileInfo:{file:e[r]}};a.createDocument(l,u)}})},A=function(e){var t=0;return new Promise(function(n,o){0==e.length&&n();for(var i=0;i<e.length;i++){var r={onFailure:function(e){o()},onComplete:function(e){i==++t&&n()}};r.tenant=s.getTenantValue(),r.securityContext=s.getSecurityContextValue(),r.tenantUrl=s.get3DSpaceURL(),a.deleteDocument(e[i].data[0].id,r)}})},f=function(e,t){var n=0;return new Promise(function(o,i){0==e.length&&o();for(var r=0;r<e.length;r++){var u={onFailure:function(e){i()},onComplete:function(e){r==++n&&o()}};u.relInfo={parentId:t,parentRelName:"Reference Document",parentDirection:"from"},u.tenant=s.getTenantValue(),u.securityContext=s.getSecurityContextValue(),u.tenantUrl=s.get3DSpaceURL(),a.disconnectDocumentFromParent(e[r],u)}})};return l={taskActionUpdate:(n,o)=>(function(n,o){var i={model:{}};i.model.id=n.taskId,i.model.comments=CKEDITOR.instances.ckeditorApprovalDialog.getData(),i.model.taskActionButton=n.taskAction,i.model.needsOwnerReview=n.needsOwnerReview,i.model.taskAttachments=n.taskAttachments,i.model.revision=n.revision,"Review"==n.state&&(i.model.state=n.state,i.model.reviewersComments=n.taskComment.value,i.model.taskReviewButton=n.taskAction);var a=e.taskSave,r=e.taskSaveError;if("saveForLater"!=n.taskAction&&"Review"!=n.state?"Yes"==i.model.needsOwnerReview?(a=e.taskSentForReview,r=e.taskSentForReviewError):(a=e.taskCompleted,r=e.taskCompletedError):"saveForLater"!=n.taskAction&&"Review"==n.state&&(a=e.successReviewTaskPromote,r=e.failReviewTask,"Reject"==n.taskAction&&(a=e.successReviewTaskDemote)),"Approve"!=n.taskAction&&"Reject"!=n.taskAction&&"Abstain"!=n.taskAction||"True"!=o.requiresEsign)c(i,o,n,a,r);else{var u,l;l=s.getTenantValue();var p=n.taskAssigneeUserName,d=i.model.taskActionButton;"Reject"==d&&(d="Disapprove"),u={eSignPolicyReference:"ESignConfigRoute",Username:p,x3dPlatformId:l,ObjectActionType:d};var m="",A=t.init(u);A.subscribe("ESign-Dialog-Close",function(){widget.routeWebAppMediator.publish("approval-dialog-button-enable")}),A.subscribe("ESign-Authenticated",function(e){m=e.ESignRecordId,i.model.eSignRecordId=m,c(i,o,n,a,r)})}})(n,o)}}),define("DS/RouteWebAppUX/Services/RouteWebAppApprovalStatusService",["UWA/Core","UWA/Class/Promise","DS/RouteWebAppUX/RouteWebAppBootstrap"],function(e,t,n){"use strict";const o=function(e){return new t(function(t,o){null!=e&&null!=e.data&&0!=e.data.length||t();let i=n.getRouteServiceBaseURL()+"/contentsApprovalStatus",a={method:"POST",headers:{"Content-Type":"application/json"}};a.data=JSON.stringify(e),a.onComplete=function(e){let n=JSON.parse(e);t(n)},a.onFailure=function(e,t,n){o()},n.authenticatedRequest(i,a)})};return{fetchApprovalStatusForContent:e=>(function(e){return new t(function(t,o){null==e&&t(),n.getCSRFToken().then(function(n){e.csrf=JSON.parse(n).csrf,t()})}).then(function(){return o(e)})})(e),fetchRouteContentIds:e=>(function(e){return new t(function(t,o){let i=n.getRouteServiceBaseURL()+"/"+e+"/contents?include=none&$fields=none",a={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){let n=JSON.parse(e);t(n)},onFailure:function(e){o(e)}};n.authenticatedRequest(i,a)})})(e)}}),define("DS/RouteWebAppUX/Controller/RouteWebAppApprovalStatusServiceController",["DS/RouteWebAppUX/Services/RouteWebAppApprovalStatusService","UWA/Promise"],function(e,t){"use strict";let n;return n={fetchApprovalStatusForContent:function(n){return new t(function(t,o){e.fetchApprovalStatusForContent(n).then(e=>{t(e)},e=>{o(e)})})},fetchRouteContentIds:function(n){return new t(function(t,o){e.fetchRouteContentIds(n).then(e=>{t(e)},e=>{o(e)})})}}}),define("DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenu",["DS/Menu/Menu","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenuItems","DS/RouteWebAppUX/Utilities/RouteWebAppDocumentUtils","DS/RouteWebAppUX/Utilities/CopyLinkContentAppId","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t,n,o,i,a){"use strict";let s,r,u,l,c=[],p=function(t,a,s,c,p,d,m){s.preventDefault(),s.stopPropagation();let A=s.target.getBoundingClientRect(),f={position:{x:A.left,y:A.top+20}},g=[],b=[],R=["Remove","Download","Preview"];g.push(t[0].options.grid),1===t.length?n.getOpenWithMenu(a).then(function(a){b=b.concat(a);var s=g[0].Type;"true"==i.isCopyLink(s)&&(b=b.concat(n.getCopyLink(t))),r?function(e,t,n,i,a){var s=[];r&&(widget.routeWebAppNotify.handler(),o.getCommands(u,l,r,t,function(t){-1!==e.indexOf("Download")&&(s=t),i(s)},a))}(R,c,0,function(t){b=b.concat(t),p||(b=b.concat(n.deleteMenuForAttachments(g,d))),e.show(b,f)},m):(p||(b=b.concat(n.deleteMenuForAttachments(g,d))),e.show(b,f))}):(p||(b=b.concat(n.deleteMenuForAttachments(g,d))),e.show(b,f))};return s={isDocumentManagementInstalled:()=>{require(["DS/DocumentCommands/DocumentCommandsV2","DS/DocumentCommands/TypeDerivativesCache","DS/DocumentCommands/Constants","DS/CoreEvents/ModelEvents"],function(e,n,o,i){r=e;let a=["Document"];u=o,l=i,n.getTypeDerivatives(a,function(e){c=e[a[0]]},t.get3DSpaceURL())},function(e){widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:a.documentManagementNotInstalled,sticky:!1})})},taskAttachmentContextualMenu:(e,t,n,o,i)=>(function(e,t,n,o,i){let a=e.data.event,s=e.cellInfos.nodeModel?e.cellInfos.nodeModel:e.cellInfos.cellModel;if(e&&e.cellInfos&&e.cellInfos.cellModel){let e=t.getTreeDocument().getSelectedNodes(),r=e[0]._options.grid.id;p(e,s,a,r,n,o,i)}})(e,t,n,o,i)}}),define("DS/RouteWebAppUX/RouteTracker/RouteTracker",["DS/RouteWebAppUX/RouteTracker/RouteEventBuilder"],function(e,t){"use strict";return{createEventBuilder:function(t){return e.create(t)},Category:{USAGE:"ROUTE_CLOUD_PROBES_USAGE",PERFORMANCE:"ROUTE_CLOUD_PROBES_PERFORMANCE"},DeviceUsed:{DESKTOP:"Desktop",MOBILE:"Mobile",TAB:"Tab"},Events:{CLICK:"Click"},Availability:{TRUE:"TRUE",FALSE:"FALSE"},Labels:{ROUTEMANAGEMENT_WELCOMEPANEL:"RouteManagement WelcomePanel",ROUTEMANAGEMENT_TASKVIEW:"RouteManagement Task View",ROUTEMANAGEMENT_OBJECTCOUNT:"RouteManagement Object Count",ROUTEMANAGEMENT_ROUTECOMMAND:"RouteManagement Route Command",ROUTEMANAGEMENT_TASKCOMMAND:"RouteManagement Task Command",ROUTEMANAGEMENT_TEMPLATECOMMAND:"RouteManagement Template Command"}}}),define("DS/RouteWebAppUX/RouteTracker/RouteCloudProbeUtils",["DS/RouteWebAppUX/RouteTracker/RouteTracker","DS/RouteWebAppUX/RouteTracker/RouteDimension","DS/RouteWebAppUX/RouteTracker/RouteValue","DS/RouteWebAppUX/RouteWebAppBootstrap"],function(e,t,n,o){"use strict";let i,a,s=function(e){switch(e.event){case"WelcomePanel":r(e);break;case"TaskView":u(e);break;case"RouteCommand":l(e);break;case"TaskCommand":c(e);break;case"TemplateCommand":p(e);break;case"ObjectCount":d(e)}},r=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_WELCOMEPANEL).setAppId(a).addDimension(t.ROUTEMANAGEMENT_WELCOMEPANEL.ROUTEMANAGEMENT_ACTIVITY,n.value).send()},u=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_TASKVIEW).setAppId(a).addDimension(t.ROUTEMANAGEMENT_TASKVIEW.ROUTEMANAGEMENT_INITIALTASKVIEW,n.initialValue).addDimension(t.ROUTEMANAGEMENT_TASKVIEW.ROUTEMANAGEMENT_TASKVIEWSWITCH,n.switchValue).send()},l=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_ROUTECOMMAND).setAppId(a).addDimension(t.ROUTEMANAGEMENT_ROUTE.ROUTEMANAGEMENT_ROUTECOMMAND,n.value).send()},c=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_TASKCOMMAND).setAppId(a).addDimension(t.ROUTEMANAGEMENT_TASK.ROUTEMANAGEMENT_TASKCOMMAND,n.value).send()},p=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_TEMPLATECOMMAND).setAppId(a).addDimension(t.ROUTEMANAGEMENT_TEMPLATE.ROUTEMANAGEMENT_TEMPLATECOMMAND,n.value).send()},d=function(o){let s;"routes"==o.objectType?s="Route":"route_templates"==o.objectType&&(s="Template"),e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_OBJECTCOUNT).setAppId(a).addDimension(t.ROUTEMANAGEMENT_SUMMARY.ROUTEMANAGEMENT_OBJECTTYPE,s).addPersonalValue(n.ROUTEMANAGEMENT_SUMMARY.ROUTEMANAGEMENT_OBJECTCOUNT,o.value).send()};return{sendRouteTrackerEvent:e=>(function(e){try{i=o.getTenantValue(),a=widget.getValue("appId"),s(e)}catch(e){}})(e)}}),define("DS/RouteWebAppUX/Views/Grid/RouteWebAppTaskAttachmentsDataGridView",["DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenu","DS/RouteWebAppUX/Model/RouteWebAppTaskAttachmentModel","DS/DataGridView/DataGridViewLayout","DS/DataGridView/DataGridView","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t,n,o,i){"use strict";let a,s,r={},u=function(){t.deleteSelectedRows(),l()},l=function(){var e=document.querySelector("#approvalDialogTaskAttachments-dataGridViewContainer");!e&&s&&(e=s);let t=a.getRowModelLength();s&&(t<5?s.setStyle("height",41*t+"px"):s.setStyle("height","200px"))},c=function(t,i,s){return r={treeDocument:t,columns:i,layout:new n({rowsHeader:!1,columnsHeader:!1,rowSpacing:5,cellWidth:2}),defaultColumnDef:{widthd:"auto",typeRepresentation:"string"},virtuallyLoadAllModelItems:!0,cellDragEnabledFlag:!1,showRowBorderFlag:!0,showOutlineFlag:!0,showAlternateBackgroundFlag:!1,showContextualMenuColumnFlag:!0,onContextualEvent:function(t){t&&t.cellInfos&&e.taskAttachmentContextualMenu(t,t.cellInfos.nodeModel,!1,u,function(e){console.log("asd")})}},(a=new o(r)).layout.cellHeight=35,a.rowSelection="multiple",a.cellSelection="none",a.getContent().style.top="50 px",a.inject(s),s};return{build:e=>(function(e){s=UWA.createElement("div",{id:"approvalDialogTaskAttachments-dataGridViewContainer",class:"approval-dialog-taskAttachments-gridView-View"});let t=[{text:i.title,dataIndex:"tree"}],n=c(e,t,s);return l(),require(["DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenu"],function(e){e.isDocumentManagementInstalled()}),n})(e)}}),define("DS/RouteWebAppUX/Views/Loader/RouteWebAppInitiateDocumentChooser",["DS/RouteWebAppUX/Utilities/Search/RouteWebAppSearchUtil","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],function(e,t,n,o){"use strict";let i;var a=function(e,n){for(var o=0;o<n.length;o++){var a,s=n[o];s&&(a=new t({label:s["ds6w:label"],value:s.id,name:s["ds6w:identifier"],type:s["ds6w:type"]}),null==i.selectedItems?i.selectedItems=a:i.selectedItems.push(a),i._applySelectedItems())}};return{init:(t,n,o)=>(function(t,n,o){i=n;var s=[];null!=o&&(s=JSON.parse(JSON.stringify(o))),null!=i&&null!=i.selectedItems&&0!=i.selectedItems.length&&i.selectedItems.forEach(function(e){null==e.options.value.name&&s.push(e.options.value)});var r=t.dsModel,u=UWA.Utils.getUUID();require(["DS/SNInfraUX/SearchCom"],function(t){var n=t.createSocket({socket_id:u}),o=e.getRefinementToSnN(u,"addExistingAttachment",!0,["Document"]);if(o.precond=e.getPrecondForDocumentSearch(),o.resourceid_not_in=s,!UWA.is(n))throw new Error("Socket not initialized");n.dispatchEvent("RegisterContext",o),n.addListener("Selected_Objects_search",a.bind(r,"")),n.dispatchEvent("InContextSearch",o)})})(t,n,o)}}),define("DS/RouteWebAppUX/Views/Form/RouteTaskAttachments",["DS/WUXAutoComplete/AutoComplete","DS/UIKIT/Input/File","DS/TreeModel/TreeNodeModel","DS/RouteWebAppUX/Views/Loader/RouteWebAppInitiateDocumentChooser","DS/RouteWebAppUX/Services/RouteWebAppRouteTaskServices","DS/RouteWebAppUX/Model/RouteWebAppTaskAttachmentModel","DS/RouteWebAppUX/Views/Grid/RouteWebAppTaskAttachmentsDataGridView","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],function(e,t,n,o,i,a,s,r){"use strict";let u=function(e){return new t({input:!1,multiple:!0,buttonText:"",buttonClassName:"fonticon fonticon-upload",events:{onChange:function(t){for(var o=0;o<t.target.files.length;o++){var i=new n({label:t.target.files[o].name,value:t.target.files[o],grid:{action:"upload"}});i.options.value.options="",null==e.selectedItems?e.selectedItems=i:e.selectedItems.push(i),e._applySelectedItems()}}}})},l=function(e){var t=UWA.createElement("div",{class:"fonticon fonticon-plus",id:"attachmentSearch",title:r.addExistingAttachment});return t.addEventListener("click",function(t){o.init(t,e.autoCompleteComponent,a.getContentIDs())}),t};return{drawListOfAttachments:(e,t)=>(function(e,t){var n=new UWA.Element("div",{id:"approvalDialogTaskAttachmentsId",class:""});if(e&&e.length>0){a.destroy(),a.createModel(e),a.getModel().RouteId=t.id;let o=a.getModel();s.build(o).inject(n)}return n})(e,t),renderAttachmentField:e=>(function(e){var t=new UWA.Element("div",{class:"attachmentField"});new UWA.Element("h5",{class:"attachmentHeader",text:r.attachments}).inject(t);var n=new UWA.Element("div",{class:"attachmentButton"}),o=u(e.autoCompleteComponent);o.elements.input.title=r.upload,o.inject(n),l(e).inject(n),n.inject(t),t.inject(e.formFields)})(e),getAutoComponent:t=>(function(t){return new e({multiSearchMode:!0,elementsTree:function(e){return new Promise(function(n,o){var s=a.getContentIDs();null!=t.autoCompleteComponent&&null!=t.autoCompleteComponent.selectedItems&&0!=t.autoCompleteComponent.selectedItems.length&&t.autoCompleteComponent.selectedItems.forEach(function(e){null==e.options.value.name&&s.push(e.options.value)});var r={with_indexing_date:!0,with_nls:!1,label:"yus-1515078503005",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:responsible","ds6wg:fullname"],select_file:["icon","thumbnail_2d"],query:"("+e+' AND NOT (flattenedtaxonomies:"types/Person" OR flattenedtaxonomies:"types/Business Role" OR flattenedtaxonomies:"types/Security Context" OR flattenedtaxonomies:"types/Route" OR flattenedtaxonomies:"types/Route Template" OR flattenedtaxonomies:"types/Inbox Task"))',order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:"OnPremise",resourceid_not_in:s};r=JSON.stringify(r);var u={isfederated:!0};i.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",r,function(e){var t=[];e&&e.results&&Array.isArray(e.results)&&e.results.forEach(function(e){var n={};e.attributes.forEach(function(e){"ds6w:what/ds6w:type"===e.name&&(n.type=e.value),"resourceid"===e.name&&(n.value=e.value),"ds6w:label"===e.name&&(n.label=e.value),"ds6w:identifier"===e.name&&(n.name=e.value)}),n.data=n,t.push(n)}),n(t)},function(e){o(e)},u)})},placeholder:r.typeToSearch,minLengthBeforeSearch:3,allowFreeInputFlag:!1})})(t)}}),define("DS/RouteWebAppUX/Views/Dialog/TaskApprovalDialog",["DS/Windows/Dialog","DS/Controls/Editor","DS/Controls/Button","DS/Windows/ImmersiveFrame","DS/RouteWebAppUX/Controller/RouteWebAppCollabTaskServicesController","DS/RouteWebAppUX/Views/Form/RouteTaskAttachments","DS/RouteWebAppUX/Views/Form/RouteWebAppTaskViewUtil","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t,n,o,i,a,s,r){"use strict";let u,l=function(t,i,u){let l,p=new UWA.Element("div",{id:"TaskApprovalDialog",class:""});!function(){let e=new UWA.Element("h5",{class:"required",text:r.comments}).inject(p);UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(e),"Review"==t.state?t.taskComment=t.taskReviewComment:t.taskComment=t.taskApproveComment;t.taskCommentEditor=new UWA.Element("textarea",{name:"ckeditorApprovalDialog"}),require(["DS/CKEditor/CKEditor"],function(e){var n=e.inline("ckeditorApprovalDialog",{floatSpaceDockedOffsetX:175,floatSpaceDockedOffsetY:0});e.config.toolbarGroups=[{name:"links"}],e.config.removeButtons="Cut,Copy,Paste,Undo,Redo,Anchor,Underline,Strike,Subscript,Superscript",e.config.removeDialogTabs="link:advanced;link:target",e.config.removePlugins="image,forms,elementspath,magicline",e.config.enterMode=e.ENTER_BR,e.config.baseFloatZIndex=5e4,e.config.uiColor="#ffffff",e.config.title="",CKEDITOR.on("instanceReady",function(e){CKEDITOR.instances.ckeditorApprovalDialog.setData(t.taskComment)}),n.on("contentDom",function(){var t=n.editable();t.attachListener(t,"click",function(t){var n=new e.dom.elementPath(t.data.getTarget(),this).contains("a");n&&2!=t.data.$.button&&window.open(n.getAttribute("href"))})}),CKEDITOR.instances.ckeditorApprovalDialog.on("change",function(e){var t=CKEDITOR.instances.ckeditorApprovalDialog.getData().replace(/<br\s*[\/]?>/gi," ").replace(/[\n\r]/g," ").replace(/&nbsp;/g," ").replace(/\s+/g," "),n=CKEDITOR.instances.ckeditorApprovalDialog.editable().getText();""!=t.trim()&&""!=n.trim()?(l.buttons.Ok.disabled=!1,l.buttons.Apply.disabled=!1):(l.buttons.Ok.disabled=!0,l.buttons.Apply.disabled=!0)}),CKEDITOR.on("dialogDefinition",function(e){var t=e.data.name,n=e.data.definition;if("link"==t){var o=n.getContents("info");o.get("linkType").items.splice(1,3)}})}),t.taskCommentEditor.inject(p);let n=t.taskComment._myInput;null!=n&&(n.style.width="100%",n.style.resize="both",n.style.overflow="auto")}(),t.formFields=new UWA.Element("div",{id:"taskAttachmentContainer",class:"task-attachment-container"}),t.formFields.inject(p),t.autoCompleteComponent=a.getAutoComponent(t),a.renderAttachmentField(t),t.autoCompleteComponent.inject(t.formFields),new UWA.Element("div",{html:"&nbsp;"}).inject(t.formFields),c(t,i);let d=!0;t.taskComment.value&&""!=t.taskComment.value&&(d=!1);let m=u,A=r[m],f=r[m+"Progressing"],g=t.taskAttachments.length,b=g<4?249+41*g:380,R=new o;function v(){l.buttons.Ok.disabled=!0,l.buttons.Apply.disabled=!0}R.inject(document.body),l=new e({modalFlag:!0,width:432,height:b,title:A+" - "+t.taskTitle,content:p,immersiveFrame:R,resizableFlag:!0,buttons:{Ok:new n({label:A,disabled:d,onClick:function(e){e.dsModel.label=f,v(),t.taskAction=u,s.taskActionUpdate(t,i),widget.routeWebAppMediator.subscribe("approval-dialog-close",function(){e.dsModel.dialog.close()})}}),Apply:new n({label:r.save,disabled:d,onClick:function(e){e.dsModel.label=r.SaveProgressing,v(),t.taskAction="saveForLater",s.taskActionUpdate(t,i),widget.routeWebAppMediator.subscribe("approval-dialog-close",function(){e.dsModel.dialog.close()})}}),Cancel:new n({label:r.cancel,onClick:function(e){e.dsModel.dialog.close()}})}}),widget.routeWebAppMediator.subscribe("approval-dialog-button-enable",function(){l.buttons.Ok.disabled=!1,l.buttons.Apply.disabled=!1,l.buttons.Ok.label=A,l.buttons.Apply.label=r.save}),l.addEventListener("close",function(){widget.routeWebAppMediator.publish("approval-commands-buttons-enable")})},c=function(e,t){if(e.taskAttachments&&e.taskAttachments.length>0){a.drawListOfAttachments(e.taskAttachments,t).inject(e.formFields)}},p=function(e,t){return"Assigned"==e||"Assign"==e?["Approve","Reject","Abstain","Comment"].includes(t):"Review"==e&&["Accept","Reject"].includes(t)};return u={init:e=>(function(e){let t=e.routeId,n=e.taskId,o=e.action,a=r.taskIdIncorrect;if(e.securityContext&&e.tenant&&(widget.data.routeCredentials={securityContext:e.securityContext,tenant:e.tenant}),!t||!n||""==t||""==n)return widget.routeWebAppMediator.publish("approval-commands-buttons-enable"),void widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:a,sticky:!1});i.fetchRouteTask(n).then(e=>{var i=e.data[0];if(!p(i.dataelements.state,o))return widget.routeWebAppMediator.publish("approval-commands-buttons-enable"),void widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:r.actionNotAllowed,sticky:!1});let a={},s={};a.taskId=n,a.taskTitle=i.dataelements.title,a.taskApproveComment=i.dataelements.routeTaskApprovalComments,a.taskReviewComment=i.dataelements.routeTaskReviewerComments,a.needsOwnerReview=i.dataelements.needsReview,a.taskAssigneeUserName=i.relateddata.assignees[0].dataelements.name,a.state=i.dataelements.state,a.taskAttachments=i.relateddata.references,s.id=t,s.requiresEsign=i.dataelements.routeTaskRequiresESign,a.revision=i.dataelements.revision,l(a,s,o)},e=>{widget.routeWebAppMediator.publish("approval-commands-buttons-enable"),e.error?widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:a,sticky:!1})})})(e)}}),define("DS/RouteWebAppUX/Views/Menu/RouteTaskActionsCtxMenu",["DS/Menu/Menu","DS/RouteWebAppUX/Views/Dialog/TaskApprovalDialog","DS/RouteWebAppUX/Commands/RouteApprovalProcess","DS/RouteWebAppUX/Commands/ApprovalMaturityCmd","DS/RouteWebAppUX/Utilities/RouteLinkWidget","DS/RouteWebAppUX/Utilities/CompassDataExchange","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],function(e,t,n,o,i,a,s){"use strict";const r={Approve:{icon:"thumbs-up",title:s.approve,color:"#57b847",className:"RActionApprove"},Reject:{icon:"thumbs-down",title:s.reject,color:"#ea4f37",className:"RActionReject"},Abstain:{icon:"ignore",title:s.abstain},Comment:{icon:"comment",title:s.comment},Accept:{icon:"check",title:s.accept,color:"#57b847",className:"RActionAccept"}},u=function(e,t){return new Promise(function(n,o){let a=[];if(t&&null!=e.model&&null!=e.model.route&&0!=e.model.route.length)if(-1!==t.indexOf("Approve")?(a.push(l("Approve",e)),a.push(l("Reject",e)),1==e.model.showAbstain&&a.push(l("Abstain",e))):-1!==t.indexOf("Comment")?a.push(l("Comment",e)):-1!==t.indexOf("Review")&&(a.push(l("Accept",e)),a.push(l("Reject",e))),"idcard-ctxCommand"==e.model.fromPage&&a.push(p(e)),i.getWidgetLinkInstance()&&i.checkIfLinked())a.push(d(e)),n(a);else{m(e.model).then(e=>{a.push(c(e)),n(a)},e=>{n(a)})}else n(a)})},l=function(e,n){let o="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+r[e].icon;return r[e].color&&(o+=" "+r[e].className),{name:r[e].title,title:r[e].title,type:"PushItem",fonticon:{content:o},data:null,action:{callback:function(){n.model.action=e,t.init(n.model)}}}},c=function(e){return{name:e.title,title:e.title,type:e.type,fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+e.icon},data:null,action:{callback:function(){e.action.callback()}}}},p=function(e){return{name:s.maturity,title:s.maturity,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collaborative-lifecycle-management"},data:null,action:{callback:function(){o.lifeCycle(e)}}}},d=function(e){return{name:s.approvalProcess,title:s.approvalProcess,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-route"},data:null,action:{callback:function(){let t=a.getContentToLink(e.model);i.loadContent(t)}}}},m=function(e){return n.getOpenWithMenu(e)};return{renderApprovalsActionMenu:(t,n)=>(function(t,n){if(!n)return"";return UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-chevron-down ",title:s.idCardCtxMenuTooltip,styles:{"font-size":"18px"},events:{click:function(o){let i=o.target.getBoundingClientRect(),a={position:{x:i.left,y:i.top+20}};t.model.fromPage="idcard-ctxCommand",u(t,n).then(t=>{e.show(t,a)})}}})})(t,n),getApprovalActionsMenu:(e,t)=>u(e,t),getApprovalCommandMenu:e=>m(e)}}),define("DS/RouteWebAppUX/Views/RouteActivityState",["DS/RouteWebAppUX/Utilities/RouteWebAppRouteViewUtils","DS/RouteWebAppUX/Views/Menu/RouteTaskActionsCtxMenu","DS/RouteWebAppUX/Utilities/RouteLinkWidget","DS/RouteWebAppUX/Utilities/CompassDataExchange","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],function(e,t,n,o,i){"use strict";const a=function(e){if(e.model.fromPage="hyperlink",n.getWidgetLinkInstance()&&n.checkIfLinked()){let t=o.getContentToLink(e.model);n.loadContent(t)}else{t.getApprovalCommandMenu(e.model).then(e=>{e.action.callback()},e=>{})}};return{renderActivityState:t=>(function(t){let n;if(t.model.state&&"In Process"==t.model.state){n=UWA.createElement("div",{class:"activity-state-container"});let o=e.getRouteActivityStateIcon(t.model.Activity_State),i=e.getRouteActivityStateNLS(t.model.Activity_State),s="";"thumbs-up"==o||"comment"==o||"notification-read"==o?s="#008000":"thumbs-down"==o||"stop"==o?s="#ff0000":("ignore"==o||"play-flash-off"==o||"hourglass"==o&&!i.contains("your"))&&(s="#77797c");let r=UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+o,styles:{color:s}}).inject(n);if(t.model.Activity_State&&t.model.Activity_State.contains("your")){let e;if(t.model.Activity_State.contains("(")){const t=i.split("(");i=t[0],e="("+t[1]}r.addClassName("awaiting-tasks"),UWA.createElement("a",{class:"rt-activity-state",html:"&nbsp;"+i,title:i,events:{click:function(e){a(t)}},styles:{cursor:"pointer"}}).inject(n),e&&UWA.createElement("a",{class:"rt-activity-state-counter",html:"&nbsp;"+e+"&nbsp;",title:i,events:{click:function(e){a(t)}},styles:{cursor:"pointer"}}).inject(n)}else UWA.createElement("span",{class:"rt-activity-state",html:"&nbsp;"+i+"&nbsp;",title:i,styles:{color:"#77797c"}}).inject(n)}return n})(t),getRouteActivityState:(t,n)=>(function(t,n){let o=e.getRouteActivityStateNLS(t),i={icon:e.getRouteActivityStateIcon(t),label:o,tooltip:n.model.contentInfoExpression};return t&&t.contains("your")?(i.func=function(e){a(n)},i.icon+=" awaiting-tasks"):i.func=void 0,i})(t,n)}}),define("DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX",["DS/RouteWebAppUX/Controller/RouteWebAppApprovalStatusServiceController","DS/RouteWebAppUX/Utilities/RouteWebAppRouteViewUtils","DS/RouteWebAppUX/Views/RouteActivityState","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Views/Menu/RouteTaskActionsCtxMenu","DS/RouteWebAppUX/Utilities/CompassDataExchange","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/PlatformAPI/PlatformAPI","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],function(e,t,n,o,i,a,s,r,u,l){"use strict";return{getName:function(){return l.approvalStatus},getColumnApprovalStatusValue:function(t){return new Promise(function(i,c){t&&t.option&&(widget.data.routeCredentials={securityContext:t.option.securityContext,tenant:t.option.tenant},t.option=void 0),o.init().then(o=>{e.fetchApprovalStatusForContent(t).then(t=>{var o;if(widget.routeWebAppMediator.subscribe("task-action-on-save",function(t){e.fetchRouteContentIds(t.routeId).then(t=>{if(null!=t){for(var n=[],o=0;o<t.data.length;o++){var i={};i.id=t.data[o].id,n.push(i)}var c={data:n}}e.fetchApprovalStatusForContent(c).then(e=>{var t;if(null!=e){t={};for(var n=0;n<e.data.length;n++){var o=a.createModel(e.data[n]),i=e.data[n].id;t[i]={},t[i].approvalStatus=o.model.Activity_State,t[i].approvalStatusModel=o,t[i].maturity=o.model.current,t[i].maturity_NLS=o.model.current_NLS}}u.publish("updateRouteContent-"+widget.id,t)},e=>{r.setNotificationManager(s),s.addNotif({level:"error",subtitle:l.errorMessage,sticky:!1})})},e=>{r.setNotificationManager(s),s.addNotif({level:"error",subtitle:l.errorMessage,sticky:!1})})}),widget.routeWebAppMediator.subscribe("approval-dialog-show-message",function(e){widget.routeWebAppNotify.handler().addNotif(e.message)}),null!=t){o={};for(var c=0;c<t.data.length;c++){var p=a.createModel(t.data[c]),d=t.data[c].id;o[d]={},o[d].approvalStatus=n.getRouteActivityState(p.model.Activity_State,p),o[d].approvalStatusModel=p}}i(o)},e=>{r.setNotificationManager(s),s.addNotif({level:"error",subtitle:l.errorMessage,sticky:!1}),i()})})})},compareApprovalStatus:function(e,t){let n,o;return n=e&&e.label?e.label.trim():"",o=t&&t.label?t.label.trim():"",n.localeCompare(o)},getColumnApprovalStatusMenu:function(e){e.model.fromPage="summarypage-ctxCommand";var t=a.getActionsBasedOnApprovalStatus(e.model.approvalAction);return i.getApprovalActionsMenu(e,t)},getApprovalStatusValue:function(e){for(const[t]of Object.entries(e))e[t].approvalStatus=n.getRouteActivityState(e[t].approvalStatus,e[t].approvalStatusModel);return e}}}),define("DS/RouteWebAppUX/Views/RouteTaskActionsCmd",["DS/RouteWebAppUX/Utilities/RouteWebAppRouteViewUtils","DS/RouteWebAppUX/Views/Dialog/TaskApprovalDialog","DS/Controls/Button","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],function(e,t,n,o){"use strict";return{renderTaskActionCommands:i=>(function(i){if(i.model.state&&"In Process"==i.model.state){let a=i.model.approvalAction,s=!0,r=UWA.createElement("div",{class:"approval-action-container"}),u=e.getApprovalActionIcon(a);for(const e of u){let u=new n({displayStyle:"normal",domId:"RApprovalAction",emphasize:e.emphasize,icon:{iconName:e.icon,fontIconFamily:WUXManagedFontIcons.Font3DS}});u.inject(r),u.getContent().addEventListener("buttonclick",function(){u.disabled=!0,i.model.action=e.action,t.init(i.model)}),widget.routeWebAppMediator.subscribe("approval-commands-buttons-enable",function(){u.disabled=!1,s=!0}),"Comment"==a&&UWA.createElement("a",{class:"approval-action-text",html:o.comment,events:{click:function(n){1==s&&(s=!1,i.model.action=e.action,t.init(i.model))}}}).inject(r)}return r}})(i)}}),define("DS/RouteWebAppUX/RouteApprovalsIDCardUX",["DS/RouteWebAppUX/Views/RouteActivityState","DS/RouteWebAppUX/Views/Menu/RouteTaskActionsCtxMenu","DS/RouteWebAppUX/Views/RouteTaskActionsCmd","DS/RouteWebAppUX/Controller/RouteWebAppApprovalStatusServiceController","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/CompassDataExchange","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],function(e,t,n,o,i,a,s){"use strict";let r,u,l,c,p=[];const d=function(o,i,s){r=o,u=s,l=i,widget.data.routeCredentials={securityContext:i.securityContext,tenant:i.tenant},m(i).then(i=>{if(null==i)return void("function"==typeof s&&s());if(""===i.model.Activity_State)return void("function"==typeof s&&s());c=UWA.createElement("div",{class:"route-approvals-container"}).inject(o);let r=UWA.createElement("div",{class:"route-approval-status-container"}).inject(c);if(i.model.approvalAction){n.renderTaskActionCommands(i).inject(r)}else{e.renderActivityState(i).inject(r)}let u=a.getActionsBasedOnApprovalStatus(i.model.approvalAction);t.renderApprovalsActionMenu(i,u).inject(c),A()})},m=function(e){let t=[];var n={};n.id=e.id,t.push(n);let i={data:t};return new Promise(function(e,t){o.fetchApprovalStatusForContent(i).then(t=>{let n=a.createModel(t.data[0]);e(n)},t=>{widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:s.errorMessage,sticky:!0}),e()})})};const A=function(){let e=widget.routeWebAppMediator.subscribe("task-action-on-save",function(e){f()});p.push(e),e=widget.routeWebAppMediator.subscribe("maturity-save",function(e){f()}),p.push(e),function(){let e=widget.routeWebAppMediator.subscribe("approval-dialog-show-message",function(e){widget.routeWebAppNotify.handler().addNotif(e.message)});p.push(e)}()},f=function(){g(),d(r,l,u)},g=function(){c.destroy(),p.forEach((e,t)=>{widget.routeWebAppMediator.unsubscribe(e)})};return{init:(e,t,n)=>{i.init().then(o=>{d(e,t,n)})}}});