define("DS/DELPPWViewBehaviors/SearchBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["SearchPlugin","ResourcePlugin","UXComponentsPlugin","WebServicePlugin"],creator:function(t,n,i,o,r,a){var s,l,u,c,d,g,f;return s=function(t,a){var s,f,p,h=r.getComponent("Button"),m=r.getComponent("LineEditor"),I=r.getComponent("Element"),v=e.is(a.title)?a.title:o.getNLSValue("Dialog.InsertInstanceCmd.Title"),b=e.is(a.placeholder)?a.placeholder:o.getNLSValue("Search.InsertInstanceCmd.Placeholder"),y=e.is(a.searchTitle)?a.searchTitle:o.getNLSValue("Search.InsertInstanceCmd.Title"),P=o.getNLSValue("InsertInstanceCmd.INSERT"),C=new I("div",{class:"search-dialog-container"}),D=new I("div",{class:"search-tree-container"}).inject(C);e.is(c)?((f=new m({placeholder:b,autoCommitFlag:!0}).inject(D)).addEventListener("change",function(){f.value.length>0?l.buttons.Ok.disabled=!1:l.buttons.Ok.disabled=!0,e.is(l.buttons.Apply)&&(l.buttons.Apply.disabled=!0)}),"duplicate"===a.command?(P=o.getNLSValue("InsertInstanceCmd.INSERTAsCOPY"),v=o.getNLSValue("Dialog.InsertAsCopyCmd.Title"),p={Cancel:new h({onClick:function(){d()}}),Ok:new h({label:P,visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){g([s],t)}})},f.disabled=!0,f.placeholder=o.getNLSValue("Search.InsertInstanceAsCopyCmd.Placeholder")):p={Cancel:new h({onClick:function(){d()}}),Ok:new h({label:o.getNLSValue("InsertInstanceCmd.SEARCH"),icon:"search",visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){u(),d()}}),Apply:new h({label:P,visibleFlag:!0,disabled:!0,onClick:function(){var e=[];e.id=s,t([e]),d()}})},l=c.create("Dialog",{domId:"search-dialog-container",identifier:"search-dialog-container",title:v,modalFlag:!0,resizableFlag:!0,visibleFlag:!1,closable:!0,content:C,height:100,width:300,buttons:p}),i.subscribeToSelectEvent(function(t){var n,i,o,r,u=t.data;e.is(u)&&Array.isArray(u.paths)&&u.paths.length>0&&u.paths[0].length>0&&(n=u.paths[0][0],e.is(u.attributes)&&(i=u.attributes[n],e.is(i)&&(o=i.type,r=i.label,s="",f.value="",-1!==a.types.indexOf(o)?(s=n,f.value=r,"duplicate"===a.command?l.buttons.Ok.disabled=!1:l.buttons.Apply.disabled=!1):"duplicate"===a.command&&(l.buttons.Ok.disabled=!0))))}),l.close=function(){d()}):n.debug("uxFactoryBehavior is not available."),u=function(){i.activate(y,t,e.is(a.types)?a.types:null,[f.value])}},d=function(){e.is(l)&&(l.destroy(),l=void 0)},g=function(t,i){var r,s,l,u={},c={};l={selectedRefPIDs:t,oneDelmiaAggregationMode:n.getPreferenceValue("oneDelmiaAggregationMode")},r=function(t,i){var r;e.is(i)&&e.is(i.message,"string")?((r=o.getNLSValue(i.message,null,"Error","Title"))==="Error."+i.message+".Title"&&(r=o.getNLSValue(c.replaceType,null,"Error","Title"),n.debug(i.message)),f(u,r,null,c,void 0)):f(u,o.getNLSValue(c.replaceType,null,"Error","Title"),null,c,void 0)},s=function(e){var t;t=e.duplicatedPIDs.map(function(e){return{id:e}}),i(t),n.notify("stopProgress",u)},d(),a.webServiceRequest({url:"dsmfg/private/V0/invoke/duplicateStructure",method:"POST",headers:a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(l),onFailure:r,onTimeout:r,onCancel:r,onComplete:s}),n.notify("startProgress",u)},f=function(t,i,o,r,a){var s=r||{},l=!e.is(s.popupMessage)||s.popupMessage;e.is(o)&&e.is(o.message,"string")&&(i+="\n"+o.message),!0===l?n.warn(i,a):n.log(i,a),n.notify("stopProgress",t),e.is(s.onFailure,"function")&&s.onFailure.call(null,i)},{onStart:function(){c=n.getBehavior("UXFactoryBehavior")},onStop:function(){},activate:function(e,t,n,o){i.activate(e,t,n,o)},showSearchDialoguAndActivate:function(t,n){var i=e.is(n)?n:{};s(t,i),l.show()},onClose:function(){d()}}}}}),define("DS/DELPPWViewBehaviors/ReplaceWhereUsedBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["SelectionPlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin"],creator:function(t,n,i,o,r,a){var s,l,u,c,d={Replace_By_Existing:{label:o.getNLSValue("MIL.ReplaceByExisting"),value:1,tooltip:o.getNLSValue("MIL.ToolTip.ReplaceByExisting"),getLabel:function(){return this.tooltip}},Replace_By_NewRev:{label:o.getNLSValue("MIL.ReplaceByNewRevision"),value:2,tooltip:o.getNLSValue("MIL.ToolTip.ReplaceByNewRev"),getLabel:function(){return this.tooltip}},Replace_By_NewBranch:{label:o.getNLSValue("MIL.ReplaceByNewBranch"),value:3,tooltip:o.getNLSValue("MIL.ToolTip.ReplaceByNewBranch"),getLabel:function(){return this.tooltip}},Remove:{label:o.getNLSValue("MIL.Remove"),value:5,tooltip:o.getNLSValue("MIL.Remove"),getLabel:function(){return this.tooltip}},Ignore:{label:o.getNLSValue("MIL.Ignore"),value:4,tooltip:o.getNLSValue("MIL.Ignore"),getLabel:function(){return this.tooltip}},Add:{label:o.getNLSValue("MIL.Add"),value:6,tooltip:o.getNLSValue("MIL.Add"),getLabel:function(){return this.tooltip}}},g=function(){return e.is(l)||(l=n.getBehavior("WUXNodeModelBehavior")),l},f=function(e){var t=new Map;return e?(t.set(d.Ignore.value,{labelItem:d.Ignore.label,valueItem:d.Ignore.value,tooltipItem:d.Ignore.tooltip}),t.set(d.Add.value,{labelItem:d.Add.label,valueItem:d.Add.value,tooltipItem:d.Add.tooltip})):(t.set(d.Replace_By_Existing.value,{labelItem:d.Replace_By_Existing.label,valueItem:d.Replace_By_Existing.value,tooltipItem:d.Replace_By_Existing.tooltip}),t.set(d.Replace_By_NewRev.value,{labelItem:d.Replace_By_NewRev.label,valueItem:d.Replace_By_NewRev.value,tooltipItem:d.Replace_By_NewRev.tooltip}),t.set(d.Replace_By_NewBranch.value,{labelItem:d.Replace_By_NewBranch.label,valueItem:d.Replace_By_NewBranch.value,tooltipItem:d.Replace_By_NewBranch.tooltip}),t.set(d.Remove.value,{labelItem:d.Remove.label,valueItem:d.Remove.value,tooltipItem:d.Remove.tooltip}),t.set(d.Ignore.value,{labelItem:d.Ignore.label,valueItem:d.Ignore.value,tooltipItem:d.Ignore.tooltip})),t},p=function(e){return{label:e.label,icons:[o.getIconURLFromKey(e.type)],useAsyncPreExpand:!0,referencePID:e.PID,referenceType:e.type,instancePID:e.instancePID,parentReferencePID:e.parentReferencePID,parentInstancePID:e.parentInstancePID,scopedParentPrdRefIDs:"",mfgOccPathArr:[],defaultMILSuggestionValue:e.selectedAction,rwuStatus:"",isLeaf:e.isLeaf,isCreated:e.isCreated,current:e.currentFullName,selectableFlag:!1,grid:{RWU_Action:e.selectedRWUAction,RWU_Status:"","PLMInstance.PLM_ExternalID":e.PLMExternalInstanceID,revision:e.revision,current:e.current,currentFullName:e.currentFullName,RWU_Replace:e.reroutingProposal,RWU_ReplacePID:e.RWUReplacePID,cellInfo:{mbomId:e.PID,action:e.selectedAction,suggestionToPerformEntries:(e.isLeaf,Array.from(e.suggestionsLinkedMap.values())),PreviousProdIconUrl:"",MfgItemIconUrl:o.getIconURLFromKey(e.type),isLeaf:e.isLeaf,RWU_Replace:e.reroutingProposal}}}},h=function(e,t){var n=g();e?4===t.options.grid.RWU_Action.value?(t.options.grid.RWU_Status=o.getNLSValue("MfgItemCreateReportUI.Status.Ignored"),t.options.rwuStatus="ignored"):(t._options.isCreated&&(t.options.grid.RWU_Status=o.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Created"),t.options.rwuStatus="success"),t.options.grid.RWU_Status=o.getNLSValue("MIL.Status.Success"),t.options.rwuStatus="success"):t._options.isCreated?4===t.options.grid.RWU_Action.value?(t.options.grid.RWU_Status=o.getNLSValue("RWU.Status.NotCreated"),t.options.rwuStatus="ignored"):(t.options.grid.RWU_Status=o.getNLSValue("RWU.Message.CreationFailed",{suggestion:t.options.grid.RWU_Action.label,mfg:t.getLabel(),failureMsg:""}),t.options.rwuStatus="fail"):(t.options.grid.RWU_Status=o.getNLSValue("MIL.Message.Failure",{suggestion:t.options.grid.RWU_Action.label,mfg:t.getLabel(),failureMsg:""}),t.options.rwuStatus="fail"),n.updateNode(t._referencePID)},m=function(t,i,a,l){var d,g,f,p,m,I,v,b=function(){h(!0,t),l()},y=function(){h(!1,t),l()},P=[],C=n.getBehavior("ModelBehavior"),D=r.getReferenceModel(t.getReferencePID());switch(e.is(D)&&(D.isProcess()||D.isService()||D.isConstruction()?(e.is(u)||(u=n.getBehavior("MfgItemReplaceBehavior")),I=u,v=n.getBehavior("MfgItemBehavior")):(e.is(c)||(c=n.getBehavior("MfgProcessReplaceBehavior")),I=c,v=n.getBehavior("MfgProcessBehavior"))),d=[[{id:t.options.instancePID,path:[t.options.instancePID]}]],t.options.grid.RWU_Action.value){case 1:e.is(t.options.grid.RWU_ReplacePID)&&""!==t.options.grid.RWU_ReplacePID?I.replace("replaceByExisting",t.options.grid.RWU_ReplacePID,d,!1,b,y):(n.warn(o.getNLSValue("RWU.ReroutingProposalEmpty")),s.buttons.Ok.disabled=!1,y());break;case 2:e.is(i.get(t.options.referencePID))?I.replace("replaceByExisting",i.get(t.options.referencePID),d,!1,b,y):I.replace("replaceByNewRevision",null,d,!1,function(n){var o,r;for(o=0;o<n.instancesAndReferences.length;o++)n.instancesAndReferences[o].get("type")===t.options.referenceType&&(r=n.instancesAndReferences[o].get("PID"));e.is(r)?(i.set(t.options.referencePID,r),b()):y()},y);break;case 3:g={},e.is(a.get(t.options.referencePID))?I.replace("replaceByExisting",a.get(t.options.referencePID),d,!1,b,y):(g[t.options.parentReferencePID]={brokenMfgItems:{},engConfigFilter:"",mfgConfigFilter:""},g[t.options.parentReferencePID].brokenMfgItems[t.options.instancePID]={MbomUpdateAction:"ReplaceByNewBranch",VTreeOrder:t.options.grid.V_TreeOrder,aggregatedByPath:t.options.parentReferencePID,brokenMfgPID:t.options.instancePID,candidatePaths:[t.options.instancePID],candidateProduct:"",id:t.options.instancePID,instanceLID:t.options.instancePID,instancePID:t.options.instancePID,isBroken:!0,isInstanceOf:t.options.referencePID,isLeaf:!0,mfgOccPathPIDs:t.options.instancePID,referecePID:t.options.referencePID,routeMfgItemPID:t.options.parentReferencePID,status:"NotApplicable",type:"MfgItemsUpdateStatus",typeOfScope:"None",fromRWU:!0},v.webservice("rerouteLink",null,g,function(n){e.is(n.succeeded)&&e.is(n.succeeded[t.options.parentReferencePID])?(a.set(t.options.referencePID,n.succeeded[t.options.parentReferencePID][t.options.instancePID].instancesAndReferences[0].PID),b()):y()}));break;case 4:b();break;case 5:C.deleteInstance([C.getInstance(t.options.instancePID)],{forceDBMode:!0,askDeleteConfirmation:!1,onComplete:function(){b()},onFailure:function(){y()}});break;case 6:f=r.getReferenceModel(t.options.parentReferencePID),r.fetchRoot(t.options.referencePID,{onComplete:function(n){if(e.is(n)&&e.is(f)){for(p=0;p<t.options.grid.RWU_ReplacePID;p++)m=C.createMultipleInstances([{rootReferencePID:t.options.referencePID,referencePID:t.options.referencePID,targetReferencePID:t.options.parentReferencePID,instancePID:null,targetRootReferencePID:t.options.parentReferencePID,targetInstancePID:null,allowMove:!0,instancePIDsArray:[],targetInstancePIDsArray:[],path:[]}],f.get("PLMEntity.V_Name"),n.get("PLMEntity.V_Name")),P.push(m);Promise.all(P).then(function(){b()}).catch(function(){y()})}else y()},onFailure:function(){y()},forceDBMode:!0});break;default:y()}},I=function(t){var a=n.getBehavior("WUXNodeModelBehavior"),l=n.getBehavior("TreeListViewBehavior"),u=n.getBehavior("UXFactoryBehavior"),c=u.getComponent("Dialog"),h=u.getComponent("Button"),I=u.getComponent("WUXFrameWindowsManager").getFrameWindow(n.getAppContext()).getImmersiveFrame(),v=I.elements.container.getSize(),b=u.create("Element","div",{class:"mil-tree-container",styles:{height:"100%",width:"100%"}}),y=a.getWUXNodeModel(),P=f(!1),C=e.is(t.values)?Array.isArray(t.values)?t.values:[t.values]:{};e.extend(y.options,{shouldBeSelected:function(e){var t=!0;return e._options.isLeaf||(t=!1),t}}),l.loadDocument(y),l.getContent().inject(b),function(e,t){var n,i=new Map,r=g(),a=[];e.forEach(function(e){var s="",l="",u="",c=!1;if(""!==e.instancePID){switch(e.currentFullName){case"FROZEN":s=t.get(1).valueItem,l=d.Replace_By_Existing;break;case"IN_WORK":"RELEASED"===r.getNodeModel(e.parentReferencePID)[0].options.current?(s=t.get(1).valueItem,l=d.Replace_By_Existing):(s=t.get(2).valueItem,l=d.Replace_By_NewRev);break;case"RELEASED":s=t.get(3).valueItem,l=d.Replace_By_NewBranch;break;default:s=t.get(4).valueItem,l=d.Ignore}c=!0,u=o.getNLSValue("RWU.ManufItemSelection")}(n=p({label:e["PLMEntity.V_Name"],type:e.type,PID:e.PID,instancePID:e.instancePID,parentReferencePID:e.parentReferencePID,parentInstancePID:e.parentInstancePID,selectedAction:s,isLeaf:c,current:e.current,currentFullName:e.currentFullName,selectedRWUAction:l,PLMExternalInstanceID:e.PLM_ExternalInstanceID,reroutingProposal:u,suggestionsLinkedMap:t,RWUReplacePID:"",isCreated:!1,revision:e.revision})).isLeaf&&-1===a.indexOf(n.instancePID)?(i.set(e.PID,r.addNodeModel(n,i.get(e.parentReferencePID))),a.push(n.instancePID)):n.isLeaf||-1!==a.indexOf(n.referencePID)||(i.set(e.PID,r.addNodeModel(n)),a.push(n.referencePID))}),r.expandAllRoots()}(C,P),(s=new c({domId:"replaceWhereUsed-Dialog",immersiveFrame:I,modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,height:v.height-240,width:v.width-1e3,title:o.getNLSValue("RWU.Dialog.Title"),content:b,closeButtonFlag:!0,buttons:{Ok:new h({domId:"replaceWhereUsed-Dialog-Apply",className:"ok primary",label:o.getNLSValue("MIL.PanelApplyButton"),emphasize:"primary",disabled:!1,onClick:function(){s.buttons.Ok.disabled=!0,s.buttons.Apply.disabled=!0,function t(n,i,o,r){var a,s,l=g();n.length>i&&(""!==(a=n[i]).instancePID?(s=e.is(l.getNodeModel(a.PID))?l.getNodeModel(a.PID):null,e.is(s,"array")&&s.every(function(e){return e.options.instancePID===a.instancePID&&new Promise(function(t){m(e,o,r,t)}).then(function(){return t(n,i+1,o,r),!1}),!0})):t(n,i+1,o,r))}(C,0,new Map,new Map)}}),Cancel:new h({domId:"replaceWhereUsed-Dialog-Close",className:"close",label:o.getNLSValue("MIL.PanelCloseButton"),onClick:function(){s.close()}}),Apply:new h({domId:"replaceWhereUsed-Dialog-Add",className:"Add",label:o.getNLSValue("RWU.Button.AddInstances"),onClick:function(){!function(t){var a,s,l,u,c=i.getModuleSelections(n.getId()),h=g();e.is(c,"array")&&c.length>0?(a=c[0].id,s=r.getReferenceModel(a),l=r.getValidChildTypes(s),n.getBehavior("SearchBehavior").showSearchDialoguAndActivate(function(i){c.forEach(function(a){var s,l=h.getNodeModel(a.id,!0),c=h.getNodeModel(l.options.parentReferencePID,!0);e.is(l.options.grid)&&l.options.grid.cellInfo.isLeaf&&(e.is(i,"array")?i.forEach(function(n){u=r.getReferenceModel(n),s=e.is(u)?p({label:u.get("PLMEntity.V_Name"),type:u.get("type"),PID:u.get("PID"),instancePID:Math.random().toString(),parentReferencePID:l.options.parentReferencePID,parentInstancePID:null,selectedAction:d.Ignore.value,isLeaf:!0,current:i[0]["ds6w:status"],currentFullName:u.get("PLMEntity.V_Name"),selectedRWUAction:d.Add,PLMExternalInstanceID:null,reroutingProposal:o.getNLSValue("RWU.Quantity",{quantity:1}),RWUReplacePID:1,suggestionsLinkedMap:f(!0),isCreated:!0,revision:u.get("revision")}):p({label:i[0]["ds6w:label"],type:i[0].type,PID:i[0].id,instancePID:Math.random().toString(),parentReferencePID:l.options.parentReferencePID,parentInstancePID:null,selectedAction:d.Ignore.value,isLeaf:!0,current:i[0]["ds6w:status"],currentFullName:i[0]["ds6w:label"],selectedRWUAction:d.Add,PLMExternalInstanceID:null,reroutingProposal:o.getNLSValue("RWU.Quantity",{quantity:1}),RWUReplacePID:1,suggestionsLinkedMap:f(!0),isCreated:!0,revision:i[0]["ds6wg:revision"]}),h.addNodeModel(s,c),t.push({instancePID:s.instancePID,PID:s.referencePID})}):n.warn(o.getNLSValue("RWU.ObjectRetrievalFailure")),h.updateNode(l.options.parentReferencePID))})},{title:o.getNLSValue("Dialog.InsertInstanceCmd.Title"),searchTitle:o.getNLSValue("Search.InsertInstanceCmd.Placeholder"),types:l})):n.warn(o.getNLSValue("ReplaceWhereUsed.NoSelection"))}(C)}})}})).close=function(){a.emptyNodeModel(),s.hide()},s.show()},v=function(){var t,s=[],l=i.getSelections(n.getId());e.is(l,"array")&&l.length>0?l.forEach(function(n){e.is(l,"array")&&l.length>0&&n.forEach(function(n){e.is(n)&&(t=r.getReferenceModel(n),s.push(t.get("PID")))})}):0===l.length&&n.warn(o.getNLSValue("ReplaceWhereUsed.NoSelection")),a.webServiceRequest({url:"dsmfg/private/V0/invoke/replaceWhereUsed",method:"POST",onComplete:function(t){var i=[],a=[],s=new Map,l=new Map;t.forEach(function(e){e.from.forEach(function(e){i.push(e.PID),s.set(e.PID,e)}),e.to.forEach(function(e){l.set(e.instancePID,e)})}),r.getDescendantsFromServer(i,function(t){a=function(t,n,i){var o=[],r=[],a=[];return i.instancesAndReferences.forEach(function(i){var s;i.isReference()&&e.is(t.get(i.get("PID")))?-1===r.indexOf(i.get("PID"))&&(s=t.get(i.get("PID")),r.push(i.get("PID")),o.push(s)):i.isInstance()&&(e.is(n.get(i.get("PID")))&&-1===a.indexOf(i.get("PID"))?((s=n.get(i.get("PID"))).PLM_ExternalInstanceID=i.get("PLMInstance.PLM_ExternalID"),s.V_TreeOrder=i.get("V_TreeOrder"),s.parentReferencePID=i.get("isAggregatedBy"),s.parentInstancePID=null,a.push(i.get("PID")),o.push(s)):-1!==r.indexOf(i.get("isInstanceOf"))&&(o.forEach(function(e,t){var n;e.PID===i.get("isAggregatedBy")&&(n=o.splice(t,1),o.unshift(n[0]))}),(s=t.get(i.get("isInstanceOf"))).instancePID=i.get("PID"),s.PLM_ExternalInstanceID=i.get("PLMInstance.PLM_ExternalID"),s.V_TreeOrder=i.get("V_TreeOrder"),s.parentReferencePID=i.get("isAggregatedBy"),s.parentInstancePID=null))}),o}(s,l,t),I({values:a})},{onFailure:function(){n.warn(o.getNLSValue("Error.ExpandFailed.Title"))},silentMode:!0,forceDBMode:!0,expandLevel:1})},data:e.Json.encode(s)})};return{listenTo:function(){return{ReplaceWhereUsed:v}}}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/AbstractGroupingClass",[],function(){"use strict";return function(){return{group:function(){},ungroup:function(){}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/BuildUp3DColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,i){const o=Object.freeze({ACTIVATED:1,INPROGRESS:-1,DEACTIVATED:0});return{getNonModelDataIndexes:function(){return["hide_show_BuildUp_3D"]},getCellSemantics:function(t){var r,a=t.nodeModel,s=n.getIconURLFromKey("BuildUp_Off");if(e.is(a)&&i.isOperation(a.getReferencePID())){const i=t.nodeModel.options.grid;if(e.is(i))switch(a.get3DBuildUpState()){case o.ACTIVATED:s=n.getIconURLFromKey("BuildUp_On");break;case o.DEACTIVATED:case o.INPROGRESS:s=n.getIconURLFromKey("BuildUp_Off")}r={icon:s}}return r},hasCellValue:function(t){var n,o,r=!0;return n=t.nodeModel,o=this.getTreeDocument(),e.is(n)&&e.is(o)&&(!o.isGroupingNodeModel(n)&&i.isOperation(n.getReferencePID())||(r=!1)),r},getCellValue:function(e){return e.nodeModel.options.hideShowBuildUp3D}}}}),define("DS/DELPPWViewBehaviors/MfgItemReplaceBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["SelectionPlugin","DatabasePlugin","ProductImplementPlugin","ResourcePlugin","WebServicePlugin","BIPlugin"],creator:function(t,n,i,o,r,a,s,l){var u,c;return c=function(t,i,o,r,a){var s=r||{},l=!e.is(s.popupMessage)||s.popupMessage;e.is(o)&&e.is(o.message,"string")&&(i+="\n"+o.message),!0===l?n.warn(i,a):n.log(i,a),n.notify("stopProgress",t),e.is(s.onFailure,"function")&&s.onFailure.call(null,i)},u=function t(i,r){var u,d,g,f,p,h,m={},I=i||{},v=s.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");p=a.getNLSValue("replaceCmd.LogMessage",{replaceType:I.replaceType}),h=n.log(p),n.notify("startProgress",m),f={instancePIDs:I.instancePIDs,scopedParentPrdRefIDs:I.scopedParentPrdRefIDs,rootMfgPIDs:I.rootMfgPIDs,rerouteSLCheckForAssemblies:I.rerouteSLCheckForAssemblies,RIRPaths:I.RIRPaths},e.is(v,"string")&&(f.xmlLinkAuthoringConfig=v),"replaceByLatest"===I.replaceType?u="dsmfg/private/V0/invoke/replaceByLatest":"replaceByExisting"===I.replaceType||"replaceByNew"===I.replaceType?(u="dsmfg/private/V0/invoke/replaceByExisting",f.existingRefPID=I.existingRefPID):"replaceByNewRevision"===I.replaceType?u="dsmfg/private/V0/invoke/replaceByNewRevision":c(m,a.getNLSValue("InvalidReplaceOperation",null,"Error","Title"),null,I,h),d=function(t,i){var o;e.is(i)&&e.is(i.message,"string")?((o=a.getNLSValue(i.message,null,"Error","Title"))==="Error."+i.message+".Title"&&(o=a.getNLSValue(I.replaceType,null,"Error","Title"),n.debug(i.message)),c(m,o,null,I,h)):c(m,a.getNLSValue(I.replaceType,null,"Error","Title"),null,I,h)},g=function(i){var s,u,c,d,g,f=[],v=[],b=n.getPreferenceValue("refreshBIOnAuthoring"),y=n.getBehavior("UXFactoryBehavior"),P=o.getConnectionParser(),C={silentMode:!1,stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[],onComplete:function(t){"replaceByLatest"===I.replaceType?g=a.getNLSValue("Dialog.ReplaceByLatest.Report"):"replaceByExisting"===I.replaceType?g=a.getNLSValue("Dialog.ReplaceByExisting.Report"):"replaceByNewRevision"===I.replaceType?g=a.getNLSValue("Dialog.ReplaceByNewRevision.Report"):"replaceByNew"===I.replaceType&&(g=a.getNLSValue("Dialog.ReplaceByNew.Report")),e.is(I.showReport)&&!I.showReport||y.showMessage(g,{messages:r,token:h}),e.is(b,"boolean")&&!0===b&&l.getBICmdState()&&l.computeBI(),e.is(I.onComplete)&&I.onComplete(t),n.notify("stopProgress",m),n.log(p+" "+a.getNLSValue("completed"),h)},onFailure:function(){e.is(I.onComplete)&&I.onFailure()}},D=i.failed;Object.keys(D).forEach(function(e){var t=D[e];(f=Object.keys(t)).forEach(function(e){r.push(t[e].message)})}),e.is(i.warning)?(c=i.warning.message,e.is(c)&&(n.notify("stopProgress",m),y.showConfirmation(a.getNLSValue("Confirmation.AreYouSure"),c,null,function(n){var i,o,a,s=[],l=[],u=[],c=I.instancePIDs,d=I.rootMfgPIDs,p=I.scopedParentPrdRefIDs;if(e.is(n,"boolean")&&n)if(I.rerouteSLCheckForAssemblies=!1,f.length>0){for(let e=0;e<c.length;e++)i=c[e],0!==f.indexOf(i)&&(o=p[e],a=d[e],s.push(i),l.push(o),u.push(a));I.instancePIDs=s,I.scopedParentPrdRefIDs=l,I.rootMfgPIDs=u,s.length>0?t(I,r):y.showMessage(g,{messages:r,token:h})}else t(I,r)}))):(u=i.succeeded,Object.keys(u).forEach(function(e){var t=u[e];Object.keys(t).forEach(function(e){var n=t[e];n.instancesAndReferences.forEach(function(e){d=e.attributesValue,Object.prototype.hasOwnProperty.call(d,"isInstanceOf")?C.stackedInstances.push(d):(v.push(d.PID),C.stackedReferences.push(d))}),n.connections.forEach(function(e){P.parse(e,C)}),C.deletedObjects=C.deletedObjects.concat(n.deletedObjects),r.push(n.message)})}),n.notify("replace",{}),s=function(){o.addToCollections(C)},o.getDescendantsFromServer(v,s,{silentMode:!0}))},s.webServiceRequest({url:u,method:"POST",headers:s.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(f),onFailure:d,onTimeout:d,onCancel:d,onComplete:g})},{listenTo:function(){return{}},onStart:function(e){},onStop:function(){},replace:function(t,s,l,c,d,g){var f,p,h,m=e.is(l)?l:i.getSelectionsWithPaths(n.getId()),I=new Set,v=[],b=!0,y=[],P=[],C=[];if(e.is(m)&&m.length>0){for(let e=0;e<m.length;e++)if(m[e].length>0){m=m[e];break}let i=new Set;m.forEach(function(t){const{path:n}=t;for(h=(t=>{let n=null;const i=t.length>0?t[0]:null;return e.is(i)&&(n=o.getInstance(i).get("isAggregatedBy")),n})(n),i.add(h),v.push(h),p=0;p<n.length-1;p++)I.add(n[p]);let r=[];r.push(h),i=n.reduce(function(t,n){const i=o.getReferenceIdFromInstance(n);return e.is(i)&&(t.add(i),r.push(n),r.push(i)),t},i),C.push(r.join(","))}),b=m.every(function(e){return f=e.id,!I.has(f)}),i.has(s)&&(b=!1),b?(m.forEach(function(t){var n,i=null;const{path:o,id:a}=t;y.push(a),n=r.getScopedParent(o),e.is(n)&&n.length>0&&(i=r.getScopeLinksOfImplementing(n)[0].get("to")),P.push(i)}),u({instancePIDs:y,scopedParentPrdRefIDs:P,replaceType:t,existingRefPID:s,rootMfgPIDs:v,rerouteSLCheckForAssemblies:!0,RIRPaths:C,showReport:c,onComplete:d,onFailure:g},[])):n.warn(a.getNLSValue("Error.replaceDirectOrIndirectChild.Title"))}}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXManageCapableRscDragDrop",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a,s,l){var u,c,d=function(){return e.is(c)||(c=n.getBehavior("LinkBehavior")),c},g=function(){var t,i,o,r,a,s=null,l=n.getBehavior("ManageCapableResourcesBehaviour"),u=n.getBehavior("CapableResourceLinkBehaviour");return t=(r=(o=l.getBreadCrumb()).value[o.value.length-1]).refPID,i=r.instPID,a=u.getCapableRscStructureLinkOfAncestor(r.path),u.checkType(t,"OPERATION")&&e.is(i)&&u.checkParentType(i,"SYSTEM")&&(s=e.is(a)?a.get("to"):null),{fromRefPID:t,fromInstPID:i,resourceAreaID:s,fromSideAbsPath:r.path}},f=function(t,r){var a=[],s={};t.draggedItems.forEach(function(t){var n,i,r=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,s=r>0?t.instancePIDsArray[r-1]:null;n=r>0?o.getReferenceIdFromInstance(s):t.rootReferencePID,i=o.getReference(n),e.is(i)||a.push(n)}),a.length>0?(n.notify("startProgress",s),o.fetchRefList(a,{onComplete:function(){n.notify("stopProgress",s),e.is(r.onComplete)&&r.onComplete()},onFailure:function(){n.notify("stopProgress",s),n.warn(i.getNLSValue("ManageCapableResource.FetchReferene.Failed")),e.is(r.onFailure)&&r.onFailure()}})):e.is(r.onComplete)&&r.onComplete()},p=function(t){var n="",i=u.acceptedTypes;return e.is(t)&&(n=e.is(t.get)?t.get("PPRTYPE"):e.is(t["ds6w:type_value"])?r.getPPRType(t["ds6w:type_value"]):e.is(t,"string")?r.getPPRType(t):(t=o.getReference(t.referenceID)).get("PPRTYPE")),!e.is(i)||-1!==i.indexOf(n)},h=function(e){return e.preventDefault(),!0};return{init:function(t){var n=this;u=t||{},e.is(u.dropZone)&&(u.dropZone.addEventListener("drop",function(e){e.preventDefault(),n.onTreeListViewDrop(e)}),u.dropZone.addEventListener("dragover",function(e){e.preventDefault()}))},isAcceptedType:function(e){return p(e)},getDDBehavior:function(){return{onDragStartCell:this.onDragStartCell,onDropCell:this.onDropCell.bind(this),onDropBlank:this.onDropBlank.bind(this),onDropColumnHeader:this.onDropColumnHeader.bind(this),onDragOverBlank:h,onDragOverColumnHeader:h,onDragOverCell:h,onDragEnterRowHeader:this.onDragEnterRowHeader,onDragLeaveRowHeader:this.onDragLeaveRowHeader,onDragOverRowHeader:this.onDragOverRowHeader}},onDragOverRowHeader:function(){return!1},onDragLeaveRowHeader:function(){return!1},onDragEnterRowHeader:function(){return!1},retrieveItems:function(t){var i,o,r,a,s,l=[],u="",c=["text/searchitems","text/plain","Text"];if(!e.is(t))return n.debug("ERROR: No dropped item found"),l;for(r=e.is(t.dataTransfer.types.indexOf,"function")?"indexOf":"contains",a=0;a<c.length&&""===u;a++)s=t.dataTransfer.types[r](c[a]),(e.is(s,"number")&&s>=0||e.is(s,"boolean")&&!0===s)&&(u=c[a]);if(""===u)return n.debug("ERROR: No data retrieved"),l;i=t.dataTransfer.getData(u);try{o=e.Json.decode(i)}catch(e){return l}return e.is(o)?e.is(o.data)?e.is(o.data.items,"array")?o.data.items:(n.debug("ERROR: Items is not an array"),l):(n.debug("ERROR: No data retrieved"),l):(n.debug("ERROR: Parsing returned null"),l)},onDragStartCell:function(o,r){var s,l,u,c=[],d=r.nodeModel,f=widget.data,p=a.get3DSpaceServiceName(),h=n.getBehavior("WUXNodeModelBehavior"),m=n.getBehavior("ExpandFilterBehavior"),I=n.getBehavior("ManageCapableResourcesBehaviour"),v={widgetId:widget.id,appId:t.getConfig().appId},b=g();if(!0!==I.getStepOperationUIState())return e.is(m)&&e.is(m.getFilterProxy())&&(s=m.getFilterProxy())&&s.getCtxForSharing&&(v=s.getCtxForSharing()),l={protocol:"3DXContent",version:"1.1",source:t.getConfig().appId,widgetId:widget.id,data:{items:[]},biProxyCtx:v},u={properties:[function(){return{property:"envId",value:a.getPlatformID({serviceId:p})}},function(){return{property:"serviceId",value:p}},function(){return{property:"contextId",value:[f.role,f.organization,f.collaborativeSpace].join(".")}},function(){return{property:"objectId",value:e.is(this.getReferencePID)?this.getReferencePID():null}},function(){return{property:"linkId",value:e.is(this.getLinkPID)?this.getLinkPID():null}},function(){return{property:"resourceAreaID",value:b.resourceAreaID}},function(){return{property:"objectType",value:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:e.is(this.getReferenceType)?i.getNLSValue(this.getReferenceType(),null,"Type"):null}}]},d.isSelected()||d.select(),r.cellView.collectionView.getTreeDocument().getXSO().get().forEach(function(t){e.is(h)&&!h.isFakeNodeModel(t)&&c.push(t.dump(u))}),l.data.items=c,o.dataTransfer.setData("Text",JSON.stringify(l)),o.dataTransfer.effectAllowed="copyMove",!1;n.warn("DrgDrop Not Supported")},getDragNDropInfo:function(t,n){var i,r,a,s={draggedItems:[],info:{fromWUX:!1,dropPosition:null,fromSameSource:!1},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};return e.is(t)&&e.is(t.dataTransfer)&&e.is(t.dataTransfer.getData,"function")&&(r=t.dataTransfer.getData("Text"),e.is(r,"string")&&r.length>0&&(a=JSON.parse(r),e.is(a)&&e.is(a.widgetId,"string")&&(s.info.fromSameSource=a.widgetId===widget.id))),e.is(n)&&e.is(n.nodeModel,"object")&&e.is(n.dropPosition)&&(s.info.fromWUX=!0,s.info.dropPosition=n.dropPosition,s.targetTreeNodeModel=n.nodeModel),i=this.retrieveItems(t),e.is(i,"array")&&(i.forEach(function(t){var n,i={};e.is(t)&&(i.rootReferencePID=e.is(t.objectId)?t.objectId:null,i.instancePIDsArray=e.is(t.path,"array")?o.transformRIRToAbsolutePath(t.path):null,i.name=e.is(t.displayName,"string")?t.displayName:null,i.type=e.is(t.referenceType,"string")?t.referenceType:e.is(t.objectType)?t.objectType:null,i.typeNLS=e.is(t.displayType,"string")?t.displayType:e.is(t.displayType)?t.displayType:null,i.securityContext=e.is(t.contextId,"string")?t.contextId:null,i.tenant=e.is(t.envId,"string")?t.envId:null,i.service=e.is(t.serviceId,"string")?t.serviceId:null,i.path=Array.isArray(t.path)?t.path:[],e.is(t.isManufacturable,"string")&&(i.isManufacturable=t.isManufacturable),e.is(i.instancePIDsArray,"array")&&i.instancePIDsArray.length>0&&(n=o.getInstance(i.instancePIDsArray[0]),e.is(n)&&(i.rootReferencePID=n.get("isAggregatedBy")))),s.draggedItems.push(i)}),e.is(s.targetTreeNodeModel)&&(e.is(s.targetTreeNodeModel.getLinkPID,"function")&&(s.targetReferencePID=s.targetTreeNodeModel.getReferencePID(),s.instPID=s.targetTreeNodeModel.getInstancePID(),s.linkPID=s.targetTreeNodeModel.getLinkPID(),s.nodeDepth=s.targetTreeNodeModel.getNodeDepth(),s.siblingsPID=s.targetTreeNodeModel.getSiblingsPID()),delete s.targetTreeNodeModel)),s},onDragEnterColumnHeader:function(){},onDragLeaveColumnHeader:function(){},onDragEnterBlank:function(){},onDragLeaveBlank:function(){},onDropCell:function(t,r){var a,s,l=[],u=[],c=this.getDragNDropInfo(t,r),h=c.siblingsPID,m=c.targetReferencePID,I=d(),v=n.getBehavior("ManageCapableResourcesBehaviour"),b=g();!0!==v.getStepOperationUIState()?"middle"===c.info.dropPosition&&f(c,{onComplete:function(){c.draggedItems.forEach(function(t){var r,d,g=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,f=g>0?t.instancePIDsArray[g-1]:null,I=g>0?o.getReferenceIdFromInstance(f):t.rootReferencePID;p({referenceID:I})?0===c.nodeDepth?(a=c.linkPID,m!==I||e.is(b.resourceAreaID)&&t.rootReferencePID===b.resourceAreaID?m===I&&b.resourceAreaID===t.rootReferencePID?g>0&&(r=o.getInstance(t.instancePIDsArray[g-1]),d={linkPID:a,instMdl:r},u.push(d)):l.push({type:"SecondaryCandidateResourceLink",fromSideRefPID:b.fromRefPID,toSideRefPID:I,fromSideInstPID:b.fromInstPID,fromSideAbsPath:b.fromSideAbsPath,connectionParams:{primaryResourceLinkPID:a}}):n.warn(i.getNLSValue("ManageCapableResource.setResourceUsage.Failure",{resource:"CapableResourcesStructureLink dose not Exist (or) Instance Under Different Resorce Area"}))):1===c.nodeDepth&&(s=c.linkPID,m!==I||e.is(b.resourceAreaID)&&t.rootReferencePID===b.resourceAreaID?m===I&&t.rootReferencePID===b.resourceAreaID&&g>0&&(r=o.getInstance(t.instancePIDsArray[g-1]),-1===h.indexOf(r.get("PID"))&&(d={linkPID:s,instMdl:r},u.push(d))):n.warn(i.getNLSValue("ManageCapableResource.setResourceUsage.Failure",{resource:"CapableResourcesStructureLink dose not Exist (or) Instance Under Different Resorce Area"}))):n.warn(i.getNLSValue("ManageCapableResource.NotAResourceType"))}),l.length>0&&I.createConnection(l),u.forEach(function(e){n.notify("updateResourceUsage",[e,!0])})}}):n.warn("DrgDrop Not Supported")},onDropBlank:function(t,r){var a,s=this.getDragNDropInfo(t,r),l=d(),u=n.getBehavior("ManageCapableResourcesBehaviour"),c=g();a=function(t){var r=[];return t.draggedItems.forEach(function(t){var a=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,s=a>0?t.instancePIDsArray[a-1]:null,l=a>0?o.getReferenceIdFromInstance(s):t.rootReferencePID;p({referenceID:l})?r.push({type:"DELAsmProcessCanUseCnx",fromSideRefPID:c.fromRefPID,toSideRefPID:l,fromSideInstPID:c.fromInstPID,toSideInstPID:s,fromSideAbsPath:c.fromSideAbsPath,toSideRootRefPID:t.rootReferencePID}):n.warn(i.getNLSValue("ManageCapableResource.NotAResourceType"))}),r},!0!==u.getStepOperationUIState()?f(s,{onComplete:function(){var e=a(s);l.createConnection(e)}}):n.warn("DrgDrop Not Supported")},onDropColumnHeader:function(e,t){this.onDropBlank(e,t)}}}}),define("DS/DELPPWViewBehaviors/ExportToCSVBehaviour",["UWA/Core"],function(e){"use strict";return{plugins:["WebServicePlugin","UXComponentsPlugin","ResourcePlugin"],creator:function(t,n,i,o,r){var a,s,l,u,c,d,g,f,p=o.getComponent("Toggle"),h=o.getComponent("Button"),m=function(t){e.is(s)?i.getXMLValues(s,function(n){u=function(t){var n,i,o=t||{};for(const t in o)if(o.hasOwnProperty(t)&&e.is(o[t].Attribute)&&Array.isArray(o[t].Attribute)){n=o[t].Attribute;for(let t=0;t<n.length;t++)i=e.is(n[t].dicoType)?n[t].dicoType:null,n[t].fullName=e.is(i)?i+"."+n[t].name:n[t].name}return o}(u=n.convert("Config.Preferences.ExportCSV.Type","name")),c=n.Config.Preferences.ExportCSV.showOptionPanel,d=n.Config.Preferences.ExportCSV.defaultValue,g=n.Config.Preferences.ExportCSV.exportUnits,t()},function(e){n.warn(r.getNLSValue("ExportCSVCmd.ConfigXMLFetchFailed")),n.debug("Cannot export as ExportCSVPreferences XML fetch failed ,"+e)}):n.debug("Cannot export as _exportCSVPreferencesXML path is not provided")},I=function(){return window.URL||window.webkitURL||window},v=function(e,t,n){var i,o,r,a,s,l;a=function(e,t){var n,i,o;if("string"==typeof e){for(n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([n],{type:t})}return e instanceof Blob?e:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?new Blob([e],{type:t}):null}(e,n),"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,t):(i=window.document.createElementNS("http://www.w3.org/1999/xhtml","a"),o=I().createObjectURL(a),i.href=o,i.download=t,r=new MouseEvent("click"),i.dispatchEvent(r),s=o,l=function(){"string"==typeof s?I().revokeObjectURL(s):s&&s.remove()},window.chrome?l():setTimeout(l,10))},b=function(e){var i,o;switch(t.getService("ConfigService").getPreference("csvSeparator")){case"Semicolon":i=";";break;case"Pipe":i="|";break;case"Tab":i="\t";break;default:i=","}o=e?l.getConfiguredAttributesAsCSV(u,i):l.getVisibleTableContentAsCSV(i),v(o,a+"_"+(new Date).toString().split(" ").splice(1,4).join(" ")+".csv","text/csv"),n.info(r.getNLSValue("ExportCSVCmd.SuccessMsg"))},y=function(){m(function(){var t,i;!0===c?(i=new p({label:r.getNLSValue("ExportCSVCmd.ExportAllQuestion"),checkFlag:d}),e.is(f)?(t=f.create("Dialog",{domId:"ExportCSV-Dialog",modalFlag:!0,visibleFlag:!1,snappableFlag:!1,title:r.getNLSValue("ExportCSVCmd.Header"),content:i,buttons:{Ok:new h({className:"ok primary",label:r.getNLSValue("ExportCSVCmd.OK"),emphasize:"primary",onClick:function(){t.destroy(),b(i.checkFlag)}}),Cancel:new h({className:"cancel",label:r.getNLSValue("ExportCSVCmd.CANCEL"),onClick:function(){t.destroy()}})}})).show():n.debug("uxFactoryBehavior is not available.")):b(!1)})};return{listenTo:function(){return{ExportCSVCmd:y}},onStart:function(t){s=(t=t||{}).exportCSVPreferencesXML,a=t.exportCSVFileName,l=n.getBehavior("TreeListViewBehavior"),f=n.getBehavior("UXFactoryBehavior"),e.is(l)||n.debug("ExportToCSVBehaviour initialization failed as TreeListViewBehavior is not available")},onStop:function(){s=null,l=null},getExportUnitsPreference:function(){return!e.is(g,"boolean")||g}}}}}),define("DS/DELPPWViewBehaviors/Operations3DViewerBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["Operations3DViewerPlugin"],creator:function(e,t,n){return{listenTo:function(){return{}},onStart:function(){},onStop:function(){},getPreferences:function(){return n.getPreferences()},updatePreferences:function(e){n.updatePreferences(e)},get3DVisibilityState:function(e){return n.get3DVisibilityState(e)},update3DVisibilityState:function(e,t){t=!0===t?1:0,n.update3DVisibilityState(e,t)},isAggregatingRootLoadedInViewer:function(e){return n.isAggregatingRootLoadedInViewer(e)},overrideAllChildrenNodesVisibilityState:function(e,t){t=!0===t?1:0,n.overrideAllChildrenNodesVisibilityState(e,t)}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/DataGridViewManager",["UWA/Core"],function(e){"use strict";return function(t){return{getDocument:function(){return t.getTreeDocument()},getCellID:function(e,n){return t.getLayout().getCellIDFromCoordinates({rowID:e,columnID:n})},getCellModel:function(e,n){var i=this.getCellID(e,n);return t.getCellInfosAt(i).cellModel},getCellNodeModel:function(e,n){var i=this.getCellID(e,n);return t.getCellInfosAt(i).nodeModel},getTreeNodeModelFromRowID:function(e){return t._rowModel.getVisibleNodeModel(e)},scrollToCellAt:function(e,n){var i=this.getCellID(e,n);t.scrollToCellAt(i)},getCellView:function(n,i,o){var r=!!e.is(o,"boolean")&&o,a=this.getCellID(n,i),s=t._getViewAt(a);return r&&(e.is(s)?s=Promise.resolve(s):(s=new Promise(function(e){t.subscribeOnceToAllCellsRendered(function(){var n=t._getViewAt(a);e(n)})}),t.ensureCellVisible(a,!1,.5))),s},getCellContent:function(t,n,i){var o=!!e.is(i,"boolean")&&i,r=this.getCellView(t,n,o),a=null;return e.is(r)&&(a=i?r.then(function(t){return e.is(t)?Promise.resolve(t.getContent()):Promise.reject("No cell view found")}):r.getContent()),a},getNumberOfRows:function(){var t=this.getDocument(),n=0;return e.is(t)&&t.getChildren(!0).forEach(function(e){n+=e.isVisible()?1:0,n+=e.getAllDescendants(!1,!0).filter(function(e){return e.isVisible()}).length}),n},getColumnIDFromDataIndex:function(e){return t.getColumnIndexByDataIndex(e)},getModelEvents:function(){return t._modelEvents},getColumns:function(){return t.columns},unselectAll:function(){t.unselectAll()},selectAll:function(){t.selectAll()},getCellClassName:function(e,t,n){return e+' .wux-layouts-datagridview-cell[cell-id="'+this.getCellID(t,n)+'"]'},empty:function(){this.getDocument().empty()},getRows:function(){return t.model},getDataGridViewModel:function(){return t.model},getRowModel:function(e){var n,i,o,r=this.getColumns(),a={};for(n=0;n<r.length;n++)"tree"===(o=r[n].dataIndex)?a[o]=this.getTreeNodeModelFromRowID(e):(i=this.getCellID(e,o),a[o]=t.getModelAt(i));return a},getColumnOptions:function(e){return t.getColumnOrGroup(e)},getColumnOptionsByPosition:function(e){var n=t.layout.getOrderedColumnsIndexes()[e];return this.getColumnOptions(n)},isColumnHidden:function(e){return!1===t.layout.getColumnVisibleState(e)||0===t.layout.getColumnWidth(e)},scrollToCellCallback:function(e,n,i){t.subscribeOnceToAllCellsRendered(i),this.scrollToCellAt(e,n)},addEventListener:function(e,n){t.addEventListener(e,n,!0)},removeEventListener:function(e,n){t.removeEventListener(e,n,!0)},getDataGridViewLayout:function(){return t.getLayout()}}}}),define("DS/DELPPWViewBehaviors/ViewBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["TreeViewPlugin"],creator:function(t,n,i){var o;return o=function(){var e=n.getElement();i.getActiveView()!==n.getId()?e.removeClassName("focus"):e.addClassName("focus")},{listenTo:function(){return{activeViewChange:o}},onStart:function(t){var i=this,o=n.getElement();e.is(o)&&(o.onclick=function(){i.setActiveView(n.getId())})},onStop:function(){},registerViewforWidgetLayout:function(e){i.registerViewforWidgetLayout(e)},unregisterViewforWidgetLayout:function(e,t){i.unregisterViewforWidgetLayout(e,t)},setCurrentView:function(e){i.setCurrentView(n.getId(),e)},setActiveView:function(){i.setActiveView(n.getId()),n.notify("activeViewChange")},getActiveView:function(){return i.getActiveView()},setFocus:function(){var t=n.getElement();e.is(t)&&(this.getActiveView()!==n.getId()?t.removeClassName("focus"):t.addClassName("focus"))}}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/MessageDialog",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";return function(n,i){var o,r=t.extend({defaultOptions:{className:"Message-objectslist",showHeaderMessage:!1},objectsTableBody:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableBody.inject(t)},setData:function(t){var n,o=this,r=[],a=[];o.empty(),o.options.showHeaderMessage&&null!==o.objectsTableBody&&(r.push({tag:"th",text:t.headerMessage}),n=e.createElement("tr",{html:r}),o.objectsTableHead.appendChild(n)),null!==o.objectsTableBody&&t.messages.forEach(function(r){a=[],i.log(r,t.token),a.push({tag:"td",text:e.is(r)?r:""}),n=e.createElement("tr",{html:a}),o.objectsTableBody.appendChild(n)})},empty:function(){if(e.is(this.objectsTableBody))for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return o=function(t,i,o){var r=e.createElement("div",{class:"Message-dialog-content-container"});e.is(i,"string")&&(i=e.createElement("span",{class:"message-dialog-message",text:i})).inject(r),e.is(o)&&o.inject(r),n.create("Dialog",{title:t,domId:"message-dialog-container",identifier:"message-dialog-container",content:r,minHeight:200,minWidth:400,modalFlag:!0,resizableFlag:!0}).close=function(){this.destroy()}},{show:function(t,n){var i,a;i=e.createElement("div",{class:"Message-objectList"}),(a=new r).setData(n),a.getContent().inject(i),o(t,null,i)},showWithMessage:function(t,n,i){let a=e.createElement("div",{class:"Message-objectList"}),s=new r;s.setData(i),s.getContent().inject(a),o(t,n,a)}}}}),define("DS/DELPPWViewBehaviors/RootsBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["RootsPlugin"],creator:function(e,t,n){return{listenTo:function(){return{ResetRootsStore:this.removeRoots}},onStart:function(){},onStop:function(){},getRoots:function(){return n.getRoots(t.getId())},isRoot:function(e){return n.isRoot(e)},getRootFilter:function(e){return n.getRootFilter(e)},getCompatibleConfigurationFilters:function(e){return n.getCompatibleConfigurationFilters(e)},removeRoots:function(){return n.removeRoots(t.getId())}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a,s){var l,u,c;return c=function(t,n,i,o){var a;return!(r.getImplementLinkType()===o&&(a=r.getPathToScope(i),!e.equals(t,a)&&!e.equals(n,a)))},l=function(o,s,l,u){var c,d,g,f,p,h,m,I={},v=[],b=e.is(o,"array")?o:[o];if(c=l||s,e.is(c)){for(v=n.getImpacted(c),g=t.getBehavior("LinkBehavior"),m=0;m<v.length;m++)switch((p=v[m]).get("type")){case"DELAsmProcessCanUseCnx":g.getSecondaryRscLinksFromPrimaryLink(p).forEach(function(e){(h=e.clone()).set("from",p.get("from")),v.splice(m+1,0,h),m+=1});break;case"SecondaryCandidateResourceLink":f=g.getConnection(p.get("from")),e.is(f)&&((h=p.clone()).set("from",f.get("from")),v.splice(m,1,h))}return b.forEach(function(o){var c;I[o]=[],(c=i.getRelationsConfiguredOnColumn(o))&&v.forEach(function(g){var f,p,h,m,v,b,y,P,C,D,S,R,V,A=g.get("from"),w=g.get("to"),L=g.get("type"),E=!1,M=null,N="",T=function(t,n){var i,o="";if(t.length>0){let a=[],s=!1;t.forEach(function(t){if(i=e.is(t.name)&&e.is(t.dicoType)?t.dicoType+"."+t.name:t.name,"Relation"===n||"relation"===n){let t=g.get("type");if("ProcessImplementLinkOcc"===t&&"PLMEntity.V_usage"===i){let e=r.getRoleFromModelOrComputed(g.get("PID"));a.push(e.nlsText)}else if("ProcessImplementLinkOcc"===t&&(i.contains("V_ContQuantity")||i.contains("V_UsageQuantityRatio"))){if(!s){let t=r.getQuantityFromModel(g.get("PID"));s=!0,e.is(t)&&a.push(t)}}else e.is(g.get(i))&&a.push(g.get(i))}else e.is(p.get(i))&&a.push(p.get(i))}),o="Relation"===n||"relation"===n?a.join(")("):a.join(" ")}else o=e.is(p)?p.get("PLMEntity.V_Name")||p.get("name")||p.get("PLMEntity.PLM_ExternalID")||p.get("PLMInstance.PLM_ExternalID"):a.getNLSValue("TableView.RelationsColumn.Unknown");return o},B=function(t,n){return C=e.is(t)&&e.is(t.display_icon)?t.display_icon:null,D="relation"===C?L:n};if(Array.isArray(A)&&Array.isArray(w)){if(A=(S=A)[S.length-1],w=(R=w)[R.length-1],Array.isArray(u)&&e.is(r.isImplementLinkValidForOccPath,"function")&&!r.isImplementLinkValidForOccPath(S,R,u))return}else!Array.isArray(A)&&Array.isArray(w)&&"ProcessImplementLink"===L&&(V=w[w.length-2],w=w[w.length-1]);if(f=l===A||s===A?w:A,m=e.is(L)?L:null,v=e.is(c[m])?c[m]:{},e.is(v)&&(e.is(v.attribute_source)||e.is(v.Attribute))&&e.is(v.direction))switch(v.direction){case"To":E=l===A||s===A;break;case"From":E=l===w||s===w;break;case"Both":E=!0;break;default:E=!1,t.debug("Direction configured for "+m+" in XML is invalid.")}if(!0===E){f&&(Array.isArray(f)?p=n.getInstance(f[f.length-1]):V?(h=n.getInstance(V),p=n.getReferenceModel(f)):"ProcessImplementLink"!==m&&"PartialProcessImplementLink"!==m||!n.isInstance(f)?p=n.getReferenceModel(f):(h=n.getInstance(f),p=n.getReferenceModel(h._attributes.isInstanceOf)));let t,r,a=[];if(e.is(v.Attribute)){const e=Array.isArray(v.Attribute)?[...v.Attribute]:[v.Attribute],t=new Set;for(const n of e)"reference"===n.entity||"instance"===n.entity?t.add("Type"):"relation"===n.entity&&t.add("Relation");a=[...t]}else e.is(v.attribute_source)&&(a=v.attribute_source.split(","));for(N="",r=0;r<a.length;r++){switch(y=a[r]){case"Relation":b=m;break;case"Type":b=e.is(p)?p.get("type"):null}P=i.getRelationsColumnDisplayOptions(b),M=null,(d=e.is(v.Attribute)?e.is(m)?c[m]:null:e.is(b)?c[b]:null)&&(i.isObjectConstraint()&&o===i.getConstraintRelationName()?M=d:e.is(d.Attribute)&&(M=Array.isArray(d.Attribute)?d.Attribute:[d.Attribute])),e.is(M)||(M=e.is(P.Attribute)?P.Attribute:[]),0===r&&e.is(b)&&e.is(h)&&("Installation"===b||"Transform"===b)&&(N="("+h._attributes["PLMInstance.PLM_ExternalID"]+") "),t=T(M,y),N+=t="Relation"===y&&"Relation,Type"===a.toString()?"("+t+")":t,D=B(P,b)}I[o].push({Icon:D,Value:N})}})}),I}},u=function(i,o,r){var a,s={},u=[],d=t.getBehavior("WUXNodeModelBehavior");if(e.is(d)){if(e.is(o))return n.getImpacted(o,!1,{excludeRelationTypes:["PrimaryResourceLinkDetail","SecondaryResourceLinkDetail"]}).forEach(function(t){var g,f,p,h,m=t.get("from"),I=t.get("to"),v=t.get("type");e.is(m,"array")&&e.is(I,"array")&&e.is(r,"array")&&(m=(p=m)[p.length-1],I=(h=I)[h.length-1],!c(p,h,r,v))||(f=o===m?I:m,e.is(f)&&(g=e.is(f,"array")?n.getInstance(f[f.length-1]):n.getReference(f),a=d.getNodeInfo(g.get("PID"),!0),e.is(a)&&(e.is(a.instancePID)?s=l(i,a.referencePID,a.instancePID,r):e.is(a.referencePID)&&(s=l(i,a.referencePID,null,r)),e.is(s)&&(u[g.id]={attributes:s}))))}),u}else t.debug("nodeModelBehavior is not available to update the relation attributes.")},{fillNodeOptions:function(o,r,u,c){var d,g=e.is(u)?u.PID:o.referencePID,f=l(r,g,null,c),p=n.needToQueryForConnections(g),h=i.getInverseRelationNameSet(),m=t.getPreferenceValue("navigateOnIndex"),I="Index"===m;for(d in f)if(f.hasOwnProperty(d)){if(I&&p&&h.has(d)){e.is(o.grid[d])||(o.grid[d]=[{Value:a.getNLSValue("Info.RelationsNotLoaded.Title")}]);continue}Array.isArray(o.grid[d])?(o.grid[d]=o.grid[d].filter(function(e){return e.Value!==a.getNLSValue("Info.RelationsNotLoaded.Title")}),e.is(u)&&(o.grid[d]=o.grid[d].concat(f[d]))):o.grid[d]=f[d]}if("IndexRelationsOnDemand"===m&&e.is(r)&&Array.isArray(r)&&p)for(const e in o.grid)o.grid.hasOwnProperty(e)&&r.indexOf(e)>=0&&(s.isMGALoadRelationsOnDemand()?o.grid[e].push({Value:"",Icon:"LinksNotFetched"}):o.grid[e].push({Value:a.getNLSValue("Info.RelationsNotLoaded.Title"),Icon:null}));return o},getRelationAttributes:function(n,o,r){var a,s,c,d,g,f,p,h,m=[],I=[],v=t.getBehavior("WUXNodeModelBehavior");if(e.is(v)){if(a=function(t){p=v.getNodeInfo(t),e.is(p,"array")&&p.forEach(function(t){e.is(t.instancePID)?(h=e.is(t.absPath,"array")?t.absPath:null,f=l(o,t.referencePID,t.instancePID,h),I[t.absPath]={attributes:f}):e.is(t.referencePID)&&(f=l(o,t.referencePID),I[t.referencePID]={attributes:f})})},n.isConnection())a(n.get("from")),!Array.isArray(n.get("to"))||"ProcessImplementLink"!==n.get("type")&&"PartialProcessImplementLink"!==n.get("type")?a(n.get("to")):a(n.get("to")[n.get("to").length-1]);else if(g=n.changedAttributes(),e.is(g))for(s=n.get("type"),d=i.getRelationsColumnDisplayOptions(s),e.is(d)?d.Attribute.forEach(function(e){m.push(e.name)}):m[0]="PLMEntity.V_Name",c=0;c<m.length;c++)if(g.hasOwnProperty(m[c])){I=u(o,n.get("PID"),r);break}return I}t.debug("nodeModelBehavior is not available to update the relation attributes.")}}}}),define("DS/DELPPWViewBehaviors/BI/MfgProcessBIBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin"],creator:function(t,n,i,o,r,a){var s,l,u=[],c={ItemAssignmentStatus:{Assigned_OneAdd:{colorCode:"#0000FF",label:r.getNLSValue("BI.ItemStatus.Assigned_OneAdd")},Assigned_AllAdd:{colorCode:"#CC79A7",label:r.getNLSValue("BI.ItemStatus.Assigned_AllAdd")},Assigned_AllRemove:{colorCode:"#FFFF00",label:r.getNLSValue("BI.ItemStatus.Assigned_AllRemove")},Assigned_AddNRemove:{colorCode:"#00FF00",label:r.getNLSValue("BI.ItemStatus.Assigned_AddNRemove")},Assignable:{colorCode:"#FFA500",label:r.getNLSValue("BI.ItemStatus.Assignable")},NonAssignable:{colorCode:"#A9A9A9",label:r.getNLSValue("BI.ItemStatus.NonAssignable")},Inconsistent:{colorCode:"#000000",label:r.getNLSValue("BI.ItemStatus.Inconsistent")}},SystemUpdateStatus:{UpToDate:{colorCode:"#008000",label:r.getNLSValue("BI.ProcessStatus.UpToDate")},InDirectlyImpacting:{colorCode:"#FFFF00",label:r.getNLSValue("BI.ProcessStatus.InDirectlyImpacting")},DirectlyImpacting:{colorCode:"#FF0000",label:r.getNLSValue("BI.ProcessStatus.DirectlyImpacting")},Inconsistent:{colorCode:"#000000",label:r.getNLSValue("BI.ProcessStatus.Inconsistent")}}},d=function(t){var i,o,r=(o=n.getBehavior("TreeListViewBehavior").getColumnsByDisplayType("BIEssentials")).length>0?o[0]:null,a={nodeOptions:{}};return e.is(r)&&(i={colorCode:c[l].Inconsistent.colorCode,tooltip:c[l].Inconsistent.label,status:"Inconsistent"},i=e.is(u[t])?u[t]:i,a.nodeOptions[r]={colorCode:i.colorCode,tooltip:i.tooltip,status:i.status}),a},g=function(t){var i,o;e.is(l)&&(i=t[l],o=c[l],e.is(i,"array")&&i.length>0&&(i.forEach(function(e){var t,n,i=e.get("id"),r=e.get("status");t=o[r].colorCode,n=o[r].label,u[i]={rirPath:i,colorCode:t,tooltip:n,status:r}}),function(){var t,i=n.getBehavior("WUXNodeModelBehavior"),o=i.getAllDescendants();i&&Object.keys(u).length>0&&(i.prepareUpdate(),t={callback:function(t,n){t.forEach(function(e){var t=e.getRIRpath(),n=d(t);n.nodeOptions&&e.updateOptions(n.nodeOptions)}),e.is(n,"function")&&n()},globalArray:o,context:this,blockSize:100},a.getExecuteByBlockPromise(t).then(function(){i.pushUpdate()}))}()))},f=function(){var t,i=n.getBehavior("TreeListViewBehavior"),o=n.getBehavior("WUXNodeModelBehavior"),r=i.getColumnsByDisplayType("BIEssentials"),a={};u=[],i&&o&&r&&(t=o.getAllDescendants(),r.forEach(function(n){a[n]={colorCode:"transparent",tooltip:""},e.is(t,"array")&&0<t.length&&o.withTransactionUpdate(function(){t.forEach(function(e){e.updateOptions(a)})})}))},p=function(){var e=n.getBehavior("WUXNodeModelBehavior");i.getBICmdState()&&e.getSelectedNodesInfo().length>0&&i.computeBI()};return{listenTo:function(){return{updateBIStatus:g,resetBIModel:f,refreshCmd:p}},onStart:function(t){s=t||{},e.is(s.biStatusType)&&(l=s.biStatusType)},onStop:function(){},getNodeOptions:function(t,n){var o={nodeOptions:{},taggerOptions:{}};return i.getBICmdState()&&e.is(n)&&(o=d(n)),o},getBICmdState:function(){return i.getBICmdState()},resetBIModelCollection:function(){return i.resetBIModelCollection()}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";var n=function(e){var t,n=!1;return e.isHeader||(n=(t=e.nodeModel.getAttributeValue("cellInfo"))&&t.candidateEntries&&t.candidateEntries.length>1),n};return t.singleton({name:"MILColumnManager",init:function(e){this._parent(e)},hasMILCellValue:function(e){return!0},getCellTypeRepresentation:function(e){var t;if(e.isHeader)return"string";switch(e.dataIndex){case"MIL_previous":case"MIL_manufactured":t="url";break;case"MIL_rerouting":t=n(e)?"enumString":"string";break;case"MIL_suggestion":t="enumString";break;default:t="string"}return t},getCellClassName:function(t){var n,i,o="";return e.is(t.nodeModel)&&(i=t.nodeModel.options.milStatus,"MIL_status"===t.dataIndex?(n=t.cellView.getContent(),"fail"===i?o="mil-fail-status":"success"===i?o="mil-success-status":"ignore"===i&&(o="mil-ignored-status"),""!==o&&n.hasClassName(o)&&(o="")):"MIL_manufactured"!==t.dataIndex&&"MIL_previous"!==t.dataIndex||(o="icon-text-column"),"MIL_status"!==t.dataIndex&&"success"===i&&(o+=" mil-succeeded-row"),"MIL_status"!==t.dataIndex&&"ignore"===i&&(o+=" mil-ignored-row")),o},getCellValue:function(t){var n,i,o=t.nodeModel.options.grid,r=function(e,t){return{label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}}};switch(t.dataIndex){case"MIL_previous":return n=o.cellInfo.PreviousProdIconUrl,r(o[t.dataIndex],n);case"MIL_manufactured":return n=o.cellInfo.MfgItemIconUrl,r(o[t.dataIndex],n);case"MIL_rerouting":return i=o[t.dataIndex],"object"===e.typeOf(i)&&e.is(this.isCellInEdition,"function")&&(this.isCellInEdition(t.cellID)&&(i=o[t.dataIndex].valueItem),i=o[t.dataIndex].labelItem),i;case"MIL_suggestion":return e.is(o[t.dataIndex])&&!t.isHeader&&e.is(this.isCellInEdition,"function")?this.isCellInEdition(t.cellID)?o[t.dataIndex].value:o[t.dataIndex].label:null;default:return o[t.dataIndex]}},getCellSemantics:function(e){var t,i=e.nodeModel.options,o=function(e){var t={};return e.forEach(function(e){t[e.labelItem]=e.valueItem}),t};return"MIL_rerouting"===e.dataIndex?i.grid&&i.grid.cellInfo&&n(e)&&(t={possibleValues:o(i.grid.cellInfo.candidateEntries)}):"MIL_suggestion"===e.dataIndex&&i.grid&&i.grid.cellInfo&&(t={possibleValues:o(i.grid.cellInfo.suggestionToPerformEntries)}),t},setMILValue:function(t,n,i){var o,r,a;if("MIL_suggestion"===t.dataIndex){if(!e.is(i)||""===i)return;n.nodeModel.options.grid.cellInfo.suggestionToPerformEntries.forEach(function(e){e.valueItem===i&&(a={label:e.labelItem,value:e.valueItem,tooltip:e.tooltipItem,getLabel:function(){return this.label}})}),n.nodeModel.setAttribute(t.dataIndex,a),e.is(n.nodeModel)&&e.is(n.nodeModel.options)&&(o=n.nodeModel.options,e.is(o.grid)&&(o.grid.MIL_suggestion=a,e.is(o.grid.cellInfo)&&(o=o.grid.cellInfo,e.is(o.action)&&(o.action=i))))}else if("MIL_rerouting"===t.dataIndex){if(!e.is(i)||""===i)return;n.nodeModel.options.grid.cellInfo.candidateEntries.forEach(function(e){e.valueItem===i&&(r=e)}),n.nodeModel.setAttribute(t.dataIndex,r)}},getCellEditableState:function(t){var i,o,r=!0;if(e.is(t.nodeModel)&&e.is(t.nodeModel.options))switch(o=t.nodeModel.options.milStatus,"MIL_suggestion"!==t.dataIndex||!e.is(o)||"success"!==o&&"ignore"!==o||(r=!1),t.dataIndex){case"MIL_suggestion":i=r;break;case"MIL_rerouting":i=n(t);break;default:i=!1}return i}})}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,i){var o,r,a;return o=function(e){var t={};t.node=e.nodeModel,i.executeCommand("Relations",t)},r=function(r){var a,s=void 0,l=this,u=[],c=this.getColumnOrGroup(r.columnID),d=r.nodeModel.getAttributeValue(c.dataIndex);return e.is(d,"array")&&d.length>0&&((a=d).forEach(function(e){u.push({icon:{iconPath:n.getIconURLFromKey(e.Icon),iconSize:{width:"22px",height:"22px"}},label:e.Value,iconName:e.Icon,func:i.areModuleColumnsImmutable(t.getId())?null:o.bind(l,r),relations:a})}),u.func=i.areModuleColumnsImmutable(t.getId())?null:o.bind(l,r),s=u),s},a=function(t,n){var i=[],o=t.nodeModel.getAttributeValue(n);return e.is(o,"array")&&o.length>0&&o.forEach(function(t){var n=e.is(t.Value)?t.Value:t.toString();i.push(n)}),i.join(",")},{getCellValueForExport:function(t){var n,i,o="";return t.rowID<0?t.cellModel:(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),e.is(i,"array")&&i.forEach(function(t,n){e.is(t.Value)?o+=t.Value:o+=t.toString(),n!==i.length-1&&(o+=", ")}),o)},getCellValue:function(e){return r.call(this,e)},getCellValueForFilter:function(t,n){var i,o;return e.is(t)&&e.is(n)&&(o=n.getAttributeValue(t),Array.isArray(o)&&(i=o.map(t=>e.is(t.Value)?t.Value:t.toString()))),i.length>0?i:void 0},hasCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.options.grid;return Array.isArray(n[t.dataIndex])&&0!==n[t.dataIndex].length},getCellClassName:function(t){var n,i="";return e.is(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(t.dataIndex),i=Array.isArray(n)&&n.length>1?"relation-column-multivalued":"relation-column"),i},getCellGroupingKey:function(e,t){return a.call(this,e,t)}}}}),define("DS/DELPPWViewBehaviors/BI/BIBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","ProductImplementPlugin","DicoPlugin"],creator:function(t,n,i,o,r,a,s,l){var u,c,d,g={},f={},p=[],h=function(){return u.pprTypes.indexOf("PROCESS")>-1||u.pprTypes.indexOf("SERVICE")>-1||u.pprTypes.indexOf("CONSTRUCTION")>-1},m=function(){return u.pprTypes.indexOf("PART")>-1||u.pprTypes.indexOf("PRODUCT")>-1},I=function(t){var i,o,r={colorCode:f.Inconsistent.colorCode,tooltip:f.Inconsistent.label,status:"Inconsistent"},s=(o=n.getBehavior("TreeListViewBehavior").getColumnsByDisplayType("BIEssentials")).length>0?o[0]:null,u={nodeOptions:{},taggerOptions:{}};if(""===t)return u={nodeOptions:null,taggerOptions:null};if(e.is(s)){if("ManufacturingItemUpdateStatus"===s&&(i=t.split(","))[i.length-1],e.is(p[t]))r=p[t];else{const e=t.split(","),n=e[e.length-1];l.getParentTypes(a.getReferenceModel(n).get("type")).includes("VPMRepReference")&&(r={colorCode:"transparent",tooltip:""})}u.nodeOptions[s]={colorCode:r.colorCode,tooltip:r.tooltip,status:r.status},u.taggerOptions={absolutePath:t,status:r.status,dispValue:r.tooltip}}return u},v=function(t){e.is(t,"array")&&t.length>0&&(t.forEach(function(t){var n,i,o,r,a=t.get("status"),s=t.get("type"),l=e.is(t.get("isRef")),u=[];"ProductsAssignmentStatus"===s?(n=(u=(r=t.get("id")).split(","))[u.length-1],i=g[a].colorCode,o=g[a].label):"MfgItemsUpdateStatus"===s&&(n=(u=(r=t.get("id")).split(","))[u.length-1],e.is(t.get("MadeFrom_UseCase_AttValue"))&&"MadeFrom_UseCase_Att_Remove"!==a&&(a=a+"."+t.get("MadeFrom_UseCase_AttValue")),i=f[a].colorCode,o=f[a].label),p[e.is(r)?r:n]={PID:n,colorCode:i,tooltip:o,type:s,occurrencePath:r,status:a,isRef:l}}),function(){var t,o=n.getBehavior("WUXNodeModelBehavior"),r=n.getBehavior("TaggerBehavior"),s=o.getAllDescendants();o&&Object.keys(p).length>0&&(o.prepareUpdate(),t={callback:function(t,n){!0===i.getBICmdState()&&t.forEach(function(e){var t=e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),n=I(t);n.nodeOptions&&e.updateOptions(n.nodeOptions),r&&n.taggerOptions&&r.addExternalTags(n.taggerOptions)}),e.is(n,"function")&&n()},globalArray:s,context:this,blockSize:100},a.getExecuteByBlockPromise(t).then(function(){o.pushUpdate(),r.displayExternalTags(),n.notify("BIDone",n.getId())}))}())},b=function(e){var t;h()?t=e.ProcessStatus:m()&&(t=e.ProductStatus),v(t)},y=function(e){h()?v([e]):m()&&v([e])},P=function(e){h()?v([e]):m()&&v([e])},C=function(){var t,i=n.getBehavior("TreeListViewBehavior"),o=n.getBehavior("WUXNodeModelBehavior"),r=n.getBehavior("TaggerBehavior"),a=i.getColumnsByDisplayType("BIEssentials"),s={};p=[],i&&o&&a&&(t=o.getAllDescendants(),a.forEach(function(n){s[n]={colorCode:"transparent",tooltip:""},e.is(t,"array")&&0<t.length&&o.withTransactionUpdate(function(){t.forEach(function(e){e.updateOptions(s)})})}),r&&r.removeExternalTags())},D=function(){var e=n.getBehavior("WUXNodeModelBehavior");i.getBICmdState()&&e.getSelectedNodesInfo().length>0&&i.computeBI()},S=function(e){var t=Array.isArray(e)?e:[e],n=!1;return i.isBIComputed()&&(n=t.some(function(e){return e.get("type")===c})),n},R=function(t){var o,r=Array.isArray(t)?t:[t];!0===i.getBICmdState()&&(h()||m())&&(S(r)?h()&&i.computeBI():(o=!1===i.getBICmdState()?{silent:!0}:{},r.forEach(function(t){!function(t,o){var r,a,s,l,u,c,g,f=o||{},p=n.getBehavior("WUXNodeModelBehavior");(r=t.get("type"))===d&&e.is(p)&&(a=t.get("from"),s=t.get("to"),l=s.join(),g=i.getBIModelCollection(),h()&&(u=p.getNodeInfo(a),Array.isArray(u)&&u.forEach(function(t){var n,o,a=t.absPath.join();n=g.findWhere({id:a}),e.is(n)?n.set({pointedPaths:l,status:i.getProcessStatus(r,l)},f):(o={id:a,pointedPaths:l,status:i.getProcessStatus(r,l),type:"MfgItemsUpdateStatus"},g.add(o,f))})),m()&&(c=p.getNodeInfo(s),Array.isArray(c)&&c.forEach(function(t){var n,o,s,l,u=t.absPath.join();n=g.findWhere({id:u}),e.is(n)?(o=n.get("implementingPIDs"),Array.isArray(o)?o.includes(a)||(s=o.concat(a),n.set({implementingPIDs:s,status:i.getProductStatus(s,r)},f)):n.set({implementingPIDs:[a],status:i.getProductStatus([a],r)},f)):(l={id:u,implementingPIDs:[a],status:i.getProductStatus([a],r),type:"ProductsAssignmentStatus"},g.add(l,f))})))}(t,o)})))},V=function(t){var o,r=Array.isArray(t)?t:[t];!0===i.getBICmdState()&&(h()||m())&&(S(r)?h()&&i.computeBI():(o=!1===i.getBICmdState()?{silent:!0}:{},r.forEach(function(t){!function(t,o){var r,a,s,l,u,c,g=o||{},f=n.getBehavior("WUXNodeModelBehavior");(r=t.get("type"))===d&&e.is(f)&&(a=t.get("from"),s=t.get("to"),c=i.getBIModelCollection(),h()&&(l=f.getNodeInfo(a),Array.isArray(l)&&l.forEach(function(t){var n,o=t.absPath.join();n=c.findWhere({id:o}),e.is(n)&&n.set({pointedPaths:"",status:i.getProcessStatus(r)},g)})),m()&&(u=f.getNodeInfo(s),Array.isArray(u)&&u.forEach(function(t){var n,o,s,l=t.absPath.join();n=c.findWhere({id:l}),e.is(n)&&(o=n.get("implementingPIDs"),Array.isArray(o)&&(-1!==(s=o.indexOf(a))?(o.splice(s,1),n.set({implementingPIDs:o,status:i.getProductStatus(o,r)},g)):n.set({status:i.getProductStatus([],r)},g)))})))}(t,o)})))};return{listenTo:function(){return{updateBIStatus:b,addBIModel:y,changeBIModel:P,refreshCmd:D,resetBIModel:C,connectionAdded:R,connectionRemoved:V}},onStart:function(e){u=e||{},c=s.getScopeLinkType(),d=s.getImplementLinkType(),g={AssociatedWithScope:{colorCode:"#006400",label:r.getNLSValue("BI.PrdStatus.AssociatedWithScope")},NotAssigned:{colorCode:"#FFA500",label:r.getNLSValue("BI.PrdStatus.NotAssigned")},AssignedIndirectly:{colorCode:"#00008B",label:r.getNLSValue("BI.PrdStatus.AssignedIndirectly")},AssignedDirectly:{colorCode:"#ADD8E6",label:r.getNLSValue("BI.PrdStatus.AssignedDirectly")},AssignedMoreThanOnce:{colorCode:"#bd07b0",label:r.getNLSValue("BI.PrdStatus.AssignedMoreThanOnce")},NotAssignable:{colorCode:"#808080",label:r.getNLSValue("BI.PrdStatus.NotAssignable")},NotApplicable:{colorCode:"#A9A9A9",label:r.getNLSValue("BI.PrdStatus.NotApplicable")},PartiallyAssigned:{colorCode:"#8B4513",label:r.getNLSValue("BI.PrdStatus.PartiallyAssigned")}},f={NotApplicable:{colorCode:"#A9A9A9",label:r.getNLSValue("BI.MfgStatus.NotApplicable")},ScopeGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ScopeGood")},ScopeToOldRev:{colorCode:"#7030a0",label:r.getNLSValue("BI.MfgStatus.ScopeToOldRev")},ScopeToAncestorBranch:{colorCode:"#7030a0",label:r.getNLSValue("BI.MfgStatus.ScopeToAncestorBranch")},ScopeToNew:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ScopeToNew")},ScopeNoCorrespondingProductOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ScopeNoCorrespondingProductOccurence")},ImplGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ImplGood")},ImplGoodWithGoodScope:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ImplGoodWithGoodScope")},ImplCandidatePrdOccWithGoodScope:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScope")},ImplCandidatePrdOccWithGoodScopeEvolveInstance:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScopeEvolveInstance")},ImplCandidatePrdOccWithScopeToOldRev:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToOldRev")},ImplCandidatePrdOccWithScopeToAncestorBranch:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToAncestorBranch")},ImplCandidatePrdOccButNotCorrespondingScope:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccButNotCorrespondingScope")},ImplCandPrdOccToSamePrd:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrd")},ImplCandPrdOccToSamePrdEvolveInstance:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrdEvolveInstance")},ImplCandPrdOccToOtherRev:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToOtherRev")},ImplCandPrdOccToAncestorBranch:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToAncestorBranch")},ImplCandPrdOccToDiffPrd:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToDiffPrd")},ImplNoCandProdOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ImplNoCandProdOccurence")},ImplNoProductOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ImplNoProductOccurence")},IntermediateGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.IntermediateGood")},IntermediateChildrenNotUptoDate:{colorCode:"#FFFF00",label:r.getNLSValue("BI.MfgStatus.IntermediateChildrenNotUptoDate")},Inconsistent:{colorCode:"#000000",label:r.getNLSValue("BI.MfgStatus.Inconsistent")},MadeFrom_UseCase_Att_Add:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Add")},MadeFrom_UseCase_Att_Remove:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Remove")},MadeFrom_UseCase_Att_Good:{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good")},"MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom")},"MadeFrom_UseCase_Att_Good.ManufacturingAssembly":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingAssembly")},"MadeFrom_UseCase_Att_Good.EngineeringMadeFrom":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.EngineeringMadeFrom")}}},onStop:function(){},getNodeOptions:function(t){var n={nodeOptions:{},taggerOptions:{}};return i.getBICmdState()&&e.is(t)&&(n=I(t)),n},getBICmdState:function(){return i.getBICmdState()},resetBIModelCollection:function(){return i.resetBIModelCollection()},clearPseudoBIStatus:function(){i.clearPseudoBIStatus()}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/WUXResourceParameterRowDragDrop",["UWA/Core"],function(e){"use strict";return function(t,n){var i,o,r,a;return i=function(){return!1},o=function(e,n){var i;return i={protocol:"3DXContent",version:"1.1",source:t.getConfig().appId,widgetId:widget.id,data:{draggedRowPID:n.nodeModel.getReferencePID()}},e.dataTransfer.setData("Text",JSON.stringify(i)),e.dataTransfer.effectAllowed="move",!1},r=function(e){return e.preventDefault(),!0},a=function(i,o){var r,a,s,l,u=!1;return e.is(i.dataTransfer)&&e.is(i.dataTransfer.getData)&&(l=i.dataTransfer.getData("Text"),e.is(l)&&(l=JSON.parse(l),e.is(l.source)&&e.is(l.widgetId)&&l.source===t.getConfig().appId&&l.widgetId===widget.id&&(u=!0))),u&&e.is(o.droppedNodes)&&e.is(o.nodeModel)?(r=o.droppedNodes[0],a=o.nodeModel,r.getReferencePID()===a.getReferencePID()&&(u=!1),"top"===o.dropPosition?s=o.rowID:"bottom"===o.dropPosition&&(s=o.rowID+1),e.is(s)&&r._getRowID()!==s||(u=!1)):u=!1,u&&n.notify("moveResourceParameterRow",[r.options.resourceParameterPID,r.getReferencePID(),s.toString()]),!1},{init:function(){},getDDBehavior:function(){return{onDragStartRowHeader:i,onDragRowHeader:i,onDragOverRowHeader:i,onDragEnterRowHeader:i,onDragLeaveRowHeader:i,onDragEndRowHeader:i,onDropRowHeader:i,onDragStartCell:o,onDragCell:i,onDragOverCell:r,onDragEnterCell:i,onDragLeaveCell:i,onDragEndCell:i,onDropCell:a,onDragStartBlank:i,onDragBlank:i,onDragOverBlank:i,onDragEnterBlank:i,onDragLeaveBlank:i,onDragEndBlank:i,onDropBlank:i}}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubInfoContainer",[],function(){"use strict";const e=(...e)=>{let t=new Map;for(const n of e)for(const e of n)t.set(...e);return t};class t{constructor(e,t){this.ids=e,this.infoMap=new Map(t)}static empty(){return new t([],new Map)}addId(e){return this.ids.push(e),this}setInfo(e,t){return this.infoMap.set(e,t),this}combine(n){const i=this.ids.concat(n.ids),o=e(this.infoMap,n.infoMap);return new t(i,o)}}return t}),define("DS/DELPPWViewBehaviors/RoutingsViewer3DBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["Viewer3DPlugin","DatabasePlugin","RootsPlugin"],creator:function(t,n,i,o,r){var a,s,l,u,c,d,g,f,p,h,m,I,v,b;return a=function(e){return"PRODUCT"===o.getPPRType(e)},s=function(e){return"PROCESS"===o.getPPRType(e)},l=function(e){return"SYSTEM"===o.getPPRType(e)},u=function(e){var t,n=[];return l(e)?o.getImpacted(e,null,{relationTypes:["ProcessImplementLink"]}).forEach(function(e){var i=e.get("to");(t=o.getImpacted(i,null,{relationTypes:["ProductImplementLink"]})).length>0&&n.push(t[0].get("to"))}):s(e)&&(t=o.getImpacted(e,null,{relationTypes:["ProductImplementLink"]})).length>0&&n.push(t[0].get("to")),n},c=function(e){var t=[];return a(e)?o.getImpacted(e,null,{relationTypes:["ProductImplementLink"]}).forEach(function(e){var n=e.get("from");o.getImpacted(n,null,{relationTypes:["ProcessImplementLink"]}).forEach(function(e){t.push(e.get("from"))})}):s(e)&&o.getImpacted(e,null,{relationTypes:["ProcessImplementLink"]}).forEach(function(e){t.push(e.get("from"))}),t},d=function(t){var i,o=!1;return e.is(t)&&(i=r.getRoots(n.getId())[0],o=(t=Array.isArray(t)?t:[t]).some(function(e){return i.indexOf(e)>-1})),o},I=function(e){var t=[];e.forEach(function(e){var n;(n=c(e)).length>0&&d(n)||t.push(e)}),t.length>0&&i.remove3D(t)},p=function(e){var t=[];return(e=Array.isArray(e)?e:[e]).forEach(function(e){var n,i,o;"ProcessImplementLink"===e.get("type")?(n=e.get("from"),i=e.get("to"),d(n)&&(t=t.concat(u(i)))):"ProductImplementLink"===e.get("type")&&(i=e.get("from"),o=e.get("to"),n=c(i),d(n)&&t.push(o))}),t},g=function(e){var t,n=[];l(e)?n=u(e):s(e)&&(t=c(e),d(t)&&(n=u(e))),n.length>0&&i.drop3D(n)},f=function(e){var t=[];l(e)&&(t=u(e)),t.length>0&&I(t)},h=function(e){var t;(t=p(e)).length>0&&i.drop3D(t)},m=function(e){var t;(t=p(e)).length>0&&I(t)},v=function(t){var o,r,a,s=[],l=[],u=[];t.changed.isSelected||i.selectIn3D([]),t.selectedNodeIds.length>0&&((o=(r=n.getBehavior("SelectionBehavior")).getSelectionsWithPaths()[0]).length>0?(o.forEach(e=>{e.path.length>0?s.push(e.path):e.id&&u.push(e.id)}),a=n.getBehavior("LinkBehavior"),u.length>0?u.forEach(e=>{l=l.concat(a.getConnectedObjects(e,e,{relationTypes:["ProcessImplementLink"]}))}):s.length>0&&s.forEach(e=>{l=l.concat(a.getConnectedObjects(e[e.length-1],e,{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]}))})):(o=r.getSelectionsWithPaths()[1]).forEach(t=>{t.path.length>0?l.push(t.path):e.is(t.id)&&l.push(t.id)}),b(l))},b=function(e){var t=[],r=n.getBehavior("ProductAbsPathHelperBehavior"),a=[];e.forEach(function(e){var n,i;"string"==typeof e||e instanceof String?(n=e,i={relationTypes:["ProductImplementLink"]}):(n=e[e.length-1],i={relationTypes:["ProductImplementLinkOcc","ProductImplementLink"]}),o.getImpacted(n,null,i).forEach(function(n){t.push({from:e,type:n.get("type"),to:n.get("to")})})}),t.forEach(function(e){var t;Array.isArray(e.from)?(t=r.getImplementedProductAbsPath(e.from,e.to),a.push(t||e.to)):a.push(e.to)}),i.selectIn3D(a)},{listenTo:function(){return{select:v,addRootNode:g,removeRoot:f,connectionAdded:h,connectionRemoved:m}},onStart:function(){},apply3DFilter:function(){n.debug("RoutingsViewer3DBehavior::apply3DFilter is not supported at moment")},change3DVisiblity:function(e,t,i){n.debug("RoutingsViewer3DBehavior::change3DVisiblity is not supported at moment"),i.reject("RoutingsViewer3DBehavior::change3DVisiblity is not supported at moment")}}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/ManageCommands",["DS/CoreEvents/Events"],function(e){"use strict";return{showProcurementView:function(){e.publish({event:"ManageCommands/ProcurementView"})},showStructureView:function(){e.publish({event:"ManageCommands/StructuralGrouping"})}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManagerMFN",["UWA/Core","UWA/Class"],function(e,t){"use strict";const n=(e=>(...t)=>t.join(e))(" "),i=function(){let e=new Map;return{generateFor:function(t){let n;return n=e.has(t)?e.get(t)+1:1,e.set(t,n),n}}},o="MIL_previous",r="MIL_rerouting",a="MIL_suggestion",s="MIL_status",l="success",u="fail",c=t=>{let n=!1;return e.is(t)&&(n=!0,(t=>e.is(t,"string")&&0===t.length)(t)&&(n=!1)),n},d=t=>n=>i=>{let o=!1;if(!i.isHeader){const r=i.nodeModel;if(e.is(r)){const i=r.getAttributeValue("cellInfo");if(e.is(i)){const e=i[t];o=n(e)}}}return o},g=d("candidateEntries")(e=>Array.isArray(e)&&e.length>1),f=d("suggestionToPerformEntries")(e=>Array.isArray(e)&&e.length>0),p=t=>{let n=!1;const i=t.options.milStatus;return e.is(i)&&(n=i===l),n};return t.singleton({name:"MILColumnManager",init(e){this._parent(e)},hasMILCellValue:e=>!0,getCellTypeRepresentation(e){let t;if(e.isHeader)t="string";else switch(e.dataIndex){case o:t="url";break;case r:t=g(e)?"enumString":"string";break;case a:t=f(e)?"enumString":"string";break;default:t="string"}return t},getCellClassName(t){const i="",r="mil-success-status",a="mil-fail-status",c="icon-text-column",d=(e=>t=>e.cellView.getContent().hasClassName(t))(t);let g=i;if(e.is(t.nodeModel)){const e=t.nodeModel.options.milStatus,i=t.dataIndex;i===s?e===l?d(r)||(g=r):e===u&&(d(a)||(g=a)):(i===o&&(g=c),e===l&&(g=n(g,"mil-succeeded-row")))}return g},getCellValue(t){const n=(e,t)=>({label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}});let i=null;if(e.is(t.nodeModel)){const s=t.nodeModel.options.grid,l=t.dataIndex;switch(l){case o:if(e.is(s[l])&&!t.isHeader){const t=s.cellInfo;e.is(t)&&(i=n(s[l],t.PreviousProdIconUrl))}break;case r:case a:e.is(s[l])&&(t.isHeader||e.is(this.isCellInEdition,"function")&&(i=this.isCellInEdition(t.cellID)?s[l].value:s[l].label));break;default:i=s[l]}}return i},getCellSemantics(t){const o=t=>{const o=(e=>t=>{const i=e.generateFor(t);return n(t,(e=>"["+e+"]")(i))})(new i);return t.reduce((t,n)=>{const i=n.labelItem;if(e.owns(t,i)){t[o(i)]=n.valueItem}else t[i]=n.valueItem;return t},{})};let s=null;if(e.is(t.nodeModel)){const n=t.nodeModel.options.grid,i=t.dataIndex;if(e.is(n)){const l=n.cellInfo;e.is(l)&&(i===r?g(t)&&(s={possibleValues:o(l.candidateEntries)}):i===a&&f(t)&&(s={possibleValues:o(l.suggestionToPerformEntries)}))}}return s},setMILValue(t,n,i){if(e.is(n.nodeModel)){let o=n.nodeModel.options.grid;const s=t.dataIndex;if(s===a){if(c(i)){let t=o.cellInfo;if(e.is(t)){const r=t.suggestionToPerformEntries.find(e=>e.valueItem===i);if(e.is(r)){const e={label:r.labelItem,value:r.valueItem,tooltip:r.tooltipItem,getLabel:function(){return this.label}};n.nodeModel.setAttribute(s,e),o[a]!==e&&(o[a]=e),t.action=i}}}}else if(s===r&&c(i)){let t=o.cellInfo;if(e.is(t)){const a=t.candidateEntries.find(e=>e.valueItem===i);if(e.is(a)){const e={label:a.labelItem,value:a.valueItem,tooltip:a.labelItem,getLabel:function(){return this.label}};n.nodeModel.setAttribute(s,e),o[r]!==e&&(o[r]=e)}if("#SELECT"===i)t.candidateId=null,t.candidateOccPath=null;else{const e=i.split(",");t.candidateId=function(e,t=null){const n=e.length;return n>0?e[n-1]:t}(e,""),t.candidateOccPath=e}}}}},getCellEditableState(t){let n;switch(t.dataIndex){case a:n=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;p(e)?n=!1:e.isExpanded()&&e.hasChildren()&&(n=!1)}return n})(t);break;case r:n=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;n=!p(e)&&g(t)}return n})(t);break;default:n=!1}return n}})}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightLinkHelper",["UWA/Core"],function(e){"use strict";return function(t,n,i,o){var r,a,s,l="CrossHighlightLinkHelper",u=i.getImplementLinkType();return r=function e(t,n){var i,r,a,s;if(r=o.getInstance(t).get("isInstanceOf"),0===(a=o.getInstancesFromCollection(r).map(function(e){return e.get("PID")})).length)return[];if((s=a.filter(function(e){return-1!==n.indexOf(e)})).length>0)return s;for(i=0;i<a.length&&!((s=e(a[i],n)).length>0);i++);return s},a=function(e){var t,n,i,o,a,s=[],l=[];for(l.push(e[0]),t=0;t<e.length-1;t++){for(s=[],i=e[t],n=0;n<i.length;n++)-1!==l[t].indexOf(i[n])&&(a=e[t+1],o=r(i[n],a),s=s.concat(o));l.push(s)}return l.length>0?l[l.length-1]:[]},s=function(t){return o.findSomeConnection(function(n){var i=u===n.get("type"),o=e.equals(t,n.get("to"));return i&&o}).map(function(e){return e.get("from")})},{getImplementLinks:function(e){return n?i.getImplLinksOfImplementing(e):i.getImplLinksOfImplemented(e)},isImplemented:function(e){var t,n=!1;return t=this.getImplementLinks(e),Array.isArray(t)&&t.length>0&&(n=!0),n},getParentScoped:function(t){var n,o,r,a=null;return Array.isArray(t)&&t.length>0&&(r=i.findInstanceWhoseParentIsScoped(t),e.is(r)&&(0===r.absPathIndex?o=r.instanceModel.get("isAggregatedBy"):n=t.slice(0,r.absPathIndex))),e.is(n)?a=n:e.is(o)&&(a=o),a},getScopedNodePrdAbsolutePath:function(n){var r,a,s,u,c,d=function(t){var n,i=!1;return n=o.getReferenceModel(t),e.is(n)&&"PROCESS"===n.get("PPRTYPE")&&(i=!0),i};if(Array.isArray(n)){if(0===(r=n).length)return t.debug(l,"Error: getScopedNodePrdAbsolutePath: expected reference id for root node"),null;if(!d(r[r.length-1]))return t.debug(l,"Error: getScopedNodePrdAbsolutePath: expected a Manufacturing Item"),null;if(!i.isScoped(r))return null;if(i.isUnderScope(r)){c=[],s=r.slice(0);do{if(!i.isUnderScope(s))break;if(u=i.getImplLinksOfImplementing(s),!e.is(u)||u.length>1||0===u.length){c=null;break}c=u[0].get("to").concat(c),s=this.getParentScoped(s)}while(Array.isArray(s))}else u=i.getImplLinksOfImplementing(r),c=e.is(u)&&1===u.length?u[0].get("to"):[]}else c=d(a=n)&&i.isScoped(a)?[]:null;return c},getImplementingItemInstIDs:function(t){var n,r,l,c,d,g,f,p,h=[],m=null;if(Array.isArray(t)){if(0===(n=t).length)return null;r=n.slice(0);do{l=i.getPathToScope(r),c=o.findSomeConnection(function(t){var n=u===t.get("type"),i=e.equals(l,t.get("to"));return n&&i}).map(function(e){return e.get("from")}),!e.is(m)&&n.length!==r.length&&c.length>0&&(m=c),h.unshift(c),r=this.getParentScoped(r)}while(Array.isArray(r));d=!1,e.equals(i.getPathToScope(n),n)||e.is(m)&&(d=!0),d?(g=h[h.length-1].length>0?a(h):h[h.length-1],f=s(n),p=g.concat(f)):p=h.length>0?h[h.length-1]:[]}else p=null;return p}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/GroupingDialog",["UWA/Core"],function(e){"use strict";return function(t,n,i){var o,r;return o=function(o){var a=e.createElement("div",{class:"Message-dialog-content-container"});(r=new(i.getComponent("ComboBox"))({elementsList:["type","current","organization","owner","V_NeedDedicatedSystem","V_isLastVersion","revision"],selectedIndex:0})).inject(a),n.create("Dialog",{title:"GROUPING DIALOG",content:a,minHeight:200,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Ok:n.create("Button",{onClick:function(e){var t=e.dsModel.dialog,n=r.value;t.close(),o(n)}}),Cancel:n.create("Button",{onClick:function(e){e.dsModel.dialog.close(),t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}})}}).close=function(){this.destroy(),t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}},{show:function(e){o(e)}}}}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/MfgProcessCrossHighlightBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin"],creator:function(t,n,i){var o,r,a,s,l,u,c,d,g,f,p,h,m,I,v,b,y,P="MfgProcessCrossHighlightBehavior";return s=function(t){var i=n.getBehavior(t);return e.is(i)||n.debug(P+" : "+t+"behavior is not available "),i},u=function(){o=Object.create(null)},l=function(e,t){o[e.toString()]=t},c=function(e){delete o[e.toString()]},d=function(){return Object.keys(o).reduce(function(e,t){return e.concat(o[t])},[])},g=function(){var t=s("WUXNodeModelBehavior"),i=r;return i&&e.is(t)&&t.isDocumentEmpty()&&(i=!1,n.debug(P+" : Not computing crossHighlight as document is empty")),i},f=function(t,o){var r,l,u,c=s("LinkBehavior"),d=[];return e.is(c)&&(r=i.getPPRType(t),u=a[r],Array.isArray(u)?(d=c.getConnectedObjects(t,o,{relationTypes:u})).length>0&&("SERVICE"===r||"SYSTEM"===r)&&(l=c.getConnectedUsagePoints(t,{relationTypes:u})).length>0&&(d=d.concat(l)):n.debug(P+" : Couldnt _computeConnectedObjs as crossHighLightLinkTypes config is not available for "+r)),d},p=function(t,n){var i,o,r,a,s;if(t.isVisible()){if(r=t,e.is(n))for(i=1;i<n.length&&(a=!1,s=r.getVisibleChildren(!1,!0),e.is(s)&&0!==s.length);i++){for(o=0;o<s.length;o++)if(s[o].getInstancePID()===n[i]){r=s[o],a=!0;break}if(!a)break}}else for(r=t.getParent();!r.isVisible();)r=r.getParent();return r},h=function(t){var n=s("WUXNodeModelBehavior"),o=[],r={},a={};return e.is(n)&&(n.getAllDescendants().forEach(function(t){var n,i,o;n=t.getReferencePID(),t.isRoot()?o=n:(i=t.getInstancePID(),o=t.getAbsolutePath().toString()),e.is(n)&&(e.is(r[n])||(r[n]=[]),r[n].push(o)),e.is(i)&&(e.is(r[i])||(r[i]=[]),r[i].push(o)),e.is(o)&&(a[o]=t)}),t.forEach(function(t){var n,s,l;Array.isArray(t)?(n=t[0],e.is(r[n])&&r[n].forEach(function(e){o.push(p(a[e],t))}),l=i.getInstance(n),e.is(l)&&(s=l.get("isAggregatedBy"),e.is(s)&&e.is(r[s])&&r[s].forEach(function(e){0===a[e].getChildren(!0).length&&o.push(p(a[e]))}))):e.is(r[t])&&r[t].forEach(function(e){o.push(p(a[e]))})})),o},m=function(e){var t,n=s("WUXNodeModelBehavior");n&&Array.isArray(e)&&e.length>0&&(t=h(e)).length>0&&n.withTransactionUpdate(function(){t.forEach(function(e){e.highlight()})})},I=function(){var e,t=s("WUXNodeModelBehavior");t&&(e=t.getHighlightedNodes(),Array.isArray(e)&&e.length>0&&t.withTransactionUpdate(function(){e.forEach(function(e){e.unhighlight()})}))},v=function(){u()},b=function(t){var n;g()&&e.is(t)&&((t=Array.isArray(t)?t:[t]).forEach(function(t){var n,i,o=t.nodeId,r=t.isSelected,a=t.absPath;e.is(o)&&e.is(r)&&e.is(a)&&(i=a.length>0?a:o,r?(n=f(o,a),l(i,n)):c(i))}),I(),n=d(),m(n))},y=function(t){var i,o=s("WUXNodeModelBehavior");g()&&e.is(o)&&e.is(t)&&e.is(t.sourceId)&&e.is(t.changed)&&(i=t.changed,t.sourceId!==n.getId()&&i.isSelected&&o.unSelectAll(),b(i))},{listenTo:function(){return{refreshAll:v,select:y,reComputeCrossHighlight:b,onNodeExpanded:this.reHighlightMyView,onNodeCollapsed:this.reHighlightMyView}},onStart:function(t){r=!!e.is(t.enableCrossHighlight)&&t.enableCrossHighlight,a=e.is(t.crossHighLightLinkTypes)?t.crossHighLightLinkTypes:{},u()},onStop:function(){o=null},reHighlightMyView:function(){var e;g()&&o&&Object.keys(o).length>0&&(I(),e=d(),m(e))}}}}}),define("DS/DELPPWViewBehaviors/RefreshBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","DocumentPlugin"],creator:function(t,n,i,o,r){var a,s=function(){var t=o.getNLSValue("View."+n.getId()+".Title"),i=a.getRoots(),r=n.getBehavior("TreeListViewBehavior"),s={action:[],parameters:[]};a.emptyNodeModel(),e.is(i,"array")&&i.length>0&&(i.forEach(function(e,t){s.action[t]="addRoot",s.parameters[t]={rootReferencePID:e}}),r.processDropEffect(s).then(function(){n.notify("onRefreshedAll",[i]),n.info(o.getNLSValue("RefreshAll.Success",{view:t}))}).catch(function(){n.warn(o.getNLSValue("RefreshAll.Failure",{view:t}))}))},l=function(t){var s,l,u,c,d,g={noTimeout:!0},f=!!e.is(t.impactedChildren),p=function(t){var n=e.clone(t.impactedChildren),i=e.clone(t.impactedObjects);a.withTransactionUpdate(function(){n.forEach(function(e){a.updateNode(e,{loadChildren:!0})}),i.forEach(function(e){a.updateNode(e)})})};if(f)l=e.clone(t);else if((s=a.getSelectedNodesInfo().map(function(e){return e.id})).length<1)return;n.notify("startProgress",g),f?(p(l),n.notify("stopProgress",g)):((l={impactedChildren:[],impactedObjects:[]}).impactedChildren=(u=[],c=[],d=[],s.forEach(function(t){var n=i.getReferenceModel(t);(function e(t){var n=i.getInstancesFromCollection(t);-1===u.indexOf(t)&&u.unshift(t),c=c.concat(n),n.forEach(function(t){var n,o=t.get("PID"),r=i.getReferenceModel(o);n=i.getImpacted(o,!1,{onlyInstanceRelations:!0}),d=d.concat(n),e(r.get("PID")),r.setAdditionalInfo({queriedForChildren:!1})})})(t),i.getImpacted(t).forEach(function(e){d.push(e)}),e.is(r)&&r.removeDocumentConnections(t),n.setAdditionalInfo({queriedForDocuments:!1,queriedForChildren:!1,queriedForConnections:!1})}),i.removeInstance(c,{silent:!0}),i.removeConnection(d,{silent:!0}),n.notify("instanceRemoved",[c]),n.notify("connectionRemoved",[d]),u),i.getDescendantsFromServer(s,function(e){p(l),f||(n.notify("connectionAdded",[e.connections,{loadRelatedobjectsToView:!1}]),n.notify("refreshImpacted",[l])),n.info(o.getNLSValue("RefreshSelected.Success",{view:o.getNLSValue("View."+n.getId()+".Title")})),n.notify("stopProgress",g)},{fetchInverseRelations:!0,forceDBMode:!0,silentMode:!0,includeXcadDrawings:n.getPreferenceValue("includeXcadDrawingsInEBOMView")}))};return{listenTo:function(){return{refreshAll:s,RefreshCmd:l,refreshImpacted:l}},onStart:function(){a=n.getBehavior("WUXNodeModelBehavior")},onStop:function(){},onRefreshSelected:l}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubBIBehavior",["UWA/Core","UWA/Promise"],function(e,t){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin"],creator:function(n,i,o,r){var a,s,l,u,c,d,g,f,p,h,m,I,v,b,y,P,C,D,S,R="#FFA500",V="#56B4E9",A="#008000",w="Alternate",L="RefSubst",E="InstSubst",M={EMPTY:{colorCode:"transparent",label:""},NO_ENG_ALTERNATES:{colorCode:R,label:r.getNLSValue("AltSubBI.noEngAlternate")},NO_MFG_OR_ENG_ALTERNATES:{colorCode:R,label:r.getNLSValue("AltSubBI.noMfgOrEngAlternate")},EBOM_HAS_ENG_ALTERNATE:{colorCode:V,label:r.getNLSValue("AltSubBI.ebomHasEngAlternate")},MBOM_HAS_ENG_ALTERNATE:{colorCode:V,label:r.getNLSValue("AltSubBI.mbomHasEngAlternate")},HAS_MFG_ALTERNATE:{colorCode:A,label:r.getNLSValue("AltSubBI.hasMfgAlternate")}},N=!1;return s=function(){return a.indexOf("PROCESS")>-1||a.indexOf("SERVICE")>-1||a.indexOf("CONSTRUCTION")>-1},l=function(){return a.indexOf("PART")>-1||a.indexOf("PRODUCT")>-1},u=function(e,t,n){e.has(t)?e.set(t,e.get(t).concat(n)):e.set(t,[n])},c=function(e){return{AltSubBI:{colorCode:e.colorCode,tooltip:e.label},altSubBIComputed:e!==M.EMPTY}},d=function(t){return t.filter(function(t){var n=!0,i=t.options;return e.is(i.altSubBIComputed,"boolean")&&(n=!i.altSubBIComputed),n})},g=function(e,t){var n;return n={PrimaryItemPhysicalId:e},t.length>0&&(n.SubstituteInstancePhysicalId=t),n},f=function(e,t){var n=i.getBehavior("WUXNodeModelBehavior");n.prepareUpdate(),e.forEach(function(e){var n=t(e.getReferencePID(),e.getInstancePID());e.updateOptions(c(n))}),n.pushUpdate()},p=function(e,t){i.getBehavior("WUXNodeModelBehavior").updateNodeOptions(e,c(t))},h=function(n,i){var r={alternateRefIds:new Set,referenceSubstInfoMap:new Map,instanceSubstInstIdMap:new Map};return new t(function(t,a){o.getAlternateEnggItemInfoPromise(n,i).then(function(n){Object.keys(n).forEach(function(t){var i,o,a=n[t];e.owns(a,"Alternate")&&r.alternateRefIds.add(t),e.owns(a,"ReferenceSubstitute")&&(i=e.owns(a,"referenceIds")?a.referenceIds:[],r.referenceSubstInfoMap.set(t,i)),e.owns(a,"InstanceSubstitute")&&(e.owns(a,"instanceIds")&&(o=a.instanceIds),Array.isArray(o)&&o.forEach(function(e){r.instanceSubstInstIdMap.set(e,t)}))}),t(r)}).catch(function(e){a(e)})})},m=function(n){var i=new Map;return new t(function(t,r){var a,s,l;a=["Proposed","Qualified"],l=o.groupingBy(n,function(e){return e.getReferencePID()},function(e){return e.isRoot()?[]:[e.getInstancePID()]}),s=Array.from(l.keys()).map(function(e){var t=l.get(e);return g(e,t)}),h(s,a).then(function(o){n.forEach(function(t){var n=null,r=t.getReferencePID(),a=null;t.isRoot()||(a=t.getInstancePID()),o.alternateRefIds.has(r)?n=w:o.referenceSubstInfoMap.has(r)?o.referenceSubstInfoMap.get(r).includes(t.getParent().getReferencePID())&&(n=L):e.is(a)&&o.instanceSubstInstIdMap.has(a)&&(n=E),e.is(n)&&i.set(a||r,{referenceId:r,absPath:t.getAbsolutePath(),parentId:t.isRoot()?null:t.getParent().getReferencePID(),alternateType:n})}),t(i)}).catch(function(e){r(e)})})},I=function(){return new t(function(e){e(b())})},v=function(e){var t;return t=e.map(function(e){var t=e.isRoot()?null:e.getInstancePID();return{referenceId:e.getReferencePID(),instanceId:t}}),o.getMultipleAltSubContextProductsPromise(t)},b=function(){return o.findConnections({type:"MfgProcessAlternate"}).map(function(e){return e.get("from")})},y=function(t){m(t).then(function(n){f(t,function(t,i){var o=e.is(i)?i:t;return n.has(o)?M.EBOM_HAS_ENG_ALTERNATE:M.NO_ENG_ALTERNATES}),i.notify("AltSubBIDone",i.getId())}).catch(function(e){f(t,function(){return M.NO_ENG_ALTERNATES}),i.warn(r.getNLSValue("AltSubBI.errorMsg")),i.log("Error: "+e)})},P=function(t){I().then(function(e){var n;return f(t,function(t){return e.includes(t)?M.HAS_MFG_ALTERNATE:M.NO_MFG_OR_ENG_ALTERNATES}),n=t.filter(function(t){return!e.includes(t.getReferencePID())}),v(n)}).then(function(t){var n,r,a,s,l=Object.keys(t),c=new Map,d=new Map;l.length>0&&(s=l.map(function(e){return t[e]}),l.forEach(function(n){var i=t[n];e.is(i.instanceId)&&u(d,i.instanceId,n),u(c,i.referenceId,n)}),n=["Proposed","Qualified"],r=o.groupingBy(s,function(e){return e.referenceId},function(t){return e.is(t.instanceId)?[t.instanceId]:[]}),a=Array.from(r.keys()).map(function(e){var t=r.get(e);return g(e,t)}),h(a,n).then(function(e){var t,n=new Set,o=new Set,r=new Set;e.alternateRefIds.forEach(function(e){c.has(e)&&c.get(e).forEach(function(e){n.add(e)})}),e.referenceSubstInfoMap.forEach(function(e,t){c.has(t)&&c.get(t).forEach(function(e){o.add(e)})}),e.instanceSubstInstIdMap.forEach(function(e,t){d.has(t)&&d.get(t).forEach(function(e){r.add(e)}),c.has(e)&&c.get(e).forEach(function(e){r.add(e)})}),t=Array.from(n).concat(Array.from(o),Array.from(r)),p(t,M.MBOM_HAS_ENG_ALTERNATE),i.notify("AltSubBIDone",i.getId())}))}).catch(function(e){f(t,function(){return M.NO_MFG_OR_ENG_ALTERNATES}),i.warn(r.getNLSValue("AltSubBI.errorMsg")),i.log("Error: "+e)})},C=function(e){var t=d(e);t.length>0&&(l()?y(t):s()&&P(t))},D=function(){var t,n=i.getBehavior("WUXNodeModelBehavior"),r=n.getAllDescendants();r.length>0&&(n.prepareUpdate(),t={callback:function(t,n){f(t,function(){return M.EMPTY}),e.is(n,"function")&&n()},globalArray:r,context:this,blockSize:100},o.getExecuteByBlockPromise(t).then(function(){n.pushUpdate(),i.notify("AltSubBICleared",i.getId())}).catch(function(e){n.pushUpdate(),i.log("An error occured:"+e)}))},S=function(e){var t=i.getBehavior("WUXNodeModelBehavior");(s()||l())&&(!0===(N=e.state)?C(t.getVisibleNodesInViewport()):D())},{listenTo:function(){return{BIAltSub:S}},onStart:function(e){a=e.pprTypes},onStop:function(){},isCmdActive:function(){return N},showBIStatus:function(e){C(e)},getStatusEnum:function(){return M}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a,s,l,u,c,d,g,f){const p=function(e,t){this.rirPath=e,this.isVisible=t};var h,m,I,v,b,y,P,C=i.getComponent("WUXCommandsManager"),D=new Set(["CreateAssemblyAndScopeAltSubst","CreateProvideAndScopeAltSubst","CreateMaterialAndScopeAltSubst","CreateKitAndScopeAltSubst","CreateContinuousProvidedMaterialAndScopeAltSubst","CreateServiceAttachingAndScopeAltSubst","CreateServiceSpareAndScopeAltSubst"]),S=new Set(["CreateAssemblyAndResultingProductAltSubst","CreateProvideAndResultingProductAltSubst","CreateMaterialAndResultingProductAltSubst","CreateKitAndResultingProductAltSubst","CreateServiceAttachingAndResultingProductAltSubst","CreateServiceSpareAndSResultingProductAltSubst"]);return localStorage.setItem("isExploreWebAppEnabled","false"),y=function e(t,n){return t.hasChildren()&&t.getChildren(!0).forEach(function(t){let i=s.getImpacted(t.getInstancePID(),!0,{relationTypes:["ProcessImplementLinkOcc"]});0===i.length?e(t,n):i.forEach(function(e){let t=s.transformToRIROccurrencePath(e);f.isAggregatingRootLoadedInViewer(t)&&n.push(t)})}),n},P=function(t){let n=[],i=[],o=[];return 0===(n=s.getImpacted(t.getReferencePID(),!0,{relationTypes:["ProcessImplementLink"]})).length&&e.is(t.getInstancePID())?0===(i=s.getImpacted(t.getInstancePID(),!0,{relationTypes:["ProcessImplementLinkOcc"]})).length?o=y(t,o):i.forEach(function(e){let t=s.transformToRIROccurrencePath(e);f.isAggregatingRootLoadedInViewer(t)&&o.push(t)}):n.forEach(function(e){let t=s.transformToRIROccurrencePath(e);f.isAggregatingRootLoadedInViewer(t)&&o.push(t)}),o},v=function(i,o){var a,l,u,c,d,g,h,m,I=[];switch(o=o||{},l=n.getAppContext(),i){case"EditInstruction":n.notify("editWorkInstruction",o.infos.objectToBeModified);break;case"EditRichText":c=o.getColumnIDFromDataIndex("DELLmiRichText.V_RichText"),d=o.getColumnOrGroup(c),o.infos=r.getNodeAndColumnInfos(o.node,d),o.selectedNodes.forEach(function(e){I.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})}),n.notify("editRichText",[I,o.infos]);break;case"EditResourceParameterPlan":o.infos.objectToBeModified.state=!0,t.isStarted("RPPMOD")?n.notify("computeResourceParamPlan",o.infos.objectToBeModified):n.notify("editResourceParameterPlan",o.infos.objectToBeModified);break;case"EditDataCollectRow":n.notify("editDataCollectRow",o.infos.objectToBeModified);break;case"DeleteDataCollectRow":n.notify("deleteDataCollectRow");break;case"EditResourceParameterRow":n.notify("editResourceParameteRow",o.infos.objectToBeModified);break;case"DeleteResourceParameterRow":n.notify("deleteResourceParameterRow");break;case"Quantity":c=o.getColumnIDFromDataIndex("DELFmiContQuantity_Mass.V_ContQuantity,DELFmiContQuantity_Area.V_ContQuantity,DELFmiContQuantity_Length.V_ContQuantity,DELFmiContQuantity_Volume.V_ContQuantity"),d=o.getColumnOrGroup(c),o.infos=r.getNodeAndColumnInfos(o.node,d),g=e.clone(o.infos.attributeInfo),e.is(g,"object")&&!e.owns(g,"Protection")&&(o.infos=r.getNodeAndColumnInfosForReference(o.node,d),g=e.clone(o.infos.attributeInfo)),g.Protection=1,o.infos.attributeInfo=g,o.selectedNodes.forEach(function(e){I.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})}),n.notify(i,[I,o.infos]);break;case"LoadIn3DViewer":case"LoadItemsIn3DViewer":case"ReframeIn3DViewer":h=o.selectedNodes[0],m={nodeId:h.getInstancePID()||h.getReferencePID(),absPath:h.getAbsolutePath()},n.notify(i,m);break;case"ReframeItemsIn3DViewer":h=o.selectedNodes[0],s.isProcess(h.getReferencePID())||s.isService(h.getReferencePID())?(h=o.selectedNodes[0],I.push(h.getRIRpath())):(Array.isArray(u)||(u=[],u=P(h)),I=u),n.notify(i,[I]);break;case"HideShowIn3DViewer":o.selectedNodes.forEach(function(e){let t;t=0===f.get3DVisibilityState(e.getRIRpath()),m=new p(e.getRIRpath(),t),I.push(m)}),n.notify("toggle3DVisibilityState",[I]);break;case"HideIn3DViewer":Array.isArray(u)||(u=[],o.selectedNodes.forEach(function(e){u=u.concat(P(e))})),u.forEach(function(e){m=new p(e,!1),I.push(m)}),n.notify("toggle3DVisibilityState",[I]);break;case"ShowIn3DViewer":Array.isArray(u)||(u=[],o.selectedNodes.forEach(function(e){u=u.concat(P(e))})),u.forEach(function(e){I.push(e)}),n.notify("computeShowItems3DVisibility",[I]);break;case"ShowOnlyIn3DViewerFromItems":h=o.selectedNodes[0],I.push(h.getRIRpath()),n.notify("computeShowOnly3DVisibility",[I]);break;case"ShowOnlyIn3DViewerFromRoutings":h=o.selectedNodes[0],Array.isArray(u)||(u=[],u=P(h)),I=I.concat(u),n.notify("computeShowOnly3DVisibility",[I]);break;case"ShowAllIn3DViewer":h=o.selectedNodes[0],I.push(h.getRIRpath()),n.notify("computeShowAll3DVisibility",[I]);break;case"CreatePartialScopeOnHeaderOperation":n.notify("CreatePartialScopeLinkOnHeaderOperation",[o.node.getAbsolutePath()]);break;default:a=C.getCommand(i,l),e.is(a)?(a.beginExecute(o),a.execute({sourceModuleId:n.getId()}),a.endExecute()):(a=C.getCommandCheckHeader(i,l),e.is(a)&&!1===a.getState()?(a.options.node={referencePID:o.node.getReferencePID(),instancePID:o.node.getInstancePID(),absPath:o.node.getAbsolutePath()},a.toggleState()):(o.selectedNodes.forEach(function(e){I.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})}),n.notify(i,[I,o.infos])))}},h=function(t,n){const i=n.options,o=i.restrictLinkCreation,r=i.mfgReferenceId,a=!!e.is(i.isContextMfgRoot,"boolean")&&i.isContextMfgRoot;let s="enabled";return"AddMfgItemToMBOMAltSub"===t?e.is(r)||(s="disabled"):"ReplaceByAlternate"===t?e.is(r)&&!a||(s="disabled"):e.is(o,"string")&&("ResultingProduct"===o?D.has(t)&&(s="disabled"):S.has(t)&&(s="disabled")),s},b=function(e){return{type:"TitleItem",title:o.getNLSValue(e,null,"ContextMenu.Header","Title")}},m=function(t,i,g,p){var m,I,b,y,R,V,A,w,L,E,M,N,T=e.is(i)&&e.is(i.infos)?i.infos.objectToBeModified:null,B=e.is(T)?T.get("type"):"";if(I="enabled",M=n.getAppContext(),e.is(t,"string"))R=t;else{if("object"!=typeof t)return void n.debug("Nodes should be an array of string or objects");e.is(t.text)&&e.is(t.command)&&(R=t.text,t=t.command)}if(b=o.getNLSValue(R,null,g,p),e.is(t))if("Refresh"===t&&l.isGroupingExist())I="disabled";else if("EditAttribute"===t)I="disabled","isCoProduct"===i.column.displayType||"V_SequencingMode"===i.infos.dataIndex||r.isReadOnly(i.infos.attributeInfo,i.infos.attributeDef)||!r.doesAttributeExist(i.infos.objectToBeModified,i.infos.attributeName)&&!r.isAttrApplicableForType(i.infos.objectToBeModified,i.infos.attributeName)||(I="enabled");else if("CreateMBOMStatus"===t){if(!a.isCreateMBOMv2())return;I="enabled"}else if("HideIn3D"===t||"ShowIn3D"===t)V=i.selectedNodes,"HideIn3D"===t?I=(w=V.every(function(e){return!1===e.options.hideShow3D}))?"disabled":"enabled":"ShowIn3D"===t&&(I=(L=V.every(function(e){return!0===e.options.hideShow3D}))?"disabled":"enabled");else if("EditResourceParameterPlan"===t){if(1!==(V=i.selectedNodes).length||!s.isWorkInstruction(T)||"DELResourceParameterPlanReference"!==B)return;E="url("+o.getIconURLFromKey(B)+")",I="enabled"}else if("EditInstruction"===t){if(1!==(V=i.selectedNodes).length||!s.isWorkInstruction(T)||"DELResourceParameterPlanReference"===B)return;E="url("+o.getIconURLFromKey(B)+")",I="enabled"}else if("EditRichText"===t){if(1!==(V=i.selectedNodes).length)return;E="pen-lines",I="enabled"}else if("CreatePartialScopeOnHeaderOperation"===t){if(E="url("+o.getIconURLFromKey("PartialProcessImplementLink")+")",1!==(V=i.selectedNodes).length||V[0].isRoot())return;if(!u.isAKindOf(V[0].getReferenceType(),"DELLmiHeaderOperationReference"))return;N=d.canCreatePartialScopeLink(V[0].getAbsolutePath()),e.is(N.errorMessage)&&(I="disabled")}else if("EditDataCollectRow"===t)I=1===(V=i.selectedNodes).length?"enabled":"disabled";else if("DeleteDataCollectRow"===t)I="enabled";else if(D.has(t)||S.has(t)||"AddMfgItemToMBOMAltSub"===t||"ReplaceByAlternate"===t)I=1===i.selectedNodes.length?h(t,i.selectedNodes[0]):"disabled";else if("Quantity"===t){if(1!==(V=i.selectedNodes).length||V[0].isRoot()||"ProcessContinuousProvide"!==i.node.object.type&&"DELContinuousServicePartReference"!==i.node.object.type&&"ProcessContinuousCreateMaterial"!==i.node.object.type)return;I="enabled",E="url("+o.getIconURLFromKey("EditQuantity")+")"}else if("LoadIn3DViewer"===t||"LoadItemsIn3DViewer"===t)if(1===i.selectedNodes.length){let e=i.selectedNodes[0],n=!1;I=(n="LoadItemsIn3DViewer"===t?d.isScoped(e.getReferencePID()):c.isScoped(e.getReferencePID()))?"enabled":"disabled"}else I="disabled";else if("ReframeIn3DViewer"===t)I=i.selectedNodes.length>1?"disabled":"enabled";else if("ReframeItemsIn3DViewer"===t)1===i.selectedNodes.length?(V=i.selectedNodes[0],s.isProcess(V.getReferencePID())||s.isService(V.getReferencePID())?I=f.isAggregatingRootLoadedInViewer(V.getRIRpath())?"enabled":"disabled":(Array.isArray(A)||(A=[],A=P(V)),I=0===A.length?"disabled":"enabled")):I="disabled";else if("HideShowIn3DViewer"===t){let e=!1;L=(V=i.selectedNodes).every(function(t){return f.isAggregatingRootLoadedInViewer(t.getRIRpath())&&(e=0!==f.get3DVisibilityState(t.getRIRpath())),e}),w=V.every(function(t){return f.isAggregatingRootLoadedInViewer(t.getRIRpath())&&(e=0===f.get3DVisibilityState(t.getRIRpath())),e}),I=L||w?"enabled":"disabled"}else"ShowIn3DViewer"===t||"HideIn3DViewer"===t?(V=i.selectedNodes,Array.isArray(A)||(A=[],V.forEach(function(e){A=A.concat(P(e))})),I=A.length>0?"enabled":"disabled"):"ShowOnlyIn3DViewerFromItems"===t?I=1===(V=i.selectedNodes).length&&!V[0].isRoot(!0)&&f.isAggregatingRootLoadedInViewer(V[0].getRIRpath())?"enabled":"disabled":"ShowOnlyIn3DViewerFromRoutings"===t?1===(V=i.selectedNodes).length&&s.isOperation(V[0].getReferencePID())?(Array.isArray(A)||(A=[],V.forEach(function(e){A=P(e)})),I=A.length>0?"enabled":"disabled"):I="disabled":"ShowAllIn3DViewer"===t?I=1===(V=i.selectedNodes).length&&V[0].hasChildren()&&f.isAggregatingRootLoadedInViewer(V[0].getRIRpath())?"enabled":"disabled":(m=C.getCommand(t,M),e.is(m)||(m=C.getCommandCheckHeader(t,M)),e.is(m)&&(I=m.isEnabled()?"enabled":"disabled"));return y=v.bind(null,t,i),{icon:e.is(E)?E:"url("+o.getIconURLFromKey(t)+")",type:"PushItem",title:b,label:b,sensitivity:I,state:I,callback:y,action:{callback:y}}},I=function(e){var t=!0;return"ExploreInWebApp"===e&&(t="true"===localStorage.getItem("isExploreWebAppEnabled")),["ExploreInWebApp"].indexOf(e)>-1&&a.isCloud()&&(t=!1),t},{getDefaultContextualMenu:function(){return["showAuxiliaryView","ProcessView","ItemsView","ResourcesView"]},buildContextualMenu:function(t,i,r,a){var s=[];return r=r||"Cmd",a=a||"Title",e.is(t,"array")?(t.forEach(function(t){var l,u,c,d=[];if(e.is(t,"object")&&e.is(t.groupName)){if("GroupBy"===t.groupName&&e.is(i.params)&&(c={insertRow:!1,expandCollapse:!1,pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!1,filter:!0},l=i.params.collectionView.buildDefaultContextualMenu(i.params,c),e.is(l[0])&&s.push(l[0])),"3DViewer"===t.groupName&&!g.isOpsViewerWidgetLinked())return;if("InsertObject"===t.groupName&&Array.isArray(t.insertCommands)&&(t.insertCommands.forEach(function(t){var n;"SEPARATOR"===t?n={type:"SeparatorItem"}:e.is(t,"object")&&e.is(t.headerName)?d.push(b(t.headerName)):n=m(t,i,r,a),e.is(n)&&d.push(n)}),u=o.getNLSValue(t.groupName,null,r,a),l=0===(d=(d=d.filter(function(e){return"TitleItem"===e.type||"enabled"===e.state})).filter(function(t,n){let i=!1;return i=!("TitleItem"!==t.type||!e.is(d[n+1])||"TitleItem"===d[n+1].type)||"PushItem"===t.type})).length?{icon:"url("+o.getIconURLFromKey(t.groupName)+")",type:"PushItem",title:u,label:u,state:"disabled"}:{icon:"url("+o.getIconURLFromKey(t.groupName)+")",type:"PushItem",title:u,label:u,state:"enabled",submenu:d},s.push(l)),!Array.isArray(t.commands))return n.debug('"commands" in a group should be an array'),null;t.commands.forEach(function(t){var n;n="SEPARATOR"===t?{type:"SeparatorItem"}:m(t,i,r,a),e.is(n)&&d.push(n)}),u=o.getNLSValue(t.groupName,null,r,a),l={icon:"url("+o.getIconURLFromKey(t.groupName)+")",type:"PushItem",title:u,label:u,state:"enabled",submenu:d},s.push(l)}else e.is(t,"object")&&e.is(t.headerName)?s.push(b(t.headerName)):e.is(t,"string")&&"SEPARATOR"===t?s.push({type:"SeparatorItem"}):I(t)&&(l=m(t,i,r,a),e.is(l)&&s.push(l))},this),s):(n.debug("Nodes should be an array"),null)},onContextMenuCallback:function(e,t){return v(e,t)}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/HideShow3DColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n){return{getNonModelDataIndexes:function(){return["hide_show_3D"]},hasCellValue:function(t){var n,i,o=!1;return n=t.nodeModel,i=this.getTreeDocument(),e.is(n)&&e.is(i)&&(o=!i.isGroupingNodeModel(n)),o},getCellValue:function(e){return e.nodeModel.options.hideShow3D},setCellValue:function(i){var o,r,a,s=i.nodeModel,l=!1,u=t.getBehavior("Viewer3DBehavior");o=s.options.hideShow3D,e.is(o)&&(l=!o),e.is(u)?(a=e.Promise.deferred(),u.change3DVisiblity(s.isRoot(!0)?s.getReferencePID():s.getAbsolutePath(),l,a),a.promise.then(function(){s.updateOptions({hideShow3D:l})}).catch(function(e){t.log((l?"Showing":"Hiding")+" 3D failed: "+e),t.warn(n.getNLSValue("HideShow3D.error")),s.updateOptions({hideShow3D:o})})):(r={nodeId:s.getInstancePID()||s.getReferencePID(),isVisible:l,absPath:s.getAbsolutePath()},t.notify("change3DVisibility",r))}}}}),define("DS/DELPPWViewBehaviors/DropZoneViewBehavior/DropZoneViewBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin"],creator:function(t,n,i,o){var r=null,a=null,s="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",l="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-plus",u={DROPHERE:1,PLUS:2};return{onStart:function(){var e,t,s;s=o.getComponent("Element"),a=new s("div",{class:"drop-zone-container"}),(r=new s("div",{class:"dropLayer"}))&&(e=new s("div",{class:"mfndnd_invite_container"}).inject(r))?(t=new s("div",{class:"mfndnd_invite_display",draggable:!1}).inject(e),new s("i",{class:"mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",draggable:"false"}).inject(t),new s("h5",{class:"font-3dsregular",text:i.getNLSValue("DragDrop.DropHere.Title")}).inject(t),r.inject(a)):n.debug("Could not create droplayer")},onStop:function(){e.is(a)&&(a.destroy(),a=void 0)},getContent:function(){if(a)return a},hide:function(){r?r.hide():n.debug("No container")},show:function(){r?r.show():n.debug("No container")},isVisible:function(){var e=!1;return r&&(e="none"!==r.getStyle("display")),e},setIcon:function(t){var o,r,a,c;if(c=function(e,t,n){r.removeClassName(e),r.addClassName(t),a.setHTML(i.getNLSValue(n))},o=this.getContent(),e.is(o)&&(r=o.getElement(".mfndnd_invite_img"),a=o.getElement(".font-3dsregular"),e.is(r)&&e.is(a)))switch(t){case u.DROPHERE:c(l,s,"DragDrop.DropHere.Title");break;case u.PLUS:c(s,l,"DragDrop.AddObjectInContext.Title");break;default:n.debug("wrong option")}this.show()},iconEnum:u}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/HideShowItems3DColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n){const i=Object.freeze({SHOWN:1,HIDDEN:0,PARTIAL:-1});return{getNonModelDataIndexes:function(){return["hide_show_items_3D"]},getCellSemantics:function(t){var o,r,a=t.nodeModel,s=!1;if(e.is(a)){const l=t.nodeModel.options.grid;if(e.is(l))switch(n.get3DVisibilityState(a.getRIRpath())){case i.SHOWN:o="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye pad_eye wux-ui-3ds-lg";break;case i.HIDDEN:o="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-off pad_eye_off wux-ui-3ds-lg";break;case i.PARTIAL:o="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-partial pad_eye_partial wux-ui-3ds-lg";break;default:s=!0}r=s?{disabled:s}:{icon:{iconClasses:o}}}return r},hasCellValue:function(t){var n,i,o=!1;return n=t.nodeModel,i=this.getTreeDocument(),e.is(n)&&e.is(i)&&(o=!i.isGroupingNodeModel(n)),o},getCellValue:function(e){return e.nodeModel.options.hideShowItems3D}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/LockColumnManager",["UWA/Core"],function(e){"use strict";const t={unlockCommand:"ActionBar_UnreserveCmd",lockCommand:"ActionBar_ReserveCmd",reserved:"reserved"};return function(n,i,o){var r,a,s,l,u,c,d,g;return a=function(t){var n,i,o,r,a=!1;return o=t.nodeModel,r=this.getTreeDocument(),e.is(o)&&e.is(r)&&(a=r.isGroupingNodeModel(o)),!a&&(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.name),!e.is(i))||!!e.is(i)},r=function(e){var o,r,a,s=[],l=n.getReferenceModel(e.nodeModel.getID()).id,u=e.nodeModel.getInstancePID();function f(e,n,o){let r,a,s={};return r="TRUE"===e?"key":"lock-open",s.icon={iconName:r,fontFamily:1,className:r},s.label=n,g&&(a="TRUE"===e?t.unlockCommand:t.lockCommand,s.func=(()=>{i.executeRefInstCommand(a,o)})),s}return a=this.getColumnOrGroup(e.columnID),o=c(e.nodeModel,a),r=d(o),s.push(f(o[0],r[0],{id:l,entity:"reference",value:o[0]})),o.length>1&&s.push(f(o[1],r[1],{id:u,entity:"instance",value:o[1]})),s},s=function(e,t){var n,i;return i=this.getColumnOrGroup(t),n=c(e.nodeModel,i),d(n).join(" | ")},l=function(e){var t,n=!1;if(!(e.rowID<0)){t=this.getColumnOrGroup(e.columnID),n=this.getTreeDocument().isGroupingNodeModel(e.nodeModel);let i=c(e.nodeModel,t);return(n?[]:d(i)).join(" | ")}return e.cellModel},u=function(e,t){var n,i;return i=this.getColumnOrGroup(e),n=c(t,i),d(n)},c=function(e,i){var o,r,a=[];return o=n.getReference(e.getReferencePID()),a.push(o.get(t.reserved)),(r=e.getAttributeValue(i.attribute.name))&&a.push(r),a},d=function(e){var t,n,i=[];return n="TRUE"===e[0]?"Cmd.RefLock.Title":"Cmd.RefUnlock.Title",i.push(o.getNLSValue(n)),e.length>1&&(t="TRUE"===e[1]?"Cmd.InstLock.Title":"Cmd.InstUnlock.Title",i.push(o.getNLSValue(t))),i},{updateColumnInfos:function(t,n,i){return n=n||{},i=i||{},g=!e.is(i.isViewEditable,"boolean")||i.isViewEditable,t.editableFlag=!1,t.getCellValue=r,t.hasCellValue=a,t.getCellClassName=function(){return"lock-icon"},t.getCellGroupingKey=s,t.getCellValueForExport=l,t.getCellTypeRepresentation=function(){return"url"},!(e.is(i.isViewFilterable,"boolean")&&!i.isViewFilterable)&&(!e.is(n.isFilterable)||n.isFilterable)&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:u}}),t}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop",["UWA/Core","UWA/Class/Promise","UWA/Utils/InterCom"],function(e,t,n){"use strict";return function(i,o,r,a,s,l,u,c){var d,g,f,p=null,h=function(t){var n="";return e.is(t)&&(n=e.is(t.get)?t.get("PPRTYPE"):e.is(t["ds6w:type_value"])?s.getPPRType(t["ds6w:type_value"]):e.is(t,"string")?s.getPPRType(t):(t=a.getReference(t.referenceID)).get("PPRTYPE")),n},m=function(t){var n=h(t),i=d.acceptedTypes;return!e.is(i)||-1!==i.indexOf(n)},I=function(e){return a.getLastElementInstanceInfoPID(e,"isAggregatedBy")},v=function(e){return a.getLastElementInstanceInfoPID(e,"isInstanceOf")},b=function(t){var n=null;return e.is(t)&&(e.is(t.instancePIDsArray,"array")&&t.instancePIDsArray.length>0&&(n=v(t.instancePIDsArray)),n||(n=a.isValidPID(t.rootReferencePID)?t.rootReferencePID:null)),n},y=function(t){var n=null;return e.is(t)&&(n=e.is(t.targetInstancePIDsArray,"array")&&t.targetInstancePIDsArray.length>0?v(t.targetInstancePIDsArray):a.isValidPID(t.targetRootReferencePID)?t.targetRootReferencePID:null),n},P=function(t,n){var i=o.getBehavior("DropZoneViewBehavior"),r=o.getBehavior("WUXNodeModelBehavior");e.is(i)&&(i.setIcon(t),e.is(r)&&(!0!==n||r.isDocumentEmpty()||i.hide()))},C=function(t){var n={action:new Array(t.draggedItems.length),parameters:new Array(t.draggedItems.length),message:new Array(t.draggedItems.length),dragNDropInfo:t},l=o.getBehavior("DropZoneViewBehavior"),u={parameters:null,message:null},c={createLink:null,createLinkOrInstance:null,addCA:null,addRoot:null,reOrderRoot:null,reOrder:null,reParent:null},d=function(e,t){var n=Array.isArray(i.getConfig().unAuthorizedTypes)?i.getConfig().unAuthorizedTypes:[];return!(n.indexOf(s.getPPRType(e))>-1&&n.indexOf(s.getPPRType(t))>-1)},g=function(n){var i=!1;return a.isValidPID(t.draggedItems[n].rootReferencePID)&&!e.is(a.getLastElement(t.draggedItems[n].instancePIDsArray))&&(i=!0),i},f=function(e){var n=!1,i=null,o=null;return g(e)||(i=I(t.draggedItems[e].instancePIDsArray),o=I(t.targetInstancePIDsArray),a.isValidPID(i)&&a.isValidPID(o)&&i===o&&(n=!0)),n},p=function(i){var o=!1,l=e.is(t.targetInstanceSiblingPID,"array")?t.targetInstanceSiblingPID:[],u=t.draggedItems[i],g=-1,p=a.getLastElement(u.instancePIDsArray),h=null,I=!1,v=t.draggedItems[i].type,b=s.getPPRType(v);return t.info.fromSameSource&&f(i)&&m(v)&&(s.isReorderPossible(b)?d(t.targetType,v)?(-1!==(g=l.indexOf(p))&&l.splice(g,1),e.is(c.reOrder,"number")?(n.action[i]="aggregatedAction",n.parameters[i]=c.reOrder,n.message[i]=null,e.is(n.parameters[c.reOrder])&&!n.parameters[c.reOrder].isTargetIdDragged&&(n.parameters[c.reOrder].movedInstancePID.push(p),n.parameters[c.reOrder].newChildrenPID=l)):((I=function(){var n=e.is(t.draggedItems,"array")?t.draggedItems:[],i=a.getLastElement(t.targetInstancePIDsArray);return-1!==n.findIndex(function(e){return a.getLastElement(e.instancePIDsArray)===i})}())?n.action[i]="aggregatedAction":(h=a.getLastElement(t.targetInstancePIDsArray),n.action[i]="reorder"),n.parameters[i]={movedInstancePID:[p],newChildrenPID:l,targetInstancePID:h,dropPosition:t.info.dropPosition,isTargetIdDragged:I},n.message[i]=null,c.reOrder=i),o=!0):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed")):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.ReOrderRestricted",{objectName:s.getPPRType(v)}))),o};return t.draggedItems.forEach(function(i,h){n.action[h]="error",n.parameters[h]=null,n.message[h]=null,function(i){var o=!1,s=null;return"middle"===t.info.dropPosition&&(t.targetRootReferencePID===t.draggedItems[i].rootReferencePID&&a.arrayCompare(t.draggedItems[i].instancePIDsArray,t.targetInstancePIDsArray)?(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.SameObject")):d(t.targetType,t.draggedItems[i].type)?(s="createLinkOrInstance",u.parameters={rootReferencePID:t.draggedItems[i].rootReferencePID,referencePID:b(t.draggedItems[i]),targetReferencePID:y(t),instancePID:a.getLastElement(t.draggedItems[i].instancePIDsArray),targetRootReferencePID:t.targetRootReferencePID,targetInstancePID:a.getLastElement(t.targetInstancePIDsArray),allowMove:t.info.fromSameSource&&"middle"===t.info.dropPosition,instancePIDsArray:t.draggedItems[i].instancePIDsArray,targetInstancePIDsArray:t.targetInstancePIDsArray,path:Array.isArray(t.path)?t.path:[]},e.is(c[s],"number")?(n.action[i]="aggregatedAction",n.parameters[i]=c[s],n.message[i]=null,n.parameters[c[s]].push(u.parameters)):(n.action[i]=s,n.parameters[i]=[u.parameters],n.message[i]=null,c[s]=i),o=!0):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed"))),o}(h)||function(e){var i=!1;return a.isValidPID(t.targetRootReferencePID)||"Change Action"===t.draggedItems[e].type&&(n.action[e]="addChangeAction",n.parameters[e]={rootReferencePID:t.draggedItems[e].rootReferencePID},n.message[e]=null,i=!0),i}(h)||function(e){var i=!1;return a.isValidPID(t.targetRootReferencePID)||"PPRContext"===t.draggedItems[e].type&&(n.action[e]="addPPRContext",n.parameters[e]={rootReferencePID:t.draggedItems[e].rootReferencePID},n.message[e]=null,i=!0),i}(h)||function(i){var o=!1;return a.isValidPID(t.targetRootReferencePID)?(P(l.iconEnum.DROPHERE,!0),n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAuthorized")):(u.parameters={PIDsToAddRoot:[b(t.draggedItems[i])]},e.is(c.addRoot,"number")?(n.action[i]="aggregatedAction",n.parameters[i]=c.addRoot,n.message[i]=null,e.is(n.parameters[c.addRoot])&&n.parameters[c.addRoot].PIDsToAddRoot.push(b(t.draggedItems[i]))):(n.action[i]="addRoot",n.parameters[i]=u.parameters,n.message[i]=null,c.addRoot=i),o=!0),o}(h)||function(e){var i=!1;return g(e)&&t.info.fromSameSource&&m(t.draggedItems[e].type)&&(n.action[e]="reorderRoots",n.parameters[e]={rootReferencePID:b(t.draggedItems[e]),targetRootReferencePID:t.targetRootReferencePID,position:t.info.dropPosition},n.message[e]=null,i=!0),i}(h)||p(h)||function(i){var o=!1,l=t.info.wuxLocalID,g=t.draggedItems[i].instancePIDsArray,p=a.getLastElement(g),h=I(t.targetInstancePIDsArray),v=e.is(t.targetInstanceSiblingPID,"array")?t.targetInstanceSiblingPID.slice(0):[],b=a.getReferenceModel(h),y=a.getReferenceModel(p),P=t.draggedItems[i].type,C=s.getPPRType(P);const{isInstancePossible:D,errorMessage:S}=a.computeIsInstancePossible(b,y);return t.info.fromSameSource&&"middle"!==t.info.dropPosition&&!f(i)&&a.isValidPID(h)&&m(P)&&D&&(s.isReparentPossible(C)?d(t.targetType,P)?a.isWorkInstruction(y)?(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.ReparentWorkInstruction")):("bottom"===t.info.dropPosition&&l++,v.splice(l,0,null),u.parameters={instancesPIDsToReparent:[p],formerInstancesParentPIDs:[I(g)],newParentPID:h,newParentInstancesOrder:v},e.is(c.reParent,"number")?(n.action[i]="aggregatedAction",n.parameters[i]=c.reParent,n.message[i]=null,e.is(n.parameters[c.reParent])&&(n.parameters[c.reParent].instancesPIDsToReparent.push(p),n.parameters[c.reParent].formerInstancesParentPIDs.push(u.parameters.formerInstancesParentPIDs[0]),n.parameters[c.reParent].newParentInstancesOrder.splice(l,0,null))):(n.action[i]="reparent",n.parameters[i]=u.parameters,n.message[i]=null,c.reParent=i),o=!0):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed")):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.MoveInstanceRestricted",{objectName:s.getPPRType(P)}))),o}(h)||o.debug("AbstractDragAndDropManager.InternalError")},this),n},D=function(e){return e.preventDefault(),!0},S=function(e){return e.some(function(e){const t=e.object.type;return s.isReferencesHasReadOnlyType(t)})},R=function(t){var n,i,o,r=[];if(e.is(t,"object"))return n=t.targetType,e.owns(t,"draggedItems")&&Array.isArray(t.draggedItems)&&t.draggedItems.length>0&&(r=t.draggedItems.reduce(function(t,r){return e.owns(r,"isManufacturable")&&"FALSE"===r.isManufacturable&&(i=r.type,"PROCESS"!==s.getPPRType(n)&&"CONSTRUCTION"!==s.getPPRType(n)&&"SERVICE"!==s.getPPRType(n)||"PRODUCT"!==s.getPPRType(i)||(o=b(r),e.is(o)&&t.push(a.getReferenceModel(o)))),t},[])),r},V=function(t,n){var i=o.getBehavior("UXFactoryBehavior"),a=r.getNLSValue("NON-BOM.Confirmation.Title"),s=r.getNLSValue("NON-BOM.Confirmation.Message");i.showConfirmation(a,s,{attributes:["PLMEntity.V_Name","revision"],models:t},function(t){e.is(t,"boolean")&&t&&n()})};return{init:function(t){var n=this;d=t||{},e.is(d.dropZone)&&(d.dropZone.addEventListener("drop",function(e){e.preventDefault(),n.onTreeListViewDrop(e)}),d.dropZone.addEventListener("dragover",function(e){e.preventDefault()}))},isAcceptedType:function(e){return m(e)},getDraggedReferencePID:function(e){return b(e)},getDDBehavior:function(){return{onDragStartCell:this.onDragStartCell,onDragStartRowHeader:this.onDragStartCell,onDragEndCell:this.onDragEndCell,onDragEnterRowHeader:this.onDragEnterRowHeader,onDragLeaveRowHeader:this.onDragLeaveRowHeader,onDragEnterColumnHeader:this.onDragEnterColumnHeader,onDragLeaveColumnHeader:this.onDragLeaveColumnHeader.bind(this),onDragEnterCell:this.onDragEnterCell,onDragLeaveCell:this.onDragLeaveCell,onDropCell:this.onDropCell.bind(this),onDropRowHeader:this.onDropCell.bind(this),onDragEnterBlank:this.onDragEnterBlank,onDragLeaveBlank:this.onDragLeaveBlank,onDropBlank:this.onDropBlank.bind(this),onDropColumnHeader:this.onDropColumnHeader.bind(this),onDragOverRowHeader:D,onDragOverCell:D,onDragOverBlank:D,onDragOverColumnHeader:D}},processRootDrop:function(n,i,s,l,u,c,g){var f,p,I=!1,v=o.getBehavior("WUXNodeModelBehavior"),b=r.getNLSValue(o.getId()),y=r.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:b}),C=r.getNLSValue("AbstractDragAndDropManager.AddRoot.Error",{view:b}),D=o.getBehavior("DropZoneViewBehavior"),S=function(t,n,a,s){var l,c,g,f={},y=n||{},S=o.getBehavior("WUXNodeModelBehavior"),R=function(){o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!0}),o.warn(C,p,"failed"),s()},V=function(t,n){var i=r.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{objectName:n,view:b});o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!0}),o.log(i,p,"completed"),null!==u?(g=o.getBehavior("ExpandFilterBehavior"),e.is(g)?g.applyFilter(u,a):(o.debug("Expand filter behavior is not available on this module"),a())):a()},A=!!e.is(y.forceDBMode,"boolean")&&y.forceDBMode,w=!!e.is(y.forceIndexMode,"boolean")&&y.forceIndexMode;t=e.is(t,"array")?t:[t],S.prepareUpdate(),t.forEach(function(t){var n,u,g;n=t,c=e.is(v)?v.validate(n):null,e.is(c)?(e.is(D)&&P(D.iconEnum.DROPHERE,!0),f[c.param]=c.paramValue,l=r.getNLSValue(c.key,f,"ValidationError"),o.warn(l,p,"failed"),s()):e.is(v)&&m(t)?(o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!1}),v.addNode(t,{onAddToTreeListFail:R,onAddToTreeListComplete:V,forceDBMode:A,forceIndexMode:w})):e.is(i)&&i&&(u=h(t),g=e.is(d.pprTypesWithSupportedViews)?d.pprTypesWithSupportedViews:[],!e.is(g)||-1!==g.indexOf(u))?(o.notify("referenceAdded",[t]),a()):(I=!0,o.notify("addToAuxiliaryView",[t]),a())}),I&&(o.info(r.getNLSValue("AbstractDragAndDropManager.RepositionAuxView")),e.is(D)&&P(D.iconEnum.DROPHERE,!0)),S.pushUpdate()},R=function(n,i){var a,s,l,u,d=[],f=[],p=[],h={modelsFetched:[]};(i=i||{}).moduleID=o.getId(),e.is(i.modelsNotRetrieved)&&(h.modelsNotRetrieved=i.modelsNotRetrieved,s=(s=r.getNLSValue("AbstractDragAndDropManager.ObjectsNotRetrieved")).replace("%n",i.modelsNotRetrieved.length),o.warn(s)),e.is(i.modelsFromForceDB)&&(f=i.modelsFromForceDB),(n=e.is(n,"array")?n:[n]).forEach(function(n){f.indexOf(n.get("PID"))>-1?(p.push(n),e.is(h.modelsFromForceDB)||(h.modelsFromForceDB=[]),h.modelsFromForceDB.push(n.get("PID"))):(a=new t(function(e,t){S(n,i,e,t)}),d.push(a)),h.modelsFetched.push(n.get("PID"))}),p.length>0&&(l=o.getBehavior("UXFactoryBehavior"),u=r.getNLSValue("AbstractDragAndDropManager.indexOrDBDialog"),s=r.getNLSValue("AbstractDragAndDropManager.RootsNotInIndex"),l.showConfirmation(u,s,{attributes:["PLMEntity.V_Name"],models:p},function(n){e.is(n,"boolean")&&n&&(a=new t(function(e,t){S(p,i,e,t)}),d.push(a))})),t.all(d).then(function(){c(h)},function(){g(h)})};p=o.log(y),f=a.getReferencesFromArray(n),n.length!==f.length?f=a.fetchRoot(n,{onComplete:R,onFailure:function(){o.warn(r.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),p),o.debug("Failed to fetch refernce for PID: "+n),g()},context:this,silent:!0}):R(f)},retrieveItems:function(t){var n,i,r,a,s,l=[],u="",c=["text/searchitems","text/plain","Text"];if(!e.is(t))return o.debug("ERROR: No dropped item found"),l;for(r=e.is(t.dataTransfer.types.indexOf,"function")?"indexOf":"contains",a=0;a<c.length&&""===u;a++)s=t.dataTransfer.types[r](c[a]),(e.is(s,"number")&&s>=0||e.is(s,"boolean")&&!0===s)&&(u=c[a]);if(""===u)return o.debug("ERROR: No data retrieved"),l;n=t.dataTransfer.getData(u);try{i=e.Json.decode(n)}catch(e){return l}return e.is(i)?e.is(i.data)?e.is(i.data.items,"array")?i.data.items:(o.debug("ERROR: Items is not an array"),l):(o.debug("ERROR: No data retrieved"),l):(o.debug("ERROR: Parsing returned null"),l)},onDragStartCell:function(t,n){var u,c,d,g=[],f=n.nodeModel,p=widget.data,h=l.get3DSpaceServiceName(),m=o.getBehavior("WUXNodeModelBehavior"),I=o.getBehavior("ExpandFilterBehavior"),v={widgetId:widget.id,appId:p.x3dSharedId};return e.is(I)&&e.is(I.getFilterProxy())&&(u=I.getFilterProxy())&&u.getCtxForSharing&&(v=u.getCtxForSharing()),c={protocol:"3DXContent",version:"1.1",source:i.getConfig().appId,widgetId:widget.id,data:{items:[]},biProxyCtx:v},d={properties:[function(){return{property:"envId",value:l.getPlatformID({serviceId:h})}},function(){return{property:"serviceId",value:h}},function(){return{property:"contextId",value:p.Credentials}},function(){return{property:"objectId",value:e.is(this.getReferencePID)?this.getReferencePID():null}},function(){var t=null;return{property:"objectType",value:t=e.is(this.object)&&e.is(this.object.defType)?this.object.defType:e.is(t)?t:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"secondaryObjectType",value:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:e.is(this.getReferenceType)?r.getNLSValue(this.getReferenceType(),null,"Type"):null}},function(){var t,n,i,o=[];if(e.is(this.getRIRpath))for(t=this.getRIRpath(),Array.isArray(t)&&0===t.length&&t.push(this.getReferencePID()),i=0;i<t.length;i++)n=i%2==1?a.getInstance(t[i]):a.getReference(t[i]),o.push({resourceid:t[i],type:n.get("type")});return{property:"path",value:o}},function(){var t,n=this.options.grid;return e.is(this.getReferenceType,"function")&&"PRODUCT"===s.getPPRType(this.getReferenceType())&&e.owns(n,"VPMReference.V_IsManufacturable")&&(t=n["VPMReference.V_IsManufacturable"]),{property:"isManufacturable",value:t}}]},f.isSelected()||f.select(),n.cellView.collectionView.getTreeDocument().getXSO().get().forEach(function(t){e.is(m)&&!m.isFakeNodeModel(t)&&g.push(t.dump(d))}),c.data.items=g,t.dataTransfer.setData("Text",JSON.stringify(c)),t.dataTransfer.effectAllowed="copyMove",!1},getDragNDropInfo:function(t,n){var i,o,r,s={draggedItems:[],info:{fromWUX:!1,dropPosition:null,fromSameSource:!1},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};return e.is(t)&&e.is(t.dataTransfer)&&e.is(t.dataTransfer.getData,"function")&&(o=t.dataTransfer.getData("Text"),e.is(o,"string")&&o.length>0&&(r=JSON.parse(o),e.is(r)&&e.is(r.widgetId,"string")&&(s.info.fromSameSource=r.widgetId===widget.id,e.is(r.data.items,"array")&&r.data.items.length>0&&(s.info.fromManageCapableResource=!!e.is(r.data.items[0].linkId))))),e.is(n)&&e.is(n.nodeModel,"object")&&e.is(n.dropPosition)&&(s.info.fromWUX=!0,s.info.dropPosition=n.dropPosition,s.targetTreeNodeModel=n.nodeModel,e.is(n.nodeModel.isDummyNode)&&(s.fromGroupingView=!0)),e.is(n)&&e.is(n.loadObjectsInOwnView)&&(s.info.loadObjectsInOwnView=n.loadObjectsInOwnView),e.is(r.biProxyCtx)&&(s.ctx={},s.ctx.biProxyCtx=r.biProxyCtx,s.ctx.objIds=[],r.data.items.forEach(function(e){s.ctx.objIds.push(e.objectId)})),i=this.retrieveItems(t),e.is(i,"array")&&(i.forEach(function(t){var n,i={};e.is(t)&&(i.rootReferencePID=e.is(t.objectId)?t.objectId:null,i.instancePIDsArray=e.is(t.path,"array")?a.transformRIRToAbsolutePath(t.path):null,i.name=e.is(t.displayName,"string")?t.displayName:null,i.type=e.is(t.referenceType,"string")?t.referenceType:e.is(t.secondaryObjectType)?t.secondaryObjectType:t.objectType,i.typeNLS=e.is(t.displayType,"string")?t.displayType:e.is(t.displayType)?t.displayType:null,i.securityContext=e.is(t.contextId,"string")?t.contextId:null,i.tenant=e.is(t.envId,"string")?t.envId:null,i.service=e.is(t.serviceId,"string")?t.serviceId:null,i.path=Array.isArray(t.path)?t.path:[],e.is(t.linkId)&&(i.linkPID=t.linkId,i.resourceAreaID=t.resourceAreaID,i.referencePID=e.is(t.objectId)?t.objectId:null,delete i.rootReferencePID),e.is(t.isManufacturable,"string")&&(i.isManufacturable=t.isManufacturable),e.is(i.instancePIDsArray,"array")&&i.instancePIDsArray.length>0&&(n=a.getInstance(i.instancePIDsArray[0]),e.is(n)&&(i.rootReferencePID=n.get("isAggregatedBy")))),s.draggedItems.push(i)}),e.is(s.targetTreeNodeModel)&&(e.is(s.targetTreeNodeModel.getRootPID,"function")&&(s.targetRootReferencePID=s.targetTreeNodeModel.getRootPID(),s.targetInstancePIDsArray=s.targetTreeNodeModel.getAbsolutePath(),s.targetInstanceSiblingPID=s.targetTreeNodeModel.getSiblingsPID(),s.targetType=s.targetTreeNodeModel.getReferenceType(),s.info.wuxLocalID=s.targetTreeNodeModel._localID),delete s.targetTreeNodeModel)),s},processDropEffect:function n(i){var c=this;return new t(function(d){var g=o.getBehavior("ModelBehavior"),f=null,p=o.getBehavior("WUXNodeModelBehavior"),h=o.getBehavior("DropZoneViewBehavior"),I=o.getBehavior("GroupingViewBehavior"),v=function(n){return new t(function(t,o){var r=i.parameters[n],a=e.is(r.PIDsToAddRoot)?r.PIDsToAddRoot:r.rootReferencePID,s=e.is(i.dragNDropInfo)&&e.is(i.dragNDropInfo.ctx)?i.dragNDropInfo.ctx:null,l=e.is(i.dragNDropInfo)&&e.is(i.dragNDropInfo.info.loadObjectsInOwnView)?i.dragNDropInfo.info.loadObjectsInOwnView:null;c.processRootDrop(a,l,n,i.action.length,s,t,o)})},b=function(n){return new t(function(t){var s=(n||[{actionIndex:null}])[0].actionIndex,l=e.is(s,"number")?i.parameters[s]:null,u=e.is(l.PIDsToAddRoot)?l.PIDsToAddRoot:l.rootReferencePID,c=a.findConnections({from:u}),d=a.getInstancesFromCollection(u),g="AUXILIARY"===o.getId(),f=[],p=[];c.forEach(function(e){f.push(e.get("to"))}),d.forEach(function(e){f.push(e.get("isInstanceOf"))}),(p=a.getReferencesFromArray(f)).length>0?(p.forEach(function(e){g?o.notify("addToAuxiliaryView",[e,{loadRelatedobjectsToView:!1}]):o.notify("referenceAdded",[e,null,{loadRelatedobjectsToView:!1}])}),o.info(r.getNLSValue("AbstractDragAndDropManager.PPRContext.Success"))):o.warn(r.getNLSValue("AbstractDragAndDropManager.PPRContext.Empty")),e.is(h)&&P(h.iconEnum.DROPHERE,!0),t()})},C=function(n){var i=t.reject(),a=e.is(n,"string")?n:r.getNLSValue("AbstractDragAndDropManager.InternalError");return o.warn(a),i},D=function(n){var o=e.is(i.parameters[n],"array")?i.parameters[n]:[i.parameters[n]],s=[];return o.forEach(function(i){var o=a.getReference(i.referencePID),l=new t(function(t,s){var l={onComplete:function(e){t({rootReferenceMdl:e,actionIndex:n})},onFailure:function(){s(r.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))},silent:!0};e.is(o)?t({rootReferenceMdl:o,actionIndex:n}):a.fetchRoot(i.rootReferencePID,l)});s.push(l)}),t.all(s)},S=function(n){var i=n||[],l=[],u={},c={};return o.notify("startProgress",c),i.forEach(function(n){var i=new t(function(t,i){e.is(n.rootReferenceMdl)?a.needToQueryForChildren(n.rootReferenceMdl.get("PID"))?(s.isAKindOf(n.rootReferenceMdl,"PPRContext")&&(u={expandLevel:1,forceDBMode:!0}),a.getDescendantsFromServer(n.rootReferenceMdl.get("PID"),function(){t(n)},u)):t(n):i(r.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))});l.push(i)}),t.all(l).then(function(e){return o.notify("stopProgress",c),t.resolve(e)}).catch(function(e){return o.notify("stopProgress",c),t.reject(e)})},R=function(e){var n=e||[],o=y(i.dragNDropInfo);return n.some(function(e){var t=!1;return a.isWorkInstruction(e.rootReferenceMdl)&&a.isOperation(o)&&(t=!0),t})?new t(function(t,n){a.needToQueryForChildren(o)?a.getDescendantsFromServer(o,function(){t(e)},{onFailure:n}):t(e)}):t.resolve(e)},V=function(i){return new t(function(t,o){e.is(i,"array")&&i.forEach(function(i){var s=a.getReference(i),l=function(e){var i={};m(e)?(i.action=["addRoot"],i.parameters=[{rootReferencePID:e.get("PID")}],i.message=[null]):(i.action=["error"],i.parameters=[null],i.message=[r.getNLSValue("AbstractDragAndDropManager.NotValidType")]),n.call(c,i).then(t,o)};e.is(s)?l(s):a.fetchRoot(i,{context:c,onComplete:l,onFailure:o,silent:!0})},c)})},A=function(n){return new t(function(t){var r=(n||[{actionIndex:null}])[0].actionIndex,a=e.is(r,"number")?i.parameters[r]:null;o.notify("CreateLinkOrInstance",[a]),t()})},w=function(n,s){var c=null;switch(n){case"addRoot":c=v(s);break;case"addChangeAction":c=u.setCAAndGetDetails(i.parameters[s].rootReferencePID).then(V,C);break;case"addPPRContext":c=D(s).then(S).then(b).catch(C);break;case"createLinkOrInstance":c=D(s).then(S).then(R).then(A).catch(C);break;case"reorderRoots":c=v(s);break;case"reorder":c=function(n){return new t(function(t,s){var u,c,d=-1,g={},f={},h=function(e){o.warn(r.getNLSValue("AbstractDragAndDropManager.ReorderFailure")),o.debug("AbstractDragAndDropManager.ReorderFailure. Error Details: "+e),o.notify("stopProgress",g),s()};o.notify("startProgress",g),d=i.parameters[n].newChildrenPID.indexOf(i.parameters[n].targetInstancePID),"bottom"===i.parameters[n].dropPosition&&d++,i.parameters[n].movedInstancePID.forEach(function(e,t){i.parameters[n].newChildrenPID.splice(d+t,0,e)}),u={listOrdered:i.parameters[n].newChildrenPID,listModifiable:i.parameters[n].movedInstancePID},c={url:"dsmfg/private/V0/invoke/persistChildrenOrder",method:"POST",onComplete:function(r){var s=[];e.is(r,"array")&&r.forEach(function(t){var n;e.is(t.PID,"string")&&e.is(t.V_TreeOrder)&&(n=a.getInstance(t.PID),a.manageLinearProductFlowsOnDeleteInstance(n),n.set("V_TreeOrder",t.V_TreeOrder),a.manageLinearProductFlowsOnCreateInstance(n))}),i.parameters[n].newChildrenPID.forEach(function(e){s.push(a.getInstance(e))}),p.prepareUpdate(),o.notify("instanceRemoved",[s]),o.notify("instanceAdded",[s]),o.notify("reorder",f),p.pushUpdate(),o.notify("stopProgress",g),t()},onFailure:h,onTimeout:h,data:e.Json.encode(u)},l.webServiceRequest(c)})}(s);break;case"reparent":c=function(n){return new t(function(t,r){var a=e.merge({onComplete:t,onFailure:r},i.parameters[n]);e.is(g)?g.moveInstance(a):(o.debug("Model behavior is not available to reparent"),r())})}(s);break;case"aggregatedAction":c=t.resolve();break;case"modifyAttribute":c=function(n){return new t(function(t,r){var a=e.merge({onComplete:t,onFailure:r},i.parameters[n]);e.is(I)?I.modifyAttribute(a):(o.debug("groupingViewBehavior is not available"),r())})}(s);break;case"error":c=C(i.message[s]);break;default:c=C("AbstractDragAndDropManager.DropEffectError")}return c};return e.is(i)&&e.is(i.action,"array")&&(i.action.forEach(function(t,n){var o=function(){var o=w(t,n);return i.promises=e.is(i.promises,"array")?i.promises:[],i.promises[n]=o,o};f=e.is(f)?f.then(o,o):o()},this),f.then(d,d)),!1})},_computeAndProcessDropEffect:function(t){var n;e.is(t)&&(n=C(t),e.is(n)&&this.processDropEffect(n))},onTreeListViewDrop:function(t,i){var o,r,a=this.getDragNDropInfo(t,i);return e.is(a)&&(o=C(a),e.is(o)&&(this.processDropEffect(o),r=e.is(widget)&&widget.id?"padcompassSocket_"+widget.id:"padcompassSocket",null===p&&(p=new n.Socket(r)).subscribeServer("com.ds.compass",window.parent),p.dispatchEvent("onResetX3DContent",{},r))),!1},onDragEnterColumnHeader:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(e.is(f)?f.promise.then(function(){g=e.Promise.deferred(),P(t.iconEnum.PLUS,!1),f=null},function(){o.log("failed")}):(g=e.Promise.deferred(),P(t.iconEnum.PLUS,!1))),!0},onDragLeaveColumnHeader:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(P(t.iconEnum.DROPHERE,!0),e.is(g)&&g.resolve()),!0},onDragEnterBlank:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(e.is(g)?g.promise.then(function(){P(t.iconEnum.PLUS,!1),g=null},function(){o.log("failed")}):P(t.iconEnum.PLUS,!1),f=e.Promise.deferred()),!0},onDragLeaveBlank:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&P(t.iconEnum.DROPHERE,!0),e.is(f)&&f.resolve(),!0},onDropCell:function(t,n){var i,a,l,u,c=this,d=this.getDragNDropInfo(t,n),g=o.getBehavior("WUXNodeModelBehavior");if(e.is(n.nodeModel)&&g.isFakeNodeModel(n.nodeModel))return!1;if(e.is(d.info.fromManageCapableResource)&&!0===d.info.fromManageCapableResource)return function(e){var t=[];e.draggedItems.forEach(function(n){e.targetRootReferencePID===n.resourceAreaID&&0===e.targetInstancePIDsArray.length&&t.push({isAggregatedBy:e.targetRootReferencePID,isInstanceOf:n.referencePID,linkPID:n.linkPID})}),o.notify("createResourceUsage",t)}(d),!0;if(e.is(n.droppedNodes)&&S(n.droppedNodes))return o.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1;if(e.is(n.nodeModel)){const e=n.nodeModel.object.type;if(s.isReferencesHasReadOnlyType(e))return o.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1}if(e.is(d.draggedItems)&&0==(l=d.draggedItems,u=n.nodeModel,!(e.is(u.object)&&"DELConstructionWorkPackageGroup"===u.object.type||l.some(e=>"DELConstructionWorkPackageGroup"===e.type))))return o.warn(r.getNLSValue("AbstractDragAndDropManager.NotAllowed")),!1;i=o.getBehavior("DropZoneViewBehavior");try{return a=R(d),Array.isArray(a)&&a.length>0?(V(a,function(){c._computeAndProcessDropEffect(d)}),!1):this.onTreeListViewDrop(t,n)}catch(t){return e.is(i)&&P(i.iconEnum.DROPHERE,!0),!0}},onDropBlank:function(t,n){var i,a,s=this,l=this.getDragNDropInfo(t,n);if(e.is(n.droppedNodes)&&S(n.droppedNodes))return o.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1;i=o.getBehavior("DropZoneViewBehavior");try{return a=R(l),Array.isArray(a)&&a.length>0?(V(a,function(){s._computeAndProcessDropEffect(l)}),!1):this.onTreeListViewDrop(t,n)}catch(t){return e.is(i)&&P(i.iconEnum.DROPHERE,!0),!0}},onDropColumnHeader:function(t,n){var i,r=o.getBehavior("DropZoneViewBehavior");try{return i=e.Json.decode(t.dataTransfer.getData("Text")),!(!e.is(i.data)||!e.is(i.data.DataGridView_Column_Options))||this.onTreeListViewDrop(t,n)}catch(t){return e.is(r)&&P(r.iconEnum.DROPHERE,!0),!0}}}}}),define("DS/DELPPWViewBehaviors/OrderbySequenceBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","SelectionPlugin","WebServicePlugin"],creator:function(t,n,i,o,r){return{listenTo:function(){return{orderBySequence:this.orderBySequence}},onStart:function(){},onStop:function(){},orderBySequence:function(){var e,t,r=o.getModuleSelections(n.getId()),a=i.getReferenceModel(r[0]),s=i.getAllChildrenFromCollection(a.id).instancesPID;for(s.push(r[0].id),e=0;e<s.length;e++)s[e]&&(t=this.sortChildrenByProductFlowLink(s[e])),this.doWebServiceRequestCall(t)},doWebServiceRequestCall:function(t){var o=null,a=null,s={},l=function(e){n.notify("stopProgress",s),console.log(e)};t.length>0&&(o={listOrdered:t,listModifiable:t},a={url:"dsmfg/private/V0/invoke/persistChildrenOrder",method:"POST",onComplete:function(o){var r=[],a=n.getBehavior("WUXNodeModelBehavior");console.log(o),e.is(o,"array")&&o.forEach(function(t){e.is(t.PID,"string")&&e.is(t.V_TreeOrder)&&i.getInstance(t.PID).set("V_TreeOrder",t.V_TreeOrder)}),t.forEach(function(e){r.push(i.getInstance(e))}),a.prepareUpdate(),n.notify("instanceRemoved",[r]),n.notify("instanceAdded",[r]),n.notify("reorder",{}),a.pushUpdate(),n.notify("stopProgress",s)},onFailure:l,onTimeout:l,data:e.Json.encode(o)},n.notify("startProgress",s),r.webServiceRequest(a))},sortChildrenByProductFlowLink:function(e){var t,n,o=i.getReferenceModel(e),r=i.getInstancesFromCollection(o.id),a={},s={},l={},u={},c={},d=[],g=[],f=[],p=!1,h={"Set-Up":1,Procedure:2,"Close-Up":3};if(n=r.sort(function(e,t){return h[e.get("DELServiceProcessRoleExt.V_OOTBRole")]-h[t.get("DELServiceProcessRoleExt.V_OOTBRole")]}).map(e=>e.id),t=function e(t){var n,i=s[t];for(-1===f.indexOf(t)&&f.push(t),n=0;n<i.length;n++)c[i[n]]||(c[i[n]]=!0,-1===f.indexOf(i[n])&&f.push(i[n]),e(i[n]))},r.forEach(function(e){var t=i.getImpacted(e.id,!1,{relationTypes:["DELLmiTimeConstraintCnx"]}).filter(function(t){return 1===t.get("from").length&&1===t.get("to").length&&e.id===t.get("from")[0]});a[e.id]=t}),Object.keys(a).forEach(function(e){s[e]=a[e].map(function(e){return e.get("to")[0]}),l[e]=0,u[e]=0,c[e]=!1}),0===Object.keys(s).length)return n;for(var m in s)if(s[m].length>0){p=!0;break}if(!p)return n;Object.keys(s).forEach(function(e){s[e].forEach(function(t){l[t]++,u[e]++})}),(d=(g=Object.keys(l).filter(function(e){return 0===l[e]})).filter(function(e){return 0===u[e]})).forEach(function(e){g.indexOf(e)>-1&&g.splice(g.indexOf(e),1)}),g.forEach(function(e){c[e]=!0,t(e)}),d=d.concat(f);let I=[...n,...d];return[...new Set(I)]}}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementUI",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a,s){var l,u,c,d,g,f,p,h,m,I,v,b,y,P,C,D,S,R=null,V=[],A=null,w=[],L=[],E=null,M=i.getComponent("TooltipModel"),N=null,T=null,B=null,O=null,x=null,F=null,k=null,U=null,_=[],W=[],j=[];return h=function(){var t=o.getNLSValue("ImplementUI.Implementing"),n=o.getNLSValue("ImplementUI.SelectImplementing"),r=o.getNLSValue("ImplementUI.Implemented"),a=o.getNLSValue("ImplementUI.SelectImplemented");A=i.createElement("div",{class:"ImplementUI-Container"}),E=i.createElement("div",{class:"selectionForm-Main-Container"}).inject(A),!0===l.implementingSection&&(c=i.create("SelectionControl",{title:t,message:n,renderTo:E,multiSelection:e.is(l.multiSelectionOfImplementing)?l.multiSelectionOfImplementing:null})),!0===l.implementedSection&&(u=i.create("SelectionControl",{title:r,message:a,renderTo:E,multiSelection:!e.is(l.multiSelectionOfImplemented)||l.multiSelectionOfImplemented})),!0===l.optionsSection&&(N=i.createElement("div",{class:"options-section-container"}).inject(A),y()),k=i.createElement("div",{class:"dcForm-Main-Container"}).inject(A)},m=function(t){var n,i=t.newObjType,r=t.newObjDimensionType,a=t.cmdTitle;return e.is(r)?n=o.getNLSValue(a,{dimension:o.getNLSValue(r,null,"Dimension")}):e.is(i)?(-1!==i.indexOf("/")&&(i=i.split("/")[1]),n=o.getNLSValue(a,{type:o.getNLSValue(i||"",null,"Type")})):n=o.getNLSValue(a),n},I=function(t){var o,r,a=null,s=null,u="PLMEntity.V_Name";l=t,h(),(R=i.create("Dialog",{title:m(l),domId:l.cmdId,content:A,resizableFlag:!0,modalFlag:l.modalFlag,buttons:{Cancel:i.create("Button",{onClick:function(){R.close()}}),Ok:i.create("Button",{disabled:!e.is(void 0)||void 0,emphasize:"primary",onClick:function(){var t,i,c={};if(e.is(F)&&!0===n.getPreferenceValue("showDialog")){if(!0!==(r=F.validate()).result)return R.error(r.message),void(R.buttons.Ok.disabled=!1);for(a=F.getValues(),e.is(l.newObjDimensionType)&&(a["DELFmiMagnitudeExt.V_DimensionType"]=l.newObjDimensionType),s=F.getSecurityContextOverride(),a[u]!==V[0][u]&&(i=a[u]),t=0;t<V.length;t++)e.merge(V[t],a);if(i)if(V.length>1)for(t=0;t<V.length;t++)V[t][u]=i+"_"+(t+1);else V[0][u]=i}else if(e.is(l.newObjType)){if(e.is(L,"array"))for(t=0;t<L.length;t++)(a={}).V_Type=l.newObjType,V[t]=a}else V=null;o=e.clone(V),c.securityContextOverride=s,c.implementingId=U,c.implementedIDs=W,c.implementedPaths=j,c.implementingPaths=_,c.newObjAttributes=o,c.isInstancePossible=e.is(l.isInstancePossible)?l.isInstancePossible:null,c.cmdAction=e.is(l.cmdAction)?l.cmdAction:null,!0===l.optionsSection&&("ComboBox"===l.scopeOption?c.scopeCreation=B.value:"Toggle"===l.scopeOption&&(c.scopeCreation=B.checkFlag),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(c.mfgItemPrefix=O.value),e.is(l.mfgItemResultReport)&&l.mfgItemResultReport&&(c.resultReportMode=x.value)),l.onOKCallBack(c)}})}})).close=function(){v()}},b=function(){e.is(void 0)&&(void 0).destroy(),e.is(F)&&(F.destroy(),F=null)},v=function(){R.destroy(),b(),k=null,N=null,T=null,B=null,U=null,W=[],j=[],_=[],R=null,A=null,l.onCancelCallback&&l.onCancelCallback()},y=function(){var t;return T=i.createElement("div",{class:"Basic-Section-container"}).inject(N),t=i.create("Accordeon",{items:[{header:o.getNLSValue("Expander.Options"),content:T,expandedFlag:!0}],style:"filled-separate"}).inject(N),e.is(l.scopeOption)&&(d=i.createElement("div",{class:"scope-option-container"}).inject(T),i.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.CreateScopeForChildren")}).inject(d),d.tooltipInfos=new M({shortHelp:o.getNLSValue("ImplementUI.CreateScopeForChildren")}),"ComboBox"===l.scopeOption&&(B=i.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:o.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"},{labelItem:o.getNLSValue("ImplementUI.ScopeCreation.LeafScope"),valueItem:"Leaf"}]}).inject(d))),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(g=i.createElement("div",{class:"mfgItemPrefix-option-container"}).inject(T),i.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.PrefixForMfgItems")}).inject(g),g.tooltipInfos=new M({shortHelp:o.getNLSValue("ImplementUI.PrefixForMfgItems")}),O=i.create("LineEditor",{placeholder:o.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder")}).inject(g)),e.is(l.mfgItemResultReport)&&l.mfgItemResultReport&&(f=i.createElement("div",{class:"resultReport-option-container"}).inject(T),i.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.ResultReport")}).inject(f),f.tooltipInfos=new M({shortHelp:o.getNLSValue("ImplementUI.ResultReport")}),x=i.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:o.getNLSValue("ImplementUI.ResultReport.FullReport"),valueItem:"full_report"},{labelItem:o.getNLSValue("ImplementUI.ResultReport.ErrorReportOnly"),valueItem:"erroronly_report"},{labelItem:o.getNLSValue("ImplementUI.ResultReport.NoReport"),valueItem:"no_report"}]}).inject(f)),t},C=function(e,t){R.title=m(l),t.inject(A),R.clearMessages()},P=function(){W.length>0&&(!0===l.implementingSection?e.is(U)?R.buttons.Ok.disabled=!1:R.buttons.Ok.disabled=!0:R.buttons.Ok.disabled=!1)},D=function(t){var n,i,o=[];if(e.is(t,"array"))for(n=0;n<t.length;n++)i=t[n].get("PLMEntity.V_Name"),o.push(i);return o},S=function(){var e;!0===l.checkForImplementingScope&&("ResultingProduct"===l.linkType?s.isResultingLinked(U):s.isScoped(U))&&(e=o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:p})),R.error(e))},{createUI:function(e){I(e)},isVisible:function(){return!!e.is(R)&&R.visibleFlag},destroyUI:function(){e.is(R)&&R.close()},updateImplemented:function(e){var t=[],n=[],i=[];w=e,j=[],W=[],R.clearMessages(),0!==e.length&&(e.forEach(function(e){n.push(e.id),i.push(e.path),t.push(r.getReferenceModel(e.id))}),u.updateLabel(t),L=D(t),!0===l.multiSelectionOfImplemented?(W=n,j=i):1===e.length?(W=[n[0]],j=[i[0]]):(R.buttons.Ok.disabled=!0,b()),P(),S())},getImplementedIDs:function(){return W},updateImplementing:function(t){var n=[],i=[],o=[];U=null,_=[],R.clearMessages(),0!==t.length&&(t.forEach(function(e){i.push(e.id),o.push(e.path),n.push(r.getReferenceModel(e.id))}),!1===c.updateLabel(n)?R.buttons.Ok.disabled=!0:(e.is(w,"array")&&this.updateImplemented(w),!0===l.multiSelectionOfImplementing||(1===t.length?(U=i[0],_=[o[0]],p=n[0].get("PLMEntity.V_Name")):(R.buttons.Ok.disabled=!0,b())),P(),S()))},getImplementingID:function(){return U},showDCFormForAssign:function(t){var n;if(e.is(U)&&W.length>0)if(l.isInstancePossible=t,!0===t){if(V=[],e.is(L,"array"))for(n=0;n<L.length;n++)V.push({"PLMEntity.V_Name":L[n]});e.is(F)?F.updateToDefaultValues(V[0]):F=i.create("DataCollectionUI",{type:l.newObjType,onTypeChange:C,renderTo:k,defaultValues:V})}else b()},showDCFormForCreate:function(t){var n;if(W.length>0){if(V=[],e.is(L,"array"))for(n=0;n<L.length;n++)V.push({"PLMEntity.V_Name":L[n]});e.is(F)?F.updateToDefaultValues(V[0]):F=i.create("DataCollectionUI",{type:l.newObjType,onTypeChange:C,renderTo:k,defaultValues:V,createRoot:!!e.is(t)&&t})}},getSelectionsWithPaths:function(){var e={},t=a.getSelectionsWithPaths(n.getId());return e.selNodes=[],e.bUpdateImplemented=!1,e.bUpdateImplementing=!1,t.length<=0?e:(0!==t[0].length?(e.selNodes=t[0],e.bUpdateImplemented=!0,e.bUpdateImplementing=!1):0!==t[1].length&&(e.selNodes=t[1],e.bUpdateImplemented=!1,e.bUpdateImplementing=!0),e)},showErrorMultipleImplementedSelected:function(e){u.showWarningMessage(e),j=[],W=[],R.buttons.Ok.disabled=!0},showMessages:function(e,t){"info"===t?R.info(e):"warning"===t?R.warning(e):"error"===t?R.error(e):n.debug("type of message is invalid")}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeUtil",["UWA/Core"],function(e){"use strict";return function(t,n,i,o){var r,a,s,l=["V_EstimatedTime","V_MeasuredTime"],u={EstimatedTime:l[0],MeasuredTime:l[1]};return a=function(e){return n.doesAttributeExist(e,"V_UseGanttTimeSolver")&&"TRUE"===e.get("V_UseGanttTimeSolver")},s=function(e){var t,i,r;return i=o.getAttributeInfo("V_TimeMode"),t=n.getAuthorizedValueIndex(i,null,e.get("V_TimeMode")),r=n.getAuthorizedValueDB(i,t),u[r]},r=function(t){var n,o=void 0;return a(t)?i.needToQueryForChildren(t)?o=0:(o=0,i.getAllChildrenFromCollection(t.get("PID")).instancesPID.forEach(function(t){var n,r,a=i.getInstance(t);r=i.getReferenceIdFromInstance(a),r=i.getReference(r),e.is(r)&&(n=s(r),o+=e.is(n)&&r.get(n)?Number(r.get(n)):0)})):(n=s(t),o=e.is(n)?t.get(n):void 0),o},{fillNodeOptions:function(t,n){var o,a=t.referencePID;e.is(a)&&(o=i.getReference(a),e.is(o)&&"OPERATION"===o.get("PPRTYPE")&&n.forEach(function(e){e.includes(".operationTime")&&(t.grid[e]=r(o))}))},fillUpdatedNodeOptions:function(t,n,i,o){var a;("V_TimeMode"===o||l.indexOf(o)>-1)&&(a=n.find(function(e){return e.includes(".operationTime")}),e.is(a)&&(t[a]=r(i)))}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a){var s,l=function(i){n.getXMLValues(i,function(t){!function(t){var n;if(e.is(t))for(t=Array.isArray(t)?t:[t],n=0;n<t.length;n++)s[t[n].name]=Array.isArray(t[n].Attribute)?t[n].Attribute:[t[n].Attribute]}(t.Tooltips.Tooltip)},function(){t.debug("Failed to get"+i+"XML configuration file")})},u=function(t){var n,i,l,u,c,d,g,f,p="",h=o.getReference(t.nodeModel.getReferencePID()),m=e.is(t.nodeModel.getInstancePID()),I=t.cellView.collectionView.getColumnOrGroup(t.columnID).tooltipIndex;if(m&&(f=o.getInstance(t.nodeModel.getInstancePID())),e.is(I)&&(c=s[I],e.is(c)))for(n=0;n<c.length;n++)i=c[n],l=e.is(i.dicoType)?i.dicoType+"."+i.name:i.name,u=i.entity,g=r.getAttributeInfo(l),("instance"!==u||m)&&("instance"===u&&e.is(f)?d=f.get(l):e.is(h)&&(d=h.get(l)),e.is(d)&&""!==d&&(d=e.is(g)&&a.hasMagnitude(g)?a.getMagnitudeValue(d,g)+" "+a.getNLSForUnit(g):"NULL"===d?"":d,p+=(e.is(g)?a.getNLS(g):l)+" : "+d+"\n"));return p};return{init:function(e){s={},l(e)},getTooltipValue:function(e){return u(e)}}}}),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgCellManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";const n="string",i="configLoading";return t.singleton({hasCellValue(t){var n=this.getTreeDocument(),i=!0,o=t.nodeModel;return e.is(o)&&e.is(n)&&(i=!n.isGroupingNodeModel(o)),i},getCellValue(t){let n=null;if(e.owns(t,"nodeModel")){const i=t.nodeModel,o=t.dataIndex,r=i.options.grid[o];n=e.is(r,"string")?r.trim():r}return e.is(n)?n:""},getCellTypeRepresentation(t){let o=i;if(e.owns(t,"nodeModel")){const a=t.nodeModel;if(e.is(a))if(r=t.cellModel,e.is(r,"string")&&0===r.length){o=!!e.is(a.options.areCfgColumnsFilled,"boolean")&&a.options.areCfgColumnsFilled?n:i}else o=n}var r;return o}})}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil",["UWA/Core"],function(e){"use strict";return function(t,n,i){var o,r;return o=function(t,n,o){var r,a,s=i.getAttributesConfiguredOnDocumentColumn(o),l="";if(e.is(t))if(r=t.get("dataelements"),e.is(s))for(a=0;a<s.length;a++)e.is(r[s[a]])&&""!==r[s[a]]&&(l={title:r[s[a]],type:n});else l=r.title;return l},{fillNodeOptions:function(e,t){var i,o,a=r(e.referencePID,t);for(i in a)a.hasOwnProperty(i)&&(e.grid[i]=a[i]);if("IndexRelationsOnDemand"===widget.getValue("navigateOnIndex")&&n.needToQueryForConnections(e.referencePID))for(o in e.grid)Array.isArray(e.grid[o])&&0===e.grid[o].length&&e.grid[o].push({Value:"??",Icon:null});return e},getDocumentNodeOptions:r=function(t,n){var r,a,s,l,u={},c=i.getConnectedDocumentPIDs(t);if(Array.isArray(n)||(n=[n]),e.is(c)&&n.length>0)for(a=0;a<n.length;a++)for(u[s=n[a]]=[],r=0;r<c.length;r++){const[t,,n]=c[r].split("|");l=i.getDocument(n),e.is(l)&&u[s].push(o(l,t,s))}return u}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";return function(n,i){var o,r=!(!e.is(i)||!e.is(i.check,"string")),a=t.extend({defaultOptions:{className:"confirmation-objectslist",appendObjects:!1,showColumnHeaders:!1},objectsTableBody:null,objectsTableHead:null,objectsTableFoot:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableHead=e.createElement("thead"),this.objectsTableFoot=e.createElement("tfoot"),this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableHead.inject(t),this.objectsTableBody.inject(t),this.objectsTableFoot.inject(t)},setData:function(t){var n,i,o=this,r=[],a=[],s=e.is(t)&&e.is(t.attributes,"array")?t.attributes:[],l=e.is(t)&&e.is(t.models,"array")?t.models:[];!1===o.options.appendObjects&&o.empty(),o.options.showColumnHeaders&&null!==o.objectsTableBody&&s.length>0&&(s.forEach(function(e){r.push({tag:"th",text:e})}),n=e.createElement("tr",{html:r}),o.objectsTableHead.appendChild(n)),null!==o.objectsTableBody&&l.length>0&&l.forEach(function(t){a=[],s.forEach(function(n){i=t.get(n),a.push({tag:"td",text:e.is(i)?i:""})}),a.length>0&&(n=e.createElement("tr",{html:a}),o.objectsTableBody.appendChild(n))})},empty:function(){if(null!==this.objectsTableBody)for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return o=function(t,o,a,s,l){var u,c,d=e.createElement("div",{class:"confirmation-dialog-content-container"});e.is(o,"string")&&(o=e.createElement("span",{class:"confirmation-dialog-message",text:o})).inject(d),e.is(l)&&l.inject(d),r&&(c=n.create("Toggle",{type:"checkbox",checkFlag:!1,label:i.check})).inject(d),(u=n.create("Dialog",{title:t,domId:"ConfirmationUI-Dialog",content:d,minHeight:100,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Cancel:n.create("Button",{onClick:function(){u.close(),a.apply(null,[!1,s])}}),Ok:n.create("Button",{disabled:!1,emphasize:"primary",onClick:function(){u.close(),a.apply(null,[!0,s,e.is(c)?c.checkFlag:null])}})}})).close=function(){this.destroy(),o=null,t=null,u=null}},{show:function(t,n,r,s){var l,u,c;e.is(r)&&e.is(r.models)&&(l=r.models).length>0&&((c=new a(i)).setData(r),u=e.createElement("div",{class:"confirmation-objectList"}),c.getContent().inject(u)),o(t,n,s,l,u)}}}}),define("DS/DELPPWViewBehaviors/EditAttributeBehavior",["UWA/Core","text!DS/DELPPWViewBehaviors/assets/json/EditAttributeFormEvents.json"],function(e,t){"use strict";return{plugins:["UXComponentsPlugin","AttributePlugin","DicoPlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin"],creator:function(n,i,o,r,a,s,l,u){var c,d,g,f,p=o.getComponent("Button"),h=null,m=null,I=null,v=e.Json.decode(t),b=function(e){return n.getPlugins("ProcessImplementPlugin").instance.getSelectedDimensionTypeFromConnection(e)},y=function(t,n){var i,o=d.createElement("div",{class:"section-container"}),r={};e.is(n)&&e.is(n.formStyle)&&(r.formStyle=n.formStyle);const a=function(e){const t=e.AsRequired.checkFlag;var n;Object.keys(e).forEach(i=>{"AsRequired"!==i&&((n=e[i]).disabled=0,t&&(n.disabled=1))})};if(e.is(t[0])&&t[0].dataIndex.contains("V_ContQuantity")){const n=t[0].objectToBeModified.get("type");"ProcessInstanceContinuous"!==n&&"MBOMContinuousPhaseInstance"!==n&&e.is(t[0].attributeInfo)&&(t[0].attributeInfo.isReadOnly=!0);const i={attributeInfo:{NLS:s.getNLSValue("EditAttributeUI.AsRequired"),Type:"Boolean",FullName:"AsRequired",onChange:a}};t[0].attributeInfo.isReadOnly&&(i.value="TRUE"),t.push(i)}return i={attribute:t},r.section=i,m=d.create("FormUI",{sections:r,renderTo:o,headerAccordean:!1}),o},P=function(t,n){c=d.createElement("div",{class:"EditAttribute-Dialog"}),e.is(d)?(I=d.create("Dialog",e.merge(t,{domId:"EditAttributeUI-Dialog",content:c,resizableFlag:!0,modalFlag:!0,width:400,minWidth:290,buttons:{Cancel:new p({onClick:function(){I.close()}}),Ok:new p({disabled:!1,emphasize:"primary",onClick:function(){e.is(n,"function")&&n()}})}}))).close=function(){this.destroy(),e.is(m)&&m.destroy(),e.is(c)&&c.destroy(),I=null}:i.debug("uxFactoryBehavior is not available.")},C=function(t){return new Promise(function(n,o){var r={},a=function(){i.notify("stopProgress",r),i.warn(s.getNLSValue("EditAttributeUI.retrieveDataFailure")),o()};if(!e.is(t))return i.debug("objectToBeModified is not available."),void o();i.notify("startProgress",r),l.fetchAttributes(t,{onComplete:function(){i.notify("stopProgress",r),n()},onFailure:a,onTimeout:a})})},D=function(t){var n=l.getReference(t);return e.is(n)||(n=l.getInstance(t)),e.is(n)||(n=l.getConnection(t)),n},S=function(t,n){var i=l.getReferenceModel(t.get("to")[t.get("to").length-1]),o=i.get("DELFmiMagnitudeExt.V_DimensionType"),s=a.getAttributeInfo("DELFmiMagnitudeExt.V_DimensionType"),u=r.getAuthorizedValue(s,null,o);!e.is(o)&&a.isAKindOf(i,"MBOMContinuousPhaseReference")&&(o=function(t){var n,i,o,r=["DELFmiRefQuantity_Area","DELFmiRefQuantity_Length","DELFmiRefQuantity_Mass","DELFmiRefQuantity_Volume"];for(o=0;o<r.length;o++)if(n=t.get(r[o]+".V_RefQuantity"),e.is(n)){i=r[o].substring(r[o].indexOf("_")+1);break}return i}(i),u=r.getAuthorizedValue(s,null,o)),e.is(u)&&(u="MASS"===u?"WEIGHT":u,n.events.forEach(function(e){e.conditions.forEach(function(e){"MfgProductionPlanning.V_Overlap === true"===e.condition&&e.affectedAttributes.forEach(function(e){e.fullName.toUpperCase().contains(u)&&(e.hide=!1),"DELLmiSendAheadQty_Each.V_SendAheadQty"===e.fullName&&(e.hide=!0)})})}))};return{name:"EditAttributeBehavior",listenTo:function(){return{refreshAll:this.closeDialog}},onStart:function(t){var n;d=i.getBehavior("UXFactoryBehavior"),g=i.getBehavior("ModelBehavior"),f=i.getBehavior("LinkBehavior"),n=u.getXMLValues("editFormAttributesXML"),h=e.is(n)?n.convert("AttributesDescriptionList.Type","name"):{},e.is(t.editFormAttributesXML)&&(n=(n=u.getXMLValues(t.editFormAttributesXML)).convert("AttributesDescriptionList.Type","name"),h=e.merge(h,n))},onStop:function(){},closeDialog:function(){e.is(I)&&I.close()},hasEditConfiguration:function(t){var n=!1,o=null;return e.is(h)?(o=D(t),e.is(o)&&e.is(h[o.get("type")])&&(n=!0)):i.debug("_editFormAttrsConfig is not available."),n},editConfiguredAttributes:function(t){var o,u,d,g,p,R,V,A,w=null,L={};R=l.getConnection(t),V=e.is(R)?R.get("type"):null,e.is(h)?(w=D(t),e.is(w)?(o=h[w.get("type")],v[w.get("type")]&&(A=e.clone(v[w.get("type")])),e.is(o)?(d=Array.isArray(o.Attribute)?o.Attribute:[o.Attribute],e.is(o.formStyle)&&(L.formStyle=o.formStyle),(g=e.clone(r.getObjectAndAttributeInfos(d))).forEach(function(e){"ProcessImplementLinkOcc"===V&&"V_usage"===e.dataIndex?(e.attributeInfo.AuthorizedValues=function(e){var t,i,o,r,a=[],l=n.getPlugins("ProcessImplementPlugin").instance;return t=l.getRolesForTargrtObject(e),i=f.getConnection(e),r=l.getRoleFromModelOrComputed(i.get("PID")),o=t.indexOf(r.usage),t.splice(o,1),t.unshift(r.usage),t.forEach(function(e,t){a.push({NLS:0===t?r.nlsText:s.getNLSValue("Role."+e),Name:e})}),a}(t),a.addAttributeInfo({"MfgProductionPlanning.V_usage":e.attributeInfo}),e.value=R.get("PLMEntity."+e.dataIndex)):"ProcessImplementLinkOcc"===V&&"V_DimensionType"===e.dataIndex&&(e.attributeInfo.AuthorizedValues=function(e){return n.getPlugins("ProcessImplementPlugin").instance.getDimensionTypesForQty(e)}(t),e.value=b(t))}),g.forEach(function(t,n){t.objectToBeModified=w,e.is(d[n].displayType)&&(t.displayType=d[n].displayType)}),C(w).then(function(){var o,a;(o=g.filter(function(o,u){var c=e.is(o.attributeNLSTitle)?o.attributeNLSTitle:r.getNLS(o.attributeInfo);if(r.doesAttributeExist(w,o.attributeName)||r.isAttrApplicableForType(w,o.attributeName)){if("DELLmiTimeConstraintCnx"===V&&"DELLmiTimeConstraintCategoryAbstractCusto.flowType"===o.attributeName){let t=i.getBehavior("ProductFlowLinkBehavior");e.is(t)&&(o.attributeInfo.AuthorizedValues=t.getDynamicAuthorizedListFlowType(R))}if(e.is(A)&&e.is(A[o.attributeName])&&(o.events=A[o.attributeName],"ProcessImplementLinkOcc"===V&&S(R,o)),"ProcessImplementLinkOcc"===V&&["V_ContQuantity","DELLmiUsageQuantity","MfgProductionPlanning.V_DimensionType"].some(e=>o.attributeName.contains(e))){if(!e.is(b(t)))return!1;"MfgProductionPlanning.V_DimensionType"===o.attributeName&&function(t,i){var o=n.getPlugins("ProcessImplementPlugin").instance.getDimensionOfItem(t.get("to"));e.is(o)&&i.events.forEach(e=>{e.conditions.forEach(e=>{"MfgProductionPlanning.V_DimensionType !== Ratio"===e.condition&&e.affectedAttributes.forEach(e=>{e.fullName.toUpperCase().contains(o.toUpperCase())&&(e.hide=!1)})})})}(R,o)}if("ProcessImplementLinkOcc"===V&&"MfgProductionPlanning.usagePoint"===o.attributeName){if(!l.isUsagePointManagementEnabled())return!1;if(o.attributeInfo.AuthorizedValues=function(t){var i,o,r,a,u=[],c=n.getPlugins("ProcessImplementPlugin").instance,d=l.getConnection(t);return r=c.findInstanceWhoseParentIsScoped(d.get("from")).scopeLinks,a=c.findInstanceWhoseParentIsScoped([d.get("to")[0]]).scopeLinks,o=r.filter(function(e){return a.some(t=>e.get("PID")===t.get("PID"))}),e.is(o)&&o.length>0&&(i=c.getUsagePointsForTargetScopes(o)).length>0&&(u.push({NLS:s.getNLSValue("EditAttributeUI.NoUsagePoint"),value:[]}),i.forEach(function(t){var n=l.getInstance(t[t.length-1]);e.is(n)&&u.push({NLS:n.get("PLMInstance.PLM_ExternalID"),value:[t]})})),u}(t),0===o.attributeInfo.AuthorizedValues.length)return!1;o.value=function(t){var n,i,o=[],r=l.getConnection(t);return e.is(r.get("usagePoint"))&&r.get("usagePoint").length>0&&(n=r.get("usagePoint")[0][r.get("usagePoint").length-1],e.is(n)&&(i=l.getInstance(n),e.is(i)&&(o=r.get("usagePoint")))),o}(t),a=o.value}return!0}return i.warn(s.getNLSValue("EditAttributeUI.AttrNotAvilaibleOnObject",{attributeNLS:c})),!1})).length>0?(p=y(o,L),u={title:s.getNLSValue("EditAttributeUI.HeaderMulti")},l.isWorkInstruction(w)&&(u=e.merge({position:{my:"top",at:"top"},height:500,width:600},u)),P(u,function(){var n,u,c,d,g,p,h={},v={},b="MfgProductionPlanning.usagePoint";if(!0!==(u=m.validate()).result)return I.error(u.message),void(I.buttons.Ok.disabled=!1);if(c=m.getValues(),w.isConnection())if(e.is(f)){for(d in e.is(c[b])&&(JSON.stringify(c[b])!==JSON.stringify(a)&&f.setImplementLinkToUsagePoints(t,c[b]),delete c[b]),c)if(c.hasOwnProperty(d))for(g=0;g<o.length;g++)d===o[g].attributeInfo.FullName&&(o[g].attributeInfo.Protection<3||!r.isReadOnly(o[g].attributeInfo))&&(p=c[d],o[g].newValue=p);f.updateLinkAttributes([t],o)}else i.debug("linkBehavior is not available.");else{for(d in c)if(c.hasOwnProperty(d))for(g=0;g<o.length;g++)d===o[g].attributeInfo.FullName&&o[g].attributeInfo.Protection<3&&(v[d]=c[d]);n={data:v,onFailure:function(t,n){var o=s.getNLSValue("EditAttributeUI.UpdateFailure");e.is(n)&&e.is(n.message,"string")&&(o+="\n"+n.message),i.warn(o),i.notify("stopProgress",h)},onComplete:function(){i.info(s.getNLSValue("EditAttributeUI.UpdateSuccess")),i.notify("stopProgress",h)}},i.notify("startProgress",h),w.isReference()?l.updateReference(t,n):w.isInstance()&&l.updateInstance(t,n)}I.close()}),p.inject(c)):i.warn(s.getNLSValue("EditAttributeUI.ConfigAttrNotAvilaibleOnObject"))})):i.warn(s.getNLSValue("EditAttributeUI.NoAttributesConfigured"))):i.debug("objectToBeModified is not available.")):i.debug("_editFormAttrsConfig is not available.")},editAttribute:function(t,n){var o,a,l,u,d,p;e.is(n,"array")||(n=[n]),e.is(t,"array")||(t=[t]),d=n[0].objectToBeModified,C(d).then(function(){var h=!0;n.forEach(function(c){r.doesAttributeExist(d,c.attributeName)||r.isAttrApplicableForType(d,c.attributeName)?(a=e.is(c.attributeNLSTitle)?c.attributeNLSTitle:r.getNLS(c.attributeInfo),l=[],t.forEach(function(t){o=null,o="reference"===c.instOrRef&&e.is(t.referencePID)?t.referencePID:"instance"===c.instOrRef&&e.is(t.instancePID)?t.instancePID:t.id,e.is(o)&&l.push(o)}),u=n.length>1?s.getNLSValue("EditAttributeUI.HeaderMulti"):s.getNLSValue("EditAttributeUI.Header",{attributeName:a})):(h=!1,i.warn(s.getNLSValue("TableView.AvailabilityFailure",{key:a})))}),h&&(e.is(I)||(p=y(n),P({title:u},function(){var t,i,o,a,s,u;if(!0!==(u=m.validate()).result)return I.error(u.message),void(I.buttons.Ok.disabled=!1);if(i=m.getValues(),Object.keys(i).length>1){if(e.is(i.AsRequired)){if("true"===i.AsRequired)t="AsRequired";else for(o in i)o===n[0].attributeInfo.FullName&&(t=i[o]);n[0].newValue=t,s=n[0].instOrRef,n=n[0]}}else for(o in i)if(i.hasOwnProperty(o))for(a=0;a<n.length;a++)o!==n[a].attributeInfo.FullName||r.isReadOnly(n[a].attributeInfo)||(t=i[o],n[a].newValue=t,s=n[a].instOrRef);e.is(g&&s)?g.updateModelAttribute(l,n,t):e.is(f)&&f.updateLinkAttributes(l,n),I.close()}),p.inject(c)))})},editRichTextAttribute:function(t,n){var o,a,l,u,f,p,h,v,b,S={},R=[],V=n.objectToBeModified,A=function(t){let n,i="reference"===t?l:u,o="reference"===t?h:p,r=[];e.is(i)&&(r.push(m.getValues()),r.forEach(t=>{for(n in t)t.hasOwnProperty(n)&&n===o.attributeInfo.FullName&&(o.value=e.is(t[n],"array")?t[n].join(""):t[n])}))};e.is(n,"array")&&(n=n[0]),e.is(t,"array")&&(t=t[0]),o=e.is(n.attributeNLSTitle)?n.attributeNLSTitle:r.getNLS(n.attributeInfo),v=D(t.referencePID),R.push(C(V)),e.is(t.instancePID)&&(b=D(t.instancePID),R.push(C(b))),Promise.allSettled(R).then(function(){if(S.reference={pid:t.referencePID,name:s.getNLSValue("EditAttributeUI.EditRichText.Reference.Prefix")+v.get("PLMEntity.V_Name")},n.displayType="richText",(h={...n}).attributeInfo={...n.attributeInfo},h.attributeInfo.FullName+=".Ref",h.value=v.get("DELLmiRichText.V_RichText"),h.instOrRef="reference",e.is(b)&&(S.instance={pid:t.instancePID,name:s.getNLSValue("EditAttributeUI.EditRichText.Instance.Prefix")+b.get("PLMInstance.PLM_ExternalID")},(p={...n}).attributeInfo={...n.attributeInfo},p.attributeInfo.FullName+=".Inst",p.objectToBeModified=b,p.value=b.get("DELLmiRichText.V_RichText"),p.instOrRef="instance"),a=s.getNLSValue("EditAttributeUI.Header",{attributeName:o}),!e.is(S.instance)&&(a+=" : "+S.reference.name),!e.is(I)){if(l=y(h,{formStyle:"Vertical"}),e.is(S.instance)){let e=d.getComponent("WUXTab");(f=new e({displayStyle:"strip"})).add({label:S.reference.name,isSelected:!0,content:l}),f.add({label:S.instance.name}),f.addEventListener("change",function(e){1===e.dsModel.value[0]?(A("reference"),l.destroy(),u&&u.destroy(),u=y(p,{formStyle:"Vertical"}),e.dsModel.setPageContentFromValue(1,u)):0===e.dsModel.value[0]&&(A("instance"),u.destroy(),l.destroy(),l=y(h,{formStyle:"Vertical"}),e.dsModel.setPageContentFromValue(0,l))})}P({title:a},function(){var t,n,o,r=[];if(!0!==(o=m.validate()).result)return I.error(o.message),void(I.buttons.Ok.disabled=!1);if(e.is(m)&&((r=[]).push(m.getValues()),r.forEach(i=>{for(n in i)i.hasOwnProperty(n)&&n===h.attributeInfo.FullName?(t=i[n],h.newValue=e.is(t,"array")?t.join(""):t,h.attributeInfo.FullName=h.attributeInfo.FullName.replace(".Ref","")):i.hasOwnProperty(n)&&n===p.attributeInfo.FullName&&(t=i[n],p.newValue=e.is(t,"array")?t.join(""):t,p.attributeInfo.FullName=p.attributeInfo.FullName.replace(".Inst",""))})),I.close(),e.is(g)){let t={noChange:function(e){let t="instance"===e.instOrRef?"Instance":"Reference";i.info(s.getNLSValue("TableView.RichTextUpdate."+t+".NoChange"))},onUpdateSuccess:function(t,n,o){n.get("PID")===S.reference.pid?i.info(s.getNLSValue("TableView.RichTextUpdate.Reference.Success")):i.info(s.getNLSValue("TableView.RichTextUpdate.Instance.Success")),e.is(t)&&i.notify("stopProgress",t)},onUpdateFailure:function(t,n,o){n.get("PID")===S.reference.pid?i.info(s.getNLSValue("TableView.RichTextUpdate.Reference.Failure")):i.info(s.getNLSValue("TableView.RichTextUpdate.Instance.Failure")),e.is(t)&&i.notify("stopProgress",t)}};e.is(S.reference)&&(e.is(h.newValue)||e.is(h.value))&&g.updateModelAttribute(S.reference.pid,h,h.newValue||h.value,t),e.is(S.instance)&&(e.is(p.newValue)||e.is(p.value))&&g.updateModelAttribute(S.instance.pid,p,p.newValue||p.value,t)}}),e.is(S.instance)?f.inject(c):l.inject(c)}})}}}}}),define("DS/DELPPWViewBehaviors/Tagger/FilterComponentServices",["UWA/Core","UWA/Class"],function(e,t){"use strict";return t.extend({init:function(e){},parse:function(e){var t,n,i,o,r={};for(t in e)if(e.hasOwnProperty(t))for(i in n=e[t])n.hasOwnProperty(i)&&(o=n[i],r[i]||(r[i]={}),"date"===o.type&&(o.value=o.value.split("-").join("/").substr(0,10)),r[i][o.value]||(r[i][o.value]={type:o.type,dispValue:o.dispValue||o.value,subjects:[]}),r[i][o.value].subjects.push(t));return{ds6wTagGrouped:r,ds6wTagSummary:[]}},getFilteredSubjects:function(e,t){var n,i,o,r=[],a=[];for(i in e)if(e.hasOwnProperty(i))for(n=e[i],o=0;o<n.length;o++)t&&t[i]&&t[i][n[o].object]&&(Array.isArray(r)&&0===r.length?t[i][n[o].object].subjects.forEach(function(e){r.push(e)}):(a=[],t[i][n[o].object].subjects.forEach(function(e){a.push(e)}),0!==(a=r.filter(function(e){return-1!==a.indexOf(e)})).length&&(r=a)));return r},findColoredPaths:function(t,n){var i,o=[],r={};if("date"===n.type)for(var a in r=t[n.predicate])r.hasOwnProperty(a)&&-1!==a.indexOf(n.object)&&e.merge(o,r[a]);else i=t[n.predicate],UWA.is(i)&&(i[n.object]?o=i[n.object].subjects:Object.values(i).length>0&&Object.values(i).forEach(e=>{e.dispValue[e.dispValue.length-1]===n.dispValue&&(o=e.subjects)}));return o},getTagsSummary:function(e){var t,n,i=[];for(t in e)if(e.hasOwnProperty(t))for(n in e[t])e[t].hasOwnProperty(n)&&i.push({sixw:t,object:n,value:n,count:e[t][n].subjects.length,type:e[t][n].type,dispValue:e[t][n].dispValue});return i}})}),define("DS/DELPPWViewBehaviors/View",[],function(){"use strict";return{plugins:["View"],creator:function(e,t,n){return{onStart:function(e){},onStop:function(){},extend:function(e){return n.extend(e)}}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/FormEventHelper",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a){var s,l=["<",">","<=",">=","===","==","!=","!==","AND","OR","&&","||","IN","MATCH"],u=function(e){return l.indexOf(e)>-1},c=function(e){return e.length>=2&&"["===e[0]&&e[e.length-2]},d=function(t){var n=!1;return e.is(s)&&void 0!==s[t]?n=!0:"EMPTY_STRING"===t?n=!0:"true"===String(t).toLowerCase()||"false"===String(t).toLowerCase()?n=!0:"null"===String(t).toLowerCase()||"undefined"===String(t).toLowerCase()?n=!0:isNaN(Number(t))?c(t)?n=!0:(t>="a"&&t<="z"||t>="A"&&t<="Z")&&(n=!0):n=!0,n},g=function(e){var t=-1;return"!"===e?t=4:"AND"===e||"&&"===e?t=3:"OR"===e||"||"===e?t=2:l.indexOf(e)>-1&&(t=1),t},f=function t(n){var i=n;return e.is(s)&&void 0!==s[n]?i=t(s[n]):"EMPTY_STRING"===n||""===n?i="":"true"===String(n).toLowerCase()?i=!0:"false"===String(n).toLowerCase()?i=!1:"null"===String(n).toLowerCase()?i=null:"undefined"===String(n).toLowerCase()?i=void 0:isNaN(Number(n))?c(n)&&(i=n.substring(1,n.length-1).split(",").map(function(e){return t(e)})):i=Number(n),i},p=function(e){var t,n,i,o,r=[];return!!Array.isArray(e)&&(e.forEach(function(e){u(e)?(t=r[r.length-1],r.pop(),n=r[r.length-1],r.pop(),i=function(e,t,n){var i=!1;switch(t){case"<":i=e<n;break;case"<=":i=e<=n;break;case">":i=e>n;break;case">=":i=e>=n;break;case"==":i=e==n;break;case"===":i=e===n;break;case"!=":i=e!=n;break;case"!==":i=e!==n;break;case"AND":case"&&":i=e&&n;break;case"OR":case"||":i=e||n;break;case"IN":i=n.indexOf(e)>-1;break;case"MATCH":i=new RegExp(n).test(e)}return i?"TRUE":"FALSE"}(n,e,t),i=f(i),r.push(i)):d(e)&&(o=f(e),r.push(o))}),1===r.length&&r.pop())},h=function(e){var t=function(e){var t=e.split(" "),n=[],i=[];for(t.forEach(function(e){if(u(e)){for(;0!==n.length&&g(e)<=g(n[n.length-1]);)i.push(n[n.length-1]),n.pop();n.push(e)}else if(d(e))i.push(e);else if("("===e)n.push(e);else if(")"===e){for(;"("!==n[n.length-1];)i.push(n[n.length-1]),n.pop();n.pop()}});0!==n.length;)i.push(n[n.length-1]),n.pop();return i}(e);return p(t)};return{setFieldsValue:function(e){s=e},isConditionMatch:function(e){return h(e)}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MultiAttrCellManager",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a){var s;return s=function(t){var n,i,o,r,a,s;if(i=t.nodeModel,o=this.getColumnOrGroup(t.columnID),e.is(i)&&Array.isArray(o.attribute))for((n={}).column=o,r=n.column.attribute,a=0;a<r.length;a++)if(s=i.getAttributeValue(r[a].name),e.is(s)){n.attributeName=r[a].name,n.dataIndex=r[a].dataIndex,n.dicoType=r[a].dicoType,n.entity=r[a].entity;break}return n},{getCellTypeRepresentation:function(t){var i,r,a,l,u,c="string";return i=s.call(this,t),e.is(i)&&e.is(i.attributeName)&&(r=n.getAttributeInfo(i.attributeName),e.is(r)&&(a=o.hasRangeDefined(r),l=o.isMultiValuated(r),u=o.hasMagnitude(r),l&&!a?c="string":a?c="enumString":u?c="number":o.isBoolean(r)?c="boolean":o.isInteger(r)?c="integer":o.isDouble(r)&&(c="float"))),c},getCellValue:function(t){var n,i="";return n=s.call(this,t),e.is(n)&&e.is(n.attributeName)&&(i=t.nodeModel.getAttributeValue(n.attributeName)),i},getCellValueForFilter:function(t,n){var i,o="",r={columnID:t,nodeModel:n};return e.is(t)&&e.is(n)&&(i=s.call(this,r),e.is(i)&&e.is(i.attributeName)&&(o=n.getAttributeValue(i.attributeName))),o},hasCellValue:function(t){var n,i=!1;return n=s.call(this,t),e.is(n)&&e.is(n.attributeName)&&(i=!0),i},getCellSemantics:function(t){var i,r,a,l={};if(i=s.call(this,t),e.is(i)&&e.is(i.attributeName)&&(r=n.getAttributeInfo(i.attributeName),e.is(r)))if(o.hasRangeDefined(r)){let e=o.getAuthorizedValuesNLSList(r);for(let t=0;t<e.length;t++){let n=e[t],i=o.getAuthorizedValueDB(r,t);l[n]=i}a={possibleValues:l}}else o.hasMagnitude(r)&&(a={units:o.getNLSForUnit(r)});return a},getCellEditableState:function(i){var r,l,u=!1;return a.areModuleColumnsImmutable(t.getId())||(r=s.call(this,i),e.is(r)&&e.is(r.attributeName)&&(l=n.getAttributeInfo(r.attributeName),e.is(l)&&(u=!o.isReadOnly(l)))),u}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/DataCollectRowColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";var n="PLMSpecifyHowToCollectDataCnx_Custo.",i=[n+"V_MinValue_Inclusive",n+"V_MinControlValue_Inclusive",n+"V_MaxValue_Inclusive",n+"V_MaxControlValue_Inclusive"];return t.singleton({name:"DCPColumnManager",init:function(e){this._parent(e)},getCellTypeRepresentation:function(t){var i,o;if(t.isHeader)return"string";switch(e.is(t.nodeModel)&&(o=t.nodeModel.options.grid),this.getColumnOrGroup(t.columnID).attribute.name){case n+"V_DCRichText":case n+"V_DCUnit":case n+"V_DCTimeStampFormat":case n+"V_DCFormula":i="string";break;case n+"V_MinValue":case n+"V_MinControlValue":case n+"V_MaxValue":case n+"V_MaxControlValue":i="number";break;case n+"V_Value":i=e.is(o)&&e.is(o[n+"V_DCUnit"])?"number":"string";break;case n+"V_MinValue_Inclusive":case n+"V_MinControlValue_Inclusive":case n+"V_MaxValue_Inclusive":case n+"V_MaxControlValue_Inclusive":i="boolean";break;case n+"V_DCType":case n+"V_DCMagnitude":case n+"V_DCRequirementLink":case n+"V_DCResourceLink":i="url";break;default:i="string"}return i},getCellClassName:function(t){var i="";if(e.is(t.nodeModel)&&!t.isHeader)switch(this.getColumnOrGroup(t.columnID).attribute.name){case n+"V_DCType":case n+"V_DCMagnitude":case n+"V_DCRequirementLink":case n+"V_DCResourceLink":i="url";break;default:i=""}return i},getCellValue:function(t){var i,o,r,a,s=t.nodeModel.options.grid;switch(a=function(t){var n,i,o,r,a,s=e.is(t)?t:"";if(0===s.indexOf("<?xml")&&0<s.indexOf("<html")&&(r=s.indexOf("<body>"),a=s.indexOf("</body>"),r>-1&&a>-1)){for(s=(s=s.slice(r+6,a)).replaceAll("<br/>"," ");-1!==s.indexOf("<");)n=s.indexOf("<"),-1!==(i=s.indexOf(">",n)+1)&&(o=s.substring(n,i),s=s.replace(o,""));s=(s=(s=(s=s.replaceAll("&lt;","<")).replaceAll("&gt;",">")).replaceAll("&amp;","&")).replaceAll("&nbsp;"," ")}return s},r=function(e,t){return{label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}}},(o=this.getColumnOrGroup(t.columnID)).attribute.name){case n+"V_DCRichText":return a(s[o.attribute.name]);case n+"V_DCType":case n+"V_DCMagnitude":case n+"V_DCRequirementLink":case n+"V_DCResourceLink":return i=s[o.attribute.name].iconPath,r(s[o.attribute.name].label,i);default:return s[o.attribute.name]}},getCellSemantics:function(e){var t,i=e.nodeModel.options.grid;switch(this.getColumnOrGroup(e.columnID).attribute.name){case n+"V_MinValue":case n+"V_MinControlValue":case n+"V_MaxValue":case n+"V_MaxControlValue":case n+"V_Value":t={units:i[n+"V_DCUnit"]}}return t},hasCellValue:function(t){var n,o=t.nodeModel.options.grid;return n=this.getColumnOrGroup(t.columnID),i.indexOf(n.attribute.name)>-1?e.is(o[n.attribute.name])&&"NotSet"!==o[n.attribute.name]:i.indexOf(n.attribute.name+"_Inclusive")>-1?e.is(o[n.attribute.name+"_Inclusive"])&&"NotSet"!==o[n.attribute.name+"_Inclusive"]:!!e.is(o[n.attribute.name])}})}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/MfgItemCreateReportUI",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a){var s,l,u="full_report",c="erroronly_report",d=a.getComponent("TreeNodeModel"),g=a.getComponent("TreeDocument"),f=a.getComponent("DataGridView"),p=i.getComponent("WUXFrameWindowsManager"),h=[{text:o.getNLSValue("MfgItemCreateReportUI.Column.ProductName"),description:o.getNLSValue("MfgItemCreateReportUI.Column.ProductName"),dataIndex:"tree",width:"40%"},{text:o.getNLSValue("MfgItemCreateReportUI.Column.Status"),description:o.getNLSValue("MfgItemCreateReportUI.Column.Status"),dataIndex:"Status",width:"10%"},{description:o.getNLSValue("MfgItemCreateReportUI.Column.isMfgRefernceCreatedOrReused"),dataIndex:"isMfgRefernceCreatedOrReused",icon:o.getIconURLFromKey("InsertCreateAssembly"),width:"10%"},{description:o.getNLSValue("MfgItemCreateReportUI.Column.isScopeLinkCreated"),dataIndex:"isScopeLinkCreated",typeRepresentation:"boolean",icon:o.getIconURLFromKey("ProductImplementLink"),width:"5%"},{description:o.getNLSValue("MfgItemCreateReportUI.Column.isInstanceCreated"),dataIndex:"isInstanceCreated",typeRepresentation:"boolean",icon:o.getIconURLFromKey("CreateInstance"),width:"5%"},{description:o.getNLSValue("MfgItemCreateReportUI.Column.isImplementLinkCreated"),dataIndex:"isImplementLinkCreated",typeRepresentation:"boolean",icon:o.getIconURLFromKey("ProductImplementLinkOcc"),width:"5%"},{text:o.getNLSValue("MfgItemCreateReportUI.Column.ErrorMessages"),description:o.getNLSValue("MfgItemCreateReportUI.Column.ErrorMessages"),dataIndex:"ErrorMessages",width:"30%"}],m=function(t){var n,i,r,a,s,l={longHelp:""};if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(a=(r=this.getColumnOrGroup(t.columnID)).dataIndex,s=t.nodeModel,-1===t.rowID)return e.is(r.description)&&(l.longHelp=r.description),l;if(i="tree"===a?s.getLabel():s.getAttributeValue(a),e.is(i))switch(a){case"tree":case"Status":case"isMfgRefernceCreatedOrReused":case"ErrorMessages":l.longHelp=i;break;case"isScopeLinkCreated":case"isInstanceCreated":case"isImplementLinkCreated":n="MfgItemCreateReportUI."+a+(i?".Created":".NotCreated"),l.longHelp=o.getNLSValue(n)}return l};return s=function(t){var r,a,s=p.getFrameWindow(n.getAppContext()).getImmersiveFrame(),l=o.getIconURLFromKey("CreateMfgItemStructure"),u=i.createElement("div",{class:"tree-list-container"});return(r=i.create("Panel",{title:e.is(t.title)?t.title:o.getNLSValue("MfgItemCreateReportUI.Dialog.Title"),icon:e.is(l)?l:"",identifier:"createMfgItemsReportPanel",immersiveFrame:s,content:u,width:500,height:250,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){r.hide()},a=new g,new f({treeDocument:a,columns:h,getCellTooltip:m}).getContent().inject(u),{panel:r,treeDocument:a}},l=function(t,n){var i=this;i.treeDocument.prepareUpdate(),t.forEach(function(t){var n,a,s,l,g,f,p;(i.mode===u||i.mode===c&&"Success"!==t.Status)&&(g=(l=t.ProductOcc.split(","))[l.length-1],f=r.getInstance(g),a=(p=r.getReferenceModel(g)).get("PLMEntity.V_Name")+"("+f.get("PLMInstance.PLM_ExternalID")+")",s=p.get("VPMReference.V_IsManufacturable"),e.is(t.isRefernceCreated)&&(t.isRefernceCreated?t.isMfgRefernceCreatedOrReused=o.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Created"):t.isMfgRefernceCreatedOrReused=o.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Reused")),e.is(t.Status)&&("Phanthom"===t.Status&&"FALSE"===s&&(t.Status="NON-BOM"),t.Status=o.getNLSValue("MfgItemCreateReportUI.Status."+t.Status)),n=new d({label:a,grid:t}),i.treeDocument.addRoot(n))}),i.treeDocument.pushUpdate(),n()},{displayReport:function(t){var n;t=t||{},e.is(t.report.CreatedItems,"array")&&(n=s(t),r.getExecuteByBlockPromise({callback:l,globalArray:t.report.CreatedItems,context:{treeDocument:n.treeDocument,mode:e.is(t.mode)?t.mode:u}}).then(function(){n.treeDocument.getRoots().length>0&&n.panel.show()}))}}}}),define("DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphLinkFilterUI",["UWA/Core"],function(e){"use strict";var t=!0;return function(n){var i,o,r,a=[],s=n.getBehavior("UXFactoryBehavior"),l=n.getBehavior("EGraphViewBehaviour"),u=n.getBehavior("ResourceBehavior");return{init:function(t){i=e.extend(i,t)},destroy:function(){o.destroy(),o=void 0},isActive:function(){},getDisplayLabel:function(e){var t="";switch(e){case"scope":t=u.getNLSValue("GraphViewLinksFilter.Scope");break;case"partialscopeOnHeaderOperation":t=u.getNLSValue("GraphViewLinksFilter.PartialScope");break;case"implement":t=u.getNLSValue("GraphViewLinksFilter.Implement");break;case"origin":t=u.getNLSValue("GraphViewLinksFilter.Origin");break;case"alternate":t=u.getNLSValue("GraphViewLinksFilter.Alternate");break;case"output":t=u.getNLSValue("GraphViewLinksFilter.Output");break;case"productFlow":t=u.getNLSValue("GraphViewLinksFilter.ProductFlow");break;case"capableResources":t=u.getNLSValue("GraphViewLinksFilter.CapableResources");break;case"capableResourcesStructure":t=u.getNLSValue("GraphViewLinksFilter.CapableResourcesStructureLink");break;case"secondaryCapableResources":t=u.getNLSValue("GraphViewLinksFilter.SecondaryCandidateResourceLink");break;case"capableResourceAssetStructure":t=u.getNLSValue("GraphViewLinksFilter.CapableResourceAssetStructure")}return t},loadLinkGraphUI:function(){var e,i,o,c,d,g,f,p,h=this,m={},I=u.getNLSValue("InsertCmd.OK"),v=s.getComponent("Toggle"),b=s.getComponent("ButtonGroup"),y=s.getComponent("Button");for(n.notify("startProgress",m),r=s.create("Dialog",{title:u.getNLSValue("GraphViewLinksFilter.Header"),domId:"PPR-GraphView-filter",resizableFlag:!0,modalFlag:!0,buttons:{Ok:new y({label:I,className:"ok primary",emphasize:"primary",onClick:function(){l.removeGenericEGraphView(),l.createGenericEGraphView(),r.destroy(),r=null}})}}),e=new b({type:"checkbox"}),p=new v({type:"switch",label:u.getNLSValue("GraphViewLinksFilter.SelectUnselectAll")+"</br>",checkFlag:t,allowUnsafeHTMLLabel:!0}),e.addChild(p),p.addEventListener("buttonclick",function(e){!1===e.dsModel._properties.checkFlag.value?(h.setStateOfAllLinks(!1),t=!1):(h.setStateOfAllLinks(!0),t=!0)}),d=l.getSupportedTypesOfLink(),c=0;c<d.length;c++)i=(g=d._models[c]._attributes).linkType,o="<img src='"+u.getIconURLFromKey(g.img)+"'/>   "+h.getDisplayLabel(g.linkType),f=g.displayed,a[c]=new v({type:"checkbox",value:i,label:o,isMultiSelection:!0,checkFlag:f,allowUnsafeHTMLLabel:!0}),e.addChild(a[c]),a[c].addEventListener("buttonclick",function(e){l.setLinkDisplayStatus(e.dsModel._properties.value.value,e.dsModel._properties.checkFlag.value)});r.content=e,r.show(),n.notify("stopProgress",m)},setStateOfAllLinks:function(e){a.forEach(function(t){t.checkFlag=e,l.setLinkDisplayStatus(t._properties.value.value,e)})}}}}),define("DS/DELPPWViewBehaviors/TLV3DViewerBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["Operations3DViewerPlugin"],creator:function(t,n,i){const o=function(e,t){this.rirPath=e,this.isVisible=t};var r,a,s,l,u,c,d,g,f,p,h,m,I,v,b;return r=function(e){var t,n=[];for(t=0;t<e.length;t++)t%2==1&&n.push(e[t]);return n},a=function(){var e=n.getBehavior("TreeListViewBehavior"),t={};return e.hasHideShowItems3DColumn()&&(t.hideShowItems3D=function(e){var t,n=e.context.nodeModel,i=n.getRIRpath(),r=0===l(n);t=new o(i,r),f(t)},t.hiddenByUser=!1),e.has3DBuildUpColumn()&&(t.hideShowBuildUp3D=function(e){var t=e.context.nodeModel,i={};i.isActivated=0===t.get3DBuildUpState(),i.absPath=t.getAbsolutePath(),n.notify("toggle3DBuildUpColumnButton",i)},t.hideShow3DBuildUpState=0),t},s=function(e){i.add3DVisibilityState(e)},l=function(e){return i.get3DVisibilityState(e.getRIRpath())},u=function(e,t){i.update3DVisibilityState(e.getRIRpath(),t)},c=function(e){return i.isAggregatingRootLoadedInViewer(e)},d=function(e,t){i.overrideAllChildrenNodesVisibilityState(e,t)},g=function(e,t){let n,i=[];return function e(t,r){t.hasChildren()&&t.getChildren(!0).forEach(function(t){1!==l(t)&&(n=new o(t.getRIRpath(),r),i.push(n)),t.hasChildren()&&e(t,r)})}(e,t),i},f=function(e){var t=[];e=Array.isArray(e)?e:[e],t=t.concat(e),n.notify("change3DVisibility",[t])},p=function(t){var i=n.getBehavior("WUXNodeModelBehavior"),a=i.getTreeDocument(),s=[];t.forEach(function(t){let n,u=1===t.length?t:r(t),c=i.getNodeModel(u,!0);e.is(c)&&(1!==l(c)&&(n=new o(c.getRIRpath(),!0),s.push(n)),c.getParents().forEach(function(t){if(!a.isGroupingNodeModel(t))if(s.length>0){let i,r=!1;for(i=0;i<s.length;i++)if(e.equals(s[i].rirPath,t.getRIRpath())){r=!0;break}r||1!==l(t)&&(n=new o(t.getRIRpath(),!0),s.push(n))}else 1!==l(t)&&(n=new o(t.getRIRpath(),!0),s.push(n))}),s=s.concat(g(c,!0)))}),f(s)},h=function(t){var i=n.getBehavior("WUXNodeModelBehavior"),a=i.getTreeDocument(),s=[],l=[],u=[],c=function(t,n){let i,r=t.getBrothers();return e.is(r)&&r.forEach(function(e){i=new o(e.getRIRpath(),!1),n.push(i)}),n};t.forEach(function(t){let n,u=1===t.length?t:r(t),d=i.getNodeModel(u,!0),f=[],p=[];if(e.is(d)){if(n=new o(d.getRIRpath(),!0),f.push(n),c(d,p),d.getParents().forEach(function(e){a.isGroupingNodeModel(e)||(n=new o(e.getRIRpath(),!0),f.push(n),c(e,p))}),f=f.concat(g(d,!0)),s.length>0&&f.length>0){let t,n,i=!1;for(t=0;t<f.length;t++){for(n=0;n<s.length;n++)if(e.equals(f[t].rirPath,s[n].rirPath)){i=!0;break}if(i||s.push(f[t]),l.length>0){for(i=!1,n=0;n<l.length;n++)if(e.equals(f[t].rirPath,l[n].rirPath)){i=!0;break}i&&l.splice(n,1)}}}else s=s.concat(f);if(p.length>0&&s.length>0&&l.length>0){let t,n,i=!1;for(t=0;t<p.length;t++){for(n=0;n<s.length;n++)if(e.equals(p[t].rirPath,s[n].rirPath)){i=!0;break}i||l.push(p[t])}}else l=l.concat(p)}}),u=(u=u.concat(s)).concat(l),f(u)},m=function(t){var i=n.getBehavior("WUXNodeModelBehavior"),a=[];t.forEach(function(t){let n,s=1===t.length?t:r(t),u=i.getNodeModel(s,!0);e.is(u)&&(1!==l(u)&&(n=new o(u.getRIRpath(),!0),a.push(n)),a=a.concat(g(u,!0)))}),f(a)},I=function(t){var i,o=n.getBehavior("WUXNodeModelBehavior"),r=o.getTreeDocument(),a=t.parentPID,s=t.isVisible?1:null;i=o.getNodeModel(a,!0),e.is(i)&&(r.prepareUpdate(),u(i,s),i.updateOptions({hiddenByUser:!1}),function e(t,n){if(!t.hasChildren())return u(t,n),void t.updateOptions({hiddenByUser:!1});t.getChildren(!0).forEach(function(t){u(t,n),t.updateOptions({hiddenByUser:!1}),t.hasChildren()&&e(t,n)})}(i,s),r.pushUpdate())},v=function(t){var i,o,r=n.getBehavior("WUXNodeModelBehavior"),a=r.getTreeDocument();i=function(t,n){let i,o=0,r=0,a=t.getChildren(!0),s=1;for(i=0;i<a.length;i++)0===l(a[i])?r++:-1===l(a[i])&&o++;return(r>0||o>0)&&(s=a.length===r?e.is(n)?n:0:-1),s},o=function(e){e.getParents().forEach(function(e){a.isGroupingNodeModel(e)||e.is3DHiddenByUser()||(u(e,i(e)),e.updateOptions({hiddenByUser:!1}))})},a.prepareUpdate(),t.forEach(function(t){var n=t.isVisible?1:0,a=r.getNodeModel(t.absPath,!0);e.is(a)&&(a.hasChildren()&&1===n?u(a,i(a,n)):u(a,n),a.isRoot()||o(a),0===n?a.updateOptions({hiddenByUser:!0}):a.updateOptions({hiddenByUser:!1}))}),a.pushUpdate()},b=function(t){var i=n.getBehavior("WUXNodeModelBehavior");t.forEach(function(t){var n=t.isActivated?1:0,o=i.getNodeModel(t.absPath,!0);e.is(o)&&o.updateOptions({hideShow3DBuildUpState:n})})},{listenTo:function(){return{toggle3DVisibilityState:f,computeShowItems3DVisibility:p,computeShowOnly3DVisibility:h,computeShowAll3DVisibility:m,set3DVisibilityState:I,update3DVisibilityState:v,update3DBuildUpState:b}},onStart:function(){},onStop:function(){},getReferenceNodeOptions:function(){return a()},get3DVisibilityState:function(e){return l(e)},update3DVisibilityState:function(e,t){u(e,t)},add3DVisibilityState:function(e){s(e)},isAggregatingRootLoadedInViewer:function(e){return c(e)},overrideAllChildrenNodesVisibilityState:function(e,t){d(e,t)}}}}}),define("DS/DELPPWViewBehaviors/ManageCapableResourcesBehaviour/ManageCapableResourcesBehaviour",["UWA/Core"],function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin"],creator:function(t,n,i,o,r,a,s,l,u,c,d){var g,f,p,h,m,I,v;return m=function(t,i,o,r){o=o||{},e.is(i)&&n.info(i,r),n.notify("stopProgress",t),e.is(o.onComplete,"function")&&o.onComplete.call(null,i)},I=function(t,i,o,r,a){r=r||{},e.is(o,"string")&&(i+="\n"+o),n.warn(i,a),n.debug(i),n.notify("stopProgress",t),e.is(r.onFailure,"function")&&r.onFailure.call(null,i)},v=function(e,t){var n=a.getConnection(t),o=a.getReference(n.get("to")).get("PLMEntity.V_Name");return i.getNLSValue(e,{resource:o})},g=function(e){var t,n,o,r=[],s=e.path,l=e.id,u=function(e,t,n){e&&r.unshift({label:e.get("PLMEntity.V_Name"),icon:{iconPath:i.getIconURLFromKey(e.get("type")),iconSize:{width:"20px",height:"20px"}},instPID:t,refPID:e.get("PID"),path:n})};if(0===s.length)u(a.getReference(l),null,[]);else for(t=s.length-1;t>=0;t--)o=s[t],u(a.getReferenceModel(o),o,s.slice(0,t+1)),0===t&&(n=a.getInstance(o),u(a.getAggregatingReferenceModelFromInstance(n),null,[]));return r},f=function(e){var t=[],n=a.getFilteredInstancesFromCollection(e);return(n=(n=n.map(function(e,t){return{position:t,data:e}})).sort(function(e,t){var n=e.data.get("V_TreeOrder"),i=t.data.get("V_TreeOrder");return n&&i?Number(n)-Number(i):e.position-t.position})).forEach(function(e){var n=a.getReferenceModel(e.data.id);a.isOperation(n)&&t.push({name:n.get("PLMEntity.V_Name"),type:n.get("type"),instPID:e.data.id,icon:i.getIconURLFromKey(n.get("type")),refPID:n.get("PID")})}),t},{listenTo:function(){return{}},onStart:function(e,t){u.getViewLabelMap().MANAGECAPABLERESOURCESMOD={attribute:{name:"PLMEntity.V_Name",dataIndex:"V_Name",dicoType:"PLMEntity",entity:"reference"},dataIndex:"PLMEntity.V_Name"},t()},onStop:function(){},setStepOperationUIState:function(e){h=e},getStepOperationUIState:function(){return h},getChildrenInfo:function(e){return f(e)},getBreadcrumbValue:function(e){return g(e)},setBreadCrumb:function(e){p=e},getBreadCrumb:function(){return p},isBreadCrumbLabelSameAsNewLabel:function(e){var t=!1,n=p.value;return n.length===e.length&&(t=!(t=n.some(function(t,n){return t.label!==e[n].label}))),t},getBreadCrumbLastElementRefPID:function(){var e=this.getBreadCrumb().value;return e[e.length-1].refPID},getBreadCrumbRefPIDs:function(){var e=[];return this.getBreadCrumb().value.forEach(function(t){e.push(t.refPID)}),e},isBreadCrumbLastElementHeaderOperation:function(){var e=this.getBreadCrumbLastElementRefPID(),t=a.getReference(e);return s.isAKindOf(t,"DELLmiHeaderOperationReference")},getBreadCrumbLastElementInstPID:function(){var e=this.getBreadCrumb().value;return e[e.length-1].instPID},isPrimaryCapableResourceLink:function(e){return"DELAsmProcessCanUseCnx"===a.getConnection(e).get("type")},getBreadCrumbRIRPath:function(){var e,t,n,i=[];for(e=p.value.length,t=0;t<e;t++)n=p.value[t],0===t?i.push(n.refPID):(i.push(n.instPID),i.push(n.refPID));return i},checkType:function(e,t){return a.getReference(e).get("PPRTYPE")===t},checkParentType:function(e,t){var n=a.getInstance(e).get("isAggregatedBy");return a.getReference(n).get("PPRTYPE")===t},isUsagePossible:function(){var t=this.getBreadCrumbLastElementRefPID(),n=this.getBreadCrumbLastElementInstPID();return this.checkType(t,"OPERATION")&&e.is(n)&&this.checkParentType(n,"SYSTEM")},createResourceUsage:function(e,t){a.createInstance(e,t)},getResourceUsage:function(t){var n=a.getConnection(t).get("ResourceUsage");return e.is(n)?a.getInstance(n):null},getReferenceModel:function(e){return a.getReferenceModel(e)},getReferencePID:function(e){return a.isReference(e)?e:a.getReferenceIdFromInstance(e)},getImpacted:function(e,t,n){return a.getImpacted(e,t,n)},setPreferred:function(t,o){var r,s,u={};r={url:"dsmfg/private/V0/MfgElement/connection/setPreferred/"+t,method:"PUT",context:this,onComplete:function(i){var r,l=[];e.is(i)&&e.is(i.preferred)&&(r=a.getConnection(i.preferred).get("from"),a.getImpacted(r,!1,{relationTypes:["DELAsmProcessCanUseCnx"]}).forEach(function(e){var n=e.get("PID"),i=n===t;l.push({linkPID:n,state:i}),e.set("DELAsmProcessCanUseCnx.V_IsPreferred",i?"TRUE":"FALSE")}),n.notify("updatePreferredLink",[l])),m(u,v("ManageCapableResource.setPreferred.Success",t),o,s)},onFailure:function(){I(u,v("ManageCapableResource.setPreferred.Failure",t),o,s)}},n.notify("startProgress",u),s=n.log(i.getNLSValue("ManageCapableResource.setPreferred")),l.webServiceRequest(r)},setResourceUsage:function(t,o){var r,s,u,c={};this.isUsagePossible()&&(s=this.getBreadCrumbRIRPath(),r={url:"dsmfg/private/V0/MfgElement/connection/setResourceUsage/?rscInstance="+t.instPID+"&stepOperationRIRpath="+s+"&rscLinkPID="+t.linkPID,method:"PUT",context:this,onComplete:function(i){var r,s,l,d,g={};if(e.is(i.ResourceUsage))for(s in r=i.ResourceUsage)r.hasOwnProperty(s)&&(l=r[s],(d=a.getConnection(s)).set("ResourceUsage",l),g={linkPID:d.get("PID"),instMdl:a.getInstance(l)},n.notify("updateResourceUsage",g));m(c,v("ManageCapableResource.setResourceUsage.Success",t.linkPID),o,u)},onFailure:function(){I(c,v("ManageCapableResource.setResourceUsage.Failure",t.linkPID),o,u)}},n.notify("startProgress",c),u=n.log(i.getNLSValue("ManageCapableResource.setResourceUsage")),l.webServiceRequest(r))},fetchResourceUsages:function(t,o){var r,s,u=this,c={};e.is(t,"array")&&t.length>0?(r=t.map(function(t){return function(t){return new Promise(function(n,i){var o;o={url:"dsmfg/private/V0/MfgElement/connection/getResourceUsage?stepOperationRIRpath="+t.idFrom+"&rscLinkPID="+t.idTo,method:"GET",context:u,onComplete:function(t){var i,o,r;if(e.is(t.resourceUsage))for(o in i=t.resourceUsage)i.hasOwnProperty(o)&&(r=i[o],a.getConnection(o).set("ResourceUsage",r));n(t)},onFailure:function(){i()}},l.webServiceRequest(o)})}(t)}),n.notify("startProgress",c),s=n.log(i.getNLSValue("ManageCapableResource.getResourceUsage")),e.Promise.allSettled(r).then(function(e){var t=[],n=0;e.forEach(function(e,i){"rejected"===e.state?n++:t.push(e.value)}),0===n?m(c,i.getNLSValue("ManageCapableResource.getResourceUsages.Success"),o,s):n===e.length?I(c,i.getNLSValue("ManageCapableResource.getResourceUsages.Failure"),null,o,s):I(c,i.getNLSValue("ManageCapableResource.getResourceUsages.PartialFailure"),null,o,s)})):e.is(o)&&e.is(o.onComplete)&&o.onComplete.call(null)},createRscDetailLinkBulk:function(t,o){var r,s,u,c,d={},g=function(t){return new Promise(function(n,i){var r,s={connectionParams:t},u={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}};r={url:"dsmfg/private/V0/MfgElement/connection/resourceDetail/createResourceDetail",method:"POST",data:e.Json.encode(s),context:self,onComplete:function(t){var i=a.getConnectionParser();e.is(t.connections)&&t.connections.forEach(function(e){i.parse(e,u)}),a.addToCollections({stackedConnections:u.stackedConnections,onComplete:function(e){o.onComplete&&n(e.connections)}})},onFailure:function(){i()}},l.webServiceRequest(r)})},f=[],p=[];if(e.is(t,"array")&&t.length>0){for(s=0,u=t.length;s<u;s+=5)c=t.slice(s,s+5),f.push(g(c));n.notify("startProgress",d),r=n.log(i.getNLSValue("ManageCapableResource.createResourceDetail")),e.Promise.allSettled(f).then(function(t){var n=0;t.forEach(function(e){"rejected"===e.state?n++:p=p.concat(e.value)}),0===n?(m(d,i.getNLSValue("ManageCapableResource.createResourceDetails.Success"),null,r),e.is(o)&&e.is(o.onComplete)&&o.onComplete.call(null,p)):n===t.length?I(d,i.getNLSValue("ManageCapableResource.createResourceDetails.Failure"),null,o,r):I(d,i.getNLSValue("ManageCapableResource.createResourceDetails.PartialFailure"),null,o,r)})}else o.onComplete.call(null,p)},fetchRscDetailLinkBulk:function(t,o){var r,s,u,c,d={},g=function(t){return new Promise(function(n,i){var r,s={connectionParams:t},u={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}};r={url:"dsmfg/private/V0/MfgElement/connection/resourceDetail/getResourceDetail",method:"POST",data:e.Json.encode(s),context:self,onComplete:function(t){var i=a.getConnectionParser();e.is(t.connections)&&t.connections.forEach(function(e){i.parse(e,u)}),a.addToCollections({stackedConnections:u.stackedConnections,onComplete:function(e){o.onComplete&&n(e.connections)}})},onFailure:function(){i()}},l.webServiceRequest(r)})},f=[],p=[];if(e.is(t,"array")&&t.length>0){for(s=0,u=t.length;s<u;s+=5)c=t.slice(s,s+5),f.push(g(c));n.notify("startProgress",d),r=n.log(i.getNLSValue("ManageCapableResource.getResourceDetail")),e.Promise.allSettled(f).then(function(t){var n=0;t.forEach(function(e){"rejected"===e.state?n++:p=p.concat(e.value)}),0===n?(m(d,null,null,r),e.is(o)&&e.is(o.onComplete)&&o.onComplete.call(null,p)):n===t.length?I(d,i.getNLSValue("ManageCapableResource.getResourceDetails.Failure"),null,o,r):I(d,i.getNLSValue("ManageCapableResource.getResourceDetails.PartialFailure"),null,o,r)})}else o.onComplete.call(null,p)}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MSOColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";var n="DELLmiEstimatedTime.V_EstimatedTime";return function(t,i,o,r,a,s){return{name:"MSOColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return!0},getCellTypeRepresentation:function(e){return e.isHeader?"string":"enumCustom"},getCellClassName:function(e){return""},getCellValue:function(t){var n=e.is(t.nodeModel)?t.nodeModel:null;if(e.is(n))return t.nodeModel.options.grid[t.dataIndex]},getCellSemantics:function(e){var t={"":"Undefined"};return t[a.getNLSValue("ManageStepOperation.StepOnly")]="StepOnly",t[a.getNLSValue("ManageStepOperation.Reserved")]="Reserved",t[a.getNLSValue("ManageStepOperation.Released")]="Released",{possibleValues:t,valueType:"enumCustom"}},setValue:function(i,r,s){var l,u,c,d,g,f=r.nodeModel.options.grid.cellInfo.rowInfo,p=e.is(f[i.dataIndex].resourceDetailPID)?f[i.dataIndex].resourceDetailPID:null,h=r.cellModel,m={},I=r.columnID<=2?"PrimaryResourceLinkDetail":"SecondaryResourceLinkDetail",v={onComplete:function(e){var n="Undefined"===e.get(I+".V_AvailabilityMode")?"":e.get(I+".V_AvailabilityMode");r.nodeModel.setAttribute(i.dataIndex,n),f[i.dataIndex]={resourceDetailPID:e.get("PID"),availabilityMode:e.get(I+".V_AvailabilityMode")},d=a.getNLSValue("ManageStepOperation.setAvilabilityMode.Success",{availablity:e.get(I+".V_AvailabilityMode")}),t.info(d,c),t.notify("stopProgress",m)},onFailure:function(e){r.nodeModel.setAttribute(i.dataIndex,h),g=a.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),t.warn(g,c),t.debug(g),t.notify("stopProgress",m)},data:{}};v.data[I+".V_AvailabilityMode"]=s,e.is(p)?(t.notify("startProgress",m),c=t.log(a.getNLSValue("ManageStepOperation.setAvilabilityMode")),o.updateConnection(p,v)):(l=t.getBehavior("ManageCapableResourcesBehaviour"),e.is(f[i.dataIndex].connectionParams)&&(u=f[i.dataIndex].connectionParams,l.createRscDetailLinkBulk(u,{onComplete:function(a){e.is(a,"array")&&a.length>0&&(p=a[0].get("PID"),f[i.dataIndex]={resourceDetailPID:p,availabilityMode:a[0].get(I+".V_AvailabilityMode")},2===r.columnID&&(f[n]={resourceDetailPID:p,estimatedTime:a[0].get(n)}),t.notify("startProgress",m),o.updateConnection(p,v))},onFailure:function(e){r.nodeModel.setAttribute(i.dataIndex,h),g=a.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),t.warn(g),t.debug(g)}})))},setLinkAttrValue:function(i,r,s){var l,u,c,d,g,f=r.nodeModel.options.grid.cellInfo.rowInfo,p=e.is(f[i.dataIndex].resourceDetailPID)?f[i.dataIndex].resourceDetailPID:null,h=r.cellModel,m={},I={onComplete:function(e){var o=e.get(n);r.nodeModel.setAttribute(i.dataIndex,o),f[i.dataIndex]={resourceDetailPID:e.get("PID"),estimatedTime:e.get(n)},d=a.getNLSValue("TableView.SingleUpdateSuccess",{key:a.getNLSValue(n),value:o}),t.info(d,c),t.notify("stopProgress",m)},onFailure:function(e){r.nodeModel.setAttribute(i.dataIndex,h),g=a.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),t.warn(g,c),t.debug(g),t.notify("stopProgress",m)},data:{}};I.data[n]=s,e.is(p)?(t.notify("startProgress",m),c=t.log(a.getNLSValue("ManageStepOperation.setAvilabilityMode")),o.updateConnection(p,I)):(l=t.getBehavior("ManageCapableResourcesBehaviour"),e.is(f[i.dataIndex].connectionParams)&&(u=f[i.dataIndex].connectionParams,l.createRscDetailLinkBulk(u,{onComplete:function(r){if(e.is(r,"array")&&r.length>0){p=r[0].get("PID"),f[i.dataIndex]={resourceDetailPID:p,estimatedTime:r[0].get(n)};let e=r[0].get("to");f[e]={resourceDetailPID:p,availabilityMode:r[0].get("PrimaryResourceLinkDetail.V_AvailabilityMode")},t.notify("startProgress",m),o.updateConnection(p,I)}},onFailure:function(e){r.nodeModel.setAttribute(i.dataIndex,h),g=a.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),t.warn(g),t.debug(g)}})))},getCellEditableState:function(e){return!0}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop",["UWA/Core"],function(e){"use strict";return function(t,n){var i,o,r,a;return i=function(){return!1},o=function(e,n){var i;return i={protocol:"3DXContent",version:"1.1",source:t.getConfig().appId,widgetId:widget.id,data:{draggedRowPID:n.nodeModel.getReferencePID()}},e.dataTransfer.setData("Text",JSON.stringify(i)),e.dataTransfer.effectAllowed="move",!1},r=function(e){return e.preventDefault(),!0},a=function(i,o){var r,a,s,l,u=!1;return e.is(i.dataTransfer)&&e.is(i.dataTransfer.getData)&&(l=i.dataTransfer.getData("Text"),e.is(l)&&(l=JSON.parse(l),e.is(l.source)&&e.is(l.widgetId)&&l.source===t.getConfig().appId&&l.widgetId===widget.id&&(u=!0))),u&&e.is(o.droppedNodes)&&e.is(o.nodeModel)?(r=o.droppedNodes[0],a=o.nodeModel,r.getReferencePID()===a.getReferencePID()&&(u=!1),"top"===o.dropPosition?s=o.rowID:"bottom"===o.dropPosition&&(s=o.rowID+1),e.is(s)&&r._getRowID()!==s||(u=!1)):u=!1,u&&n.notify("moveDataCollectRow",[r.options.dataCollectPID,r.getReferencePID(),s.toString()]),!1},{init:function(e){},getDDBehavior:function(){return{onDragStartRowHeader:i,onDragRowHeader:i,onDragOverRowHeader:i,onDragEnterRowHeader:i,onDragLeaveRowHeader:i,onDragEndRowHeader:i,onDropRowHeader:i,onDragStartCell:o,onDragCell:i,onDragOverCell:r,onDragEnterCell:i,onDragLeaveCell:i,onDragEndCell:i,onDropCell:a,onDragStartBlank:i,onDragBlank:i,onDragOverBlank:i,onDragEnterBlank:i,onDragLeaveBlank:i,onDragEndBlank:i,onDropBlank:i}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/UrlColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a){var s,l,u;return s={revision:{command:"HistoryHdr"},current:{command:"MaturityHdr"},owner:{command:"ActionBar_TransferOwnership"},organization:{command:"ActionBar_ChangeOwner"},project:{command:"ActionBar_ChangeOwner"},"EnterpriseExtension.V_PartNumber":{command:"SetThePartNumber",defaultValue:r.getNLSValue("Column.EnterpriseExtension.V_PartNumber.DefaultValue")}},l=function(t){if(e.is(t.context)){let n=s[t.context.dataIndex].command,i={},o=t.context.nodeModel.getAttributeValue(t.context.dataIndex);i.node=t.context.nodeModel,n=e.is(n,"object")?n[o]:n,a.executeCommand(n,i)}},u=function(n){if(e.is(n.context)){let e={},i=n.context.cellView.collectionView.getColumnOrGroup(n.context.columnID);e.node=n.context.nodeModel,e.infos=o.getNodeAndColumnInfos(e.node,i),e.nodeInfos={referencePID:e.node.getReferencePID(),instancePID:e.node.getInstancePID(),absPath:e.node.getAbsolutePath()},t.notify("editRichText",[e.nodeInfos,e.infos])}},{isSupportedColumn:function(t){return!!e.is(s[t])},updateColumnInfos:function(n,i,o){var r,u;return o=o||{},i=i||{},u=!e.is(o.isViewEditable,"boolean")||o.isViewEditable,r=!(e.is(o.isViewFilterable,"boolean")&&!o.isViewFilterable)&&(!e.is(i.isFilterable)||i.isFilterable),n.getCellValue=function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.name);return(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=s[n.attribute.name].defaultValue),u?{label:i,func:l.bind(t),getLabel:function(){return this.label}}:i},n.hasCellValue=function(t){var n,i,o,r,a=!1;return o=t.nodeModel,r=this.getTreeDocument(),e.is(o)&&e.is(r)&&(a=r.isGroupingNodeModel(o)),a||(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.name),(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=s[n.attribute.name].defaultValue)),!!e.is(i)},n.getCellClassName=function(){return a.areModuleColumnsImmutable(t.getId())?"icon-text-column":"url-column"},n.getCellGroupingKey=function(t,n){var i,o;return i=this.getColumnOrGroup(n),t.nodeModel&&(o=t.nodeModel.getAttributeValue(i.attribute.name),(!e.is(o)||e.is(o,"string")&&0===o.length)&&(o=s[i.attribute.name].defaultValue)),o},n.getCellValueForExport=function(t){var n,i=this.getColumnOrGroup(t.columnID);return t.rowID<0?n=t.cellModel:(n=t.nodeModel.getAttributeValue(i.attribute.name),(!e.is(n)||e.is(n,"string")&&0===n.length)&&(n=s[i.attribute.name].defaultValue)),n},n.getCellTypeRepresentation=function(){return"url"},r&&(n.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:function(t,n){var i,o;return o=this.getColumnOrGroup(t),e.is(o)&&e.is(n)&&(i=n.getAttributeValue(o.attribute.name),(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=s[o.attribute.name].defaultValue)),i}}}),n},updateRichTextColumnInfos:function(e,n,i){return i=i||{},n=n||{},e.getCellValue=function(e){return{label:r.getNLSValue("Column.DELLmiRichText.V_RichText.DefaultValue"),func:u.bind(e),getLabel:function(){return this.label}}},e.hasCellValue=function(){return!0},e.getCellClassName=function(){return a.areModuleColumnsImmutable(t.getId())?"icon-text-column":"url-column"},e.getCellGroupingKey=function(e,t){return r.getNLSValue("Column.DELLmiRichText.V_RichText.DefaultValue")},e.getCellValueForExport=function(e){return r.getNLSValue("Column.DELLmiRichText.V_RichText.DefaultValue")},e.getCellTypeRepresentation=function(){return"url"},e}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementedRevChooserUI",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a,s){var l,u,c,d,g,f,p,h,m,I,v,b,y,P,C,D,S,R=i.getComponent("TooltipModel"),V=null,A=null,w=[];return I=function(){c=i.createElement("div",{class:"implementedRevChooser-dlg-container"}),S=i.createElement("div",{class:"inside-accordeon-warningMessage"}),y(),P(),C()},v=function(t){u=e.merge(t,{disabled:!0,defaultWidth:"380",defaultHeight:"350",modalFlag:!1,resizableFlag:!0}),I(),(l=i.create("Dialog",{title:o.getNLSValue(u.cmdTitle),domId:u.cmdId,content:c,identifier:u.cmdId,width:u.defaultWidth,height:u.defaultHeight,modalFlag:u.modalFlag,resizableFlag:u.resizableFlag,buttons:{Cancel:i.create("Button",{onClick:function(){l.close()}}),Ok:i.create("Button",{disabled:!e.is(u.disabled)||u.disabled,emphasize:"primary",onClick:function(){var t=n.getBehavior("WUXNodeModelBehavior").getSelectedNodes(),i={};e.is(t)&&t.length>0&&(A=t[0].getReferencePID()),i.implementingId=V,i.implementedId=A,i.implementingPaths=w,!0===u.optionsSection&&("ComboBox"===u.scopeOption&&(i.scopeCreation=g.value),e.is(u.mfgItemPrefix)&&u.mfgItemPrefix&&(i.mfgItemPrefix=p.value),e.is(f)&&(i.updateIntermediateScopedAssemblies=f.checkFlag)),u.onOKCallBack(i)}})}})).close=function(){b()}},b=function(){var t,i=n.getBehavior("WUXNodeModelBehavior"),o=n.getBehavior("TreeListViewBehavior");e.is(l)&&(e.is(h)&&i.removeEventListener(h),e.is(m)&&i.removeEventListener(m),i.emptyNodeModel(),t=o.getDataGridView(),e.is(t)&&t.remove(),l.destroy(),d=void 0,c=void 0,l=void 0),u.onCancelCallback&&u.onCancelCallback()},y=function(){var e=i.createElement("div",{}).inject(c),t=o.getNLSValue("ImplementUI.Implementing"),n=o.getNLSValue("ImplementUI.SelectImplementing");d=i.create("SelectionControl",{title:t,message:n,renderTo:e})},P=function(){var t,r,a,s=o.getNLSValue("ImplementUI.SelectImplementedRevision"),l=i.createElement("div",{class:"implementedSection-header",html:"<h5>"+s+"</h5>"}),d=i.createElement("div",{class:u.implementedRevTreeListCSSStyle}),g=n.getBehavior("WUXNodeModelBehavior"),f=n.getBehavior("TreeListViewBehavior");D=i.createElement("div",{class:"Non-BOM_Item_WarningMsg"}),l.inject(c),d.inject(c),D.inject(c),a=e.clone(u.moduleOptions),t={rowSelection:"single"},e.is(a.views)&&e.is(a.views.treeListView)&&(r=e.extend(a.views.treeListView,t),delete a.views.treeListView,a.dataGridViewOptions=r),f.createTreeListView(a),f.loadDocument(g.getWUXNodeModel()),f.getContent().inject(d)},C=function(){var t,n,r,a,s;!0===u.optionsSection&&(s=i.createElement("div",{class:"accordeon-section-container, optionsSection"}).inject(c),t=i.createElement("div",{class:"options-container"}),i.create("Accordeon",{items:[{header:o.getNLSValue("Expander.Options"),content:t,expandedFlag:!0}],style:"filled-separate"}).inject(s),e.is(u.scopeOption)&&(n=i.createElement("div",{class:"scope-option-container"}).inject(t),i.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.CreateScopeForChildren")}).inject(n),"ComboBox"===u.scopeOption&&(g=i.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:o.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"}]}).inject(n))),e.is(u.mfgItemPrefix)&&u.mfgItemPrefix&&(r=i.createElement("div",{class:"mfgItemPrefix-option-container"}).inject(t),i.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.PrefixForMfgItems")}).inject(r),r.tooltipInfos=new R({shortHelp:o.getNLSValue("ImplementUI.PrefixForMfgItems")}),p=i.create("LineEditor",{placeholder:o.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder")}).inject(r)),a=i.createElement("div",{class:"scope-option-container"}).inject(t),i.createElement("div",{class:"wux-title-textElement-long",text:o.getNLSValue("ImplementUI.UpdateIntermediateScopedAssemblies")}).inject(a),f=i.create("Toggle",{checkFlag:!1}).inject(a))},{createUI:function(e){v(e)},isVisible:function(){return!!e.is(l)&&l.visibleFlag},destroyUI:function(){e.is(l)&&l.close()},updateImplementingLabel:function(e){var t=n.getBehavior("WUXNodeModelBehavior");V=e,d.updateLabel([r.getReferenceModel(e)]),t.emptyNodeModel(),l.clearMessages()},updateImplementedRevnList:function(t,r,a,s){var c,d,g,f,p,I=!1,v=!1,b={},y={},P=n.getBehavior("WUXNodeModelBehavior"),C={};for(c=0;c<r.length;c++){if(g=(d=r[c]).PID,!I){if(t!==g)continue;I=!0}!0!==a?((y={})["PLMEntity.V_Name"]=d["PLMEntity.V_Name"],y.revision=d.revision,b={id:g,referencePID:g,referenceType:d.type,grid:y,label:d.V_Name,revision:d.revision,icons:[o.getIconURLFromKey(d.PPRTYPE)]},e.owns(d,"VPMReference.V_IsManufacturable")&&(b.isManufacturable=d["VPMReference.V_IsManufacturable"]),P.addNodeModel(b),v=!0):a=!1}v?(s?(l.width="700",l.warning(o.getNLSValue("ImplementBehavior.Validation.ChildrenImpLinkDeletion"))):l.width=u.defaultWidth,h=P.addEventListener("select",function(t){e.is(l)&&(C=t.data.nodeModel.options,e.owns(C,"isManufacturable")&&"FALSE"===C.isManufacturable&&(f=o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.NonBOMItem",{objectName:C.label+" "+C.revision})),"UpdateMfgItemStructure"===l.identifier?(p=new e.Element("div",{class:"TNRWarning"}).inject(D),i.createElement("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(p),S.setHTML(f).inject(p)):l.warning(f)),l.buttons.Ok.disabled=t.data.nodeModel.getTreeDocument().getSelectedNodes().length<1)}),m=P.addEventListener("unselect",function(t){e.is(l)&&(D.empty(),l.clearMessages(),l.buttons.Ok.disabled=t.data.nodeModel.getTreeDocument().getSelectedNodes().length<1)})):(l.width=u.defaultWidth,l.error(o.getNLSValue("ImplementBehavior.Validation.NoHigherRevision")))},showMessages:function(e,t){"info"===t?l.info(e):"warning"===t?l.warning(e):"error"===t?l.error(e):n.debug("type of message is invalid")},updateImplementing:function(){var e,t=[],i=s.getSelectionsWithPaths(n.getId());0!==i[1].length&&((e=i[1]).forEach(function(e){t.push(e.path)}),1===e.length&&(w=[t[0]]))}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,i,o){const r=1,a=2,s=3,l=4;var u,c,d=t.getBehavior("WUXNodeModelBehavior");return u=function(t){var n,o,u=a,c=this.getTreeDocument();return t.rowID>-1&&e.is(c)&&!c.isGroupingNodeModel(t.nodeModel)&&(n=t.nodeModel.getAttributeValue("V_OperationTime"),e.is(n)?u="FetchInProgress"===n?s:r:(o=t.nodeModel.getReferenceType(),"OPERATION"===i.getPPRType(o)&&(u=l))),u},c=function(e){var n;e.rowID>-1&&!d.isFakeNodeModel(e.nodeModel)&&(n=e.nodeModel.getReferencePID(),t.notify("refreshOperationTime",[n]))},{getCellTypeRepresentation:function(e){var t,n="number";return(t=u.call(this,e))===s?n="user":t===l&&(n="functionIcon"),n},getCellValue:function(e){var n,i;return(n=u.call(this,e))===r?i=e.nodeModel.getAttributeValue("V_OperationTime"):n===s?i={icon:{iconName:"refresh",fontIconFamily:WUXManagedFontIcons.Font3DS,className:"refresh-rotation-class"}}:n===l&&(i=o.areModuleColumnsImmutable(t.getId())?null:c.bind(this,e)),i},hasCellValue:function(e){return u.call(this,e)!==a},getCellSemantics:function(e){var t,o,a={};return(t=u.call(this,e))===r?(o=i.getAttributeInfo("DELLmiOperationReference.V_OperationTime"),a={units:n.getNLSForUnit(o)}):t===s?a={alignment:"center"}:t===l&&(a={icon:{iconName:"refresh",fontIconFamily:WUXManagedFontIcons.Font3DS},alignment:"center"}),a},getCellEditableState:function(){return!1},getCellValueForExport:function(o){var a;if(a=o.rowID<0?o.cellModel:u.call(this,o)===r?o.nodeModel.getAttributeValue("V_OperationTime"):"",o.rowID>=0&&""!==a){const r=t.getBehavior("ExportToCSVBehaviour");if(e.is(r)&&r.getExportUnitsPreference()){const t=this.getColumnOrGroup(o.columnID);if(e.is(t)){const o=n.getAttributeInfoFromColumn(t).attributeName,r=i.getAttributeInfo(o);if(e.is(r)&&n.hasMagnitude(r)){const t=n.getNLSForUnit(r);e.is(t)&&(a=a+" "+t)}}}}return a}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager",["UWA/Core"],function(e){"use strict";const t=["DELFmiContQuantity_Mass.V_ContQuantity","DELFmiContQuantity_Area.V_ContQuantity","DELFmiContQuantity_Length.V_ContQuantity","DELFmiContQuantity_Volume.V_ContQuantity"],n="IsCompensation",i="DELFmiMagnitudeExt.V_DimensionType";return function(o,r,a,s,l){var u=o.getBehavior("ModelBehavior"),c=o.getBehavior("WUXNodeModelBehavior");return{getNonModelDataIndexes:function(){return[n]},getCellTypeRepresentation:function(e){return e.isHeader?"string":"boolean"},hasCellValue:function(n){var i,o,a,l=!1;if(!c.isFakeNodeModel(n.nodeModel)&&(o=this.getColumnOrGroup(n.columnID),a=r.getNodeAndColumnInfos(n.nodeModel,o),e.is(a.objectToBeModified)))for(i=0;i<t.length;i++)if(r.doesAttributeExist(a.objectToBeModified,t[i])||s.isAKindOf(a.objectToBeModified,"ProcessInstanceContinuous")&&r.isAttrApplicableForType(a.objectToBeModified,t[i])){l=!0;break}return l},getCellValue:function(n){var i,o,r=!0;if(e.is(n))for(i=0;i<t.length;i++)if(o=n.nodeModel.getAttributeValue(t[i]),e.is(o)){r=!1;break}return r},setCellValue:function(c,d){var g,f,p,h,m={},I={},v={},b=e.clone(this.getColumnOrGroup(c.columnID)),y=s.getAttributeInfo(n);switch(a.getReferenceModel(c.nodeModel.getReferencePID()).get(i).toUpperCase()){case"MASS":p=t[0];break;case"AREA":p=t[1];break;case"LENGTH":p=t[2];break;case"VOLUME":p=t[3]}e.is(u)&&(d?(m.IsCompensation="TRUE",v={data:m,onComplete:function(){o.notify("editAttribute"),delete c.nodeModel.options.grid[p+".instance"],g=l.getNLSValue("TableView.SingleUpdateSuccess",{key:r.getNLS(y),value:l.getNLSValue("TRUE")}),o.info(g),o.notify("stopProgress",I)},onFailure:function(){g=l.getNLSValue("TableView.SingleUpdateFailure",{key:r.getNLS(y),value:l.getNLSValue("TRUE")}),o.warn(g),o.notify("stopProgress",I)}},o.notify("startProgress",I),h=c.nodeModel.getInstancePID(),a.updateInstance(h,v)):(b.attribute={name:p,dataIndex:p.split(".")[1],entity:"instance",dicoType:p.split(".")[0]},f=r.getNodeAndColumnInfos(c.nodeModel,b),d="1",h=c.nodeModel.getReferencePID(),u.updateModelAttribute(h,f,d,{onSuccess:function(){g=l.getNLSValue("TableView.SingleUpdateSuccess",{key:r.getNLS(y),value:l.getNLSValue("FALSE")}),o.info(g)}})))}}}}),define("DS/DELPPWViewBehaviors/MfgProcessReplaceBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin","DicoPlugin","ProcessImplementPlugin"],creator:function(t,n,i,o,r,a,s,l,u){var c,d,g;return c={replaceByLatest:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByLatestRevision",dialogTitle:r.getNLSValue("Dialog.ReplaceByLatest.Report")},replaceByExisting:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/WithExisting",dialogTitle:r.getNLSValue("Dialog.ReplaceByExisting.Report")},replaceByNewRevision:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByNewRevision",dialogTitle:r.getNLSValue("Dialog.ReplaceByNewRevision.Report")},replaceByNew:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/WithExisting",dialogTitle:r.getNLSValue("Dialog.ReplaceByNew.Report")}},d=function(t,i,o,a,l,u,d){var f={};n.notify("startProgress",f),new Promise(function(r,a){s.webServiceRequest({url:c[t].URL,method:"POST",headers:s.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode({instancesToReplace:i,existingRefPID:o,oneDelmiaAggregationMode:n.getPreferenceValue("oneDelmiaAggregationMode")}),onFailure:a,onTimeout:a,onCancel:a,onComplete:r})}).then(function(e){g(t,e,f,a,l,u,d)},function(i,o){n.notify("stopProgress",f),e.is(o)&&e.is(o.message,"string")&&n.warn(r.getNLSValue("Error."+t+".Title"),a),n.log(r.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+r.getNLSValue("failed"),a)}).catch(function(){n.notify("stopProgress",f),n.debug(r.getNLSValue("Error."+t+".Title"),a),n.log(r.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+r.getNLSValue("failed"),a)})},g=function(t,o,s,l,u,d,g){var f,p,h,m,I,v=[],b=[],y=a.getConnectionParser();f={silentMode:!1,stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},p=o.succeeded||[],h=o.failed||[],p.forEach(function(e){e.instancesAndReferences.forEach(function(e){var t=e.attributesValue;Object.prototype.hasOwnProperty.call(t,"isInstanceOf")?(t.queriedForConnections=!0,f.stackedInstances.push(t)):(t.queriedForConnections=!0,b.push(t.PID),f.stackedReferences.push(t))}),e.connections.forEach(function(e){y.parse(e,f)}),f.deletedObjects=f.deletedObjects.concat(e.deletedObjects),v.push(e.message)}),h.forEach(function(e){v.push(e.message)}),f.onComplete=function(o){var a=n.getBehavior("UXFactoryBehavior"),g=n.getPreferenceValue("refreshBIOnAuthoring");e.is(u)&&!u||a.showMessage(c[t].dialogTitle,{messages:v,token:l}),e.is(g,"boolean")&&!0===g&&i.getBICmdState()&&i.computeBI(),n.notify("replace",{}),e.is(d,"function")&&d(o),n.notify("stopProgress",s),n.log(r.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+r.getNLSValue("completed"),l)},m=function(){a.addToCollections({stackedInstances:f.stackedInstances,silentMode:f.silentMode,onComplete:function(){a.addToCollections({stackedConnections:f.stackedConnections,stackedReferences:f.stackedReferences,deletedObjects:f.deletedObjects,silentMode:f.silentMode,onComplete:f.onComplete,onFailure:g})}})},I=function(){n.debug("Fetching getDescendantsFromServer for replaced Instances failed."),f.onComplete()},a.getDescendantsFromServer(b,m,{onFailure:I,silentMode:!0,forceDBMode:!0})},{listenTo:function(){return{}},onStart:function(e){},onStop:function(){},replace:function(t,i,s,g,f,p){var h,m=[],I=[],v=o.getSelectionsWithPaths(n.getId()).length>0?o.getSelectionsWithPaths(n.getId()):s,b=n.log(r.getNLSValue("replaceCmd.LogMessage",{replaceType:t}));if(e.is(v)&&v.length>0){for(let e=0;e<v.length;e++)if(v[e].length>0){v=v[e];break}v.forEach(function(e){m.push(e.path.join(",")),I=I.concat(e.path.splice(0,e.path.length-1))}),h=v.every(function(e){var t=e.id;return-1===I.indexOf(t)})}if(e.is(c[t]))if(m.length<1)n.warn(r.getNLSValue("Error.NoSelections.Title"),b);else if(h)if("replaceByExisting"===t){let o=a.getReference(i),s=[u.getPartialScopeLinkType()],c={relationTypes:s,onComplete:function(){var e=n.getBehavior("MfgProcessBehavior"),o=a.getReference(i);m.every(function(t){var n={child:o,targetAbsPath:t.split(",")};return!0===e.isInstPossible(n)})?d(t,m,i,b,g,f,p):n.warn(r.getNLSValue("ModelBehavior.InsertInstance.HOP.Error",{refName:o.get("PLMEntity.V_Name")}),b)}};e.is(o)?l.isAKindOf(o,"DELLmiHeaderOperationReference")?a.getConnectionsByModel(o,null,c):d(t,m,i,b,g,f,p):a.getDescendantsFromServer(i,c.onComplete,{gridIDs:s,silentMode:!0,forceDBMode:!0,expandLevel:0})}else d(t,m,i,b,g,f,p);else n.warn(r.getNLSValue("Error.replaceDirectOrIndirectChild.Title"),b);else n.warn(r.getNLSValue("Error.InvalidReplaceOperation.Title"),b)}}}}}),define("DS/DELPPWViewBehaviors/LoadObjectBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["RootsPlugin","DatabasePlugin"],creator:function(t,n,i,o){var r;return{listenTo:function(){return{LoadRecentContent:this.loadObjectsFromRecent,LoadRelationsinViews:this.onLoadRelationsinViews}},onStart:function(e){r=e||{}},onStop:function(){},loadObjectsFromRecent:function(t){var o={action:[],parameters:[],promises:[],dragNDropInfo:{}},a=[],s=[],l=[],u={},c=n.getBehavior("TreeListViewBehavior"),d=n.getBehavior("WUXNodeModelBehavior"),g=function(){o.promises.forEach(function(t){var o=function(t){e.is(t.modelsNotRetrieved,"array")&&t.modelsNotRetrieved.forEach(function(e){i.removeRoot(n.getId(),e)})};t.then(o,o)})};s=e.is(t)&&e.is(t.store)?i.getStoreRoots(t.store,n.getId()):i.getRoots(n.getId()),(l=d.getRoots()).length>0&&Array.isArray(s)?s[0].forEach(function(e){-1===l.indexOf(e)&&a.push(e)}):a=Array.isArray(s)?s[0]:[],e.is(c)&&e.is(d)&&Array.isArray(a)&&a.length>0&&(o.action[0]="addRoot",o.parameters[0]={PIDsToAddRoot:a,forceIndexMode:r.forceIndexMode},o.dragNDropInfo.info={loadObjectsInOwnView:!0},n.notify("startProgress",u),d.prepareUpdate(),c.processDropEffect(o).then(function(){d.pushUpdate(),n.notify("stopProgress",u),n.notify("onRecentContentLoaded"),g()}).catch(function(){d.pushUpdate(),n.notify("stopProgress",u),n.debug("loadObjectsFromRecent failed"),g()}))},onLoadRelationsinViews:function(t){var i,a,s,l,u=[],c=!!e.is(t)&&t.selectConnectedObjects,d=n.getBehavior("SelectionBehavior"),g=n.getBehavior("WUXNodeModelBehavior"),f=[],p=[],h={expandLevel:0,forceDBMode:!0,silentMode:!0},m=!!e.is(r.isLoadObjectsinViews)&&r.isLoadObjectsinViews;0===(l=g.getSelectedNodes()).length&&m&&(s=(l=d.getSelections()).every(function(e){return 0===e.length}),l=!0===s?g.getAllDescendants():null),e.is(l,"array")&&(l.forEach(function(t){e.is(t.getID())&&u.push(t.getID()),e.is(t.getInstancePID())&&u.push(t.getInstancePID())}),i=function(t){var i=t.connections,r=[],a=[],s=[],l=[],d=function(){f.length>0&&(f.forEach(e=>{var t=o.transformToRIROccurrencePath(e);t.length>1?p.push(t):l.push(t[0])}),l.forEach(e=>{p.some(t=>t.includes(e))||p.push([e])}),n.notify("addOccurrece",[p]),c&&s.length>0&&n.notify("selectNodes",[s]))};e.is(i,"array")&&i.length>0&&(i.forEach(function(t){var n=e.is(t.get("from"))?t.get("from"):[],i=e.is(t.get("to"))?t.get("to"):[],o=function(e){e=Array.isArray(e)?e:[e],u.some(function(t){return e.includes(t)})||(f.push(e),s.push(e[e.length-1]),e.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}))};o(n),o(i)}),r.forEach(function(e){o.isReference(e)||o.isInstance(e)||a.push(e)}),a.length>0?o.getDescendantsFromServer(a,function(){var t,n,i=[];r.forEach(function(r){t=o.getInstance(r),e.is(t)&&((n=function(e){-1!==i.indexOf(e)||o.isReference(e)||i.push(e)})(t.get("isInstanceOf")),n(t.get("isAggregatedBy")))}),i.length>0?o.fetchRefList(i,e.merge({onComplete:function(){d()}},h)):d()},h):d())},a=function(){n.debug("Fetching getDescendantsFromServer for Load Relations in Views failed.")},u.length>0&&o.getDescendantsFromServer(u,i,e.merge(h,{onFailure:a,fetchInverseRelations:!0})))}}}}}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/Mutex",["UWA/Core"],function(e){"use strict";return function(){var t=!1,n=[];return{acquire:function(){var i=e.Promise.deferred();return t?n.push(i):(t=!0,i.resolve()),i.promise},release:function(){var i=null;t&&(n.length>0?i=n.shift():t=!1),e.is(i)&&i.resolve()},destroy:function(){for(;n.length>0;)n.shift().resolve()}}}}),define("DS/DELPPWViewBehaviors/DataGridViewBehavior/DataGridViewBehavior",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/CoreEvents/Events","DS/Menu/Menu"],function(e,t,n,i){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","DicoPlugin","WebServicePlugin"],creator:function(o,r,a,s,l,u,c){var d,g,f=t,p=o.getLogger(),h=["CreateAssembly","Provide","CreateMaterial","CreateKit","Installation","ProcessContinuousProvide"],m=function(e){var t=!1;return h.forEach(function(n){u.isAKindOf(e,n)&&(t=!0)}),t},I=function(t,n){var i=[],o=function(t){return e.is(n,"function")&&(d.removeRoots(),n(null)),t},r={context:this,onFailure:o};a.navigateScopesFromDB(t,function(t){var r={context:this,forceDBMode:!0,onComplete:function(t){e.is(n)&&n(t)},onFailure:function(e){return e}};e.is(t)&&e.is(t,"array")&&t.length>0?(t.forEach(function(e){m(e.type)&&i.push(e.physicalid)}),a.fetchRoot(i,r)):o(null)},r)},v=function(t,i){var o={context:this,onComplete:function(t){e.is(t)&&(a.addReference(t),n.publish({event:"DELMFNCommands/CreateMfgItemAndScopeCmd",data:i}))}};p.log("createObjectAndScope fetchRoot objectId: "+t),a.fetchRoot(t,o),l.setSelection("IMPMOD",[{id:t,path:[]}])},b=function(t,i){var o={context:this,onComplete:function(t){e.is(t)&&(a.addReference(t),n.publish({event:"DELMFNCommands/CreateMfgItemAndResultingProductCmd",data:i}))}};p.log("createObjectAndResultingProduct fetchRoot objectId: "+t),a.fetchRoot(t,o),l.setSelection("RESULTINGMOD",[{id:t,path:[]}])},y=function(t){var n=r.getBehavior("WUXNodeModelBehavior"),i=n.getRoots();e.is(t)&&t.length>=1&&t.forEach(function(t){e.is(i,"array")&&-1===i.indexOf(t.get("PID"))&&n.addNode(t,{silentMode:!0,withLinksResolved:!1,loadRootOnly:!0,doNotExpand:!0,loadChildren:!1,fromXEN:!0})})},P=function(e){f.publish("DS/PADUtils/PADCommandProxy/refresh",{data:{authored:{modified:[e],fromFacet:!0}}})};return{onStart:function(){o.addExternalListener("createMfgItemAndScope",function(){P(g)}),o.addExternalListener("createMfgItemAndResultingProduct",function(){P(g)}),f.subscribe("DS/PADUtils/PADCommandProxy/refresh",function(t){var n=t.data.authored.modified,i=t.data.authored.fromFacet,o=[],s=null;e.is(n,"array")&&!e.is(i)?n.forEach(function(t){o.onComplete=function(t){m(t.get("type"))?(s=d.getNodesFromIdentifierStringArray([t.get("PID")]),e.is(s)&&1===s.nodeModelArray.length&&(s.nodeModelArray[0].setAttribute("organization",t.get("organization")),s.nodeModelArray[0].setAttribute("owner",e.is(t.get("ds6w:responsible"))?t.get("ds6w:responsible"):t.get("owner")),s.nodeModelArray[0].setAttribute("current",t.get("current")),s.nodeModelArray[0].setAttribute("project",t.get("project")),s.nodeModelArray[0].setLabel(t.get("PLMEntity.V_Name")))):u.isAKindOf(t._attributes.type,"VPMReference")&&r.getPreferenceValue("isReleaseSyncXENEnabled")&&I(t.get("PID"),function(n){var i=c.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0});e.is(n)&&e.is(n,"array")&&n.length>0&&a.getCurrentStates([t.get("PID")],i,function(o){var s=[];e.is(o)&&"RELEASED"===o.get(t.get("PID"))&&(n.forEach(function(e){s.push(e.get("PID"))}),a.getCurrentStates(s,i,function(o){var s=[];n.forEach(function(t){var n=e.is(o)?o.get(t.get("PID")):null;e.is(n)&&"RELEASED"!==n&&u.isAKindOf(t.get("type"),"Provide")&&s.push(t)}),s.length>0&&new Promise(function(e,t){a.syncMaturity(s,i,!0,e,t)}).then(function(){s.forEach(function(n){var i=d.getNodesFromIdentifierStringArray([n.get("PID")]);e.is(i)&&1===i.nodeModelArray.length&&i.nodeModelArray[0].setAttribute("current",t.get("current"))})}).catch(function(){s.forEach(function(e){r.notify("referenceAdded",e)}),r.warn("The object(s) has been created but the state(s) hasn't been able to be changed")})}))})})},o.forceDBMode=!0,a.fetchRoot(t,o)}):function(e){I(g,e)}(y)})},setContextualMenu:function(e){e.onContextualEvent=function(e){var t=[],i=e.cellInfos.nodeModel.options.referencePID,o=r.getBehavior("WUXNodeModelBehavior");return t.push({type:"PushItem",fonticon:{family:"DSFontIcon",content:"wux-ui-3ds wux-ui-3ds-move-to"},title:s.getNLSValue("Command.MoveTo"),label:s.getNLSValue("Command.MoveTo"),action:{callback:function(){d.getRoots().forEach(function(e){i===e.options.referencePID&&e.select()}),n.publish({event:"FacetCommandManager/beginCommand",data:{commandName:"ActionBar_ChangeOwner"}})}}}),t.push({type:"PushItem",fonticon:{family:"DSFontIcon",content:"wux-ui-3ds-database-delete"},title:s.getNLSValue("Command.Delete"),label:s.getNLSValue("Command.Delete"),action:{callback:function(){var e,t,n={},l={};n.onComplete=function(){e.forEach(function(e){d.removeRoot(e),P(e.options.referencePID)})},n.onFailure=function(){r.warn(s.getNLSValue("DeleteObject.Failure"))},d.getRoots().forEach(function(e){i===e.options.referencePID&&e.select()}),t=(e=o.getSelectedNodes()).map(e=>a.getReference(e.options.referencePID)),l.object=t,l.options=n,r.notify("DeleteReferenceFromXen",l)}}}),t}},setTreeDocument:function(e){d=e},onStop:function(){},setSecurityContext:function(t){e.is(t,"string")&&n.publish({event:"DELPPXEN/CustomizeSecurityContext",data:t})},getContent:function(){},getScopes:function(e,t,n){g=e,I(e,t)},removeRoots:function(){e.is(d)&&d.removeRoots()},fetchRoot:function(e,t){t.forceDBMode=!0,a.fetchRoot(e,t)},refreshNode:function(e){!function(e){var t=d.getRoots();d.prepareUpdate(),t.forEach(function(t){t.options.referencePID===e.id&&(t.setAttributeValue("Organization",e.attributes.organization),t.setAttributeValue("Owner",e.attributes.owner))}),d.pushUpdate()}(e)},refreshTable:function(e){I(g,e)},renderMenu:function(e,t,n){e&&n&&(g=t,function(e,t){if(!e||!Array.isArray(t))throw new Error("unable to build the menu");i.show(t,{position:{x:e.left,y:e.bottom},submenu:"outside"})}(e,function(e){return[{name:"CreateAssemblyAndScopeAction",icon:s.getIconURLFromKey("CreateAssemblyAndScope"),title:s.getNLSValue("Title.MakeAssembly"),tooltip:s.getNLSValue("Title.MakeAssembly"),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateAssembly"}]})}}},{name:"CreateAssemblyAndResultingProductAction",icon:s.getIconURLFromKey("CreateAssemblyAndResultingProduct"),title:s.getNLSValue("Title.ResultingProduct.MakeAssembly"),tooltip:s.getNLSValue("Title.ResultingProduct.MakeAssembly"),type:"PushItem",action:{callback:function(){b(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateAssembly"}]})}}},{name:"CreateMaterialAndScopeAction",icon:s.getIconURLFromKey("CreateMaterialAndScope"),title:s.getNLSValue("Title.MakeMaterial"),tooltip:s.getNLSValue("Title.MakeMaterial"),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateMaterial"}]})}}},{name:"CreateMaterialAndResultingProductAction",icon:s.getIconURLFromKey("CreateMaterialAndResultingProduct"),title:s.getNLSValue("Title.ResultingProduct.MakeMaterial"),tooltip:s.getNLSValue("Title.ResultingProduct.MakeMaterial"),type:"PushItem",action:{callback:function(){b(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateMaterial"}]})}}},{name:"CreateProvideAndScopeAction",icon:s.getIconURLFromKey("CreateProvideAndScope"),title:s.getNLSValue("Title.Buy"),tooltip:s.getNLSValue("Title.Buy"),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Provide"}]})}}},{name:"CreateProvideAndResultingProductAction",icon:s.getIconURLFromKey("CreateProvideAndResultingProduct"),title:s.getNLSValue("Title.ResultingProduct.Buy"),tooltip:s.getNLSValue("Title.ResultingProduct.Buy"),type:"PushItem",action:{callback:function(){b(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Provide"}]})}}},{name:"CreateInstallationAndResultingProductAction",icon:s.getIconURLFromKey("CreateInstallProcessAndResultingProduct"),title:s.getNLSValue("Title.ResultingProduct.InstallProcess"),tooltip:s.getNLSValue("Title.ResultingProduct.InstallProcess"),type:"PushItem",action:{callback:function(){b(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Installation"}]})}}},{name:"CreateContinuousProvidedMaterialAndScope",icon:s.getIconURLFromKey("CreateContinuousProvidedMaterialAndScope"),title:s.getNLSValue("Title.CreateContinuousProvidedMaterialAndScope"),tooltip:s.getNLSValue("Title.CreateContinuousProvidedMaterialAndScope"),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/ProcessContinuousProvide"},{ID:"DisplayedInTableView",Value:"PROCESS",Mode:"In"}]})}}}]}(t)))},isAvailableType:function(e){return u.isAKindOf(e,"VPMReference")},createObjectAndScope:function(e,t){v(e,t)},createContinuousProvidedMaterialAndScope:function(t,n){!function(t,n){var i={context:this,onComplete:function(t){e.is(t)&&(a.addReference(t),r.notify("InsertCmd",n))}};p.log("createObjectAndScope fetchRoot objectId: "+t),a.fetchRoot(t,i),l.setSelection("IMPMOD",[{id:t,path:[]}])}(t,n)},createObjectAndResultingProduct:function(e,t){b(e,t)},getModel:function(){return d},setSelectedObject:function(e){g=e},hide:function(){},show:function(){}}}}}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/AbstractTreeNodeModel",["UWA/Core","DS/PPWTreeNodeModel/PPWTreeNodeModel"],function(e,t){"use strict";var n=function(e){return e.getNodeSource()===t.NODE_SOURCE.GROUPING},i=function(n){n=n||{},this._logger=this.facade,this._referencePID=null,this._instancePID=null,this._type=null,this.options={label:"",badges:{},icons:[],grid:{},thumbnail:null,useAsyncPreExpand:!1},this.setReferencePID(n.referencePID),this.setReferenceType(n.referenceType),this.options=e.extend(this.options,n),n.instancePID&&this.setInstancePID(n.instancePID),n.linkPID&&this.setLinkPID(n.linkPID),t.call(this,this.options)};function o(e){e._getFilterInfo||(e._getFilterInfo=i.prototype._getFilterInfo.bind(e),e._getChildrenFilterInfo=i.prototype._getChildrenFilterInfo.bind(e),e._removeChildrenFilterInfo=i.prototype._removeChildrenFilterInfo.bind(e),e.filterInChild=i.prototype.filterInChild.bind(e),e.filterOutChild=i.prototype.filterOutChild.bind(e))}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.name="AbstractTreeNodeModel",i.prototype.addChild=function(e,i,o){var r,a,s,l,u,c=!0;return(r=t.prototype.addChild.call(this,e,i))&&!0!==o&&(c=!0,l=r.getAttributeValue("V_TreeOrder"),(a=r.getPreviousBrother())&&l<a.getAttributeValue("V_TreeOrder")&&(c=!1),(s=r.getNextBrother())&&l>s.getAttributeValue("V_TreeOrder")&&(c=!1),c||(u=r.getParent().getChildren().sort(function(e,t){return n(e)&&n(t)?0:n(e)?-1:n(t)?1:e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")}).map(function(e){return n(e)?"":e.getInstancePID()}).indexOf(r.getInstancePID()),r=t.prototype.addChild.call(this,r,u))),r},i.prototype.getID=function(){return this.getReferencePID()},i.prototype.setReferencePID=function(t){return e.is(t,"string")?(this._referencePID=t,this.getReferencePID()):null},i.prototype.setInstancePID=function(t){return e.is(t,"string")?(this._instancePID=t,this.getInstancePID()):null},i.prototype.setLinkPID=function(t){return e.is(t,"string")?(this._linkPID=t,this.getLinkPID()):null},i.prototype.setReferenceType=function(t){return e.is(t,"string")?(this._type=t,this.getReferenceType()):null},i.prototype.getReferencePID=function(){return this._referencePID},i.prototype.getInstancePID=function(){return this._instancePID},i.prototype.getLinkPID=function(){return this._linkPID},i.prototype.getReferenceType=function(){return this._type},i.prototype.getRootPID=function(){var t=this.getRoot(!0);return e.is(t)?t.getReferencePID():null},i.prototype.getAbsolutePath=function(){var e,t,i=this.getParents(),o=[];for(e=i.length-1;e>=0;e--)t=i[e],n(t)||o.push(t.getInstancePID());return o=o.concat([this.getInstancePID()]).slice(1)},i.prototype.getRIRpath=function(){var e,t,i,o=this.getParents(),r=[];for(i=o.length-1;i>=0;i--)e=o[i],n(e)||((t=e.getInstancePID())&&r.push(t),r.push(e.getReferencePID()));return r.length>0&&!n(this)?(r.push(this.getInstancePID()),r.push(this.getReferencePID())):n(this)||r.push(this.getReferencePID()),r},i.prototype.getChildrenPID=function(){var e=this.getChildren(!0),t=[];return Array.isArray(e)&&(t=e.map(function(e){return e.getInstancePID()})),t},i.prototype.getSiblingsPID=function(){var t=this.getParent(),n=[];return e.is(t)&&(e.is(t.getChildrenPID)||(t.getChildrenPID=i.prototype.getChildrenPID.bind(t)),n=t.getChildrenPID()),n},i.prototype.expand=function(e){var n=e||{};return n.previousNodeState={},n.previousNodeState[this.getReferencePID()]=this.getState(),t.prototype.expand.call(this,n)},i.prototype._removeFilterInfo=function(){delete this.options._filterInfo},i.prototype._removeChildrenFilterInfo=function(){delete this.options._childrenFilterInfo},i.prototype.filterInChild=function(t){var i,o,r,a,s,l,u,c,d=this._getChildrenFilterInfo();if(d&&(i=d.childrenBeforeFiltering)&&(o=i.indexOf(t))>=0&&(r=t._getFilterInfo())&&r.parentBeforeFiltering===this){if(a=this.getChildren(!0))for(u=0;u<a.length;u++)if(s=a[u],!n(s)&&i.indexOf(s)>o){l=s;break}delete r.parentBeforeFiltering,e.is(t.options.isRootAttached)?!0===t.options.isRootAttached&&this.insertBefore(t,l):this.insertBefore(t,l),e.is(this.setState,"function")&&this.setState({state:d.expandStateBeforeFiltering}),t._removeFilterInfo(),c=d.filteredOutChildren.indexOf(t),d.filteredOutChildren.splice(c,1),0===d.filteredOutChildren.length&&this._removeChildrenFilterInfo()}},i.prototype.filterIn=function(e){var t,n,i,r=this._getFilterInfo();r&&r.parentBeforeFiltering&&(o(t=r.parentBeforeFiltering),t.filterInChild(this)),e&&(n=(i=this._getChildrenFilterInfo())&&i.childrenBeforeFiltering?i.childrenBeforeFiltering:this.getChildren(!0))&&n.forEach(function(t){t.filterIn(e)})},i.prototype._getFilterInfo=function(e){return!this.options._filterInfo&&Boolean(e)&&(this.options._filterInfo={}),this.options._filterInfo},i.prototype._getChildrenFilterInfo=function(e){return!this.options._childrenFilterInfo&&Boolean(e)&&(this.options._childrenFilterInfo={}),this.options._childrenFilterInfo},i.prototype.filterOutChild=function(t){var n,i,o=this.getChildren(!0);if(o.indexOf(t)<0)throw"Not a child";(n=this._getChildrenFilterInfo(!0)).childrenBeforeFiltering||(n.childrenBeforeFiltering=o&&o.length>0?o.slice(0):[],i={noExpandState:"noChildren",expandingState:"expanding",partiallyExpandedState:"partiallyExpanded",collapseState:"expanded",expandState:"collapsed"},e.is(this._expandState)&&(n.expandStateBeforeFiltering=i[this._expandState])),t._getFilterInfo(!0).parentBeforeFiltering=this,e.is(this.removeChild,"function")?this.removeChild(t):this.removeRoot(t,!0,!0),e.is(this.setState,"function")&&this.setState({state:n.expandStateBeforeFiltering}),n.filteredOutChildren||(n.filteredOutChildren=[]),n.filteredOutChildren.push(t)},i.prototype.filterOut=function(){var e=this.isRoot(!0)?this.getTreeDocument():this.getParent();null!==e&&(o(e),e.filterOutChild(this))},i.prototype.isRoot=function(i){var o=!1,r=this.getParent();if((i=!!e.is(i,"boolean")&&i)&&r&&n(r)&&0===r.getNodeDepth())o=1===this.getNodeDepth();else if(r&&r.getNodeDepth()>0){o=this.getParents().every(e=>n(e))}else o=t.prototype.isRoot.call(this);return o},i.prototype.getRoot=function(i){var o,r,a;if(i=!!e.is(i,"boolean")&&i,o=t.prototype.getRoot.call(this),i&&n(o))if(null===this.getInstancePID())o=this;else for(a=(r=this.getParents()).length-1;a>=0;a--)if(!n(r[a])){o=r[a];break}return o},i.prototype.getChildren=function(o){var r;return o=!!e.is(o,"boolean")&&o,r=t.prototype.getChildren.call(this),o&&Array.isArray(r)&&(r=r.reduce(function(e,t){var r;return n(t)?(r=i.prototype.getChildren.call(t,o),Array.isArray(r)&&(e=e.concat(r))):e.push(t),e},[])),r},i.prototype.getVisibleChildren=function(o,r){var a;return r=!!e.is(r,"boolean")&&r,a=t.prototype.getVisibleChildren.call(this,o),r&&Array.isArray(a)&&(a=a.reduce(function(e,t){var a;return n(t)?(a=i.prototype.getVisibleChildren.call(t,o,r),Array.isArray(a)&&(e=e.concat(a))):e.push(t),e},[])),a},i.prototype.getAllDescendants=function(i,o){var r=null,a=!!e.is(o,"boolean")&&o;return e.is(i,"array")&&(i=null),r=t.prototype.getAllDescendants.call(this,i),a&&e.is(r,"array")&&r.length>0&&(r=r.filter(function(e){return!n(e)})),r},i.prototype.expandAll=function(){var n,i,o=this.getTreeDocument();i=function(){e.is(n)&&this.removeEventListener(n),e.is(o)&&o.decrementExpandAllCounter()},e.is(o)&&o.increamentExpandAllCounter(),n=this.addEventListener("postExpandAll",i),this._isTrueRoot()||(this.options.useAsyncPreExpand=!0),t.prototype.expandAll.call(this)},i.prototype.collapseAll=function(){var n,i,o=this.getTreeDocument();i=function(){e.is(n)&&this.removeEventListener(n),e.is(o)&&o.decrementCollapseAllCounter()},e.is(o)&&o.increamentCollapseAllCounter(),n=this.addEventListener("postCollapseAll",i),t.prototype.collapseAll.call(this)},i.prototype.get3DBuildUpState=function(){return this.options.hideShow3DBuildUpState},i.prototype.is3DHiddenByUser=function(){return this.options.hiddenByUser},i.NODE_SOURCE=t.NODE_SOURCE,i}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MCRColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";return t.singleton({name:"MCRColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return!0},getCellTypeRepresentation:function(e){var t="string";return e.isHeader?"string":("Preferred"===e.dataIndex&&(t="functionIcon"),t)},getCellClassName:function(e){return""},getCellValue:function(e){var t=e.nodeModel.options.grid;return"Preferred"===e.dataIndex?""===t[e.dataIndex]?"FALSE":"TRUE":t[e.dataIndex]},getCellSemantics:function(e){var t;return"Preferred"===e.dataIndex&&(t={icon:e.nodeModel.options.grid.Preferred}),t},setValue:function(e,t,n){},getCellEditableState:function(e){return!1}})}),define("DS/DELPPWViewBehaviors/BulkTreeSearchHelper",["UWA/Core"],function(e){"use strict";return function(t,n){var i,o,r,a,s,l,u,c;return i=function(t,n){var i,o=-1,r=t.length;for(i=0;i<r;i++)if(e.equals(t[i],n)){o=i;break}return o},o=function(e,t){var n,i,o=[],r=e.length;for(n=e.indexOf(t);n>-1&&(o.push(n),!((i=n+1)>=r));)n=e.indexOf(t,i);return o},r=function(t,n,i){var o,r,a;a=Array.isArray(i)?i:[i],e.is(t)&&(r=t[o=JSON.stringify(n)],e.is(r)?t[o]=r.concat(a):t[o]=a)},a=function(e,t){var n=[];return 1===t.length?n=n.concat(e):t.length>1&&e.forEach(function(e){var i,o,r,a,s=e;for(i=1;i<t.length;i++){for(r=s.getChildren(!0),a=!1,o=0;o<r.length;o++)if(r[o].getInstancePID()===t[i]){s=r[o],a=!0;break}if(!a)break}a&&n.push(s)}),n},s=function(t,n){var i,o,r,a,s,l=t;if(l.isVisible()){for(i=t.isRoot(!0)?0:1;i<n.length&&(s=l.getVisibleChildren(!1,!0),e.is(s)&&0!==s.length);i++)for(o=0;o<s.length;o++)if(s[o].getInstancePID()===n[i]){l=s[o];break}a=l}else{for(r=l.getParent();!r.isVisible();)r=r.getParent();a=r}return a},l=function(n){e.is(n,"function")&&t.getRoots(!0).forEach(function(e){var t,i,o=[];for(o.push(e);o.length>0;)t=o.pop(),n(t),i=t.getChildren(!0),Array.isArray(i)&&i.forEach(function(e){o.push(e)})})},u=function(i){var o;return o=t.getRoots(!0).map(function(e){return e.getReferencePID()}),i.map(function(t){var i,r=n.getInstance(t[0]),a=null;return e.is(r)&&(i=r.get("isAggregatedBy"),o.indexOf(i)>-1&&(a=i)),a},[])},c=function(n){var i,a,s,c,d=Object.create(null),g=!1,f=!1;for(s=0,c=(i=u(n)).length;s<c&&(e.is(i[s])?g||(g=!0):f||(f=!0),!g||!f);s++);return g&&t.getRoots(!0).forEach(function(t){var a,s=t.getReferencePID();e.is(s)&&(a=o(i,s)).length>0&&a.forEach(function(e){r(d,n[e],t)})}),f&&(a=i.map(function(t,i){var o=null;return e.is(t)||(o=n[i][0]),o}),l(function(t){var n,i=t.getInstancePID();e.is(i)&&(n=o(a,i)).length>0&&n.forEach(function(e){r(d,t.getAbsolutePath(),t)})})),d},{getNodeModels:function(t,n){var s,u,c,d,g=!e.is(n)||n,f=[],p=[],h=[],m=[],I=[],v=[],b=Object.create(null),y={found:[],notFound:[]};return(t=Array.isArray(t)?t:[t]).forEach(function(e){Array.isArray(e)?p.push(e):f.push(e)}),u=p.map(function(e){return e[0]}),l(function(t){var n,i,a,s=!1;a=t.getInstancePID(),e.is(a)&&(s=(n=f.indexOf(a))>-1,(i=o(u,a)).length>0&&i.forEach(function(e){r(b,p[e],t)})),s||(s=(n=f.indexOf(t.getReferencePID()))>-1),s&&(I.push(f[n]),h.push(t))}),Object.keys(b).forEach(function(e){var t,n,i=JSON.parse(e);t=b[e],v.push(i),n=a(t,i),m=m.concat(n)}),g||(h.length<f.length&&(c=f.filter(function(e){return-1===I.indexOf(e)})).length>0&&(y.notFound=y.notFound.concat(c)),m.length<p.length&&(d=p.filter(function(e){return-1===i(v,e)})).length>0&&(y.notFound=y.notFound.concat(d))),(s=h.concat(m)).length>0&&(s=s.filter(function(e,t,n){return n.indexOf(e)===t}),y.found=s),y},getLastVisibleNodeModels:function(t){var n,i=[],a=[],c=new Set,d=Object.create(null);return t.forEach(function(e){Array.isArray(e)?a.push(e):i.push(e)}),n=u(a).filter(function(t){return e.is(t)}),l(function(t){var s,l,u,c,g=!1,f=t.getInstancePID();t.isRoot(!0)&&(u=t.getReferencePID(),e.is(u)&&(l=o(n,u)).length>0&&l.forEach(function(e){r(d,a[e],t)})),e.is(f)&&(g=(s=i.indexOf(f))>-1),g||(g=(s=i.indexOf(t.getReferencePID()))>-1),g&&(c=[i[s]],r(d,c,t))}),c=Object.keys(d).reduce(function(e,t){var n,i=JSON.parse(t);return n=d[t],Array.isArray(n)&&n.length>0&&n.forEach(function(t){var n;n=s(t,i),e.add(n)}),e},c),Array.from(c)},searchPathsPartially:function(e){var t,n,o,r={found:[],notFound:[]};return e.length>0&&(t=c(e),n=Object.keys(t).map(function(e){return JSON.parse(e)}),r.found=r.found.concat(n),n.length<e.length&&(o=e.filter(function(e){return-1===i(n,e)})).length>0&&(r.notFound=r.notFound.concat(o))),r},traverseTreeListView:function(e){l(e)}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/SequenceNoCellManager",["UWA/Core"],function(e){"use strict";return function(t,n){var i=function(t,i){var o,r,a=null;if(e.is(i)){if(i.isRoot())a=n.isAKindOf(i.object.type,"DELLmiHeaderWorkPlanReference")||n.isAKindOf(i.object.type,"DELLmiServiceHeaderWorkPlanReference")?null:1;else if(r=i.getParent().getAttributeValue(t),o=i.getPreviousBrother(),e.is(o)){let e=o.getAttributeValue(t).toString().split("."),n=parseInt(e[e.length-1]);a=null===r?n+1:r+"."+(n+1)}else a=null===r?1:r+".1";i.setAttribute(t,a)}return a};return{getCellValue:function(e){var t=e.nodeModel,n=e.dataIndex;return i.call(this,n,t)},getCellValueForFilter:function(e,t){return i.call(this,e,t)},hasCellValue:function(t){var n,i,o=!1;return n=t.nodeModel,i=this.getTreeDocument(),e.is(n)&&e.is(i)&&(o=!i.isGroupingNodeModel(n)),o}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/RPColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";return function(e,t,n,i){return{name:"RPColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return 0===e.nodeModel.getAbsolutePath().length},getNonModelDataIndexes:()=>["RP_USAGE"],getCellTypeRepresentation:function(e){var t="string";return e.isHeader?"string":("Preferred"===e.dataIndex&&(t="functionIcon"),t)},getCellClassName:function(e){return""},getCellValue:function(e){return"RP_NONE"},getCellSemantics:function(e){var n=e.nodeModel._type,o={};return t.isAKindOf(n,"Drawing")?(o[i.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",o[i.getNLSValue("ResultingProduct.Overload.2D")]="2D"):"3D"===e.cellModel?(o[i.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",o[i.getNLSValue("ResultingProduct.Overload.EIN")]="EIN",o[i.getNLSValue("ResultingProduct.Overload.3D-EIN")]="3D-EIN",o[i.getNLSValue("ResultingProduct.Overload.3D")]="3D"):(o[i.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",o[i.getNLSValue("ResultingProduct.Overload.EIN")]="EIN",o[i.getNLSValue("ResultingProduct.Overload.3D-EIN")]="3D-EIN"),{possibleValues:o,valueType:"enumCustom"}},setRPValue:function(t,o,r){var a,s,l,u=e.getBehavior("ProductImplementBehavior"),c=o.nodeModel.options.grid.cellInfo.rpConnectionFakeID,d=t.dataIndex,g=o.cellModel,f={},p={onFailure:function(){o.nodeModel.setAttribute(t.dataIndex,g),l=i.getNLSValue("ResultingProduct.setOverload.Failure"),e.warn(l,a),e.debug(l),e.notify("stopProgress",f)}};if(g!==r)return t?(e.notify("startProgress",f),a=e.log(i.getNLSValue("ResultingProduct.setOverload")),void u.updateDataMaterializationLinkUsage(o.nodeModel.options.grid.cellInfo.rpConnectionPID,r,p).then(function(){n.addConnection({PID:c,V_usage:r}),o.nodeModel.setAttribute(d,r),s=i.getNLSValue("ResultingProduct.setOverload.Success",{Overload:r}),e.info(s,a),e.notify("stopProgress",f)})):void 0},getCellEditableState:function(e){return!0}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a){var s,l,u,c,d=null,g=null,f=null,p=!1,h=!1,m=!1,I=i.getComponent("TooltipModel"),v=i.getComponent("Accordeon"),b=i.getComponent("Button"),y=function(t){var n,i,l=e.is(t.get("PLMEntity.V_usage"))&&"NULL"!==t.get("PLMEntity.V_usage")&&"VPMReference"===t.get("type")?t.get("PLMEntity.V_usage"):t.get("type"),u=new e.Element("div",{class:"TNRInfo"}),c=new e.Element("div",{class:"iconType-container"}).inject(u);return u.setData("objPid",t.id),r.isAKindOf(t,"DELFmiFunctionIdentifiedInstance")?(i=a.getReference(t.get("isInstanceOf")),o.getIconElem(i.get("type")).inject(c),new e.Element("div",{class:"SubLabelDiv",text:t.get("PLMInstance.PLM_ExternalID")}).inject(u)):(o.getIconElem(l).inject(c),new e.Element("div",{class:"SubLabelDiv",text:t.get("PLMEntity.V_Name")}).inject(u),new e.Element("div",{class:"SubRevisionDiv",text:t.get("revision")}).inject(u)),m&&(n=new e.Element("div",{class:"SubDeleteOptionBtn"}).inject(u),new b({displayStyle:"lite",icon:"wux-ui-3ds wux-ui-3ds wux-ui-3ds-close",onClick:function(t){var n,i;(n=t.target.parentNode.parentNode)&&e.is(n.getData("objPid"))&&-1!==(i=s.indexOf(n.getData("objPid")))&&(s.splice(i,1),n.destroy())}}).inject(n)),u},P=function(t,n){return(f=new e.Element("div",{class:"selectionUIitems-container"})).inject(n),new e.Element("div",{class:"SubLabelDiv",styles:{padding:"0px"}}).setHTML(o.getNLSValue(t)).inject(f),n};return{createUI:function(t){var n,i,r=new e.Element("div",{class:"accordeon-section-container"});l=new e.Element("div",{class:"inside-accordeon-warningMessage"}),u=new e.Element("div",{class:"inside-accordeon-errorMessage"}),s=[],e.is(t)&&(n=e.is(t.title)?t.title:"",i=e.is(t.message)?t.message:"",p=!!e.is(t.multiSelection)&&t.multiSelection,h=!!e.is(t.displayMultiSelection)&&t.displayMultiSelection,m=!!e.is(t.itemsWithOptions)&&t.itemsWithOptions),g=new e.Element("div",{class:"Data-selection-UI"}).inject(t.renderTo),""===n?d=P(i,g):(c=function(t,n,i){var r=new e.Element("div",{class:"accordeon-section-container"}).inject(i);return new v({items:[{header:o.getNLSValue(t),content:n,expandedFlag:!0}],style:"filled-separate"}).inject(r)}(n,r,g),d=P(i,r))},updateLabel:function(t){var n,i,a,l,u,c,g,m=[],v=!1,b=new e.Element("i",{class:"wux-ui-3ds wux-ui-3ds-menu-dot wux-layouts-rowentry-moreindicator",id:"multiValueCellMoreIndicator"}),P=[];if(!e.is(t,"string")){if(e.is(t,"array")||(t=[t]),t&&d)if(m=[],!1===p&&t.length>1)l=o.getNLSValue("Error.MultipleObjectsSelected"),this.showWarningMessage(l),v=!1;else if(t.length>0)if(h||d.empty(),f.empty(),r.isReferencesHasReadOnlyType(t))l=o.getNLSValue("Error.ReadOnlyTypesNotAllowed"),this.showErrorMessage(l),v=!1;else{for(i=0;i<t.length;i++)n=y(t[i]),h?s.includes(n.getData("objPid"))||(s.push(n.getData("objPid")),n.inject(d)):0===i&&n.inject(d),(a=new e.Element("div",{class:"TNRInfo"})).addContent(n.innerHTML),m.push(a),c=t[i].get("VPMReference.V_IsManufacturable"),e.is(c)&&"FALSE"===c&&(g=t[i].get("type"),e.is(g)&&"PRODUCT"===r.getPPRType(g)&&P.push(t[i].get("PLMEntity.V_Name")));P.length>0&&(u=P.length>1?o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.NonBOMItems")):o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.NonBOMItem",{objectName:P[0]})),this.showWarningMessageForPrd(u)),!0===p&&t.length>1&&!1===h&&b.inject(d),h||(d.tooltipInfos=new I({shortHelp:m,allowUnsafeHTMLShortHelp:!0})),v=!0}return v}d&&(d.empty(),new e.Element("div",{}).inject(d).setHTML(t).inject(d),e.is(d.tooltipInfos)&&(d.tooltipInfos=null))},showErrorMessage:function(t){var n;d.empty(),n=new e.Element("div",{class:"TNRInfo"}).inject(d),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-attention"}).inject(n),u.setHTML(t).inject(n),e.is(d.tooltipInfos)&&(d.tooltipInfos=null)},showWarningMessage:function(t){var n;d.empty(),n=new e.Element("div",{class:"TNRInfo"}).inject(d),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(n),l.setHTML(t).inject(n),e.is(d.tooltipInfos)&&(d.tooltipInfos=null)},updateAccordeon:function(e,t){c.updateItem(e,t)},showWarningMessageForPrd:function(t){var n,i;i=d.getElement(".TNRWarning"),e.is(i)?n=i:(n=new e.Element("div",{class:"TNRWarning"}).inject(d),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert "}).inject(n)),l.setHTML(t).inject(n)},getSelectedItemsIds:function(){return s}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/CoProduct/CoProductColumnManager",["UWA/Core"],function(e){"use strict";const t=["CreateMaterial","Provide","ProcessContinuousCreateMaterial","ProcessContinuousProvide"];return function(n,i,o,r){var a=n.getBehavior("ModelBehavior"),s=function(e,t){var n,o;return o=e.getAttributeValue(t),n=r.getAttributeInfo(t),"ProducingCoProduct"===i.getAuthorizedValue(n,null,o)},l=function(n,a){var s=!1,l=n.getInstancePID();if(e.is(l)){let e=o.getInstance(l);(i.doesAttributeExist(e,a)||i.isAttrApplicableForType(e,a)&&function(e){var n,i,a=!1;for(i=o.getReferenceModelFromInstance(e),n=0;n<t.length;n++)if(r.isAKindOf(i,t[n])){a=!0;break}return a}(e))&&(s=!0)}return s};return{getCellTypeRepresentation:function(e){return e.isHeader?"string":"boolean"},hasCellValue:function(t){var n,o=this.getColumnOrGroup(t.columnID),r=this.getTreeDocument(),a=!1;return e.is(r)&&!r.isGroupingNodeModel(t.nodeModel)&&(n=i.getNodeAndColumnInfos(t.nodeModel,o),l(t.nodeModel,n.attributeName)&&(a=!0)),a},getCellValue:function(t){var n;return e.is(t)&&(n=s(t.nodeModel,t.dataIndex)),n},getCellGroupingKey:function(t,n){var i;return e.is(t)&&l(t.nodeModel,n)&&(i=s(t.nodeModel,n)),i},getCellValueForFilter:function(t,n){var i;return e.is(n)&&e.is(t)&&l(n,t)&&(i=(i=s(n,t)).toString()),i},setCellValue:function(t,n){var o,r;e.is(a)&&(o=this.getColumnOrGroup(t.columnID),r=i.getNodeAndColumnInfos(t.nodeModel,o),e.is(r)&&(n=n?"ProducingCoProduct":"EngineeringAssembly",a.updateModelAttribute(r.objectToBeModified.id,r,n)))}}}}),define("DS/DELPPWViewBehaviors/MfgItemViewer3DBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["Viewer3DPlugin","DatabasePlugin","ProductImplementPlugin","RootsPlugin","ResourcePlugin"],creator:function(t,n,i,o,r,a,s){var l,u,c,d,g,f,p,h,m,I=["PRODUCT","PROCESS","SERVICE","CONSTRUCTION"],v=n.getBehavior("InterWidgetComBehavior"),b=e.is(v)&&v.isCloud()?"DELOERC_AP":"DELOER_AP";return function(e){return"PROCESS"===o.getPPRType(e)},d=function(){return c.some(function(e){return I.indexOf(e)>-1})},function(t,o){var a,s,u,c,d;e.is(l,"boolean")&&!0===l&&(a=Array.isArray(t)?t:[t],s=r.getScopeLinkType(),c=n.getBehavior("WUXNodeModelBehavior"),e.is(c)&&(u=c.getRoots(),(d=a.filter(function(e){var t,n=s===e.get("type"),i=!1;return n&&(t=e.get("from"),i=u.indexOf(t)>-1),n&&i}).map(function(e){return e.get("to")})).length>0&&(o?i.drop3D(d):g(d))))},g=function(t){var o;o=e.is(l,"boolean")&&!0===l?a.getRoots(n.getId())[0]:a.getRoots(n.getId())[1],0===t.reduce(function(e,t){var n,i=r.getScopeLinksOfImplemented(t);return i.length>0&&(n=i.map(function(e){return e.get("from")}),e=e.concat(n)),e},[]).filter(function(e){return o.indexOf(e)>-1}).length&&i.remove3D(t)},f=function(t,o,r,a){var s,u=n.getBehavior("CrossHighlightBehavior");d()&&e.is(u)&&(s=e.is(l,"boolean")&&!0===l?[t]:u.getImpactedOfImplementing(t,o),i.change3DVisibility(s,r),a.resolve())},p=function(){var t=n.getBehavior("WUXNodeModelBehavior"),i=t.getSelectedNodesInfo(),o=this,r=[];i.forEach(function(t){var n=e.Promise.deferred();o.change3DVisiblity(0===t.absPath.length?t.id:t.absPath,!1,n),r.push(n.promise)}),e.Promise.all(r).then(function(){t.update3DNodeOptions(!1)})},h=function(){var t=n.getBehavior("WUXNodeModelBehavior"),i=t.getSelectedNodesInfo(),o=this,r=[];i.forEach(function(t){var n=e.Promise.deferred();o.change3DVisiblity(0===t.absPath.length?t.id:t.absPath,!0,n),r.push(n.promise)}),e.Promise.all(r).then(function(){t.update3DNodeOptions(!0)})},m=function(t){const o=n.getBehavior("CrossHighlightBehavior"),r=n.getBehavior("InterWidgetComBehavior");if(d()&&e.is(o)&&e.is(r))if(r.isWidgetLinked(b)){const e=Array.isArray(t.absPath)&&t.absPath.length>0?t.absPath:t.nodeId,n=o.getImpactedOfImplementing(e);i.reframeIn3DViewer(n)}else n.warn(s.getNLSValue("MfgItem3DOperationViewer.IsNotLinked"))},{listenTo:function(){return{change3DVisibility:f,HideIn3D:p,ShowIn3D:h,ReframeIn3DViewer:m}},onStart:function(t){l=e.is(t.implementing)?t.implementing:null,u=e.is(t.implemented)?t.implemented:null,c=t.pprTypes,t.ignoreSelectIn3DViewer},select3D:function(e){d()&&i.selectIn3D(e)},unSelectAll3D:function(){},change3DVisiblity:function(t,i,o){var r,a=n.getBehavior("CrossHighlightBehavior");e.is(l,"boolean")&&!0===l||e.is(u,"boolean")&&!0===u?e.is(a)&&(r=[t,a.getImpactedOfImplementing(t),i,o],n.notify("change3DVisibility",r)):o.reject("ERROR while hiding/showing 3D")},unHideAll3D:function(){}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MagnitudeDynamicAttrCellManager",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a){var s,l=t.getBehavior("ModelBehavior");return s=function(t){var n,r=e.clone(this.getColumnOrGroup(t.columnID)),a=t.nodeModel,s=this.getTreeDocument(),l={isAttrExistOnObj:!1,isAttrApplicableForType:!1};if(e.is(a)&&e.is(s)&&!s.isGroupingNodeModel(a)){let t=a.getReferencePID(),s=i.getReferenceModel(t);if(e.is(s)){let t,u=s.get("DELFmiMagnitudeExt.V_DimensionType"),c=new RegExp(u,"i"),d=r.attribute;for(t=0;t<d.length;t++)if(-1!==d[t].dicoType.search(c)){l.attributeName=d[t].name,l.dataIndex=d[t].dataIndex,l.dicoType=d[t].dicoType,l.entity=d[t].entity;break}if(e.is(l.attributeName))if(n=a.getAttributeValue(l.attributeName),e.is(n))l.isAttrExistOnObj=!0,l.isAttrApplicableForType=!0;else{let e="instance"===l.entity?i.getInstance(a.getInstancePID()):s;l.isAttrApplicableForType=!!o.isAttrApplicableForType(e,l.attributeName)}}}return l},{getCellTypeRepresentation:function(t){var i,r,a,l,u,c="string";return i=s.call(this,t),e.is(i)&&e.is(i.attributeName)&&(r=n.getAttributeInfo(i.attributeName),e.is(r)&&(a=o.hasRangeDefined(r),l=o.isMultiValuated(r),u=o.hasMagnitude(r),l&&!a?c="string":a?c="enumString":u?c="number":o.isBoolean(r)?c="boolean":o.isInteger(r)?c="integer":o.isDouble(r)&&(c="float"))),c},getCellValue:function(t){var n,i="";return n=s.call(this,t),e.is(n)&&n.isAttrExistOnObj&&(i=t.nodeModel.getAttributeValue(n.attributeName)),i},getCellValueForFilter:function(t,n){var i,o="",r={columnID:t,nodeModel:n};return e.is(t)&&e.is(n)&&(i=s.call(this,r),e.is(i)&&e.is(i.attributeName)&&(o=n.getAttributeValue(i.attributeName))),parseFloat(o)},hasCellValue:function(t){var n,i=!1;return n=s.call(this,t),e.is(n)&&(n.isAttrExistOnObj||n.isAttrApplicableForType)&&(i=!0),i},getCellSemantics:function(t){var i,r,a,l={};if(i=s.call(this,t),e.is(i)&&e.is(i.attributeName)&&(r=n.getAttributeInfo(i.attributeName),e.is(r)))if(o.hasRangeDefined(r)){let e=o.getAuthorizedValuesNLSList(r);for(let t=0;t<e.length;t++){let n=e[t],i=o.getAuthorizedValueDB(r,t);l[n]=i}a={possibleValues:l}}else o.hasMagnitude(r)&&i.isAttrExistOnObj&&(a={units:o.getNLSForUnit(r)});return a},getCellEditableState:function(i){var r,l,u=!1;return a.areModuleColumnsImmutable(t.getId())||(r=s.call(this,i),e.is(r)&&e.is(r.attributeName)&&(l=n.getAttributeInfo(r.attributeName),e.is(l)&&(u=!o.isReadOnly(l)))),u},setValue:function(n,i){var a,u,c=e.clone(this.getColumnOrGroup(n.columnID));if(e.is(l)){if(a=o.getNodeAndColumnInfos(n.nodeModel,c),!e.is(a.attributeName)){let e={attribute:{name:(u=s.call(this,n)).attributeName,dataIndex:u.dataIndex,dicoType:u.dicoType,entity:u.entity}};a=o.getNodeAndColumnInfos(n.nodeModel,e)}e.is(a.attributeName)?l.updateModelAttribute(a.objectToBeModified.id,a,i):t.warn(r.getNLSValue("TableView.AvailabilityFailure",{key:a.attributeNLSTitle}))}}}}}),define("DS/DELPPWViewBehaviors/ExpandFilterBehavior",["UWA/Core","UWA/Promise","DS/DELWebWidgetLinkInfra/WidgetLinkInfraController"],function(e,t,n){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","ProxyPlugin","TreeViewPlugin","RootsPlugin","BIPlugin","UXComponentsPlugin"],creator:function(i,o,r,a,s,l,u,c,d){let g=new Map,f=new Map;var p,h,m,I,v,b,y,P,C,D,S,R,V,A,w,L,E,M,N,T,B=["union","intersection","minus"],O=["config_filter","sequence_filter","root_path_physicalid"];return v=function(t){var n;return n=o.getBehavior(t),e.is(n)||o.debug(t+"is not available"),n},b=function(t){var n,i,s,u,c=t||null,d={},p=[];if(l.getActiveView()===o.getId())if(c=e.is(c,"string")?JSON.parse(c):c,d=e.is(c)?c.CVQueryV2:{},e.is(d.batch)&&Array.isArray(d.batch.expands)&&d.batch.expands.length>0&&(d=d.batch.expands[0].filter),i=Array.isArray(c.filterRootIds)&&c.filterRootIds.length>0?c.filterRootIds[0]:null,u=!!e.is(c.empty)&&c.empty,s=v("WUXNodeModelBehavior").getRoots(),n=e.is(c.CVQuery3D)?c.CVQuery3D:null,u){let e=[i];f.has(i)&&(e=e.concat(f.get(i)),f.delete(i)),e.forEach(e=>{g.has(e)&&g.delete(e)}),P(e,d,n)}else{if(e.is(document.getElementById("PropagateFilter-Dialog")))return;if(!0===r.isAuthoringMode())return void o.warn(a.getNLSValue("ExpandFilter.AuthoringON.FilterDisabled"));let t,l,u,c,g=new Map,h=o.getBehavior("UXFactoryBehavior"),m=h.create("Dialog",{height:300}),I=h.getComponent("Button"),b=h.getComponent("ButtonGroup"),P=h.getComponent("Toggle"),C=h.getComponent("Element"),D=new b({type:"checkbox"}),S=new C("div",{class:"ApplyFilter-Dialog"}),R=new C("div",{class:"SelectdRoot-Section"}),V=new C("div",{class:"SelectAll-Section"}),A=new C("div",{class:"Checkbox-Section"});m.close=function(){this.destroy(),e.is(S)&&S.destroy(),m=null};let w=function(e){if(!1===e.dsModel.checkFlag)l.checkFlag=!1;else{let e=!0,t=D.getButtonCount();for(let n=0;n<t;n++)if(!1===D.getButton(n).checkFlag){e=!1;break}e&&(l.checkFlag=!0)}},L=function(e){var t=e.dsModel.checkFlag,n=D.getButtonCount();for(let e=0;e<n;e++)D.getButton(e).checkFlag=t},E=function(){g.set(i,d),p.push(i);let t=D.getButtonCount();for(let n=0;n<t;n++){let t=D.getButton(n);if(t.checkFlag){let n=t.value,i=(o=n,r=void 0,r=(r=JSON.stringify(e.clone(d))).replace(/physicalid:\\"([A-Z]|[0-9])+\\"/g,'physicalid:\\"'+o+'\\"'),JSON.parse(r));g.set(n,i),p.push(n)}}var o,r;y(p,g,n),p.length>1&&f.set(i,p.slice(1)),m.close()},M=function(){g.set(i,d),p.push(i),y(p,g,n),m.close()},N=v("ResourceBehavior");if(1===s.length){let e=r.getReferenceModel(i);c=" <img  src="+N.getIconURLFromKey(e.get("type"))+' width="22" height="22">',u=a.getNLSValue("ExpandFilter.Dialog.FilterAppliedTo")+c+'<b style="padding-left: 5px;">'+e.get("PLMEntity.V_Name")+'<br><font color="red">'+a.getNLSValue("ExpandFilter.Dialog.ObjectNotAvaialable")+"</font></b>",R.setHTML(u)}else s.forEach(function(e){var n=r.getReferenceModel(e);i!==e?((t=new P({type:"checkbox",value:e,checkFlag:!0})).allowUnsafeHTMLLabel=!0,t.label="<img  src="+N.getIconURLFromKey(n.get("type"))+' width="22" height="22"><b style="padding-left: 5px;">'+n.get("PLMEntity.V_Name")+"</b>",t.addEventListener("change",w),D.addChild(t)):(c=" <img  src="+N.getIconURLFromKey(n.get("type"))+' width="22" height="22">',u=a.getNLSValue("ExpandFilter.Dialog.FilterAppliedTo")+c+'<b style="padding-left: 5px;">'+n.get("PLMEntity.V_Name")+"</b><br>"+a.getNLSValue("ExpandFilter.Dialog.PropagateToObjects"),R.setHTML(u),(l=new P({type:"checkbox",value:e,checkFlag:!0})).allowUnsafeHTMLLabel=!0,l.label="<b>"+a.getNLSValue("ExpandFilter.Dialog.SelectAll")+"</b>",l.addEventListener("buttonclick",L),l.inject(V))}),D.inject(A);R.inject(S),V.inject(S),A.inject(S),m.content=S,m.domId="PropagateFilter-Dialog",m.title=a.getNLSValue("ExpandFilter.Dialog.PropagateFilter"),m.modalFlag=!0,m.resizableFlag=!0,m.buttons={Apply:new I({label:a.getNLSValue("ExpandFilter.Dialog.Propagate"),onClick:E,disabled:1===s.length}),Cancel:new I({label:a.getNLSValue("ExpandFilter.Dialog.DonotPropagate"),onClick:M})},m.show()}},y=function(n,i,s){var l,u={};i instanceof Map?(o.notify("startProgress",u),l=n.map(function(e){return new t(function(t,n){var o,l,u;l=function(e){t(e)},u=function(){n(a.getNLSValue("ExpandFilter.ApplyFilter.ExpandFailed"))},o={ordered:!1,context:this,doNotExpand:!0,expandLevel:-1,filterQuery:i.get(e),filterQuery3d:s,onFailure:u,onTimeout:u,onCancel:u},r.getDescendantsFromServer([e],l,o)})}),t.all(l).then(function(t){var l,d=[];if(t.forEach(function(t){e.is(t.instancesAndReferences)&&(d=d.concat(t.instancesAndReferences))}),n.forEach(function(e){var t=i.get(e);C(e,t),g.set(e,{filterQuery:t,filterQuery3d:s})}),0===d.length){let t=[];n.forEach(n=>{const i=r.getReferenceModel(n);e.is(i)&&t.push(i.get("PLMEntity.V_Name"))});const i=t.join(",");e.is(i,"string")&&o.warn(a.getNLSValue("ExpandFilter.EmptyResult.Message",{referenceName:i}))}else l=v("Viewer3DBehavior"),e.is(l)&&(!0===I&&o.notify("Filter3DApplied"),!0===m&&l.unHideAll3D());!0===c.getBICmdState()&&o.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),S(n,i),o.notify("stopProgress",u),o.notify("ExpandFilterApplied")}).catch(function(e){o.warn(e),o.notify("stopProgress",u)})):o.debug("filterQuery Expected in the type of Map")},P=function(t,n){var i=v("Viewer3DBehavior"),a={};0<t.length&&e.is(n)&&t.every(function(e){return""!==e})&&(o.notify("startProgress",a),t.forEach(function(e){D(e),r.removeFilterFromCollection(e,n)}),e.is(i)&&(!0===I&&o.notify("Filter3DApplied"),!0===m&&i.unHideAll3D()),!0===c.getBICmdState()&&o.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),S(t),o.notify("stopProgress",a),o.notify("ExpandFilterRemoved"))},C=function(t,n){var i,o,r={operator:null,filters:[]};i=function(e,t){var n,i=null;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)>-1){i=n;break}return i}(n,B),e.is(i)&&(r.operator=i,o=n[i].expand,Array.isArray(o)&&(r.filters=o.map(function(e){var n={};return Object.keys(e).filter(function(n){var i,o,r,a=!1;return(i=O.indexOf(n)>-1)&&"root_path_physicalid"===n&&(o=e[n],Array.isArray(o)&&o.length>0&&(r=o[0],Array.isArray(r)&&(a=1===r.length&&r[0]===t))),!a&&i}).forEach(function(t){n[t]=e[t]}),n}))),r.originalFilterQuery=n,u.addRootFilter(t,r)},D=function(e){u.removeRootFilter(e)},S=function(t,n){var i,o=v("WUXNodeModelBehavior");e.is(o)&&t.forEach(function(t){i=e.is(n)?n.get(t):null,o.filterChildren(t,i)})},R=function(){var t,n,i=v("WUXNodeModelBehavior");e.is(p)&&e.is(i)&&(n=h.appContext.widget,t=i.getRoots(),p.resetNGFilterUI({appId:n.data.app3DSharedId,widgetId:n.getId(),rootIds:t}))},V=function(){var t,n=r.isAuthoringMode(),i=v("WUXNodeModelBehavior"),s="ExpandFilter.AuthoringON.FilterDisabled",l=new Map,u=[];if(e.is(i)&&(n&&i.isFilterAppliedInAnyRoot()&&(!0===c.getBICmdState()&&(o.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),s="ExpandFilter.AuthoringON.FilterAndBIDisabled"),R(),i.removeFilterFromAllRoots().forEach(function(e){D(e)}),o.info(a.getNLSValue(s)),o.notify("ExpandFilterRemovedOnAuthoring")),!n&&g.size>0)){for(const e of g.keys()){const n=g.get(e);l.set(e,n.filterQuery),u.push(e),t=n.filterQuery3d}y(u,l,t)}},A=function(e){v("TaggerBehavior").onColorize(e)},w=function(){v("TaggerBehavior").onUnColorize()},L=function(t){g.has(t)&&g.delete(t),e.is(p)&&p.removeRoot(t)},E=function(){v("WUXNodeModelBehavior").getSelectedNodes().filter(function(e){return e.isRoot()}).forEach(function(e){var t=e.getReferencePID();g.has(t)&&(g.delete(t),D(t),e.setRootFiltered(!1))})},M=function(){v("WUXNodeModelBehavior").getRootNodes().forEach(function(e){var t=e.getReferencePID();g.has(t)&&(g.delete(t),D(t),e.setRootFiltered(!1))})},N=function(){e.is(p)&&(l.getActiveView()!==o.getId()?p.deactivate():p.activate())},T=function(){var t,n;e.is(p)&&(t=i.getService("ConfigService").getSecurityContext(),e.is(t)&&(n=t.getSCFromPreferences(),e.is(n)&&p.setDefaultSecurityContext(n)))},{listenTo:function(){return{authoringMode:V,removeRoot:L,RefreshCmd:E,onRefreshedAll:M,activeViewChange:N,endEdit:T}},onStart:function(t){var a,l;h=i.getConfig(),a=e.is(t.disableExpandFilter)?t.disableExpandFilter:!!r.isStandAlone(),m=!!e.is(t.unhide3DOnFilterApplication,"boolean")&&t.unhide3DOnFilterApplication,I=!!e.is(t.support3DFilter,"boolean")&&t.support3DFilter,a||(l=h.appContext.widget.data,p=s.create(s.PROXY.FilterProxy,{processingMode:"appProcessing",appId:l.app3DSharedId,colorize:!0,volumeFilterAvailable:1,synthesis_priority:1,ExpandSynthesisON:!0,shareFilterSpec:!0,NGFUXId:o.getId()+"_"+i.getConfig().appContext.widget.getId()}),I&&new n({matchKeys:t.matchKeysForFilter,proxy:p,shareContent:!0,NGFUXId:o.getId()+"_"+i.getConfig().appContext.widget.getId()}),e.is(p.setNGFilterOptions,"function")&&(p.setNGFilterOptions({expandServices:"progressive",appId:l.app3DSharedId}),p.setSynthesisMode("occurrence")),T(),p.addEvent("ApplyNGFilter",b),p.addEvent("FilterBIColorize",A),p.addEvent("FilterBIUnColorize",w))},onStop:function(){e.is(p)&&(p.removeEvent("ApplyNGFilter"),p.removeEvent("FilterBIColorize"),p.removeEvent("FilterBIUnColorize"),R(),p.destroy(),p=null)},resetFilterUI:function(){R()},clear:function(){var t=v("TaggerBehavior");e.is(p)&&(p.cleanProxy(),t.clear())},getFilterProxy:function(){return p},setTagsWithExpandSynthesis:function(t){var n,i=[t];e.is(p)&&(n={type_filter_bo:["PLMCoreReference"]},r.isStandAlone()||p.setTagsWithExpandSynthesis(i,n))},applyFilter:function(e,t){p.areRootsSharable(e.objIds,e.biProxyCtx).then(function(n){n.forEach(function(t){var n=t.rootId,i=t.hasFilter;p.removeRoot(n),!0===i&&p.shareFilterSpec({fromRootId:n,fromSourceCtx:e.biProxyCtx,fromDropOnFilter:!1,callback:function(e){if(1===e.success.length){let t=new Map;t.set(n,e.success[0].filter.CVQuery),y([n],t,null)}}})}),t()})}}}}}),define("DS/DELPPWViewBehaviors/SelectionBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["SelectionPlugin","DatabasePlugin"],creator:function(t,n,i,o){return{onStart:function(){},onStop:function(){},getSelections:function(){return i.getSelections(n.getId())},getModuleSelections:function(e){return i.getModuleSelections(e)},getSelectedNodesCount:function(){return i.getSelectedNodesCount(n.getId())},getSelectionsWithPaths:function(){return i.getSelectionsWithPaths(n.getId())},getSelectedRefs:function(){var t,r=[];return i.getSelections(n.getId()).forEach(function(n){n.forEach(function(n){t=o.getReference(n),e.is(t)&&r.push(t)})}),r},getSelectedInsts:function(){var t,r=[];return i.getSelections(n.getId()).forEach(function(n){n.forEach(function(n){t=o.getInstance(n),e.is(t)&&r.push(t)})}),r}}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubReplaceReportUI",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";const n=t.extend({defaultOptions:{className:"Details-list",showHeaderMessage:!0},objectsTableHead:null,objectsTableBody:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){let t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableHead=e.createElement("thead",{id:"tableHeader"}),this.objectsTableHead.setStyles({"font-weight":"bold"}),this.objectsTableHead.inject(t),this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableBody.inject(t)},setData:function(t){if(this.empty(),this.options.showHeaderMessage&&e.is(this.objectsTableHead)){const n=[{tag:"th",text:"#"}],i=t.headers.map(e=>({tag:"th",text:e})),o=e.createElement("tr",{html:n.concat(i)});this.objectsTableHead.appendChild(o)}e.is(this.objectsTableBody)&&t.detailObjs.map((t,n)=>{const i=[{tag:"td",text:n+1},{tag:"td",text:t.instanceTitle},{tag:"td",text:t.parentTitle},{tag:"td",text:t.status},{tag:"td",text:t.message}];return e.createElement("tr",{html:i})}).forEach(e=>{this.objectsTableBody.appendChild(e)})},empty:function(){if(e.is(this.objectsTableBody))for(;e.is(this.objectsTableBody.firstChild);)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return function(t,i,o,r){const a=function(e){return e.isReference()?e.get("PLMEntity.V_Name"):e.get("PLMInstance.PLM_ExternalID")},s=function(e){return Object.values(e).map(e=>"Success"===e.status?(e=>({instanceId:e.replacementInstanceId,status:o.getNLSValue("AltSub.ReplaceReport.Success"),message:e.successMessage}))(e):(e=>({instanceId:e.oldInstanceId,status:o.getNLSValue("AltSub.ReplaceReport.Failed"),message:e.errorMessage}))(e))},l=function(l){let u=e.createElement("div",{class:"Replace-report-content-container"});(function(t){let i=new n;const s=t.map(e=>{const t=r.getInstance(e.instanceId),n=r.getAggregatingReferenceModelFromInstance(t);return{instanceTitle:a(t),parentTitle:a(n),status:e.status,message:e.message}});i.setData({headers:[o.getNLSValue("AltSub.ReplaceReport.InstanceTitle"),o.getNLSValue("AltSub.ReplaceReport.ParentTitle"),o.getNLSValue("AltSub.ReplaceReport.Status"),o.getNLSValue("AltSub.ReplaceReport.Message")],detailObjs:s});let l=(()=>{let t=e.createElement("div",{class:"Details-list-div"});return t.setStyles({margin:"5px"}),t})();return i.getContent().inject(l),l})(s(l)).inject(u),function(e){const n=i.getComponent("WUXFrameWindowsManager").getFrameWindow(t.getAppContext());let r=i.create("Panel",{title:o.getNLSValue("AltSub.ReplaceReport.Title"),icon:"",immersiveFrame:n.getImmersiveFrame(),content:e,width:500,height:250,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0});return r.close=function(){r.hide()},r}(u).show()};return{showReport:function(e){l(e)}}}}),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/ConfigIdsContainer",[],function(){"use strict";const e=function(e,t){let n=new Set(e);for(const e of t)n.add(e);return n};class t{constructor(e,t,n){this.pidSet=e,this.relidSet=t,this.pairs=n}static empty(){return new t(new Set,new Set,{})}addPID(e){return this.pidSet.add(e),this}addRelID(e){return this.relidSet.add(e),this}addPair([e,t]){return this.pairs[e]=t,this}combine(n){const i=e(this.pidSet,n.pidSet),o=e(this.relidSet,n.relidSet),r={...this.pairs,...n.pairs};return new t(i,o,r)}getIdsObjAsPerExternalSpec(){return{pids:Array.from(this.pidSet),relids:Array.from(this.relidSet),pairs:this.pairs}}}return t}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/BIEssentials/BIColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";var n=function(t){var n;return e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options,t.dataIndex)&&(n=t.nodeModel.options[t.dataIndex]),n};return t.singleton({name:"BIEssentialsColumnManager",hasCellValue:function(t){var i=n(t);return!(!e.is(i)||"transparent"===i.colorCode)},getCellValue:function(e){return n(e).colorCode},getCellValueForFilter:function(t,n){var i,o;return e.is(t)&&e.is(n)&&(o=n.options[t],e.is(o)&&(i=o.tooltip)),i},getCellValueForExport:function(t){var i="";return e.is(t.cellModel,"string")?i=t.cellModel:(i=n(t),i=e.is(i)?i.tooltip:""),i},getCellGroupingKey:function(t,i){var o,r="";return e.is(t.dataIndex)||(t.dataIndex=i),o=n(t),e.is(o)&&e.is(o.tooltip)&&(r=o.tooltip),r}})}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeDocument",["UWA/Core","DS/PPWTreeDocument/PPWTreeDocument","DS/PPWTreeNodeModel/PPWTreeNodeModel"],function(e,t,n){"use strict";return t.extend({name:"TreeDocument",_expandAllCounter:0,_collapseAllCounter:0,getTreeNodeModel:function(t,n){var i=null;if(n=n||{},!t)throw new Error("id is not defined");return i=this.searchTree(t),e.is(n.returnFirstOne)&&n.returnFirstOne&&(i=0<i.length?i[0]:null),i},getMatchingNodeModels:function(t){var n=[];return e.is(t,"function")&&(n=this.search({match:function(n){var i,o=n.nodeModel,r=!1;return i=t(o),e.is(i,"boolean")&&(r=i),r},useTransaction:!1})),n},getHighlightedNodes:function(){return this.search({match:function(e){return e.nodeModel.isHighlighted()},useTransaction:!1})},searchTree:function(e,t,n,i){var o,r=this;return e=Array.isArray(e)?e:[e],this.search({match:function(a){if(r.isGroupingNodeModel(a.nodeModel))return!1;if(i&&!a.nodeModel.isRoot(!0))return!1;if(t&&"PID"!==t){if(t&&(o=n?".instance":".reference",e.indexOf(a.nodeModel.options.grid[t+o])>-1))return!0}else{if(e.indexOf(a.nodeModel.getInstancePID())>-1)return!0;if(e.indexOf(a.nodeModel.getReferencePID())>-1)return!0;if(e.indexOf(a.nodeModel.getLinkPID())>-1)return!0}},useTransaction:!1})},getRoots:function(t){var n=!!e.is(t,"boolean")&&t,i=this._parent(),o=this;return n&&(i=i.reduce(function(e,t){var n;if(o.isGroupingNodeModel(t)){let i=e=>{let t=e.getChildren();return Array.isArray(t)&&(t=t.reduce(function(e,t){var n;return o.isGroupingNodeModel(t)?(n=i(t),Array.isArray(n)&&(e=e.concat(n))):e.push(t),e},[])),t};n=i(t),Array.isArray(n)&&(e=e.concat(n))}else e.push(t);return e},[])),i},getAllDescendants:function(t){var i;return t=!!e.is(t)&&t,i=this._parent(),t&&e.is(i,"array")&&(i=i.filter(function(e){return e.getNodeSource()===n.NODE_SOURCE.MODEL})),i},increamentExpandAllCounter:function(){this._expandAllCounter++},decrementExpandAllCounter:function(){this._expandAllCounter--},isExpandAllProgressive:function(){return this._expandAllCounter>0},increamentCollapseAllCounter:function(){this._collapseAllCounter++},decrementCollapseAllCounter:function(){this._collapseAllCounter--},isCollapseAllProgressive:function(){return this._collapseAllCounter>0}})}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager",["UWA/Core","DS/Utilities/Utils"],function(e,t){"use strict";return function(n,i,o,r,a,s){var l=s.getGroupingAdditonalColumns(),u=n.getBehavior("ModelBehavior"),c=n.getBehavior("WUXNodeModelBehavior"),d=function(e,t){var n={};n.node=t.nodeModel,e.command&&s.executeCommand(e.command,n)},g=function(t,n,o){var a,s={},l=["DELFmiContQuantity_Mass.V_ContQuantity","DELFmiContQuantity_Area.V_ContQuantity","DELFmiContQuantity_Length.V_ContQuantity","DELFmiContQuantity_Volume.V_ContQuantity"],u=["DELFmiRefQuantity_Mass.V_RefQuantity","DELFmiRefQuantity_Area.V_RefQuantity","DELFmiRefQuantity_Length.V_RefQuantity","DELFmiRefQuantity_Volume.V_RefQuantity"];switch(n.toUpperCase()){case"MASS":o?(s.value=t.getAttributeValue(l[0]),a=i.getAttributeInfo(l[0])):(s.value=t.get(u[0]),a=i.getAttributeInfo(u[0])),e.is(a)&&r.hasMagnitude(a)&&(s.unit=r.getNLSForUnit(a));break;case"AREA":o?(s.value=t.getAttributeValue(l[1]),a=i.getAttributeInfo(l[1])):(s.value=t.get(u[1]),a=i.getAttributeInfo(u[1])),e.is(a)&&r.hasMagnitude(a)&&(s.unit=r.getNLSForUnit(a));break;case"LENGTH":o?(s.value=t.getAttributeValue(l[2]),a=i.getAttributeInfo(l[2])):(s.value=t.get(u[2]),a=i.getAttributeInfo(u[2])),e.is(a)&&r.hasMagnitude(a)&&(s.unit=r.getNLSForUnit(a));break;case"VOLUME":o?(s.value=t.getAttributeValue(l[3]),a=i.getAttributeInfo(l[3])):(s.value=t.get(u[3]),a=i.getAttributeInfo(u[3])),e.is(a)&&r.hasMagnitude(a)&&(s.unit=r.getNLSForUnit(a))}return s},f=function(t,n){var i=null,o="";switch(e.is(t.columnID)&&!e.is(n)&&(n=this.getColumnOrGroup(t.columnID).dataIndex),n){case l.Type:o=t.nodeModel.getReferenceType(),i=a.getNLSValue(o),o=e.is(i,"string")?i:a.getNLSValue("Type."+o);break;case l.Reference:o=t.nodeModel.getReferencePID()}return o};return{setValue:t.debounce(function(t,i){var s,l,d,g,f,p,h=this,m=[];if(p=this.getColumnOrGroup(t.columnID),g=r.getNodeAndColumnInfos(t.nodeModel,p),f=r.isMultiValuated(g.attributeInfo),!r.doesAttributeExist(g.objectToBeModified,g.attributeName)&&!r.isAttrApplicableForType(g.objectToBeModified,g.attributeName))return n.warn(a.getNLSValue("TableView.AvailabilityFailure",{key:g.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(r.isBoolean(g.attributeInfo))f&&(i=r.getValueAsArray(i,r.getType(g.attributeInfo)));else if(r.hasRangeDefined(g.attributeInfo,g.attributeDef)){if(!e.is(i))return;i=r.getAuthorizedValue(g.attributeInfo,g.attributeDef,i)}else if(r.isDate(g.attributeInfo)){if(i=e.is(i)?i:"",f)for(m=r.getValueAsArray(i),i=[],d=0;d<m.length;d++){if(l=new Date(m[d]),isNaN(l.getTime()))return n.warn(a.getNLSValue("TableView.InvalidDateMessage",{date:m[d]})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});i.push(Math.floor(l.getTime()/1e3))}else{if(l=new Date(i),isNaN(l.getTime()))return n.warn(a.getNLSValue("TableView.InvalidDateMessage",{date:i})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});i=Math.floor(l.getTime()/1e3)}t.nodeModel.setAttribute(g.attributeName,i),this.updateRenderedRow(t.rowID)}else if(f)i=r.getValueAsArray(i,r.getType(g.attributeInfo));else if(e.is(t.cellModel)){if(r.isInteger(g.attributeInfo)&&!Number.isInteger(i))return void n.warn(a.getNLSValue("TableView.InvalidIntegerValue",{attr:g.attributeNLSTitle,value:i}))}else if((s=r.getMaxLength(g.attributeInfo))>0&&i.length>s)return void n.warn(a.getNLSValue("TableView.MaxLengthFailure",{length:i.length,maxLength:s}));if(g.attributeName.contains("V_SequencingMode")){let e=t.cellModel,r=o.getSequencingModeAttrName(g.objectToBeModified.id);o.setSequencingMode(g.objectToBeModified.id,i,{onFailure:function(){t.nodeModel.setAttribute(r,e),n.warn(a.getNLSValue("SetSequencingModeUI.UpdateFailure"))},onComplete:function(){n.info(a.getNLSValue("SetSequencingModeUI.UpdateSuccess")),n.notify("refreshProductFlowView"),n.notify("setSequencingMode")}})}else if(g.attributeName.contains("DELServiceProcessRoleExt.V_OOTBRole")){let e=t.cellModel;o.setOOTBRole(g.objectToBeModified.id,i,{onFailure:function(){t.nodeModel.setAttribute("DELServiceProcessRoleExt.V_OOTBRole",e),n.warn(a.getNLSValue("OOTBRole.UpdateFailure"))},onComplete:function(){n.info(a.getNLSValue("OOTBRole.UpdateSuccess"))}})}else e.is(g.instOrRef)&&"link"===g.instOrRef?function(e,t,i){let r=e.cellModel,s={},l={onComplete:function(){var e=a.getNLSValue("TableView.SingleUpdateSuccess",{key:t.attributeNLSTitle,value:i});n.info(e),n.notify("stopProgress",s)},onFailure:function(){var o=a.getNLSValue("TableView.SingleUpdateFailure",{key:t.attributeNLSTitle,value:i});e.nodeModel.setAttribute(t.attributeName,r),n.warn(o),n.notify("stopProgress",s)},data:{}};l.data[t.attributeName]=i,n.notify("startProgress",s),o.updateConnection(t.objectToBeModified.id,l)}(t,g,i):e.is(u)&&u.updateModelAttribute(g.objectToBeModified.id,g,i,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),h._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})},onComplete:function(){g.attributeName.contains("V_RefQuantity")&&c.updateNode(g.objectToBeModified.id,{loadChildren:!0})}})},100,!0),getCellValue:function(t,n){var i=r.getNodeAndColumnInfos(n.nodeModel,t),o=r.isMultiValuated(i.attributeInfo),s=r.hasMagnitude(i.attributeInfo),l=r.hasRangeDefined(i.attributeInfo),u=n.nodeModel.getAttributeValue(i.attributeName);return"type"===i.attributeName&&(u=a.getNLSValue("Type."+u)),s?u=r.getMagnitudeValue(u,i.attributeInfo,!1):o?(r.isDate(i.attributeInfo)&&u&&(u=u.map(function(e){return r.getFormattedDate(e)})),u=r.getValueAsString(u,r.getType(i.attributeInfo))):r.isDate(i.attributeInfo)?e.is(u)&&(u=e.is(u,"number")?1e3*u:u,u=l?r.getFormattedDate(u):r.getDate(u)):r.isBoolean(i.attributeInfo)||(u=e.is(u)?u:""),u},getDateCellGroupingKey:function(t,n){var i,o=this.getColumnOrGroup(n);return e.is(o)&&(i=t.nodeModel.getAttributeValue(o.attribute.name),e.is(i)&&(i=e.is(i,"number")?1e3*i:i,i=r.getDate(i),i=new Intl.DateTimeFormat(widget.lang,{dateStyle:"long"}).format(i))),i},getCellValueForFilter:function(t,n){var o,s,l,u,c,d,g,f,p,h=this.getColumnOrGroup(t);if(e.is(h)&&e.is(n)){if(Array.isArray(h.attribute)){for(let t=0;t<h.attribute.length;t++)if(e.owns(n.options.grid,h.attribute[t].name)){o=h.attribute[t].name;break}}else o=h.attribute.name;u=l=n.getAttributeValue(o),"type"===o&&(u=a.getNLSValue("Type."+l)),s=i.getAttributeInfo(o),e.is(s)&&e.is(l)&&(d=r.hasMagnitude(s),g=r.isInteger(s),f=r.isDouble(s),p=r.isDate(s),c=function(e){var t=e;return d||g||f?t=isNaN(e)?e:parseFloat(e):p&&(t=r.getDate(e)),t},u=Array.isArray(l)?(u=l.map(c)).length>0?u:void 0:c(l))}return u},getCellValueForExport:function(t){var o,a,s,l,u,c=this.getColumnOrGroup(t.columnID),d="",g=t.cellModel;if(e.is(g))if(t.rowID<0)d=g;else{if(Array.isArray(c.attribute)){for(let n=0;n<c.attribute.length;n++)if(e.owns(t.nodeModel.options.grid,c.attribute[n].name)){o=c.attribute[n].name;break}}else o=c.attribute.name;if(s=i.getAttributeInfo(o),e.is(s)&&(l=r.hasRangeDefined(s),u=r.isMultiValuated(s)),e.is(u)&&u&&e.is(l)&&!l?(a=t.nodeModel.getAttributeValue(c.attribute.name),Array.isArray(a)&&(d=a.join())):d=e.is(g,"array")?g.join():g.toString(),""!==d){const t=n.getBehavior("ExportToCSVBehaviour");if(e.is(t)&&t.getExportUnitsPreference()&&e.is(s)&&r.hasMagnitude(s)){const t=r.getNLSForUnit(s);e.is(t)&&(d=d+" "+t)}}}return d},getMagnitudeSematics:function(t){var n,o,a={},s=t.nodeModel.options.grid[t.dataIndex];return e.is(s)&&(n=this.getColumnOrGroup(t.columnID),o=i.getAttributeInfo(n.attribute.name),e.is(o)&&r.hasMagnitude(o)&&(a={units:r.getNLSForUnit(o)})),a},getCustomStringCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.getAttributeValue(t.attribute.name),o=a.getNLSValue("Column.MakeOrBuy.Make"),r=a.getNLSValue("Column.MakeOrBuy.Buy");return i.isAKindOf(n,"CreateKit")||i.isAKindOf(n,"CreateAssembly")||i.isAKindOf(n,"CreateMaterial")||i.isAKindOf(n,"Installation")?o:i.isAKindOf(n,"Provide")?r:""},getComputedCellValue:function(t){var n,i,r,a,s,l,u,c;return"Calculated_Concentration"===this.getColumnOrGroup(t.columnID).dataIndex&&e.is(t.nodeModel._parentNode._referencePID)&&(i=o.getReferenceModel(t.nodeModel._parentNode.getReferencePID()),r=o.getReferenceModel(t.nodeModel.getReferencePID()),e.is(i)&&e.is(r)&&(a=i.get("DELFmiMagnitudeExt.V_DimensionType"),s=r.get("DELFmiMagnitudeExt.V_DimensionType"),e.is(a)&&e.is(s)&&(u=g(i,a,!1),l=g(t.nodeModel,s,!0),e.is(u)&&e.is(l)&&(c=Number(l.value)/Number(u.value),n=Math.round(1e6*(c+Number.EPSILON))/1e6+" "+l.unit+"/"+u.unit)))),n},getURLCellValue:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.name);return(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=n.defaultValue),{label:i,func:d.bind(this,n,t),getLabel:function(){return this.label}}},getFullOwnerURL:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.name),r=e.is(i)?o.getReferenceModel(t.nodeModel._referencePID):null,a=e.is(r)?r.get("ds6w:responsible"):"";return{label:e.is(a)?a:e.is(i)?i:"",func:d.bind(this,n,t),getLabel:function(){return this.label}}},hasCellValue:function(t){var n,i,o,a,s,l,u;if(u=this.getTreeDocument(),e.is(u)&&u.isGroupingNodeModel(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"hideShowItems3D":case"hideShowBuildUp3D":case"NonEditable":case"ComputedValue":case"URL":o=!0;break;case"DocMgmt":a=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(a,"array")&&a.length>0;break;default:i=r.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?"DELServiceProcessRoleExt.V_OOTBRole"===t.dataIndex?o="DELLmiServiceWorkPlanSystemReference"===t.nodeModel.getParent().getReferenceType():(o=r.doesAttributeExist(i.objectToBeModified,i.attributeName),l=r.isAttrApplicableForType(i.objectToBeModified,i.attributeName),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||e.is(s)&&!s||l):o=!1}return o},getCellValueForDocMgt:function(e){var t;if(!e.isHeader&&(t=e.nodeModel.getAttributeValue(e.dataIndex),Array.isArray(t))){const e=t.length;if(1===e)return t[0].title;if(e>1)return`${t[0].title} ...`}return""},getDocMgtCellValueForFilter:function(t,n){var i,o;return e.is(t)&&e.is(n)&&(o=n.getAttributeValue(t),e.is(o)&&(i=(o=Array.isArray(o)?o:[o]).map(e=>e.title))),i},getURLCellValueForExport:function(t){var n=t.cellModel;return t.rowID>=0&&e.is(t.cellModel)&&(n=t.cellModel.getLabel()),n},getGroupingColumnCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=f.call(this,e);return t.dataIndex===l.Reference&&(n=e.nodeModel.getLabel()),n},getGroupingColumnKey:function(e,t){return f.call(this,e,t)}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/ResourceParameterRowColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";var n=["PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMinValue_Inclusive","PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMaxValue_Inclusive"];return t.singleton({name:"RPPColumnManager",init:function(e){this._parent(e)},getCellTypeRepresentation:function(t){var n,i;if(t.isHeader)return"string";switch(e.is(t.nodeModel)&&(i=t.nodeModel.options.grid),t.dataIndex){case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPRichText":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMagnitude":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMode":n="string";break;case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle":n="url";break;case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMinValue":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMaxValue":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMinControlValue":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMaxControlValue":n="number";break;case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPValue":n=e.is(i)&&e.is(i.V_RPPUnit)?"number":"string";break;case"PLMSpecifyHowToResourcePlanCnx_Custo.V_MinValue_Inclusive":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_MaxValue_Inclusive":n="boolean";break;case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMinValue_Inclusive":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMaxValue_Inclusive":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMinControlValue_Inclusive":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMaxControlValue_Inclusive":n="boolean";break;default:n="string"}return n},getCellValue:function(t){var n,i,o,r=t.nodeModel.options.grid;switch(o=function(t){var n,i,o,r,a,s=e.is(t)?t:"";if(0===s.indexOf("<?xml")&&0<s.indexOf("<html")&&(r=s.indexOf("<body>"),a=s.indexOf("</body>"),r>-1&&a>-1)){for(s=(s=s.slice(r+6,a)).replaceAll("<br/>"," ");-1!==s.indexOf("<");)n=s.indexOf("<"),-1!==(i=s.indexOf(">",n)+1)&&(o=s.substring(n,i),s=s.replace(o,""));s=(s=(s=(s=s.replaceAll("&lt;","<")).replaceAll("&gt;",">")).replaceAll("&amp;","&")).replaceAll("&nbsp;"," ")}return s},i=function(e,t){return{label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}}},t.dataIndex){case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPRichText":return o(r[t.dataIndex]);case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle":return n=e.is(r[t.dataIndex].iconPath)?r[t.dataIndex].iconPath:"",i(r[t.dataIndex].label,n);default:return r[t.dataIndex]}},getCellSemantics:function(e){var t,n=e.nodeModel.options.grid;switch(e.dataIndex){case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMinValue":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMaxValue":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPValue":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMinControlValue":case"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMaxControlValue":null!==n[e.dataIndex]&&""!==n[e.dataIndex]&&(t={units:n.V_RPPUnit})}return t},hasCellValue:function(t){var i=t.nodeModel.options.grid;return n.indexOf(t.dataIndex)>-1?e.is(i[t.dataIndex])&&"NotSet"!==i[t.dataIndex]:n.indexOf(t.dataIndex+"_Inclusive")>-1?e.is(i[t.dataIndex+"_Inclusive"])&&"NotSet"!==i[t.dataIndex+"_Inclusive"]:!!e.is(i[t.dataIndex])}})}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/RWU/RWUColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r){const a=(e=>(...t)=>t.join(e))(" "),s=function(){let e=new Map;return{generateFor:function(t){let n;return n=e.has(t)?e.get(t)+1:1,e.set(t,n),n}}},l={ACTION:"RWU_Action",STATUS:"RWU_Status",REPLACE:"RWU_Replace"},u="success",c="ignored",d=t=>{let n=!1;return e.is(t)&&(n=!0,(t=>e.is(t,"string")&&0===t.length)(t)&&(n=!1)),n},g=t=>n=>i=>{let o=!1;if(!i.isHeader){const r=i.nodeModel;if(e.is(r)){const i=r.getAttributeValue("cellInfo");if(e.is(i)){const e=i[t];o=n(e)}}}return o},f=g("candidateEntries")(e=>Array.isArray(e)&&e.length>1),p=g("suggestionToPerformEntries")(e=>Array.isArray(e)&&e.length>0),h=t=>{let n=!1;const i=t.options.rwuStatus;return e.is(i)&&(n=i===u||i===c),n};return{getNonModelDataIndexes:function(){return[l.ACTION,l.STATUS,l.REPLACE]},hasRWUCellValue:function(){return!0},getCellTypeRepresentation:function(e){let t;if(e.isHeader)t="string";else switch(e.dataIndex){case l.ACTION:t=p(e)?"enumString":null;break;case l.REPLACE:t="url";break;default:t="string"}return t},getCellClassName:function(t){var n,i="";return e.is(t.nodeModel)&&(n=t.nodeModel.options.rwuStatus,"RWU_Status"===t.dataIndex&&("fail"===n?i="rwu-fail-status":"success"===n?i="rwu-success-status":"ignored"===n&&(i="rwu-ignored-status")),"RWU_Replace"===t.dataIndex?i="url-column":"RWU_Status"!==t.dataIndex&&"success"===n&&(i+=" rwu-succeeded-row")),i},getCellValue:function(a){let s=null;const u=a.nodeModel.options.grid,c=a.dataIndex;if(e.is(a.nodeModel))switch(c){case l.ACTION:e.is(u[c])&&(a.isHeader||e.is(this.isCellInEdition,"function")&&(s=this.isCellInEdition(a.cellID)?u[c].value:u[c].label));break;case l.REPLACE:s=1===u[l.ACTION].value?{label:u[c],func:function(){!function(r,a){var s,l=t.getBehavior("SearchBehavior"),u=o.getModuleSelections(t.getId()),c=t.getBehavior("WUXNodeModelBehavior");const d=r.nodeModel._referencePID;var g=n.getReferenceModel(d),f=n.getValidChildTypes(g);l.showSearchDialoguAndActivate(function(o){u.forEach(function(r){var l=c.getNodeModel(r.id,!0);e.is(l.options.grid)&&l.options.grid.cellInfo.isLeaf&&(e.is(o,"array")&&o.length>0?(s=n.getReferenceModel(o[0]),e.is(s)?(l.options.grid[a]=e.is(s.get("V_Name"))?s.get("V_Name"):o[0]["ds6w:label_value"],l.options.grid[a+"PID"]=s.get("PID")):(l.options.grid[a]=o[0]["ds6w:label"],l.options.grid[a+"PID"]=o[0].id)):t.warn(i.getNLSValue("RWU.ObjectRetrievalFailure")),c.updateNode(l.options.referencePID))})},{title:i.getNLSValue("Dialog.ReplaceByExisting.Title"),searchTitle:i.getNLSValue("Search.ReplaceByExisting.Title"),types:f})}(a,c)},getLabel:function(){return this.label},PID:""}:6===u[l.ACTION].value&&a.nodeModel.options.isCreated?{label:u[c],func:function(){!function(e){var n=o.getModuleSelections(t.getId()),a=r.getComponent("WUXFrameWindowsManager"),s=t.getBehavior("WUXNodeModelBehavior"),l=a.getFrameWindow(t.getAppContext()).getImmersiveFrame(),u=r.getComponent("Dialog"),c=r.getComponent("Editor"),d=r.getComponent("Button"),g=r.getComponent("Element"),f=new g("div",{class:"dialogueContent",styles:{width:"100%",height:"100%",verticalAlign:"center"}}),p=new g("div",{class:"EditorElement",align:"right",styles:{width:"40%"}}).inject(f),h=new c({value:"",selectAllOnFocus:!0,visibleFlag:!0,autoCommitFlag:!0,placeholder:i.getNLSValue("FormUI.Placeholder.EnterANumber")}).inject(p),m=new u({domId:"replaceWhereUsed-setQuantity",immersiveFrame:l,modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,height:100,width:140,title:i.getNLSValue("RWU.SetQuantity"),content:f,closeButtonFlag:!0,buttons:{Ok:new d({domId:"replaceWhereUsed-Dialog-Apply",className:"ok primary",label:i.getNLSValue("MIL.PanelApplyButton"),emphasize:"primary",disabled:!1,onClick:function(){var o=h.value;o>0?n.forEach(function(t){var n=s.getNodeModel(t.id,!0);n.options.grid[e]=i.getNLSValue("RWU.Quantity",{quantity:o}),n.options.grid[e+"PID"]=o,s.updateNode(n.options.referencePID)}):t.warn(i.getNLSValue("RWU.QuantityFailure")),m.close()}}),Cancel:new d({domId:"replaceWhereUsed-Dialog-Close",className:"close",label:i.getNLSValue("MIL.PanelCloseButton"),onClick:function(){m.close()}})}});m.show()}(c)},getLabel:function(){return this.label},value:1}:"";break;default:s=u[c]}return s},getCellSemantics:function(t){const n=t=>{const n=(e=>t=>{const n=e.generateFor(t);return a(t,(e=>"["+e+"]")(n))})(new s);return t.reduce((t,i)=>{const o=i.labelItem;return e.owns(t,o)?t[n(o)]=i.valueItem:t[o]=i.valueItem,t},{})};let i=null;if(e.is(t.nodeModel)){const o=t.nodeModel.options.grid,r=t.dataIndex;if(e.is(o)){const a=o.cellInfo;e.is(a)&&(r===l.REROUTING?f(t)&&(i={possibleValues:n(a.candidateEntries)}):r===l.ACTION&&p(t)&&(i={possibleValues:n(a.suggestionToPerformEntries)}))}}return i},setRWUValue:function(n,i,r){const a=n.dataIndex;var s=o.getModuleSelections(t.getId()),u=t.getBehavior("WUXNodeModelBehavior");a===l.ACTION&&d(r)&&s.forEach(function(t){var n=u.getNodeModel(t.id,!0);let i=n.options.grid.cellInfo;if(e.is(i)&&i.isLeaf){const t=i.suggestionToPerformEntries.find(e=>e.valueItem===r);if(e.is(t)){const e={label:t.labelItem,value:t.valueItem,tooltip:t.tooltipItem,getLabel:function(){return this.label}};n.setAttribute(a,e),n.options.grid[l.ACTION]!==e&&(n.options.grid[l.ACTION]=e),i.action=r}}})},getCellEditableState:function(t){const n=t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;h(e)&&(n=!1),e.isExpanded()&&e.hasChildren()&&(n=!1),t.nodeModel.options.isLeaf||(n=!1)}return n};let i;switch(t.dataIndex){case l.ACTION:i=n(t);break;case l.REROUTING:i=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;n=!h(e)&&f(t)}return n})(t);break;case l.REPLACE:i=n(t);break;default:i=!1}return i},getRWUGroupingKeyForURLColumn:function(e){var t;switch(e.dataIndex){case l.REPLACE:t=e.nodeModel.getAttributeValue(e.dataIndex);break;default:t=null}return t}}}}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/ProductAbsPathHelperBehavior",["UWA/Core","DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightLinkHelper"],function(e,t){"use strict";return{plugins:["DatabasePlugin","ProductImplementPlugin"],creator:function(n,i,o,r){var a,s,l,u;return l=function(t,n){var i,o=n||{},r=null;return i=s.getParentScoped(t,o),e.is(i)&&(e.is(r)||(r=s.getScopedNodePrdAbsolutePath(i,o))),r},u=function(e,t,n){var i,o=null;return i=l(e,n),Array.isArray(i)&&(o=i.length>0?i.concat(t):t),o},{onStart:function(i){a=e.is(i.implementing)?i.implementing:null,s=new t(n.getLogger(),a,r,o)},getImplementedProductAbsPath:function(e,t,n){return u(e,t,n)}}}}}),define("DS/DELPPWViewBehaviors/GraphViewBehavior/GraphViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(e,t,n){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","SelectionPlugin","DatabasePlugin","DicoPlugin","PlatformPlugin","WebServicePlugin","TreeViewPlugin","ProductImplementPlugin","ProcessImplementPlugin"],creator:function(i,o,r,a,s,l,u,c,d,g,f,p,h){var m,I,v,b,y,P,C,D,S,R,V,A={},w=a.getComponent("ETree"),L=a.getComponent("ETreeViewsFactory"),E=w.OrientationMode.ROOT_ON_TOP,M={paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0},N={height:"auto",useAsyncPreExpand:!1,isDraggable:!0,resize:{columns:!0},selection:{unselectAllOnEmptyArea:!0,toggle:!1,cells:!1,enableListSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0};return I=function(l){var g,f,I,b,y,P,C,D,S,R,T=o.getElement();e.is(T.getElementsByClassName,"function")&&(g=T.getElementsByClassName("graphView-container")[0])?(b=(P=l||{}).graphViewOptions?e.extend(N,P.graphViewOptions,!0):N,e.is(v,"array")&&(f=new t(i,o,a,r,s,d,u,c,p,h),S=function(t){var n,i,r,a={context:this,nodes:[]};return e.is(t)&&(t.isSelected()||t.select()),i={selectedNodes:m.getModel().getXSO().get()},n=f.buildContextualMenu(v,o.getAppContext(),i),0===i.selectedNodes.length&&(r=v.indexOf("ExploreInWebApp"))>=0&&(n[r].sensitivity="disabled"),a.nodes=n,a}),I={template:['<div class="etree-sync-node" draggable="true">','\t\t<div class="etree-sync-node-widget">','\t\t\t<div class="etree-sync-node-label">','\t\t\t\t<div class="etree-sync-node-color"></div>','\t\t\t\t<div class="etree-sync-node-label-content"></div>',"\t\t\t</div>",'    \t\t<div class="etree-sync-node-caption">','      \t\t<div class="etree-sync-node-icon"></div>','      \t\t<div class="etree-sync-node-moreinfo" data-egraph-subelt="moreinfo"></div>',"    \t\t</div>","  \t</div>",'\t\t<div class="etree-sync-node-collapse-expand" data-egraph-subelt="collapse-expand">','\t\t\t<div class="etree-sync-node-collapse-expand-spinner"></div>',"  \t</div>","</div>",'<div class="etree-sync-temp-node">',"</div>",'<div class="etree-sync-group">',"</div>"].join("\n"),onmodifyDisplay:function(t){var n,i,o,r,a,l,u,d=[{dicoType:"PLMEntity",dataIndex:"V_Name",entity:"reference"}],g=e.is(A)?A:{},f=t.nodeView,p=t.nodeModel;p.options.isBeingCut?f.classList.add("is-being-cut"):f.classList.remove("is-being-cut"),u=f.querySelector(".etree-sync-node-color"),e.is(V)&&V&&e.is(p.options.taggerColor)?(f.classList.add("colorized"),u.style.backgroundColor=p.options.taggerColor):f.classList.remove("colorized"),(u=f.querySelector(".etree-sync-node-icon")).classList.remove("hidden"),p.options.icons&&p.options.icons.length>0?(u.style.backgroundImage='url("'+p.options.icons[0]+'")',u.style["background-size"]="22px 22px"):u.classList.add("hidden"),(u=f.querySelector(".etree-sync-node-moreinfo")).classList.remove("hidden"),u.classList.add("hidden"),e.is(g.Color)&&(u=f.querySelector(".etree-sync-node-widget"),i=g.Color.dataIndex,l=g.Color.colorDef,o=p.options.grid[i],e.is(o)&&e.is(l[o])&&!p.isSelected()?u.style.background=l[o].code:u.style.background=""),u=f.querySelector(".etree-sync-node-label-content"),e.is(g.Content)&&e.is(g.Content[p._type])&&(d=g.Content[p._type]),n=[],u.innerHTML="",d.forEach(function(e){o=p.options.grid[e.dataIndex],a=c.getAttributeInfo(e.dataIndex),r=s.getNLS(a),n.push(r+" : "+o)}),u.innerHTML=n.join("<br/>"),u.title=n.join("\n")}},P=e.extend(b,{orientation:E,contextCallback:S,fittingArea:M,nodeView:L.generateNodeView(I)}),R=function(t,n){var i=o.getBehavior("DropZoneViewBehavior"),r=o.getBehavior("WUXNodeModelBehavior");e.is(i)&&(i.setIcon(t),e.is(r)&&(!0!==n||r.isDocumentEmpty()||i.hide()))},(m=new w.SyncEGraphTree(g,P)).treeContainer.ondragenter=function(){var t=o.getBehavior("DropZoneViewBehavior");e.is(t)&&R(t.iconEnum.PLUS,!1)},m.treeContainer.ondragleave=function(){var t=o.getBehavior("DropZoneViewBehavior");e.is(t)&&R(t.iconEnum.DROPHERE,!0)},m.treeContainer.ondrop=function(){var t=o.getBehavior("DropZoneViewBehavior");e.is(t)&&R(t.iconEnum.DROPHERE,!0)},"function"==typeof T.getElementsByClassName&&T.getElementsByClassName("drop-zone-container")[0]&&(m.widget.sm.rootState.actions.insert=function(){},m.widget.sm.rootState.movePredicate=function(){return!1},D=m.container.getElementsByClassName("egraph_views_RootLayer"),e.is(D)&&D.length>=1&&(C=D[0],e.is(C)&&(y={dropZone:C,acceptedTypes:l.pprTypes},new n(i,o,r,u,c).init(y)))),m.createOverview(),m.swapOverviewVisibility()):o.debug("graph Container not defined.")},b=function(){var t;return t=f.getCurrentView(),!(!e.is(t[o.getId()].currentView)||"graphView"!==t[o.getId()].currentView)},y=function(t){g.getXMLValues(t,function(t){var n,i;if(e.is(t.Config.Preferences.BOMView)&&(e.is(t.Config.Preferences.BOMView.Color)&&(A.Color=t.Config.Preferences.BOMView.Color.AttributeDefinition,A.Color.colorDef=t.convert("Config.Preferences.BOMView.Color.ColorDefinition","value")),e.is(t.Config.Preferences.BOMView.Content)))for(n in A.Content={},i=t.convert("Config.Preferences.BOMView.Content.Type","name"))Object.prototype.hasOwnProperty.call(i,n)&&(A.Content[n]=Array.isArray(i[n].Row)?i[n].Row:[i[n].Row]);C()},function(){o.debug("Failed to get"+t+"XML configuration file")})},C=function(){var t=[],n={boAttrName:[],roAttrName:[],otherAttrName:[]};D(t),e.is(t,"array")&&t.forEach(function(e){var t=e.split("."),i=e,o="reference";2===t.length&&(i=t[0],o=t[1]),"reference"===o?n.boAttrName.push(i):"instance"===o?n.roAttrName.push(i):n.otherAttrName.push(i)}),u.setSelectPredicate(o.getId(),n)},D=function(t,n){var i=[];e.is(A)&&(e.is(A.Color)&&t.indexOf(A.Color.dataIndex)<0&&t.push(A.Color.dataIndex),e.is(n)?e.is(A.Content)&&e.is(A.Content[n])&&i.push(n):e.is(A.Content)&&Object.keys(A.Content).forEach(function(e){i.push(e)}),i.forEach(function(e){A.Content[e].forEach(function(e){t.indexOf(e.dataIndex)<0&&t.push(e.dataIndex)})}))},S=function(t){var n,i,o=t.type,r={icons:"",label:"",grid:{},useAsyncPreExpand:!0},a=[];for(n in D(a,o),t)Object.prototype.hasOwnProperty.call(t,n)&&(i=t[n],e.is(i)&&"NULL"!==i&&(a&&a.indexOf(n)>=0?r.grid[n]=t[n]:"PID"===n?r.referencePID=t[n]:"type"===n&&(r.referenceType=t[n]),n.contains("V_Name")&&(r.grid.V_Name=t[n])));return r},R=function(t,n){var i,o,r=[],a=S(t);for(i in D(r,t.type),n)Object.prototype.hasOwnProperty.call(n,i)&&(o=n[i],e.is(o)&&"NULL"!==o&&(r&&r.indexOf(i)>=0?a.grid[i]=n[i]:"PID"===i&&(a.instancePID=n[i])));return a},{viewName:"graphView",listenTo:function(){return{Reframe:this.reframeAll,ReframeOn:this.reframeOn,ToggleOrientation:this.toggleOrientation,ToggleOverview:this.toggleOverview}},onStart:function(t,n){t=t||{},e.is(t.views)&&e.is(t.views.graphView)&&(v=t.views.graphView.contextualCommands),I({pprTypes:t.pprTypes,graphViewOptions:t.graphViewOptions}),e.is(t.views.graphView.configXML)&&y(t.views.graphView.configXML),!0===(P=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&f.registerViewforWidgetLayout({viewID:o.getId(),viewType:this.viewName}),n()},onStop:function(){m.container.remove(),m=void 0,!0===P&&f.unregisterViewforWidgetLayout(o.getId(),this.viewName)},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=S(t.toJSON())),n},getInstanceNodeOptions:function(t,n){var i;return e.is(t)&&e.is(n)&&(i=R(t.toJSON(),n.toJSON())),i},setModel:function(t){o.debug("set model on Graph View"),e.is(m)&&m.setModel(t)},getModel:function(){var t=void 0;return e.is(m)&&(t=m.getModel()),t},toggleOrientation:function(){b()&&m.swapLayoutOrientation()},toggleOverview:function(){b()&&m.swapOverviewVisibility()},reframeOn:function(){b()&&m.reframeOn()},reframeAll:function(){b()&&m.reframeAll()},setSize:function(){b()&&m.setSize()},selectArea:function(){b()&&m.selectArea()},setRootPosition:function(t){if(b())if(e.is(t,"string"))switch(t){case"left":m.setRootPosition(w.OrientationMode.ROOT_ON_LEFT);break;case"top":m.setRootPosition(w.OrientationMode.ROOT_ON_TOP);break;case"right":m.setRootPosition(w.OrientationMode.ROOT_ON_RIGHT);break;case"bottom":m.setRootPosition(w.OrientationMode.ROOT_ON_BOTTOM)}else o.debug("position should be a string")},getContent:function(){var t=void 0;return e.is(m)&&(t=m.getContent()),t},setTaggerStatus:function(e){var t;t=o.getElement().getElementsByClassName("graphView-container")[0],V=e||!1,e?t.removeClassName("unColorizeTagger"):t.addClassName("unColorizeTagger")}}}}}),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgColumnsBehavior",["UWA/Core","DS/DELPPWViewBehaviors/CfgColumnsBehavior/ConfigIdsContainer"],function(e,t){"use strict";return{plugins:["CfgColumnsPlugin"],creator:function(n,i,o){let r=new Set,a=[],s=!1;const l=function(){return r.size>0},u=function(e){!function(e){r=new Set(e)}(e),function(e){const t=o.getAdditionalColumnAMDsBasedOnDataIndices(e);a=t}(e)},c=function(){return a},d=function(t){return e.owns(t,"displayType")&&"CFG"===t.displayType},g=function(e){return o.isDataIndexAvailable(e.dataIndex)},f=function(t){return t.filter(t=>s?d(t)&&g(t):d(t)&&(t=>!!e.owns(t,"isHidden")&&!t.isHidden)(t)&&g(t)).map(e=>e.dataIndex)},p=function(t){if(l()){const n=i.getBehavior("WUXNodeModelBehavior");if(e.is(n)){const i=function(t){let n=[];return e.owns(t,"pids")&&(n=n.concat(Object.keys(t.pids))),e.owns(t,"relids")&&(n=n.concat(Object.keys(t.relids))),n}(t);n.updateCfgColumnsForCommandUpdates(i,t)}}},h=function(){const t=o.getColumnsFromPreferences(i.getId()),n=f(t);if(u(n),l()){const t=i.getBehavior("WUXNodeModelBehavior");e.is(t)&&t.resetConfigColumns()}};return{listenTo:function(){return{updateCfgColumns:p,TreeViewPrefModified:h}},onStart:function(t){var n;e.is(t)&&e.is(t.skipisHiddenCheck,"boolean")&&(n=t.skipisHiddenCheck,s=n)},onStop:function(){},computeVisibleConfigColDataIndices:function(e){return f(e)},setVisibleCfgColDataIndices:function(e){u(e)},getCombinedEntriesFromUpdatedAttributesObj:function(e){const t=Object.entries(e.pids),n=Object.entries(e.relids);return t.concat(n)},trimAttributesBasedOnVisibleDataIndices:function(t){return function(t,n){let i={};for(const o in n)e.owns(n,o)&&t(o)&&(i[o]=n[o]);return i}(e=>(function(e){return r.has(e)})(e),t)},isAnyCfgColumnVisible:function(){return l()},filterCFGColumnsBasedOnAvailability:function(e){let t;return t=l()?e.filter(function(e){let t;return t=!d(e)||g(e)}):e},getNodeIdsObjAsPerExternalSpec:function(e){return e.reduce((e,n)=>{const i=function(e){const n=e.getReferencePID();let i=t.empty().addPID(n);if(!e.isRoot()){const t=e.getInstancePID();i.addRelID(t).addPair([n,t])}return i}(n);return e.combine(i)},t.empty()).getIdsObjAsPerExternalSpec()},updateAttributes:function(e){return o.updateAttributes(e,c)},getRequiredTypeRepresentations:function(){return o.getTypeRepresentations()}}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubReplaceBehavior",["UWA/Core","DS/DELPPWViewBehaviors/AltSubBehavior/AltSubReplaceReportUI"],function(e,t){"use strict";const n=e=>Array.isArray(e)&&e.length>0,i=e=>t=>t[e],o=function(e,t=null){return e.length>0?e[0]:t},r=function(e,t=null){const n=e.length;return n>0?e[n-1]:t},a=(...e)=>t=>e.reduce((e,t)=>t(e),t);return{plugins:["DatabasePlugin","WebServicePlugin","BIPlugin","ProductImplementPlugin"],creator:function(s,l,u,c,d,g){let f=[];const p=function(t){let n={stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]};const o=function(e,t){let n=new Map;n.set(!0,[]),n.set(!1,[]);for(const i of e){const e=t(i),o=i;n.set(e,n.get(e).concat(o))}return n}(t.instancesAndReferences,a(i("attributesValue"),t=>e.owns(t,"isInstanceOf")));let r=o.get(!0),s=o.get(!1);n.stackedInstances=r.map(((e,t)=>n=>({...n,[e]:t}))("queriedForConnections",!0)),s.length>0&&(n.stackedReferences=s);const l=u.getConnectionParser();t.connections.forEach(e=>{l.parse(e,n)}),n.deletedObjects=t.deletedObjects;const c=t.resultReport;return{stackedObjects:n,resultReport:c}},h=function(s,f,h,m,I){const v=e=>e.get("isInstanceOf"),b=(e,t)=>{const n=t(e),i=(e=>{let t=[];const n=g.getImplLinksOfImplementing(e);if(Array.isArray(n)&&1===n.length){const e=o(n).get("to");t=g.getImplLinksOfImplemented(e).map(e=>e.get("from"))}return t})(e),r=function(e,t){let n=new Set;for(const i of t)e.has(i)&&n.add(i);return n}(new Set(n),new Set(i));return Array.from(r)},y=(t,n,i,o)=>{const l=a(r,u.getInstance,v),c=e=>{const t=l(e);return s.getWhereUsedInstanceIds(t)},d=e=>s.getWhereUsedInstanceIdsUnderParent(e);let g=[];if((t=>e.is(t))(o))if((e=>"reference"===e)(o.type))g=d(t);else{let e=[];n?e=b(t,d):i&&(e=b(t,c)),g=e.length>0?e:[r(t)]}else g=i?c(t):d(t);return g},P=(e,t)=>{const n=function(e,t,n){let i;const o=((e,t)=>n(e).find(e=>t.has(e)))(e,new Set(t));return i=Array.isArray(e)?e.concat(o):[o]}(e,t,e=>s.getChildren(e));s.unSelectAll(),s.selectNode(n)},C=t=>{const i=function(e){const t=e.length;return t>0?e.slice(0,t-1):e}(t);let r;return r=n(i)?i:(t=>{let n=null;const i=o(t);return e.is(i)&&(n=(e=>e.get("isAggregatedBy"))(u.getInstance(i))),n})(t)},{isReplaceAll:D,restrictToUnderSameParent:S,replaceAllInstances:R}=m,V=(()=>{let t=null;const i=o(s.getSelectedNodesInfo(),null);if(e.is(i)){const e=i.absPath;n(e)&&r(e)===f&&(t=i.absPath)}return t})();if(e.is(V)){let n={};l.notify("startProgress",n),s.showOverlay();const o=C(V),r=V;(function(t){const n=e.Json.encode(t);return new Promise((e,t)=>{c.webServiceRequest({url:"dsmfg/private/V0/invoke/MfgItem/replaceByAlternate",method:"POST",data:n,onComplete:function(t){e(t)},onFailure:function(e){t(e)}})})})({instanceIdsToReplace:D?y(r,S,R,I):[f],replacementReferenceId:h}).then(function(r){s.unSelectNode(V);const{stackedObjects:c,resultReport:g}=p(r),f=c.deletedObjects.map(u.getInstance);return function(e){return new Promise(t=>{const n={...e,onComplete:t};u.addToCollections(n)})}(Object.entries(c).filter(([e,t])=>"deletedObjects"!==e).reduce((e,[t,n])=>(e[t]=n,e),{})).then(function(){!function(e){const t=Array.isArray(e)?e:[e];var n;(e=>{const t=e.map(i("id"));u.removeInstance(t,{silent:!0})})(t),n=t,l.notify("instanceRemoved",[n])}(f);const r=Object.values(g).filter(((e,t)=>n=>n[e]===t)("status","Success"));if(r.length>0){l.notify("replace");const t=r.map(a(i("replacementInstanceId"),u.getInstance));!function(e){const t=Array.isArray(e)?e:[e];l.notify("instanceAdded",[t])}(t);const n=t.map(i("id"));P(o,n),(()=>{const t=l.getPreferenceValue("refreshBIOnAuthoring");return e.is(t,"boolean")&&!0===t})()&&(()=>!0===d.getBICmdState())()&&d.computeBI()}else s.selectNode(V);l.notify("stopProgress",n),s.removeOverlay(),function(n){const i=l.getBehavior("UXFactoryBehavior"),o=l.getBehavior("ResourceBehavior");e.is(i)&&e.is(o)&&new t(l,i,o,u).showReport(n)}(g),l.notify("ReplaceByAlternateDone")})}).catch(function(e){l.log("Error occured on replace: "+e),l.notify("stopProgress",n),s.removeOverlay()})}};return{listenTo:function(){return{doReplaceByMfgAlternate:this.onDoReplaceByMfgAlternate}},onStart:function(e){f=e.pprTypes},onStop:function(){},onDoReplaceByMfgAlternate:function(t,n,i,o){if(f.includes("PROCESS")||f.includes("SERVICE")||f.includes("CONSTRUCTION")){const r=l.getBehavior("WUXNodeModelBehavior");e.is(r)&&h(r,t,n,i,o)}}}}}}),define("DS/DELPPWViewBehaviors/Tagger/TaggerBehavior",["UWA/Core","UWA/Class/Promise","DS/DELPPWViewBehaviors/Tagger/FilterComponentServices"],function(e,t,n){"use strict";return{plugins:["DatabasePlugin","WebServicePlugin","TreeViewPlugin","ProxyPlugin"],creator:function(i,o,r,a,s,l){var u,c=new Map,d={},g=[],f=new n({facade:o}),p=function(){g=[],d={},c.clear()},h=function(t){var n,i,o,a,s=t.absolutePath,l=t.status,g=t.dispValue,f={},p=[];if(d[u]||(d[u]={}),!(d[u]&&d[u][l]&&d[u][l].subjects.length>0&&-1!==d[u][l].subjects.indexOf(s))){if(d[u])for(o in d[u])d[u].hasOwnProperty(o)&&-1!==(a=(p=d[u][o].subjects).indexOf(s))&&(1===p.length?delete d[u][o]:d[u][o].subjects.splice(a,1));d[u][l]||(d[u][l]={},d[u][l]={type:"string",dispValue:g,subjects:[]}),d[u][l].subjects.push(s),n=c.get(s),i=r.getReference(n),e.is(i)&&(f=(f=i.getAdditionalInfo("ds6w"))||{},e.is(f)&&(f[u]={dispValue:g,type:"string",value:l},i.setAdditionalInfo({ds6w:f})))}},m=function(n,i){new t(function(t,n){var i,o,a=[],s=g.splice(0);Array.isArray(s)&&s.length>0?(s.forEach(function(t){if("add"===t.event){if(c.set(t.Path,t.PID),i=r.getReference(t.PID),!e.is(i))return void n("Model not found for PID:"+t.PID);o=i.getAdditionalInfo("ds6w"),e.is(o)||a.push(t.PID),Object.keys(t.externalTags).length>0&&t.externalTags.forEach(function(e){h(e)})}else"remove"===t.event&&c.delete(t.Path)}),0===c.size&&(p(),n("View data empty.")),a.length>0?r.fetchMultiplePromise(a,{select_predicate:["physicalid","interface"],withSynthesisAttribute:!0,type:"entity",silent:!0}).then(function(n){n.forEach(function(t){var n=r.addReference(t.attributes,{silent:!0});e.is(t.ds6w)&&n.setAdditionalInfo({ds6w:t.ds6w})}),t()}).catch(function(){n("Failed to fetch index attributes for root PID:"+a)}):t()):n("No nodes to process tags.")}).then(function(){return new t(function(t,n){var i,o={};c.forEach(function(t,i){var a,s;a=r.getReference(t),e.is(a)?(s=a.getAdditionalInfo("ds6w"),e.is(s)&&(o[i]=s)):n("Model not found for PID:"+t)}),i=f.parse(o),d=i.ds6wTagGrouped,t()})}).then(function(){return e.is(i,"function")&&i(),t.resolve()}).catch(function(t){e.is(i,"function")&&i()})};return{onStart:function(e,t){t()},onStop:function(){},clear:function(){p()},getNodeUpdatePromise:function(t){var n;if(e.is(t))return Array.isArray(t)?g=g.concat(t):g.push(t),n={callback:m,globalArray:g,context:this,delay:500,blockSize:1e3},r.getExecuteByBlockPromise(n)},addExternalTags:function(e){h(e)},displayExternalTags:function(){var t;t=f.getTagsSummary(d),e.is(t)},removeExternalTags:function(){var t,n,i,a,s;(s=o.getBehavior("WUXNodeModelBehavior"))&&(e.is(d[u])&&delete d[u],t=f.getTagsSummary(d),e.is(t),n=s.getAllDescendants(),Array.isArray(n)&&0<n.length&&n.forEach(function(t){i=r.getReference(t.getReferencePID()),e.is(i)&&(a=i.getAdditionalInfo("ds6w"),e.is(a)&&e.is(a[u])&&(delete a[u],i.setAdditionalInfo({ds6w:a})))}))},setStatusCustomColors:function(t){!function(t){var n,i=[],o={};if(0!==Object.keys(t).length){for(n in t)t.hasOwnProperty(n)&&i.push({color:t[n].colorCode,type:"string",object:n});o[u]=i,e.is(o)&&(void 0).setColorMap(o)}}(t)},onColorize:function(t){!function(t){var n=o.getBehavior("TreeListViewBehavior"),i=o.getBehavior("WUXNodeModelBehavior"),r=o.getBehavior("GraphViewBehavior");s.getActiveView()===o.getId()&&e.is(n)&&e.is(i)&&(n.manageColumn("taggerColor",{visible:!0}),e.is(r)&&r.setTaggerStatus(!0),t.tagColors.forEach(function(e){var t=f.findColoredPaths(d,e).map(function(e){return e.indexOf(",")>-1?e.split(","):e});i.setTaggerColor(t,e)}),o.notify("TaggerColumnColorized",o.getId()))}(t)},onUnColorize:function(){var t,n;s.getActiveView()===o.getId()&&(t=o.getBehavior("TreeListViewBehavior"),n=o.getBehavior("GraphViewBehavior"),e.is(t)&&t.manageColumn("taggerColor",{visible:!1}),e.is(n)&&n.setTaggerStatus(!1),o.notify("TaggerColumnUnColorized",o.getId()))}}}}}),define("DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphViewBehaviour",["UWA/Core","DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphLinkFilterUI"],function(e,t){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin","ProcessImplementPlugin"],creator:function(n,i,o,r,a,s,l,u,c,d,g,f){var p,h,m,I,v,b,y,P,C,D,S,R,V,A,w,L,E,M,N,T,B,O,x,F,k,U,_,W,j,H,G,X,z,K,Q,q,J,Y,Z,$,ee,te,ne,ie,oe,re,ae,se,le,ue,ce,de,ge,fe,pe,he,me,Ie,ve,be,ye,Pe={},Ce={},De=0,Se=!1,Re={},Ve=new e.Class.Collection([],{}),Ae=r.getComponent("EGraphCore"),we=r.getComponent("EGraphViews"),Le=r.getComponent("EGraphIact"),Ee=r.getComponent("EGraphUtils"),Me=r.getComponent("Breadcrumb"),Ne=r.getComponent("ContextualMenuManager"),Te=r.getComponent("TooltipModel"),Be=r.getComponent("WUXCommandsManager"),Oe=i.getElement();return ee=function(){var e=i.getBehavior("SelectionBehavior").getSelectionsWithPaths()[0][0];return{id:e.id,path:e.path}},te=function(t){var n=s.getReferenceModel(b.id);return e.is(t)&&(t.get("isAggregatedBy")===b.id||n&&n.get("PID")===t.get("isAggregatedBy"))},ne=function(){return 1===De},D=function(){we.SVGEdgeView.call(this)},k=function(){},A=function(t,n,i,r){var a,s,l=0;return k.prototype.onupdate=function(e){var t,n,i,o,r;t=e.cl1.c.aleft,o=e.cl1.c.atop,i=e.cl2.c.aleft,r=e.cl2.c.atop,n=.5*(t+i),e.set("path",[Ae.PathCmd.M,t,o,Ae.PathCmd.L,n,o,Ae.PathCmd.L,n,r,Ae.PathCmd.L,i,r])},D.prototype.oncreateDisplay=function(t){var n=this;we.SVGEdgeView.prototype.oncreateDisplay.apply(this,arguments),this.display.elt.id=Math.random(),this.display.elt.textContent="official",t.mark&&(this.display.elt.setAttribute("data-link-type-nls",o.getNLSValue(t.mark.get("type"))),this.display.elt.setAttribute("data-link-from",t.mark.get("from")),this.display.elt.setAttribute("data-link-to",t.mark.get("to"))),s=Ce.Attribute,e.is(s,"array")?s.forEach(function(e){L(n,t,e.name,e.dicoType,l),l++}):L(n,t,s.name,s.dicoType,l)},a=new Ae.Edge,"Instance"===i?(a.set("geometry",new k),a.mark=""):(a.set("geometry",new Ae.AutoBezierGeometry),a.mark=i),a.views.main=new D("egraph_views_SVGEdgeView"),r.addEdge(t,n,a),a},w=function(e,t,n,i){var o;return(o=new Ae.Edge).set("geometry",new Ae.AutoBezierGeometry),o.views.main=new we.SVGEdgeView(0===De?"my-first-edge-view":"my-sec-edge-view"),o.mark=n,i.addEdge(e,t,o),o},L=function(t,n,r,a,l){var u,c,d,g,h="http://www.w3.org/2000/svg",m=i.getBehavior("ProductFlowLinkBehavior"),I=0;if((u=document.createElementNS(h,"textPath")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+t.display.elt.id),u.setAttribute("startOffset","10%"),""===n.mark?u.appendChild(document.createTextNode("")):"type"===r?(d=o.getNLSValue(n.mark.get(r)),"ProcessImplementLinkOcc"===n.mark.get(r)?d="("+f.getRoleFromModelOrComputed(n.mark.get("PID")).nlsText+")"+d:"DELLmiTimeConstraintCnx"===n.mark.get(r)&&(g=s.getConnection(n.mark.get("PID")),d=m.getLinkInfo(g).NLS),u.appendChild(document.createTextNode(d)),l++):n.mark.get(r)&&(u.appendChild(document.createTextNode(o.getNLSValue(a+"."+r)+": "+n.mark.get(r))),l++),t.display.text=document.createElementNS(h,"text"),e.is(n.mark)&&""!==n.mark)for(c=p.edges.first;c;c=c.next)e.is(c.mark)&&""!==c.mark&&c.mark.get("PID")!==n.mark.get("PID")&&n.cl1.c.node.PID===c.cl1.c.node.PID&&n.cl2.c.node.PID===c.cl2.c.node.PID&&I++;t.display.text.setAttribute("dy",-14*(l-1)+12*(I+1)),t.display.text.grElt=n,t.display.text.setAttribute("data-id",t.display.elt.id),Ee.classListAdd(t.display.text,"edge-text"),t.display.text.appendChild(u),""!==u.innerHTML&&t.structure.root.appendChild(t.display.text)},ye=function(){var t=e.createElement("div",{class:"egraph_views_HTMLNodeView_Node input-node my-node"}),n=e.createElement("div",{class:"my-node-header"}),i=e.createElement("div",{class:"my-node-container"}),o=e.createElement("div",{class:"my-node-rightConnector-container"});return t.setStyles({width:"50px",height:"50px"}),t.appendChild(n),t.appendChild(i),t.appendChild(o),t},x=function(t,n,i){var r=e.is(Pe.Lines)?Pe.Lines.Line:[],a="";r.forEach(function(r){var s=e.is(r.Info,"array")?r.Info:[r.Info],u=new e.Element("div",{class:"my-node-line"}),c=function(e){return/^(auto|0)$|^[+-]?[0-9]+.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc|rem)$/.test(e)};s.forEach(function(i){var r,d,g,f,p=new e.Element("span",{class:"my-node-word"});r=e.is(i.dicoType)&&l.isEntityInstance(i.dicoType)?n.get(i.property):t.get(i.property),i.fontSize&&c(i.fontSize)&&(g=i.fontSize),d=i.maxWidth&&c(i.maxWidth)?i.maxWidth:100/s.length+"%",i.displayAttributeName&&(f=e.is(i.dicoType)?i.dicoType+"."+i.property:i.property,r=o.getNLSValue(f)+" : "+r),p.setText(r),p.setStyles({fontWeight:i.fontWeight,color:i.color,maxWidth:d,fontSize:g}),a+=r,a+=" ",p.inject(u)}),a+="\n",u.inject(i)}),i.tooltipInfos=new Te({shortHelp:a})},F=function(t,n,r,a,l,u,c,d){var g,f;return f=l,(g=new Ae.Node).views.main=new C,g.name=r,g.idObjet=l,g.referencePID=l,g.typeDobjet=a,g.imgType=c,e.is(d)&&(g.PID=d.get("PID"),g.referencePID=d.get("referencePID"),g.instancePID=d.get("instancePID"),g.childOccurencePath=d.get("childOccurencePath"),g.isAggregatedBy=d.get("isAggregatedBy"),f=g.referencePID+(g.instancePID?"_"+g.instancePID:"")),f=f.replace(new RegExp(",","g"),"_"),g.id="node_"+f,g.data={},g.multiset("left",t,"top",n,"width",250,"height",ne()?90:100),C.prototype.buildNodeElement=function(t){var n,r,a,l,c,d,g,f=null,p=null,h="",m=null;if(e.is(t))return e.is(t.referencePID)?(f=s.getReference(t.referencePID),h=o.getIconURLFromKey(f.get("type")),t.instancePID&&(p=s.getInstance(t.instancePID)),m=u.cloneNode(!0),r=e.is(t.childOccurencePath)?t.childOccurencePath:t.referencePID,m.className+=" EGraph_obj_"+f.get("PPRTYPE")+" "+r,n=Pe.Image.value,ne()?(!0===n&&e.is(h,"string")&&h.length>0&&(m.childNodes[0].src=h),x(f,p,m.childNodes[1])):(a=i.getBehavior("LinkBehavior"),l=e.is(Pe.Primary.Attribute)?Pe.Primary.Attribute:null,c=e.is(l)?e.is(l.dicoType)?l.dicoType+"."+l.name:l.name:null,d=e.is(c)?f.get(c):null,g=e.is(Pe.Secondary.Attribute,"array")?Pe.Secondary.Attribute:[Pe.Secondary.Attribute],new e.Element("div",{class:"wux-control-inline-container"}).inject(m.childNodes[0]),!0===n&&e.is(h,"string")&&h.length>0&&(m.childNodes[0].innerHTML+='<img src="'+h+'">'),e.is(d,"string")&&d.length>0&&(m.childNodes[0].innerHTML+=d),g.forEach(function(t,n){var i,r,a,s;e.is(t)&&e.is(t.name)&&(i=e.is(t.dicoType)?t.dicoType+"."+t.name:t.name,r=o.getNLSValue(i),a=f.get(i),"type"===i&&(a=o.getNLSValue("Type."+a)),s="<div><b>"+r+"</b>: "+a+"</div>",m.childNodes[1].innerHTML+=s)}),(e.is(t.instancePID)?a.areRelationsLoaded(t.instancePID):a.areRelationsLoaded(t.referencePID))||o.getIconElem("LinksNotFetched").inject(m.childNodes[2]))):m=u.cloneNode(!0),m},g},j=function(e,t){var n=!1;return t.forEach(function(t){(e===t.path.join()||0===t.path.length&&e===t.id)&&(n=!0)}),n},H=function(t,n){var r,a,l=[],u=n,c=t.clientPos[0],d=t.clientPos[1],g=s.getConnection(u).getAttribute("type"),f=i.getBehavior("EditAttributeBehavior");r={icon:"url("+o.getIconURLFromKey("GeneralDelete")+")",label:o.getNLSValue("LinksUI.DeleteLink"),sensitivity:"LinearProductFlowCnx"!==g?"enabled":"disabled",callback:function(){var t=s.getConnection(u);e.is(t)&&s.deleteConnection(u,{onFailure:function(){i.warn(o.getNLSValue("LinksUI.DeleteFailure"))},onComplete:function(){i.info(o.getNLSValue("LinksUI.DeleteSuccess"))},logMessage:o.getNLSValue("LinksUI.LogMessage")})}},["CapableResourcesStructureLink"].indexOf(g)>=0&&(r.sensitivity="disabled"),a={icon:"url("+o.getIconURLFromKey("EditAttribute")+")",label:o.getNLSValue("LinksUI.EditAttribute"),sensitivity:f.hasEditConfiguration(u)?"enabled":"disabled",callback:function(){f.editConfiguredAttributes(u)}},l.push(r),l.push(a),Ne.show({nodes:l},[c,d])},y=function(t){var n,r,a=!0;Oe.getElement("#canvas"+De.toString()).addEventListener("mouseover",function(e){},!1),t.addChangeListener(function(t){var l,u,c,d=[];if("edges"===t[0].path[0]&&(l=t[0].child.cl2.c,u=t[0].child.cl1.c,null!==l&&null!==u&&e.is(l.node.referencePID)&&e.is(u.node.referencePID))){if(!e.is(t[0].child.geometry)){if(l.node.PID===u.node.PID)return void i.warn(o.getNLSValue("CreateLink.SameItem"));c={allowMove:!0,instancePID:null,instancePIDsArray:[],referencePID:l.node.referencePID,rootReferencePID:null,targetInstancePID:null,targetInstancePIDsArray:[],targetReferencePID:u.node.referencePID,targetRootReferencePID:null},l.node.instancePID?(c.rootReferencePID=s.getInstance(l.node.childOccurencePath.split(",")[0]),c.rootReferencePID=e.is(c.rootReferencePID)?c.rootReferencePID.get("isAggregatedBy"):null,c.instancePIDsArray=l.node.childOccurencePath.split(","),c.instancePID=l.node.instancePID):c.rootReferencePID=l.node.referencePID,u.node.instancePID?(c.targetRootReferencePID=s.getInstance(u.node.childOccurencePath.split(",")[0]),c.targetRootReferencePID=e.is(c.targetRootReferencePID)?c.targetRootReferencePID.get("isAggregatedBy"):null,c.targetInstancePIDsArray=u.node.childOccurencePath.split(","),c.targetInstancePID=u.node.instancePID):c.targetRootReferencePID=u.node.referencePID,d.push(c),i.notify("CreateLinkOrInstance",[d])}setTimeout(function(){for(n=[],n=Oe.getElements("path"),r=0;r<n.length;r++)"official"!==n[r].innerHTML&&("none"===window.getComputedStyle(n[r]).getPropertyValue("marker-end")&&"arrow-edge-end-marker"!==n[r].parentElement.id&&n[r].parentElement.removeChild(n[r]))},500)}a||(a=t.some(function(e){return"selection"===e.path[0]}))}),t.addListener("update",function(){var n,o,r,l,u,c,d,g,f,p,h=i.getBehavior("SelectionBehavior"),m=[],I=new e.Class.Collection([],{});if(a){for(a=!1,c=(u=h.getSelections())[0].concat(u[1]).concat(u[2]).concat(u[3]),d=h.getSelectionsWithPaths()[0],c.forEach(function(t){e.is(t)&&(g=s.getReferenceModel(t),e.is(g)&&I.add({ref:g}))}),n=t.selection.first;n;n=n.nextSel)n.type===Ae.Type.NODE&&(o=s.getReference(n.referencePID),n.instancePID,l=j(n.PID,d),r=n.childOccurencePath,l?I.forEach(function(e){e.get("ref").id===n.referencePID&&I.remove(e)}):p=o.get("PID"));I.forEach(function(e){m.push(e.get("ref").id)}),f={selectedNodeIds:m},e.is(p)&&(f.changed={nodeId:p,childOccurencePath:e.is(r)?r.split(","):null,isSelected:!0}),Se||i.notify("EGraphNodeSelect",f),Se=!1}})},P=function(){var e,t,n;return(e=new Ae.EGraph).setViewOpts({addTopologicalIds:!0}),n=Oe.childNodes[0],e.addView("main",new we.HTMLGraphView(n)),(t=new Le.StateMachine(e,null,null,e.views.main)).rootState&&(t.rootState.doubleClickOnNode=ae,t.rootState.oncontextmenu=function(e,t){se(e,t)}),e.setZoomOpts({customMgt:!0}),t.state.onwheel=function(e,t){var i,o;t.inside&&(i=e.graphView).zoominc&&(o=n.getBoundingClientRect(),i.zoominc(.5*t.wheelDelta,t.clientPos[0]-o.x,t.clientPos[1]-o.y))},e.updateLock(),e},C=function(){we.HTMLNodeView.call(this)},D=function(){we.SVGEdgeView.call(this)},z=function(e){var t=[],n=[],i=[],o=[];return e.forEach(function(e){switch(e.get("Type")){case 0:o.push(e);break;case 1:t.push(e);break;case 2:n.push(e);break;case 3:i.push(e)}}),[o,t,n,i]},S=function(t){for(var n,i,o,r,a,s,l,u,c,d,g=new e.Class.Collection([],{}),f=t.where({index:0}),p=0;f.length>0;){if(i=p,o=(n=f[0]).get("index"),f.shift(),void 0===g.findWhere({ref:n})){for(;void 0!==g.findWhere({y:i,x:o});)i++;g.add({y:i,x:o,ref:n}),p=i}for(u=n.get("links"),d=0;d<u.length;d++){for(c=u[d],i=p,o=(c=t.findWhere({PID:c[0]})).get("index");void 0!==g.findWhere({y:i,x:o});)i++;if(r=g.findWhere({ref:c}),a=g.findWhere({ref:n}),void 0===r){if(r=g.add({y:i,x:o,ref:c}),p=i,s=!1,i=a.get("y")-1,r.get("x")-a.get("x")>1){for(;!1===s;)for(s=!0,i++,l=a.get("x")+1;l<r.get("x");l++)void 0!==g.findWhere({x:l,y:i})&&(s=!1);for(l=a.get("x")+1;l<r.get("x");l++)g.add({y:i,x:l,ref:null});r.set({y:i}),a.set({y:i}),p=i}f.unshift(c)}else a.set({y:i}),p=i+1}}return g},R=function(e,t,n){var i;return(i=new Ae.Connector).views.main=!0===n?new we.SVGConnView("egraph_views_SVGConnView egraph_views_mySVGConnView"):0===De?new we.SVGConnView("egraph_views_SVGConnView egraph_views_mySVGConnView_invisible"):new we.SVGConnView,i.multiset(["cstr","attach"],e,["cstr","offset"],40),i},V=function(e){0===De?(e.data.out=R(Ae.BorderCstr.RIGHT,0,!0),e.data.out.id="in_"+e.id,e.appendConnector(e.data.out),e.data.in1=R(Ae.BorderCstr.LEFT,0,!0),e.data.in1.id="out_"+e.id,e.appendConnector(e.data.in1),e.data.outInstance=R(Ae.BorderCstr.BOTTOM,0,!1),e.data.outInstance.id="instance_"+e.id,e.appendConnector(e.data.outInstance)):(e.data.in1=R(Ae.BorderCstr.LEFT,0,!0),e.appendConnector(e.data.in1),e.data.in2=R(Ae.BorderCstr.LEFT,0,!0),e.appendConnector(e.data.in2),e.data.out=R(Ae.BorderCstr.RIGHT,0,!0),e.appendConnector(e.data.out))},E=function(t,n){var o,r,a,l,u,c,d,g,f,p,h,m=0,I=0,v=0,b=i.getBehavior("SelectionBehavior"),y=e.Class.Model.extend({idAttribute:"PID"});p=new e.Class.Collection([],{model:y}),f=b.getSelectionsWithPaths(),g=f[0].concat(f[3]),t.forEach(function(e,t){e.forEach(function(e,n){m=e.get("X"),d=500*t+40+150*(m+I),o=125*n+40,r=e.get("PLMEntity.V_Name"),c=e.get("PPRTYPE"),u=e.get("PID"),a=ye(),l=e.get("TYPE"),p.add({PID:u,referencePID:e.get("referencePID"),Node:F(d,o,r,c,u,a,l,e)}),V(p.last().get("Node")),m>v&&(v=m)}),I+=v});try{p._models.forEach(function(e){var t;n.addNode(e.get("Node")),g.forEach(function(i){h=s.getReferenceModel(i),t=0===i.path.length?h.get("PID"):i.path.join(","),e.get("Node").PID===t&&n.addToSelection(e.get("Node"))})})}finally{n.updateUnlock()}return p},M=function(t,n){var i,o,r,a=0,s=0,l=new e.Class.Collection([],{});t.forEach(function(t){o=t.get("ref"),e.is(o)&&(i=ie(o,t.get("x"),t.get("y")),r=o.get("PID"),l.add({PID:r,Node:i}),V(l.last().get("Node")),a<150*t.get("y")&&(a=150*t.get("y")),s<450*t.get("x")&&(s=450*t.get("x")))});try{l._models.forEach(function(e){n.addNode(e.get("Node"))})}finally{n.updateUnlock()}return l},N=function(t,n,i){var o,r,a,l,u,c=null,d=null,g=function(t){return e.is(t,"array")&&0!==t.length},f=function(t){return I.filter(function(n){var i,o,r=n.get("Node");return e.is(r.childOccurencePath)&&(i=r.childOccurencePath.indexOf(t),o=r.childOccurencePath.slice(i)),e.is(o)&&o===t||r.referencePID===t})},h=null,m=null,v=null,b=null,y=null,P=null,C=null;if(e.is(i)&&(C=i),u=C.get("PID"),e.is(Re[u])||(Re[u]={fromNodes:[],totalEdges:0}),e.is(t,"string")&&(c=(c=f(t)).filter(function(e){var t=e.get("Node").PID;return-1===Re[u].fromNodes.indexOf(t)&&(Re[u].fromNodes.push(t),!0)})),e.is(n,"string")&&(d=f(n)),g(c)&&g(d))for(a=0;a<c.length;a++)for(h=c[a],e.is(h)&&(o=h.get("Node"),e.is(o)&&(v=s.getReference(o.referencePID),e.is(v)&&(y=v._attributes.PPRTYPE))),l=0;l<d.length;l++)m=d[l],e.is(m)&&(r=m.get("Node"),e.is(r)&&(b=s.getReference(r.referencePID),e.is(b)&&(P=b._attributes.PPRTYPE))),e.is(r)&&e.is(o)&&(y===P?(A(o.data.out,r.data.out,C,p),w(o.data.out,r.data.out,C,p)):o.actualLeft<r.actualLeft?(A(o.data.out,r.data.in1,C,p),w(o.data.out,r.data.in1,C,p)):(A(r.data.out,o.data.in1,C,p),w(o.data.in1,r.data.out,C,p)),Re[u].totalEdges+=2)},T=function(t,n,r){var a,l,u;t.forEach(function(t){null!==t.get("isAggregatedBy")&&n.where({PID:t.get("PID")}).forEach(function(s){e.is(s)?(a=s.get("Node"),n.where({referencePID:a.isAggregatedBy}).forEach(function(t){l=t.get("Node"),e.is(a.childOccurencePath)&&(u=a.childOccurencePath.split(","),e.is(l.instancePID)?u.length>1&&u[u.length-2]===l.instancePID&&l.childOccurencePath.split(",")[0]===u[0]&&A(a.data.in1,l.data.outInstance,"Instance",r):l.referencePID===a.isAggregatedBy&&1===u.length&&A(a.data.in1,l.data.outInstance,"Instance",r))})):i.warn(o.getNLSValue("GraphView.NodeWithPID")+t.get("PID")+o.getNLSValue("GraphView.NotExist"))}),t.get("LINKS").forEach(function(e){var t=e.get("from"),n=e.get("to"),i=e.get("type"),o=e.get("PID"),r=!0;"DELLmiTimeConstraintCnx"!==i&&"DELLmiMaterialPathCnxCust"!==i&&"LinearProductFlowCnx"!==i||(r=function(e,t,n){var i,o,r,a,l,u,c;if(u=(l=s.getConnection(n)).get("from"),c=l.get("to"),Array.isArray(u)&&(u=u.join()),Array.isArray(c)&&(c=c.join()),i=e.replace(u,""),o=t.replace(c,""),i.length>0&&o.length>0){if(i=i.split(","),o=o.split(","),r=i.length-1,i.length!==o.length)return!1;for(a=0;a<r;a++)if(i[a]!==o[a])return!1}return!0}(t,n,o)),r&&N(t,n,e)})})},B=function(e,t,n){var i,o,r,a;e.forEach(function(s){i=s.get("PID"),s.get("links").forEach(function(l){r=(r=t.findWhere({PID:i})).get("Node"),a=(a=t.findWhere({PID:l[0]})).get("Node"),o=e.findWhere({PID:l[0]}),s.get("loopNode")&&s.get("index")>o.get("index")?w(r.data.in1,a.data.in1,l[1],n):o.get("loopNode")?w(r.data.out,a.data.out,l[1],n):w(r.data.out,a.data.in1,l[1],n)})})},U=function(){var e;J(),ne()?be().then(function(){e=X(),Y(e)}):q()},_=function(){new t(i).loadLinkGraphUI()},O=function(){var t,n=i.getElement(),r=o.getIconURLFromKey("Refresh"),a=o.getIconURLFromKey("Graph.LinksFilter"),s=e.createElement("div",{class:"canvas-gv",id:"canvas"+De.toString()}),l=e.createElement("img",{src:r,class:"GraphViewBar refresh-btn"}),u=e.createElement("img",{src:a,class:"GraphViewBar filter-btn"}),c=e.createElement("div",{class:"egraph-toobar"}),d=e.createElement("div",{class:"egraph-navigator"}),g=Oe.getElement("#canvas"+De.toString()),f=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","svg")),p=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","defs")),h=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","marker")),m=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","path"));return e.is(Oe)||(Oe=n),null!==g&&g.remove(0),f.appendChild(p),p.appendChild(h),h.appendChild(m),f.setAttribute("width","0"),f.setAttribute("height","0"),f.setAttribute("style","position:absolute;"),h.setAttribute("id","arrow-edge-end-marker"),h.setAttribute("markerWidth","10"),h.setAttribute("markerHeight","8"),h.setAttribute("refX","8"),h.setAttribute("refY","4"),h.setAttribute("orient","auto"),m.setAttribute("d","M 0 0 L 10 4 L 0 8"),m.setAttribute("fill","#777"),m.setAttribute("stroke","none"),m.setAttribute("z-index","10"),l.tooltipInfos=new Te({shortHelp:o.getNLSValue("GraphView.Refresh.Tooltip")}),l.addEvent("click",function(){U()}),u.addEvent("click",_),s.addEvent("contextmenu",function(t){e.Event.stop(t)}),s.setStyles({width:"100%",height:"100%","background-color":"white",position:"relatve"}),s.appendChild(f),ne()&&((t=le(b.id,b.path))&&(t.inject(d),d.inject(c)),c.inject(s)),e.is(v.showReloadAction)&&!0===v.showReloadAction&&(ne()?l.inject(c):l.inject(s)),e.is(v.showGraphViewFilter)&&!0===v.showGraphViewFilter&&u.inject(s),e.is(Oe)&&s.inject(Oe),Oe},W=function(e){var t,n,i;for(i=new Ee.BoundingRect,t=e.nodes.first;t;t=Ae.dftNext(e,t))i.update(t,t.actualLeft-300,t.actualLeft+t.actualWidth,t.actualTop,t.actualTop+t.actualHeight);i.xmax=i.xmax>800?800:i.xmax,i.ymax=i.ymax>2e3?2e3:i.ymax,n=Ee.reframeViewpoint(e.views.main.getSize(),i,{padding:15,minSize:50,horizontal:-1,vertical:-1,aliasing:0,defaultVpt:e.views.main.vpt,maxScale:1}),e.views.main.setViewpoint(n,!0)},Q=function(){return O(),Ee.inherit(C,we.HTMLNodeView),0===De&&Ee.inherit(D,we.SVGEdgeView),p=P()},G=function(){var t,n=[];return e.is(h)&&h.length>0?h:((t=g.getRoots(i.getId())).length>0&&(n=t[0].concat(t[1]).concat(t[2])),h=d.getEGraphDataToDisplay(n))},X=function(){var t;return e.is(b)&&e.is(b.id)&&(t=s.getReferenceModel(b.id),e.is(t)&&(h=d.getProductFlowDataToDisplay(t.id,b.path))),h},K=function(e){return S(e)},q=function(){var t,n;t=G(),Re={},e.is(t)&&t.length>0&&(m=z(t),n=Q(),I=E(m,n),T(t,I,n),W(n),y(n))},J=function(){e.is(Oe)&&e.is(Oe.childNodes[0])&&(Oe.childNodes[0].destroy(),p=void 0,h=void 0)},Y=function(t){var n,r;p=Q(),e.is(t)&&t.length>0&&((n=d.isProductFlowDataLooped(t))>0&&(r=1===n?"ProductFlowView.Loop":"ProductFlowView.MultipleLoop",i.warn(o.getNLSValue(r),void 0,"error")),Ve=K(t),I=M(Ve,p),B(t,I,p),W(p),y(p))},ie=function(e,t,n){var i,o,r,a,s,l,u,c;return null!==e&&(u=450*t,c=150*n,o=e.get("PLMEntity.V_Name"),r=e.get("PPRTYPE"),a=e.get("PID"),s=e.get("TYPE"),l=Oe.childNodes[0].childNodes[0].childNodes[0],(i=F(u,c,o,r,a,l,s)).childOccurencePath=e.get("childOccurencePath"),i.instancePID=e.get("instancePID"),i.PID=a),i},oe=function(e){var t,n,i,o=-1;t=d.getProductFlowGraphInstance(e,b.path),n=h.push(t),Ve.forEach(function(e){e.get("y")>o&&(o=e.get("y"))}),o+=1,Ve.add({y:o,x:0,ref:n}),i=ie(n,0,o),V(i);try{p.addNode(i)}finally{p.updateUnlock()}},re=function(e){var t,n=b.path.concat([e.get("PID")]).toString();for(t=p.nodes.first;t&&t.childOccurencePath!==n;t=t.next);t&&p.removeNode(t)},ve=function(t,n){ne()&&(b.id=t,b.path=e.is(n,"string")&&n.length>0?n.split(","):n,J(),be().then(function(){h=X(),Y(h)}))},ae=function(e){ve(e.instancePID,e.childOccurencePath)},se=function(t,n){var r,a,u,c,d,g,h,m=n.grElt,I=[],v=n.clientPos[0],b=n.clientPos[1],y=i.getAppContext(),P={},C=i.getBehavior("LinkBehavior"),D=function(){var t,n,i=!1;return e.is(p.selection.first)&&(t=p.selection.first.PID),e.is(p.selection.last)&&(n=p.selection.last.PID),e.is(t)&&e.is(n)&&(i=t===n),i};e.is(m)&&(m.type===Ae.Type.NODE?(e.is(m.gr.selection.first)&&m.gr.selection.first.PID!==m.PID?(p.removeFromSelection(m.gr.selection.first),p.addToSelection(m)):null===m.gr.selection.first&&p.addToSelection(m),(e.is(m.instancePID)?C.areRelationsLoaded(m.instancePID):C.areRelationsLoaded(m.referencePID))||(a={icon:"url("+o.getIconURLFromKey("LoadRelations")+")",label:o.getNLSValue("Cmd.LoadRelations.Title"),sensitivity:"enabled",callback:function(){r=Be.getCommand("LoadRelations",y),e.is(r)&&(r.beginExecute(),r.execute({sourceModuleId:i.getId()}),r.endExecute())}},I.push(a)),u=!m.childOccurencePath,c={icon:"url("+o.getIconURLFromKey("Relations")+")",label:o.getNLSValue("Cmd.Relations.Title"),sensitivity:D()?"enabled":"disabled",callback:function(){r=Be.getCommandCheckHeader("Relations",y),e.is(r)&&!1===r.getState()&&(r.options.node=u?{referencePID:m.referencePID,instancePID:m.instancePID}:{referencePID:m.referencePID,instancePID:m.instancePID,absPath:m.childOccurencePath.split(",")},r.toggleState())}},I.push(c),d={icon:"url("+o.getIconURLFromKey("DisplayProperties")+")",label:o.getNLSValue("Cmd.DisplayProperties.Title"),sensitivity:D()?"enabled":"disabled",callback:function(){r=Be.getCommandCheckHeader("DisplayProperties",y),e.is(r)&&!1===r.getState()&&(r.options.node={referencePID:m.referencePID,instancePID:m.instancePID,absPath:m.childOccurencePath},r.toggleState())}},I.push(d),l.isAKindOf(s.getReference(m.referencePID),"DELLmiHeaderOperationReference")&&e.is(m.childOccurencePath)&&(g=m.childOccurencePath.split(","),P=f.canCreatePartialScopeLink(g),e.is(P.errorMessage)||(h={icon:"url("+o.getIconURLFromKey("PartialProcessImplementLink")+")",label:o.getNLSValue("Cmd.CreatePartialScopeOnHeaderOperation.Title"),callback:function(){i.notify("CreatePartialScopeLinkOnHeaderOperation",[g])},sensitivity:"enabled"},I.push(h))),Ne.show({nodes:I},[v,b])):m.type===Ae.Type.EDGE&&e.is(m.mark.get("PID"))&&(H(n,m.mark.get("PID"),m.mark.get("from")),m.gr.selection.first=null,m.gr.selection.last=null))},le=function(t,n){var i,r,a,l,u,c=[],d=function(e,t,n){a&&c.unshift({label:a.get("PLMEntity.V_Name"),icon:o.getIconURLFromKey(a.get("type")),id:t,childOccurencePath:n})};if(e.is(n,"string")&&(n=n.split(",")),0===n.length)d(0,(a=s.getReference(t)).get("PID"),[]);else for(u=n.length-1;u>=0;u--)l=n[u],a=s.getReferenceModel(l),d(0,l,n.slice(0,u+1)),0===u&&(r=s.getInstance(l),d(0,(a=s.getAggregatingReferenceModelFromInstance(r)).get("PID"),[]));return c.length>0&&(i=new Me({value:c,mode:Me.MODE.NAVIGATION})).addEventListener("selectionChange",function(){var e=i.selectedValues[0];ve(e.id,e.childOccurencePath)}),i},Z=function(e,t,n){var i,o=[];for(n=n||!1,i=p.nodes.first;i&&(i[e]!==t||(o.push(i),n));i=i.next);return o},$=function(t,n){var i,o,r=[];for(o=p.nodes.first;o;o=o.next)o.isAggregatedBy===t&&(e.is(n)?((i=o.childOccurencePath.split(",")).pop(),(i=i.join())===n&&r.push(o)):r.push(o));return r},he=function(t){var n,i,o,r,a,l,u,c,g,f,v,b,y,P,C,D,S,R,w,L,E,M=0,N=function(e){var t;return 1===e.length&&(t=e[0]).multiset("top",t.top+125),t},T=function e(t){var n=0,i=s.getInstancesFromCollection(t);return 0===i.length?0:(i.forEach(function(t){n++,n+=e(t.get("isInstanceOf"))}),n)},B=function(){var n,i=t.get("PLMEntity.V_Name"),o=e.is(b)?b:P,s=ye();try{p.updateLock(),n=h.add({PID:o,X:u,Type:S,isAggregatedBy:t.get("isAggregatedBy"),childOccurencePath:b,instancePID:C,referencePID:P}),f=F(a,l,i,D,o,s,S,n),V(f),m[S].splice(r,0,n),I.add({PID:o,referencePID:P,Node:f}),p.addNode(f)}finally{p.updateUnlock()}},O=function(){B(),A(f.data.in1,y.data.outInstance,"Instance",p)};if(D=t.get("PPRTYPE"),!e.is(D)&&t.isInstance()&&(R=s.getReference(t.get("isInstanceOf")),D=R.get("PPRTYPE")),S="PRODUCT"===D&&t.isInstance()?function(){var e,n,i,o=0;for(e=0;e<m.length;e++)for(n=0;n<m[e].length;n++)if(i=m[e][n],t.get("isAggregatedBy")===i.get("referencePID"))return o=i.get("Type");return o}():d.getType(D),c=m[S].length,s.isReference(t))u=0,r=c,S>=1&&(M=function(e){var t,n,i=0;for(t=0;t<m[e].length;t++)(n=m[e][t]).get("X")>i&&(i=n.get("X"));return i}(S-1)),a=500*S+40+150*M,l=125*c+40,P=t.get("PID"),B();else{for(C=t.get("PID"),P=t.get("isInstanceOf"),n=0;n<m[S].length;n++)if(v=m[S][n],o=t.get("isAggregatedBy")===v.get("isAggregatedBy"),t.get("isAggregatedBy")===v.get("referencePID")||o){if(u=v.get("X"),0===(f=Z("PID",v.get("PID"))).length)continue;if(f=f[0],w=$(v.get("referencePID"),v.get("childOccurencePath")).find(function(e){return e.instancePID===t.get("PID")}),e.is(w)){if(L=n,n+=T(v.get("referencePID")),e.is(r))for(i=L;i<=n;i++)E=m[S][i],N(Z("PID",E.get("PID")));continue}if(o)n+=T(v.get("referencePID")),a=f?f.left:0;else{if(e.is(y))for(O(),n+=1,v=m[S][n],g=Z("PID",v.get("PID")),f=N(g),i=n+1;i<m[S].length;i++)E=m[S][i],N(Z("PID",E.get("PID")));u=v.get("X")+1,b=v.get("childOccurencePath"),b=e.is(b)?b+","+t.get("PID"):t.get("PID"),y=f,a=(f?f.left:0)+150}l=125*(r=n+1)+40}else!o&&e.is(r)&&(g=Z("PID",v.get("PID")),f=N(g));O()}},me=function(t,n){var i,o,r=function(t,n){var i,o,r;return(r=(e.is(t,"array")?t.toString():t)===(o=e.is(n,"array")?n.toString():n))||(i=e.is(t,"array")?t:t.split(",")).length>0&&(r=i[i.length-1]===o||i.slice(1).join()===o),r};for(o=p.edges.first;o&&(i=o.next,!(e.is(o.mark,"object")&&r(o.mark.get("from"),t.get("from"))&&r(o.mark.get("to"),t.get("to"))&&(n--,o.remove(),0===n)));o=i);},Ie=function(t,n){var i,o,r,a=s.getAllChildrenFromCollection(t);if(n=e.is(n)?n:"",e.is(a.instancesPID)&&(!a||0!==a.instancesPID.length))for(o=0;o<a.instancesPID.length;o++)r=n.length>0?n+","+a.instancesPID[o]:a.instancesPID[o],1===(i=Z("childOccurencePath",r)).length&&(i=i[0],Ie(i.referencePID,r),de(i))},ce=function(t){var n;t.get("isInstanceOf"),n=t.isReference(),Z(n?"referencePID":"instancePID",t.get("PID"),!0).forEach(function(t){e.is(t)&&(Ie(t.referencePID,t.childOccurencePath),de(t))})},de=function(t){var n;t.remove(),n=e.is(t.childOccurencePath)?t.childOccurencePath:t.referencePID,I.remove(n),ge(n)},ge=function(e){var t,n,i,o,r,a=!1;for(t=0;t<m.length;t++)for(n=0;n<m[t].length;n++)if(m[t][n].get("PID")===e&&(m[t].splice(n,1),a=!0),a){for(i=n;i<m[t].length;i++)r=m[t][i],1===(o=Z("PID",r.get("PID"))).length&&(o=o[0]).multiset("top",o.top-125);return}},fe=function(){var e,t;for(e=p.selection.first;e;e=t)Ie(e.referencePID),t=e.nextSel,Se=!0,e.remove()},pe=function(e){var t,n,i=e.changed;for(n=i.absPath.length>0?i.absPath.join(","):i.nodeId,t=p.nodes.first;t;t=t.next)if(t.PID===n||t.instancePID===n||t.childOccurencePath===n){Se=!0,i.isSelected?p.addToSelection(t):p.removeFromSelection(t);break}},ue=function(t){var n,i,o;if(e.is(p)){for(n=p.nodes.first;n&&(n.childOccurencePath.endsWith(t.get("from").toString())?i=n:n.childOccurencePath.endsWith(t.get("to").toString())&&(o=n),!i||!o);n=n.next);i&&o&&w(i.data.out,o.data.in1,t,p)}},be=function(){var t,n=i.getBehavior("LinkBehavior"),o=i.getBehavior("ModelBehavior"),r=[];return o.isNavigateOnDemand()?(r.push({id:b.id,path:b.path}),t=s.getReferenceModel(b.id),s.getInstancesFromCollection(t.get("PID")).forEach(function(e){r.push({id:e.get("PID")})}),n.getRelations(r)):e.Promise.resolve()},{viewName:"EgraphView",listenTo:function(){return{}},onStart:function(t,n){var i;t=t||{},e.is(t.displayNodeConfigXML)&&e.is(t.displayLinkConfigXML)&&(i=u.getXMLValues(t.displayNodeConfigXML),e.is(i.Config.Preferences)&&(Pe=i.Config.Preferences),i=u.getXMLValues(t.displayLinkConfigXML),e.is(i.Config.Preferences)&&(Ce=i.Config.Preferences)),e.is(t.graphType)&&(De=t.graphType),v=t,n()},onStop:function(){J()},updateLink:function(t){var n,o,r,a,l=i.getBehavior("LinkBehavior"),u=function(t){return t=e.is(t,"array")?t[t.length-1]:t,s.getInstance(t)};"SecondaryCandidateResourceLink"===t.get("type")&&(t=l.cloneSecondaryCapableRscLinkWithFromAttr(t)),ne()?(a=u(t.get("to")),r=u(t.get("from")),te(a)&&te(r)&&ue(t)):(n=t.get("from").toString(),o=t.get("to").toString(),N(n,o,t))},onChangeReference:function(e){var t,n,i,o;(e=Array.isArray(e)?e:[e]).forEach(function(e){t=e,ne()&&(l.isEntityInstance(e.get("type"))&&(n=e,t=s.getReferenceModelFromInstance(n)),I.where({PID:t.get("PID")}).forEach(function(e){e.get("PID")===t.id&&(i=e.get("Node"),n=s.getInstance(i.instancePID),(o=i.view.elts.node.getElementsByClassName("my-node-container")[0]).innerHTML="",x(t,n,o))}))})},removeEGraphNode:function(e){0===De?ce(e):ne()&&te(e)&&re(e)},removeLink:function t(n){var o,r,a,l=n.get("PID"),u=i.getBehavior("LinkBehavior"),c=function(t){return t=e.is(t,"array")?t[t.length-1]:t,s.getInstance(t)};"DELAsmProcessCanUseCnx"===n.get("type")&&s.getImpacted(l,!1,{relationTypes:["SecondaryCandidateResourceLink"]}).forEach(function(e){(e=e.clone()).set("from",n.get("from")),t(e)}),"SecondaryCandidateResourceLink"===n.get("type")&&(n=u.cloneSecondaryCapableRscLinkWithFromAttr(n)),0===De?(a=n.get("PID"),me(n,Re[a].totalEdges),Re[a]=void 0):ne()&&(r=c(n.get("to")),o=c(n.get("from")),te(r)&&te(o)&&me(n,2))},reparentInstances:function(e){var t,n=e.newInstPIDArray,i=e.movedInstPIDArray,o=this;Array.isArray(i)&&i.forEach(function(e){Z("instancePID",e,!0).forEach(function(t){e===t.instancePID&&(Ie(t.referencePID,t.childOccurencePath),de(t))})}),Array.isArray(n)&&n.forEach(function(e){0===Z("instancePID",e,!0).length&&(t=s.getInstance(e),o.addNodeNChildrenRecursive(t))})},addEGraphNode:function(e){0===De?he(e):ne()&&te(e)&&oe(e)},addNodeNChildrenRecursive:function(t){var n,i=this,o=[];this.addEGraphNode(t),n=t.isReference()?t.get("PID"):t.get("isInstanceOf"),o=o.concat(s.getImpacted(n)),function t(n){var r,a;(r=s.getInstancesFromCollection(n)).sort(function(t,n){var i=t.get("V_TreeOrder"),o=n.get("V_TreeOrder");return(e.is(i)?i:0)-(e.is(o)?o:0)}),r.forEach(function(e){i.addEGraphNode(e),a=e.get("isInstanceOf"),o=(o=o.concat(s.getImpacted(e.id))).concat(s.getImpacted(a)),t(a)})}(n),o.forEach(function(e){i.updateLink(e)})},createGenericEGraphView:function(){var e={};i.notify("startProgress",e),q(),i.notify("stopProgress",e)},removeGenericEGraphView:function(){J()},createProductFlowEGraphView:function(){var e,t={};i.notify("startProgress",t),b=ee(),be().then(function(){e=X(),Y(e),i.notify("stopProgress",t)})},setLinkDisplayStatus:function(e,t){d.setLinkDisplayStatus(e,t)},getSupportedTypesOfLink:function(){return d.getCreatableTypesOfLink()},setGraphContainer:function(e){Oe=e},reload:function(){U()},hideSelectionNodes:function(){fe()},setTLVSelection:function(e){pe(e)},getCurrentEGraphView:function(){return p},getEGraphNodeByPropValue:function(e,t,n){return Z(e,t,n)}}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormEventHelper"],function(e,t){"use strict";return function(n,i,o,r,a,s){var l,u=o.getComponent("Element"),c=o.getComponent("ComboBox"),d=o.getComponent("TreeDocument"),g=o.getComponent("TreeNodeModel"),f=o.getComponent("AutoComplete"),p=o.getComponent("LineEditor"),h=o.getComponent("Editor"),m=o.getComponent("Toggle"),I=o.getComponent("DatePicker"),v=o.getComponent("Accordeon"),b=o.getComponent("UnitsEditor"),y=o.getComponent("UnitsSpinEditor"),P=o.getComponent("TooltipModel"),C=o.getComponent("RichTextEditor"),D=o.getComponent("InclusiveLineEditor"),S=o.getComponent("Chips"),R=!1,V=null,A=null,w={},L=new t,E="inline-container",M=function(t){var n=i.getPreferenceValue("separator"),o=new p({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:r.getNLSValue("FormUI.Placeholder.EnterAText")});return"Yes"===t.multiValue&&(o.placeholder=r.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:n}),o.autoCorrectFlag=!1),o.fieldType=t.fieldType,o.pattern=t.pattern,w[t.name]=o,o},N=function(t,n,i){var o,r,s,l=function(l){var u={};switch(l){case"magnitude":u.type="unitsEditor",u.value=a.getMagnitudeValue(n,i);break;case"UnitsSpinEditor":u.type="unitsSpinEditor",u.value=a.getMagnitudeValue(n,i);break;case"multivalueRange":for(u.type="autoComplete",u.value=n,u.multiValue=!0,u.elementsList=[],u.allowFreeInputFlag=!1,o=0;o<i.AuthorizedValues.length;o++)s=a.getAuthorizedValueNLS(i,o),u.elementsList.push({label:s,value:a.getAuthorizedValueNLS(i,o)});i.labelMap=u.elementsList;break;case"range":for(u.type="select",u.value=a.isDate(i)?a.getFormattedDate(n):n,u.options=[],o=0;o<i.AuthorizedValues.length;o++)s=a.getAuthorizedValueNLS(i,o),u.options.push({label:s,value:a.getAuthorizedValueSavedValue(i,o)||a.getAuthorizedValueNLS(i,o)});break;case"multivalue":u.type="text",u.value=a.getValueAsString(n,a.getType(i),!1);break;case"date":u.type="date",u.value=e.is(n)&&"NULL"!==n&&""!==n?a.getDate(n):null,"datetime"===u.displayType&&(u.timePickerFlag=!0);break;case"multivalueDate":u.type="text",r=(r=a.getValueAsDateArray(n)).map(function(e){return a.getFormattedDate(e)}),u.value=a.getValueAsString(r,a.getType(i));break;case"boolean":u.type="checkbox",u.value="TRUE"===n;break;case"multiLine":u.type="textarea",u.value="NULL"===n?"":n,u.pattern=a.getPattern(i),u.rows="6";break;case"richTextEditor":u.type="richTextEditor",u.value="NULL"===n?"":n;break;case"inclusiveLineEditor":u.type="inclusiveLineEditor",u.value=n,u.unit=i.unit,u.step=a.isDouble(i)?.1:1,a.isInteger(i)?(u.decimals=0,u.typingFilter=!0):(u.decimals=6,u.typingFilter=!1);break;case"chips":u.type="chips",u.value=n;break;default:u.type="text",a.isDouble(i)||a.isInteger(i)?u.value=a.getValueAsString(n,a.getType(i),!1):u.value="NULL"===n?"":n,u.pattern=a.getPattern(i)}return e.extend(t,u)};return t=a.isString(i)&&"richTextEditor"===t.displayType?l("richTextEditor"):(a.isInteger(i)||a.isDouble(i))&&"inclusiveLineEditor"===t.displayType?l("inclusiveLineEditor"):"UnitsSpinEditor"===t.displayType?l("UnitsSpinEditor"):"chips"===t.displayType?l("chips"):a.hasMagnitude(i)?l("magnitude"):a.isMultiValuated(i)?a.hasRangeDefined(i)?l("multivalueRange"):a.isDate(i)?l("multivalueDate"):l("multivalue"):a.hasRangeDefined(i)?l("range"):a.isBoolean(i)?l("boolean"):a.isDate(i)?l("date"):a.isMultiLine(i)?l("multiLine"):l("text")},T=function(t,n){var i=t,o=function(e){var t="",n=new Date(e);return isNaN(n.getTime())||(t=Math.floor(n.getTime()/1e3)),t.toString()};return a.isMultiValuated(n)?(i=a.getValueAsArray(t),a.isDate(n)&&(i=a.hasRangeDefined(n)?i.map(function(e){return t=e,n.labelMap.some(function(e){return t===e.label&&(i=e.value,!0)}),i;var t,i}):i.map(function(e){return o(e)}))):a.isBoolean(n)?i="true"===t?"TRUE":"FALSE":a.hasRangeDefined(n)?i=a.getAuthorizedValue(n,null,t):a.isDate(n)&&(t="NULL"!==t&&e.is(t)?t:"",i=o(t)),i},B=function(t){var n=new h({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:r.getNLSValue("FormUI.Placeholder.EnterAText")});return n.fieldType=t.fieldType,w[t.name]=n,n},O=function(t,n){var i=new m({type:"switch",checkFlag:t.value,value:t.value,disabled:t.disabled});return i.fieldType=t.fieldType,w[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n.bind(null,w)),i},x=function(t){var n=e.is(t)?new I(t):new I;return n.fieldType=t.fieldType,w[t.name]=n,n},F=function(t,n,i){var o,r,s,l,u=[];if(e.is(n)&&(s=w[n],e.is(s)&&"select"===s.fieldType)){for(l=s.selectedIndex,r=0;r<t.AuthorizedValues.length;r++)o=a.getAuthorizedValueNLS(t,r),u.push({labelItem:o,valueItem:a.getAuthorizedValueNLS(t,r)}),e.is(i)&&i===o&&(l=r);s.setProperties({elementsList:u}),s.selectedIndex=l}},k=function(t,n){var i,o,r=[];for(o=0;o<t.elementsList.length;o++)r[o]={labelItem:t.elementsList[o].label,valueItem:t.elementsList[o].value};return(i=new c({elementsList:r,actionOnClickFlag:!1,enableSearchFlag:!0,value:t.value,disabled:t.disabled,generateRegexString:function(e){return e}})).fieldType=t.fieldType,w[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n.bind(null,w)),i},U=function(t,n){var i,o,r;return o=new d({}),t.elementsList.forEach(function(e){r=new g({label:e.label,value:e.value}),o.addChild(r)}),i=new f({elementsTree:o,actionOnClickFlag:!1,enableSearchFlag:!1,multiSearchMode:t.multiValue,allowFreeInputFlag:!e.is(t.allowFreeInputFlag)||t.allowFreeInputFlag}),e.is(t.value,"array")&&t.value.length>0&&(i.value=t.value),i.fieldType=t.fieldType,w[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n),i},_=function(t){var n,o,a=i.getPreferenceValue("separator");return n="null"!==t.value?t.value:"",o=new b({value:n,requiredFlag:t.mandatory,disabled:t.disabled,placeholder:r.getNLSValue("FormUI.Placeholder.EnterANumber"),pattern:"^[-+e]?[0-9e]+(.[0-9e]+)?$",autoCorrectFlag:!1}),e.is(t.magnitudeText,"string")&&o.setUnit(t.magnitudeText),"Yes"===t.multiValue&&(o.placeholder=r.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:a}),o.pattern="^(([0-9])+(.[0-9]*){0,1}|)*((([0-9])*(.[0-9]*){0,1})[0-9])$",o.autoCorrectFlag=!1),o.fieldType=t.fieldType,w[t.name]=o,o},W=function(t){var n,i;return n="null"!==t.value?t.value:"",i=new y({value:n,decimals:6,typingFilter:!1,pageStepValue:1}),e.is(t.magnitudeText,"string")&&i.setUnit(t.magnitudeText),i.fieldType=t.fieldType,w[t.name]=i,i},j=function(e){var t=new C;return""!==e.value&&t.setData(e.value),t.fieldType=e.fieldType,w[e.name]=t,t},H=function(e){var t=new D(e);return t.fieldType=e.fieldType,w[e.name]=t,t},G=function(t){var n=new S({value:t.value,uniqueValue:!0,disabled:t.disabled});return n.addEventListener("change",function(t){e.is(t)&&t.stopPropagation()}),n.fieldType=t.fieldType,w[t.name]=n,n},X=function(){var t,n,i,o={};for(n in w)Object.prototype.hasOwnProperty.call(w,n)&&(i=s.getAttributeInfo(n),e.is(n)&&!w[n].getContent().getParent().isHidden()&&("select"===w[n].fieldType?t=T(w[n].currentValue,i):"autoComplete"===w[n].fieldType?t=w[n].value?T(w[n].value.join("|"),i):T(w[n].value,i):"checkbox"===w[n].fieldType?(t=(t=w[n].checkFlag).toString(),t=T(t,i)):"date"===w[n].fieldType?t=T(w[n].value,i):"richTextEditor"===w[n].fieldType?t=w[n].getData():"inclusiveLineEditor"===w[n].fieldType?t=w[n].getValue():"unitsSpinEditor"===w[n].fieldType?t=w[n].getValue():"chips"===w[n].fieldType?0===(t=w[n].value).length&&(t=""):t=T(w[n].valueToCommit,i),e.is(t)&&(o[n]=t)));return o},z=function(t,n){var i,o,r=function(e,t){var n=w[e];switch("defaultValue"===t&&(t=s.getAttributeInfo(e).DefaultValue),n.fieldType){case"checkbox":n.checkFlag=Boolean(t);break;case"select":n.selectedIndex=t;break;default:n.value=t}};L.setFieldsValue(X()),i=function(t){var n;if(e.is(L))return(n=t.findIndex(function(e){return L.isConditionMatch(e.condition)}))>-1?t[n]:void 0}(t),e.is(i)&&e.is(i.affectedAttributes)&&(o=i.affectedAttributes,Array.isArray(o)||(o=[o]),o.forEach(function(t){var i,o,a;e.is(w[t.fullName])&&(o=w[t.fullName],t.hide?(o.getContent().getParent().hide(),e.is(n)&&e.is(t.resetValue)&&r(t.fullName,t.newValue)):t.hide||(o.getContent().getParent().show(),e.is(t.updateAuthorizedListFrom)&&t.updateAuthorizedListFrom&&(i=s.getAttributeInfo(t.updateAuthorizedListFrom),a=e.is(n)?void 0:o.value,F(i,t.fullName,a)),e.is(n)&&e.is(t.resetValue)&&r(t.fullName,t.newValue)))}))},K=function(e,t){var n=e.events;Array.isArray(n)||(n=[n]),n.forEach(function(e){t.addEventListener(e.event,z.bind(null,e.conditions))})},Q=function(t,n){var i,o,r,a,s,l,u,c,d;for(e.is(t,"array")||(t=[t]),o=0;o<t.length;o++){switch(r=t[o],a=new e.Element("div",{class:"wux-field-container "+E}),new e.Element("h6",{class:"wux-textElement",text:r.label}).inject(a).tooltipInfos=new P({shortHelp:r.label}),s={name:r.name,value:r.value,mandatory:r.mandatory,disabled:r.disabled,fieldType:r.type,multiValue:r.multiValue,pattern:r.pattern},r.type){case"text":i=M(s);break;case"textarea":i=B(s);break;case"checkbox":i=O(s,r.attributeInfo.onChange);break;case"date":l={timePickerFlag:r.timePickerFlag||!1},e.extend(s,l),i=x(s);break;case"select":l={elementsList:r.options},e.extend(s,l),i=k(s,r.attributeInfo.onChange);break;case"autoComplete":l={elementsList:r.elementsList,allowFreeInputFlag:r.allowFreeInputFlag},e.extend(s,l),i=U(s);break;case"unitsEditor":l={magnitudeText:r.magnitudeText,multiValue:r.multiValue},e.extend(s,l),i=_(s);break;case"unitsSpinEditor":l={magnitudeText:r.magnitudeText},e.extend(s,l),i=W(s);break;case"richTextEditor":i=j(s);break;case"inclusiveLineEditor":s.unit=r.unit,s.stepValue=r.step,0===r.decimals&&!0===r.typingFilter?(s.decimals=0,s.typingFilter=!0):(s.decimals=6,s.typingFilter=!1),i=H(s);break;case"chips":i=G(s);break;default:i=M(s)}i.inject(a),a.inject(n),e.is(r.events)&&K(r,i)}for(o=0;o<t.length;o++)u=t[o],c=void 0,d=void 0,c=u.events,d=w[u.name].getContent().getParent().isHidden(),e.is(u.events)&&!d&&(Array.isArray(c)||(c=[c]),c.forEach(function(e){"change"===e.event&&z.call(null,e.conditions)}))},q=function(t,n){var i=r.getNLSValue(t),o=new e.Element("div",{class:"accordeon-section-container"}).inject(V);new v({items:[{header:"Wrong NLS key"!==i?i:t,content:n,expandedFlag:!0}],style:"filled-separate"}).inject(o)},J=function(t){var n,i,o,u,c,d,g,f=[],p=r.getNLSValue(A,null,"Type");for(e.is(t,"array")||(t=[t]),i=0;i<t.length;i++){if(n=t[i],o=e.is(n.attributeName)?n.attributeName:n.dicoType+"."+n.name,u=e.is(n.attributeInfo)?n.attributeInfo:s.getAttributeInfo(o),!e.is(u))return void(R=!0);d=a.getFullName(u),c=e.is(n.defaultValue)?n.defaultValue:e.is(l&&l[d])?l[d]:"PLMEntity.V_Name"===d&&A?p:a.getDefaultValue(u),g={name:a.getFullName(u),mandatory:n.mandatory,label:a.getNLS(u),attributeInfo:u,magnitudeText:a.getNLSForUnit(u),multiValue:u.MultiValuated,disabled:n.readOnly||a.isReadOnly(u),defaultValue:c},e.is(n.value)?c=n.value:e.is(n.objectToBeModified)&&(c=n.objectToBeModified.get(n.dataIndex),e.is(c)||(c=n.objectToBeModified.get(u.FullName),e.is(c)||(c=g.defaultValue))),a.isDate(u)&&(g.displayType="DateTime"===n.displayType?"datetime":"date"),a.isString(u)&&e.is(n.displayType)&&"richText"===n.displayType?g.displayType="richTextEditor":(a.isInteger(u)||a.isDouble(u))&&e.is(n.displayType)&&"inclusiveEditor"===n.displayType?g.displayType="inclusiveLineEditor":e.is(n.displayType)&&"UnitsSpinEditor"===n.displayType?g.displayType="UnitsSpinEditor":e.is(n.displayType)&&"chips"===n.displayType&&(g.displayType="chips",g.valueType=u.Type),g=N(g,c,u),e.is(n.events)&&(g.events=n.events),f.push(g)}return f},Y=function(t,n){var o,r,a=new u("div",{class:"section-container"});for(o in!1===n.headerAccordean?a.inject(V):t.name||(t.name=""),t)if(e.is(o))switch(o.toLowerCase()){case"name":q(t[o],a);break;case"attribute":if(r=J(t[o]),!e.is(r))return void i.debug("attributeInfo is not available");Q(r,a)}a.addEvent("resize",function(){var t,n,i,o;o=a.getElements(".wux-field-container"),(i=a.clientWidth)<290?(t="inline-container",n="block-container"):i>290&&"block-container"===E?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(o)&&o.forEach(function(e){e.removeClassName(t),e.addClassName(n)})})},Z=function(t){var n,o=t.sections;for(n in o)if(e.is(n))switch(n.toLowerCase()){case"section":e.is(o[n])&&(Array.isArray(o[n])?o[n].forEach(Y):Y(o[n],t));break;case"formstyle":e.is(o[n])&&("Vertical"===o[n]?E="block-container":"Horizontal"===o[n]&&(E="inline-container"))}!0===R&&(R=!1,i.debug(r.getNLSValue("InsertCmd.WarningConfiguration")))};return{createUI:function(t){t=t||{},V=new u("div",{class:"data-collection-form-UI"}),e.is(t.renderTo)?(e.is(t.type)&&(A=t.type.split("/")[1]||""),e.is(t.defaultValues)&&(l=t.defaultValues),Z(t),V.inject(t.renderTo)):i.debug("no parent container is present to inject the mainContainer")},getFormStyle:function(){return E},destroy:function(){e.is(V)&&V.destroy(),w={}},getValues:function(){return X()},getFieldValue:function(e,t){return T(e,t)},validate:function(){var t,n,i,o,a={result:!0,message:null,more:null},s=[],l=[];for(t in w)e.is(w[t])&&!w[t].getContent().getParent().isHidden()&&(o=r.getNLSValue(t),!0===w[t].requiredFlag&&""===w[t].value&&(a.result=!1,s.push(o)),e.is(w[t].pattern)&&(n=new RegExp(w[t].pattern),""===(i=e.is(w[t].valueToCommit)?w[t].valueToCommit:"")||n.test(i)||(l.push(o),a.result=!1)));return a.result||(s.length>0&&l.length>0?a.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.Multiple",{missingFields:s.join(","),invalidFields:l.join(",")}):s.length>0?a.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.ValueMissing",{fields:s.join(",")}):l.length>0&&(a.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidValue",{fields:l.join(",")}))),a},updateToDefaultValues:function(t){var n;for(n in w)e.is(w[n])&&e.is(t[n])&&(w[n].value=t[n])},updateAuthorizedList:function(e,t){F(e,t)}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/UrlColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/LockColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MultiAttrCellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/SequenceNoCellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MagnitudeDynamicAttrCellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManagerMFN","DS/DELPPWViewBehaviors/TreeListViewBehavior/RWU/RWUColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MCRColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MSOColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/DataCollectRowColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/ResourceParameterRowColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/HideShow3DColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/HideShowItems3DColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/BuildUp3DColumnManager","DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgCellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/RPColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/CoProduct/CoProductColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/BIEssentials/BIColumnManager"],function(e,t,n,i,o,r,a,s,l,u,c,d,g,f,p,h,m,I,v,b,y,P,C,D){"use strict";return function(S,R,V,A,w,L,E,M,N,T,B,O,x,F){var k,U,_,W,j,H,G,X,z,K=B.getGroupingAdditonalColumns(),Q=R.getBehavior("WUXNodeModelBehavior"),q=new h(R,M),J=new m(R,F),Y=new I(R,M,w),Z=new t(R,L,w,E,M,B),$=new n(R,L,w,E,M,B),ee=new i(w,B,M),te=new o(R,L,w,E,M,B),ne=new r(R,L),ie=new a(R,L,w,E,M,B),oe=new c(R,w,M,O,N),re=new b(R,L,w,M),ae=new s(R,M,B),se=new y(R,E,w,L,M),le=new P(R,E,w,L,M),ue=new C(R,E,L,B),ce=new g(R,L,w,E,M,B);return W=(W=(W=(W=(W=(W=(W=[]).concat(oe.getNonModelDataIndexes())).concat(q.getNonModelDataIndexes())).concat(J.getNonModelDataIndexes())).concat(Y.getNonModelDataIndexes())).concat(le.getNonModelDataIndexes())).concat(re.getNonModelDataIndexes()),k=function(t,n){let i,o,r=t,a=Object.values(K);n=n||{},Array.isArray(r)||(r=[r]);const s=R.getBehavior("CfgColumnsBehavior");if(e.is(s)){const e=s.computeVisibleConfigColDataIndices(r);s.setVisibleCfgColDataIndices(e),r=s.filterCFGColumnsBasedOnAvailability(r)}return i=!e.is(n.isViewGroupable,"boolean")||n.isViewGroupable,o=!e.is(n.isViewFilterable,"boolean")||n.isViewFilterable,r.map(function(t){var r,s,c,g,h,m,I=!1,b=!1,y=!1,P=!1,C=!1,S=!1,V=!1;if(r=E.getColumnInfos(t),Array.isArray(r.attribute)?(h=r.attribute[0].name,r.displayType=e.is(r.displayType)?r.displayType:"MultiType"):h=r.attribute.name,m=L.getAttributeInfo(h),e.is(m)&&(S=E.hasRangeDefined(m),C=E.isMultiValuated(m),V=E.hasMagnitude(m),b=E.isInteger(m),y=E.isDouble(m),P=E.isBoolean(m),I=E.isDate(m)),e.is(r.displayType)||($.isSupportedColumn(r.dataIndex)?r.displayType="URL":"reserved"===r.dataIndex?r.displayType="Lock":I&&!S&!C&&(r.displayType="Date")),g=!!i&&(!e.is(r.isGroupable)||r.isGroupable),c=!!o&&(!e.is(r.isFilterable)||r.isFilterable),s={sortableFlag:!0,groupableFlag:g,dataIndex:r.dataIndex,attribute:r.attribute,displayType:r.displayType,visibleFlag:!e.is(r.isHidden)||!r.isHidden,width:null===r.width||isNaN(r.width)?"auto":parseInt(r.width),minWidth:null===r.minWidth||isNaN(r.minWidth)?100:parseInt(r.minWidth),text:e.is(t.text)?t.text:E.getColumnDisplayValue(r),editionPolicy:"EditionOnClick",tooltipIndex:r.Tooltip,hasCellValue:Z.hasCellValue,getCellValue:Z.getCellValue.bind(Z,r),getCellValueForExport:Z.getCellValueForExport},a.indexOf(s.dataIndex)>-1&&(s.defaultGroupable=!0),e.is(r.displayType))switch(s.editableFlag=!1,r.displayType){case"FullOwnerURL":s.typeRepresentation="url",s.className=B.areModuleColumnsImmutable(R.getId())?"icon-text-column":"url-column",s.getCellValue=Z.getFullOwnerURL,s.command=B.areModuleColumnsImmutable(R.getId())?null:r.command,s.getCellValueForExport=Z.getURLCellValueForExport,s.getCellGroupingKey=function(t,n){var i,o=this.getColumnOrGroup(n);return e.is(o)&&(i=t.nodeModel.getAttributeValue(o.attribute.name)),i},c&&(s.filterInfos={type:"string",options:{allowRegexp:!0}});break;case"CustomString":s.typeRepresentation="string",s.getCellValue=Z.getCustomStringCellValue;break;case"ComputedValue":s.typeRepresentation="string",s.getCellValue=Z.getComputedCellValue,s.hasCellValue=Z.hasCellValue;break;case"URL":s=$.updateColumnInfos(s,r,n);break;case"Lock":s=ee.updateColumnInfos(s,r,n);break;case"IconText":s.typeRepresentation="url",s.className="icon-text-column",s.hasCellValue=function(){return!0},s.getCellValue=function(e){var t=e.nodeModel.options.grid;return{label:t[this.getColumnOrGroup(e.columnID).attribute.name],getLabel:function(){return this.label},icon:{iconPath:t.cellInfo.IconUrl,iconSize:{width:"22px",height:"22px"}}}};break;case"Relation":s.typeRepresentation="url",s.className=B.areModuleColumnsImmutable(R.getId())?"icon-text-column":"url-column",s.getCellValue=ae.getCellValue,s.hasCellValue=ae.hasCellValue,s.getCellValueForExport=ae.getCellValueForExport,s.getCellGroupingKey=ae.getCellGroupingKey,c&&(s.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:ae.getCellValueForFilter}});break;case"RichText":$.updateRichTextColumnInfos(s,r,n);break;case"DocMgmt":s.className=B.areModuleColumnsImmutable(R.getId())?"icon-text-column":"url-column",s.groupableFlag=!1,s.getCellValue=Z.getCellValueForDocMgt,s.getCellValueForExport=function(t){return e.is(t.cellModel,"array")&&t.cellModel.join(", "),e.is(t.cellModel)?t.cellModel.toString():""},c&&(s.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:Z.getDocMgtCellValueForFilter}});break;case"BIEssentials":case"BIEssentialsAltSub":s.typeRepresentation="color",s.className="biessentials",s.getCellValue=D.getCellValue,s.hasCellValue=D.hasCellValue,s.getCellValueForExport=D.getCellValueForExport,s.getCellGroupingKey=D.getCellGroupingKey,c&&(s.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:D.getCellValueForFilter}});break;case"MIL":s.editionPolicy="EditionInPlace",s.getCellTypeRepresentation=l.getCellTypeRepresentation,s.setCellValue=l.setMILValue.bind(null,r),s.getCellClassName=l.getCellClassName,s.getCellValue=l.getCellValue,s.getCellSemantics=l.getCellSemantics,s.hasCellValue=l.hasMILCellValue,s.getCellEditableState=l.getCellEditableState,s.groupableFlag=!1;break;case"RP_USAGE":s.editionPolicy="EditionInPlace",s.setCellValue=re.setRPValue.bind(null,r),s.typeRepresentation="enumString",s.getCellSemantics=re.getCellSemantics,s.hasCellValue=re.hasCellValue,s.getCellEditableState=re.getCellEditableState,s.editableFlag=!1,s.groupableFlag=!1;break;case"MANAGECAPABLERESOURCESMOD":s.editionPolicy="EditionOnClick",s.getCellTypeRepresentation=d.getCellTypeRepresentation,s.setCellValue=d.setValue.bind(null,r),s.getCellClassName=d.getCellClassName,s.getCellValue=d.getCellValue,s.getCellSemantics=d.getCellSemantics,s.hasCellValue=d.hasCellValue,s.getCellEditableState=d.getCellEditableState;break;case"MANAGESTEPOPERATIONSUI":s.editionPolicy="EditionOnClick",s.getCellTypeRepresentation=ce.getCellTypeRepresentation,s.setCellValue=ce.setValue.bind(null,r),s.getCellClassName=ce.getCellClassName,s.getCellValue=ce.getCellValue,s.getCellSemantics=ce.getCellSemantics,s.hasCellValue=ce.hasCellValue,s.getCellEditableState=ce.getCellEditableState;break;case"MANAGESTEPOPERATIONSUILinkAttr":s.setCellValue=ce.setLinkAttrValue.bind(null,r),s.getCellEditableState=ce.getCellEditableState,s.hasCellValue=ce.hasCellValue,s.typeRepresentation="number",s.getCellSemantics=Z.getMagnitudeSematics;break;case"DataCollectRow":s.getCellTypeRepresentation=f.getCellTypeRepresentation,s.getCellClassName=f.getCellClassName,s.getCellValue=f.getCellValue,s.getCellSemantics=f.getCellSemantics,s.hasCellValue=f.hasCellValue;break;case"ResourceParameterRow":s.getCellTypeRepresentation=p.getCellTypeRepresentation,s.getCellValue=p.getCellValue,s.getCellSemantics=p.getCellSemantics,s.hasCellValue=p.hasCellValue;break;case"CIM":s.editionPolicy="EditionInPlace",s.getCellTypeRepresentation=u.getCellTypeRepresentation,s.setCellValue=u.setMILValue.bind(null,r),s.getCellClassName=u.getCellClassName,s.getCellValue=u.getCellValue,s.getCellSemantics=u.getCellSemantics,s.hasCellValue=u.hasMILCellValue,s.getCellEditableState=u.getCellEditableState,s.groupableFlag=!1;break;case"RWU":s.editionPolicy="RWU_Replace"===r.dataIndex?null:"EditionInPlace",s.getCellTypeRepresentation=oe.getCellTypeRepresentation,s.setCellValue=oe.setRWUValue.bind(null,r),s.getCellClassName=oe.getCellClassName,s.getCellValue=oe.getCellValue,s.getCellSemantics=oe.getCellSemantics,s.hasCellValue=oe.hasRWUCellValue,s.getCellEditableState=oe.getCellEditableState,s.getCellGroupingKey=oe.getRWUGroupingKeyForURLColumn,s.groupableFlag=!1;break;case"MultiType":s.editionPolicy=S?"EditionInPlace":"EditionOnClick",s.getCellTypeRepresentation=te.getCellTypeRepresentation,s.groupableFlag=!1,s.getCellValue=te.getCellValue,s.getCellSemantics=te.getCellSemantics,s.hasCellValue=te.hasCellValue,s.setCellValue=Z.setValue,s.getCellEditableState=te.getCellEditableState,c&&(s.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:te.getCellValueForFilter}});break;case"MagnitudeDynamicAttr":s.editionPolicy=S?"EditionInPlace":"EditionOnClick",s.getCellTypeRepresentation=ie.getCellTypeRepresentation,s.groupableFlag=!1,s.getCellValue=ie.getCellValue,s.getCellSemantics=ie.getCellSemantics,s.hasCellValue=ie.hasCellValue,s.setCellValue=ie.setValue,s.getCellEditableState=ie.getCellEditableState,c&&(s.filterInfos={type:"number",options:{getCellValueForFilter:ie.getCellValueForFilter}});break;case"SequenceNo":s.groupableFlag=!1,s.getCellValue=ne.getCellValue,s.hasCellValue=ne.hasCellValue,c&&(s.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:ne.getCellValueForFilter}});break;case"isCoProduct":s.editionPolicy="EditionOnClick",s.editableFlag=!0,s.getCellTypeRepresentation=se.getCellTypeRepresentation,s.getCellValue=se.getCellValue,s.hasCellValue=se.hasCellValue,s.setCellValue=se.setCellValue,s.getCellGroupingKey=se.getCellGroupingKey,c&&(s.filterInfos={type:"boolean",options:{getCellValueForFilter:se.getCellValueForFilter}});break;case"isCompensation":s.editionPolicy="EditionOnClick",s.editableFlag=!0,s.getCellTypeRepresentation=le.getCellTypeRepresentation,s.getCellValue=le.getCellValue,s.hasCellValue=le.hasCellValue,s.setCellValue=le.setCellValue;break;case"CFG":s.groupableFlag=!1,s.getCellTypeRepresentation=v.getCellTypeRepresentation,s.getCellValue=v.getCellValue,s.hasCellValue=v.hasCellValue;break;case"OPTime":s.editableFlag=!1,s.groupableFlag=!1,s.getCellTypeRepresentation=ue.getCellTypeRepresentation,s.getCellValue=ue.getCellValue,s.hasCellValue=ue.hasCellValue,s.getCellSemantics=ue.getCellSemantics,s.getCellEditableState=ue.getCellEditableState,s.getCellValueForExport=ue.getCellValueForExport;break;case"Date":case"DateTime":s.editionPolicy="EditionInPlace",s.editableFlag=!E.isReadOnly(m),s.typeRepresentation="DateTime"===r.displayType?"datetime":"date",s.setCellValue=Z.setValue,s.getCellGroupingKey=Z.getDateCellGroupingKey,s.getCellValueForExport=function(e){var t="",n=e.cellModel,i="DateTime"===r.displayType;return e.rowID<0?t=n:n&&(t=E.getFormattedDate(n,i)),t},s.allowResetToUndefinedByUIFlag=!0,c&&(s.filterInfos={type:"date",options:{getCellValueForFilter:Z.getCellValueForFilter}});break;case"NonEditable":s.editableFlag=!1,P&&(s.typeRepresentation="boolean"),c&&(s.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:Z.getCellValueForFilter}})}else s.editableFlag=!E.isReadOnly(m),C?(s.typeRepresentation="string",S?s.editableFlag=!1:s.editionPolicy="EditionInPlace"):S?(s.allowResetToUndefinedByUIFlag=!0,s.hasRangeDefined=!0,s.editionPolicy="EditionInPlace",s.typeRepresentation=r.dataIndex.replaceAll(".",""),s.authorizedValues=E.getAuthorizedValuesNLSList(m),V&&(s.getCellSemantics=Z.getMagnitudeSematics)):V?(s.typeRepresentation="number",s.getCellSemantics=Z.getMagnitudeSematics):P?s.typeRepresentation="boolean":b?s.typeRepresentation="integer":y&&(s.typeRepresentation="float"),c&&(V||b||y?(s.filterInfos={type:"number",options:{getCellValueForFilter:Z.getCellValueForFilter}},S&&s.authorizedValues&&s.authorizedValues.every(function(e){return""===e||isNaN(e)})&&(s.filterInfos.type="string",s.filterInfos.options.allowRegexp=!0)):s.filterInfos=I?{type:"date",options:{getCellValueForFilter:Z.getCellValueForFilter}}:P?{type:"boolean"}:{type:"string",options:{allowRegexp:!0,getCellValueForFilter:Z.getCellValueForFilter}}),s.setCellValue=Z.setValue;return B.areModuleColumnsImmutable(R.getId())&&(s.editableFlag=!1),s})},U=function(t,n){var i,o,r,a,s,l,u,c,d;return n=n||{},s=!!e.is(n.isLabelOnlyColumn,"boolean")&&n.isLabelOnlyColumn,l=!e.is(n.isViewGroupable,"boolean")||n.isViewGroupable,u=!e.is(n.isViewFilterable,"boolean")||n.isViewFilterable,o=E.getLabelInfos(t.Label),a=e.is(o.minWidth)?o.minWidth:null,z=o.dataIndex,r=e.is(t)&&e.is(t.name)?M.getNLSValue("Column."+t.name):E.getColumnDisplayValue(o),c=!!l&&(!e.is(o.isGroupable)||o.isGroupable),d=!!u&&(!e.is(o.isFilterable)||o.isFilterable),(i={sortableFlag:!0,groupableFlag:c,text:r,dataIndex:"tree",width:e.is(a)?"auto":s?"100%":"30%",minWidth:e.is(a)?a:150,label:o.dataIndex,attribute:o.attribute}).editableFlag="NonEditable"!==t.Label.displayType,i.setCellValue=Z.setValue,B.areModuleColumnsImmutable(R.getId())&&(i.editableFlag=!1),d&&(i.filterInfos={type:"string",options:{allowRegexp:!0}}),i},j=function(t){var n,i,o,r=[],a=function(n){var i=t.find(function(e){return e.dataIndex===n});return e.is(i)};for(n in K)Object.prototype.hasOwnProperty.call(K,n)&&(a((o={dataIndex:K[n],name:K[n]}).dataIndex)||((i={sortableFlag:!1,editableFlag:!1,groupableFlag:!0,defaultGroupable:!0,dataIndex:o.dataIndex,attribute:o,visibleFlag:!1,width:"auto",minWidth:100,editionPolicy:"EditionOnClick",hasCellValue:function(e){return!Q.isFakeNodeModel(e.nodeModel)},getCellValue:Z.getGroupingColumnCellValue,getCellGroupingKey:Z.getGroupingColumnKey}).text=E.getColumnDisplayValue(i),r.push(i)));return r},H=function(){var e;return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,visibleFlag:!1,dataIndex:(e={dataIndex:"hide_show_3D",name:"hide_show_3D"}).dataIndex,attribute:e,displayType:"hideShow3D",editionPolicy:"EditionInPlace",typeRepresentation:"visibility",alignment:"center",text:"",width:30,icon:M.getIconURLFromKey("3DColumnIcon"),hasCellValue:q.hasCellValue,getCellValue:q.getCellValue,setCellValue:q.setCellValue}},G=function(){var e;return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,visibleFlag:!1,dataIndex:(e={dataIndex:"hide_show_items_3D",name:"hide_show_items_3D"}).dataIndex,attribute:e,displayType:"hideShowItems3D",editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",alignment:"center",text:"",width:30,icon:M.getIconURLFromKey("3DColumnIcon"),hasCellValue:J.hasCellValue,getCellValue:J.getCellValue,getCellSemantics:J.getCellSemantics}},X=function(){var e;return{sortableFlag:!1,editableFlag:!1,isDraggable:!1,isExportable:!1,groupableFlag:!1,visibleFlag:!1,dataIndex:(e={dataIndex:"hide_show_BuildUp_3D",name:"hide_show_BuildUp_3D"}).dataIndex,attribute:e,displayType:"hideShowBuildUp3D",editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",alignment:"center",text:"",width:30,icon:M.getIconURLFromKey("3DBuildUpColumnIcon"),hasCellValue:Y.hasCellValue,getCellValue:Y.getCellValue,getCellSemantics:Y.getCellSemantics}},{getBlockAttributes:function(t){var n,i,o,r={boAttrName:[],roAttrName:[],otherAttrName:[]},a=!1,s=e.is(t.Columns)?t.Columns.Column:[];return o=function(e,t){switch(t){case"reference":-1===r.boAttrName.indexOf(e)&&r.boAttrName.push(e);break;case"instance":-1===r.roAttrName.indexOf(e)&&r.roAttrName.push(e);break;default:-1===r.otherAttrName.indexOf(e)&&r.otherAttrName.push(e)}},e.is(t.Label)&&(i=E.getLabelInfos(t.Label),Array.isArray(i.attribute)?i.attribute.forEach(function(e){o(e.name,e.entity)}):o(i.attribute.name,i.attribute.entity)),(s=Array.isArray(s)?s:[s]).forEach(function(e){var t=E.getColumnInfos(e);Array.isArray(t.attribute)?t.attribute.forEach(function(e){o(e.name,e.entity)}):"instance"===t.attribute.entity||"reference"===t.attribute.entity?o(t.attribute.name,t.attribute.entity):"Relation"===t.displayType&&(a=!0)}),a&&(n=T.getAllRelationDisplayAttributes(),e.is(n)&&(Array.isArray(n.bo)&&n.bo.forEach(function(e){o(e,"reference")}),Array.isArray(n.relation)&&n.relation.forEach(function(e){o(e,"instance")}))),r},setReusablecontent:function(t){var n=function(n,i){var o,r={forceDBMode:!0,onComplete:function(){e.is(o)&&e.is(o.objectToBeModified)&&(o.objectToBeModified.setAdditionalInfo({isFetched:!0}),E.doesAttributeExist(o.objectToBeModified,o.attributeName)||E.isAttrApplicableForType(o.objectToBeModified,o.attributeName)||-1===W.indexOf(o.attributeName)&&R.warn(M.getNLSValue("TableView.AvailabilityFailure",{key:o.attributeNLSTitle}))),e.is(i)&&e.is(i.cellView)&&t.updateRenderedRow(i.rowID,{updateCellContent:!0})}};n.preventDefault(),n.stopPropagation(),i&&(o=E.getNodeAndColumnInfos(i.nodeModel,i.cellView.collectionView.getColumnOrGroup(i.columnID)),!e.is(o.objectToBeModified)||E.doesAttributeExist(o.objectToBeModified,o.attributeName)||o.objectToBeModified.getAdditionalInfo("isFetched")||("instance"===o.instOrRef?w.fetchInstance({PID:o.objectToBeModified.id},r):w.fetchRoot(o.objectToBeModified.id,r)))};A||(t.addEventListener("show",function(e,t){R.debug("onEventShow fired"),n(e,t)}),t.addEventListener("activeCellChange",function(t){const i=t.dsModel,o=i.getActiveCellID();if(o>=0&&i.isCellInEdition(o)){let r=i.getCellInfosAt(o);e.is(r)&&r.rowID>=0&&r.columnID>=0&&e.is(r.nodeModel)&&e.is(r.nodeModel.getReferencePID)&&(e.is(r.cellView)||(r.cellView={collectionView:i}),n(t,r))}R.debug("activeCellChange fired")}))},getColumnDataIndexByDisplayType:function(t,n){var i,o,r,a=[];if(e.is(n))for(o=t.columns.length,i=1;i<o;i++)r=t.columns[i],e.is(r)&&e.owns(r,"dataIndex")&&e.owns(r,"displayType")&&r.displayType===n&&(Array.isArray(r.attribute)?r.attribute.forEach(function(e){a.push(e.name)}):a.push(r.attribute.name));return a},getColumnAttributesByEntity:function(t,n){var i,o,r,a,s,l={},u=!!e.is(n,"boolean")&&n;if(s=function(t,n){e.is(t)&&(e.is(l[t])?l[t].push(n):l[t]=[n])},u||!e.is(_)){for(r=t.columns.length,i=1;i<r;i++)a=t.columns[i],o=!e.is(a.isExportable)||a.isExportable,e.is(a)&&e.owns(a,"dataIndex")&&o&&(u&&a.isHidden||e.owns(a,"attribute")&&(Array.isArray(a.attribute)?a.attribute.forEach(function(t){e.is(t.entity)&&s(t.entity,t.name)}):s(a.attribute.entity,a.attribute.name)));u||(_=l)}else l=_;return l},getLabelAttributesByEntity:function(t){var n,i,o={};return i=function(t,n){e.is(t)&&(e.is(o[t])?o[t].push(n):o[t]=[n])},n=t.getColumnOrGroup("tree"),e.is(n)&&(Array.isArray(n.attribute)?n.attribute.forEach(function(t){e.is(t.entity)&&i(t.entity,t.name)}):i(n.attribute.entity,n.attribute.name)),o},createTreeListViewColumns:function(t,n,i,o,r,a){var s,l,u,c,d=[];return u={isViewGroupable:!e.is(t.isViewGroupable,"boolean")||t.isViewGroupable,isViewFilterable:!e.is(t.isViewFilterable,"boolean")||t.isViewFilterable,isViewEditable:!e.is(t.isViewEditable,"boolean")||t.isViewEditable},t.Columns&&t.Columns.Column&&(d=k(t.Columns.Column,u)),t.Label&&(c=e.extend(u,{isLabelOnlyColumn:0===d.length}),(s=U(t,c)).isExportable=!1,d.splice(0,0,s)),Array.isArray(V)&&(l=d.filter(function(e){return V.includes(e.dataIndex)})).length>0&&(d=d.filter(function(e){return!V.includes(e.dataIndex)}),l.length>0&&d.unshift.apply(d,l)),e.is(t.addDefaultGroupingColumns,"boolean")&&!0===t.addDefaultGroupingColumns&&(d=d.concat(j(d))),e.is(o)&&!0===o&&d.splice(0,0,H()),e.is(r)&&!0===r&&d.splice(0,0,G()),e.is(a)&&!0===a&&x.isCloud()&&d.splice(0,0,X()),{columns:d,labelIsOnRef:e.is(t.Label)?s.labelIsOnRef:null,label:e.is(t.Label)?s.label:null}},manageColumn:function(t,n,i){i&&(e.is(i.visible)&&(!0===i.visible?t.showColumn(n):t.hideColumn(n)),e.is(i.disabled)&&t.layout.setColumnOrGroupProperties(n,{disabled:i.disabled}))},getLabelColumnDataIndex:function(){return z}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXGenericLinksDragDrop",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(e,t){"use strict";return function(e,n,i,o,r,a,s,l){var u,c=new t(e,n,i,o,r,a,s,l),d=c.init;return c.init=function(e){u=e||{},d.call(this,u)},c.onDragEndCell=function(e,t){return!1},c.onDragEnterRowHeader=function(e,t){return!1},c.onDragLeaveRowHeader=function(e,t){return!1},c.onDragEnterColumnHeader=function(e,t){return!1},c.onDragLeaveColumnHeader=function(e,t){return!1},c.onDragEnterCell=function(e,t){return!1},c.onDragLeaveCell=function(e,t){return!1},c.onDragOverCell=function(e,t){return!1},c.onDragEnterBlank=function(e,t){return!1},c.onDragLeaveBlank=function(e,t){return!1},c.onDropCell=function(e,t){return n.warn(i.getNLSValue("AbstractDragAndDropManager.NotAuthorized")),!1},c.onDropBlank=function(e,t){return n.warn(i.getNLSValue("AbstractDragAndDropManager.NotAuthorized")),!1},c}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/StructuralGroupingImplementation",["UWA/Core","DS/DELPPWViewBehaviors/GroupingViewBehavior/AbstractGroupingClass"],function(e,t){"use strict";return function(n,i){var o,r,a,s,l,u,c=new t,d=n.getBehavior("TreeListViewBehavior"),g=n.getBehavior("WUXNodeModelBehavior");n.getBehavior("SelectionBehavior");return o=function(e,t){var n=t;!function e(t){var o=t.getInstancePID()||t.getReferencePID();Object.keys(n).filter(function(e){return n[e].parent===o}).forEach(function(o){var r,a,s,l=n[o],u=n[o].groupingValue;s=l.children.map(function(e){return i.getInstance(e)}),r=o.split("|")[1],(a=g.addGroupingNode(r,t,s,u)).hasChildren()&&a.getChildren().forEach(function(t){e(t)})})}(e)},r=function(e,t,n){var i;d.loadDocument(g.getWUXNodeModel()),g.addNode(t,{onAddToTreeListFail:function(){},onAddToTreeListComplete:function(){},fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1,filterQuery:n}),i=g.getNodeModel(t.get("PID"),!0),o(i,e),g.expandAllRoots()},a=function(t,n){var i={};return t.forEach(function(t){var o=n(t);e.is(i[o])?i[o].push(t):i[o]=[t]}),i},l=function(e,t,n,o,r,s){var l,u,c,d,g,f=e,p=f,h=[];!function e(t,n){i.getFilteredInstancesFromCollection(t,s).forEach(function(t){n.push(t),g=i.getReferenceIdFromInstance(t.get("PID")),e(g,n)})}(f,h),h.length>0&&(l=a(h,o),Object.keys(l).forEach(function(e){c=l[e][0],u=p+"|"+r(c)+" ("+l[e].length+")",d=[],l[e].forEach(function(e){d.push(e.get("PID"))}),t[u]={parent:n?f:void 0,children:d,groupingValue:e}}))},s=function e(t,n,o,r,s,l){var u,c,d,g,f,p,h=t,m=h;o||(h=i.getReferenceIdFromInstance(t),m=p=t),(d=i.getFilteredInstancesFromCollection(h,l)).length>0&&(u=a(d,r),Object.keys(u).forEach(function(e){g=u[e][0],c=m+"|"+s(g)+" ("+u[e].length+")",f=[],u[e].forEach(function(e){f.push(e.get("PID"))}),n[c]={parent:o?h:p,children:f,groupingValue:e}}),d.forEach(function(t){e(t.get("PID"),n,!1,r,s)}))},u=function(t,o,a,u){var c={},d=n.getBehavior("GroupingViewBehavior");e.is(d)&&d.isFlatView()?l(t,c,!0,o,a,u):s(t,c,!0,o,a,u),r(c,i.getReferenceModel(t))},e.extend(c,{group:function(t,i,o,r){var a;a=g.getWUXNodeModel(),e.is(a)&&a.removeRoots(),d.loadDocument(a),e.is(o)?u(o,t,i,r):n.debug("GroupingViewBehavior._groupingPID is not set")},ungroup:function(){}})}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI","text!DS/DELPPWViewBehaviors/assets/json/TypeMapping.json","text!DS/DELPPWViewBehaviors/assets/json/CreateFormAttributeEvents.json"],function(e,t,n,i){"use strict";return function(o,r,a,s,l,u,c){var d,g,f,p=null,h=null,m=null,I=null,v=null,b=null,y=null,P=null,C={},D=null,S=null,R=!1,V=!1,A=e.Json.decode(i),w=new e.Element("div",{class:"Form-Sections-Container"}),L=a.getComponent("ComboBox"),E=a.getComponent("Accordeon"),M=a.getComponent("TooltipModel"),N=e.Json.decode(n),T=function(t){var n;m=t.dsModel.currentValue,n=p.concat("/",m),d.type=n,P.destroy(),e.is(D)&&D.destroy(),null===S&&k(),U(function(e){_(e)}),d.onTypeChange(m,w)},B=function(e){h=e.dsModel.currentValue,S.destroy(),S=null,T(e)},O=function(e){v=e.dsModel.currentValue},x=function(e){e.sort(function(e,t){return e.label.localeCompare(t.label,widget.lang,{numeric:!0})})},F=function(t){var n,i,o=[];return n={elementsList:o=t.elementsList.map(function(e){return{labelItem:e.label,valueItem:e.value}}),actionOnClickFlag:!1,enableSearchFlag:!1},e.is(t.selected)&&(n.selectedIndex=o.findIndex(function(e){return e.valueItem===t.selected})),(i=new L(n)).fieldType=t.fieldType,C[t.name]=i,e.is(t.onChange,"function")&&i.addEventListener("change",t.onChange),i},k=function(){var t=function(){var t,n,i,r,a,l,u,d,g,p,I,b,P,C={},D=[];e.is(y,"object")&&e.owns(y,m)&&(C=y[m]),p=function(t){let n={},i=[];if(e.is(C,"object")&&e.owns(C,"Type")&&(n=function(t,n){let i;return Array.isArray(t.Type)&&(i=t.Type.find(function(e){return e.name===n})),e.is(i)?i:{}}(C,t)),e.is(n,"object")&&(e.owns(n,"visibility")&&"true"===n.visibility||!e.owns(n,"visibility"))){g=c.getTypeInfo(t);let n=s.getNLSValue(t);c.isAKindOf(t,"Resource")?(e.owns(g,"isOOTB")&&"false"===g.isOOTB||e.owns(g,"Newable")&&function(e){let t=e.toUpperCase();return["NEW","ALL"].some(e=>t.includes(e))}(g.Newable))&&i.push({value:t,label:n!==t?n:s.getNLSValue(t,null,"Type")}):i.push({value:t,label:n!==t?n:s.getNLSValue(t,null,"Type")})}return i},D=D.concat(p(m)),e.is(h)&&h!==m?(D=D.concat(p(h)),d=c.getTypeHierarchy(h)):d=c.getTypeHierarchy(m),e.is(d,"array")&&d.forEach(function(e){e!==m&&(D=D.concat(p(e)))}),x(D),u=new e.Element("div",{class:"section-container"}),t=new e.Element("div",{class:"wux-field-container inline-container"}).inject(u),r=new e.Element("div",{class:"wux-field-container inline-container"}).inject(u),i=new e.Element("h6",{class:"wux-type-textElement",text:s.getNLSValue("General.Type")}).inject(t),n=F({name:"V_Type",elementsList:D,fieldType:"select",selected:m,onChange:T}),i.tooltipInfos=new M({shortHelp:s.getNLSValue("General.Type")}),n.inject(t),l=new e.Element("h6",{class:"wux-type-textElement",text:s.getNLSValue("General.Credentials")}).inject(r),a=function(){var t=o.getService("ConfigService").getSecurityContext(),n=t.getAllSC(),i=o.getConfig().isFacet&&!t.getSCFromPreferences().includes("ctx::")?"ctx::"+t.getSCFromPreferences():t.getSCFromPreferences(),r=new L({elementsList:n.map(function(e){return{labelItem:e.label,valueItem:e.value}}),actionOnClickFlag:!1,enableSearchFlag:!1,selectedIndex:n.findIndex(function(e){return e.value===i})});return v=i,e.is(O,"function")&&r.addEventListener("change",O),r}(),l.tooltipInfos=new M({shortHelp:s.getNLSValue("General.Credentials")}),a.inject(r),I="Section.General",b=u,P=new e.Element("div",{class:"Type-Section-Container"}).inject(w),new E({items:[{header:s.getNLSValue(I)?s.getNLSValue(I):I,content:b,expandedFlag:!0}],style:"filled-separate"}).inject(P),b.addEvent("resize",function(){var t,n,i,o;o=b.getElements(".wux-field-container"),(i=b.clientWidth)<290?(t="inline-container",n="block-container"):i>290&&"block-container"===f?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(o)&&o.forEach(function(e){e.removeClassName(t),e.addClassName(n)})}),S=P};if(e.is(y))t();else{const n=o.getConfig().resource.ItemOOTBFiltering;e.is(n)?l.getXMLValues(n,function(n){e.owns(N,r.getId())&&(y=n.convert("Config.Preferences."+N[r.getId()].section+".OOTBType","name")),t()},function(e){V=!0,r.debug("failed to get ItemOOTBFiltering XML. Error Desc: "+e)}):(r.debug("Cannot export as ItemOOTBFilteringXML path is not provided"),t())}},U=function(t){var n=function(){var n,i,o=b[m]||{},r=e.clone(A[m]);e.owns(o,"Section")||(o.Section={},o.Section.name=s.getNLSValue("Section.Attributes"),o.Section.Attribute=[{dicoType:"PLMEntity",name:"V_Name",mandatory:!0},{dicoType:"PLMEntity",name:"V_description"}]),["ProcessContinuousProvide","ProcessContinuousCreateMaterial","ContinuousByProduct","DELContinuousServicePartReference","MBOMContinuousPhaseReference","MBOMContinuousInProcessItem"].indexOf(m)>=0&&(n=c.getAttributeInfo("V_DimensionType"),e.is(n)&&((n=e.clone(n)).UIAccess="",n.NLS=s.getNLSValue("Attribute.DELFmiMagnitudeExt.V_DimensionType"),Array.isArray(n.AuthorizedValues)&&(i=n.AuthorizedValues.find(function(e){return"MASS"===e.Name}),e.is(i)&&(n.DefaultValue=i.NLS)),u.addAttributeInfo({[n.FullName]:n}))),Array.isArray(o.Section)||(o.Section=[o.Section]),o.Section.forEach(function(t,n){t.Attribute.forEach(t=>{e.is(r)&&e.is(r[t.name])&&(t.events=r[t.name])}),e.is(g)&&!0===g&&(o.Section[n].Attribute=o.Section[n].Attribute.filter(function(e){return"instance"!==e.entity}))}),t(o)};e.is(b)?n():l.getXMLValues(o.getConfig().resource.insertFormAttributeXML,function(e){b=e.convert("AttributesDescriptionList.Type","name"),n()},function(e){R=!0,r.debug("failed to get insertFormAttribute XML. Error Desc: "+e)})},_=function(n){P=new t(o,r,a,s,u,c),D=new e.Element("div",{class:"Form-container"}),P.createUI({sections:n,type:d.type,renderTo:D,defaultValues:I}),D.inject(w),f=P.getFormStyle()},W=function(){return R||V};return{createUI:function(t){d=t||{},e.is(d.type)&&e.is(d.renderTo)&&(R=!1,V=!1,m=d.type.split("/")[1]||"",p=d.type.split("/")[0],e.is(d.defaultValues)&&(I=d.defaultValues[0]),e.is(d.createRoot)&&(g=d.createRoot),U(function(t){var n,i,o,r;e.is(d.baseTypes)&&(r=d.baseTypes.map(function(e){return{value:e,label:s.getNLSValue(e,null,"Type")}}),x(r),n=new e.Element("div",{class:"top-container inline-container"}).inject(w),i=new e.Element("h6",{class:"wux-type-textElement",text:s.getNLSValue("Base.Type")}).inject(n),o=F({name:"V_BaseType",elementsList:r,fieldType:"select",selected:d.selectedBaseType,onChange:B}),i.tooltipInfos=new M({shortHelp:s.getNLSValue("Base.Type")}),o.inject(n),h=d.selectedBaseType),k(),_(t)}),W()&&e.is(d.onFailure,"function")&&d.onFailure({invalidXML:!0}),w.inject(d.renderTo))},destroy:function(){e.is(P)&&P.destroy(),e.is(D)&&D.destroy(),e.is(w)&&w.destroy()},getValues:function(){var t,n={};return e.owns(C,"V_Type")&&(C.V_Type.currentValue?(n.V_Type=p.concat("/",C.V_Type.currentValue),n.type=m):(n.V_Type=C.V_Type,n.type=m),e.is(null)&&(n["DELFmiMagnitudeExt.V_DimensionType"]=null)),t=P.getValues(),e.extend(t,n),t},getSecurityContextOverride:function(){return v},validate:function(){return W()?{result:!1,message:s.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidXML")}:P?P.validate():{result:!0,message:null}},updateToDefaultValues:function(e){P&&P.updateToDefaultValues(e)},getAuthorizedValue:function(e,t){var n=null;return P&&(n=P.getFieldValue(e,t)),n}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/UXFactoryBehavior",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl","DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementedRevChooserUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/MfgItemCreateReportUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog","DS/DELPPWViewBehaviors/UXFactoryBehavior/MessageDialog"],function(e,t,n,i,o,r,a,s,l){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","WebServicePlugin","AttributePlugin","DicoPlugin","DatabasePlugin","SelectionPlugin","ProductImplementPlugin","ProcessImplementPlugin","PlatformPlugin"],creator:function(u,c,d,g,f,p,h,m,I,v,b,y){var P=function(e,t){var n=[null].concat(t),i=d.getComponent(e);return new(Function.prototype.bind.apply(i,n))};return{onStart:function(){},onStop:function(){},getComponent:function(e){return d.getComponent(e)},showConfirmation:function(e,t,n,i,o){new s(this,o).show(e,t,n,i)},showMessage:function(e,t){new l(this,c).show(e,t)},showWithMessage:function(e,t,n){new l(this,c).showWithMessage(e,t,n)},createElement:function(){var e=Array.prototype.slice.call(arguments);return P("Element",e)},create:function(s,l){var b,C,D,S,R,V=[],A=Array.prototype.slice.call(arguments,1);switch(s){case"Panel":R=this.getComponent("WUXDockAreaEnum"),(b=new(d.getComponent("Panel"))(l)).allowedDockAreas=R.LeftDockArea|R.RightDockArea;break;case"Tree":b=new(d.getComponent("Tree"))({height:"inherit",width:"100%",apiVersion:2,selection:{toggle:!1,canMultiSelect:!1},styles:{height:"100%",width:"100%"}});break;case"Dialog":D=d.getComponent("WUXFrameWindowsManager").getFrameWindow(c.getAppContext()),C={position:{my:"center",at:"center"},immersiveFrame:u.getConfig().isFacet?u.getConfig().immersiveFrame:D.getImmersiveFrame()},e.extend(l,C),(b=new(d.getComponent("CustomDialog"))(l)).addEventListener("contextmenu",function(e){e.preventDefault()}),e.is(b.buttons.Ok)?b.buttons.Ok._giveFocus():b.buttons.Cancel&&b.buttons.Cancel._giveFocus(),b.addEventListener("keypress",function(e){"Enter"===e.key&&(b.buttons.Ok&&!b.buttons.Ok.disabled&&b.buttons.Ok._isFocused()?b.buttons.Ok.onClick():b.buttons.Cancel&&!b.buttons.Cancel.disabled&&b.buttons.Cancel._isFocused()&&b.buttons.Cancel.onClick())});break;case"Filter":(Array.isArray(l.filterToolbarSections)?l.filterToolbarSections:["PART","PRODUCT","SERVICE","PROCESS","SYSTEM","RESOURCE","ORGANIZATION","PARENT"]).forEach(function(e){"PARENT"===e?V.push({item:e,iconElemName:"CreateInstance",isSelected:!1}):V.push({item:e,iconElemName:e,isSelected:!0})}),S=V.reduce(function(t,n){var i=g.getNLSValue("PPRTYPE."+n.item),o=g.getIconElem(n.iconElemName),r=!!e.is(n.isSelected,"boolean")&&n.isSelected;return t[n.item]={text:i,tooltipText:i,title:o,pinned:r},t},{}),b=new(d.getComponent("Segmented"))({multiSelect:!0,data:S});break;case"SelectionControl":(b=new n(u,c,d,g,h,m)).createUI(l);break;case"FormUI":(b=new t(u,c,d,g,p,h)).createUI(l);break;case"DataCollectionUI":(b=new i(u,c,d,g,f,p,h)).createUI(l);break;case"ImplementUI":(b=new o(u,c,this,g,m,I,v)).createUI(l);break;case"ImplementedRevChooserUI":(b=new r(u,c,this,g,m,y,I)).createUI(l);break;case"MfgItemCreateReportUI":(b=new a(u,c,this,g,m,d)).displayReport(l);break;default:b=P(s,A)}return b}}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/DesignAlternateRetriever",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors/AltSubBehavior/AltSubInfoContainer"],function(e,t,n){"use strict";return function(i){var o,r,a,s,l,u,c=()=>!0,d=()=>!1,g=c,f=d,p=d,h=d,m=d;return a=function(e,n,i){return new t(function(t,o){var r=[];e.forEach(function(e){n(e)&&r.push(e)}),r.length>0?i(r,t,o):t()})},s=function(e){return a(e,function(e){return!i.isReference(e)},function(e,t,n){i.fetchRoot(e,{forceDBMode:!0,silent:!0,onComplete:t,onFailure:n})})},l=function(e){return a(e,function(e){return!i.isInstance(e)},function(e,t,n){i.fetchInstancesAndTheirReferences(e,{onComplete:t,onFailure:n})})},u=function(i){let o=n.empty(),r=n.empty(),a=n.empty();return new t(function(n){let u=[],c=new Set,d=new Set;i.forEach(function(t){const n=t.id,i=t.qualificationStatus;if(e.is(i)&&g(i)){const e=t.operation;p()&&e.includes("Substitute")&&("ReferenceSubstitute"===e?h(t.parentContextId)&&(r.addId(n).setInfo(n,t),d.add(t.parentContextId)):"InstanceSubstitute"===e&&m(t.instanceContextId)&&(a.addId(n).setInfo(n,t),c.add(t.instanceContextId))),f()&&"Alternate"===e&&o.addId(n).setInfo(n,t)}}),u=[s(d),l(c)],t.all(u).then(function(){n({alternates:o,referenceSubstitutes:r,instanceSubstitutes:a})})})},{of:function(e){return o=e,this},ofBL:function(e){return r=e,this},withStatus:function(e){return g=e,this},withAlternates:function(){return f=c,this},withoutSubstitutes:function(){return p=d,this},withReferenceSubstitutes:function(e){return h=e,p=c,this},withInstanceSubstitutes:function(e){return m=e,p=c,this},retrieve:function(){return i.getAlternateEnggItemPromise(o).then(function(e){return u(e)})},retrieveThroughBL:function(){return i.getEngAlternatesFromBLPromise(r).then(function(e){return u(e)})}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors/AltSubBehavior/DesignAlternateRetriever","DS/DELPPWViewBehaviors/AltSubBehavior/AltSubInfoContainer"],function(e,t,n,i){"use strict";return{plugins:["DatabasePlugin","ProductImplementPlugin","ResourcePlugin"],creator:function(o,r,a,s,l){var u,c,d,g,f,p,h,m,I,v,b,y,P,C,D={RESULTING_PRODUCT:"ResultingProduct",SCOPE:"Scope",IMPLEMENT:"Implement"};return u=function(e){return function(t){var n=null;return e.alternates.infoMap.has(t)?n=e.alternates.infoMap.get(t):e.referenceSubstitutes.infoMap.has(t)?n=e.referenceSubstitutes.infoMap.get(t):e.instanceSubstitutes.infoMap.has(t)&&(n=e.instanceSubstitutes.infoMap.get(t)),n}},c=function(e){return new t(function(t,n){var i=[];e.forEach(function(e){a.isReference(e)||i.push(e)}),i.length>0?a.fetchRoot(i,{forceDBMode:!0,silent:!0,onComplete:t,onFailure:n}):t()})},d=function(n){return new t(function(t,i){var o=n.Results,r=[],s=new Set,l=function(t,n,i){return{productId:t,linkTypeNavigated:e.is(n,"string")?n:null,mfgId:e.is(i,"string")?i:null}};Array.isArray(o)?(o.forEach(function(e){var t,n,i,o=e.PrdID,u=e.mfgItems;s.add(o),Array.isArray(u)&&u.length>0&&(n=(t=a.groupingBy(u,function(e){return e.linkType},function(e){return e.mfgItemIds})).has(D.RESULTING_PRODUCT)?t.get(D.RESULTING_PRODUCT).length:0,i=t.has(D.SCOPE)?t.get(D.SCOPE).length:0,0===n&&0===i?r.push(l(o)):t.forEach(function(e,t){e.forEach(function(e){s.add(e),r.push(l(o,t,e))})}))}),c(s).then(function(){t(r)})):i('Server response of "/mfgItemsFromDesignAlternates" is not as expected')})},g=function(i){var o=i.contextProductRefId,r=a.getInstance(i.contextProductInstId),s=i.contextLinkNavigated;return new t(function(t,i){var l,u,c=new n(a);e.is(o)?(s===D.RESULTING_PRODUCT||s===D.SCOPE?u=c.of(o).withStatus(function(e){return"Obsolete"!==e}).withAlternates().withoutSubstitutes().retrieve():e.is(r)?(l=r.get("isAggregatedBy"),u=c.of(o).withStatus(function(e){return"Obsolete"!==e}).withAlternates().withReferenceSubstitutes(function(e){return l===e}).withInstanceSubstitutes(function(e){return e===r.get("PID")}).retrieve()):i("No Context product Instance is found"),u.then(t)):i("No context product found")})},f=function(e){return new n(a).ofBL(e).withStatus(()=>!0).withAlternates().withReferenceSubstitutes(()=>!0).withInstanceSubstitutes(()=>!0).retrieveThroughBL()},p=function(n,i,o,r,s){return a.getMfgItemsFromDesignAlternatesPromise(n,i,o).then(d).then(function(n){return new t(t=>{t(n.filter(function(t){let n=!0;return e.is(t.mfgId)&&(n=s(t.mfgId)),n}).map(function(e){return{...e,altSubInfo:u(r)(e.productId)}}))})})},h=function(){return t.resolve([])},m=function(e,t,n){var i,o=e.alternates.ids,r=e.referenceSubstitutes.ids,a=e.instanceSubstitutes.ids,s=t.contextLinkNavigated;return s===D.IMPLEMENT&&(s=D.SCOPE),i=o.concat(r).concat(a),{contextProductRefId:t.contextProductRefId,designAlternateIds:i,contextLinkNavigated:s,altSubInfoObj:e}},I=function(){return{contextLinkNavigated:D.IMPLEMENT,contextProductRefId:null}},v=function(n,o,r){const a=g(r).then(function(e){return m(e,r)}),s=f(n).then(function(e){return m(e,r)});return t.all([a,s]).then(function(n){const o=(t=>{let n={contextProductRefId:null,designAlternateIds:[],contextLinkNavigated:null,altSubInfoObj:{alternates:i.empty(),referenceSubstitutes:i.empty(),instanceSubstitutes:i.empty()}};for(const i of t)n.contextProductRefId=e.is(i.contextProductRefId)?i.contextProductRefId:null,n.designAlternateIds=n.designAlternateIds.concat(i.designAlternateIds),n.contextLinkNavigated=e.is(i.contextLinkNavigated)?i.contextLinkNavigated:null,n.altSubInfoObj.alternates=n.altSubInfoObj.alternates.combine(i.altSubInfoObj.alternates),n.altSubInfoObj.referenceSubstitutes=n.altSubInfoObj.referenceSubstitutes.combine(i.altSubInfoObj.referenceSubstitutes),n.altSubInfoObj.instanceSubstitutes=n.altSubInfoObj.instanceSubstitutes.combine(i.altSubInfoObj.instanceSubstitutes);return n})(n);return t.resolve(o)}).then(function(e){const{contextProductRefId:t,designAlternateIds:n,contextLinkNavigated:i,altSubInfoObj:r}=e;return p(t,n,i,r,o)})},b=function(e,t){return f(e).then(function(e){return m(e,I())}).then(function(e){const{contextProductRefId:n,designAlternateIds:i,contextLinkNavigated:o,altSubInfoObj:r}=e;let a;return a=i.length>0?p(n,i,o,r,t):h()})},y=function(t){return function(n){var i,o=e.is(n.mfgId)?n.mfgId:null,r=n.productId,s=n.altSubInfo,u={referenceModel:null,isContextProduct:r===t,status:null,engRelTypeNLS:null,engRelType:null,substituteContextModel:null},c={referenceModel:null,mfgRelTypeNLS:null,mfgRelType:null};return u.referenceModel=a.getReference(r),e.is(o)&&(c.referenceModel=a.getReference(o),c.mfgRelTypeNLS=l.getNLSValue("AltSub.Link."+n.linkTypeNavigated),c.mfgRelType=n.linkTypeNavigated),e.is(s)?(e.is(s.qualificationStatus)&&(u.status=l.getNLSValue("AltSub.Status."+s.qualificationStatus)),i=s.operation,e.is(i)&&(u.engRelTypeNLS=l.getNLSValue("AltSub."+i),u.engRelType=i,"ReferenceSubstitute"===i?u.substituteContextModel=a.getReference(s.parentContextId):"InstanceSubstitute"===i&&(u.substituteContextModel=a.getInstance(s.instanceContextId)))):(u.status="",u.engRelTypeNLS=""),{eng:u,mfg:c}}},P=function(t,n,i,o){var r={};return r.mfgReferenceId=t,r.results=e.is(n)?n:null,r.contextProductModel={reference:e.is(i)&&e.is(i.referenceModel)?i.referenceModel:null,instance:e.is(i)&&e.is(i.instanceModel)?i.instanceModel:null},r.contextLinkNavigated=e.is(o)?o:null,r},C=function(e){return P(e,null,null,null)},{onStart:function(e){},onStop:function(){},getEnggAlternatesAndMfgs:function(n,i,o,s){const l=e=>e!==n,u=function(n,i,o){if(n.length>0){let r=o.contextLinkNavigated;r===D.IMPLEMENT&&(r=D.SCOPE);const s=y(o.contextProductRefId),l=n.map(s),u=a.getReference(o.contextProductRefId),c=e.is(o.contextProductInstId)?a.getInstance(o.contextProductInstId):null;return t.resolve(P(i,l,{referenceModel:u,instanceModel:c},r))}return t.resolve(C(i))};let c={};r.notify("startProgress",c),a.getAltSubContextProductPromise(n,i).then(function(t){let i;return i=e.is(t)?v(o,l,t).then(e=>u(e,n,t)):b(o,l).then(e=>u(e,n,I()))}).then(function(e){r.notify("stopProgress",c),s(e)}).catch(function(e){r.notify("stopProgress",c),r.log("Error : "+e),s({})})},getLinkTypeEnum:function(){return D}}}}}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightTreeHelper",["UWA/Core","DS/DELPPWViewBehaviors/BulkTreeSearchHelper"],function(e,t){"use strict";return function(n,i,o){var r=i.getWUXNodeModel(),a=new t(r,o);return{getNodeModels:function(e,t){return a.getNodeModels(e,t)},searchPathsPartially:function(e){return a.searchPathsPartially(e)},highlightNodes:function(e){var t;Array.isArray(e)&&e.length>0&&(t=a.getLastVisibleNodeModels(e)).length>0&&(r.prepareUpdate(),t.forEach(function(e){e.highlight()}),r.pushUpdate())},unHighlightAll:function(){var e=r.getHighlightedNodes();Array.isArray(e)&&e.length>0&&(r.prepareUpdate(),e.forEach(function(e){e.unhighlight()}),r.pushUpdate())},unSelectAll:function(){r.unselectAll()},getSelectedNodeIds:function(){return i.getSelectedNodesInfo().map(function(e){return e.absPath.length>0?e.absPath:e.id})},fetchAllNearestDescendantsHavingImplLink:function(t){var i,o,r,s,l,u,c={nearestDescendants:[],descendantLinkMap:Object.create(null)},d=function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.forEach(function(e){l.push(e)})};if((i=a.getNodeModels([t],!0)).found.length>0&&(o=i.found[0]),e.is(o))for(l=[],d(o);l.length>0;)s=(r=l.pop()).getAbsolutePath(),u=n.getImplementLinks(s),Array.isArray(u)&&u.length>0?(c.nearestDescendants.push(s),c.descendantLinkMap[s.toString()]=u):d(r);return c}}}}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightBehavior",["UWA/Core","DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightLinkHelper","DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightTreeHelper"],function(e,t,n){"use strict";return{plugins:["DatabasePlugin","SelectionPlugin","ProductImplementPlugin","PlatformPlugin","InterWidgetComPlugin"],creator:function(i,o,r,a,s,l,u){var c,d,g,f,p,h,m,I,v,b,y,P,C,D,S,R,V,A,w,L,E,M,N,T,B,O,x,F,k,U,_,W,j,H={rootSelection:!1,implementingSelection:!0,implementedSelection:!!l.isDescHighlightFromEBOMEnabled()};return b=function(t,n){t.forEach(function(t){var i={changed:{isSelected:!e.is(n,"boolean")||n,absPath:t}};o.notify("highlightIn3D",i)})},y=function(){var t=o.getBehavior("Viewer3DBehavior");e.is(t)&&t.unSelectAll3D()},P=function(t,n){var i,o,r,a=!e.is(n)||n,s=[],l=[],u={found:[],notFound:[]};return t.forEach(function(e){Array.isArray(e)?l.push(e):s.push(e)}),s.length>0&&((o=(i=m.getNodeModels(s,!1)).found).length>0&&(r=o.map(function(e){return e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath()}),u.found=u.found.concat(r)),a||(u.notFound=u.notFound.concat(i.notFound))),l.length>0&&(i=m.searchPathsPartially(l),u.found=u.found.concat(i.found),a||(u.notFound=u.notFound.concat(i.notFound))),u},C=function(){g=Object.create(null)},D=function(e,t){g[e.toString()]=t},S=function(e){const t=g[e.toString()];return delete g[e.toString()],t},R=function(){return Object.keys(g).reduce(function(e,t){return e.concat(g[t])},[])},V=function(e,t){a.setNodeIdsToHighlight(e,t)},A=function(e){a.removeFromHighlightMap(e)},w=function(e){var t,n,i=e.toString();t=a.getNodeIdsToHighlight(e),Array.isArray(t)&&(n=P(t).found,g[i]=n)},L=function(t,n,i){var o,a,l,u,c,d=i||{},g=!!e.is(d.isRoot,"boolean")&&d.isRoot,f=!!e.is(d.onlyRefRefOfInstance,"boolean")&&d.onlyRefRefOfInstance,h=!!e.is(d.prioritizeImplementLink,"boolean")&&d.prioritizeImplementLink,m=!!e.is(d.hasImplementLinks,"boolean")&&d.hasImplementLinks,b=null,y=[],P={},C=function(t){var n=null,i=r.getInstance(t);return e.is(i)&&(n=i.get("isInstanceOf")),n};return a=g?t:f?o=C(t):t,h&&(P.excludeRelationTypes=[I,v]),e.is(a)&&(P.excludeTimeConstraintType=!0,y=r.getImpacted(a,!0,P),r.getImpacted(a,!1,{relationTypes:["DELAsmProcessCanUseCnx"]}).forEach(function(e){var t=r.getImpacted(e.get("PID"),!0,{relationTypes:["SecondaryCandidateResourceLink"]});y=y.concat(t)}),r.getImpacted(a,!1,{relationTypes:["SecondaryCandidateResourceLink"]}).forEach(function(t){var n=r.getConnection(t.get("from"));e.is(n)&&(y.push(n.get("to")),y.push(n.get("from")))}),h&&!g&&(e.is(o)||(o=C(t)),e.is(o)&&(p?(l=s.getScopeLinksOfImplemented(o),f||(b=s.getImplLinksOfImplementing(n),m=!!(Array.isArray(b)&&b.length>0)),u="from"):(l=s.getScopeLinksOfImplementing(o),b=s.getImplLinksOfImplementing(n),m=!!(Array.isArray(b)&&b.length>0),u="to"),(c=(l.length>0&&m?b||[]:m?b||[]:l).map(function(e){return e.get(u)})).length>0&&(y=y.concat(c))))),y},E=function(t,n){var i=n||{},o=e.is(i.implementingImplementedAbsPathCache)?i.implementingImplementedAbsPathCache:null,r=e.is(i.scopedParentNodeAbsPathOrRefId)?i.scopedParentNodeAbsPathOrRefId:null,a=null;return e.is(r)||(r=h.getParentScoped(t)),e.is(r)&&(e.is(o)&&(a=o[r.toString()]),e.is(a)||(a=h.getScopedNodePrdAbsolutePath(r),e.is(o)&&(o[r.toString()]=a))),a},M=function(e,t,n){var i,o=null;return i=E(e,n),Array.isArray(i)&&(o=i.length>0?i.concat(t):t),o},N=function(e,t){var n,i,o,r=Object.create(null);return e.length>0&&(o=h.getParentScoped(e[0]),i={implementingImplementedAbsPathCache:r,scopedParentNodeAbsPathOrRefId:o},n=e.reduce(function(e,n,o,r){var a,s,l;return a=t[n.toString()],Array.isArray(a)&&a.length>0&&1===a.length&&(s=a[0].get("to")),Array.isArray(s)&&(l=r[o],e.push(M(l,s,i))),e},[])),r=null,n},T=function(e){var t;return e.length>0&&(t=e.reduce(function(e,t){var n;return n=h.getImplementingItemInstIDs(t),e.concat(n)},[])),t},B=function(t,n){var i,o=p;return f?i=N(t,n):o&&(i=T(t)),e.is(i)?i:[]},O=function(t,n,i){var o=i||{},r=p,a=f,l=!!e.is(o.supportRootSelection,"boolean")&&o.supportRootSelection,u=!!e.is(o.supportImplementingSelection,"boolean")&&o.supportImplementingSelection,c=!!e.is(o.supportImplementedSelection,"boolean")&&o.supportImplementedSelection,d=[],g=t?n:null,I=t?[]:n,v=function(e){var t,n,i,o;return n=(t=m.fetchAllNearestDescendantsHavingImplLink(e)).nearestDescendants,i=t.descendantLinkMap,n.length>0&&(o=B(n,i)),Array.isArray(o)?o:[]},b=function(t){!1===h.isImplemented(t)&&e.is(h.getParentScoped(t))&&(d=v(t))};return t?l&&!0===s.isScoped(g)&&(d=v(g)):a?u&&b(I):r&&c&&b(I),d},x=function(t,n,i){var o,r,a,s,l,u,c,d=i||{},g=p,m=f,I=!!e.is(d.enableDescendantHighlight,"boolean")&&d.enableDescendantHighlight,v=!!e.is(d.supportRootSelection,"boolean")&&d.supportRootSelection,b=!!e.is(d.supportImplementingSelection,"boolean")&&d.supportImplementingSelection,y=!!e.is(d.supportImplementedSelection,"boolean")&&d.supportImplementedSelection,P=!1,C=null;if(0===n.length?c={isRoot:P=!0}:g?(C=h.getImplementingItemInstIDs(n),c={onlyRefRefOfInstance:!0,hasImplementLinks:!!(Array.isArray(C)&&C.length>0),prioritizeImplementLink:!0}):m&&(c={prioritizeImplementLink:!0}),o=L(t,n,c),!P)if(g)Array.isArray(C)&&C.length>0&&(o=o.concat(C));else if(m)for(a=0,l=o.length;a<l;a++)s=o[a],Array.isArray(s)&&(u=M(n,s),e.is(u)&&(o[a]=u));return I&&(r=O(P,P?t:n,{supportRootSelection:v,supportImplementingSelection:b,supportImplementedSelection:y}),o=o.concat(r)),o},k=function(e,t){var n,i,o,r;o=(n=P(e,!1)).found,r=n.notFound,i=t.length>0?t:e,D(i,o),V(i,r),m.highlightNodes(i)},F=function(e,t,n){var i,o,r,a,s,l,u,c=p;i=x(e,t,{enableDescendantHighlight:d,supportRootSelection:H.rootSelection,supportImplementingSelection:H.implementingSelection,supportImplementedSelection:H.implementedSelection}),a=(o=P(i,!1)).found,s=o.notFound,r=t.length>0?t:e,D(r,a),V(r,s),l=R(),m.highlightNodes(l),u=l,c&&(u=u.concat(m.getSelectedNodeIds())),u.length>0&&!1!==n&&b(u)},U=function(e,t){var n,i=p,o=[],r=[];e?w(t):r=S(t),0===(n=R()).length&&m.unHighlightAll(),m.highlightNodes(n),o=n,!e&&i&&(o=o.concat(m.getSelectedNodeIds())),r.length>0&&(o=r),o.length>0&&u.isOpsViewerWidgetLinked()&&b(o,e)},_=function(e,t){var n,i,o=p;A(e),S(e),n=R(),m.highlightNodes(n),i=n,o&&(i=i.concat(m.getSelectedNodeIds())),i.length>0&&!1===t&&b(i)},W=function(e){m.unHighlightAll(),U(!0,e)},j=function(){C()},{listenTo:function(){return{updateCrossHighlight:W,refreshAll:j}},onStart:function(a){var l;I=s.getScopeLinkType(),v=s.getImplementLinkType(),d=I.indexOf("ProductImplementLink")>-1,c=!!e.is(a.enableCrossHighlight)&&a.enableCrossHighlight,f=e.is(a.implementing)?a.implementing:null,(p=e.is(a.implemented)?a.implemented:null)||f?!0!==p||!0!==f?(l=o.getBehavior("WUXNodeModelBehavior"),e.is(l)?(h=new t(i.getLogger(),f,s,r),m=new n(h,l,r),C()):o.debug("WUXNodeModelBehavior is not available")):o.debug("Wrong configuration for Cross-highlight in the module: "+o.getId()):o.debug('Cross-highlight needs "implemented" && "implementing" entries in Module Configuration')},onStop:function(){g=null},crossHighlight:function(t,n,i,r){c&&(e.is(t)?i?F(t,n,r):(m.unHighlightAll(),!1!==r&&y(),_(n.length>0?n:t)):o.debug("nodeId is not defined to crossHighlight"))},crossHighlightFrom3DViewer:function(t,n,i){c&&(e.is(t)?i?k(t,n):(m.unHighlightAll(),_(n.length>0?n:t,!1)):o.debug("nodeId is not defined to crossHighlight"))},crossHighlightImpacted:function(e,t,n){c&&U(n,t.length>0?t:e)},crossHighlightUnselectAndUnhighlightNodes:function(e,t,n){c&&(!0===n?m.unSelectAll():m.unHighlightAll())},reHighlightMyView:function(){var e;g&&Object.keys(g).length>0&&(m.unHighlightAll(),e=R(),m.highlightNodes(e))},updateCrossHighlightForSelf:function(e){var t,n,i;c&&(Array.isArray(e)?n=(t=e)[t.length-1]:(t=[],n=e),y(),F(n,t),i=[t.length>0?t:n],o.notify("updateCrossHighlight",i))},setFullDescendantHighlight:function(e){d=e,H.rootSelection=e,H.implementedSelection=e,H.implementingSelection=e},getImpactedOfImplementing:function(t,n){var i,o,r=e.is(n)?n:null,a=!1,s=null;return d&&!0===H.implementingSelection&&t.toString()in g&&(a=!0),a?s=g[t]:(f&&(Array.isArray(t)?o=(i=t)[i.length-1]:(i=[],o=t),s=x(o,i,{enableDescendantHighlight:!0,supportImplementingSelection:!0})),p&&Array.isArray(r)&&(s=P(r).found)),s}}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/ProcurementGroupingImplementation",["DS/DELPPWViewBehaviors/GroupingViewBehavior/AbstractGroupingClass","UWA/Core"],function(e,t){"use strict";return function(n,i,o,r){var a,s,l,u=n.getBehavior("TreeListViewBehavior"),c=n.getBehavior("WUXNodeModelBehavior"),d=(n.getBehavior("SelectionBehavior"),function(e,n){var i=function(){},o=function(){};u.loadDocument(c.getWUXNodeModel()),c.addNode(n,{onAddToTreeListFail:i,onAddToTreeListComplete:o,fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1}),t.is(e,"array")&&e.length>0?e.forEach(function(e){c.addNode(e,{onAddToTreeListFail:i,onAddToTreeListComplete:o,fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1})}):(function(e,t){var n=t;!function e(t){var i=t.getInstancePID()||t.getReferencePID();Object.keys(n).filter(function(e){return n[e].parent===i}).forEach(function(n){var i,o,r;i=n.split("|")[1],o=n.split("|")[2],(r=c.addGroupingNode(i,t,null,!0,o)).hasChildren()&&r.getChildren().forEach(function(t){e(t)})})}(e)}(c.getNodeModel(n.get("PID"),!0),e),c.expandAllRoots())}),g=function(e){var t,n=!1,i="",o=!1,r=Object.keys(e);if(e.length>0&&(n=!0),r.length>0)for(t=0;t<r.length;t++)Number.isNaN(Number.parseInt(r[t]))&&(o=!0);return n&&o||!n&&!o?i="error":n?i="array":o&&(i="json"),i},f=function(e){var t=null,n=null;return l=e,o.isReference(l)?t=o.getAllChildrenFromCollection(l):(n=o.getReferenceIdFromInstance(l),t=o.getAllChildrenFromCollection(n)),o.getReferencesFromArray(t.referencesPID)},p=function(e,n){var i;return l=e,i=f(e),s=function e(n,i,o){var r,a,s,l={};if(t.is(n))t.is(n,"array")&&0!==n.length?(n.forEach(function(e){var n=e.get(i);t.is(l[i+":"+n])?l[i+":"+n].push(e):l[i+":"+n]=[e]}),n=l):Object.keys(n).forEach(function(t){var r="";t.contains(":")&&(r=t.split(":")[0]),"root"!==t&&r!==i&&(n[t]=e(n[t],i,o))});else for((n={}).root=o[0],r=1;r<o.length;r++)a=(s=o[r]).get(i),t.is(n[i+":"+a])?n[i+":"+a].push(s):n[i+":"+a]=[s];return n}(s,n,i)},h=function(e,n,i,r,a){var s,l,u,c,d,g,f=[],p=e,h=p;o.traverseInstanceModels(p,function(e){if(t.is(a)){let n=e.getAdditionalInfo("filterQuery");t.is(n)&&t.equals(n,a)&&f.push(e)}else f.push(e)}),f.length>0&&(s=function(e,n){var i={};return e.forEach(function(e){var o=n(e);t.is(i[o])?i[o].push(e):i[o]=[e]}),i}(f,i),Object.keys(s).forEach(function(e){u=s[e][0],d=r(u).split("|")[0],g=r(u).split("|")[1],l=h+"|"+d+" ("+s[e].length+")|"+g,c=[],s[e].forEach(function(e){c.push(e.get("PID"))}),n[l]={parent:p,children:c}}))};return a=new e,t.extend(a,{group:function(e,i,r,a){var s;s=c.getWUXNodeModel(),t.is(s)&&s.removeRoots(),u.loadDocument(s),t.is(r)?function(e,t,n,i){var r={};h(e,r,t,n,i),d(r,o.getReferenceModel(e))}(r,e,i,a):n.debug("GroupingViewBehavior._groupingPID is not set")},ungroup:function(){},groupByAttribute:function(e,t){return p(e,t)},ungroupByAttribute:function(e){return function e(n,i){var o=[];return i&&"json"===g(i)&&Object.keys(i).forEach(function(r){var a,s="";"root"!==r&&(r.contains(":")&&(s=r.split(":")[0]),s===n?"array"===g(i[r])?(o=o.concat(i[r]),delete i[r]):"json"===g(i[r])?(a=i[r],Object.keys(a).forEach(function(e){t.is(o[e])?("array"===g(a[e])&&(o[e]=o[e].concat(a[e])),Number.isNaN(Number.parseInt(e))&&(o[e]=t.merge(o[e],a[e]))):o[e]=a[e]}),delete i[r]):console.error("ProcurementGroupingImplementation : wrong structure"):o[r]=e(n,i[r]))}),Object.keys(o).length>0&&(t.is(i)&&t.is(i.root)&&(o.root=i.root),i=o),i}(e,s)},updateDatagrid:function(e){t.is(e)&&"MBOM"===e.sourceId&&this.group()}})}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/GroupingViewBehavior",["UWA/Core","DS/CoreEvents/Events","DS/DELPPWViewBehaviors/GroupingViewBehavior/GroupingDialog","DS/DELPPWViewBehaviors/GroupingViewBehavior/ProcurementGroupingImplementation","DS/DELPPWViewBehaviors/GroupingViewBehavior/StructuralGroupingImplementation"],function(e,t,n,i,o){"use strict";return{plugins:["UXComponentsPlugin","DatabasePlugin","ResourcePlugin","TreeViewPlugin","RootsPlugin"],creator:function(r,a,s,l,u,c,d){var g,f,p,h,m,I,v,b,y,P,C,D,S=null,R=[],V=[],A=null,w=!1,L=["V_description.reference","PLMEntity.V_Name","V_NeedDedicatedSystem.reference","V_TargetReleaseDate.reference"],E=function(){const t=a.getBehavior("SelectionBehavior");let n=null;if(e.is(t)){const[,i]=t.getSelectionsWithPaths();if(e.is(i)){const t=function({id:t,path:n}){let i;if(0===n.length)i=t;else{const t=function(e){return e.length>0?e[0]:null}(n);if(e.is(t)){const n=l.getInstance(t);e.is(n)&&(i=n.get("isAggregatedBy"))}}return i}(i[0]),o=d.getRootFilter(t);if(e.is(o)){const t=o.originalFilterQuery;n=e.is(t)?t:null}}}return n},M=function(){var t,n,i,o,r,s=a.getBehavior("WUXNodeModelBehavior"),u=a.getBehavior("TreeListViewBehavior"),d=a.getBehavior("SelectionBehavior"),g=c.getViewColumnPreferences(a.getId(),"MBOM.columnConfigPath"),f="";A=null,c.resetColumnsForGrouping(a.getId()),i=s.getWUXNodeModel(),e.is(i)&&i.removeRoots(),f+='{"label":{"filterId": "set"}',g.Columns.Column.forEach(function(e){f=f+',"'+e.dataIndex+'":{"filterId": "set"}'}),f+="}",i.setFilterModel(e.Json.decode(f)),u.loadDocument(i),n=d.getSelections(),o=e.is(n[2])?n[2].length:0,r=e.is(n[1])?n[1].length:0;let p=E();o>0&&r>0||r>1?a.notify("MultipleOrNoObjectSelected","multipleObjects"):0===r?a.notify("MultipleOrNoObjectSelected","noObject"):e.is(I)&&1===r&&(t=l.getReferenceModel(I),s.addNode(t,{onAddToTreeListFail:function(){},onAddToTreeListComplete:function(){s.expandAllRoots()},filterQuery:p}),a.notify("OneObjectSelected"))},N=function(e){"multipleObjects"===e?m.showErrorMessage(u.getNLSValue("Error.MultipleObjectsSelected")):m.showErrorMessage(u.getNLSValue("Error.NoObjectSelected"))},T=function(){m.showDatagrid()},B=function(){return e.is(A)},O=function(t,n){var i,o,r;let s=E();P=n?{dataIndex:"PLMEntity.V_Name.reference",title:u.getNLSValue("Column.Manufacturing")}:e.is(t)?t:e.is(A)?A:null,(e.is(P)||n)&&(i=function(e){var t,n,i=null;return 2!==(t=e.split(".")).length&&3!==t.length||(n=t[t.length-1],["reference","instance"].includes(n)&&(i={attributeName:3===t.length?t[0]+"."+t[1]:t[t.length-2],modelType:n})),i}(P.dataIndex),e.is(i)&&(o=function(e){var t="reference"===i.modelType?l.getReferenceModelFromInstance(e):e;return n?t.get("PID"):t.get(i.attributeName)},r=function(t){var o,r,s="reference"===i.modelType?l.getReferenceModelFromInstance(t):t,c=i.attributeName;return"PID"!==c&&"physicalid"!==c||(c="reference"===i.modelType?"PLMEntity.V_Name":"PLMInstance.PLM_ExternalID"),e.is(S)||(S=a.getBehavior("ModelBehavior")),r=s.get(c),o=u.getNLSValue(r)||r,e.is(o)&&""!==o||(o="N/A"),n?o+"|"+s.get("type"):P.title+": "+o},v?p.group(o,r,I,s):h.group(o,r,I,s),n||(A=P),a.notify("GroupingApplied")))},x=function(e){let t=E();var n=a.getBehavior("WUXNodeModelBehavior");e?(D=n.getRoots(),n.getFlattenNodeModel(n.getRoots(),e,t)):(n.emptyNodeModel(),n.getFlattenNodeModel(D,e,t)),B()&&O(null,!1)};return{listenTo:function(){return{activateProcurementGrouping:this.toggleProcurementGrouping,activateFlattenView:this.toggleFlattenView}},onStart:function(){p=new i(a,r,l,u),h=new o(a,l,u),R.push(r.addExternalListener("select",function(e){e.sourceId!==a.getId()&&M()})),R.push(r.addExternalListener("OneObjectSelected",T)),R.push(r.addExternalListener("MultipleOrNoObjectSelected",N)),v=!1,c.registerModuleForRecursiveGrouping(a.getId()),y=r.getPlugins("DatabasePlugin").instance,(b=a.getBehavior("WUXNodeModelBehavior").getTreeDocument()).options.shouldAcceptDrag=function(t){var n=e.is(t)?t:{},i=y.getPPRType(n.getReferencePID());return!!e.is(i)},b.options.shouldAcceptDrop=function(t){var n=e.is(t.dropNode)?t.dropNode:{},i=!1,o=y.getPPRType(n.getReferencePID());return"middle"===t.dropPosition&&(i=!e.is(o)),i}},onStop:function(){var e;for(e=0;e<R.length;e++)r.removeExternalListener(R[e]);for(R=[],e=0;e<V.length;e++)t.unsubscribe(V[e]);V=[],v=!1,c.resetColumnsForGrouping(a.getId()),c.unRegisterModuleForRecursiveGrouping(a.getId()),A=null},toggleProcurementGrouping:function(e){(v=e)?(x(!0),this.group(null,!0),B()&&this.group(null,!1)):(x(!1),B()&&this.group(null,!1))},toggleFlattenView:function(e){this.isFlatView(e),x(e)},showAttributeSelectionDialog:function(e){var t=a.getBehavior("UXFactoryBehavior");new n(a,t,s).show(e)},groupByAttribute:function(e,t){i.groupByAttribute(e,t)},group:function(e,t){O(e,t)},clearGrouping:function(){M(),w?this.toggleFlattenView(!0):v&&this.toggleProcurementGrouping(!0),a.notify("GroupingRemoved")},deleteFilters:function(){w=!1},displayView:function(e){switch(e){case"procView":p.group();break;case"structureView":h.group();break;default:M()}},setDatagridView:function(e){m=e},setGroupingPID:function(e){I=e},modifyAttribute:function(t){var n,i,o,s,c,d,p={onFailure:function(){},onSuccess:function(){x(!0===w),t.onComplete()}},h={forceDBMode:!0,onComplete:function(){S.updateModelAttribute(t[0].referencePID,s,i,p)}};if(L.indexOf(P.dataIndex)>-1)if(e.is(S)||(S=a.getBehavior("ModelBehavior")),e.is(f)||(f=a.getBehavior("WUXNodeModelBehavior")),e.is(C)||(C=r.getPlugins("AttributePlugin").instance),e.is(g)||(g=a.getBehavior("TreeListViewBehavior")),n=f.getNodeModel(t[0].target,1),i=n.grouping,o=g.getDataGridView().getColumnOrGroup(P.colId),s=C.getNodeAndColumnInfos(n,o),n=f.getNodeModel(t[0].target,1),i=n.grouping,s.objectToBeModified=S.getReferenceModel(t[0].referencePID),c=P.dataIndex.split(".")[0],w){switch(P.dataIndex){case"V_NeedDedicatedSystem.reference":i=C.getAuthorizedValue(s.attributeInfo,s.attributeDef,i)}e.is(s.objectToBeModified.get(c))?S.updateModelAttribute(s.objectToBeModified.id,s,i,p):l.fetchRoot(s.objectToBeModified.id,h)}else f.getNodeModel(t[0].referencePID,1).getParent().getBrothers().forEach(function(e){e._id===n._id&&(d=!0)}),d?e.is(s.objectToBeModified.get(c))?S.updateModelAttribute(s.objectToBeModified.id,s,i,p):l.fetchRoot(s.objectToBeModified.id,h):a.warn(u.getNLSValue("GroupingModule.View.DndNOTPossible"));else a.warn(u.getNLSValue("GroupingModule.View.NotEditable"))},isFlatView:function(t){if(!e.is(t,"boolean"))return w;w=t}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXActionDragDrop",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(e,t){"use strict";return function(n,i,o,r,a,s,l,u){var c,d=new t(n,i,o,r,a,s,l,u),g=d.init;return d.init=function(e){c=e||{},g.call(this,e)},d.checkType=function(e){return!1!==this.isAcceptedType(e)},d.processRootDrop=function(t,n,a,s,l,u,d,g){var f,p,h,m,I,v,b,y=this,P=i.getBehavior("SelectionBehavior"),C=i.getBehavior("ModelBehavior"),D=i.getBehavior("LinkBehavior"),S=i.getBehavior("TreeListViewBehavior"),R=o.getNLSValue(i.getId()),V=o.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:R}),A=c.linkTypes[0];if(!e.is(P)||!e.is(C)||!e.is(D))return i.debug("WUXActionDragDrop: Required behaviors are missing."),void g("AbstractDragAndDropManager.InternalError");f=i.log(V),I=function(t){var n,o=i.getBehavior("WUXNodeModelBehavior");return n=e.is(o)?o.validate(t):n},b=function(t,n){var r,a,s,l={},u=e.is(S)?S.getLabelAttribute():"PLMEntity.V_Name";y.checkType(n)?(s=I(n),e.is(s)?(l[s.param]=s.paramValue,r=o.getNLSValue(s.key,l,"ValidationError"),i.warn(r,f,"failed"),g()):(a=o.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{objectName:n.get(u),view:R}),i.log(a,f,"completed"),D.createConnection([{type:A,IDFrom:t.get("PID"),IDTo:n.get("PID"),fromSideRefPID:t.get("PID"),toSideRefPID:n.get("PID")}]),d())):(r=o.getNLSValue("AbstractDragAndDropManager.NotValidType"),i.warn(r,f,"failed"),g("AbstractDragAndDropManager.NotValidType"))},h=P.getSelections(),p=e.is(h[1],"array")?h[1][0]:null,e.is(p)?(v=C.getReferenceModel(p),(m=C.getReference(t))?v.get("PID")===m.get("PID")?(i.warn(o.getNLSValue("AbstractDragAndDropManager.SameObject"),f,"failed"),g()):b(v,m):m=r.fetchRoot(t,{onComplete:function(t){e.is(t)?(b(v,t),i.debug("WUXActionDragDrop:Succesfully fetched reference : %o",t)):(i.warn(o.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),f,"failed"),g("AbstractDragAndDropManager.RootNotInDB"))},onFailure:function(){i.debug("Failed to fetch Reference for PID: "+t),i.warn(o.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),f,"failed"),g("AbstractDragAndDropManager.RootNotInDB")},context:this,silent:!0})):(i.warn(o.getNLSValue("AbstractDragAndDropManager.NoMBOMSelected"),f,"failed"),g())},d.onTreeListViewDrop=function(t,n){var i=this,o={action:[],parameters:[]},r=i.getDragNDropInfo(t,n);e.is(r)&&e.is(r.draggedItems,"array")&&(r.draggedItems.forEach(function(e,t){o.action[t]="addRoot",o.parameters[t]={rootReferencePID:i.getDraggedReferencePID(e)}}),this.processDropEffect(o))},d.onDropBlank=function(e,t){return this.onTreeListViewDrop(e,t)},d}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/TreeListViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXActionDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXGenericLinksDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXManageCapableRscDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/WUXResourceParameterRowDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/DataGridViewManager"],function(e,t,n,i,o,r,a,s,l,u,c,d,g){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ProductImplementPlugin","ProcessImplementPlugin","PlatformPlugin","SelectionPlugin","InterWidgetComPlugin","Operations3DViewerPlugin"],creator:function(f,p,h,m,I,v,b,y,P,C,D,S,R,V,A,w,L,E){var M,N,T,B,O,x,F,k,U,_,W,j,H,G,X,z,K,Q,q,J,Y,Z,$,ee,te,ne,ie,oe,re,ae,se,le,ue,ce,de={},ge=new u(p,I,y,R,V,h,A),fe=new c(p,I,P),pe=m.getComponent("DataGridView"),he=m.getComponent("Menu"),me=new d(p,C,h,I,v,b),Ie={placeholder:"",apiVersion:2,showSelectionCheckBoxesFlag:!0,rowSelection:"multiple",cellSelection:"none",showRowIndexFlag:!1,defaultColumnDef:{sortableFlag:!0,editionPolicy:"EditionOnDoubleClick",typeRepresentation:"string"},isEditable:!1,selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",rowGroupingOptions:{depth:0,hideGroupedColumns:!1,getGroupingNodeLabel:function(t){var n,i,o,r,a,s=this.getTreeDocument();const l=S.getGroupingAdditonalColumns();return e.is(t)&&s.isGroupingNodeModel(t)&&(o=t.getProperty(),n=this.getColumnOrGroup(o),r=t.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount,a=t.getIdentifier(),o===l.Reference&&(a=(a=s.getNodeModelFromGroupingNode(t)).getLabel()),i=n.text+": "+a+" ("+r+")"),i}},getCellTooltip:function(t){var n,i,o,r,a=this.getColumnOrGroup(t.columnID),s={longHelp:""},l=[],u=b.getAttributeInfoFromColumn(a),c=v.getAttributeInfo(u.attributeName),d=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader&&e.is(t.nodeModel)&&!e.is(t.nodeModel.getReferencePID))return s;switch(!e.is(a.displayType)&&e.is(u)&&b.isMultiValuated(c)&&(a.displayType="Multivalue"),a.displayType){case"URL":!t.isHeader&&e.is(t.cellModel)?s.longHelp=t.cellModel.label:s.longHelp=t.cellModel;break;case"Lock":if(!t.isHeader&&e.is(t.cellModel)){if("instance"===a.attribute.entity){let n,i=I.getReferenceModel(t.nodeModel.getID())._attributes.reserved;d=t.nodeModel.getAttributeValue(t.dataIndex),e.is(d)?"TRUE"===d&&"TRUE"===i?(n=[h.getNLSValue("Cmd.RefLock.Title"),h.getNLSValue("Cmd.InstLock.Title")],s.longHelp=n.join("\n")):"FALSE"===d&&"FALSE"===i?(n=[h.getNLSValue("Cmd.RefUnlock.Title"),h.getNLSValue("Cmd.InstUnlock.Title")],s.longHelp=n.join("\n")):"TRUE"===d&&"FALSE"===i?(n=[h.getNLSValue("Cmd.RefUnlock.Title"),h.getNLSValue("Cmd.InstLock.Title")],s.longHelp=n.join("\n")):"FALSE"===d&&"TRUE"===i&&(n=[h.getNLSValue("Cmd.RefLock.Title"),h.getNLSValue("Cmd.InstUnlock.Title")],s.longHelp=n.join("\n")):s.longHelp="TRUE"===i?h.getNLSValue("Cmd.RefLock.Title"):h.getNLSValue("Cmd.RefUnlock.Title")}}else s.longHelp=t.cellModel;break;case"MIL":o=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?s.longHelp="object"===e.typeOf(o)?o.getLabel():o:(r=t.nodeModel.options.grid[t.dataIndex],s.longHelp=e.is(r)?e.is(r.tooltip)?r.tooltip:r.getLabel():"");break;case"RWU":o=t.cellModel,t.isHeader||"RWU_Action"!==t.dataIndex?s.longHelp="object"===e.typeOf(o)?o.getLabel():o:(r=t.nodeModel.options.grid[t.dataIndex],s.longHelp=e.is(r)?e.is(r.tooltip)?r.tooltip:e.is(r.getLabel)?r.getLabel():"":"");break;case"CIM":o=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?s.longHelp="object"===e.typeOf(o)?o.getLabel():o:(r=t.nodeModel.options.grid[t.dataIndex],s.longHelp=e.is(r)?e.is(r.tooltip)?r.tooltip:r.getLabel():"");break;case"Relation":case"Multivalue":if("Multivalue"!==a.displayType||t.isHeader||(d=b.getValueAsArray(t.nodeModel.options.grid[t.dataIndex])),"Relation"!==a.displayType||t.isHeader||(d=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(d)&&0!==d.length){for(b.isDate(c)&&(d=d.map(function(e){return b.getFormattedDate(e)})),i=0;i<d.length;i++)n=d[i],l.push(e.is(n.Value)?n.Value:n);s.longHelp=b.getValueAsString(l,b.getType(c)).split(p.getPreferenceValue("separator")).join("\n")}else t.isHeader&&(s.longHelp=d);break;case"DocMgmt":if(t.isHeader||(d=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(d)&&0!==d.length){const e=h.getNLSValue("SpecificationsFacet.Specifications"),t=h.getNLSValue("AttachmentsFacet.Attachments");l=d.reduce((n,i)=>("Reference Document"===i.type?n[t].push(i.title):n[e].push(i.title),n),{[e]:[],[t]:[]});let n="";for(const[e,t]of Object.entries(l))Array.isArray(t)&&t.length>0&&(n+=e+":",t.forEach(e=>{n+="\n\t"+e}),n+="\n");s.longHelp=n}else t.isHeader&&(s.longHelp=d);break;case"hideShow3D":t.isHeader?s.longHelp=h.getNLSValue("HideShow3D.tooltip"):(o=t.cellModel,e.is(o,"boolean")&&(s.longHelp=o?h.getNLSValue("HideShow3D.hide3D"):h.getNLSValue("HideShow3D.show3D")));break;case"hideShowItems3D":t.isHeader?s.longHelp=h.getNLSValue("HideShow3D.tooltip"):(o=E.get3DVisibilityState(t.nodeModel.getRIRpath()),e.is(o,"number")&&(s.longHelp=0===o?h.getNLSValue("HideShow3D.show3D"):h.getNLSValue("HideShow3D.hide3D")));break;case"hideShowBuildUp3D":t.isHeader?s.longHelp=h.getNLSValue("HideShowBuildUp3D.tooltip"):(o=t.nodeModel.getAttributeValue(t.dataIndex),o=!!e.is(o)&&o,e.is(o,"boolean")&&(s.longHelp=o?h.getNLSValue("HideShowBuildUp3D.hideBuildUp3D"):h.getNLSValue("HideShowBuildUp3D.showBuildUp3D")));break;case"BIEssentials":case"BIEssentialsAltSub":t.isHeader?s.longHelp=t.cellModel:(o=t.nodeModel.options[t.dataIndex],s.longHelp=e.is(o)?o.tooltip:"");break;case"OPTime":t.isHeader?s.longHelp=t.cellModel:(o=t.nodeModel.getAttributeValue("V_OperationTime"),s.longHelp="string"===e.typeOf(o)&&"FetchInProgress"!==o?o:"");break;case"ResourceParameterRow":o=t.cellModel,t.isHeader||(e.is(o)?"object"===e.typeOf(o)?o=o.getLabel():b.isBoolean(c)?o="TRUE"===o?h.getNLSValue("TRUE"):h.getNLSValue("FALSE"):(b.isDouble(c)||b.isInteger(c))&&(o=b.getValueAsString(o,b.getType(c))):o=""),"V_RPPTitle"===t.dataIndex&&e.is(t.nodeModel)&&""!==t.nodeModel.getAttributeValue("V_RPPTitle").iconPath&&(o=h.getNLSValue("ResourceParametertMgmtUI.InvalidRPRow")),s.longHelp=o;break;default:o=t.cellModel,t.isHeader||(e.is(o)?"object"===e.typeOf(o)?o=o.getLabel():b.isBoolean(c)?o="TRUE"===o?h.getNLSValue("TRUE"):h.getNLSValue("FALSE"):b.isDate(c)?o=b.getFormattedDate(o):b.hasRangeDefined(c)?o=t.cellModel:(b.isDouble(c)||b.isInteger(c))&&(o=b.getValueAsString(o,b.getType(c))):o=""),s.longHelp=o}return!t.isHeader&&e.is(t.nodeModel)&&(o=me.getTooltipValue(t),e.is(s.longHelp)&&(s.longHelp+=s.longHelp.length>0&&o.length>0?"\n\n":"",s.longHelp+=o)),s},getCellEditableState:function(e){var t,n=!0;return!0===e.isHeader?n=!1:"selection"===e.dataIndex?n=!0:(t=b.getNodeAndColumnInfos(e.nodeModel,e.parent.options.columns[e.virtualColumnID]),n=!b.isReadOnly(t.attributeInfo,t.attributeDef)),n}};return K=function(u){var c;if(U=e.is(u.columnConfig)?u.columnConfig:S.getViewColumnPreferences(p.getId(),x),W=(u=u||{}).dataGridViewOptions?e.extend(Ie,u.dataGridViewOptions,!0):Ie,!e.is(U))throw new Error("_createTreeListView options not defined");if(U.addDefaultGroupingColumns=!!e.is(W.addDefaultGroupingColumns,"boolean")&&W.addDefaultGroupingColumns,U.isViewGroupable=!e.is(W.isViewGroupable,"boolean")||W.isViewGroupable,U.isViewFilterable=!e.is(W.isViewFilterable,"boolean")||W.isViewFilterable,U.isViewEditable=!e.is(W.isEditable,"boolean")||W.isEditable,W.contextualCommands&&(X=new n(f,p,m,h,b,A,I,S,v,R,V,L,E),W.onContextualEvent=function(t,n){var i,o,r,a,s=[],l={};if(e.is(t.cellInfos)&&(i=(r=t.cellInfos).nodeModel,a=r.manager,e.is(r.rowID))){if(-1===r.rowID)e.is(W.headerContextualCommands)&&(o=this.getColumnOrGroup(r.columnID),(l={node:i,selectedNodes:this.getTreeDocument().getXSO().get(),column:o,virtualColumnID:r.columnID,dataIndex:o.dataIndex,manager:a,handlers:{}}).params=t,s=X.buildContextualMenu(W.headerContextualCommands,l),"selection"===r.dataIndex||"taggerColor"===r.dataIndex||"hide_show_3D"===r.dataIndex||"hide_show_items_3D"===r.dataIndex||"hide_show_BuildUp_3D"===r.dataIndex?s.forEach(function(e){e.state="disabled"}):"tree"===r.dataIndex&&s.forEach(function(e){"Hide"===e.title&&(e.state="disabled")})),Array.isArray(s)&&Array.isArray(n)&&(s=n.concat(s));else if(0<=r.rowID){if(!e.is(i.getReferencePID))return;e.is(i)&&(i.isSelected()||i.select()),o=this.getColumnOrGroup(r.columnID),(l={node:i,selectedNodes:this.getTreeDocument().getXSO().get(),column:o,getColumnIDFromDataIndex:function(e){return a.getColumnIndexByDataIndex(e)},getColumnOrGroup:function(e){return r.cellView.collectionView.getColumnOrGroup(e)}}).infos=b.getNodeAndColumnInfos(i,o),s=X.buildContextualMenu(W.contextualCommands,l),Array.isArray(n)&&n.length>0&&(s=[...s.slice(0,3),...n,...s.slice(3)])}return s}}),e.is(u.dataGridViewOptions)&&e.is(u.dataGridViewOptions.enableDragAndDrop,"boolean")&&!0===u.dataGridViewOptions.enableDragAndDrop){switch(W.cellDragEnabledFlag=!0,W.rowDragEnabledFlag=!0,c={acceptedTypes:u.pprTypes,pprTypesWithSupportedViews:e.is(u.pprTypesWithSupportedViews)?u.pprTypesWithSupportedViews:[]},u.dragDropManager){case"WUXActionDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),O=new o(f,p,h,I,v,C,D,A);break;case"WUXGenericLinksDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),O=new r(f,p,h,I,v,C,D,m);break;case"WUXManageCapableRscDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),O=new a(f,p,h,I,v,C,D,m);break;case"WUXDataCollectRowDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),O=new s(f,p,h,C,I);break;case"WUXResourceParameterRowDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),O=new l(f,p,h,C,I);break;default:O=new t(f,p,h,I,v,C,D,A)}O.init(c),W=e.extend(W,O.getDDBehavior())}T=new i(f,p,_,G,I,v,b,h,m,y,S,w,A,E),H=T.createTreeListViewColumns(U,W.showTagger,W.showSelection,W.show3DHideShow,W.add3DHideShowColumn,W.add3DBuildUpColumn)},z=function(t){var n,i;if(B=t,n=ce(),e.is(H)&&e.is(H.columns,"array")?W.columns=H.columns:W.columns=[],n.length>0&&(W.initialDataIndecesToGroup=n),e.is(M))M.setProperties({columns:W.columns});else{W.treeDocument=t,M=new pe(W),N=new g(M),M.registerColumnsEnum();const n=p.getBehavior("CfgColumnsBehavior");if(e.is(n)){const e=n.getRequiredTypeRepresentations();M.registerColumnTypeRepresentations(e)}}e.is(W.toolbarOptions)&&Array.isArray(W.toolbarOptions.items)&&(j=M.setToolbar(oe(W.toolbarOptions.items))),e.is(W.setReusablecontent)&&!1===W.setReusablecontent||T.setReusablecontent(M),i=T.getBlockAttributes(U),I.setSelectPredicate(p.getId(),i)},Q=function(t,n){var i,o,r=[],a=p.getPreferenceValue("separator"),s=T.getLabelAttributesByEntity(M);return i={},e.is(s)&&(e.is(s.reference)&&e.is(t)&&s.reference.forEach(function(n){e.owns(t,n)&&(i[n]=t[n])}),e.is(s.instance)&&e.is(n)&&s.instance.forEach(function(t){e.owns(n,t)&&(i[t]=n[t])})),o=M.getColumnOrGroup("tree"),e.is(o)&&(Array.isArray(o.attribute)?o.attribute:[o.attribute]).forEach(function(t){e.is(i[t.name])&&r.push(i[t.name])}),r.join(a)},J=function(t){var n,i,o,r=t.type,a={icons:"",label:"",grid:{},useAsyncPreExpand:!1},s=T.getColumnAttributesByEntity(M),l=T.getColumnDataIndexByDisplayType(M,"Relation"),u=T.getColumnDataIndexByDisplayType(M,"DocMgmt");for(n in o="VPMReference"===r&&(e.is(t.V_usage,"array")&&t.V_usage.includes("3DPart")||e.is(t.V_usage,"string")&&"3DPart"===t.V_usage)?h.getIconURLFromKey("3DPart"):h.getIconURLFromKey(r),a.icons=[o],a.label=Q(t),t)Object.prototype.hasOwnProperty.call(t,n)&&(i=t[n],e.is(i)&&"NULL"!==i&&(e.is(s)&&e.is(s.reference)&&s.reference.indexOf(n)>=0?a.grid[n]=t[n]:"PID"===n&&(a.referencePID=t[n]),"type"===n&&(a.referenceType=t[n]),"defType"===n&&(a.defType=i)));return a.referencePID&&(a.useAsyncPreExpand=I.needToQueryForChildren(a.referencePID)),l.length>0&&ge.fillNodeOptions(a,l),u.length>0&&fe.fillNodeOptions(a,u),e.is(de.show3DHideShow)&&!0===de.show3DHideShow&&(a.hideShow3D=!0),a},q=function(t,n,i){var o,r,a=T.getColumnAttributesByEntity(M),s=T.getColumnDataIndexByDisplayType(M,"Relation"),l=J(t);for(o in l.label=Q(t,n),n)Object.prototype.hasOwnProperty.call(n,o)&&(r=n[o],e.is(r)&&"NULL"!==r&&(e.is(a)&&e.is(a.instance)&&a.instance.indexOf(o)>=0?l.grid[o]=n[o]:"PID"===o?l.instancePID=n[o]:"V_TreeOrder"===o&&(l.grid.V_TreeOrder=parseFloat(n[o]))));return s.length>0&&ge.fillNodeOptions(l,s,n,i),l},Y=function(t){var n,i,o,r,a,s=!1,l=t.changedAttributes(),u=t.isInstance()?"instance":"reference",c=T.getColumnAttributesByEntity(M),d=T.getLabelAttributesByEntity(M),g={};if(!t.isConnection()&&e.is(l)){for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e.is(c)&&e.is(c[u])&&-1!==c[u].indexOf(n)&&(g[n]="NULL"!==l[n]?l[n]:""),e.is(d)&&e.is(d[u])&&d[u].indexOf(n)>-1&&(s=!0));return s&&(t.isInstance()?(o=t.toJSON(),i=I.getReferenceModelFromInstance(t),e.is(i)&&(r=i.toJSON())):r=t.toJSON(),a=Q(r,o)),{label:a,attributes:g}}},Z=function(){var e,t,n=[],i=N.getNumberOfRows();for(e=0;e<i;e++)t=N.getTreeNodeModelFromRowID(e),n.push(t.getReferencePID());return n},$=function(){var t,n,i,o,r,a,s,l,u,c,d,g,f=[];if(F){for(i=S.getViewColumnPreferences(p.getId()),n=e.is(i)?i.Columns.Column:[],r=M.getColumnIndexByDataIndex("tree")+1,t=0;t<n.length;t++)s=b.getColumnInfos(n[t]),o=n[t],c={},l=M.layout.getColumnOptionValue(s.dataIndex,"groupableFlag"),e.is(o.groupingInfo)&&l&&f.push(o.groupingInfo),o.isHidden?M.isColumnHidden(s.dataIndex)||M.hideColumn(s.dataIndex):(g=isNaN(o.width)?"auto":parseInt(o.width),M.getColumnWidth(s.dataIndex)!==g&&(c.width=g),g=isNaN(o.minWidth)?"100":parseInt(o.minWidth),M.getColumnMinWidth(s.dataIndex)!==g&&(c.minWidth=g),M.isColumnHidden(s.dataIndex)&&(c.visibleFlag=!0),e.Object.keys(c).length>0&&M.layout.setColumnOrGroupProperties(s.dataIndex,c),d=M.getColumnIndexByDataIndex(s.dataIndex),u=M.layout.getOrderedColumnsReverseIndexes(),a=M.layout.getOrderedColumnsIndexes(),u[d]!==r&&M.moveColumn(s.dataIndex,a[r])),r++;f.sort(function(e,t){return e.position-t.position}),f=f.map(function(e){return e.dataIndex}),M.groupRows({dataIndexesToGroup:f})}},ee=function(e){var t,n,i="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(63&n|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(63&n|128));return i},te=function(e){return'"'+ee(e).replace(/"/g,'""')+'"'},ne=function(e){W.showTagger&&M.updateNodeKPIColor(e)},ie=function(t){var n,i,o=[],r=t.collectionView;if(t.startNodeIndex>=0&&t.endNodeIndex>=0){for(n=t.startNodeIndex;n<=t.endNodeIndex;n++)i=r.model[n],e.is(i)&&o.push(i);o.length>0&&p.notify("visibleNodesChanged",[p.getId(),o])}},oe=function(t){return{entries:t.map(function(t){var n,i={};return i=t.icon&&t.icon.iconName?{...t.icon}:{iconPath:h.getIconURLFromKey(t.icon),iconSize:{width:"22px",height:"22px"}},e.is(t.tooltip)&&(n={title:h.getNLSValue(t.tooltip.title),shortHelp:h.getNLSValue(t.tooltip.shortHelp)}),{id:t.id,dataElements:{typeRepresentation:e.is(t.typeRepresentation)?t.typeRepresentation:"functionIcon",position:e.is(t.position)?t.position:"far",category:e.is(t.category)?t.category:"0",icon:i,value:e.is(t.value)?t.value:re.bind(null,t.id),disabled:!!e.is(t.disabled)&&t.disabled,tooltip:n,readOnly:!!e.is(t.readOnly)&&t.readOnly}}})}},se=function(t,n){var i,o,r=[],a=[];r=X.buildContextualMenu(t.children),i={position:{x:(o=n.dsModel.elements.container.getBoundingClientRect()).left+5,y:o.top+(o.height-5)}},0!==w.getModuleSelections(p.getId()).length?(r=r.filter(function(e){let t=!1;return t="TitleItem"===e.type||"enabled"===e.state})).forEach(function(t,n){"TitleItem"===t.type&&e.is(r[n+1])&&"TitleItem"!==r[n+1].type?a.push(t):"PushItem"===t.type&&a.push(t)}):r.forEach(function(t){"TitleItem"===t.type?a.push(t):e.is(t.state)&&(t.state="enabled",a.push(t))}),a.length>0&&he.show(a,i)},re=function(t,n){var i;i=W.toolbarOptions.items.find(function(e){return t===e.id}),e.is(i)&&e.is(i.children)?se(i,n):e.is(W.toolbarOptions.actionHandler,"function")?W.toolbarOptions.actionHandler.call(null,t,n):e.is(X)&&X.onContextMenuCallback(t)},ae=function(t){var n;t=Array.isArray(t)?t:[t],M&&(n=M.getToolbar(),e.is(n)&&n.items.getChildren().forEach(function(e){var n=e.options.id,i=t.indexOf(n);e.updateOptions({disabled:-1===i})}))},le=function(){var e;e=L.isOpsViewerWidgetLinked(),this.has3DHideShowColumn()&&this.manageColumn("hide_show_3D",{visible:e}),this.hasHideShowItems3DColumn()&&this.manageColumn("hide_show_items_3D",{visible:e}),this.has3DBuildUpColumn()&&this.manageColumn("hide_show_BuildUp_3D",{visible:e})},ue=function(e){this.has3DBuildUpColumn()&&this.manageColumn("hide_show_BuildUp_3D",{disabled:e.state})},ce=function(){var t=[];return e.is(U)&&e.is(U.Columns)&&e.is(U.Columns.Column)&&U.Columns.Column.forEach(function(n){var i,o=n.groupingInfo;e.is(o)&&(i=H.columns.find(function(e){return e.dataIndex===o.dataIndex}),e.is(i)&&i.groupableFlag&&t.push(e.clone(n.groupingInfo)))}),t.length>0&&(t.sort(function(e,t){return e.position-t.position}),t=t.map(function(e){return e.dataIndex})),t},{viewName:"treeListView",listenTo:function(){return{TreeViewPrefModified:$,LoadDropContent:this.processDropContent,widgetLinked:le,widgetUnlinked:le,BuildUpReviewModeCmd:ue}},onStart:function(t,n){var i,o,r;t=t||{},e.is(t.pprTypes)&&e.is(t.columnConfigName)?(e.is(t.hasReadOnlyTypes,"boolean")&&t.hasReadOnlyTypes&&(Ie.defaultColumnDef.getCellEditableState=function(e){return M.getColumnOrGroup(e.dataIndex).editableFlag}),e.is(t.views)&&e.is(t.views.treeListView)&&(de=t.views.treeListView,Object.prototype.hasOwnProperty.call(de,"show3DHideShow")&&A.isSuppressHideShow3DColumn()&&(de.show3DHideShow=!1)),e.is(t.views.treeListView.toolTipConfigXML)&&me.init(t.views.treeListView.toolTipConfigXML),x=t.columnConfigName,(F=!!e.is(t.registerViewPreference)&&t.registerViewPreference)&&S.registerViewforColumnPref({viewID:p.getId(),columnConfigName:t.columnConfigName,viewIcon:t.moduleIcon}),_=Array.isArray(t.columnsBeforeTitle)?t.columnsBeforeTitle:null,!!e.is(t.immutableColumns,"boolean")&&t.immutableColumns&&S.registerModuleColumnsAsImmutable(p.getId()),G=!!e.is(t.noActiveCellChange,"boolean")&&t.noActiveCellChange,K({pprTypes:t.pprTypes,dataGridViewOptions:e.merge(de,{isEditable:!!e.is(t.isAuthoringAllowed)&&t.isAuthoringAllowed}),dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,pprTypesWithSupportedViews:Array.isArray(t.pprTypesWithSupportedViews)?t.pprTypesWithSupportedViews:null}),!0===(k=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&S.registerViewforWidgetLayout({viewID:p.getId(),viewType:this.viewName}),(o=!!e.is(t.custoAttrsInfoPath)&&t.custoAttrsInfoPath)?require(["text!"+o],function(t){if(e.is(t)){if(r=(r=e.is(t,"string")?e.Json.decode(t):t)[p.getId()],e.is(r,"object")){for(i in r)if(e.is(i,"string")){let e={};r[i].NLS=h.getNLSValue(r[i].NLSKey),e[r[i].NLSKey]=r[i].NLS,delete r[i].NLSKey,h.addNlsJSON(e)}b.addAttributeInfo(r),n()}}else console.log("Custo Attrs Info is not defined.")}):n()):n()},onStop:function(){e.is(M)&&M.remove(),F&&S.unRegisterViewforColumnPref(p.getId()),!0===k&&S.unregisterViewforWidgetLayout(p.getId(),this.viewName)},has3DHideShowColumn:function(){return!!e.is(de.show3DHideShow,"boolean")&&de.show3DHideShow},hasHideShowItems3DColumn:function(){return!!e.is(de.add3DHideShowColumn,"boolean")&&de.add3DHideShowColumn},has3DBuildUpColumn:function(){return!!e.is(de.add3DBuildUpColumn,"boolean")&&de.add3DBuildUpColumn},createTreeListView:function(t){var n,i,o="",r=de;t=t||{},e.is(t.dataGridViewOptions.identifier)&&(o=t.dataGridViewOptions.identifier),e.is(t.columnConfig)&&(i=t.columnConfig),e.is(t.dataGridViewOptions)&&(r=t.dataGridViewOptions),K({columnConfig:i,pprTypes:t.pprTypes,dataGridViewOptions:r,dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,identifier:o}),e.is(t.treeDocument)&&(z(t.treeDocument),e.is(M.onDelayedModelDataRequest,"function")||(M.onDelayedModelDataRequest=ie),e.is(t.treeListViewContainer)&&M.getContent().inject(t.treeListViewContainer),e.is(t.toolbarContainer)&&(n=M.getToolbar(),e.is(n)&&n.getContent().inject(t.toolbarContainer)))},getColumnsByDisplayType:function(e){var t,n,i=[],o=T.getColumnDataIndexByDisplayType(M,e),r=o.length;for(t=0;t<r;t++)n=o[t],i.push(n.split(".")[0]);return i},loadDocument:function(t){z(t),e.is(M.onDelayedModelDataRequest,"function")||(M.onDelayedModelDataRequest=ie)},getContent:function(){var t=void 0;return e.is(M)&&(t=M.getContent()),t},manageColumn:function(t,n){if("taggerColor"!==t)return e.is(M)&&e.is(T)?T.manageColumn(M,t,n):void 0;ne(n.visible)},processDropEffect:function(e){return O.processDropEffect(e)},processDropContent:function(e,t){var n=new Event("Drag");return n.dataTransfer=new DataTransfer,n.dataTransfer.setData("Text",e),O.onTreeListViewDrop(n,t)},getTreeListViewManager:function(){var t=null;return e.is(N)&&(t=N),t},getLabelAttribute:function(){return M._label},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=J(t.toJSON())),n},getInstanceNodeOptions:function(t,n,i){var o;return e.is(t)&&e.is(n)&&(o=q(t.toJSON(),n.toJSON(),i)),o},getRelationNodeOptions:function(e,t){var n=T.getColumnDataIndexByDisplayType(M,"Relation");return ge.getRelationAttributes(e,n,t)},getDocumentNodeOptions:function(e){var t=T.getColumnDataIndexByDisplayType(M,"DocMgmt");return{attributes:fe.getDocumentNodeOptions(e,t)}},getUpdateNodeOptions:function(t){var n;return e.is(t)&&(n=Y(t)),n},getVisibleTableContentAsCSV:function(e){return ee(M.getAsCSV({columnSeparator:e,addLevelInformation:!0,allColumns:!1,forceQuotes:!0}))},getConfiguredAttributesAsCSV:function(t,n){var i,o,r,a,s,l=[],u="";function c(e,n){var i,o;for(i=t[n].Attribute,o=0;o<i.length;o++)if((a=i[o].fullName)===e)return!0;return!1}for(i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(o=t[i].Attribute,r=0;r<o.length;r++)a=o[r].fullName,-1===l.indexOf(a)&&l.push(a);for(s=0;s<l.length;s++)0!==s&&(u+=n),u+=te(l[s]);return u+="\r\n",Z().forEach(function(o){var r,a,d;if(r=I.getReference(o),e.is(r)&&function(e){return Object.prototype.hasOwnProperty.call(t,e)}(i=r.get("type"))){for(s=0;s<l.length;s++)0!==s&&(u+=n),d=c(a=l[s],i)&&e.is(r.get(a))?String(r.get(a)):"",u+=te(d);u+="\r\n"}}),u},isInverseRelationColumnPresent:function(){var t,n=!1,i=y.getInverseRelationNameSet();return i.size>0&&e.is(T)&&(t=T.getColumnDataIndexByDisplayType(M,"Relation"),e.is(t,"array")&&(n=t.some(function(e){return i.has(e)}))),n},getDataGridView:function(){return M},getToolBarOption:function(){return j},getTreeDocument:function(){return B},getToolBarContent:function(){var e,t=null;return M&&(e=M.getToolbar())&&(t=e.getContent()),t},enableToolBarItems:function(e){ae(e)},manageToolBarItemsAvailability:function(){var e,t=!0,n=[],i=[];0===(n=p.getBehavior("WUXNodeModelBehavior").getSelectedNodes()).length?i.push("CreateItem"):1===n.length&&(e=I.getReferenceModel(n[0].getReferencePID()),I.getValidChildTypes(e).length>0&&i.push("CreateItem"));for(let e=0;e<n.length&&!(t=n[e].isRoot());e++);t||i.push("DetachInstance"),this.enableToolBarItems(i)}}}}}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel",["UWA/Core","UWA/Class","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/AbstractTreeNodeModel"],function(e,t,n){"use strict";var i=function(t){t=t||{},n.call(this,t),this.object={},this.options.grid["ds6w:type"]=this.getReferenceType(),this.object.type=this.getReferenceType(),e.is(t.defType)&&(this.object.defType=t.defType)};return(i.prototype=Object.create(n.prototype)).constructor=i,i.prototype.updateBadge=function(e){this.prepareUpdate(),this.setBadges(e),this.pushUpdate()},i.prototype.setRootFiltered=function(e){this.isRoot(!0)&&(this.options.isFiltered=e),this.updateBadge({bottomRight:e?"filter":""})},i.prototype.isRootFiltered=function(){var t=!1;return this.isRoot(!0)&&e.is(this.options.isFiltered,"boolean")&&(t=this.options.isFiltered),t},i.NODE_SOURCE=n.NODE_SOURCE,i}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/WUXNodeModelBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors/BulkTreeSearchHelper","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeDocument","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/Mutex"],function(e,t,n,i,o,r){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","ProductImplementPlugin","ProcessImplementPlugin","KeyBindingPlugin","RootsPlugin","CfgColumnsPlugin","PlatformPlugin","DicoPlugin"],creator:function(a,s,l,u,c,d,g,f,p,h,m,I){var v,b,y,P,C,D,S,R,V,A,w,L,E,M,N,T,B,O,x,F,k,U,_,W,j,H,G,X,z,K,Q,q,J,Y,Z,$,ee,te,ne,ie,oe,re,ae,se,le,ue,ce,de,ge,fe,pe,he,me,Ie,ve,be="noChildren",ye="expanding",Pe="partiallyExpanded",Ce="expanded",De="collapsed",Se={virtualColumnID:null,sortOrder:null},Re=[],Ve=0,Ae=new i({useAsyncPreExpand:!1,nodeModelClass:o,shouldAcceptDrag:function(t){return e.is(t.getReferencePID)},shouldAcceptDrop:function(t){var n=t.dropNode;return!e.is(n)||e.is(n.getReferencePID)}}),we=new n(Ae,l),Le=!1;(v=Ae.getXSO())&&(v.onChange(function(t){var n,i,o,r,a,l,u,d,g,f=[],p=[],h=s.getBehavior("ViewBehavior");if(!ce(t)){for(l=t.getInstancePID()||t.getReferencePID(),u=t.isSelected(),d=Ae.getSelectedNodes(),g=t.getAbsolutePath(),i=0,o=d.length;i<o;i++)r=d[i],e.is(r)&&e.is(r.getReferencePID)&&(a=r.getInstancePID()||r.getReferencePID(),"MANAGECAPABLERESOURCESMOD"===s.getId()&&(a=r.getLinkPID()),f.push(a),p.push({id:a,path:r.getAbsolutePath()}));c.setSelection(s.getId(),p),n={sourceId:s.getId(),selectedNodeIds:f,changed:{nodeId:l,isSelected:u,absPath:g}},setTimeout(function(){e.is(T)&&!0!==t.from3DViewer?T.crossHighlight(l,g,u):t.from3DViewer=null},0),e.is(h)&&!0===u&&h.setActiveView(),s.notify("select",n)}}),v.onPostAdd(function(e){const t={sourceId:s.getId(),toggledNodes:e};s.notify("postNodesSelected",t)}),v.onPostRemove(function(e){const t={sourceId:s.getId(),toggledNodes:e};s.notify("postNodesUnselected",t)})),B=function(){var t,n,i=function(){};t=function(t){var n,i,o,r,a;if(t.preventDefault(),t.stopPropagation(),o=function(){var t,n=Ae.getRoots();e.is(n)&&(t=n[0],e.is(t)&&t.select())},n=Ae.getSelectedNodes())if(r=n[0])if(r.hasChildren()||r.getNextBrother())r.getNextVisibleNode().select(),r.unselect();else{if(r.isRoot(!0))return r.unselect(),void o();for(a=r.getParent();a&&!a.getNextBrother()&&!a.isRoot(!0);)a=a.getParent();if(i=a.getNextBrother())i.select(),r.unselect();else{if(!a.getPreviousBrother())return r.unselect(),void o();a.getPreviousBrother().select(),r.unselect()}}else o();else o()},n=function(t){var n,i,o=Ae.getSelectedNodes(),r=function(){var t,n,i;t=Ae.getRoots(),e.is(t,"array")&&t.length>0&&(i=(n=t[t.length-1]).getVisibleChildren(!1,!0),(e.is(i,"array")&&i.length>0?i[i.length-1]:n).select())};if(t.preventDefault(),t.stopPropagation(),o)if(n=o[0]){if(0===n._rowID)return n.unselect(),void r();i=n.getPreviousVisibleNode(),n.unselect(),i.select()}else r();else r()},f.createHandler({domElement:s.getElement(),onTab:t,onDownArrow:t,onShiftTab:n,onUpArrow:n,onCtrlA:function(e){Ae.selectAll(),e.preventDefault(),e.stopPropagation()},onCtrlC:i,onCtrlV:i,onCtrlX:i,onSuppr:i,onBackspace:i})},O=function(t,n){var i,o;return n=n||!1,o=function(t){var i=[],o=null;return o=Ae.getTreeNodeModel(t[0]),e.is(o)&&0!==o.length?(1===t.length?n&&(o=o[0]):t.length>1&&(o.forEach(function(e){var n,o,r,a,s=e;for(n=1;n<t.length;n++){for(r=s.getChildren(!0),a=!1,o=0;o<r.length;o++)if(r[o].getInstancePID()===t[n]){s=r[o],a=!0;break}if(!a)break}a&&i.push(s)}),o=i.length>0?n?i[0]:i:null),o):null},Array.isArray(t)&&t.length>0?i=o(t):e.is(t,"string")?(i=Ae.getTreeNodeModel(t,{returnFirstOne:n}),Array.isArray(i)&&i.length<1&&(i=null)):(s.debug("nodeId is not valid."),i=null),i},x=function(e,t){return we.getNodeModels(e,t)},F=function(e){var t,n,i=Ae.getRoots(!0),o=null;for(n=i.length,t=0;t<n;t++)if(i[t].getReferencePID()===e){o=i[t];break}return o},k=function(){var e=Ae.getRoots();return Array.isArray(e)&&e.length<=0},U=function(n,i,r,a){var u,c,d,g,f,h=s.getBehavior("TaggerBehavior"),m=s.getBehavior("BIBehavior"),I=s.getBehavior("ExpandFilterBehavior"),v=s.getBehavior("TreeListViewBehavior"),y=s.getBehavior("TLV3DViewerBehavior"),P=!1,C={nodeOptions:{},taggerOptions:{}};return e.is(i)?(d=""!==(f=i.getAbsolutePath().toString())?f.concat(",",n.instancePID):n.instancePID,g=i.getRIRpath().join(",")+","+n.instancePID+","+n.referencePID):(d=n.referencePID,g=n.referencePID),m&&(C=m.getNodeOptions(d,g),e.merge(n,C.nodeOptions)),c=new o(n),e.is(i)?(!0===a&&(r=Ve++,P=!0),i.addChild(c,r,P)):(Ae.addRoot(c),e.is(I)&&I.setTagsWithExpandSynthesis(c.getReferencePID()),!0!==k()&&(u=s.getBehavior("DropZoneViewBehavior"),e.is(u)&&u.hide()),!0===b&&p.addRoot(s.getId(),c.getID())),e.is(n.fromXEN)&&(c.stringIdentifier=n.referencePID,c.fromXEN=n.fromXEN),_(c),e.is(h)&&!l.isStandAlone()&&h.getNodeUpdatePromise({PID:c.getID(),Path:c.isRoot(!0)?c.getReferencePID():c.getAbsolutePath().toString(),event:"add",externalTags:[C.taggerOptions]}).then(function(){t.resolve()}),e.is(y)&&v.hasHideShowItems3DColumn()&&y.add3DVisibilityState(c.getRIRpath()),c},_=function(t){var n=!1,i=!1;e.is(t.fromXEN)&&t.fromXEN&&(i=t.fromXEN),e.is(P)&&!n&&d.getScopeLinksOfImplementing(t.getID(),i).length>0&&(W(t,P.badgeIcon),n=!0),e.is(C)&&!n&&g.getScopeLinksOfImplementing(t.getID(),i).length>0&&(W(t,C.badgeIcon),n=!0),e.is(D)&&!n&&d.getPartialScopeLinksOfImplementing(t.getID(),i).length>0&&(W(t,D.badgeIcon),n=!0),e.is(S)&&!n&&g.getPartialScopeLinksOfImplementing(t.getID(),i).length>0&&(W(t,S.badgeIcon),n=!0),e.is(R)&&!n&&d.getResultingProductLinksOfImplementing(t.getID(),i).length>0&&(W(t,R.badgeIcon),n=!0)},ue=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)||/[/]?((\.|\.\.)*?([/]))*?(([a-zA-Z0-9_ ]+)\/)*?([a-zA-Z0-9_ ]+)\.([a-z]{2,})/.test(e)},W=function(t,n){var i=e.is(n)?u.getIconURLFromKey(n):"",o={bottomLeft:ue(i)?{iconPath:i,iconSize:{width:"16px",height:"16px"}}:""};Array.isArray(t)?t.forEach(function(e){e.updateBadge(o)}):t.updateBadge(o)},$=function(e,t){var n,i,o=null;if(t&&(i=t.getChildren(!0),Array.isArray(i)&&i.length>0))for(n=0;n<i.length;n++)if(e===i[n].options.instancePID){o=i[n];break}return o},fe=function(t,n){var i,o,r,a,u=s.getBehavior("TreeListViewBehavior"),c=s.getBehavior("TLV3DViewerBehavior"),d=s.getBehavior("GraphViewBehavior");return n=n||{},i=o=u.getReferenceNodeOptions(t),e.is(c)&&(r=c.getReferenceNodeOptions(),i=e.merge(o,r)),e.is(d)&&(a=d.getReferenceNodeOptions(t),i.grid=e.merge(o.grid,a.grid)),e.is(n.fromXEN)&&(i.fromXEN=n.fromXEN),!n.fromXEN&&(l.needToQueryForChildren(t)||e.is(n.forceIntializeChildren)&&n.forceIntializeChildren)&&(i.children=[]),U(i)},pe=function(t,n,i,o,r){var a,u,c,d,g,f=s.getBehavior("TreeListViewBehavior"),p=s.getBehavior("TLV3DViewerBehavior"),h=s.getBehavior("GraphViewBehavior");return r=r||{},a=i.getAbsolutePath().concat(t.get("PID")),u=c=f.getInstanceNodeOptions(n,t,a),e.is(p)&&(d=p.getReferenceNodeOptions(),u=e.merge(c,d)),e.is(h)&&(g=h.getInstanceNodeOptions(n,t),u.grid=e.merge(c.grid,g.grid)),(l.needToQueryForChildren(n)||e.is(r.forceIntializeChildren)&&r.forceIntializeChildren)&&(u.children=[],e.is(r.fromXEN)&&(u.fromXEN=r.fromXEN)),r.isFlatView?U(u,null,o,r.isFlatView):U(u,i,o,r.isFlatView)},H=function(t,n,i){var o,r,a,u,c,d,g,f=i||{},p=s.getBehavior("TreeListViewBehavior"),h=e.is(f.onEndAddToNodeList,"function")?f.onEndAddToNodeList:null,m=!0;if(e.is(h)&&delete f.onEndAddToNodeList,g=function(t,n){a.getRoot(!0).isRootFiltered()?te(a):l.needToQueryForChildren(t)?te(a,Pe):te(a),e.is(h)&&h(t,n)},!e.is(t,"string"))return s.debug("_addToNodeModelListRecursive: invalid PID."),void g(null,null);if(e.is(p)){if(d=function(){G(a,f),g(o,a)},e.is(n))if(r=l.getInstance(t),e.is(r)){if(o=l.getReferenceModelFromInstance(r),!e.is(o)||I.isAKindOf(o,"Document"))return;a=$(t,n),e.is(a)&&(a.getReferencePID()!==r.get("isInstanceOf")?(u=a._getLocalID(),n.removeChild(a)):(m=!1,c=p.getUpdateNodeOptions(r,a),q(t,c),j(r,a.getAbsolutePath()))),m&&(a=O(f.rootId,!0),f.rootNode=a,a=pe(r,o,n,u,f))}else o=l.getReference(t);else(o=l.getReference(t))&&(e.is(f.loadRootOnly)&&f.loadRootOnly&&(f.expandLevel=0),a=O(t,!0),e.is(a)&&(a.isRoot(!0)||e.is(f.updateItem)&&!0===f.updateItem)?(c=p.getUpdateNodeOptions(o),q(t,c)):a=fe(o,f));f.loadChildren?r?d():!A&&l.needToQueryForChildren(o)?e.is(f.loadRootOnly)&&f.loadRootOnly&&!l.needToQueryForConnections(o)?d():(f=e.merge(f,{silentMode:!0}),te(a,ye),l.getDescendantsFromServer(o.get("PID"),d,f)):!A&&e.is(f.withLinksResolved)&&f.withLinksResolved&&l.needToQueryForConnections(o)&&!0!==f.isFlatView?(te(a,ye),l.findMissingLinkedObjects(o.get("PID"),d,f)):d():g(o,a)}else s.debug("treeListViewBehavior is undefined")},G=function(t,n){var i,o=n||{},r=e.is(o.filterQuery)?o.filterQuery:null,a=s.getBehavior("TreeListViewBehavior");e.is(t)&&t.removeChildren(),Ae.prepareUpdate(),i=l.getFilteredInstancesFromCollection(t.getReferencePID(),r),e.is(Se)&&e.is(Se.virtualColumnID)&&e.is(Se.sortOrder)?a.getDataGridView().reapplySortModel():i=(i=(i=i.map(function(e,t){return{position:t,data:e}})).sort(function(e,t){var n=e.data.get("V_TreeOrder"),i=t.data.get("V_TreeOrder");return n&&i?Number(n)-Number(i):e.position-t.position})).map(function(e){return e.data}),i.forEach(function(e){H(e.id,t,o)}),Ae.pushUpdate()},ne=function(e){var t,n=!1,i=e.getReferencePID();return l.needToQueryForChildren(i)||(t=l.getInstancesFromCollection(i),n=e.getChildren(!0).length===t.length),n},X=function(t){var n,i,o,r,a,c,d,g,f,p,h=null,m=!1,I={};if(c=function(){s.notify("startProgress",I),h.prepareUpdate()},d=function(t){h.preExpandDone(),h.pushUpdate(),e.is(t)&&""!==t&&te(h,t),s.notify("stopProgress",I),Ae.isExpandAllProgressive()||(e.is(T)&&T.reHighlightMyView(),s.notify("onNodeExpanded"))},o=function(){var t="";h.options&&h.options.useAsyncPreExpand&&(h.options.useAsyncPreExpand=l.needToQueryForChildren(h.getReferencePID())),(!h.hasChildren()||!f||e.is(n.previousNodeState)&&n.previousNodeState[h.getReferencePID()]===Pe)&&G(h,{loadChildren:!0}),h.hasChildren()||(t=be),d(t)},r=function(){s.warn(u.getNLSValue("Error.ExpandFailed.Title")),g.setAdditionalInfo({queriedForChildren:!1}),d(m?De:Pe)},a=function(){s.warn(u.getNLSValue("Info.ExpandCanceled.Title")),g.setAdditionalInfo({queriedForChildren:!1}),d(m?De:Pe)},e.is(t)&&e.is(t.data)&&e.is(t.data.nodeModel)){if(ce(t.data.nodeModel))return void t.target.preExpandDone();if(n=t.data,h=n.nodeModel,g=l.getReference(h.getReferencePID()),e.is(g))if(c(),m=h.getRoot(!0).isRootFiltered(),A)d();else if(m)d();else{p=!!e.is(n.expandAll,"boolean")&&n.expandAll,f=!l.needToQueryForChildren(g);const t=Ie(),u=new Set;t.length>0&&t.forEach(function(e){ce(e)||u.add(e.getReferencePID())}),p&&u.size>0&&!u.has(g.get("PID"))||!p&&f?o():(i={ordered:!1,context:this,doNotExpand:!0,onFailure:r,onTimeout:r,onCancel:a,forceIndexMode:Le},p&&(i.expandLevel=-1),i.includeXcadDrawings=s.getPreferenceValue("includeXcadDrawingsInEBOMView"),l.getDescendantsFromServer(g.get("PID"),o,i))}}},z=function(){e.is(T)&&T.reHighlightMyView()},K=function(){Ae.isCollapseAllProgressive()||s.notify("onNodeCollapsed")},Q=function(t,n={}){if(e.is(n.label)&&t.setLabel(n.label),e.is(n.attributes))if(e.is(t._getRowID()))t.updateOptions({grid:n.attributes});else for(const[e,i]of Object.entries(n.attributes))t.options.grid[e]=i;_(t)},q=function(e,t){const n=t||{},i=Array.isArray(e)?O(e):O(e.split(","));if(Array.isArray(i)){Ae.prepareUpdate();for(let e of i)Q(e,n);Ae.pushUpdate()}},J=function(e){e=e||{},Ae.withTransactionUpdate(function(){var t;for(t in e)if(Object.hasOwnProperty.call(e,t)){let n=t.split(","),i=O(n[n.length-1]);null!==i&&i.filter(function(e){return e.getRIRpath().toString()===t}).forEach(function(n){Q(n,{attributes:e[t]})})}})},Y=function(e,t){Array.isArray(e)&&e.length>0&&Ae.withTransactionUpdate(function(){e.forEach(function(e){let n=e.split(","),i=O(n[n.length-1]);null!==i&&i.filter(function(t){return t.getRIRpath().toString()===e}).forEach(function(e){e.removeAttribute(t)})})})},j=function(t,n){var i,o,r,a=s.getBehavior("TreeListViewBehavior");if(Ae.prepareUpdate(),i=a.getRelationNodeOptions(t,n),e.is(i))for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r=i[o].attributes,e.is(r)&&q(o,{attributes:r}));Ae.pushUpdate()},Z=function(t){var n,i,o,r,a,u=l.getReference(t.getReferencePID()),c=s.getBehavior("TreeListViewBehavior"),d=s.getBehavior("TLV3DViewerBehavior"),g=s.getBehavior("GraphViewBehavior");(e.is(t)||e.is(c))&&(t.isRoot(!0)?(n=o=c.getReferenceNodeOptions(u),e.is(d)&&(r=d.getReferenceNodeOptions(),n=e.merge(o,r)),e.is(g)&&(a=g.getReferenceNodeOptions(u),n.grid=e.merge(o.grid,a.grid))):(i=l.getInstance(t.getInstancePID()),n=o=c.getInstanceNodeOptions(u,i,t.getAbsolutePath()),e.is(d)&&(r=d.getReferenceNodeOptions(),n=e.merge(o,r)),e.is(g)&&(a=g.getInstanceNodeOptions(u,i),n.grid=e.merge(o.grid,a.grid))),t.updateOptions(n),_(t))},ee=function(t,n){const i=(e=>t=>e.filter(e=>((e,t)=>e===t.getReferencePID())(t,e)||((e,t)=>!!(e=>!e.isRoot())(t)&&e===t.getInstancePID())(t,e)))(n),o=s.getBehavior("CfgColumnsBehavior");if(e.is(o)){let e={data:[],pids:[]};Ae.prepareUpdate();try{o.getCombinedEntriesFromUpdatedAttributesObj(t).forEach(([t,n])=>{const r=o.trimAttributesBasedOnVisibleDataIndices(n),a=i(t);for(let e of a)Q(e,{attributes:r});e.data.push(n),e.pids.push(t)}),s.notify("updateEffectivity",e)}finally{Ae.pushUpdate()}}},te=function(t,n){var i=n||null,o=t.getState();e.is(i)||(i=t.hasChildren()?t.isExpanded()?Ce:De:be),!0===t.fromXEN?t.setState({state:be}):i!==o&&(i===ye?t._expandState="expandingState":t.setState({state:i}))},ie=function(n){return new t(function(t,i){e.is(n,"function")?setTimeout(function(){e.is(V)?V.acquire().then(function(){const o=n();e.is(o.then,"function")?o.then(function(){V.release(),t()}).catch(function(e){V.release(),i(e)}):(V.release(),i("promiseSupplier is not returning a Promise"))}):i("_mutex is not initialized")},5):i("Given promiseSupplier is not a function")})},oe=function(n){var i=s.getBehavior("TreeListViewBehavior");i.isInverseRelationColumnPresent()&&ie(()=>new t(function(t,i){var o,r,a=new Set,u=[],c=[],d=!1;o=n.filter(function(t){var n=!1;return!!e.is(t.options.areInverseRelationColumnsFilled,"boolean")&&t.options.areInverseRelationColumnsFilled||(l.needToQueryForConnections(t.getReferencePID())||e.is(t.getInstancePID())&&l.needToQueryForConnections(t.getInstancePID())?n=!0:c.push(t)),n}),c.length>0&&(c.forEach(function(e){Z(e),e.options.areInverseRelationColumnsFilled=!0}),d=!0),o.length>0?(o.forEach(function(t){var n=t.getInstancePID();e.is(n)&&a.add(n),a.add(t.getReferencePID())}),a.forEach(function(e){u.push(e)}),(r=o).forEach(function(e){e.options.areInverseRelationColumnsFilled=!1}),l.getInverseConnectionsFromServer(u,{onComplete:function(){r.forEach(function(e){Z(e),e.options.areInverseRelationColumnsFilled=!0}),s.notify("nodesUpdatedInAsync",s.getId()),t()},onFailure:function(e){i(e)}})):(d&&s.notify("nodesUpdatedInAsync",s.getId()),t())})).catch(function(e){s.log("Inverse Relation Column update failed. Reason: "+e)})},re=function(t,n){let i=null,o={};const r=function(){let t;return e.is(i)?t=i:(t=n.filter(function(e){return!ce(e)}),i=t),t};m.isExpandFetchFetchEnabled()&&"Index"===s.getPreferenceValue("navigateOnIndex")&&!l.isAuthoringMode()&&oe(r());const a=s.getBehavior("AltSubBIBehavior");e.is(a)&&a.isCmdActive()&&a.showBIStatus(r());const u=s.getBehavior("CfgColumnsBehavior");e.is(u)&&u.isAnyCfgColumnVisible()&&ae(r());const c=s.getBehavior("OperationTimeBehavior");if(e.is(c)&&c.isColumnVisible()){let t=r().map(e=>e.getRIRpath());o=e.extend(o,c.getUpdateOptionsForVisibleNodes(t),!0)}Object.keys(o).length>0&&J(o)};const Ee=e=>t=>{Ae.prepareUpdate();for(let n of t)n.updateOptions({areCfgColumnsFilled:e});return Ae.pushUpdate(),t};return ae=function(n){const i=Ee(!0),o=Ee(!1),r=s.getBehavior("CfgColumnsBehavior");e.is(r)&&ie(()=>(function(n,r){return new t((t,a)=>{const s=r.filter(t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled));if((e=>e.length>0)(s)){o(s);const e=n.getNodeIdsObjAsPerExternalSpec(s);n.updateAttributes(e).then(e=>{ee(e,s),i(s),t()}).catch(function(e){a("Something failed while updating Cfg attributes in Tree: "+e)})}else t()})})(r,n)).catch(function(e){s.log("Updating Configuration columns failed. Reason: "+e)})},se=function(e){var t=O(e);Array.isArray(t)&&t.forEach(Z)},le=function(){var t;s.getBehavior("TreeListViewBehavior").has3DHideShowColumn()&&(t=Ae.getMatchingNodeModels(function(t){var n=t.options.hideShow3D,i=!1;return e.is(n,"boolean")&&(i=!1===n),i})).length>0&&(Ae.prepareUpdate(),t.forEach(function(e){e.updateOptions({hideShow3D:!0})}),Ae.pushUpdate())},ce=function(t){return!(!e.is(t)||!e.is(t.getNodeSource,"function"))&&t.getNodeSource()===o.NODE_SOURCE.GROUPING},de=function(e){return new o({label:u.getNLSValue(e),grid:{},useAsyncPreExpand:!1,referenceType:e+"Node",referencePID:e+"Node"})},ge=function(e){return(e=>{const{found:t}=x([e]);return t})(e).filter(e=>!e.isRoot())},M=function(e){var t=this;t.withTransactionUpdate(function(){e.forEach(e=>{t.selectNode(e)})})},N=function(e){var t=this;t.withTransactionUpdate(function(){e.forEach(e=>{t.unSelectNode(e)})})},me=function(e,t,n,i){var o=l.getReference(e);n&&(Ve=0),t.addNode(o,{forceDBMode:!1,isFlatView:n,rootId:e,filterQuery:i}),n||t.expandAllRoots(),Ae.reapplyFilterModel()},he=function(e){const{found:t}=x(e);return t},Ie=function(){return Ae._xso.get()},ve=function(t){if(e.is(t)&&"success"===t.status&&e.is(t.references))for(let e of t.references){const t=e.physicalid,n=e.partNumber;l.getReference(t).set("EnterpriseExtension.V_PartNumber",n)}else s.warn(u.getNLSValue("Error.EnterpriseExtension.V_PartNumber.Update"))},{listenTo:function(){return{changeSortIndex:this.onChangeSortIndex,Hide:this.onHideRootNode,HideAll:this.onHideAll,visibleNodesChanged:re,updateRelationsColumn:se,Filter3DApplied:le,selectNodes:M,unSelectNodes:N,updateNodes:J,unsetNodeAttr:Y,updateEINAttribute:ve}},onStart:function(t){var n=l.isNavigateOnDemand();b=!!e.is(t.registerRoots)&&t.registerRoots,y=e.is(t.withLinksResolved,"boolean")?t.withLinksResolved:!n,P=e.is(t.displayBadgeProductScope)?t.displayBadgeProductScope:null,C=e.is(t.displayBadgeProcessScope)?t.displayBadgeProcessScope:null,D=e.is(t.displayBadgePartialProductScope)?t.displayBadgePartialProductScope:null,S=e.is(t.displayBadgePartialProcessScope)?t.displayBadgePartialProcessScope:null,R=e.is(t.displayBadgeRPL)?t.displayBadgeRPL:null,w=Ae.onPreExpand(X),L=Ae.onPreCollapse(z),E=Ae.onPostCollapse(K),B(),T=s.getBehavior("CrossHighlightBehavior"),V=new r,A=!!e.is(t.noExpandServerCall,"boolean")&&t.noExpandServerCall},onStop:function(){Ae.empty(),e.is(L)&&(this.removeEventListener(L),L=void 0),e.is(E)&&(this.removeEventListener(E),E=void 0),this.removePreExpandListener(),V.destroy(),V=null},removePreExpandListener:function(){e.is(w)&&(this.removeEventListener(w),w=null)},validate:function(t){var n;return e.is(t)&&e.is(F(t.get("PID")))&&((n={}).key="AlreadyRoot",n.param="referenceName",n.paramValue=t.get("PLMEntity.V_Name")),n},getNodeModel:function(e,t){return O(e,t)},getNodeInfo:function(t,n){var i,o=null,r=O(t,n);return i=function(e){return{label:e.getLabel(),referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),referenceType:e.getReferenceType(),absPath:e.getAbsolutePath()}},Array.isArray(r)?o=r.map(i):e.is(r,"object")&&(o=i(r)),o},addNodeModel:function(e,t){return U(e,t)},removeNode:function(t,n){var i=[],o=s.getBehavior("TaggerBehavior"),r=function(){var t=s.getBehavior("DropZoneViewBehavior");k()&&e.is(t)&&(t.setIcon(t.iconEnum.DROPHERE),t.show()),e.is(n,"function")&&n()};(e.is(t,"string")?Ae.searchTree(t):e.is(t,"array")?t:[t]).forEach(function(t){var n,r,a;e.is(o)&&(n=t.getAllDescendants(void 0,!0),e.is(n)&&(i=n.map(function(e){return{PID:e.getID(),Path:e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),event:"remove"}})),i.push({PID:t.getID(),Path:t.isRoot(!0)?t.getReferencePID():t.getAbsolutePath().toString(),event:"remove"})),t.isRoot(!0)?(a=t.getID(),t.remove(),!0===b&&p.removeRoot(s.getId(),a),s.notify("removeRoot",a)):(r=t.getParent())&&r.removeChild(t)}),e.is(o)&&!l.isStandAlone()?o.getNodeUpdatePromise(i).then(r).catch(r):r()},removeNodes:function(e,t){var n;Array.isArray(e)?(n=Ae.searchTree(e),this.removeNode(n,t)):t()},hideNodes:function(t){var n,i,o=[],r={};e.is(t,"array")&&t.length>0&&(n=s.getBehavior("ExpandFilterBehavior"),e.is(n)&&n.resetFilterUI(),o=t.filter(function(t){return e.is(t)&&t.isRoot(!0)}),r={callback:this.removeNode,globalArray:o,context:this,blockSize:50},Ae.prepareUpdate(),Ae.getXSO().empty(!1),l.getExecuteByBlockPromise(r).then(function(){var t=[];Ae.pushUpdate(),e.is(o,"array")&&o.length>0&&(o.forEach(function(e){var n=l.getReference(e.getID());t.push(n)}),s.notify("hideRootNode",[t])),i=p.getRoots(),e.is(i,"array")&&0===i.length&&l.resetCollections()}))},onHideRootNode:function(){this.hideNodes(Ae.getSelectedNodes())},onHideAll:function(){this.hideNodes(Ae.getRoots(!0))},updateCfgColumnsForCommandUpdates:function(e,n){const i=Ee(!0),o=he(e);(e=>e.length>0)(o)&&ie(()=>(ee(n,o),i(o),t.resolve())).catch(function(e){s.log("Updating Configuration columns failed. Reason: "+e)})},onChangeSortIndex:function(t){var n=Ae.getTreeNodeModel(t.get("PID"));e.is(n)&&(n.setAttribute("sortIndex",t.get("sortIndex")),n.getParent().sortChildren({isRecursive:!1,sortFunction:function(e,t){return e.options.grid.sortIndex<t.options.grid.sortIndex?-1:1}}))},isSelected:function(t){var n=O(t,!1),i=!1;return e.is(n,"array")&&(i=n.some(function(e){return e.isSelected()})),i},isNodeAdded:function(t){var n=O(t,!0);return e.is(n)},selectNode:function(t){var n=O(t,!1);e.is(n,"array")&&n.forEach(function(e){e.isSelected()&&e.unselect(),e.select()})},unSelectNode:function(t){var n=O(t,!1);e.is(n,"array")&&n.forEach(function(e){e.isSelected()&&e.unselect()})},updateBadge:function(t,n){var i;Array.isArray(t)?(i=Ae.searchTree(t),e.is(i)&&W(i,n)):e.is(t)&&(i=O(t,!1),e.is(i)&&W(i,n))},getWUXNodeModel:function(){return Ae},unSelectAll:function(){Ae.unselectAll()},withTransactionUpdate:function(e){Ae.withTransactionUpdate(e)},prepareUpdate:function(){Ae.prepareUpdate()},pushUpdate:function(){Ae.pushUpdate()},getRoots:function(){return Ae.getRoots(!0).map(function(e){return e.getReferencePID()})},getRootNodes:function(){return Ae.getRoots(!0)},getChildren:function(t){var n=O(t,!0),i=[];return e.is(n)&&(i=n.getChildrenPID()),i},getAllDescendants:function(){return Ae.getAllDescendants(!0)},getVisibleNodesInViewport:function(){var t,n,i,o,r=s.getBehavior("TreeListViewBehavior").getTreeListViewManager(),a=[];if(e.is(r))for(i=(n=r.getDataGridViewLayout().getMinMaxVisibleRowIDs()).minRowID,t=r.getDataGridViewModel();i<=n.maxRowID;i++)o=t[i],!ce(o)&&e.is(o)&&a.push(o);return a},getSelectedNodes:function(){return Ie()},getHighlightedNodes:function(){return Ae.getHighlightedNodes()},getSelectedNodesInfo:function(){return this.getSelectedNodes().map(function(e){return{id:e.getID(),absPath:e.getAbsolutePath()}})},update3DNodeOptions:function(e){var t=this.getSelectedNodes();t.length>0&&(Ae.prepareUpdate(),t.forEach(function(t){t.updateOptions({hideShow3D:e})}),Ae.pushUpdate())},emptyNodeModel:function(){var t,n=s.getBehavior("ExpandFilterBehavior");if(e.is(n)&&n.clear(),Ae.prepareUpdate(),e.is(Ae)){const e=this.getSelectedNodes();Array.isArray(e)&&e.length>0&&Ae._xso.empty(),Ae.empty()}Ae.pushUpdate(),Ae._numberOfNodesInDocument<1&&(t=s.getBehavior("DropZoneViewBehavior"),e.is(t)&&t.show())},addEventListener:function(e,t){return Ae.getModelEvents().addEventListener(e,t)},removeEventListener:function(e){Ae.getModelEvents().unsubscribe(e)},addNode:function(t,n){var i,o,r,a,u,c=n||{},d=e.is(c.loadRootOnly,"boolean")?c.loadRootOnly:s.getPreferenceValue("loadRootOnly"),g=!e.is(c.loadChildren,"boolean")||c.loadChildren,f=!e.is(c.silentMode,"boolean")||c.silentMode,p=e.is(c.withLinksResolved,"boolean")?c.withLinksResolved:y,h=!!e.is(c.doNotExpand,"boolean")&&c.doNotExpand,m=!!e.is(c.forceDBMode,"boolean")&&c.forceDBMode,I=!!e.is(c.updateItem,"boolean")&&c.updateItem,v=e.is(c.onAddToTreeListFail,"function")?c.onAddToTreeListFail:null,b=e.is(c.onAddToTreeListComplete,"function")?c.onAddToTreeListComplete:null,P={noTimeout:!0},C=!!e.is(c.fromXEN,"boolean")&&c.fromXEN,D=!e.is(c.loadRelatedobjectsToView,"boolean")||c.loadRelatedobjectsToView,S=e.is(c.filterQuery)?c.filterQuery:null;a=function(t,n){var i="";e.is(n)&&(i=n.getLabel(),g&&!n.isExpanded()&&n.expand(),Z(n),s.notify("addRootNode",[n.getID(),{loadRelatedobjectsToView:D}])),s.notify("stopProgress",P),e.is(b,"function")&&b(t,i)},u=function(n){var i=Ae.getTreeNodeModel(t.get("PID"));s.notify("stopProgress",P),Array.isArray(i)&&i.length>0&&i.forEach(function(e){e&&e.getState()===ye&&(te(e,De),e.options.children=[])}),e.is(v,"function")&&v(n)},(c=e.merge(c,{loadChildren:g,silentMode:f,withLinksResolved:p,forceDBMode:m,updateItem:I,onFailure:u,loadRootOnly:d,fromXEN:C,includeXcadDrawings:s.getPreferenceValue("includeXcadDrawingsInEBOMView")})).isFlatView=!!e.is(c.isFlatView,"boolean")&&c.isFlatView,Ae.prepareUpdate(),t.isReference()?(s.notify("startProgress",P),c.onEndAddToNodeList=a,H(t.get("PID"),null,c)):t.isInstance()&&(o=l.getAggregatingReferenceModelFromInstance(t),r=l.needToQueryForChildren(o),e.is(o)&&(i=Ae.searchTree(o.get("PID")),e.is(S)&&(i=i.filter(function(e){return e.isRoot()})),e.is(i)&&i.length>0&&i.forEach(function(e){var n,i={noTimeout:!0};s.notify("startProgress",i),n=e.getState(),H(t.get("PID"),e,c),r?(te(e,Pe),h=!0):n===De?ne(e)||(te(e,Pe),h=!0):n===Pe&&(te(e,Pe),h=!0),h||e.isExpanded()||e.expand(),s.notify("stopProgress",i)}))),Ae.pushUpdate()},addOccurences:function(t){var n,i,o=[],r={},a=[],u=[];n=function(t,n){e.is(r[t])||(r[t]=[]),r[t].push(n)},i=function(t,n){var i=t.getState();e.is(n)&&n===Pe?te(t,Pe):i===De&&(ne(t)?t.expand():te(t,Pe))},t.forEach(function(e){o=o.concat(e.filter(e=>o.indexOf(e)<0))}),Ae.searchTree(o).forEach(function(t){var i=t.getReferencePID(),o=t.getInstancePID();e.is(i)&&(n(i,t),a.indexOf(i)<0&&a.push(i)),e.is(o)&&u.indexOf(o)<0&&u.push(o)}),t.forEach(function(e){e.forEach(function(t,o){var c,d,g,f,p,h;0===o?(d=e[o],a.indexOf(d)<0?(f=l.getReference(d),h=fe(f,{forceIntializeChildren:!0}),te(h,Pe),n(d,h),a.push(d),s.notify("addRootNode",[d])):r[d].forEach(function(e){i(e)})):o%2!=0&&(u.indexOf(t)<0?(c=e[o-1],d=e[o+1],g=r[c],f=l.getReference(d),p=l.getInstance(t),g.forEach(function(e){var o=e.getState();h=pe(p,f,e,null,{forceIntializeChildren:!0}),te(h,Pe),i(e,o),n(d,h),u.push(t),a.indexOf(d)<0&&a.push(d)})):(d=e[o+1],r[d].forEach(function(e){i(e.getParent())})))})})},updateNode:function(t,n){var i=O(t);n=n||{},e.is(i,"array")&&(Ae.prepareUpdate(),i.forEach(function(t){e.is(n.loadChildren)&&n.loadChildren&&(G(t,n),(t.isSelected()||t.isRoot(!0))&&t.expand()),Z(t)}),Ae.pushUpdate())},updateAttributes:function(t){var n,i=s.getBehavior("TreeListViewBehavior");e.is(t)?(n=i.getUpdateNodeOptions(t),e.is(n)&&q(t.get("PID"),n),j(t)):s.debug("updateAttributes: Input model is undefined.")},updateDocAttributes:function(t){var n,i=s.getBehavior("TreeListViewBehavior");Ae.prepareUpdate(),n=i.getDocumentNodeOptions(t),e.is(n)&&q(t,n),Ae.pushUpdate()},reparent:function(t){var n,i,o,r,a,u,c,d,g=this,f={},p=function(e,t){return e.add(t)};e.is(t)&&(s.notify("startProgress",f),Ae.prepareUpdate(),a=t.formerParentsPIDArray,u=t.movedInstPIDArray,Array.isArray(a)&&(c=a.reduce(p,new Set),d=new Set,Array.isArray(u)&&(d=u.reduce(p,d)),c.forEach(function(e){var t;t=O(e),Array.isArray(t)&&t.forEach(function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.filter(function(e){return d.has(e.getInstancePID())}).forEach(function(e){e.remove()})})})),n=t.newParentPID,i=t.newInstPIDArray,e.is(n,"string")&&(o=O(n),Array.isArray(o)&&(o.forEach(function(e){r=e.getChildren(!0),Array.isArray(r)&&r.forEach(e=>e.remove())}),Array.isArray(i)&&i.forEach(function(t){var n=l.getInstance(t);e.is(n)&&g.addNode(n)}))),Ae.pushUpdate(),s.notify("stopProgress",f))},expandAll:function(e){var t=Array.isArray(e)?e:[e];t.length>1&&(t=t.filter(function(e,t,n){return e.getParents().every(function(e){return-1===n.indexOf(e)})})),t.forEach(function(e){e.expandAll()})},collapseAll:function(e){var t,n;(Array.isArray(e)?e:[e]).forEach(function(e){n=e.getState(),e.hasChildren()&&n!==De&&(t=n,e.collapseAll(),t===Pe&&(e.removeChildren(),te(e,Pe)))})},expandAllRoots:function(){Ae.getRoots(!0).forEach(function(e){e.expandAll()})},isFilterAppliedInAnyRoot:function(){return Ae.getRoots(!0).some(function(e){return e.isRootFiltered()})},filterChildren:function(t,n){var i,o=this,r=n||null,a=!!e.is(r),s=a?{filterQuery:r}:{};i=F(t),e.is(i)&&(i.setRootFiltered(a),Ae.withTransactionUpdate(function(){i.hasChildren()&&i.getChildren(!0).slice().forEach(function(e){o.removeNode(e)}),l.getFilteredInstancesFromCollection(i.getReferencePID(),r).forEach(function(e){o.addNode(e,s)}),a?l.needToQueryForChildren(i.getReferencePID())&&i.getState()===Pe&&te(i):l.needToQueryForChildren(i.getReferencePID())&&i.getState()!==Pe&&te(i,Pe)}))},removeFilterFromAllRoots:function(){var t,n=this;return t=Ae.getRoots(!0).filter(function(e){return e.isRootFiltered()}),Ae.prepareUpdate(),t.forEach(function(e){e.setRootFiltered(!1)}),we.traverseTreeListView(function(t){t.getState()===De&&(t.getChildren(!0).slice().forEach(function(e){n.removeNode(e)}),e.is(t.options.children)||(t.options.children=[])),te(t,Pe)}),Ae.pushUpdate(),t.map(function(e){return e.getReferencePID()})},isDocumentEmpty:function(){return k()},setTaggerColor:function(e,t){var n;Array.isArray(e)&&(n=x(e).found,Array.isArray(n)&&n.length>0&&(Ae.prepareUpdate(),n.forEach(function(e){e.updateOptions({color:t.color})}),Ae.pushUpdate()))},getMutex:function(){return V},updateNodeOptions:function(t,n){var i;(i=x(t).found).length>0&&(Ae.prepareUpdate(),i.forEach(function(t){var i=e.clone(n);t.updateOptions(i)}),Ae.pushUpdate())},setSortOptions:function(e,t){Se.virtualColumnID=e,Se.sortOrder=t},isFakeNodeModel:function(e){return ce(e)},getGroupingNode:function(e){return de(e)},addGroupingNode:function t(n,i,r,a,c){var d,g=[],f=s.getBehavior("TreeListViewBehavior");return e.is(r)&&r.length>0?(g=r.map(function(e){var t;return t=e.isReference()?f.getReferenceNodeOptions(e):f.getInstanceNodeOptions(l.getReferenceModelFromInstance(e),e),new o(t)}),d=new o({label:u.getNLSValue(n),children:g,grid:{},useAsyncPreExpand:!1,referenceType:n+"Node",referencePID:n+"Node"}),i.addChild(d)):e.is(a)&&a?(d=new o({label:u.getNLSValue(n),grid:{},icons:[u.getIconURLFromKey(c)]}),i.addChild(d)):(d=de(n),i.addChild(d),Object.keys(r).forEach(function(e){t(e,d,r[e])})),d.isExpanded()||d.expand(),d},addNodeToGroupNode:function(e,t,n){var i,r;return i=s.getBehavior("TreeListViewBehavior").getReferenceNodeOptions(e),r=new o(i),t.addChild(r,n),r},getTreeDocument:function(){return Ae},showOverlay:function(){var t,n,i=u.getNLSValue("View.WaitMessage"),o=s.getBehavior("TreeListViewBehavior");if(e.is(o)){for(t=o.getDataGridView();Re.length>0;)Re.shift().resolve();n=e.Promise.deferred(),Re.push(n),t.displayModalLoader(i,function(){n.promise.then(function(){t.removeModalLoader(i)})})}},removeOverlay:function(){1===Re.length&&Re.shift().resolve()},updateNodeState:function(e,t){te(e,t)},getWhereUsedInstanceIds:function(e){return ge(e).map(e=>e.getInstancePID())},getWhereUsedInstanceIdsUnderParent:function(t){let n=[];const i=O(t);if(Array.isArray(i)&&i.length>0){const o=i.filter((t=>n=>e.equals(n.getAbsolutePath(),t))(t));if(1===o.length){const e=o[0];n=(e=>e.getBrothers())(e).concat(e).filter((e=>t=>t.getReferencePID()===e)(e.getReferencePID())).map(e=>e.getInstancePID())}}return n},resetConfigColumns:function(){const n=Ee(!1),i=(t,i)=>{const o=t.filter(t=>e.owns(t.options,"areCfgColumnsFilled"));o.length>0&&n(o),e.is(i,"function")&&i()},o=this;(e=>new t(n=>{ie(()=>(e=>new t(t=>{const n={callback:i,globalArray:e,context:null,blockSize:100};l.getExecuteByBlockPromise(n).then(()=>{t()}).catch(()=>{t()})}))(e)).then(function(){n()}).catch(function(e){s.log("Resetting Configuration columns failed. Reason: "+e),n()})}))(o.getAllDescendants()).then(function(){ae(o.getVisibleNodesInViewport())})},getFlattenNodeModel:function(t,n,i){var o=this;e.is(t)&&t.forEach(function(e){me(e,o,n,i)})},setForceIndexMode:function(e){Le=e}}}}});