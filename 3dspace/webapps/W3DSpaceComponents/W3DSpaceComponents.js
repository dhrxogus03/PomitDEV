define("DS/W3DSpaceComponents/Utils/Helpers",[],function(){"use strict";return{filterXSS:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}}),define("DS/W3DSpaceComponents/Utils/SecurityContext",[],function(){"use strict";return{getPreferred:function(e){var t,r=e.get("contexts"),n=["VPLMProjectLeader","VPLMCreator","VPLMExperimenter","VPLMViewer","VPLMProjectAdministrator","3DSRestrictedLeader","3DSRestrictedAuthor","3DSRestrictedContributor","3DSRestrictedReader","3DSRestrictedOwner","VPLMSecuredCrossAccess"];if(r&&!r[0].role){var a=[];r.map(function(e){a.push({name:e,role:e.split(".")[0]})}),r=a}var s=r.map(function(e){for(var t=e.role?e.role:e.split(".")[0],r=0;r<n.length;r++)if(t===n[r])return r;return n.length});return(t=r.filter(function(e){return e.role===n[Math.min.apply(null,s)]}))&&t[0]?t[0].name:r[0].name},getNominalContext:function(e){var t,r,n=e&&e.get("contexts")?e.get("contexts"):[];for(t=0;t<n.length&&("VPLMProjectAdministrator"===(r=n[t]).role||"3DSRestrictedOwner"===r.role);t++);return r&&r.name?r.name:null}}}),define("DS/W3DSpaceComponents/Actions/Share/shareFactory",["UWA/Core","UWA/String","DS/UIKIT/Input/Toggle"],function(e,t,r){"use strict";return{createCheckboxWithContent:function(e){var t=n(),s=e.content,i=!!e.isChecked;!0!==i&&s.hide();var o=e.checkboxOptions,c=new r(Object.assign({checked:i,events:{onChange:function(){c.isChecked()?s.show():(window.CheckboxOrgSelect=!1,s.hide())}}},o));return[c,s].reduce(a,t),t},makeElement:n,onEmailAddress:function(e){return{resourceid:e,label:e,email:e}},createCheckboxAndContent:function(e){var t=n(),s=e.normalView,i=e.restrictedView,o=e.checkboxOptions,c=new r(Object.assign({events:{onChange:function(){c.isChecked()?(s.hide(),i.show()):(i.hide(),s.show())}}},o));return[c,i,s].reduce(a,t),t}};function n(e){var t=e||{},r=t.element||"div";"string"==typeof t&&(r=t);var n=t.classes||[],a=document.createElement(r);if("string"==typeof n)return a.classList.add(n),a;for(var s=0;s<n.length;s+=1)a.classList.add(n[s]);return a}function a(e,t){return t.nodeName||(t=t.getContent()),e.appendChild(t),e}}),define("DS/W3DSpaceComponents/Views/SuperModal",["DS/UIKIT/SuperModal","css!DS/UIKIT/UIKIT.css"],function(e){"use strict";var t=new e({className:"w3ddrive",closable:!0,renderTo:document.body}),r=t.modalFactory,n=function(e){e.stopPropagation()};return t.modalFactory=function(){var e=r.apply(this,arguments),a=e.elements.container;return e.onShowModal=function(){t.next(),a.addEventListener("click",n)},e.onHide=function(){setTimeout(function(){a.removeEventListener("click",n)})},e},t}),define("DS/W3DSpaceComponents/Utils/errors",[],function(){"use strict";return function(){return{xmlhttprequestCodes:{BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,CONFLICT:409,PRECONDITION_FAILED:410,INTERNAL_SERVER_ERROR:500}}}}),define("DS/W3DSpaceComponents/Utils/Alert",["DS/UIKIT/Alert","DS/W3DSpaceComponents/Utils/Helpers","i18n!DS/W3DSpaceComponents/assets/nls/W3DSpaceComponents","css!DS/UIKIT/UIKIT.css"],function(e,t,r){"use strict";var n,a,s=(n=new e({className:"w3dspace",autoHide:!0,closable:!0,visible:!0,renderTo:document.body})).add;return n.add=function(e){return"error"!==e.className&&"warning"!==e.className||(n.options.hideDelay=1e4),e.message=t.filterXSS(e.message),s.call(n,e)},n.addAndCallback=function(e){var i={};a=e.callback,"error"!==e.className&&"warning"!==e.className||(n.options.hideDelay=1e4),i.className=e.className,i.message=t.filterXSS(e.message);var o=document.createElement("div");return o.className="btn-link",o.innerText=r.moreDetails,i.message+=o.outerHTML,s.call(n,i)},n.onClick=function(e,t){t.getElementsByClassName("btn-link").length>0&&a&&"function"==typeof a&&a()},n.addwithBold=function(e){return"error"!==e.className&&"warning"!==e.className||(n.options.hideDelay=1e4),e.message=t.filterXSS(e.message),e.message+=" </br> <b>"+e.bold+"</b>",s.call(n,e)},n}),define("DS/W3DSpaceComponents/Views/detailsModalError",["DS/W3DSpaceComponents/Views/SuperModal","DS/UIKIT/Scroller","i18n!DS/W3DSpaceComponents/assets/nls/W3DSpaceComponents","css!DS/UIKIT/UIKIT.css","css!DS/W3DSpaceComponents/W3DSpaceComponents.css"],function(e,t,r){"use strict";return function(n){var a=n.title?n.title:r.details,s=n.message?n.message:"",i="",o=n.items,c=document.createElement("div"),d=document.createElement("div");d.classList.add("errorDetail"),o.map(function(e){return i=i.concat("- ").concat(e).concat("</br>")}),d.innerHTML=i,new t({element:d}).inject(c);var l=document.createElement("div");l.innerHTML=s,l.appendChild(c);var u={title:a,body:l,buttons:[{value:r.close,action:function(e){e.hide()}}]};e.dialog(u)}}),define("DS/W3DSpaceComponents/Utils/RequestHelper",["UWA/Data","UWA/String","UWA/Services/Auth","DS/WAFData/WAFData","DS/W3DSpaceComponents/Utils/errors","DS/W3DSpaceComponents/Utils/Alert","i18n!DS/W3DSpaceComponents/assets/nls/W3DSpaceComponents"],function(e,t,r,n,a,s,i){"use strict";const o=a().xmlhttprequestCodes;let c;const d={_tenant:null,_baseUrl:null,hasTenant:function(){return Boolean(this._tenant)},manageFailure:function(e,t,r,n){if(r&&"function"==typeof r)r(e,t,n);else switch(e){case o.CONFLICT:s.add({message:i.replace(i.duplicationError,{msg:t.error.message,fileName:t.error.filename}),className:"error"});break;default:s.add({message:i.unexpectedError,className:"error"})}},performRequestWithOptions:function(e,t={}){let a;e=d.addQueryStrings({url:e,queryStrings:{tenant:t.auth.platformId}}),!t.auth||t.auth instanceof r||(t.headers||(t.headers={}),t.headers["X-DS-CSRFTOKEN"]=c||"",a=t.onComplete,t.onComplete=function(e,t,r){var n=Object.keys(t).filter(function(e){return-1!==e.search(/x-ds-csrftoken/i)});c=n.length>0?t[n[0]]:c,"function"==typeof a&&a(e,t,r)}),t.type||(t.type="json");var s=null;let i;return t.onFailure&&(s=t.onFailure),t.onFailure=function(e,t){d.manageFailure(i.xhr.status,t,s,{xhr:i.xhr})},i=n.authenticatedRequest(e,t)},addQueryStrings:function(e={}){if(!e.url)return"";let t=e.url.includes("?")?e.url:e.url+"?";const r=e.queryStrings;return r&&Object.keys(r).forEach(e=>{let n="&"+e;const a=r[e];void 0!==a&&(n+="string"==typeof a?"="+a:"","?"===t[t.length-1]&&(n=n.substring(1,n.length)),t+=n)}),t}};return d}),define("DS/W3DSpaceComponents/Views/shareCollaborativeSpace",["UWA/String","UWA/Class/View","UWA/Class/Promise","DS/UIKIT/Autocomplete","DS/W3DXComponents/Views/Item/PanelAddMemberView","DS/W3DSpaceComponents/Views/SuperModal","DS/W3DSpaceComponents/Utils/Alert","DS/W3DSpaceComponents/Actions/Share/shareFactory","DS/W3DSpaceComponents/Utils/RequestHelper","DS/W3DSpaceComponents/Utils/SecurityContext","DS/W3DSpaceComponents/Views/detailsModalError","i18n!DS/W3DSpaceComponents/assets/nls/W3DSpaceComponents","css!DS/W3DSpaceComponents/W3DSpaceComponents.css"],function(e,t,r,n,a,s,i,o,c,d,l,u){"use strict";return function(m){if(!m)throw new Error("Missing input");s.dialog({title:u.replace(u.addMembersTitle,{name:m.get("title")}),body:[{tag:"div",class:"shareview__description",html:u.get("addMembersToCS")}]}),function(m){return new r(function(p){var f,g,h=new t,b={},w=m.drive._attributes.availableRoles||[],S=w.some(function(e){return-1!==e.indexOf("restricted")});b.view=h,b.inode=m;var v=function(t,n){if(!Array.isArray(t))throw new Error("You should provide a categories array input");var s,m=function(t){h&&(h.cancel(),h=null);var a=n.inode,s=a.get("owners").login,i=a._auth.platformId,o=a.drive._attributes.user.id,l=Date.now(),m="3DSpace".concat("-",o,"-",l),p=e.format("{0}/search",a._auth.platform.urls3DSearch),f={order_by:"desc",order_field:"relevance",nresults:8,label:m,with_synthesis:!1,with_synthesis_attribute:!1,tenant:i};if("OnPremise"===a.drive.id)f=Object.assign(f,{source:["3dspace"],select_predicate:["name","current","emailaddress","personsyncstate","ds6w:type","ds6w:label","ds6w:resourceUid","assigned_security_context"],query:'[ds6w:type]:(Person OR Group) AND ([ds6w:label]:"'+t.trim()+'" OR [ds6w:label]:(*'+t.trim()+"*) OR [emailaddress]:("+t.trim()+"*) OR [name]:("+t.trim()+"*)) AND ([current]:Active OR [personsyncstate]:0)",login:{"3dspace":{SecurityContext:d.getPreferred(a)}}});else{f=Object.assign(f,{source:["3dspace","usersgroup"],select_predicate:["name","current","emailaddress","personsyncstate","ds6w:type","ds6w:label","ds6w:resourceUid","dsaccess:groupMemberCount","assigned_security_context"],query:'[ds6w:type]:("foaf:Group" OR Person)',specific_source_parameter:{usersgroup:{additional_query:'AND ([ds6w:label]:"'+t.trim()+'" OR [ds6w:label]:('+t.trim()+"*))"},"3dspace":{additional_query:'AND ([ds6w:label]:"*'+t.trim()+'*" OR [ds6w:label]:(*'+t.trim()+"*) OR [emailaddress]:("+t.trim()+"*) OR [name]:("+t.trim()+"*)) AND ([current]:Active OR [personsyncstate]:0)"}},login:{"3dspace":{SecurityContext:d.getPreferred(a)}}});var g=a._auth.getStorage().urlUsersGroup;g||(f=Object.assign(f,{source:["3dspace"],query:"[ds6w:type]:(Person)",specific_source_parameter:{"3dspace":{additional_query:'AND ([ds6w:label]:"*'+t.trim()+'*" OR [ds6w:label]:(*'+t.trim()+"*) OR [emailaddress]:("+t.trim()+"*) OR [name]:("+t.trim()+"*)) AND ([current]:Active OR [personsyncstate]:0)"}},login:{"3dspace":{SecurityContext:d.getPreferred(a)}}}))}return new r(function(e,t){h=c.performRequestWithOptions(p,{type:"json",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},auth:a._auth,data:JSON.stringify(f),onComplete:function(t){var r=[];t.hasOwnProperty("results")&&(r=t.results.filter(function(e){return e.hasOwnProperty("attributes")}).map(function(e){return e.attributes.filter(function(e){return e.hasOwnProperty("name")&&e.hasOwnProperty("value")}).filter(function(e){return"dsbase:TemplateInstance"!==e.value}).map(function(e){return-1!==e.name.indexOf("ds6w:")&&(e.name=e.name.split("ds6w:")[e.name.split("ds6w:").length-1]),-1!==e.name.indexOf("dsaccess:")&&(e.name=e.name.split("dsaccess:")[e.name.split("dsaccess:").length-1]),"type"===e.name&&-1!==e.value.indexOf("foaf:")&&(e.value=e.value.split("foaf:")[e.value.split("foaf:").length-1]),e}).filter(function(e){return-1!==["name","resourceid","resourceUid","label","type","groupMemberCount","assigned_security_context","emailaddress","personsyncstate"].indexOf(e.name)})}).map(function(e){var t={security_contexts:[]},r=!1;return e.forEach(function(e){"assigned_security_context"===e.name?t.security_contexts.push(e.value):"personsyncstate"===e.name&&"0"===e.value||"label"===e.name&&-1!==e.value.indexOf("Unknown Unknown")?r=!0:"label"===e.name&&-1!==e.value.indexOf("Unknown Unknown")?(r=!0,t[e.name]=e.value):t[e.name]=e.value}),r&&t.emailaddress&&(t.label!==t.name&&-1===t.label.indexOf("Unknown Unknown")||(t.label=t.emailaddress)),r&&(t.label+=` (${u.get("pending")})`),"OnPremise"!==a._auth.platformId&&"Group"===t.type&&(t.label+=" "+u.replace(u.groupMembersCount,{total:t.groupMemberCount||0})),t}).filter(function(e){return e.resourceid!==o&&e.resourceid!==s})),e(r)},onFailure:function(e){t(e)}})})},p=n.inode,f=[],g=[];var h;t.forEach(function(e){e.id.contains("restricted")?g.push(e):f.push(e)});var b,w,S,v=[{id:"PublicReader",name:u.get("publicReader")},{id:"Reader",name:u.get("reader")},{id:"Contributor",name:u.get("contributor")},{id:"Author",name:u.get("author")},{id:"Leader",name:u.get("leader")},{id:"Owner",name:u.get("owner")},{id:"LeaderOwner",name:u.get("leaderOwner")},{id:"Readerrestricted",name:u.get("reader")},{id:"Contributorrestricted",name:u.get("contributor")},{id:"Authorrestricted",name:u.get("author")},{id:"Leaderrestricted",name:u.get("leader")},{id:"Ownerrestricted",name:u.get("owner")},{id:"LeaderOwnerrestricted",name:u.get("leaderOwner")}],C=[];b={suggestFormat:"{label}",suggestKey:"resourceid",labelFormat:"{label}",placeholder:u.get("enterName"),typeDelay:500,minLength:2,getSuggestions:function(e,t,r){if(s=function(){Object.keys(t).map(function(e){delete t[e]})},e)return t[e]?r(t[e]):void m(e).then(r,function(){console.warn("requestSuggestion call has failed")})},suggestDistinction:function(e){if(e.security_contexts){var t=(n=e.security_contexts,a=p,i=[{id:"PublicReader",context:"VPLMSecuredCrossAccess"},{id:"Reader",context:"VPLMViewer"},{id:"Contributor",context:"VPLMExperimenter"},{id:"Author",context:"VPLMCreator"},{id:"Leader",context:"VPLMProjectLeader"},{id:"Owner",context:"VPLMProjectAdministrator"},{id:"LeaderOwner",context:["VPLMProjectLeader","VPLMProjectAdministrator"]},{id:"Readerrestricted",context:"3DSRestrictedReader"},{id:"Contributorrestricted",context:"3DSRestrictedContributor"},{id:"Authorrestricted",context:"3DSRestrictedAuthor"},{id:"Leaderrestricted",context:"3DSRestrictedLeader"},{id:"Ownerrestricted",context:"3DSRestrictedOwner"},{id:"LeaderOwnerrestricted",context:["3DSRestrictedLeader","3DSRestrictedOwner"]}],o=[],(n=n.filter(function(e){return e.split(".")[2]===a.get("id")})).forEach(function(e){o.push(e.split(".")[0])}),1===o.length?i.forEach(function(e){e.context===o[0]&&(s=e.id)}):i.forEach(function(e){var t=!1;o.forEach(function(r){t=-1!==e.context.indexOf(r)}),t&&(s=e.id)}),s);for(var r in v)if(v[r].id===t)return v[r].name}var n,a,s,i,o},saveProcess:function(t){e.format("{0}/resources/enocsmrest/collabspaces/{1}/allmembers/batch",p._auth.getStorage().url3DSpace,p.get("id"));var n=t.map(function(t){var r,n=t.item,a=(r=t.categoryId)?"PublicReader"===r?{value:"PublicReader",admin:!1}:"Reader"===r?{value:"Reader",admin:!1}:"Contributor"===r?{value:"Contributor",admin:!1}:"Author"===r?{value:"Author",admin:!1}:"Owner"===r?{value:"Owner",admin:!0}:"Leader"===r?{value:"Leader",admin:!1}:"LeaderOwner"===r?{value:"Leader",admin:!0}:"Readerrestricted"===r?{value:"Reader",admin:!1,restricted:!0}:"Contributorrestricted"===r?{value:"Contributor",admin:!1,restricted:!0}:"Authorrestricted"===r?{value:"Author",admin:!1,restricted:!0}:"Leaderrestricted"===r?{value:"Leader",admin:!1,restricted:!0}:"Ownerrestricted"===r?{value:"Owner",admin:!1,restricted:!0}:"LeaderOwnerrestricted"===r?{value:"Leader",admin:!0,restricted:!0}:void 0:{},s=window.selectedOrg;return{id:"Group"===n.type?n.resourceUid:"Person"===n.type?n.name:n.resourceid,type:e.isEmail(t.selection)?"Person":n.type,role:a,collabspace:p.id,title:n.label,company:s}});return window.selectedOrg=void 0,new r(function(e,r){p.permissions.create(n,{type:"json",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},wait:!0,auth:p._auth,data:JSON.stringify(n),onComplete:function(r,n){var a=t.length;if(n.failedObjects){for(var s=n.failedObjects,o=[],c=[],d=0;d<s.length;d++)"400"===s[d].errorstatus?o=o.concat(s[d].title):c=c.concat(s[d].title);if(a===n.failedObjects.length)if(n.failedObjects.length>2)if(o.length>2&&0===c.length){var m=u.get("shareErrorCS",{name:p.get("title")});i.addAndCallback({message:m,className:"warning",callback:function(){var e={},t=u.get("shareErrorCS",{name:p.get("title")})+"</br>";return t+="Here's the list of the not added users: </br> </br>",e.items=o,e.message=t,new l(e)}})}else m=u.get("memberNotAddedCS"),i.addAndCallback({message:m,className:"warning",callback:function(){var e={},t=u.get("memberNotAddedCS")+"</br> </br>";return e.items=o.concat(c),e.message=t,new l(e)}});else o.length>0&&0===c.length?(m=u.get("shareErrorCS",{name:p.get("title")}),i.addwithBold({message:m,bold:o,className:"warning"})):(m=u.get("memberNotAddedCS"),i.addwithBold({message:m,bold:o.concat(c),className:"warning"}));else m=u.replace(u.get("multipleShareStatus")),o.length>2||c.length>2?i.addAndCallback({message:m,className:"warning",callback:function(){var e={},t=u.get("multipleShareStatus")+"</br> </br>";return e.items=o.concat(c),e.message=t,new l(e)}}):i.addwithBold({message:m,bold:o.concat(c),className:"warning"}),document.getElementsByClassName("multiOrg multiOrg--visible").length>0?e():document.getElementsByClassName("inode-panel__side-bar")[0]&&"translateX(-399px)"===document.getElementsByClassName("inode-panel__side-bar")[0].style.transform&&p.permissions.fetch({inode:p,firstLoad:!0,onFailure:function(){i.addAndCallback({message:u.replace(u.permissionError,{name:p.get("title")}),className:"error"})}})}else i.add({message:u.replace(u.get("sharesSuccessCS"),{groupName:r.get("collabspace")}),className:"success"}),document.getElementsByClassName("multiOrg multiOrg--visible").length>0?e():document.getElementsByClassName("inode-panel__side-bar")[0]&&"translateX(-399px)"===document.getElementsByClassName("inode-panel__side-bar")[0].style.transform&&p.permissions.fetch({inode:p,firstLoad:!0,onFailure:function(){i.addAndCallback({message:u.replace(u.permissionError,{name:p.get("title")}),className:"error"})}})},onTimeout:function(e){var t=new Error(e.message);t.name="Timeout",r(t)}})}).then(function(){window.orgOperatorController&&window.orgOperatorController.onAddUsersEnd()},function(e){Array.isArray(e)||(e=[e]),"RangeError"===e[0].name?i.add({message:e[0].message,className:"error"}):"Timeout"===e[0].name?i.add({message:u.replace(u.addCSMembersTimeout,{name:p.get("title")}),className:"warning"}):e.map(function(e){var t=e.inode?e.inode.get("title"):e.collection._parentInode.get("title");i.add({message:u.replace(u.shareErrorCS,{name:t}),className:"error"})})})}},p.drive._attributes.shareWithinvitation&&(b.onEmailAddress=o.onEmailAddress);if(f.length>0){var O=new a(Object.assign(b,{categories:f}));O.elements.buttons.classList.add("shareview__footer");var y=O.render,D=O.destroy;w=Object.assign(O,{render:function(){var e=y.apply(O,arguments);return O.show(),e},destroy:function(){return"function"==typeof s&&s(),D.apply(this,arguments)}})}if(g.length>0){var x=new a(Object.assign(b,{categories:g}));x.elements.buttons.classList.add("shareview__footer");var A=x.render,R=x.destroy;S=Object.assign(x,{render:function(){var e=A.apply(x,arguments);return x.show(),e},destroy:function(){return"function"==typeof s&&s(),R.apply(this,arguments)}})}if(w){var L=w.container.querySelector("button.btn-primary");L.textContent=u.addMembers,C.push(w)}if(S){var _=S.container.querySelector("button.btn-primary");_.textContent=u.addMembers,C.push(S)}return C}(function(e){if(!e)throw new Error("Missing inode");var t=function(e){var t=[];e&&(-1!==e.indexOf("PublicReader")&&(t=t.concat("PublicReader")),-1!==e.indexOf("Reader")&&(t=t.concat("Reader")),-1!==e.indexOf("Contributor")&&(t=t.concat("Contributor")),-1!==e.indexOf("Author")&&(t=t.concat("Author")),-1!==e.indexOf("Leader")&&(t=t.concat("Leader")),-1!==e.indexOf("LeaderOwner")&&(t=t.concat("LeaderOwner")),-1!==e.indexOf("Owner")&&(t=t.concat("Owner")),-1!==e.indexOf("Readerrestricted")&&(t=t.concat("Readerrestricted")),-1!==e.indexOf("Contributorrestricted")&&(t=t.concat("Contributorrestricted")),-1!==e.indexOf("Authorrestricted")&&(t=t.concat("Authorrestricted")),-1!==e.indexOf("Leaderrestricted")&&(t=t.concat("Leaderrestricted")),-1!==e.indexOf("LeaderOwnerrestricted")&&(t=t.concat("LeaderOwnerrestricted")),-1!==e.indexOf("Ownerrestricted")&&(t=t.concat("Ownerrestricted")));return t}(e.drive._attributes.availableRoles),r=[];-1===e.get("actions").indexOf("add.members.restricted")?r=t:t.forEach(function(e){e.contains("restricted")&&r.push(e)});return r.map(function(e){return function(e){var t;"PublicReader"===e?t=u.publicReader:"Reader"===e?t=u.reader:"Contributor"===e?t=u.contributor:"Author"===e?t=u.author:"Leader"===e?t=u.leader:"Owner"===e?t=u.owner:"LeaderOwner"===e?t=u.leaderOwner:"Readerrestricted"===e?t=u.restrictedReader:"Contributorrestricted"===e?t=u.restrictedContributor:"Authorrestricted"===e?t=u.restrictedAuthor:"Leaderrestricted"===e?t=u.restrictedLeader:"Ownerrestricted"===e?t=u.restrictedOwner:"LeaderOwnerrestricted"===e&&(t=u.restrictedLeaderOwner);return{id:e,name:t}}(e)})}(m),b,window.selectedOrg);-1===m.get("actions").indexOf("add.members.restricted")&&S&&(f=o.createCheckboxAndContent({normalView:v[0],restrictedView:v[1],id:"checkbox-enable-restricted",checkboxOptions:{type:"checkbox",id:"checkbox-enable-restricted",value:u.enableRestrictedRoles}})).classList.add("shareview__options"),window.selectedOrg=void 0;var C=UWA.createElement("div",{id:"searchAutoCompleteInput"}),O={remoteSearchEngine:function(t,n){var a,s;if(!n)return!1;s&&(s.cancel(),s=null);var i=b.inode,o=i.drive.get("user").id,l=e.format("{0}/search",i._auth.platform.urls3DSearch),u={tenant:i._auth.platformId,label:"3DSpace".concat("-",o,"-",Date.now())};return u=Object.assign(u,{source:["3dspace"],query:'[ds6w:type]: (Company OR Department OR Business Unit OR Plant) AND ([ds6w:label]:"'+n.trim()+'" OR [ds6w:label]:(*'+n.trim()+"*))",login:{"3dspace":{SecurityContext:d.getPreferred(i)}}}),new r(function(e,r){s=c.performRequestWithOptions(l,{type:"json",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",SecurityContext:d.getPreferred(i)},auth:i._auth,data:JSON.stringify(u),onComplete:function(r){var n=[];r.hasOwnProperty("results")&&r.results.filter(function(e){return e.hasOwnProperty("attributes")}).map(function(e){return e.attributes.filter(function(e){return e.hasOwnProperty("name")&&"ds6w:label"===e.name||e.hasOwnProperty("name")&&"ds6w:identifier"===e.name})}).map(function(e){var t=[];return e.forEach(function(e){"ds6w:label"===e.name&&(t.label=e.value),"ds6w:identifier"===e.name&&(t.value=e.value)}),n.push(t),n}),(a={}).dataset=t,a.matchingItems=n,e(a)},onFailure:function(e){r(e)}})})}},y=new n({multiSelect:!1,id:"searchAutoCompleteInput","data-category":"searchAutoCompleteInput",showSuggestsOnFocus:!0,noResultsMessage:u.noResultsMessage,allowFreeInput:!1,placeholder:u.placeHolderMsg,minLengthBeforeSearch:3,events:{onSelect:function(e){window.selectedOrg=e.value,window.CheckboxOrgSelect=!0}}}).inject(C);y.addDataset([],O),(g=o.createCheckboxWithContent({content:C,id:"checkbox-select-organization",isChecked:window.CheckboxOrgSelect,checkboxOptions:{type:"checkbox",id:"checkbox-select-organization",value:u.orgAssignment}})).classList.add("shareview__options1"),h.render=function(){for(;h.container.firstChild;)h.container.removeChild(h.container.firstChild);return v[0].show(),(f?[f,g,v[0].container,v[1].container]:[g,v[0].container]).reduce(function(e,t){return e.appendChild(t),e},h.container),h},h.elements.panelAddMemberView=v[0],v[1]&&(h.elements.panelAddMemberRestrictedView=v[1]),v.forEach(function(e){var t=e.destroy;e.destroy=function(){e=null,t.apply(this,arguments)}});var D=s.modals.current,x=D.onHide;D.onHide=function(){x.call(D),h.destroy()},v.forEach(function(e){e.onClose=function(){D.hide()}}),h.render(),p(h.container)})}(m).then(function(e){var t=s.modals.current.getBody();t.className="shareview",t.appendChild(e);var r=e.querySelector("input.temp-autocomplete-input");r&&r.focus()})}});