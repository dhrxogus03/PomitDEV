define("DS/DELPPWServices/AuthoringService",["UWA/Core","DS/CoreEvents/Events","DS/DELPPWModelServices/ModelUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWNavigationServices/SwitchDBModeManager"],function(e,t,n,i,o){"use strict";return function(r){var a=[],s=[],l=!1,c="AuthoringService",d=!1,u=function(){!1===n.getNavigateOnDatabase()&&(l=!0),o.setDbMode(!0)};return{onStart:function(n){a.push(r.addExternalListener("referenceCreated",u)),a.push(r.addExternalListener("instanceCreated",u)),a.push(r.addExternalListener("reparentInstances",u)),a.push(r.addExternalListener("reorder",u)),a.push(r.addExternalListener("replace",u)),a.push(r.addExternalListener("DuplicateAdv",u)),a.push(r.addExternalListener("createLink",u)),a.push(r.addExternalListener("deleteLink",u)),a.push(r.addExternalListener("attachDocument",u)),a.push(r.addExternalListener("editAttribute",u)),a.push(r.addExternalListener("editRichText",u)),a.push(r.addExternalListener("setSequencingMode",u)),a.push(r.addExternalListener("editLinkAttributes",u)),a.push(r.addExternalListener("lifecycleCmd",u)),a.push(r.addExternalListener("assignProduct",u)),a.push(r.addExternalListener("createMfgItemAndScope",u)),a.push(r.addExternalListener("createMfgItemAndResultingProduct",u)),a.push(r.addExternalListener("reconnectScope",u)),a.push(r.addExternalListener("createMfgItemStructure",u)),a.push(r.addExternalListener("updateMfgItemStructure",u)),a.push(r.addExternalListener("RerouteMfgItem",u)),a.push(r.addExternalListener("instanceDeleted",u)),a.push(r.addExternalListener("connectionChanged",u)),a.push(r.addExternalListener("consumeProductOnDragAndDrop",u)),a.push(r.addExternalListener("newVersionFromLifeCycleCmd",u)),a.push(r.addExternalListener("actionBarReady",function(){o.isDbMode()&&r.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"Authoring",cmdState:!0})})),s.push(t.subscribe({event:"DELPPWCommands/Authoring"},function(e){o.setDbMode(e.state),!0===o.isDbMode()?!1===d&&(!1===l?r.getLogger().info(c,i.getNLSValue("Authoring.disablingIndex")):(l=!1,r.getLogger().info(c,i.getNLSValue("Authoring.disablingIndexOnAuthoring"))),d=!0):!1===o.isDbMode()&&!0===d&&(r.getLogger().info(c,i.getNLSValue("Authoring.enablingIndex")),d=!1),r.getMediator().notify("authoringMode")})),s.push(t.subscribe({event:"SwitchDBManager/ChangeMode"},function(t){e.is(t)&&e.is(t.mode,"string")&&("indexMode"===t.mode?r.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"Authoring",cmdState:!1}):"dbMode"===t.mode&&r.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"Authoring",cmdState:!0}))})),n()},onStop:function(){var e,n;for(e=0,n=a.length;e<n;e++)r.removeExternalListener(a[e]);for(a=[],e=0,n=s.length;e<n;e++)t.unsubscribe(s[e]);s=[]}}}}),define("DS/DELPPWServices/LoggerService/LogManager",["UWA/Core","DS/Logger/Logger","DS/DELPPWLoggerModel/LoggerUtils"],function(e,t,n){"use strict";return function(t){var i,o,r,a,s,l,c,d="LogPanel-Main-Container",u={},g=null,f=-1;return r=function(){var n=o.getComponent("WUXFrameWindowsManager").getFrameWindow(t.getConfig().appContext),r=o.getComponent("Panel"),s=o.getComponent("WUXDockAreaEnum");(g=new r({title:i.getNLSValue("LogPanel.Header"),domId:"ShowLogPanel",position:{my:"top-right",at:"top-right"},immersiveFrame:n.getImmersiveFrame(),resizableFlag:!0})).allowedDockAreas=s.LeftDockArea|s.RightDockArea,g.close=function(){e.is("ShowLogPanel")&&t.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"ShowLogPanel",cmdState:!1}),a()}},a=function(){e.is(g)&&g.visibleFlag&&s(),e.is(g)&&(g.destroy(),g=void 0),f=-1},s=function(){e.is(g)&&(!0===g.visibleFlag?g.hide():g.show())},c=function(){var t,r,a,s,l,c,m=null;if(e.is(o)&&e.is(g)&&g.visibleFlag&&(u={started:i.getNLSValue("LogPanel.Started"),completed:i.getNLSValue("LogPanel.Completed"),failed:i.getNLSValue("LogPanel.Failed"),timedout:i.getNLSValue("LogPanel.TimedOut")},m=o.getComponent("Element"),(r=n.getSize())!==f))for(f=r,a=Math.min(r,1e3),g.content=new m("div",{class:d}),t=r-1;t>=r-a;t--)c=(l=n.getModel(t)).get("action"),s=i.getNLSValue("LogPanel.LineFormat",{index:l.get("index"),name:l.get("name"),action:u[c],time:l.get("time")}),(l.get("isRunning")?new e.Element("div",{text:s,styles:{fontWeight:"bold"}}):new e.Element("div",{class:"wux-textElement",text:s})).inject(g.content)},l=function(){o=t.getPlugins("UXComponentsPlugin").instance,i=t.getPlugins("ResourcePlugin").instance,e.is(g)?a():(r(),c())},n.setAddCallback(function(e,n,i){t.getMediator().notify("addLog",[e,n,i])}),{addLog:function(){c()},onShowLogPanel:function(){l()}}}}),define("DS/DELPPWServices/Services",["UWA/Class"],function(e){"use strict";var t={EventsService:"DS/DELPPWServices/EventsService",ModelService:"DS/DELPPWServices/ModelService",ConfigService:"DS/DELPPWServices/ConfigService/ConfigService",LandingPageService:"DS/DELPPWServices/LandingPageService/LandingPageService",ExternalService:"DS/DELPPWServices/ExternalService/ExternalService",FilterService:"DS/DELPPWServices/ExternalService/FilterService",LifecycleService:"DS/DELPPWServices/ExternalService/LifecycleService",LoggerService:"DS/DELPPWServices/LoggerService/LoggerService",LayoutService:"DS/DELPPWServices/LayoutService/LayoutService",AuthoringService:"DS/DELPPWServices/AuthoringService"};return e.singleton({getMap:function(){return t}})}),define("DS/DELPPWServices/ConfigService/SecurityContext",["UWA/Core","DS/CoreEvents/Events"],function(e,t){"use strict";return function(n,i,o){var r,a,s,l,c,d,u,g=[],f={},m=[],h=[];return r=function(){return widget.getValue("Credentials")},u=function(){var t,n,i=[];return e.is(f)&&f.collabspaces.length>0&&f.collabspaces.forEach(function(e){for(t=0;t<e.couples.length;t++)n=e.couples[t].organization.name,-1===i.indexOf(n)&&i.push(n)}),1===i.length},a=function(){var e,t,n,i,o,r,a,s,l,p,v,S,C=[];S=u(),f.collabspaces.forEach(function(u){for(o=0;o<u.couples.length;o++)s=u.name,a=u.title,l=u.couples[o].organization.name,r=u.couples[o].organization.title,p=u.couples[o].role.name,v=u.couples[o].role.nls,i=c(s,l,p),n=d(a,r,v,S),e={csname:s,label:n,value:i},t={collabSpace:a,organization:r,role:v,value:i},C.push({sc:i,translated:e,title:t})}),C.sort(function(e,t){return e.translated.label.localeCompare(t.translated.label,widget.lang,{numeric:!0})}).forEach(function(e){g.push(e.sc),m.push(e.translated),h.push(e.title)})},s=function(){var t,i,a,s,d;t=r(),e.is(f.preferredcredentials)&&Object.keys(f.preferredcredentials).length>0&&(d=f.preferredcredentials.role.name,s=f.preferredcredentials.organization.name,a=f.preferredcredentials.collabspace.name,i=c(a,s,d)),e.is(t,"string")&&-1!==g.indexOf(t)?(n.debug("SecurityContext.js : We retrieved the preferred SC from the widget : "+t),l(t)):e.is(i)&&-1!==g.indexOf(i)?(n.debug("SecurityContext.js : We retrieved the user's preferred SC : "+i),l(i)):(n.debug("SecurityContext.js : There is no preferred SC"),l(g[0]),n.info("ConfigService",o.getNLSValue("ApplicationInit.NoPreferredCredentials",{firstsc:g[0]})))},l=function(t){var o=r();e.is(t,"string")&&t!==o&&(n.debug("SecurityContext.js : The preferred SC "+t+" is different from the widget's "+o+" SC so we update the widget's with the preferredSC"),widget.setValue("Credentials",t),o=t),e.is(o,"string")&&(n.debug("SecurityContext.js : SecurityContext","We set the Security context with the widgetSC : "+o),i.setSecurityContext(o))},c=function(e,t,n){return"ctx::"+n+"."+t+"."+e},d=function(e,t,n,i){return i?e+" ● "+n:e+" ● "+t+" ● "+n},t.subscribe({event:"DELPPXEN/CustomizeSecurityContext"},function(e){l(e)}),{loadSecurityContexts:function(t,n){var o,r,l,c=function(){n("ApplicationInit.NoSecurityContext")};r=i.get3DSpaceServiceName(),l=i.getPlatformID({serviceId:r}),o="modeler/pno/person?current=true&select=preferredcredentials&select=collabspaces",e.is(l,"string")&&l.length>0&&"NOT_DEFINED"!==l&&(o=o+"&tenant="+l),i.webServiceRequest({url:o,method:"GET",headers:{Accept:"application/json,text/javascript,*/*","Content-Type":"application/ds-json"},onComplete:function(i){e.is(i)&&i.collabspaces.length>0?(f=i,a(),s(),t()):n("ApplicationInit.NoSecurityContext")},onFailure:c,onTimeout:c})},getAllSC:function(){return Array.isArray(m)?m:[]},getSCFromPreferences:function(){return r()},getSCTitle:function(e){var t={};return h.forEach(function(n){n.hasOwnProperty("value")&&n.value===e&&(t=n)}),t},updateSC:function(e){l(e)},isChanged:function(){var t=!1,n=i.getSecurityContext();return e.is(n,"string")&&-1===n.indexOf(r())&&(t=!0),t},getUserId:function(){var t=null;return e.is(f.name)&&(t=f.name),t}}}}),define("DS/DELPPWServices/EventsService",["UWA/Core","UWA/Json"],function(e,t){"use strict";return function(n){var i,o=["referenceAdded","instanceAdded","connectionAdded","addOccurrece","addLinkedObject","addProductOrPart","addRootNode","refreshNodeLinks","hideRootNode","removeRoot","addLog","LoadRecentContent","onRecentContentLoaded","AddMfgItemToMBOMAltSub","ReplaceByAlternate","doReplaceByMfgAlternate","referenceRemoved","instanceRemoved","connectionRemoved","referenceChanged","instanceChanged","connectionChanged","reorder","createMfgItemStructure","updateMfgItemStructure","editAttribute","reconnectScope","deleteLink","createLink","editLinkAttributes","assignProduct","createMfgItemAndScope","createMfgItemAndResultingProduct","attachDocument","referenceCreated","instanceDeleted","replace","lifecycleCmd","objectCreation","objectCreationUIClosed","objectCreationUIOpened","editRichText","changeSortIndex","select","postNodesSelected","postNodesUnselected","reComputeCrossHighlight","updateCrossHighlight","change3DVisibility","activeViewChange","startProgress","stopProgress","widgetLayoutChanged","onNodeExpanded","onNodeCollapsed","LoadIn3DViewer","ReframeIn3DViewer","HideIn3DViewer","ShowIn3DViewer","startModule","stopModule","reset","refreshAll","onRefreshedAll","RefreshCmd","refreshImpacted","endEdit","addToAuxiliaryView","toggleAuxPanel","dockingZoneToggle","SearchAndAddCommand","toggleCmdCheckHeaderState","ActionRemove","blocLayoutResizeEnd","AlternateBL","CapableResourceBL","refreshView","EditAttribute","SetSequencingMode","reparentInstances","reparentBegin","reparentEnd","Hide","HideAll","Relations","DisplayProperties","CreateCapableResourceStructureLink","CreateLink","CreateMultipleLinks","CreateLinkOrInstance","CreateScope","CreatePartialScopeLinkOnHeaderOperation","CreateInstance","InsertCmd","ManageInconsistentLinks","BIEssentialsCmd","DuplicateAdvCmd","Delete","DetachInstance","ToggleGraphView","ManageGraphViewCmdAvailablity","ShowGraphView","ProductFlowCmd","EGraphNodeSelect","Reframe","ReframeOn","ToggleOrientation","ToggleOverview","updateBIStatus","addBIModel","changeBIModel","resetBIModel","BIAltSub","CreateScopeLink","DeleteScopeLink","ReconnectScope","CreatePartialScopeLink","DeletePartialScopeLink","StretchPartialScopeLink","SwitchToFullScopeLink","ReviseAndReconnectScope","ExploreInWebApp","HideIn3D","ShowIn3D","AssignProduct","UnassignProduct","expandAll","collapseAll","LoadRelationsinViews","UserDefExplore","ShowLogPanel","CreateMfgItemStructure","UpdateMfgItemStructure","ShowGroupingDataGridView","Show3DViewerCmd","selectNodes","unSelectNodes","updateNodes","unsetNodeAttr","refreshProductFlowView","refreshManageCapableResourceView","createResourceUsage","updateResourceUsage","updatePreferredLink","openManagStepOperationPanel","populateMangeStepOpertionsUI","reBuildManageCapableRscUI","documentAdded","documentChanged","ExportCSVCmd","EditViewPreferencesCmd","searchAndAddInstance","InsertAsCopy","TreeViewPrefModified","LoadRelations","CreateMfgItemAndScope","CreateMfgItemAndLinkAltSubst","ReplaceByLatestRevision","ReplaceByExisting","ReplaceByNewRevision","ReplaceByNewReference","ReplaceWhereUsed","updateRelationsColumn","visibleNodesChanged","Filter3DApplied","RelationsPanelLoaded","nodesUpdatedInAsync","authoringMode","CreateMfgItemAndResultingProduct","updateCfgColumns","updateRelationsUI","DeleteReferenceFromXen","updateEINAttribute","activateProcurementGrouping","activateFlattenView","BuildUpReviewModeCmd","createDataCollectRow","editWorkInstruction","editDataCollectRow","deleteDataCollectRow","moveDataCollectRow","editResourceParameterPlan","createResourceParameterRow","editResourceParameteRow","addResourceParamRef","deleteResourceParameterRow","moveResourceParameterRow","computeResourceParamPlan","LoadDropContent","ResetRootsStore","ShowLandingPage","HideLandingPage","Quantity","DELCreateEngineeringMadeFromItem","refreshOperationTime"],r=n.getMediator(),a=null,s=n.getConfig().resource.eventsMappingPath;return i=function(t,i){var o,r,s,l=e.is(i)?i.sourceModuleId:null,c=[];return e.is(a)?(r=a[t],e.is(r)&&e.is(l)?(s=r[l],e.is(s)&&s.forEach(function(t){o=n.getInstance(t),e.is(o)&&c.push(o)})):c=n.getInstance(),c):c},r.notifyModuleAndBehaviors=function(e,t,a){var s,l,c=t instanceof Array?t:[t],d=i(e,a);try{if(-1===o.indexOf(e))return n.getLogger().debug("EventsService","Event: "+e+", is not in the authorized event list"),!1;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(l=d[s]).isStarted&&(l.behaviors instanceof Array&&l.behaviors.forEach(function(t){r.callHandlers(t.instance,e,c)}),r.callHandlers(l.instance,e,c))}catch(e){n.getLogger().debug("EventsService",e.message)}},{onStart:function(i){require(["text!"+s],function(o){e.is(o)?a=e.is(o,"string")?t.decode(o):o:n.getLogger().debug("Events mapping is not defined."),i()})},onStop:function(){a=null}}}}),define("DS/DELPPWServices/BuildUpService/BuildUpService",["UWA/Core","DS/ApplicationFrame/CommandsManager","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWResourceServices/ResourceUtils"],function(e,t,n,i,o){"use strict";return function(r){var a,s,l,c,d,u,g,f,m,h,p,v,S=["DELLmiGeneralOperationReference","DELLmiHeaderOperationReference","DELLmiLoadingOperationReference","DELLmiWorkPlanSystemReference"],C=["DELLmiGeneralOperationInstance","DELLmiHeaderOperationInstance","DELLmiLoadingOperationInstance"],P="type",w="pid",b="V_Name",L="name",y="isAggregatedBy",D="isInstanceOf",E="isinstanceof",I="PLM_ExternalID",A="from",R="to",x="duration",M="isaggregatingby",O="transformationmatrix",V="materialneed",N="productFlowType",_="V_usage",W="V_MaterialNeed",U="DELLmiTimeConstraintCnx",T="ProcessImplementLink",k="ProcessImplementLinkOcc",B="ProductImplementLink",F="ProductImplementLinkOcc",j="DELLmiTimeConstraintScrapped",z="DELLmiTimeConstraintFailed",H="Scrapped",G="Failed",q="Good",X="dsmfg/private/V0/invoke/BuildUp/",K="terminate",Z="initBuildUpPath",J="computeBuildUpSelection",Y="build up service",Q={},$={},ee=!0,te=!1,ne=null,ie=null,oe=null,re=null,ae=null,se=null;return a=function e(t,i,o){var r={};r[w]=t.id,r[P]=t.get(P),r[L]=b,r[x]=200,i.push(r),n.instances.where({isInstanceOf:t.id}).forEach(function(e){var t={};t[w]=e.id,t[M]=e.get(y),t[E]=e.get(D),t[L]=e.get(I),t[O]=[1,0,0,0,1,0,0,0,1,0,0,0],o.push(t)}),n.instances.where({isAggregatedBy:t.id}).forEach(function(t){n.references.where({PID:t.get(D)}).forEach(function(t){e(t,i,o)})})},s=function e(t,i,o,r,a){n.instances.where({isAggregatedBy:t.id}).forEach(function(t){n.references.where({PID:t.get(D)}).forEach(function(t){var s,l={};i.push(t.id),s=t.get(P),s=S.indexOf(s)>=0?s.replace("DELLmi","").replace("Reference",""):"AssembleOperation",l[w]=t.id,l[P]=s,l[L]=t.get(b),l[x]=200,o.push(l),n.instances.where({isInstanceOf:t.id}).forEach(function(e){var t={};r.push(e.id),t[w]=e.id,t[M]=e.get(y),t[E]=e.get(D),t[L]=e.get(I),a.push(t)}),e(t,i,o,r,a)})})},l=function(t){var i=[];return n.connections.where({type:U}).forEach(function(o){var r,a,s,l,c,d={},u=!1;if((t.indexOf(o.getAttribute("to"))>-1||t.indexOf(o.getAttribute("from"))>-1)&&(u=!0),!0===u&&(1===n.instances.where({PID:o.getAttribute(A)}).length&&((a=n.instances.where({PID:o.getAttribute(A)},1)).get(y)!==re?1===n.instances.where({isInstanceOf:a.get(y)}).length&&(l=[n.instances.where({isInstanceOf:a.get(y)},1).id,a.id]):l=[a.id]),1===n.instances.where({PID:o.getAttribute(R)}).length&&((r=n.instances.where({PID:o.getAttribute(R)},1)).get(y)!==re?null!==(c=n.instances.where({isInstanceOf:r.get(y)},1))&&(s=[c.id,r.id]):s=[r.id]),C.indexOf(r.get(P))>=0&&C.indexOf(a.get(P))>=0&&t.indexOf(l[l.length-1])>-1&&t.indexOf(s[s.length-1])>-1)){if(d[w]=o.id,d[P]=o.get(P).replace("Product","").replace("Occ","").replace("DELLmi","").replace("Cnx",""),d[A]=l,d[R]=s,d[V]=o.get(W),e.is(o.get(_)))switch(o.get(_)){case j:d[N]=H;break;case z:d[N]=G;break;default:d[N]=q}i.push(d)}}),n.connections.where({type:T}).forEach(function(t){var n={};re===t.get(A)&&(n[w]=t.id,n[P]="Scope",n[A]=e.is(t.get(A),"array")?t.get(A):[t.get(A)],n[R]=e.is(t.get(R),"array")?t.get(R):[t.get(R)],i.push(n))}),n.connections.where({type:k}).forEach(function(n){var o,r={};o=n.get(A)[n.get(A).length-1],t.indexOf(o)>-1&&(r[w]=n.id,r[P]="ImplementLink",r[A]=e.is(n.get(A),"array")?n.get(A):[n.get(A)],r[R]=e.is(n.get(R),"array")?n.get(R):[n.get(R)],i.push(r))}),i},c=function e(t,i){var o;n.instances.where({isAggregatedBy:t}).forEach(function(t){return(o=n.connections.where({type:F,from:t.id})).length>0?d(o,i):o.forEach(function(t){var o=t.get(R)[t.get(R).length-1],r=n.references.where({PID:o});1===r.length&&e(r.get(D),i)}),i})},d=function(t,i){var o=[];t.forEach(function(t){var r,a,s,l=t.get("to"),c=[],d=function t(i){var r,a=n.instances.where({isAggregatedBy:i},1);o.push(i),e.is(a)&&(r=a.id,o.push(r),t(a.get(D)))};for(r=0;r<l.length;r++)1===(a=n.instances.where({PID:l[r]})).length&&(s=a[0],c.push(s.get(y)),c.push(s.get("PID")),r===l.length-1&&(c.push(s.get(D)),d(s.get(D))));i.push(c)})},g=function(t,n,i){var o={};o.pathsToShow=e.is(t)?t:[],o.pathsToHide=e.is(n)?n:[],o.differenceOperator=!!e.is(i,"boolean")&&i,o.firstSelection=ee,v.exclusiveShow(o),!0===ee&&(ee=!1)},u=function(){v.resetViewer()},f=function(){var t=e.Json.encode({instanceId:ae});i.webServiceRequest({url:X+K,method:"POST",data:t,onComplete:function(){r.getLogger().info(Y,o.getNLSValue("BuildUp.SessionEnded"))},onFailure:function(){r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.SessionEnd"))},onTimeout:function(){r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.TimeOut"))}})},h=function e(t){var n=se.getNodeModel(t,!0);return null!==n._parentNode&&n._parentNode.object?e(n._parentNode._referencePID):n._referencePID},p=function(t,a){var s,l,c,u;if(te){if(se.getSelectedNodes().length>1)return r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.MultiSelection")),null;if(0===t.length&&1===se.getSelectedNodes().length&&(t.push(se.getSelectedNodes()[0].getID()),1===t.length&&t[0]===$.workplan.pid))return v.unHideAll3D(),null;s=t[t.length-1],c=n.getReferenceModel(s),e.is(c)?(u=!1,n.references.where({type:"VPMReference"}).length>1&&(u=!0),u?S.indexOf(c.get(P))>-1?((Q={version:"1.0",workplan:{pid:$.workplan.pid,name:$.workplan.name,scopedItem:$.workplan.scopedItem,activeOperations:[t],SelectionMode:"Selection"}}).instanceId=ae,l=e.Json.encode(Q),i.webServiceRequest({url:X+J,method:"POST",data:l,onComplete:function(t){var i,o,r=[],s=[];i=e.is(t.objectsToAddOrUpdate)?t.objectsToAddOrUpdate:[],o=e.is(t.objectsToHide)?t.objectsToHide:[],i.forEach(function(e){e.objectinstancepath.forEach(function(e){var t=n.connections.where({type:F,from:e});t.length>0&&d(t,r)})}),o.forEach(function(e){e.objectinstancepath.forEach(function(e){var t=n.connections.where({type:F,from:e});t.length>0&&d(t,s)})}),g(r,s,!1),e.is(a)&&a()},onFailure:function(){r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.Selection"))},onTimeout:function(){r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.Selection"))}})):r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.Unknown")):r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.NoEBOM"))):r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.Selection"))}return ie},m=function(t){var d,g,m,S,C,P,w,L,y=[],D=[],E=[],I=[],A=[],x=[],M=null,O=[],V=t[t.length-1];try{e.is(v)||(v=r.getPlugins("Viewer3DPlugin").instance),ne=h(V),d=n.getReferenceFromCollection(ne),re=d.id,0===(g=n.findConnections({from:ne,type:T})).length?M=o.getNLSValue("BuildUp.Error.NoConnections"):m=g[0].id.split("|")[2],1===n.connections.where({type:T,from:d.id}).length&&(C=n.connections.where({type:T,from:d.id},1),S=n.references.where({PID:C.get(R)},1)),a(S,y,D),y.length<=1&&(M=o.getNLSValue("BuildUp.Error.NoMBOM")),D.length<=1&&(M=o.getNLSValue("BuildUp.Error.NoMBOM")),s(d,E,A,I,x),A.length<=1&&(M=o.getNLSValue("BuildUp.Error.NoOperations")),x.length<=1&&(M=o.getNLSValue("BuildUp.Error.NoOperations")),P=l(I),($={version:"1.0",workplan:{pid:d.id,name:d.get(b),scopedItem:m,manufactureditems:{references:y,instances:D},resources:{references:[],instances:[]},operations:{references:A,instances:x},links:P}}).differenceOperator=!1,1===n.connections.where({type:B,from:$.workplan.scopedItem}).length?(ie=n.connections.where({type:B,from:$.workplan.scopedItem},1).get(R),1===(L=v.getRoots()).length&&-1!==L.indexOf(ie)||v.drop3D([ie])):(c($.workplan.scopedItem,O),v.cleanAll(),v.drop3D(O,{usePaths:!0}),ie=O),null!==M?(oe.toggleState(),r.getLogger().warn(Y,M),(void 0)()):(w=e.Json.encode($),i.webServiceRequest({url:X+Z,method:"POST",data:w,onComplete:function(e){var n=function(){(void 0)(),r.getLogger().info(Y,o.getNLSValue("BuildUp.Success.Init"))};!0===e.isInit&&(te=!0),ae=e.instanceId,V===ne?n():p(t,n)},onFailure:function(){(void 0)(),r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.Init")),oe.toggleState()},onTimeout:function(){(void 0)(),r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.TimeOut")),oe.toggleState()}}))}catch(e){r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.Init")),te=!1,ee=!0,oe.toggleState(),u(),f(),(void 0)(),console.error(e.stack),console.error(e.message)}},{onStart:function(e){var n,i;r.addExternalListener("BuildUp",function(e){try{if(r.getService("LayoutService").getContainer("routings"),se=r.getBehavior("ROUTINGS","WUXNodeModelBehavior"),null===oe&&(oe=t.getCommandCheckHeader("BuildUp",r.getConfig().appContext)),e.state){i=se.getSelectedNodes()[0],n=!0===i.isRoot()?[i.getID()]:i.getAbsolutePath();try{(void 0)(),setTimeout(function(){m(n)},100)}catch(e){(void 0)()}}else te=!1,ee=!0,oe.disable(),u(),f()}catch(e){r.getLogger().warn(Y,o.getNLSValue("BuildUp.Error.Selection"))}}),e()},onStop:function(){},getCurrentRootId:function(){return ne},buildUpSelection:function(e){return p(e)},isBuildUpActivated:function(){return te}}}}),define("DS/DELPPWServices/CommandsService/CommandsService",["UWA/Core","DS/ApplicationFrame/CommandsManager","DS/DELPPWModelServices/ModelUtils","DS/DELPPWModelServices/BehaviorUtil","DS/DELPPWNavigationServices/SwitchDBModeManager"],function(e,t,n,i,o){"use strict";return function(r){var a,s,l,c="CommandsService",d=r.getConfig().resource.commandsAvailabilityPath,u=!1,g=[],f=function(){var i,o,a,s,l=null;if("MFN"===n.getWidgetTrigram()&&!n.isMGALicenseAvailable())for(a in i=r.getConfig().appContext,t.getCommands(i))e.is(a)&&(o=t.getCommand(a,i),e.is(o)&&"InsertCmd"===o.name&&(l=null,s=o.getArguments(),"array"===e.typeOf(s)&&s.forEach(function(e){"PPRType"===e.ID&&(l=e.Value)}),"RESOURCE"===l&&o.disable()))},m=function(n,i){var o=null,a=null;o=t.getCommandCheckHeader(n,r.getConfig().appContext),e.is(o)?(a=o.isEnabled(),(a=!("Authoring"===n&&!a))&&(e.is(i,"boolean")?o.setState(i):o.toggleState())):r.getLogger().debug(c,"toggleCmdCheckHeaderState, unknown command: "+n)};return{onStart:function(t){if(!e.is(d))throw r.getLogger().debug("Commands availability file path have not being provided."),new Error("Commands availability file path have not being provided.");require(["text!"+d],function(i){if(!e.is(i))throw r.getLogger().debug("Commands Availability json is not defined."),new Error("Commands Availability json is not defined.");l=e.is(i,"string")?e.Json.decode(i):i,a=e.is(l.managedCommands,"array")?l.managedCommands:[],s=e.is(l.notOnCloud,"array")?l.notOnCloud:[],n.checkCFGLicenseAvailablePromise().then(function(e){u=e,r.getLogger().debug(c,"CFG license "+(u?"available":"not available"))}).catch(function(e){r.getLogger().debug(c,"ERROR while checking for CFG license: "+e)}),t()})},onStop:function(){},notifyApp:function(e,t){r.getMediator().notify(e,t,{sourceModuleId:c})},toggleModule:function(t,n){var i;e.is(n)&&e.is(n.state)&&(i=n.state?"startModule":"stopModule",r.getMediator().notify(i,{moduleId:t,moduleData:n}))},getCommand:function(n){var i,o=r.getConfig().appContext;return e.is(n)?(i=t.getCommand(n,o),e.is(i)||(i=t.getCommandCheckHeader(n,o)),e.is(i)||r.getLogger().debug(c,"getCommand, unknown command: "+n)):r.getLogger().debug(c,"getCommand, no command in input !!!"),i},setCommandState:function(n,i){var o,a=r.getConfig().appContext;e.is(n)?(o=t.getCommand(n,a),e.is(o)||(o=t.getCommandCheckHeader(n,a)),e.is(o)?i?o.enable():o.disable():r.getLogger().debug(c,"disableCommand, unknown command: "+n)):r.getLogger().debug(c,"disableCommand, no command in input !!!")},setEffectivityCmdState:function(t,n){var i=n;!0===i&&(e.is(window)&&e.is(window.cfgCmdWidgetData)&&e.is(window.cfgCmdWidgetData._isDecouplingActivated,"boolean")?!1===window.cfgCmdWidgetData._isDecouplingActivated&&(i=!1):i=!1),this.setCommandState(t,i)},setAllCommandsState:function(t){var n=e.is(t,"string")?this.getCommandsAvailability(t):t,o=e.is(n)&&e.is(n.enabled,"array")?n.enabled:[];a.forEach(function(e){this.setCommandState(e,!1)},this),i.isCloud()&&(o=o.filter(function(e){return s.indexOf(e)<0},this)),0<o.length?o.forEach(function(e){this.setCommandState(e,!0)},this):r.getLogger().debug(c,"enabled param should be an array with some element")},initState:function(){var n;e.is(l)?(n=function(){var n,i,o,a,s=r.getConfig().appContext,l=t.getCommands(s),c=null,d=[];for(n in l)e.is(n)&&(i=t.getCommand(n,s),e.is(i)&&"InsertCmd"===i.name&&(o=i.getArguments(),d.push(n),"array"===e.typeOf(o)&&o.length>0&&(a=o[0],e.is(a)&&e.is(a.ID)&&"ReferenceType"===a.ID&&e.is(a.Value)&&(c=a.Value)),e.is(c)&&(e.is(g[c.split("/")[1]],"array")?g[c.split("/")[1]].push(n):g[c.split("/")[1]]=[n],c=null)));return d}(),a=a.concat(n),l.initial.enabled=l.initial.enabled.concat(n),l.none.enabled=l.none.enabled.concat(n),this.setAllCommandsState(l.initial),this.authoringCmdAvailability(),e.is(l.viewCommandsActivatedAtAppStart)&&this.activateViewCommands(l.viewCommandsActivatedAtAppStart),f()):r.getLogger().debug("Commands Availability json is not defined.")},getSelectedRoots:function(t){var n,i,o=r.getPlugins("RootsPlugin"),a=[];if(e.is(o)){if(e.is(t,"array"))for(n=0;n<t.length;n++)if(e.is(t[n],"array"))for(i=0;i<t[n].length;i++)o.instance.isRoot(t[n][i])&&a.push(t[n][i]);return a}r.getLogger().debug("Roots Plugin is not available.")},getCommandsAvailability:function(t){return t?function(t,n,i){var o;for(void 0===i&&(i=null),n=n.split("."),o=0;o<n.length;o++){if(void 0===t[n[o]])return i;t=t[n[o]]}return e.clone(t)}(l,t):e.clone(l)},getValidChildTypeCommands:function(t){var n,i,o,a,s=[],l=r.getPlugins("DatabasePlugin");if(e.is(l)){if(i=l.instance.getValidChildTypes(t),e.is(i))for(n in g)if(i.indexOf(n)>=0)for(o=g[n],a=0;a<o.length;a++)s.push(o[a]);return s}r.getLogger().debug("Database Plugin is not available to get valid child types.")},manageCommandsAvailability:function(t,i,a,s,l,d,g){var m,h,p,v,S,C,P,w,b,L,y,D,E,I=0,A=0,R=0,x=0,M=0,O=0,V=0,N=0,_=0,W=r.getPlugins("DatabasePlugin"),U=r.getPlugins("DicoPlugin"),T=o.isDbMode()||n.getNavigateOnDatabasePreference();W&&U?(W=W.instance,U=U.instance,i=i||[],a=a||[],s=s||[],l=l||[],d=d||[],g=g||[],I=(t=t||[]).length,R=i.length,A=l.length,h=a.length,M=d.length,V=g.length,e.is(a,"array")&&a.forEach(function(t){m=W.getReferenceModel(t),e.is(m)&&("PART"===(y=m.get("PPRTYPE"))||"PRODUCT"===y?R++:"PROCESS"===y?I++:"SERVICE"===y?M++:"SYSTEM"===y?x++:"RESOURCE"===y?A++:"OPERATION"===y?O++:"WORKINSTRUCTION"===y?_++:"CONSTRUCTION"===y?V++:"ORGANIZATION"===y&&N++)}),e.is(s,"array")&&s.forEach(function(t){m=W.getReferenceModel(t),e.is(m)&&("SYSTEM"===(y=m.get("PPRTYPE"))?x++:"OPERATION"===y?O++:"WORKINSTRUCTION"===y&&_++)}),v=I+R+x+A+O+_+M+V+N,w=this.getSelectedRoots([t,i,s,l,a,d,g]),1>v?this.setAllCommandsState("none"):1===v?(1!==x&&1!==O||(L=this.getCommandsAvailability("one.system"),m=W.getReferenceModel(s[0]),!0!==U.isAKindOf(m,"DELLmiWorkPlanSystemReference")&&!0!==U.isAKindOf(m,"DELLmiQtyControlProcessReference")&&!0!==U.isAKindOf(m,"DELLmiServiceWorkPlanSystemReference")||L.enabled.push("CreateCapableResourceStructureLink")),1===_&&(L=this.getCommandsAvailability("one.workInstruction")),1===A&&(L=this.getCommandsAvailability("one.resource")),1===I&&(L=this.getCommandsAvailability("one.process")),1===R&&(L=this.getCommandsAvailability("one.product")),1===M&&(L=this.getCommandsAvailability("one.service")),1===V&&(L=this.getCommandsAvailability("one.construction")),1===N&&(L=this.getCommandsAvailability("one.organization")),e.is(L)&&(C=t[0]||s[0]||l[0]||a[0]||d[0]||g[0],S=W.getReferenceModel(C),e.is(S)&&(b=this.getValidChildTypeCommands(S),L.enabled=L.enabled.concat(b),b=this.getInsertAsCommands(S),L.enabled=L.enabled.concat(b)),this.setAllCommandsState(L))):1<v&&(v===R?this.setAllCommandsState("multiple.product"):v===I?this.setAllCommandsState("multiple.process"):v===M?this.setAllCommandsState("multiple.service"):v===V?this.setAllCommandsState("multiple.construction"):v===x+O?this.setAllCommandsState("multiple.system"):v===_?this.setAllCommandsState("multiple.workInstruction"):v===A?this.setAllCommandsState("multiple.resource"):this.setAllCommandsState("multiple.mixed"),w.length!==v&&0!==w.length&&this.setCommandState("Delete",!1)),this.setCommandState("CreateLink",!0),this.setCommandState("CreateInstance",!0),P=w.length>0,D=v>0&&w.length===v&&R<1,this.setCommandState("Hide",P),this.setCommandState("DeleteHdr",D),this.setCommandState("DetachInstance",!P&&R<1&&v>0),this.manageReplaceCommandsAvailablity({isRoot:P,auxiliaryViewLength:a.length,mfgItemsViewLength:t.length,routingsViewLength:s.length,resourceViewLength:l.length,serviceItemsViewLength:d.length,constructionItemsViewLength:g.length}),this.groupingViewCmdAvailability(I,R,h),p=function(){var n,i,o,r,a=!1;if(s.length>0){n=W.getInstance(s[0]),e.is(n)&&(n=n.get("isAggregatedBy"));for(let t=0;t<s.length;t++)if(i=W.getInstance(s[t]),e.is(i)&&(i=i.get("isAggregatedBy")),n!==i){a=!0;break}}else if(t.length>0){o=W.getInstance(t[0]),e.is(o)&&(o=o.get("isAggregatedBy"));for(let n=0;n<t.length;n++)if(r=W.getInstance(t[n]),e.is(r)&&(r=r.get("isAggregatedBy")),o!==r){a=!0;break}}return a},v>0&&(E={isLicenseCFGValid:u,isRoot:P,auxLength:a.length,processViewLength:t.length,routingsViewLength:s.length,resourceViewLength:l.length,serviceViewLength:d.length,constructionViewLength:g.length,selectedItemsCount:v,isAuthoring:T,isCrossLevel:p()},this.manageConfigurationCommands(E)),f(),t.length>0&&(this.manageCommandsAvailabilityForReadOnlyTypes(t),e.is(this.manageAdvDuplicateCmd,"function")&&(E={auxLength:a.length,processViewLength:t.length,routingsViewLength:s.length,resourceViewLength:l.length},this.manageAdvDuplicateCmd(E))),e.is(this.manageBuildUpCmdAvailabilty,"function")&&(E={auxLength:a.length,processViewLength:t.length,routingsViewLength:s.length,resourceViewLength:l.length},this.manageBuildUpCmdAvailabilty(E)),e.is(this.manageOrderBySequenceCmdAvailabilty,"function")&&(E={auxLength:a.length},this.manageOrderBySequenceCmdAvailabilty(E))):r.getLogger().debug(c,"Database or Dico  Plugin is not available.")},manageCommandsAvailabilityForReadOnlyTypes:function(t){const n=this,i=this.getCommandsAvailability("disableCommandsForReadOnlyProcessTypes"),o=r.getPlugins("DatabasePlugin"),a=r.getPlugins("DicoPlugin");if(e.is(o)&&e.is(a)){const e=t.map(function(e){return o.instance.getReferenceModel(e)});if(Array.isArray(e)&&e.length>0){let t=new Set;e.forEach(function(e){t.add(e.get("type"))}),a.instance.isReferencesHasReadOnlyType(e)&&i.forEach(function(e){n.setCommandState(e,!1)})}}},manageConfigurationCommands:function(){r.getLogger().debug(c,'"manageConfigurationCommands" is not overridden')},manageReplaceCommandsAvailablity:function(){r.getLogger().debug(c,'"manageReplaceCommandsAvailablity" is not overridden')},authoringCmdAvailability:function(){!0===n.getNavigateOnDatabasePreference()?this.setCommandState("Authoring",!1):this.setCommandState("Authoring",!0)},groupingViewCmdAvailability:function(e,t,n){1===e&&0===n&&0===t?this.setCommandState("ShowGroupingDataGridView",!0):this.setCommandState("ShowGroupingDataGridView",!1)},manageGraphViewCmdAvailablity:function(){var t,n,i=this,o=r.getPlugins("TreeViewPlugin"),a=!1;e.is(o)?(t=o.instance.getCurrentView(),Object.keys(t).forEach(function(i){n=t[i],e.is(n.currentView)&&"graphView"===n.currentView&&(a=!0)}),["ToggleOrientation","ToggleOverview","Reframe","ReframeOn"].forEach(function(e){i.setCommandState(e,a)})):r.getLogger().debug("treeView Plugin is not available.")},toggleCmdCheckHeaderState:function(t){t=t||{},e.is(t.cmdName)?m(t.cmdName,t.cmdState):r.getLogger().debug("Failed to toggle state : check command name has not been provided")},getOneDelmiaAggregationMode:function(){return n.getOneDelmiaAggregationMode()},activateViewCommands:function(e){Array.isArray(e)&&e.forEach(function(e){m(e,!0)})}}}}),define("DS/DELPPWServices/ConfigService/CustoParametersSet",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r){var a,s,l=new Map;return s=function(){e.is(widget.getValue)&&(a=widget.getValue("custoParametersSet"),-1===Array.from(l.keys()).indexOf(a)&&(a="OOTBValue"))},{getCustoParametersSetsInfoPromise:function(){return new Promise(function(n,o){var a=e.is(t)?"?custoParameterRegExp="+t:"",c=[],d=widget.getValue("custoParametersSet"),u=!1,g=function(t,i){e.is(t)&&t.forEach(function(e){l.set(e.title,e.PID),d===e.title?c=e.xmls:d===e.PID&&(c=e.xmls,widget.setValue("custoParametersSet",e.title))}),s(),n([i,c])},f=function(){i.webServiceRequest({url:"dsmfg/private/V0/invoke/getCustoParametersSetsInfo"+a,method:"GET",onComplete:g,onFailure:m,onTimeout:m})},m=function(){o("ApplicationInit.NoCustoParametersSetsInfo")};i.webServiceRequest({url:"delmia/param/configuration/getParameters?domainID=DELUserExperience&familyID=DELWebAppsPreferences&paramID=DELWebAppsCustomizationListParam&argID=DELWebAppsCustomizationListArg",method:"GET",onComplete:function(t){e.is(t,"array")&&t.some(function(t){var n=!1;return r===t.applicationName&&(e.is(t.isLocked)&&t.isLocked&&(u=!0),widget.setValue("isCustoParametersSetLocked",u),"OOTB"===t.parameterSet||!u&&e.is(d)||(d=t.parameterSet),n=!0),n}),f()},onFailure:f,onTimeout:f})})},isChanged:function(){var t=!1;return e.is(widget.getValue)&&a!==widget.getValue("custoParametersSet")&&(a=widget.getValue("custoParametersSet"),t=!0),t},getNames:function(e){var t={value:e.defaultValue,label:"OOTBValue"!==e.defaultValue?e.defaultValue:o.getNLSValue("Preferences.CustoParametersSetDefault")},n={value:"OOTBValue",label:o.getNLSValue("Preferences.CustoParametersSetDefault")},i=[t];return Array.from(l.keys()).forEach(function(e){i.push({value:e,label:o.getNLSValue(e)})}),i.some(e=>"OOTBValue"===e.value)||i.push(n),i},getSelectedPID:function(){var t,n="";return e.is(widget)&&e.is(widget.getValue,"function")&&(t=widget.getValue("custoParametersSet"),e.is(t,"string")&&-1!==Array.from(l.keys()).indexOf(t)&&(n=l.get(t))),n}}}}),define("DS/DELPPWServices/ExternalService/PadCommandProxyUtil",["UWA/Core"],function(e){"use strict";return function(t){var n,i,o,r,a,s,l="PadCommandProxyUtil",c=t.getLogger();return o=function(n,i){var o=i||{},r=Array.isArray(n)?n:[n],a=!e.is(o.forceDBMode,"boolean")||o.forceDBMode,s=!!e.is(o.silent,"boolean")&&o.silent,d=!!e.is(o.forceExpand,"boolean")&&o.forceExpand,u=t.getPlugins("DatabasePlugin"),g={};e.is(u)?(u=u.instance).fetchRefList(r,{forceDBMode:a,silent:s,queriedForChildren:!1,onComplete:function(n){c.debug(l,"Successfully refreshed reference model: "+n),t.getMediator().notify("referenceChanged",[n.instancesAndReferences]),e.is(d)&&d&&n.instancesAndReferences.forEach(function(t){u.getDescendantsFromServer(t.id,null,e.merge({silent:s,forceDBMode:a},o))}),t.getMediator().notify("lifecycleCmd",g)},onFailure:function(t){c.debug(l,"Failed to refresh model PIDs: "+r),e.is(t)&&c.debug(l,JSON.stringify(t))}}):t.getLogger().debug(l,"_refreshElement- Database plugin not available")},n=function(n,i){var o=i||{},r=!!e.is(o.forceDBMode,"boolean")&&o.forceDBMode,a=!e.is(o.silent,"boolean")||o.silent,s=!!e.is(o.loadRootOnly,"boolean")&&o.loadRootOnly,d={forceDBMode:r,silent:a,onComplete:function(e){c.debug(l,"Successfully fetched reference: "+e.id),t.getMediator().notify("referenceAdded",[e,null,{withLinksResolved:!0,forceDBMode:r,loadRootOnly:s}])},onFailure:function(t){c.debug(l,"_addReference: Failed to fetch Reference for PID: "+n),e.is(t)&&c.debug(l,JSON.stringify(t))}},u=t.getPlugins("DatabasePlugin");e.is(u)?(u=u.instance,e.is(n)?u.fetchRoot(n,d):t.getLogger().debug(l,"_addReference- Input PID is not defined")):t.getLogger().debug(l,"_addReference- Database plugin not available")},i=function(n,i){var o,r,a,s=i||{},d={noTimeout:!0};r=function(){var e=a.getReferencesFromArray(n);c.debug(l,"Successfully fetched references: "+n),t.getMediator().notify("referenceAdded",[e,null,{}]),t.getMediator().notify("stopProgress",d)},o={forceDBMode:!!e.is(s.forceDBMode,"boolean")&&s.forceDBMode,silent:!e.is(s.silent,"boolean")||s.silent,onFailure:function(i){c.debug(l,"_addReferences: Failed to fetch References for PID: "+n),e.is(i)&&c.debug(l,JSON.stringify(i)),t.getMediator().notify("stopProgress",d)}},(e.is(s.loadRootOnly,"boolean")?s.loadRootOnly:widget.getBool("loadRootOnly"))&&(o.expandLevel=0),a=t.getPlugins("DatabasePlugin"),e.is(a)?(a=a.instance,e.is(n)?(t.getMediator().notify("startProgress",d),a.getDescendantsFromServer(n,r,o)):t.getLogger().debug(l,"_addReferences- Input PID is not defined")):t.getLogger().debug(l,"_addReferences- Database plugin not available")},r=function(n,r){var a,s,d,u=!1,g={};c.debug(l,"Refresh Created: %o",n),a=r||{},a=e.merge({forceDBMode:!0},a),s=[],d=[],e.is(n,"array")&&n.length>0&&(n.forEach(function(t){var n=t||{},i=e.is(n.physicalid,"string")&&n.physicalid.length>0?n.physicalid:null;e.is(i)&&s.push(i),"Revise"===t.operation?(e.is(t.sourceObjectId)&&d.push(t.sourceObjectId),u=!0):"Branch"!==t.operation&&"Duplicate"!==t.operation||(u=!0)}),s.length>0&&(i(s,a),g.added=s),d.length>0&&(o(d,a),g.refreshed=d),u&&t.getMediator().notify("newVersionFromLifeCycleCmd",g))},a=function(n,i){var o=[],r=[],a=[],s={silent:!0},d=t.getPlugins("DatabasePlugin");e.is(d)?(d=d.instance,c.debug(l,"Refresh Deleted: %o"+n),e.is(n,"array")&&(n.forEach(function(n){var i=n||{},s=[],c=null,u=e.is(i.physicalid,"string")&&i.physicalid.length>0?i.physicalid:null;e.is(u)?(c=d.getReferenceModel(u),e.is(c)&&(o.push(c),d.getAllChildrenFromCollection(u).instancesPID.forEach(function(e){var t=d.getInstance(e),n=d.getImpacted(e,!1,{onlyInstanceRelations:!0});r.push(t),a=a.concat(n)}),s=d.getImpacted(u,!1),a=a.concat(s))):t.getLogger().debug(l,"_refreshDeleted- Invalid PID")}),d.removeReference(o,s),t.getMediator().notify("referenceRemoved",[o]),r.length>0&&(d.removeInstance(r,s),t.getMediator().notify("instanceRemoved",[r])),a.length>0&&(d.removeConnection(a,s),t.getMediator().notify("connectionRemoved",[a])))):t.getLogger().debug(l,"_refreshDeleted- Database plugin not available.")},s=function(t,n){var i=n||{},r=[];i=e.merge({forceDBMode:!0,silent:!0,forceExpand:!1},i),c.debug(l,"Refresh Modified: %o",t),e.is(t,"array")&&(t.forEach(function(t){var n=t||{},i=e.is(n.physicalid,"string")&&n.physicalid.length>0?n.physicalid:e.is(n,"string")&&n.length>0?n:null;r.push(i)}),o(r,i))},{refreshElementFromEvent:function(t){e.is(t,"array")&&t.forEach(function(t){var n=t||{},i=e.is(n.id,"string")&&n.id.length>0?n.id:null,r=!!e.is(n.forceDBMode,"boolean")&&n.forceDBMode,a=!!e.is(n.forceExpand,"boolean")&&n.forceExpand;e.is(i)&&o(i,{forceDBMode:r,forceExpand:a,silent:!1})})},addReferenceFromEvent:function(t){e.is(t,"array")&&t.forEach(function(t){var i=t||{},o=e.is(i.id,"string")&&i.id.length>0?i.id:null,r=!!e.is(i.forceDBMode,"boolean")&&i.forceDBMode,a=!!e.is(i.loadRootOnly,"boolean")&&i.loadRootOnly;e.is(o)&&n(o,{forceDBMode:r,loadRootOnly:a,silent:!1})})},refreshCreated:function(e,t){r(e,t)},refreshDeleted:function(e,t){a(e)},refreshModified:function(e,t){s(e,t)}}}}),define("DS/DELPPWServices/LoggerService/AlertManager",["UWA/Core","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],function(e,t,n){"use strict";return function(i){var o;return n.setNotificationManager(t),o=function(){var t=widget.getElements(".app-messages")[0]?widget.getElements(".app-messages")[0]:widget.body,o=widget.getElements(".wux-windows-modalDialog")[0]?widget.getElements(".wux-windows-modalDialog")[0]:null,r=!(!e.is(o)||"none"===o.getStyle("display"));e.is(o)&&r?n.inject(o):e.is(t)?n.inject(t):i.getLogger().debug("Alert Manager","Alert Container is not defined.")},{displayAlert:function(n){o(),t.addNotif(e.merge({allowUnsafeHTML:!1,sticky:!1},n))}}}}),define("DS/DELPPWServices/LayoutService/DOMNaming",[],function(){"use strict";return{construction:{appContainer:"app-container",appMessages:"app-messages",appProgressInd:"app-ProgressInd",moduleContainer:"module-container",moduleMessages:"module-messages",dropZoneContainer:"drop-zone-container",treeListContainer:"tree-list-container",toolbarContainer:"toolbar-container",graphContainer:"graph-container",grapViewContainer:"graphView-container",progessBarContainer:"progressBar-container",auxiliaryViewContainer:"auxiliaryView-container",actionViewContainer:"actionView-Container",propertiesContainer:"properties-container",groupingPanelContainer:"groupingPanel-container",requirementContainer:"requirement-container"},classes:{hideBodyView:"hideEBOM",showGraphView:"showGraphView"},selectors:{main:"main.main",mainDrop:"div.dropZone",mbomDrop:"div.mbomDrop",mbomTreeListToolBar:"div.mbomTreeListView.ToolBar",mbomTreeList:"div.mbomTreeListView",mbomGraphToolBar:"div.mbomGraphView.ToolBar",mbomGraph:"div.mbomGraphView",mbomContainer:"div.mbomContainer",bodyContainer:"div.bodyContainer",bodyDrop:"div.bodyDrop",bodyTreeListToolBar:"div.bodyTreeListView.ToolBar",bodyTreeList:"div.bodyTreeListView",bodyGraphToolBar:"div.bodyGraphView.ToolBar",bodyGraph:"div.bodyGraphView"}}}),define("DS/DELPPWServices/ConfigService/Preferences",["UWA/Core"],function(e){"use strict";return function(t,n,i,o,r,a){var s,l,c,d,u=!!e.is(a,"boolean")&&a;return s=function(){var e=i.getAllSC(),t=n.getSecurityContext();widget.addPreference({name:"Credentials",type:u?"hidden":"list",label:r.getNLSValue("Preferences.Credentials"),options:e,defaultValue:t,onchange:"onChangeSC"})},c=function(){var n=widget.getValue("Credentials");e.is(t)&&t.debug("Preferences::onChangeSC, (selCredentials): "+n)},l=function(){var t=widget.getValue("Credentials"),n=widget.getValue("tenantAware");e.is(t)&&(widget.addPreference({name:"xPref_CREDENTIAL",type:"hidden",defaultValue:t.replace(/^(ctx::)/,"")}),e.is(n)||widget.setValue("tenantAware",!0))},d=function(t){var n=widget.getValue("isCustoParametersSetLocked")?"hidden":"list",i=widget.getValue("custoParametersSet");widget.addPreference({name:"custoParametersSet",type:e.is(n)?n:e.is(t)&&e.is(t.type)?t.type:"hidden",label:r.getNLSValue("Preferences.CustoParametersSet"),options:o.getNames(t),defaultValue:e.is(i)?i:t.defaultValue})},{populate:function(n){var i,o,a,g,f,m,h,p,v,S,C=function(e){return e.map(function(e){return{value:e.value,label:r.getNLSValue(e.label)}})};if(!n)throw new Error("App config is not defined");if(!(i=n.preferences))throw new Error("preferences is not defined in app config");for(o=0,a=i.length;o<a;o++)if(S=i[o])switch(g=e.result(S,"name"),f=e.result(S,"type"),g){case"Credentials":s();break;case"xPref_CREDENTIAL":l();break;case"custoParametersSet":d(S);break;default:h=e.result(S,"options"),m=r.getNLSValue(e.result(S,"label")),Array.isArray(h)&&(h=C(h)),p=e.result(S,"defaultValue"),v=e.result(S,"onchange"),widget.addPreference({name:g,type:u?"hidden":f,label:m,options:h,defaultValue:p,onchange:v})}widget.addEvent("onChangeSC",c),e.is(t)&&t.debug("Preferences::populate: Preferences has been built.")},updateCredentialsInfoPref:function(){var t=widget.getValue("Credentials"),n=widget.getValue("xPref_CREDENTIAL");e.is(t)&&e.is(n)&&widget.setValue("xPref_CREDENTIAL",t.replace(/^(ctx::)/,""))}}}}),define("DS/DELPPWServices/LandingPageService/LandingPageDnD",["UWA/Core","DS/Utilities/Dom","DS/DELPPWResourceServices/ResourceUtils"],function(e,t,n){"use strict";return function(i){var o,r,a=i.body,s={actual:null,count:0},l=function(e){var n,i=t.firstParentWithClass(e.target,"dropZoneGlobal");return 0===s.count?(r.show(),o.show()):i&&(n=i.querySelector(".dropZone"),s.actual!==n&&(s.actual&&s.actual.classList.remove("zoneHighlighted"),n.classList.add("zoneHighlighted"),s.actual=n)),s.count++,e.stopPropagation(),!1},c=function(e){return t.firstParentWithClass(e.target,"dropZoneGlobal")&&e.preventDefault(),e.stopPropagation(),!1},d=function(e){return s.count--,0===s.count&&(o.hide(),r.hide()),e.target===s.actual&&(s.actual.classList.remove("zoneHighlighted"),s.actual=null),e.stopPropagation(),!1},u=function(e){return s.count=0,s.actual&&(s.actual.classList.remove("zoneHighlighted"),s.actual=null),o.hide(),r.hide(),e.stopPropagation(),!1},g=function(e){return s.count=0,o.hide(),r.hide(),e.stopPropagation(),e.defaultPrevented||(e.preventDefault(),s&&s.actual?(s.actual.classList.contains("dragAndDrop")&&i.onDrop(e),s.actual.classList.remove("zoneHighlighted"),s.actual=null):t.firstParentWithClass(e.target,"dropZoneGlobal").classList.contains("dragAndDrop")&&i.onDrop(e)),!1};return{init:function(){var t,i,f,m,h;for(s={actual:null,count:0},function(){a&&(a.addEventListener("dragenter",l.bind(this)),a.addEventListener("dragover",c.bind(this)),a.addEventListener("dragleave",d.bind(this)),a.addEventListener("dragend",u.bind(this)),a.addEventListener("drop",g.bind(this)))}(),o=e.createElement("div",{class:"dnd-area"}).inject(a),(r=e.createElement("div",{class:"overlay-area"}).inject(a)).hide(),o.hide(),t=[{id:"dragAndDrop",icon:"drag-drop",title:n.getNLSValue("LandingPage.DropZone.Title")}],i=0;i<t.length;i++)f=e.createElement("div",{class:"dropZoneGlobal "+t[i].id,draggable:!1}),m=e.createElement("div",{class:"dropZone "+t[i].id,draggable:!1}).inject(f),h=e.createElement("div",{class:"dropIconAndText "+t[i].id}).inject(m),e.createElement("i",{class:"iconImg wux-ui-3ds wux-ui-3ds-4x wux-ui-3ds-"+t[i].icon}).inject(h),e.createElement("h5",{class:"title "+t[i].id,text:t[i].title}).inject(h),f.inject(o)},destroy:function(){!function(){a&&(a.removeEventListener("dragenter",l.bind(this)),a.removeEventListener("dragover",c.bind(this)),a.removeEventListener("dragleave",d.bind(this)),a.removeEventListener("dragend",u.bind(this)),a.removeEventListener("drop",g.bind(this)))}(),o&&(o.destroy(),o=null),r&&(r.destroy(),r=null)}}}}),define("DS/DELPPWServices/LayoutService/BlocLayout",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";return t.extend({_logger:null,defaultOptions:{className:"blocLayout",minSize:"5px"},init:function(e){if(this._parent(e),this._rowMap={},this._columnMap={},this._rowColumnMap={},this._hiddenColumnsMap={},this._rowIds=[],this._fixedColumnIds=[],this._fixedRowIds=[],!(e=this.options).logger||!e.mediator)throw new Error("logger or mediator option not defined");this._logger=e.logger,this._mediator=e.mediator,e.rows||(e.rows=[{columns:2},{columns:1}]),e.minSize=-1!==e.minSize.indexOf("px")?parseInt(e.minSize.replace("px","")):5,this._buildSkeleton(e.rows)},_buildSkeleton:function(t){var n,i,o,r,a,s=this,l=-1,c=-1,d=function(e){s.hasOwnProperty("_resizingInfo")&&("touchend"===e.type?(s.getContent().removeEvent("touchmove"),e.preventDefault()):s.getContent().removeEvent("mousemove"),delete s._resizingInfo)};this.elements.container=e.createElement("div",{class:"bl-container"}),t.forEach(function(t,d){if(l++,i=e.createElement("div",{class:"bl-row"}).inject(s.getContent()),o=e.createElement("div",{class:"bl-row-content no-drag-row"}).inject(i),s._rowMap[l]=i,s._rowIds.push(l),d>0&&(s._createHandle(l,null,"bl-drag-row").inject(i,"top"),o.removeClassName("no-drag-row")),t.hasOwnProperty("columns"))for(n=0;n<t.columns;n++)c++,r=e.createElement("div",{class:"bl-column"}).inject(o),a=e.createElement("div",{class:"bl-column-content no-drag-column"}).inject(r),s._columnMap[c]=r,s._rowColumnMap[l]?s._rowColumnMap[l].push(c):s._rowColumnMap[l]=[c],n<t.columns-1&&(s._createHandle(l,c,"bl-drag-column").inject(r,"top"),a.removeClassName("no-drag-column"))}),this._initSize(),this.getContent().addEvent("touchend",d),this.getContent().addEvent("mouseup",d),this.onContainerResized(function(){var e=this,t=this.getContent().getSize();this.setRowsHeight(this._rowIds,t.height,{minSize:0}),this._rowIds.forEach(function(n){var i=e._getColumnIdsInRow(n);e.setColumnsWidthById(i,t.width,{minSize:0})})})},_createHandle:function(t,n,i){var o=this,r=e.createElement("div",{class:i}),a=function(e){o._resizingInfo={rowId:t,columnId:n},"touchstart"===e.type?(o.getContent().addEvent("touchmove",o._onMouseMove.bind(o)),e.preventDefault()):o.getContent().addEvent("mousemove",o._onMouseMove.bind(o))};return r.addEvent("touchstart",a),r.addEvent("mousedown",a),r},_onMouseMove:function(t){var n,i,o,r,a,s=this._resizingInfo;if(s)try{e.is(s.columnId)?(a=this._getRowElem(s.rowId),i=this._getColumnIdsInRow(s.rowId).filter(function(e){return e<=s.columnId}),n="touchmove"===t.type?t.touches[0].pageX-a.getOffsets().x:t.clientX-a.getOffsets().x,this.setColumnsWidthById(i,n,{minSize:this.options.minSize})):(r=this._getRowIds().filter(function(e){return e<s.rowId}),o="touchmove"===t.type?t.touches[0].pageY-this.getContent().getOffsets().y:t.clientY-this.getContent().getOffsets().y,this.setRowsHeight(r,o,{minSize:this.options.minSize}))}catch(t){delete this._resizingInfo}},_initSize:function(){var e=this,t=this._getRowIds();this._setEqualRowsHeight(),t.forEach(function(t){e._setEqualColumnsWidthInRow(t)})},_setEqualRowsHeight:function(){var e=this,t=this._getRowIds();t.forEach(function(n){var i=100/t.length;e._getRowElem(n).setStyle("height",e._toPercent(i))})},_setEqualColumnsWidthInRow:function(e){var t=this,n=this._getColumnIdsInRow(e);n.forEach(function(e){var i=100/n.length;t._getColumnElem(e).setStyle("width",t._toPercent(i))})},_getRowIds:function(){return this._rowIds},_getRowIdFromColumnId:function(e){var t,n;for(n in this._rowColumnMap)if(-1!==this._rowColumnMap[n].indexOf(e)){t=parseInt(n);break}return t},_getColumnId:function(e,t){var n;return this._rowColumnMap.hasOwnProperty(e)&&(n=this._rowColumnMap[e][t]),n},_getColumnIdsInRow:function(e){return this._rowColumnMap[e]},_getFixedColumnIds:function(){return this._fixedColumnIds},_getFixedRowIds:function(){return this._fixedRowIds},_getRowElem:function(e){return this._rowMap[e]},_getColumnElem:function(e){return this._columnMap[e]},getColumnSize:function(e,t){var n=this._getColumnId(e,t);if(isNaN(n))throw"Column number: "+t.toString()+" does not exist";return this._getColumnElem(n).getSize()},getRowSize:function(e){var t=this._getRowElem(e);if(!t)throw"Row number: "+e.toString()+" does not exist";return t.getSize()},_toPx:function(e){var t;return isNaN(e)||(t=Math.floor(e).toString()+"px"),t},_toPercent:function(e){var t;return isNaN(e)||(t=Math.floor(e).toString()+"%"),t},_setElemsSize:function(t,n,i,o,r){var a,s,l,c,d,u,g,f,m,h,p,v,S,C,P,w=this,b=[],L=[],y=0,D=(S={},C=function(e,t){var n=0,i=isNaN(t)?1:t;return e.forEach(function(e){S.hasOwnProperty(e)&&(n+=S[e]*i)}),n},i.forEach(function(e){S[e]=w.getSize(e)}),{get:C,setEqualSize:function(){var e,t=i.length,n=C(i),o=Math.floor(n/t);for(e in S)S.hasOwnProperty(e)&&(S[e]=o)}}),E=(P={},{set:function(e,t){P[e]=t},get:function(e){var t=0;return e.forEach(function(e){P.hasOwnProperty(e)&&(t+=P[e])}),t},getMax:function(){var e,t,n=0;for(e in P)Math.max(n,P[e])===P[e]&&(t=e,n=P[e]);return{id:t,value:n}}});try{if(r&&(r.hasOwnProperty("fixedIds")&&(b=r.fixedIds),r.hasOwnProperty("minSize")&&(y=r.minSize)),n<0)throw"Input error: size";if(o<=0)throw"Input error: container size";if((c=t.filter(function(e){return-1!==b.indexOf(e)||(L.push(e),!1)})).length>0?(a=n-D.get(c),s=L):(a=n,s=t),s.length<1)throw"No element available for resize";if(a<s.length*y)throw"Cannot set size inferior to minSize";if(l=i.filter(function(e){return-1===s.indexOf(e)&&-1===b.indexOf(e)}),g=D.get(b),f=D.get(l),u=D.get(s),a+g+l.length*y>o)throw"Cannot set size superior to container size";if(0===u&&(D.setEqualSize(),u=D.get(s),f=D.get(l)),m=0!==u?a/u:0,h=0!==f?(o-g-a)/f:0,(d=s.concat(l)).forEach(function(t,n){var i,o,l=n<s.length;e.is(r)&&e.is(r.equalSizeColumns)&&r.equalSizeColumns&&l?o=Math.round(a/s.length):(i=l?m:h,o=Math.round(D.get([t],i))),o=o>y?o:y,E.set(t,o)}),(p=E.get(i)+g-o+1)>0){if((v=E.getMax()).value-p<y)throw"Cannot set size inferior to minSize";E.set(v.id,v.value-p)}}catch(e){return void w._logger.debug(e)}d.forEach(function(e){w.setSize(e,E.get([e]))})},maximizeRow:function(e){var t=this.getContent().getSize().height;this.setRowsHeight([e],t)},maximizeColumnInRow:function(e,t){var n=this._getRowElem(e).getSize().width;t=Array.isArray(t)?t:[t],this.setColumnsWidth(e,t,n)},fitRowColumnsEqually:function(e,t){var n=this._getRowElem(e).getSize().width;t=Array.isArray(t)?t:[t],this.setColumnsWidth(e,t,n,{equalSizeColumns:!0})},unmaximizeRows:function(){this._setEqualRowsHeight()},unmaximizeColumnsInRow:function(e){this._setEqualColumnsWidthInRow(e)},setColumnContent:function(e,t,n){var i;n&&(i=this._getColumnId(e,t),this._getColumnElem(i).getElement(".bl-column-content").setContent(n))},getColumnContent:function(e,t){var n;return n=this._getColumnId(e,t),this._getColumnElem(n).getElement(".bl-column-content")},setColumnsWidth:function(t,n,i,o){var r=this,a=[],s=this._getFixedColumnIds();try{n.forEach(function(e){var n=r._getColumnId(t,e);if(isNaN(n))throw"Column number: "+e.toString()+" does not exist";a.push(n)})}catch(e){return void this._logger.debug(e)}this.setColumnsWidthById(a,i,e.extend(o,{fixedIds:s}))},hideShowColumnById:function(t,n){var i=this._getColumnId(t,n),o={},r=this._hiddenColumnsMap[t];e.is(r)&&r.hasOwnProperty(i)?(o=r[i],this.setColumnsWidth(t,[n],o.prevWidth,{}),this._hiddenColumnsMap[t].pop(n)):(o={prevWidth:this._getColumnElem(i).getSize().width},e.is(r,"array")?this._hiddenColumnsMap[t][i]=o:(this._hiddenColumnsMap[t]=[],this._hiddenColumnsMap[t][i]=o),this.setColumnsWidth(t,[i],0,{}))},setColumnsWidthById:function(t,n,i){var o,r,a,s,l=this,c=this._getFixedColumnIds();try{if(t.length<1)throw"Input array of ids is empty";if(a=this._getRowIdFromColumnId(t[0]),isNaN(a))throw"Invalid column id"}catch(e){return void this._logger.debug(e)}o=this._getRowElem(a).getSize().width,r=this._getColumnIdsInRow(a),s={_logger:l._logger,getSize:function(e){return l._getColumnElem(e).getSize().width},setSize:function(e,t){l._getColumnElem(e).setStyle("width",l._toPx(t))}},this._setElemsSize.call(s,t,n,r,o,e.extend(i,{fixedIds:c}))},setRowsHeight:function(t,n,i){var o,r,a=this,s=this._getFixedRowIds();try{if(t.length<1)throw"Input array of ids is empty"}catch(e){return void this._logger.debug(e)}o=this.getContent().getSize().height,r={_logger:a._logger,getSize:function(e){return a._getRowElem(e).getSize().height},setSize:function(e,t){a._getRowElem(e).setStyle("height",a._toPx(t))}},this._setElemsSize.call(r,t,n,this._getRowIds(),o,e.extend(i,{fixedIds:s}))},addFixedColumns:function(e){var t,n,i,o=this;e.forEach(function(e){var r,a=o._getColumnId(e.row,e.column);isNaN(a)?o._logger.debug("{"+e.row.toString()+", "+e.column.toString()+"}: Invalid column"):(t=o._getColumnIdsInRow(e.row),n=t.filter(e=>!o._fixedColumnIds.includes(e)),Math.max.apply(null,n)===a&&n.length>1?(r=Math.max(...n.filter(e=>e<a)),i=o._getColumnElem(r).getElement(".bl-drag-column")):i=o._getColumnElem(a).getElement(".bl-drag-column"),o._fixedColumnIds.push(a),i&&i.destroy())})},removeFixedColumns:function(t){var n,i,o,r,a=this;t.forEach(function(t){var s,l=a._getColumnId(t.row,t.column);isNaN(l)?a._logger.debug("{"+t.row.toString()+", "+t.column.toString()+"}: Invalid column"):-1!==(i=a._fixedColumnIds.indexOf(l))?(a._fixedColumnIds.splice(i,1),n=a._getColumnIdsInRow(t.row),o=n.filter(e=>!a._fixedColumnIds.includes(e)),Math.max.apply(null,o)===l&&o.length>1?(s=Math.max(...o.filter(e=>e<l)),r=e.is(a._getColumnElem(s).getElement(".bl-drag-column"))?null:s):r=e.is(a._getColumnElem(l).getElement(".bl-drag-column"))?null:l,e.is(r)&&a._createHandle(t.row,r,"bl-drag-column").inject(a._getColumnElem(r),"top")):a._logger.debug("{"+t.row.toString()+", "+t.column.toString()+"}: Column was not fixed")})},addFixedRow:function(e){var t,n,i=this;e.forEach(function(e){var o=i._getColumnId(e,0),r=i._getRowIdFromColumnId(o);isNaN(r)?i._logger.debug("{"+e.toString()+"}: Invalid row"):(i._fixedRowIds.push(r),t=i._getRowIds(),(n=Math.max.apply(null,t)===r&&t.length>1?i._getRowElem(r-1).getElement(".bl-drag-row"):i._getRowElem(r).getElement(".bl-drag-row"))&&n.destroy())})},removeFixedRow:function(e){var t,n,i,o=this;e.forEach(function(e){var r=o._getColumnId(e,0),a=o._getRowIdFromColumnId(r);isNaN(a)?o._logger.debug("{"+e.toString()+"}: Invalid row"):-1!==(n=o._fixedRowIds.indexOf(a))?(o._fixedRowIds.splice(n,1),t=o._getRowIds(),i=Math.max.apply(null,t)===a&&t.length>1?a-1:a,o._createHandle(e,i,"bl-drag-row").inject(o._getRowElem(i),"top")):o._logger.debug("{"+e.toString()+"}: Row was not fixed")})},onContainerResized:function(e){var t=this;this.getContent().addEvent("resize",function(){e.call(t)})},getRowIds:function(){return this._rowIds},getRowColumnMap:function(){return this._rowColumnMap},getContainerElem:function(){return this.elements.container}})}),define("DS/DELPPWServices/LandingPageService/LandingPage",["DS/WelcomeScreenView/WelcomeScreen","DS/DELPPWResourceServices/ResourceUtils"],function(e,t){"use strict";return function(n){var i,o,r,a,s=[],l={},c={},d={},u=[],g=[];if(n.contentAndKnowledge.contents.length>0){for(u=[],r=0;r<=n.contentAndKnowledge.contents.length-1;r++)c={id:"UserAssistance"+r,i18n:{title:t.getNLSValue(n.contentAndKnowledge.contents[r].title)},icon:n.contentAndKnowledge.contents[r].icon,url:n.contentAndKnowledge.contents[r].url},u.push(c);l={id:"ContentAndKnowledge",i18n:{title:t.getNLSValue(n.contentAndKnowledge.title)},links:u},s.push(l)}if(n.socialNetworks.communities.length>0){for(g=[],a=0;a<=n.socialNetworks.communities.length-1;a++)d={id:"DelmiaUserCommunity"+a,i18n:{title:t.getNLSValue(n.socialNetworks.communities[a].title)},icon:n.socialNetworks.communities[a].icon,url:n.socialNetworks.communities[a].url},g.push(d);l={id:"SocialNetworks",i18n:{title:t.getNLSValue(n.socialNetworks.title)},links:g},s.push(l)}return o={body:n.body?n.body:null,title:n.appTitle,subtitle:t.getNLSValue(n.appSubtitle),background:t.getImageURLFromKey("LandingPageBackground"),buttons:{items:n.items},linksCategories:s,dragAndDrop:{callbacks:{onDragEnter:e=>Promise.resolve("OverFullPage"),onDrop:e=>{n.onDrop(e)}}}},i=new e(o),widget.body.appendChild(i.getDOM()),i.show(),{show:function(){i.show()},hide:function(){i.hide()}}}}),define("DS/DELPPWServices/ExternalService/ExternalServiceUtil",["UWA/Core","DS/PlatformAPI/PlatformAPI"],function(e,t){"use strict";var n,i,o,r=function(t){return{getAllSelections:function(t){var n=[],i=this.getSelectedNodeInfos(t);return e.is(i,"array")&&(n=i.reduce(function(e,t){return e.concat(t)},[])),n},getSelectedNodeInfos:function(n){var i,o,r,a,s,l,c,d=[],u=n||"ExternalService",g=t.getPlugins("SelectionPlugin"),f=t.getPlugins("DatabasePlugin"),m=t.getPlugins("TreeViewPlugin"),h=t.getPlugins("AttributePlugin"),p=e.is(widget.getValue("separator"))?widget.getValue("separator"):"|";if(!(e.is(f)&&e.is(g)&&e.is(m)&&e.is(h)))return t.getLogger().debug("ExternalServiceUtil","DatabasePlugin or SelectionPlugin or TreeViewPlugin or AttributePlugin not available."),d;for(f=f.instance,g=g.instance,m=m.instance,h=h.instance,l=function(t,n,i){var o,r=[];return e.is(i)&&e.is(i.attribute)?(Array.isArray(i.attribute)?i.attribute:[i.attribute]).forEach(function(i){e.is(n)&&e.is(i.entity)&&"instance"===i.entity&&e.is(n.get(i.name))?(o=n.get(i.name),r.push(o)):e.is(t.get(i.name))&&(o=t.get(i.name),r.push(o))}):(o=t.get("PLMEntity.V_Name"),r.push(o)),r.join(p)},c=function(t,n){var i,o,r,a=t.id,s=t.path,c=null;return r=f.getReference(a),e.is(r)||(c=f.getInstance(a),e.is(c)&&(r=f.getReferenceModelFromInstance(c))),i={reference:{id:r.id,type:r.get("type"),pprType:r.get("PPRTYPE"),revision:r.get("revision")},instance:{id:e.is(c)?c.id:null,absolutePath:s,label:e.is(c)?c.get("PLMInstance.PLM_ExternalID"):null},label:l(r,c,n),parent:null},o=e.is(c)?f.getAggregatingReferenceModelFromInstance(c):null,e.is(o)&&(i.parent={reference:{id:o.id},label:l(o,null,n)}),i},i=g.getSelectionsWithPaths(u),r=g.getSelectionMapping(u),a=0,s=i.length;a<s;a++)o=m.getLabelInfo(r[a]),d[a]=i[a].map(function(e){return c(e,o)});return d}}};return i=function(t){var n,i,o,r,a,s={data:[],widgetID:widget.id},l=["DELLmiTimeConstraintCnx","ProcessImplementLinkOcc","ProductImplementLinkOcc","DELAsmProcessCanUseCnx"];return t.forEach(function(t){"string"==typeof t&&(t=function(e){var t,n={type:[],PID:[],from:[],to:[]};return t=e.split("|"),n.type=t[0],n.PID=e,n.from=t[1],n.to=t[2],n}(t)),i=e.is(t.attributesValue)?t.attributesValue:t,o=e.is(i.type)?i.type:i.PID.split("|")[0],-1===l.indexOf(o)||function(e){var t,n=!1;for(t=0;t<=s.data.length-1;t++)s.data[t].pid===e&&(n=!0);return n}(i.PID)||(r=e.is(i["from.PID"])?i["from.PID"]:i.from,a=e.is(i["to.PID"])?i["to.PID"]:i.to,n={type:o,pid:i.PID,from:r,to:a}),e.is(n)&&(s.data.push(n),n=null)}),s},o=function(t){var n,i,o={data:[],widgetID:widget.id};return i=function(e){var t,n=!1;for(t=0;t<=o.data.length-1;t++)o.data[t].pid===e&&(n=!0);return n},t.forEach(function(t){t=e.is(t.attributesValue)?t.attributesValue:t,e.is(t.isInstanceOf)&&!i(t.PID)&&(n={pid:t.PID,parentRef:t.isAggregatedBy,childRef:t.isInstanceOf}),e.is(n)&&(o.data.push(n),n=null)}),o},{getInstance:function(t){return e.is(n)||(n=new r(t)),n},processCreateConnection:function(e){var n=i(e);n.data.length>>0&&t.publish("DS.MFN.Object.CreateConnection",n)},processDeleteConnection:function(e){var n=i(e);n.data.length>>0&&t.publish("DS.MFN.Object.DeleteConnection",n)},processCreateInstance:function(e){var n=o(e);t.publish("DS.MFN.Object.CreateInstance",n)},processDeleteInstance:function(e){var n=o(e);t.publish("DS.MFN.Object.DeleteInstance",n)}}}),define("DS/DELPPWServices/ModelService",["UWA/Core","DS/DELPPWModelServices/ModelUtils","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWNavigationServices/NavigateUtil","DS/DELPPWDicoServices/DicoUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWWebServices/WebserviceUtils"],function(e,t,n,i,o,r,a){"use strict";return function(s){var l,c,d,u,g,f,m,h=s.getLogger();return l=e.is(s.getConfig().ModelService)?s.getConfig().ModelService:{},c=e.is(l.NavigateUtil)?l.NavigateUtil:{},d=e.is(l.DicoUtils)?l.DicoUtils:{},o.init({modelAttrsPath:d.modelAttrsPath,modelTypesPath:d.modelTypesPath,readOnlyTypesPath:d.readOnlyTypesPath,modelRelationsXML:d.modelRelationsXML,modelCustomRelationsXML:d.modelCustomRelationsXML,acceptedPPRTypesForActionsFilePath:d.AcceptedPPRTypesForActions,acceptedBaseTypesForActionsFilePath:d.AcceptedBaseTypesForActions}),n.init({dicoUtils:o}),i.init({dicoUtils:o,collectionUtils:n,indexMappingXML:c.indexMappingXML,mandatoryPredicates:c.mandatoryPredicates}),u=function(){widget.getPreferences().forEach(function(t){if("hidden"!==t.type){let n=r.getDimension(t.name);if(e.is(n,"object")&&Object.prototype.hasOwnProperty.call(n,"Units")){let i=e.clone(n.Units),o=[];i.forEach(function(e){o.push({label:e.NLSName,value:e.Name})}),widget.addPreference(e.extend(t,{options:o,defaultValue:n.MKSUnit}))}}})},g=function(e,t){return i.setup(e,t)},f=function(t,n){var i,r,s,l;i=e.is(d.modelTypesPath)?d.modelTypesPath:"DS/DELPPWDicoServices/assets/json/ModelTypes.json",r=e.is(d.readOnlyTypesPath)?d.readOnlyTypesPath:"DS/DELPPWDicoServices/assets/json/ReadOnlyTypes.json",s=e.is(d.custoXmlUtilsPath)?d.custoXmlUtilsPath:"DS/DELPPWDicoServices/CustoXmlUtils",require(["text!"+i,"text!"+r,s],function(n,i,r){l=function(){var t,n,i,o,s,l,c=[],d={},u=a.getXMLConfiguration();if(e.is(u))for(n in u)if(Object.hasOwnProperty.call(u,n)&&(s=null,i=u[n],e.is(i.type)&&(o=a.getXMLValues(n),e.is(o)&&(s=r.retrieveAttributesInfoFromXml(i,o))),e.is(s)))for(t in s)Object.hasOwnProperty.call(s,t)&&(e.is(d[t])?d[t]=d[t].concat(s[t]):d[t]=s[t]);for(t in d)Object.hasOwnProperty.call(d,t)&&(l=d[t].filter((e,n)=>d[t].indexOf(e)===n),c.push({type:t,attributes:l}));return c},o.setup({configuredAttribures:l(),modelTypesConfig:e.Json.decode(n),readOnlyTypesConfig:new Set(e.Json.decode(i))}),t()},function(e){n(e)})},m=function(t,n){var i,o,r=[];(i=e.clone(l.intializeOptions)||[]).length>0&&(o=function t(n){Array.isArray(n)?n.forEach(t):e.is(n.require)&&-1===r.indexOf(n.require)&&r.push(n.require)},i.forEach(o)),r.length>0?require(r,function(){var o;o=function t(n){var i,o,r,a=[];return Array.isArray(n)?(a=n.map(e=>t(e)),i=Promise.all(a)):e.is(n.require)&&e.is(n.function)?(r=(o=require(n.require))[n.function],i=new Promise(r.bind(o))):i=Promise.reject(new Error("Configuration is not as expected")),i},function e(){var r;i.length>0?(r=i.splice(0,1)[0],o(r).then(function(){e()},function(e){n(e)})):t()}()}):t()},{name:"ModelService",onStart:function(e){var n,i;n=function(){h.debug("ModelService","Utils initialized!"),u(),e()},i=function(t){h.debug("ModelService","Failed to initialize. Error desc:"+t),e()},t.setWidgetTrigram(s.getConfig().widgetTrigram),Promise.all([new Promise(f),new Promise(g)]).then(function(){new Promise(m).then(n,i)},i)},onStop:function(){},updateAggregationRules:function(){var e=new Promise(function(e,t){o.updateAggregationRules(e,t)});return e.then(function(){h.debug("ModelService","Utils initialized!")}),e}}}}),define("DS/DELPPWServices/ExternalService/LifecycleService",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWServices/ExternalService/PadCommandProxyUtil","DS/DELPPWServices/ExternalService/ExternalServiceUtil"],function(e,t,n,i,o){"use strict";return function(r){var a,s,l,c,d,u,g,f,m,h,p,v,S,C,P,w,b="LifecycleService",L=o.getInstance(r),y=[],D=r.getLogger();return c=function(t){var n,i;D.debug(b,"context.RefreshView: "),D.debug(b,t),n=JSON.parse(t),i=e.is(n.Refresh)?n.Refresh:null,e.is(i)&&(e.is(i.created,"array")&&i.created.length>0&&s.refreshCreated(i.created),e.is(i.deleted,"array")&&i.deleted.length>0&&s.refreshDeleted(i.deleted),e.is(i.modified,"array")&&i.modified.length>0&&s.refreshModified(i.modified))},l=function(n){var i,o,s,l,c,d={},u={data:{paths:[],pathsInst:[]}},g=r.getPlugins("DatabasePlugin"),f={selectedObjectsPID:[],selectedObjectsInstPID:{},modifiedObjectPID:null,modifiedObjectInstPID:null,modifiedObjectSelectionState:!1,widgetId:widget.id?widget.id:"defaultId"};if(e.is(g)){if(g=g.instance,e.is(n)){for(i in f.modifiedObjectSelectionState=n.changed.isSelected,s=g.getInstance(n.changed.nodeId),e.is(s)?(f.modifiedObjectPID=s.get("isInstanceOf"),f.modifiedObjectInstPID=s.get("PID")):(s=g.getReference(n.changed.nodeId),e.is(s)&&(f.modifiedObjectPID=s.get("PID"))),l=n.selectedNodeIds,e.is(l,"array")&&l.forEach(function(t){s=g.getReference(t),e.is(s)&&!e.is(d[t])&&(d[t]=[]),s=g.getInstance(t),e.is(s)&&(o=s.get("isInstanceOf"),e.is(d[o])?d[o].push(t):d[o]=[t])}),d)Object.prototype.hasOwnProperty.call(d,i)&&(f.selectedObjectsPID.push(i),e.is(f.selectedObjectsInstPID[i])?f.selectedObjectsInstPID[i].push(d[i]):f.selectedObjectsInstPID[i]=d[i]||[]);if(D.debug(b,"DS."+a+".Selection.SelectionModified event broadcast: ",f),t.publish("DS."+a+".Selection.SelectionModified",f),f.modifiedObjectSelectionState&&f.selectedObjectsPID.length>=1){if(e.is(n.changed)&&e.is(n.changed.absPath)){let e=n.changed.absPath,t=g.transformToRIROccurrencePath(e);u.data.paths.push(t)}1===(c=f.selectedObjectsInstPID[f.modifiedObjectPID]).length&&u.data.pathsInst.push(c),u.metadata={originWidgetId:r.getConfig().appContext.widget.getId()},t.publish("DS/PADUtils/PADCommandProxy/select",u)}}}else r.getLogger().debug(b,"Database plugin not available.")},d=function(t){var n=[],i=r.getPlugins("DatabasePlugin");D.debug("_padRefresh: "),e.is(t)&&e.is(t.data)&&e.is(t.data.authored)&&(e.is(t.data.authored.modified)?s.refreshModified(t.data.authored.modified):t.data.authored.length>0&&(t.data.authored.forEach(function(e){n.push(e.modified)}),s.refreshModified(n),i.instance.fetchInstancesAndTheirReferences(n,{silentMode:!1})))},u=function(){D.debug("_padAttach: ")},f=function(){var t,n,i=[],o={},a=r.getPlugins("DatabasePlugin"),s=r.getPlugins("ResourcePlugin");return e.is(a)&&e.is(s)?(a=a.instance,s=s.instance,n=function(t,n){const i=function(){return e.is(n,"array")&&n.length>0?n[n.length-1]:null};if(e.is(t))return{options:{grid:{"ds6wg:type":t.reference.type,"ds6wg:revision":t.reference.revision,icon:s.getIconURLFromKey(t.reference.type)}},getID:function(){return t.reference.id},getInstID:function(){return n},getLabel:function(){return t.label},getRelationID:i,getRealParent:function(){let t,n;const o=i();return e.is(o)&&(t=a.getInstance(o),n=t.get("isAggregatedBy")),{getID:function(){return n}}},getParent:function(){let t,n,o;const r=i();let l={};if(e.is(r)&&(t=a.getInstance(r),e.is(t)&&(o=t.get("isAggregatedBy"),n=a.getReference(o),e.is(n)))){let t=n.get("type"),i=n.get("revision");t=e.is(t)?t:"",i=e.is(i)?i:"",l.options={grid:{"ds6wg:type":t,"ds6wg:revision":i,icon:s.getIconURLFromKey(t)}},l.getID=function(){return o}}return l!=={}?l:null}};r.getLogger().debug(b,"No model to create node from")},t=L.getAllSelections(),e.is(t,"array")&&(t.forEach(function(t){e.is(t.instance.id)?e.is(o[t.reference.id])?o[t.reference.id].push(t.instance.id):o[t.reference.id]=[t.instance.id]:e.is(o[t.reference.id])||(o[t.reference.id]=[])}),t.forEach(function(e){i.push(n(e,o[e.reference.id]))})),i):(r.getLogger().debug(b,"Database plugin or resource Plugin not available."),i)},g=function(){e.extend(r.getConfig().appContext,{displayNotification:function(e){"primary"===e.eventID||"success"===e.eventID?D.info(b,e.msg):D.warn(b,e.msg)},getSelectedNodes:function(){return f()},getSecurityContext:function(){return{SecurityContext:n.getSecurityContext(),tenant:n.getTenant()}},isIndexMode:function(){var t=r.getPlugins("DatabasePlugin");if(e.is(t))return!(t=t.instance).isAuthoringMode();throw r.getLogger().debug(b,"Database plugin not available."),new Error("Database plugin not available")},hasFilter:function(t){var n,i,o=r.getPlugins("RootsPlugin"),a={hasFilter:!1};if(!e.is(o))throw r.getLogger().debug(b,"Roots plugin not available."),new Error("Roots plugin not available");return i=(o=o.instance).getCompatibleConfigurationFilters([t]),e.is(i)&&(n=i[t],e.is(n)&&""!==n&&(a.hasFilter=!0)),a},GetFilterSpec:function(t){var n,i,o=r.getPlugins("RootsPlugin");if(!e.is(o))throw r.getLogger().debug(b,"Roots plugin not available."),new Error("Roots plugin not available");return n=(o=o.instance).getCompatibleConfigurationFilters([t]),e.is(n)&&(i=n[t],e.is(i)&&""!==i&&(i={config_filter:i})),i},getActiveView:function(){var t=r.getPlugins("TreeViewPlugin");if(!e.is(t))throw r.getLogger().debug(b,"Tree View plugin not available."),new Error("Roots plugin not available");return(t=t.instance).getActiveView()}})},m=function(e){Array.isArray(e)||(e=[e]),o.processCreateInstance(e)},h=function(e){Array.isArray(e)||(e=[e]),o.processDeleteInstance(e)},p=function(e){Array.isArray(e)||(e=[e]),o.processCreateConnection(e)},v=function(e){Array.isArray(e)||(e=[e]),o.processDeleteConnection(e)},S=function(e){var n,i=[];for(n=0;n<e.data.length;n++)i[n]={Effectivity:e.data[n].Effectivity,CurrentEvolutionEffectivity:e.data[n].CurrentEvolutionEffectivity,PID:e.pids[n]};0!==i.length&&t.publish("DS.MFN.Object.UpdateEvolutionEffectivity",i)},C=function(e){var n={PID:e.movedInstPIDArray[0],parentPID:e.newParentPID,childPID:e.newInstPIDArray,previousParentPID:e.formerParentsPIDArray[0]},i={data:[],widgetId:widget.id?widget.id:"defaultId"};i.data[0]=n,t.publish("DS.MFN.Object.MoveInstances",i)},P=function(e){var t,n;n=e.instancesAndReferences,Array.isArray(n)||(n=[n]),o.processCreateInstance(n),t=e.connections,Array.isArray(t)||(t=[t]),o.processCreateConnection(t)},w=function(e){var t,n;t=e.connections,Array.isArray(t)||(t=[t]),n=e.instancesAndReferences,Array.isArray(n)||(n=[n]),o.processCreateInstance(n),o.processCreateConnection(t)},{onStart:function(n){var o,f;s=new i(r),y.push(r.addExternalListener("select",l)),y.push(r.addExternalListener("instanceCreated",m)),y.push(r.addExternalListener("instanceDeleted",h)),y.push(r.addExternalListener("createImplementLink",p)),y.push(r.addExternalListener("deleteLink",v)),y.push(r.addExternalListener("updateEffectivity",S)),y.push(r.addExternalListener("reparentInstances",C)),y.push(r.addExternalListener("createManufacturingItemStructure",P)),y.push(r.addExternalListener("assignProduct",w)),y.push(r.addExternalListener("createStructure",w)),g(),a=r.getConfig().widgetTrigram,e.is(a)?(o="DS."+a+".Object.AddReference",f="DS."+a+".Object.Refresh",t.subscribe(o,s.addReferenceFromEvent),t.subscribe(f,s.refreshElementFromEvent),t.subscribe("DS/PADUtils/PADCommandProxy/refresh",d),t.subscribe("DS/PADUtils/PADCommandProxy/attach",u),t.subscribe("Lifecycle.Modification",c),t.subscribe("XEN/PUBLIC_EVENT/ENGINEERING_ITEM/PART_NUMBER_UPDATED",e=>{r.getMediator().notify("updateEINAttribute",e,{sourceModuleId:b})})):r.getLogger().debug(b,"LifecycleService: widget trigram is not defined."),n()},onStop:function(){var e,t;for(e=0,t=y.length;e<t;e++)r.removeExternalListener(y[e]);y=[],s=void 0}}}}),define("DS/DELPPWServices/ExternalService/FilterService",["UWA/Core","DS/DELPPWServices/ExternalService/ExternalServiceUtil"],function(e,t){"use strict";return function(n){var i,o,r,a="FilterService",s=n.getLogger(),l=t.getInstance(n),c=[];return o=function(t){e.is(r,"function")&&r.call(null,t)},i=function(){e.extend(n.getConfig().appContext,{getSelectedNodesInfo:function(t){var i,o=l.getAllSelections(a);return!0===(t=t||!1)&&(i=n.getPlugins("DatabasePlugin"),e.is(i)?(i=i.instance,o.forEach(function(e){var t,n=e.instance.absolutePath;t=i.transformToRIROccurrencePath(n.length>0?n:e.reference.id),e.occPathRIR=t})):s.debug(a,'DatabasePlugin is not available. Hence "occPathRIR" property could not be added')),o},subscribeSelectionChange:function(e){r=e},updateCfgColumnsBasedOnCommand:function(t,i){let o=n.getPlugins("CfgColumnsPlugin");e.is(o)&&(o=o.instance).getUpdatedCfgAttributesBasedOnCommand(t,i).then(e=>{n.getMediator().notify("updateCfgColumns",[e])}).catch(function(e){s.debug(a,"Error occured while updating Configuration Columns. Error: "+e)})}})},{onStart:function(){i(),c.push(n.addExternalListener("select",o))},onStop:function(){var e,t;for(e=0,t=c.length;e<t;e++)n.removeExternalListener(c[e]);c=[]}}}}),define("DS/DELPPWServices/ConfigService/ConfigService",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWServices/ConfigService/SecurityContext","DS/DELPPWServices/ConfigService/Preferences","DS/DELPPWServices/ConfigService/CustoParametersSet","DS/DELPPWModelServices/BehaviorUtil"],function(e,t,n,i,o,r,a){"use strict";return function(s){var l,c,d,u,g,f,m,h,p,v,S,C,P,w,b=[],L=null;return u=s.getLogger(),f=e.is(s.getConfig().resource)?s.getConfig().resource:null,m=!!e.is(s.getConfig().isFacet,"boolean")&&s.getConfig().isFacet,h=e.is(s.getConfig().widgetTrigram,"string")&&s.getConfig().widgetTrigram.length>0?s.getConfig().widgetTrigram:"NOTDEFINED",(w=e.is(s.getConfig().eligibleRoleIds,"array")&&s.getConfig().eligibleRoleIds.length>0?s.getConfig().eligibleRoleIds:[]).unshift(h),S=function(t){var i=n.getNLSValue(t);throw widget.body.empty(),e.createElement("div",{type:"text",class:"widget-Loading-Error-Message",html:i}).inject(widget.body),u.error(t),new Error(t)},C=function(e){u.error(e),S("ApplicationInit.WrongInternalComponentInit")},f&&f.appConfigPath||(u.error("App config path is not defined"),S("ApplicationInit.WrongInternalComponentInit")),f&&f.xmlConfiguration||(u.error("XML Configuration is not defined"),S("ApplicationInit.WrongInternalComponentInit")),p=function(){l.isChanged()&&(l.updateSC(),c.updateCredentialsInfoPref())},a.setIsFacet(m),v=Promise.all([new Promise(function(e,n){t.init({cloudServiceName:s.getConfig().cloudServiceName,widgetId:h,isFacet:m,eligibleRoleIds:w,resolve:e,reject:n})}),new Promise(function(e,t){n.init({iconCatalogPath:f.iconCatalogPath,nlsFilePath:f.nlsFilePath}),n.setup(e,t)})]),P=function(s){var p=Promise.resolve(),v=!!e.is(s,"array")&&!!e.is(s[0],"boolean")&&s[0];return u.debug("ConfigService.onStart, isWidgetLicenseAvailable from Compass: "+v),l=new i(u,t,n),d=new r(f.custoParameterRegExp,u,t,n,h),c=new o(u,t,l,d,n,m),new Promise(function(e,t){require([f.appConfigPath],function(t){g=t,e()},function(){t("ApplicationInit.NoApplicationConfiguration")})}).then(function(){return new Promise(function(e,t){l.loadSecurityContexts(e,t)})}).then(d.getCustoParametersSetsInfoPromise).then(function(n){var i=null,o=e.is(n,"array")&&n.length>0?n[0]:null,r=e.is(o)?o.eno_csrf_token||o.ENO_CSRF_TOKEN:null;return e.is(r)?(t.setCSRFToken({eno_csrf_token:r},"3DSpace"),i=Promise.resolve()):i=Promise.reject("ApplicationInit.NoCSRFToken"),i}).then(function(){return v?Promise.resolve():new Promise(function(e,n){t.webServiceRequest({url:"dsmfg/private/V0/invoke/validateLicense?roleTrigram="+h,method:"GET",headers:t.getHeaders({isAuthoringCtx:!1,isJsonOnly:!0}),onComplete:function(){e()},onFailure:function(){n("ApplicationInit.NoWidgetLicenseAvailable")}})})}).then(function(){var n,i,o=f.xmlConfiguration,r=[],s=d.getSelectedPID();for(n in""===s&&(s=a._getVariable("app."+h+".customParametersSetPhysicalID","string","")),t.setXMLConfiguration(o,s),o)Object.prototype.hasOwnProperty.call(o,n)&&(i=new Promise(function(e,i){t.fetchXMLValues(n,e,i)}),r.push(i));return e.is(s,"string")&&s.length>0&&(i=new Promise(function(e,n){t.fetchServerXMLsAsStrings(e,n)}),r.push(i)),Promise.allSettled(r)}).then(function(){var n,i,o,r,a=Promise.resolve(),s=t.getXMLValues("GeneralPreferences");return e.is(g)&&e.is(g.preferences)?(e.is(s)&&(n=g.preferences,i=s,e.is(i)&&e.is(i.Config)&&(o=i.Config.Preferences,e.is(o,"object")&&n.forEach(function(t){e.is(o[t.name])&&(r=o[t.name],t.type=!1===r.isVisible?"hidden":t.type,e.is(r.defaultValue,"boolean")?t.defaultValue=r.defaultValue.toString():t.defaultValue=r.defaultValue)}))),c.populate(g),e.is(L,"function")&&(L(),L=null)):a=Promise.reject("ApplicationInit.WrongInternalComponentInit"),a}).catch(S),p},{name:"ConfigService",onStart:function(e){b.push(s.addExternalListener("endEdit",p)),L=e,v.then(P,C)},onStop:function(){b.forEach(function(e){s.removeExternalListener(e)}),b=[]},getPreference:function(t){return e.clone(widget.getValue(t))},setPreference:function(e,t){return widget.setValue(e,t)},hasConfigurationChanged:function(){return d.isChanged()},isSecurityContextChanged:function(){return l.isChanged()},getConfigurationPID:function(){return d.getSelectedPID()},getPreferences:function(){return c},getAppConfig:function(){return g},getUserId:function(){return l.getUserId()},getSecurityContext:function(){return l}}}}),define("DS/DELPPWServices/LoggerService/LoggerService",["UWA/Core","DS/Logger/Logger","DS/DELPPWLoggerModel/LoggerUtils","DS/DELPPWServices/LoggerService/LogManager","DS/DELPPWServices/LoggerService/AlertManager"],function(e,t,n,i,o){"use strict";return function(r){var a,s,l=r.getLogger(),c=[],d=function(e){return t.getLogger(e)};return l.debug=function(e,t){var n=d(e);n.info.apply(n,Array.prototype.slice.call(arguments,1))},l.log=function(t,i,o,r){var a;if(t=e.is(t)?t:"",a=d(t),i=e.is(i)?i:"",e.is(r)||e.is(o))"completed"===arguments[arguments.length-1]&&Array.prototype.splice.call(arguments,-1),a.info.apply(a,Array.prototype.slice.call(arguments,1)),n.log(i,o,r);else if(!e.is(o))return Array.prototype.push.call(arguments,"started"),a.info.apply(a,Array.prototype.slice.call(arguments,1)),n.log(i)},l.warn=function(t,i,o){var r;(r=d(t)).error.apply(r,Array.prototype.slice.call(arguments,1)),n.logFailed(i,o),i=e.is(i)?{level:"error",subtitle:i}:t,e.is(i)&&s.displayAlert(i)},l.info=function(t,i,o){var r;(r=d(t)).info.apply(r,Array.prototype.slice.call(arguments,1)),n.logCompleted(i,o),i=e.is(i)?{level:"success",subtitle:i}:t,e.is(i)&&s.displayAlert(i)},a=new i(r),s=new o(r),{onStart:function(t){e.is(a)&&e.is(s)||l.debug("LoggerService","initialization Failed"),c.push(r.addExternalListener("addLog",a.addLog)),c.push(r.addExternalListener("ShowLogPanel",a.onShowLogPanel)),t()},onStop:function(){var e,t;for(e=0,t=c.length;e<t;e++)r.removeExternalListener(c[e]);c=[]}}}}),define("DS/DELPPWServices/LandingPageService/LandingPageService",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWServices/LandingPageService/LandingPage","DS/WelcomeScreenView/WelcomeScreenButtonController","DS/Controls/ModalContainer","DS/Controls/Loader"],function(e,t,n,i,o,r,a){"use strict";return function(s){var l,c,d,u,g,f,m,h,p,v,S,C,P,w,b="LandingPageService",L=this,y=s.getLogger(),D=s.getConfig().LandingPageService,E=[],I=!0;return f=function(){var e=[];return t.getXMLValues("LandingPage",function(t){t.Config.Action.forEach(t=>{var i={};switch(i.name=t.name,i.id=t.name,i.i18n={title:n.getNLSValue(t.name,"","HomePage","Title")},i.icon=t.icon,t.type){case"Restore":i.onClick=l.bind(L);break;case"Create":i.onClick=c.bind(L,t.Options);break;default:i.onClick=w.bind(L,t.type,t.Options)}i.controller=new o({onAction:e=>(i.onClick(),Promise.resolve())}),e.push(i)})},function(){e=[{name:"Restore",onClick:l.bind(this)}]}),e},l=function(){v(widget.body),s.getMediator().notify("HideLandingPage"),I=!1,s.getMediator().notify("LoadRecentContent")},c=function(t){var n;v(widget.body),s.getMediator().notify("HideLandingPage"),P(),(t=Array.isArray(t)?t:[t]).forEach(t=>{e.is(t)&&"ReferenceType"===t.name&&(n=t.value)}),s.getMediator().notify("InsertCmd",{arguments:[{ID:"ReferenceType",Value:n},{ID:"ShowDialog",Value:"false"}]})},d=function(e){var t=e.dataTransfer.getData("Text");v(widget.body),s.getMediator().notify("HideLandingPage"),P(),s.getMediator().notify("LoadDropContent",[t,{loadObjectsInOwnView:!0}],{sourceModuleId:b})},u=e.createElement("div",{class:"landingPage-container"}),m=function(e){v(widget.body),s.getMediator().notify("HideLandingPage"),P(),s.getMediator().notify("LoadDropContent",[e,{loadObjectsInOwnView:!0}],{sourceModuleId:b})},h=function(){g.show()},p=function(){C(widget.body),g.hide()},v=function(t){e.is(S)||(S=new a),S.on(n.getNLSValue("loading")),r.createModal(t,S.elements.container)},C=function(t){e.is(S)&&(S.off(),r.removeModal(t,S.elements.container))},P=function(){I&&s.getMediator().notify("ResetRootsStore"),I=!1},w=function(e,t){v(widget.body),s.getMediator().notify("HideLandingPage"),P(),s.getMediator().notify(e,{options:t})},{onStart:function(t){var n=widget.getValue("X3DContentId"),o=f();e.is(u)||y.debug(b,"initialization Failed"),D=e.extend(D,{items:o,body:u,onDrop:d}),g=new i(D),e.is(n,"string")&&""!==n&&m(n),E.push(s.addExternalListener("ShowLandingPage",h)),E.push(s.addExternalListener("HideLandingPage",p)),widget.getValue("isRestoreAutomaticOn")&&(widget.setValue("isRestoreAutomaticOn",!1),v(widget.body),g.hide(),s.getMediator().notify("HideLandingPage"),I=!1,s.getMediator().notify("LoadRecentContent")),t()},onStop:function(){var t,n;for(e.is(g)&&e.is(void 0)&&(g.destroy(),(void 0).destroy()),t=0,n=E.length;t<n;t++)s.removeExternalListener(E[t]);E=[]}}}}),define("DS/DELPPWServices/LayoutService/LayoutService",["UWA/Core","UWA/Promise","DS/ApplicationFrame/FrameWindow","DS/DELPPWServices/LayoutService/DOMNaming","DS/DELPPWServices/LayoutService/BlocLayout"],function(e,t,n,i,o){"use strict";return function(r){var a,s,l,c,d,u,g,f,m;return u=function(e,t,n){var i={},o=!1;return 2===t&&(i.ROW=(e+1)%t,0!==a.getRowSize(i.ROW).height&&(n?(a.unmaximizeRows(),a.removeFixedRow([e])):(a.maximizeRow(i.ROW),a.addFixedRow([e])),o=!0)),o},g=function(e,t){var n;return 0!==(n=a.getColumnSize(e,t)).width&&0!==n.height},f=function(t,n,i,o){var r,a;if(e.is(o,"function"))for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e.is(n[r])){if((!!i||g(t[r].row,t[r].col))===(a=""!==n[r]))continue;o(r,a)}},m=function(t){return t=t||{},e.is(t.rows)||(t.rows=[{columns:1}]),new o({rows:t.rows,logger:r.getLogger(),mediator:r.getMediator()})},{name:"LayoutService",createBlocLayout:function(e){return m(e)},onActionBarReady:function(){r.getMediator().notify("actionBarReady",this)},buildView:function(t){var o,u=this,g=r.getConfig().resource,f=!1;e.is(t.rows)&&e.is(t.actionBarReady)?((l=e.createElement("div",{class:i.construction.appContainer})).addClassName("invisible"),l.addClassName("notransition"),c=e.createElement("div",{class:i.construction.appMessages}).inject(l),d=e.createElement("div",{class:i.construction.appProgressInd}).inject(l),r.updateAppContext({elements:l}),o={viewer:"none",width:"100%",height:"100%",language:widget.lang,workbench:g.afrWorkbenchName,workbenchModule:g.afrWorkbenchModule,context:r.getConfig().appContext,uiOptions:{preserveActionBarHeight:!0}},(s=new n(o)).onActionBarReady(function(){e.is(g.envSpecificAfrWorkbenchName)&&!f?(s.getActionBar().loadModel({file:g.envSpecificAfrWorkbenchName,module:g.afrWorkbenchModule,merge:!0}),f=!0):(e.is(t.actionBarReady,"function")&&t.actionBarReady(),u.onActionBarReady())}),s.inject(l),a=m(t),s.getImmersiveFrame().getDockingElement(WUXDockAreaEnum.RightDockArea).freeZoneContent=a,l.inject(widget.body)):r.getLogger().debug(this.name,'FATAL ERROR: "options.rows" and/or "options.actionBarReady" are not specified on calling buildView')},showLayout:function(){l.removeClassName("invisible"),l.removeClassName("notransition")},setDockingElement:function(t,n){var i,o=s.getImmersiveFrame();n=n||{},e.is(o)&&((i=o.getDockingElement(t)).elements.collapser.addEventListener("click",function(){r.getMediator().notify("dockingZoneToggle",{collapseState:i.collapseDockingZoneFlag,dockingArea:i.side})}),e.extend(i,n))},setPreferredLayoutOnStartup:function(t){var n,i,o=this,a=r.getService("ConfigService"),s=[],l=null;return e.is(a)&&(i=a.getPreference("widgetLayoutValues"),e.is(i)&&(n=e.Json.decode(i),l=[],f(t,n,!0,function(e,n){!1===n&&(s.push({row:t[e].row,col:t[e].col,state:n}),l.push({commandName:t[e].command,state:n}))}),s.forEach(function(e){o.toggleView(e.row,e.col,e.state)}))),l},setPreferredLayout:function(t,n){var i,o,r,a=this,s=e.Promise.deferred(),l=[],c=[];return f(n,t,!1,function(e,t){!0===t?l.push({row:n[e].row,col:n[e].col,commandName:n[e].command,state:t}):c.push({row:n[e].row,col:n[e].col,commandName:n[e].command,state:t})}),i=l.concat(c),o=i.map(function(e){return function(){return a.toggleView(e.row,e.col,e.state)}}),(r=e.Promise.deferred()).resolve(),r=r.promise,o.reduce(function(e,t){var n;return n=e.then(function(){return t()}),e=n},r).then(function(){s.resolve()}),{deferredPromise:s,columns:i}},removeDockingElement:function(t){var n=s.getImmersiveFrame();e.is(n)&&n.getDockingElement(t).remove()},buildAuxiliaryViewDom:function(){return e.createElement("div",{class:i.construction.moduleContainer,html:[{tag:"div",class:i.construction.dropZoneContainer},{tag:"div",class:i.construction.treeListContainer}]})},buildTreeListAuthoringDom:function(t){var n,o;return n=[{tag:"div",class:i.construction.moduleMessages},{tag:"div",class:i.construction.treeListContainer},{tag:"div",class:i.construction.graphContainer,html:[{tag:"div",class:i.construction.grapViewContainer}]}],e.is(t)&&t&&(o={tag:"div",class:i.construction.dropZoneContainer},n.unshift(o)),e.createElement("div",{class:i.construction.moduleContainer,html:n})},getUIContainer:function(){return l},getAlertContainer:function(){return c},getProgressIndContainer:function(){return d},getActionModuleContainer:function(){return e.createElement("div",{class:i.construction.actionViewContainer})},getPropertiesModuleContainer:function(){return e.createElement("div",{class:i.construction.propertiesContainer})},getGroupingModuleContainer:function(){return e.createElement("div",{class:i.construction.groupingPanelContainer})},getRequirementModuleContainer:function(){return e.createElement("div",{class:i.construction.requirementContainer})},toggleView:function(e,n,i){var o,r,s,c=a.getRowColumnMap()[e].length,d=a.getRowIds().length,g={};return s=new t(function(e){var n=a.getContainerElem();l.hasClassName("notransition")?e():new t(function(e){n.addEvent("transitionend",e)}).then(function(){n.removeEvent("transitionend"),setTimeout(e,200)})}),2===c?(g.COL=(n+1)%c,g.ROW=e,0!==(o=a.getColumnSize(g.ROW,g.COL)).width&&0!==o.height?i?(a.removeFixedColumns([{row:e,column:n},{row:g.ROW,column:g.COL}]),a.unmaximizeColumnsInRow(g.ROW)):(a.maximizeColumnInRow(g.ROW,g.COL),a.addFixedColumns([{row:e,column:n}])):(r=u(e,d,i),i&&r?a.maximizeColumnInRow(e,n):a.addFixedColumns([{row:e,column:n}]))):1===c&&(r=u(e,d,i)),s},isViewShown:function(e,t){return g(e,t)},isLayoutBuilt:function(){return e.is(s)},setBlocLayoutContent:function(e,t,n){a.setColumnContent(e,t,n)},getBlocLayout:function(){return a},onStart:function(e){e()},dispose:function(){a=void 0,e.is(s)&&s.dispose(),s=void 0}}}}),define("DS/DELPPWServices/ExternalService/ExternalService",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWServices/ExternalService/ExternalServiceUtil"],function(e,t,n){"use strict";return function(i){var o,r,a="ExternalService",s=i.getLogger(),l=[],c=n.getInstance(i);return r=function(n){var o=i.getPlugins("DatabasePlugin"),r=t.get3DSpaceUrl();e.is(o)?(o=o.instance,n instanceof Array?n.forEach(function(t){var n,i;e.is(t.documentPID)?n=r+"common/emxNavigator.jsp?objectId="+t.documentPID:e.is(t.referencePID)&&(i=o.getReferenceModel(t.referencePID),e.is(i)&&(n=r+"common/emxNavigator.jsp?objectId="+i.id)),e.is(n)&&window.open(n)}):s.debug(a,"ExploreInWebApp: Invalid Input passed(Not a Valid Array)")):i.getLogger().debug(a,"Database plugin not available.")},o=function(){e.extend(i.getConfig().appContext,{getLogger:function(){i.getLogger()},getSelections:function(){return c.getSelectedNodeInfos(a)},notify:function(e,t){e&&i.getMediator().notify(e,t)}})},{onStart:function(){o(),l.push(i.addExternalListener("ExploreInWebApp",r))},onStop:function(){var e,t;for(e=0,t=l.length;e<t;e++)i.removeExternalListener(l[e]);l=[]}}}});