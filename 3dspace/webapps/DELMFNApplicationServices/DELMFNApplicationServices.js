define("DS/DELMFNApplicationServices/Commands/CommandsService",["UWA/Core","DS/CoreEvents/Events","DS/DELPPWServices/CommandsService/CommandsService"],function(e,n,t){"use strict";return function(i){var s,o,a=[],r=[],c=function(e,n){s.notifyApp(e,n)},u=function(e,n){s.toggleModule(e,n)},m=function(){s.initState()},d=function(){var e,n,t,a,r,c,u,m,d,l=i.getPlugins("SelectionPlugin");l?(t=(e=l.instance.getSelections("CMDS"))[0]||[],a=e[1]||[],r=e[2]||[],u=e[3]||[],m=e[4]||[],d=e[5]||[],n=[],c=[],o=u.length+m.length+d.length,s.manageCommandsAvailability(t,a,r,n,c)):i.getLogger().debug("CommandsService","Selection Plugin is not available.")},l=function(e){s.toggleCmdCheckHeaderState(e)},f=function(){s.toggleCmdCheckHeaderState({cmdName:"BIEssentialsCmd",cmdState:!1})},C=function(){s.manageGraphViewCmdAvailablity()},g=function(){d()},P=function(){s.authoringCmdAvailability()};return s=new t(i),e.extend(s,{manageConfigurationCommands:function(n){var t,a,r,c=n||{},u=!!e.is(c.isLicenseCFGValid,"boolean")&&c.isLicenseCFGValid,m=!!e.is(c.isRoot,"boolean")&&c.isRoot,d=e.is(c.auxLength,"number")?c.auxLength:0,l=e.is(c.processViewLength,"number")?c.processViewLength:0,f=e.is(c.selectedItemsCount,"number")?c.selectedItemsCount:0,C=!!e.is(c.isAuthoring,"boolean")&&c.isAuthoring,g=!!e.is(c.isCrossLevel,"boolean")&&c.isCrossLevel,P=d>0,p=o>0;t=!P&&!p&&l>0,s.setCommandState("EditConfigurationContext",u&&t),1===f&&(s.setCommandState("DefineFilter",m&&!P&&!p&&!C),s.setEffectivityCmdState("DisplayEffectivity",u&&!m&&t)),s.setEffectivityCmdState("EditVariant",u&&!m&&t&&!g),1===f&&s.setEffectivityCmdState("CopyVariantEffectivity",u&&!m&&t&&!g),a=s.getCommand("CopyVariantEffectivity"),e.is(a)&&a.isVariantEffAvailable()&&s.setEffectivityCmdState("PasteVariantEffectivity",u&&!m&&t&&!g),1===f&&(s.setEffectivityCmdState("EditEvolution",u&&!m&&t),s.setEffectivityCmdState("CopyEvolutionEffectivity",u&&!m&&t)),r=s.getCommand("CopyEvolutionEffectivity"),e.is(r)&&r.isEvolutionEffAvailable()&&s.setEffectivityCmdState("PasteEvolutionEffectivity",u&&!m&&t),s.setEffectivityCmdState("ExtendEvolutionEffectivity",u&&!m&&t),function(){var n,t,o=i.getPlugins("DatabasePlugin"),a=1,r=!1;if(e.is(o)&&o.isStarted){if(o.instance.isNavigateOnDemand()){if(n=i.getPlugins("SelectionPlugin"),!e.is(n)||!n.isStarted)return void i.getLogger().debug("Selection Plugin is not available.");if(r=((t=n.instance.getSelections("CMDS"))[0]||[]).length>0)for(;a<t.length;a++)if(t[a].length>0){r=!1;break}}s.setCommandState("LoadRelations",r)}else i.getLogger().debug("DatabasePlugin is not available.")}()},manageReplaceCommandsAvailablity:function(e){var n=e.isRoot,t=e.auxiliaryViewLength,i=e.mfgItemsViewLength;this.setCommandState("ReplaceByLatestRevision",!n&&t<1&&i>0),this.setCommandState("ReplaceByNewRevision",!n&&t<1&&i>0),this.setCommandState("ReplaceByExisting",!n&&t<1&&1===i),this.setCommandState("ReplaceByNewReference",!n&&t<1&&1===i),this.setCommandState("ReplaceWhereUsed",!n&&t<1&&i>0)},getInsertAsCommands:function(n){var t,s,o=[];return s=i.getPlugins("DatabasePlugin"),e.is(n)&&e.is(s)&&s.isStarted&&(t=s.instance.getValidChildTypes(n),e.is(t)&&t.length>0&&"PROCESS"===n.get("PPRTYPE")&&o.push("SearchAndAddInstanceCommand","InsertAsCopy")),o}}),{onStart:function(e){a.push(i.addExternalListener("postNodesSelected",g)),a.push(i.addExternalListener("postNodesUnselected",g)),a.push(i.addExternalListener("toggleCmdCheckHeaderState",l)),a.push(i.addExternalListener("authoringMode",d)),a.push(i.addExternalListener("actionBarReady",m)),a.push(i.addExternalListener("ManageGraphViewCmdAvailablity",C)),a.push(i.addExternalListener("refreshAll",f)),a.push(i.addExternalListener("endEdit",P)),r.push(n.subscribe({event:"DELPPWCommands/LandingPage"},function(e){c("ShowLandingPage",e)})),r.push(n.subscribe({event:"DELMFNCommands/CreateMfgItemAndScopeCmd"},function(e){c("CreateMfgItemAndScope",e)})),r.push(n.subscribe({event:"DELMFNCommands/CreateMfgItemAndResultingProductCmd"},function(e){c("CreateMfgItemAndResultingProduct",e)})),r.push(n.subscribe({event:"DELMFNCommands/CreateMfgItemAndLinkAltSubstCmd"},function(e){c("CreateMfgItemAndLinkAltSubst",e)})),r.push(n.subscribe({event:"DELMFNCommands/AssignProductCmd"},function(e){c("AssignProduct",e)})),r.push(n.subscribe({event:"DELPPWCommands/Hide"},function(e){c("Hide",e)})),r.push(n.subscribe({event:"DELPPWCommands/HideAll"},function(e){c("HideAll",e)})),r.push(n.subscribe({event:"DELPPWCommands/Relations"},function(e){u("LINKS",e)})),r.push(n.subscribe({event:"DELPPWCommands/ShowGroupingDataGridView"},function(e){u("GROUPINGMOD",e)})),r.push(n.subscribe({event:"DELPPWCommands/ShowLogPanel"},function(e){c("ShowLogPanel",e)})),r.push(n.subscribe({event:"DELPPWCommands/AlternatesAndSubstitutes"},function(e){u("ALTERNATES_AND_SUBSTITUTES",e)})),r.push(n.subscribe({event:"DELPPWCommands/Alternates"},function(e){u("ALTERNATE",e)})),r.push(n.subscribe({event:"DELPPWCommands/ResultingProduct"},function(e){u("RESULTING_PRODUCT_VIEW",e)})),r.push(n.subscribe({event:"DELPPWCommands/Origin"},function(e){u("ORIGIN",e)})),r.push(n.subscribe({event:"DELPPWCommands/CapableResource"},function(e){u("CAPRESOURCE",e)})),r.push(n.subscribe({event:"DELPPWCommands/Requirement"},function(e){u("REQUIREMENT_VIEW",e)})),r.push(n.subscribe({event:"DELPPWCommands/DisplayProperties"},function(e){u("PROPERTIES",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateLink"},function(e){c("CreateLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateInstance"},function(e){c("CreateInstance",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateLinkOrInstance"},function(e){c("CreateLinkOrInstance",e)})),r.push(n.subscribe({event:"DELPPWCommands/InsertCmd"},function(e){c("InsertCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/UnassignProduct"},function(e){c("UnassignProduct",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateMfgItemStructure"},function(e){c("CreateMfgItemStructure",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateMBOMStatus"},function(e){c("CreateMBOMStatus",e)})),r.push(n.subscribe({event:"DELPPWCommands/UpdateMfgItemStructure"},function(e){c("UpdateMfgItemStructure",e)})),r.push(n.subscribe({event:"DELPPWCommands/ManageInconsistentLinks"},function(e){u("MIL",e)})),r.push(n.subscribe({event:"DELPPWCommands/BIEssentialsCmd"},function(e){c("BIEssentialsCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/BIAltSub"},function(e){c("BIAltSub",e)})),r.push(n.subscribe({event:"DELPPWCommands/DuplicateAdv"},function(e){c("DuplicateAdvCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/Delete"},function(e){c("Delete",e)})),r.push(n.subscribe({event:"DELPPWCommands/DetachInstance"},function(e){c("DetachInstance",e)})),r.push(n.subscribe({event:"DELPPWCommands/SearchAndAddInstanceCommand"},function(e){c("searchAndAddInstance",e)})),r.push(n.subscribe({event:"DELPPWCommands/InsertAsCopy"},function(e){c("InsertAsCopy",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceByLatestRevision"},function(e){c("ReplaceByLatestRevision",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceByExisting"},function(e){c("ReplaceByExisting",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceByNewRevision"},function(e){c("ReplaceByNewRevision",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceByNewReference"},function(e){c("ReplaceByNewReference",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReplaceWhereUsed"},function(e){c("ReplaceWhereUsed",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreateScopeLink"},function(e){c("CreateScopeLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/DeleteScopeLink"},function(e){c("DeleteScopeLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/CreatePartialScopeLink"},function(e){c("CreatePartialScopeLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/DeletePartialScopeLink"},function(e){c("DeletePartialScopeLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/StretchPartialScopeLink"},function(e){c("StretchPartialScopeLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/SwitchToFullScopeLink"},function(e){c("SwitchToFullScopeLink",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReconnectScope"},function(e){c("ReconnectScope",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReviseAndReconnectScope"},function(e){c("ReviseAndReconnectScope",e)})),r.push(n.subscribe({event:"DELPPWCommands/ToggleGraphView"},function(e){c("ToggleGraphView",e)})),r.push(n.subscribe({event:"DELPPWCommands/Reframe"},function(e){c("Reframe",e)})),r.push(n.subscribe({event:"DELPPWCommands/ReframeOn"},function(e){c("ReframeOn",e)})),r.push(n.subscribe({event:"DELPPWCommands/ToggleOrientation"},function(e){c("ToggleOrientation",e)})),r.push(n.subscribe({event:"DELPPWCommands/ToggleOverview"},function(e){c("ToggleOverview",e)})),r.push(n.subscribe({event:"DELPPWCommands/ToggleAuxiliaryView"},function(e){c("toggleAuxPanel",e)})),r.push(n.subscribe({event:"DELPPWCommands/ProductsParts"},function(e){c("ProductsParts",e)})),r.push(n.subscribe({event:"DELPPWCommands/ManufacturingItems"},function(e){c("ManufacturingItems",e)})),r.push(n.subscribe({event:"DELPPWCommands/Show3DViewerCmd"},function(e){c("Show3DViewerCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/EditViewPreferences"},function(e){c("EditViewPreferencesCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/LayoutPreferences"},function(e){c("LayoutPreferences",e)})),r.push(n.subscribe({event:"DELPPWCommands/ExportCSV"},function(e){c("ExportCSVCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/LoadRelations"},function(e){c("LoadRelations",e)})),r.push(n.subscribe({event:"DELPPWCommands/ExpandAll"},function(e){c("expandAll",e)})),r.push(n.subscribe({event:"DELPPWCommands/CollapseAll"},function(e){c("collapseAll",e)})),r.push(n.subscribe({event:"DELPPWCommands/Refresh"},function(e){c("RefreshCmd",e)})),r.push(n.subscribe({event:"DELPPWCommands/UserDefinedExplore"},function(e){c("UserDefExplore",e)})),r.push(n.subscribe({event:"DELPPWCommands/DELCreateEngineeringMadeFromItem"},function(e){c("DELCreateEngineeringMadeFromItem",e)})),s.onStart(e)},onStop:function(){var e,t;for(e=0,t=a.length;e<t;e++)i.removeExternalListener(a[e]);for(a=[],e=0,t=r.length;e<t;e++)n.unsubscribe(r[e]);r=[]}}}}),define("DS/DELMFNApplicationServices/Services",["UWA/Class"],function(e){"use strict";var n={CommandsService:"DS/DELMFNApplicationServices/Commands/CommandsService",LayoutService:"DS/DELMFNApplicationServices/LayoutService"};return e.singleton({getMap:function(){return n}})}),define("DS/DELMFNApplicationServices/LayoutConfig",[],function(){"use strict";return{EBOM:{row:0,col:0,command:"ProductsParts"},MBOM:{row:0,col:1,command:"ManufacturingItems"}}}),define("DS/DELMFNApplicationServices/LayoutService",["UWA/Core","DS/DELPPWServices/LayoutService/LayoutService","DS/DELMFNApplicationServices/LayoutConfig"],function(e,n,t){"use strict";return function(i){var s,o,a,r,c,u,m=new n(i),d=[];return c=function(){var n,s;m.isLayoutBuilt()?e.is(m.onActionBarReady,"function")&&m.onActionBarReady():(m.buildView({rows:[{columns:2}],actionBarReady:function(){e.is(s,"array")&&s.forEach(function(e){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:e.commandName,cmdState:e.state})}),m.showLayout()}}),m.removeDockingElement(WUXDockAreaEnum.TopDockArea),m.removeDockingElement(WUXDockAreaEnum.BottomDockArea),n=widget.getViewportDimensions(),m.setDockingElement(WUXDockAreaEnum.LeftDockArea,{dockingZoneSize:n.width/4,collapseDockingZoneFlag:!0}),m.setDockingElement(WUXDockAreaEnum.RightDockArea,{dockingZoneSize:n.width/4,collapseDockingZoneFlag:!0,resizableFlag:!0,visibleDockingZoneFlag:!1}),o=m.buildTreeListAuthoringDom(!0),a=m.buildTreeListAuthoringDom(!0),r=m.buildAuxiliaryViewDom(),m.setBlocLayoutContent(t.EBOM.row,t.EBOM.col,a),m.setBlocLayoutContent(t.MBOM.row,t.MBOM.col,o),s=m.setPreferredLayoutOnStartup(t))},u=function(){d.push(i.addExternalListener(t.EBOM.command,function(e){var n=m.isViewShown(t.EBOM.row,t.EBOM.col);n&&!0===e.state||!n&&!1===e.state||m.toggleView(t.EBOM.row,t.EBOM.col,e.state)})),d.push(i.addExternalListener(t.MBOM.command,function(e){var n=m.isViewShown(t.MBOM.row,t.MBOM.col);n&&!0===e.state||!n&&!1===e.state||m.toggleView(t.MBOM.row,t.MBOM.col,e.state)})),d.push(i.addExternalListener("widgetLayoutChanged",function(){var n,o,a;o=s.getPreference("widgetLayoutValues"),e.is(o)&&(n=e.Json.decode(o),(a=m.setPreferredLayout(n,t)).deferredPromise.promise.then(function(){a.columns.forEach(function(e){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:e.commandName,cmdState:e.state})}),i.getMediator().notify("LayoutCommandsToggled")}))}))},e.extend(m,{getContainer:function(n){switch(n){case"layoutContainer":return m.getUIContainer();case"product_part":return a;case"process":return o;case"auxiliary":return r;case"alerts":return m.getAlertContainer();case"progressIndicator":return m.getProgressIndContainer();case"action":return m.getActionModuleContainer();case"properties":return m.getPropertiesModuleContainer();case"grouping":return m.getGroupingModuleContainer();case"requirement":return m.getRequirementModuleContainer();case"none":return e.createElement("div",{class:"empty-container"});default:i.getLogger().debug("MFN_LayoutService","Invalid side choice: %s",n)}},getLayoutConfig:function(){return e.clone(t)},onStart:function(e){s=i.getService("ConfigService"),c(),u(),e()},onStop:function(){var e,n;for(e=0,n=d.length;e<n;e++)i.removeExternalListener(d[e]);d=[]}})}});