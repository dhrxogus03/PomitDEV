define("DS/Notifications/NotificationsManagerAbstract",["DS/WebappsUtils/WebappsUtils","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/CoreEvents/ModelEvents","UWA/Core","UWA/Controls/Abstract"],function(t,i,e,n,o,s){"use strict";return s.extend({defaultOptions:{},init:function(t){this._parent(t),this._modelEvents=new n,this._counterNotifications=0,this._history=new i,this._lengthHistory=200,this._currentLengthHistory=0,this._dataModel={options:t}},addNotif:function(t){var i=o.clone(t);this._counterNotifications++,this._completeOptions(i);var n=this._buildModelFromOptions(this._counterNotifications,i);return function(t){this._currentLengthHistory++;var i=new e({label:"",grid:t});this._history.addRoot(i),this._currentLengthHistory>this._lengthHistory&&(this._history.removeRoot(this._history.getNthRoot(0)),this._currentLengthHistory--)}.call(this,n),this._modelEvents.publish({event:"notification_added",data:o.clone(n)}),this._counterNotifications},modifyNotif:function(t,i){var n,s=o.clone(i);this._completeOptions(s);for(var a=this._buildModelFromOptions(t,s),c=0;c<this._currentLengthHistory;c++){var l=this._history.getNthRoot(c);if(l.options.grid.count===t){n=l.options.grid;var r=new e({label:"",grid:a});l.addChild(r);break}}this._modelEvents.publish({event:"notification_modified",data:{oldOptions:n,newOptions:o.clone(a)}})},setLengthHistory:function(t){if(!(this._lengthHistory==t||t<0)){for(;this._currentLengthHistory>t;this._currentLengthHistory--)this._history.removeRoot(this._history.getNthRoot(0));this._lengthHistory=t}},getLengthHistory:function(){return this._lengthHistory},getNotifOptions:function(t){for(var i=0;i<this._currentLengthHistory;i++){var e=this._history.getNthRoot(i);if(e.options.grid.count===t){var n=e.getChildren();return n?o.clone(n[n.length-1].options.grid):o.clone(e.options.grid)}}},getLastNthNotificationAdded:function(t){if(t>0&&t<=this._currentLengthHistory)return o.clone(this._history.getNthRoot(this._currentLengthHistory-t).options.grid)},getDataModel:function(){return this._dataModel},getHistory:function(){return this._history},suscribeToNotificationAdded:function(t){return this._modelEvents.subscribe({event:"notification_added"},t)},unsuscribeToNotificationAdded:function(t){this._modelEvents.unsubscribe(t)},suscribeToNotificationModified:function(t){return this._modelEvents.subscribe({event:"notification_modified"},t)},unsuscribeToNotificationModified:function(t){this._modelEvents.unsubscribe(t)},_buildModelFromOptions:function(t,i){return{count:t,options:i}},_completeOptions:function(t){}})}),define("DS/Notifications/NotificationsManagerViewOnConsole",["DS/WebappsUtils/WebappsUtils","UWA/Core","UWA/Class"],function(t,i,e){"use strict";return e.singleton({defaultOptions:{},init:function(t){this._parent(t),this._manager=void 0,this._filter="",this._tokenNotificationAdded=null,this._tokenNotificationModified=void 0},setNotificationManager:function(t){this._manager!==t&&(this._tokenNotificationAdded&&(this._manager.unsuscribeToNotificationAdded(this._tokenNotificationAdded),this._tokenNotificationAdded=void 0),this._tokenNotificationModified&&(this._manager.unsuscribeToNotificationModified(this._tokenNotificationModified),this._tokenNotificationModified=void 0),this._manager=t,this._manager&&(this._tokenNotificationAdded=this._manager.suscribeToNotificationAdded(this._displayNotification.bind(this)),this._tokenNotificationModified=this._manager.suscribeToNotificationModified(this._displayNotification.bind(this))))},_displayNotification:function(t){""!=this._filter&&t.category!=this._filter||(console.log(" "),console.log("###############################"),console.log("#### Notification received ####"),console.log("###############################"),console.log("Level : "+t.level),console.log("Title : "+t.title),console.log("Subtitle : "+t.title),console.log("Message : "+t.message))},setFilterDisplayedNotification:function(t){this._filter!=t&&(this._filter=t,function(){}.call(this))},getFilterDisplayedNotification:function(){return this._filter},clear:function(){console.clear()}})});var WUXNotificationsOnScreenFadeOutPolicy={Slow:0,Medium:1,Fast:2};Object.freeze(WUXNotificationsOnScreenFadeOutPolicy),define("DS/Notifications/NotificationsManagerViewOnScreen",["DS/Core/PointerEvents","DS/CoreEvents/ModelEvents","DS/Menu/ContextualMenu","DS/Utilities/Utils","DS/Controls/TooltipModel","i18n!DS/Notifications/assets/nls/translation","UWA/Core","UWA/Class","UWA/Controls/Abstract"],function(t,i,e,n,o,s,a,c,l){"use strict";var r="info",h="warning",d="error",f="success";function u(){return!this.options.isStacked||1===this.options.notificationsStack.getNotificationsData().length||this.options.manager.getRemoveStackOnFirstTimeoutFlag()}var _=l.extend({defaultOptions:{},init:function(t){this._parent(t),this._notif=null,this._notifIcon=null,this._title=null,this._subtitle=null,this._message=null,this._action=null,this._data=null,this._animHasBegun=!1,this._disposeInProgress=!1,this._fadingTimeout=void 0,this._resizeTimeout=void 0,this._disposeTimeout=void 0,this._warningOpacityTimeout=void 0,this.buildView()},buildView:function(){this._notif=new a.Element("div",{class:"wux-notification-container"});var i=new a.Element("div",{class:"wux-notification-band"}).inject(this._notif);this._notifIcon=new a.Element("span",{class:"wux-notification-icon"}).inject(i),this._closeButton=new a.Element("button",{type:"button",class:"wux-notification-close wux-ui-3ds wux-ui-3ds-wrong"}).inject(this._notif),this._closeButton.tooltipInfos=new o({shortHelp:s.get("close")});var c=this;if(!this.options.isStacked){c=this;e.addEventListener(this.getDiv(),{callback:function(t){return[{type:"PushItem",title:s.get("close"),tooltip:s.get("closeTooltip"),action:{callback:()=>c.dispose()},context:"context_a"}]}})}var l=function(){c.removeTimeout(),c.getDiv().setAttribute("isHighlighted",!0)};this.getDiv().addEventListener("mouseenter",l);var r=function(){c.getDiv().setAttribute("isHighlighted",!1),c.addTimeoutAfter(p.call(c.options.manager)/2)};this.getDiv().addEventListener("mouseleave",r);var h=!1;let d=!1;this.getDiv().addEventListener(t.POINTERDOWN,function(t){t.target.hasClassName("wux-notification-message")&&t.target.offsetHeight<t.target.scrollHeight&&t.offsetX>=t.target.offsetWidth-n.getScrollbarWidth()?h=!0:t.target===c._helpLink&&(d=!0)}),this.getDiv().addEventListener(t.POINTERUP,function(t){if(h)return void(h=!1);if(d)return void(d=!1);this.removeEventListener("mouseenter",l),this.removeEventListener("mouseleave",r);let i=t.target===c._closeButton;var e=function(){return!1}.call(c)?1e3:0;c.disposeAfter(e,i)})},getDiv:function(){return this._notif},setTouchMode:function(t){t?this.getDiv().setAttributeNode(document.createAttribute("touch-mode")):this.getDiv().removeAttribute("touch-mode")},setData:function(t){this.removeTimeout(),this._data=t,this.createCorrectElements(),this.addTimeoutAfter(p.call(this.options.manager));var i=this;this.getDiv().setAttribute("isHighlighted",!0),setTimeout(function(t){i.getDiv().setAttribute("isHighlighted",!1)},500)},createCorrectElements:function(){if(this._title&&(this._title.remove(),delete this._title),this._subtitle&&(this._subtitle.remove(),delete this._subtitle),this._message&&(this._message.remove(),delete this._message),this._action&&(this._action.remove(),delete this._action),this._data){if(""!==this._data.title&&(this._title=new a.Element("div",{class:"wux-notification-title"}),n.getUnsafeHTMLContentValueToApply(this._data.allowUnsafeHTML)?this._title.setContent(this._data.title):this._title.textContent=this._data.title,this._title.inject(this.getDiv())),""!==this._data.subtitle&&(this._subtitle=new a.Element("div",{class:"wux-notification-subtitle"}),n.getUnsafeHTMLContentValueToApply(this._data.allowUnsafeHTML)?this._subtitle.setContent(this._data.subtitle):this._subtitle.textContent=this._data.subtitle,this._subtitle.inject(this.getDiv())),""!==this._data.message&&(this._message=new a.Element("div",{class:"wux-notification-message"}),n.getUnsafeHTMLContentValueToApply(this._data.allowUnsafeHTML)?this._message.setContent(this._data.message):this._message.textContent=this._data.message,this._message.inject(this.getDiv())),this._data.helpResources&&Object.keys(this._data.helpResources).length>0&&(this._helpLink=n.createUAHelpLink(this._data.helpResources),this._helpLink&&this._helpLink.inject(this.getDiv())),""!==this._data.action.label){this._action=new a.Element("button",{type:"button",class:"wux-controls-button wux-notification-action"}),n.getUnsafeHTMLContentValueToApply(this._data.allowUnsafeHTML)?this._action.setContent(this._data.action.label):this._action.textContent=this._data.action.label,this._action.inject(this.getDiv());var i=this;this._action.addEventListener(t.POINTERUP,function(t){i._data.action.callback.call(this),t.stopPropagation()})}this._data.level===r?this._notifIcon.setAttribute("class","wux-notification-icon wux-ui-3ds wux-ui-3ds-info"):this._data.level===h?this._notifIcon.setAttribute("class","wux-notification-icon wux-ui-3ds wux-ui-3ds-attention"):this._data.level===f?this._notifIcon.setAttribute("class","wux-notification-icon wux-ui-3ds wux-ui-3ds-check"):this._data.level===d&&this._notifIcon.setAttribute("class","wux-notification-icon wux-ui-3ds wux-ui-3ds-error"),this.getDiv().setAttribute("notification-level",this._data.level),this.getDiv().setAttribute("notification-id",this._data.poNotifId),!0===this._data.sticky&&this.getDiv().setAttribute("sticky","")}},addTimeoutAfter:function(t){if(this._data){var i=this;this._data.sticky||(this._data.level===r||this._data.level===f?this._fadingTimeout=setTimeout(function(){u.call(i)&&(i._animHasBegun=!0,null!==i.getDiv().parentNode&&(i.getDiv().setAttribute("isFadingOut",!0),i.options.isStacked&&i.options.notificationsStack.getDiv().setAttribute("isFadingOut",!0))),i._resizeTimeout=setTimeout(function(){var t=u.call(i)?1e3:0;i.disposeAfter(t)},1e3),i.options.manager._modelEvents.publish({event:"notificationOnScreen_animHasBegun",data:i})},t-1e3):this._data.level===h&&(this._warningOpacityTimeout=setTimeout(function(){i._animHasBegun=!0,null!==i.getDiv().parentNode&&(i.getDiv().setAttribute("ghost",!0),i.options.isStacked&&i.options.notificationsStack.getDiv().setAttribute("ghost",!0)),i.options.manager._modelEvents.publish({event:"notificationOnScreen_animHasBegun",data:i})},t)))}},removeTimeout:function(){this.clearTimeouts(),(this._animHasBegun||this._disposeInProgress)&&(this.getDiv().setAttribute("isFadingOut",!1),this.getDiv().setAttribute("isShrinking",!1),this.getDiv().setAttribute("ghost",!1),this.options.isStacked&&(this.options.notificationsStack.getDiv().setAttribute("isFadingOut",!1),this.options.notificationsStack.getDiv().setAttribute("ghost",!1)),this._animHasBegun=!1,this._disposeInProgress=!1)},refreshTimeout:function(){this.removeTimeout(),this.addTimeoutAfter(p.call(this.options.manager))},clearTimeouts:function(){this._fadingTimeout&&clearTimeout(this._fadingTimeout),this._fadingTimeout=null,this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=null,this._disposeTimeout&&clearTimeout(this._disposeTimeout),this._disposeTimeout=null,this._warningOpacityTimeout&&clearTimeout(this._warningOpacityTimeout),this._warningOpacityTimeout=null},disposeAfter:function(t,i){if(!this._disposeInProgress&&null!==this.getDiv().parentNode)if(this._disposeInProgress=!0,0!==t){this.getDiv().setAttribute("isShrinking",!0);var e=this;this._disposeTimeout=setTimeout(()=>e.dispose(i),t),this.options.manager._modelEvents.publish({event:"notificationOnScreen_disposeInProgress",data:this})}else this.dispose(i)},dispose:function(t){this.clearTimeouts(),this.options.isStacked?t?this.options.notificationsStack.dispose():this.options.notificationsStack.removeIndex(0):function(t){t.getDiv().parentNode&&t.getDiv().remove();for(var i=this._notifications,e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}}.call(this.options.manager,this),this.options.manager._modelEvents.publish({event:"notificationOnScreen_disposed",data:this}),this.destroy()}}),g=l.extend({defaultOptions:{},init:function(t){this._parent(t),this._poNotifId=t.poNotifId,this._notificationsData=[],this._notifsStackDiv=null,this._notificationOnScreen=null,this._notifPlaceholderDiv=null,this._nbNotifsStacked=null},buildMainView:function(){this._mainFragment=document.createDocumentFragment(),this._notifsStackDiv=new a.Element("div",{class:"wux-notification-stack"}).inject(this._mainFragment),this._notifPlaceholderDiv=new a.Element("div",{class:"wux-notification-placeholder"}).inject(this._notifsStackDiv),this._multipleNotifsStacked=new a.Element("div",{class:"wux-notification-stacked-depth"}).inject(this._notifPlaceholderDiv),this._multipleNotifsStacked.setAttribute("style","display: none;"),this._multipleNotifsStacked.setAttribute("notification-level",this.options.level),this._notificationOnScreen=new _({poNotifId:this._poNotifId,isStacked:!0,notificationsStack:this,manager:this.options.manager}),this._notificationOnScreen.getDiv().inject(this._notifPlaceholderDiv),this._nbNotifsStacked=new a.Element("div",{class:"wux-notification-nb-stacked"}).inject(this._notifsStackDiv),this._nbNotifsStacked.setAttribute("style","display: none;"),"error"===this.options.level?this.options.manager.elements.container.insertBefore(this._mainFragment,this.options.manager.elements.container.firstChild):this.options.manager.elements.container.appendChild(this._mainFragment);var t=this;e.addEventListener(this.getDiv(),{callback:function(i){let e=t.getNotificationsData().length;return[{type:"PushItem",title:s.get(1===e?"close":"closeAll"),tooltip:s.get(1===e?"closeTooltip":"closeAllTooltip"),action:{callback:function(i){t.dispose()},context:"context_a"}}]}})},getDiv:function(){return this._notifsStackDiv},getNotificationsData:function(){return this._notificationsData},setTouchMode:function(t){this._notificationOnScreen.setTouchMode(t)},addNotification:function(t){this.getNotificationsData().push(t),1===this.getNotificationsData().length&&(this.buildMainView(),this.refreshContent()),this.updateNbNotifsStacked(),this.options.manager.getRemoveStackOnFirstTimeoutFlag()&&this._notificationOnScreen.refreshTimeout()},changeNotification:function(t){for(var i=this.getNotificationsData(),e=0;e<i.length;e++){if(i[e].count===t.count)return i[e]=t,0===e&&this.refreshContent(),0}return 1},refreshContent:function(){this._notificationOnScreen.setData(this.getNotificationsData()[0])},updateNbNotifsStacked:function(){var t=this.getNotificationsData().length;t>1?(this._nbNotifsStacked.textContent=t,2===t&&(this._nbNotifsStacked.setAttribute("style","display: block;"),this._multipleNotifsStacked.setAttribute("style","display: block;"),this.getDiv().setAttribute("multiple-notifications",!0)),this._notificationOnScreen&&this._notificationOnScreen._closeButton&&(this._notificationOnScreen._closeButton.tooltipInfos.shortHelp=s.get("closeAll"))):1===t&&(this._nbNotifsStacked.setAttribute("style","display: none;"),this._multipleNotifsStacked.setAttribute("style","display: none;"),this.getDiv().setAttribute("multiple-notifications",!1),this._notificationOnScreen&&this._notificationOnScreen._closeButton&&(this._notificationOnScreen._closeButton.tooltipInfos.shortHelp=s.get("close")))},removeIndex:function(t){t<0||t>=this.getNotificationsData().length||(1===this.getNotificationsData().length||0===t&&this._notificationOnScreen._animHasBegun&&this.options.manager.getRemoveStackOnFirstTimeoutFlag()?this.dispose():(this.getNotificationsData().splice(t,1),this.updateNbNotifsStacked(),0===t&&this.refreshContent()))},removeNotification:function(t){for(var i=this.getNotificationsData(),e=0;e<i.length;e++){if(i[e].count===t)return this.removeIndex(e),0}return 1},removeNotifications:function(t){for(var i=this.getNotificationsData(),e=0;e<i.length;){t(i[e])?this.removeIndex(e):e++}},dispose:function(){var t=this.getNotificationsData();t.splice(0,t.length),this._notificationOnScreen.dispose(),this.getDiv().parentNode&&this.getDiv().parentNode.removeChild(this.getDiv()),function(t){var i=this._notificationsStacks[t];i&&1===i.length&&(this._notificationsStacks[t].pop(),delete this._notificationsStacks[t])}.call(this.options.manager,this.options.identifier),this.destroy()}});function p(){return this._fadeOutPolicy==WUXNotificationsOnScreenFadeOutPolicy.Medium?5e3:this._fadeOutPolicy==WUXNotificationsOnScreenFadeOutPolicy.Fast?2500:1e4}function m(t){var i="";return 1&this._stackingPolicy&&(i+=t.level),2&this._stackingPolicy&&(i+=t.category),4&this._stackingPolicy&&(i+=t.title),8&this._stackingPolicy&&(i+=t.subtitle),i}return c.singleton({defaultOptions:{},init:function(t){this._parent(t),function(){this._notifScreen=new a.Element("ul",{class:"wux-notification-screen"}),this.elements={},this.elements.container=this._notifScreen,document.body.appendChild(this.elements.container)}.call(this),this._lastNotificationDisplayed=void 0,this._notificationsStacks={},this._notifications=[],this._manager=void 0,this._fadeOutPolicy=WUXNotificationsOnScreenFadeOutPolicy.Medium,this._filter="",this._stackingPolicy=0,this._removeStackOnFirstTimeout=!1,this._modelEvents=new i,this._tokenNotificationAdded=void 0,this._tokenNotificationModified=void 0},getNotificationManager:function(){return this._manager},setNotificationManager:function(t){this._manager!==t&&(this._tokenNotificationAdded&&(this._manager.unsuscribeToNotificationAdded(this._tokenNotificationAdded),this._tokenNotificationAdded=void 0),this._tokenNotificationModified&&(this._manager.unsuscribeToNotificationModified(this._tokenNotificationModified),this._tokenNotificationModified=void 0),this._manager=t,this._manager&&(this._tokenNotificationAdded=this._manager.suscribeToNotificationAdded(this._displayNotification.bind(this)),this._tokenNotificationModified=this._manager.suscribeToNotificationModified(this._changeNotification.bind(this))))},inject:function(t){return t?this.elements.container.inject(t):document.body.appendChild(this.elements.container),this},slide:function(t){void 0!==t.right?this._notifScreen.style.right=t.right+"px":void 0!==t.left?this._notifScreen.style.right=t.left+"px":this._notifScreen.style.right="10px",void 0!==t.top?(this._notifScreen.style.top=t.top+"px",this._notifScreen.style.bottom="initial"):void 0!==t.bottom?(this._notifScreen.style.top="initial",this._notifScreen.style.bottom=t.bottom+"px"):(this._notifScreen.style.top="10px",this._notifScreen.style.bottom="initial")},restorePosition:function(){this._notifScreen.style.right="10px"},setFadeOutPolicy:function(t){t===WUXNotificationsOnScreenFadeOutPolicy.Fast||t===WUXNotificationsOnScreenFadeOutPolicy.Medium||t===WUXNotificationsOnScreenFadeOutPolicy.Slow?this._fadeOutPolicy=t:console.error("Error in NotificationsManagerViewOnScreen::setFadeOutPolicy, policy was not recognized")},getFadeOutPolicy:function(){return this._fadeOutPolicy},setFilterDisplayedNotification:function(t){this._filter!=t&&(this._filter=t||"")},getFilterDisplayedNotification:function(){return this._filter},setStackingPolicy:function(t){this._stackingPolicy!==t&&(0!==t&&(t%2!=1||t>31)?console.log("NotificationsManagerOnScreen stackingPolicy wrong input value"):this._stackingPolicy=t)},getStackingPolicy:function(){return this._stackingPolicy},setRemoveStackOnFirstTimeoutFlag:function(t){this._removeStackOnFirstTimeout=t},getRemoveStackOnFirstTimeoutFlag:function(){return this._removeStackOnFirstTimeout},removeLastNotificationDisplayed:function(){if(this._lastNotificationDisplayed){var t=this;if(0===this._stackingPolicy)this._notifications.every(function(i){return i._data.count===t._lastNotificationDisplayed.count?(i.dispose(),t._lastNotificationDisplayed=void 0,0):1});else{var i=m.call(this,this._lastNotificationDisplayed);i&&this._notificationsStacks[i]&&this._notificationsStacks[i].length&&(this._notificationsStacks[i].every(function(i){return i.removeNotification(t._lastNotificationDisplayed.count)}),this._lastNotificationDisplayed=void 0)}}},removeNotification:function(t){if(0===this._stackingPolicy){var i=this;this._notifications.every(function(e){return e._data.count===t?(e.dispose(),i._lastNotificationDisplayed&&i._lastNotificationDisplayed.count===t&&(i._lastNotificationDisplayed=void 0),0):1})}else for(var e in this._notificationsStacks){if(!this._notificationsStacks[e].every(function(i){return i.removeNotification(t)}))break}},removeNotifications:function(t,i){if(t||i){var e=function(e){return!(t&&e.category!==t||i&&e.level!==i)};if(0!==this._stackingPolicy){for(var n in this._notificationsStacks)this._notificationsStacks[n].forEach(function(t){t.removeNotifications(e)});return}for(var o=0;o<this._notifications.length;)e(this._notifications[o]._data)?this._notifications[o].dispose():o++}else{for(var n in this._notificationsStacks)this._notificationsStacks[n].forEach(function(t){t.dispose()});for(o=this._notifications.length;o>0;--o)this._notifications[o-1].dispose();this._lastNotificationDisplayed=void 0}},setTouchMode:function(t){for(var i in this._notificationsStacks)this._notificationsStacks[i].forEach(function(i){i.setTouchMode(t)});for(var e=0;e<this._notifications.length;e++)this._notifications[e].setTouchMode(t)},_displayNotification:function(t){""!==this._filter&&t.category!==this._filter||(0===this._stackingPolicy?function(t){var i=new _({poNotifId:t.poNotifId,isStacked:!1,manager:this});this._notifications.push(i),i.setData(t),"error"===t.level?this.elements.container.insertBefore(i.getDiv(),this.elements.container.firstChild):this.elements.container.appendChild(i.getDiv())}.call(this,t):function(t){var i=m.call(this,t);if(i){var e,n=this._notificationsStacks[i];n&&0!==n.length?16&this._stackingPolicy&&m.call(this,this._lastNotificationDisplayed)!==m.call(this,t)?(e=new g({manager:this,identifier:i,level:t.level}),this._notificationsStacks[i].push(e)):e=this._notificationsStacks[i][this._notificationsStacks[i].length-1]:(e=new g({manager:this,identifier:i,level:t.level}),this._notificationsStacks[i]=[e]),e.addNotification(t)}}.call(this,t),this._lastNotificationDisplayed=t)},_changeNotification:function(t){0===this._stackingPolicy?function(t){for(var i=0;i<this._notifications.length;i++){var e=this._notifications[i];if(e._data.count===t.oldOptions.count){e.setData(t.newOptions),"error"===t.newOptions.level?this.elements.container.insertBefore(e.getDiv(),this.elements.container.firstChild):this.elements.container.appendChild(e.getDiv());break}}}.call(this,t):function(t){var i=m.call(this,t.oldOptions);i&&this._notificationsStacks[i]&&this._notificationsStacks[i].length&&(m.call(this,t.newOptions)===i?this._notificationsStacks[i].every(function(i){return i.changeNotification(t.newOptions)}):(this._notificationsStacks[i].every(function(i){return i.removeNotification(t.oldOptions.count)}),this._displayNotification(t.newOptions)))}.call(this,t),this._lastNotificationDisplayed&&t.newOptions.count===this._lastNotificationDisplayed.count&&(this._lastNotificationDisplayed=t.newOptions)}})}),define("DS/Notifications/NotificationsManagerViewOnTreeListView",["DS/WebappsUtils/WebappsUtils","UWA/Core","UWA/Class","DS/Tree/TreeListView","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],function(t,i,e,n,o,s){"use strict";return e.singleton({defaultOptions:{},init:function(t){this._parent(t),function(){var t={defaultCellHeight:30,apiVersion:2,columns:[{dataIndex:"tree",text:"Tree",isHidden:!0},{text:"Id",dataIndex:"count",width:75,onCellRequest:function(t){var i=t.cellView;if(t.nodeModel&&t.nodeModel.options){var e=t.nodeModel.options.grid;i.getContent().setContent(String(e.count))}}},{text:"Level",dataIndex:"level",width:100},{text:"Title",dataIndex:"title",width:"auto"},{text:"Subtitle",dataIndex:"subtitle",width:"auto"},{text:"Message",dataIndex:"message",width:"auto"},{text:"Number",dataIndex:"number",width:"auto"}],shouldCellAllowUnsafeHTMLContentAt:function(t){return!(!t.nodeModel||!t.nodeModel.getAttributeValue("allowUnsafeHTML"))},roots:[],height:300,isSortable:!1,resize:{columns:!0,rows:!1}};this._treeListView=new n(t)}.call(this),this._manager=null,this._stackingPolicy=0,this._notificationsStacks={},this._filter="",this._tokenNotificationAdded=void 0},setNotificationManager:function(t){if(this._manager!==t)if(this._tokenNotificationAdded&&this._manager.unsuscribeToNotificationAdded(this._tokenNotificationAdded),this._manager=t,this._manager){this._buildDisplayedTreedocument(this._manager.getHistory());var i=this;this._tokenNotificationAdded=this._manager.suscribeToNotificationAdded(function(t){var e=i._manager.getHistory(),n=e.getAllDescendants()[e.getAllDescendants().length-1];i._onAddNotification(n);var o=i._lastManagedNode;i._treeListView.getManager().getScroller()&&i._treeListView.getManager().scrollToNode(o,"bottom"),o.select(!0),i._treeListView.getManager().updateView()})}else this._treeListView.getManager().loadDocument()},setFilterDisplayedNotification:function(t){this._filter!==t&&(this._filter=t||"",this._manager&&function(){this._manager.getHistory().prepareUpdate();var t=this;this._manager.getHistory().search({match:function(i){var e=i.nodeModel._getRowID();i.nodeModel.options.grid.category.toLowerCase()===t._filter.toLowerCase()?t._treeListView.getManager().showRow(e):t._treeListView.getManager().hideRow(e)}}),this._manager.getHistory().pushUpdate()}.call(this))},getFilterDisplayedNotification:function(){return this._filter},inject:function(t){this._treeListView.inject(t)},remove:function(t){this._treeListView.remove(t)},setStackingPolicy:function(t){this._stackingPolicy!=t&&(0!=t&&(t%2!=1||t>31)?console.log("NotificationsManagerOnScreen stackingPolicy wrong input value"):this._stackingPolicy=t)},getStackingPolicy:function(){return this._stackingPolicy},_buildDisplayedTreedocument:function(t){var i=void 0,e=this;t&&(i=new o,e._treeListView.getManager().loadDocument(i),t.getChildren().forEach(function(t,i){e._onAddNotification(t)}))},_onAddNotification:function(t){var i=void 0;if(0===this._stackingPolicy)(i=new s({label:t.options.label,grid:t.options.grid})).options.grid.number=1,this._treeListView.getManager().getDocument().addRoot(i);else{var e=this._getNotificationsStackIdentifier(t.options.grid);e&&this._notificationsStacks[e]&&(this._stackingPolicy<16||function(t,i){if(1&this._stackingPolicy&&t.level!==i.level)return!1;if(2&this._stackingPolicy&&t.category!==i.category)return!1;if(4&this._stackingPolicy&&t.title!==i.title)return!1;if(8&this._stackingPolicy&&t.subtitle!==i.subtitle)return!1;return!0}.call(this,this._lastManagedNode.options.grid,t.options.grid))?(i=this._notificationsStacks[e]).updateOptions({grid:{number:i.options.grid.number+1}}):((i=new s({label:t.options.label,grid:t.options.grid})).options.grid.number=1,this._notificationsStacks[e]=i,this._treeListView.getManager().getDocument().addRoot(i))}this._lastManagedNode=i},_getNotificationsStackIdentifier:function(t){var i="";return 1&this._stackingPolicy&&(i+=t.level),2&this._stackingPolicy&&(i+=t.category),4&this._stackingPolicy&&(i+=t.title),8&this._stackingPolicy&&(i+=t.subtitle),i}})}),define("DS/Notifications/NotificationsManagerUXMessages",["DS/WebappsUtils/WebappsUtils","DS/Notifications/NotificationsManagerAbstract","UWA/Core","UWA/Class"],function(t,i,e,n){"use strict";return i.singleton({defaultOptions:{},init:function(t){this._parent(t),this._dataModel={level:"info",title:"",subtitle:"",message:"",icon:null,sticky:!1,category:"",action:{label:"",callback:function(){}},allowUnsafeHTML:!0}},_completeOptions:function(t){t.level=t.level||"info",t.title=t.title||"",t.subtitle=t.subtitle||"",t.message=t.message||"",t.helpResources=t.helpResources||{},t.sticky=t.sticky||!1,t.category=t.category||"",t.allowUnsafeHTML=void 0===t.allowUnsafeHTML||t.allowUnsafeHTML,t.action?(t.action.label=t.action.label||"Action",t.action.callback=t.action.callback||function(){}):t.action={label:"",callback:function(){}}},_buildModelFromOptions:function(t,i){return{poNotifId:i.poNotifId,count:t,level:i.level,title:i.title,subtitle:i.subtitle,message:i.message,helpResources:i.helpResources,icon:i.icon,sticky:i.sticky,category:i.category,action:i.action,allowUnsafeHTML:i.allowUnsafeHTML}}})});