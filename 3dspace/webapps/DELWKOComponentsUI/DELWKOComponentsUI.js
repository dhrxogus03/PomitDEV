define("DS/DELWKOComponentsUI/DELWKOSearchFilter",["DS/TreeModel/BaseFilter"],function(e){"use strict";return e.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("label");if(this.filterModel&&this.filterModel.text&&t){return!(-1!==t.toLowerCase().indexOf(this.filterModel.text.toLowerCase()))}return!this.filterModel||""!==this.filterModel.ip_text},isEmpty:function(){return void 0===this.filterModel.ip_text}})}),define("DS/DELWKOComponentsUI/DELWKOMagnitudeCombo",["UWA/Class","UWA/Core","DS/Controls/ComboBox","DS/CoreEvents/Events","DS/DELWKONavigationServices/DELWKONavigateUtil","DS/DELWKOModelServices/DELWKOCollectionUtils"],function(e,t,o,n,i,s){"use strict";return o.extend({_items:[],init:function(e){var o=this;o._parent(e),o.addEventListener("change",o.onChange.bind(o)),n.subscribe({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onRemove"},function(e){0===o._items.length&&(o.selectedIndex=0,o.disabled=!0)}),n.subscribe({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onPostAdd"},function(e){if(t.is(e)&&t.is(e.options)&&t.is(e.options.data)&&!o._items.includes(e.options.data.id)){o._items.push(e.options.data.id);var n={add:!1,forceDBMode:!0},a=s.getReferenceModel(e.options.data.id);t.is(a)&&"PROCESS"===a.get("PPRTYPE")&&(n.forceDBMode=!1);var l=null;if(t.is(a)&&(l=a.get("DELFmiMagnitudeExt.V_DimensionType")),t.is(l)&&"EACH"!=l){var r=0,d=-1;o.elementsList.forEach(e=>{e.valueItem===l&&(d=r),r++}),o.selectedIndex=d,o.disabled=!0}else{var c=o.elementsList;if(t.is(c)&&c.length>0){o.selectedIndex=0,n.select_predicate=["physicalid","bo.delfmimagnitudeext.v_dimensiontype","bo.DELMBOMLotQuantityMgtVolume.V_MaxLotQuantity","bo.DELMBOMLotQuantityMgtMass.V_MaxLotQuantity","bo.DELMBOMLotQuantityMgtArea.V_MaxLotQuantity","bo.DELMBOMLotQuantityMgtLength.V_MaxLotQuantity"],n.onComplete=function(e){if(t.is(e)){var n=e.get("DELFmiMagnitudeExt.V_DimensionType");if(t.is(n)&&"EACH"!=n){var i=0,s=-1;o.elementsList.forEach(e=>{e.valueItem===n&&(s=i),i++}),o.selectedIndex=s,o.disabled=!0}}},n.onFailure=function(e){};var u=e.options.data.id;i.fetchRoot(u,n)}}}setTimeout(function(){o._items=[]},600)})},onChange:function(){n.publish({event:"DS/DELWKOComponentsUI/DELWKOMagnitudeCombo/onChange",data:this.elementsList[this.selectedIndex].valueItem})}})}),define("DS/DELWKOComponentsUI/DELWKOUoMCombo",["UWA/Class","UWA/Core","DS/Controls/ComboBox","DS/CoreEvents/Events","DS/DELPPWResourceServices_FD02/ResourceUtils"],function(e,t,o,n,i){"use strict";return o.extend({init:function(){var e=this;e._parent(),e.disabled=!0,n.subscribe({event:"DS/DELWKOComponentsUI/DELWKOMagnitudeCombo/onChange"},function(t){e.onChange(t)})},onChange:function(e){var o=[],n=i.getDimension(e);if(t.is(n)){var s=n.Units;t.is(s)&&s.forEach(e=>{o.push(e.NLSName)})}t.is(o)&&o.length>0?(this.disabled=!1,this.elementsList=o):(this.elementsList=[],this.disabled=!0)}})}),define("DS/DELWKOComponentsUI/DELWKOAutoGenerateTitle",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/Controls/Toggle","DS/Controls/LineEditor","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils"],function(e,t,o,n,i,s,a){"use strict";return e.extend({init:function(){},buildUI:function(e,o){var s=this,a=t.createElement("div",{class:"AutoGenerateTitle"});return a.setStyles({display:"table-row",width:"100%"}),o.divContent=a,s._toggle=new n({type:"switch",label:"Auto generate",checkFlag:!0}),s._toggle.inject(a),s._toggle.addEventListener("buttonclick",function(e){s._control.disabled=!s._control.disabled,s._control.requiredFlag=!e.dsModel.checkFlag}),s._control=new i({requiredFlag:!o.disabled,value:t.is(o.value)?o.value:"",disabled:o.disabled}),s._control.inject(a),a}})}),define("DS/DELWKOComponentsUI/DELWKOSearchButton",["UWA/Class","UWA/Core","DS/Controls/Editor","DS/SearchWidget/SearchWidget","DS/SearchWidget/SearchWidgetConstant"],function(e,t,o,n,i){"use strict";return e.extend({init:function(){this.userTextEditor=n.getSearchWidget(n.FULL,{className:"search",ForbiddenChar:"",MaxNumber:"5",MaxSize:"300",wintop:!1,hint:"slip",showEmptyCategory:!1,type:i.TYPE_PROJECT,urlService:"/resources/v1/modeler/dsprcs/dsprcs:MfgProcess/search",events:{onValid:function(){console.log("coucou")}}})}})}),define("DS/DELWKOComponentsUI/DELWKOSearchUI",["UWA/Class","UWA/Core","UWA/Utils/InterCom","DS/Controls/Button","i18n!DS/DELWKOComponentsUI/assets/nls/DELWKOAutoCompleteUI"],function(e,t,o,n,i){"use strict";return e.extend({_type:null,init:function(e){this._type=e.name.substring(0,e.name.indexOf(".")),this._precondition=e.precondition,this._disabled=e.disabled,this._parent(),this.socketName="search_socket"+(new Date).getTime(),this.socket=new o.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.socket.addListener("Selected_Objects_search",e.searchCallBack)},buildUI:function(){var e=this,t=new n({label:" ",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS,onClick:function(t){e.activate(i.searchTitle,[e._type],null)}},disabled:e._disabled});return t.addEventListener("buttonclick",function(){e.activate(i.searchTitle,[e._type],null)}),t},getOptions:function(e,o,n){var i=this,s={};return s.title=e,s.mode="furtive",s.app_socket_id=this.socketName,s.widget_id=widget.id,s.default_with_precond=!0,s.show_precond=!1,s.source=["3dspace"],s.default_search_criteria="",s.precond="",s.multiSel=!1,s.role="",s.select_result_max_idcard=!1,t.is(n)&&n.forEach(function(e){""!==s.default_search_criteria&&(s.default_search_criteria+=" OR "),s.default_search_criteria+=e}),t.is(o)&&(o.forEach(function(e){""!==s.precond&&(s.precond+=" OR "),null!=i._precondition?s.precond+="flattenedtaxonomies:types/"+e+" "+i._precondition:s.precond+="flattenedtaxonomies:types/"+e}),s.precond="("+s.precond+")"),s},register:function(e){var t=this;e=null!==e?e:this.options(),this.socket.dispatchEvent("RegisterContext",e),this.socket.addListener("onCloseTransient",function(){t.socket.removeListener("onCloseTransient"),t.unRegister()})},unRegister:function(e){var t={widget_id:widget.id};this.socket.dispatchEvent("unregisterSearchContext",t),this.socket.dispatchEvent("UnregisterContext",t)},destroy:function(e){this.unRegister(),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.disconnect()},activate:function(e,t,o){var n=this.getOptions(e,t,o);this.register(n),this.socket.dispatchEvent("InContextSearch",n)}})}),define("DS/DELWKOComponentsUI/DELWKOAutoCompleteUI",["UWA/Class","UWA/Core","DS/UIKIT/Mask","DS/CoreEvents/Events","DS/WUXAutoComplete/AutoComplete","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELWKOComponentsUI/DELWKOSearchFilter","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWModelServices_FD02/BehaviorUtil","i18n!DS/DELWKOComponentsUI/assets/nls/DELWKOAutoCompleteUI"],function(e,t,o,n,i,s,a,l,r,d,c,u,m){"use strict";return e.extend({_model:null,_mapObjects:new Map,_mapScoped:new Map,_mapScopedInv:new Map,_items:[],_addItem:[],_removeItem:[],_addItemSearch:[],_addNode:!0,_currentlyremovingCSO:[],_currentlyaddingCSO:[],_onchangeSelection:!1,PREDICATES:["physicalid","ds6w:label","organization","ds6w:type","ds6w:description","ds6w:state","ds6wg:revision","ds6w:identifier","PLC_BUILD_SERIAL_NUMBER","PLC_BUILD_UNIT_NUMBER","PLC_PLANNED_DATE","PLC_SHIPPED_DATE","PLC_PRODUCT_CONFIGURATION_PID","PLC_PRODUCT_CONFIGURATION","PLC_ACTUAL_BUILD_DATE","PLC_MFG_PLAN_PID","PLC_PRODUCT_PID","PLC_MFG_PLAN_NAME","PLC_PRODUCT","PLC_PRODUCT_TITLE","PLC_PRODUCT_CONFIGURATION_TITLE","PLC_MFG_PLAN_TITLE","PLC_PRODUCT_REVISION","PLC_MFG_PLAN_REVISION"],buildsQuery:function(e){return"flattenedtaxonomies:types/Builds AND current : Build AND plc_95_model_95_pid :"+e.id},getBuilds:function(e,o){var i=this,l="dsmfg/dsmfg:MfgItem/";"DELLmiWorkPlanSystemReference.MfgProcess"===i._options.name&&(l="dsprcs/dsprcs:MfgProcess/");var r=e.id,c=s.getHeaders(),u="resources/v1/modeler/"+l+r+"/dscfg:Configured",m={url:s.get3DSpaceUrl()+u,method:"GET",headers:c,onComplete:function(e){for(var o=new Map,l=e.member,r=l.length,u=0;u<r;u++)if(t.is(l[u])&&Object.keys(l[u]).length>0)for(var m=l[u].configurationCtxt.member,p=m.length,_=0;_<p;_++){m[_].relativePath=m[_].relativePath.replace("/resources","resources");var h=m[_].relativePath+"?$mask=dsmvpfl:ModelRootVersionMask",v={url:s.get3DSpaceUrl()+h,method:"GET",headers:c,onComplete:function(e){for(var t=e.member,s=t.length,l=0;l<s;l++){var r=t[l];if(null!=r){var c={onComplete:function(e){if(null!=(e=e.results))for(var t=e.length,i=0;i<t;i++){for(var s,l,r,d,c=e[i].attributes,u=c.length,m=0;m<u;m++)"ds6w:identifier"===c[m].name&&(s=c[m].value),"ds6wg:revision"===c[m].name&&(l=c[m].value),"type_icon_url"===c[m].name&&(r=c[m].value),"resourceid"===c[m].name&&(d=c[m].value);var p=new a({label:s+" "+l,data:e[i],value:d,icons:[r],grid:{icons:[r],badges:{},value:d,label:s+" "+l}});o.set(d,p)}o.size>0&&n.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents",data:o})},onFailure:function(e){}};d.federatedSearch(i.PREDICATES,i.buildsQuery(r),c)}}}};c.Accept="application/json",s.webServiceRequest(v)}}};c.Accept="application/json",s.webServiceRequest(m)},onChangeSelection:function(e,n){var i=this;if(t.is(e)&&e.length>0&&t.is(i._options.url)&&""!=i._options.url){o.mask(i._options.divContent);var a=s.getHeaders(),l=i._options.url,r={url:s.get3DSpaceUrl()+l+"/search?$top=1000&$searchStr="+e,method:"GET",headers:a,onComplete:function(e){var s=[];s.push(i.getMfgProductionPlanningCnx(e)),t.Promise.all(s).then(function(e){t.is(n.onComplete)&&n.onComplete(e),o.unmask(i._options.divContent),i._onchangeSelection=!1}).catch(e=>{o.unmask(i._options.divContent),i.autoComplete._showPopup()})},onFailure:i.onFailure.bind(i)};a.Accept="application/json",s.webServiceRequest(r)}},init:function(e,t){var o=this;o._core=e,o._model=new l,o._options=t,o._disabledValue=t.disabled,o._items=[],o.autoComplete=new i({placeholder:m.searchPlaceHolder,elementsTree:o._model,disabled:t.disabled,multiSearchMode:!1}),o.autoComplete.fieldType=t.fieldType,o.autoComplete.addEventListener("change",function(e){}),o.autoComplete.addEventListener("keyup",function(e){"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),o._onchangeSelection=!0,o.onChangeSelection(e.target.value))})},onPostAdd:function(e){var t={};null!=(t=e[0])&&(t.name=this._options.name),n.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/onPostAdd",data:t})},onRemove:function(e){var t={};null!=(t=e)&&(t.name=this._options.name),n.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/onRemove",data:t})},buildAutoComplete:function(){return this.autoComplete},getMfgProductionPlanningCnx:function(e){var o=this;return new Promise(function(n,i){var l=new Map;if(null!=e){for(var r=[],d=e.member,u=d.length,m=0;m<u;m++)r.push(d[m].id);if(r.length>0){var p={label:"getMfgProductionPlanning",tenant:"",input_physical_ids:r,attributes:[],version:3,primitives:[{navigate_from_sr:{id:1}}],patterns:{mfgProductionPlanning:[{id:1}]},patternTypeFilters:{mfgProductionPlanning:{typesToReturn:["MfgProductionPlanning"]}}},_={url:s.get3DSpaceUrl()+"cvservlet/navigate?SecurityContext="+s.getSecurityContext(),data:t.Json.encode(p),method:"POST",headers:s.getHeaders({isJsonOnly:!0}),onComplete:function(i){for(var r=[],d=i.result,u=d.length,m=0;m<u;m++){var p=d[m].outputs;if(null!=p&&Object.keys(p).length>0){var _=p.mfgProductionPlanning;if(null!=_)for(var h=_.length,v=0;v<h;v++){r.push(_[v].physicalid);var C=l.get(_[v].physicalid);void 0===C&&(C=[],l.set(_[v].physicalid,C)),C.push(d[m].input_object.physicalid)}}}if(r.length>0){var g={label:"getMfgItemOrMfgProcess",tenant:"",input_physical_ids:r,attributes:[],version:3,primitives:[{navigate_to_sr:{id:1,filter:{role:["51"],semantics:["5"]}},navigate_from_rel:{id:2}}],patterns:{mfgItems:[{id:1}],mfgProcess:[{id:2}]},attributes:["ds6w:label","physicalid","type_icon_url","ds6w:type","current","type","title","revision","bo.PLMReference.V_hasConfigContext"]},f={url:s.get3DSpaceUrl()+"cvservlet/navigate?SecurityContext="+s.getSecurityContext(),data:t.Json.encode(g),method:"POST",headers:s.getHeaders({isJsonOnly:!0}),onComplete:function(t){for(var i=[],s=t.result,r=s.length,d=0;d<r;d++){var u=s[d].outputs;if(null!=u&&Object.keys(u).length>0){var m=u.mfgItems,p=u.mfgProcess;l.forEach(function(e,t){if(t===s[d].input_object.physicalid)for(var n=0;n<p.length;n++)if("RELEASED"===p[n].current&&"FALSE"===p[n]["bo.PLMReference.V_hasConfigContext"]||"TRUE"===p[n]["bo.PLMReference.V_hasConfigContext"]){var i=[];null!=o._mapScoped.get(p[n].physicalid)&&(i=o._mapScoped.get(p[n].physicalid));for(var a=0;a<m.length;a++)i.includes(m[a].physicalid)||(i.push(m[a].physicalid),o._mapObjects.set(m[a].physicalid,m[a]));o._mapScoped.set(p[n].physicalid,i)}}),o._mapScoped.forEach(function(e,t){var n=t;e.forEach(e=>{var t=[];null!=o._mapScopedInv.get(e)&&(t=o._mapScopedInv.get(e));for(var i=0;i<p.length;i++)p[i].physicalid===n&&("RELEASED"===p[i].current&&"FALSE"===p[i]["bo.PLMReference.V_hasConfigContext"]||"TRUE"===p[i]["bo.PLMReference.V_hasConfigContext"])&&(t.includes(p[i].physicalid)||(t.push(p[i].physicalid),o._mapObjects.set(p[i].physicalid,p[i])));o._mapScopedInv.set(e,t)})})}}for(var _=e.member,h=_.length,v=0;v<h;v++)if(o._mapScoped.get(_[v].id)||o._mapScopedInv.get(_[v].id)){var C="";null!=o._mapScoped.get(_[v].id)&&(C=c.getIconURLFromKey("Scope"));var g=new a({label:_[v].title+" "+_[v].revision,data:_[v],value:_[v].id,icons:[c.getIconURLFromKey(_[v].type)],badges:{bottomLeft:C},grid:{badges:{bottomLeft:C},value:_[v].id,label:_[v].title}});i.push(g)}n(i)}};s.webServiceRequest(f)}},onFailure:function(e){o._core.getLogger().debug(this.name,c.getNLSValue("DELWKOAutoCompleteUI.IndexError")),i()}};s.webServiceRequest(_)}else i()}})},onFailure:function(e){t.is(e)&&t.Json.isJson(e)&&t.Json.decode(e);console.log(this.name,"Failed: %o",e),this._core.getLogger().debug(this.name,c.getNLSValue("DELWKOAutoCompleteUI.IndexError"))}})}),define("DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/DELWKOComponentsUI/DELWKOSearchUI","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/DELPPWResourceServices_FD02/ResourceUtils"],function(e,t,o,n,i,s,a,l){"use strict";return e.extend({_autocomplete:null,_autocompleteUI:null,_searchbutton:null,_searchbuttonUI:null,_precondition:null,_preconditionCalls:0,init:function(){},buildUI:function(e,o){var s=t.createElement("div",{class:"AutoCompleteSearchUI"});if(s.setStyles({display:"flex","align-items":"baseline","flex-flow":"row",width:"100%"}),this._precondition=o.precondition,o.divContent=s,t.is(o.impl)){var a=o.impl;this._autocomplete=new a(e,o)}else this._autocomplete=new n(e,o);return this._autocompleteUI=this._autocomplete.buildAutoComplete(),this._autocompleteUI.inject(s),o.searchCallBack=this.searchCallBack.bind(this),o.type=o.dicoType,this._searchbutton=new i(o),this._searchbuttonUI=this._searchbutton.buildUI(),this._searchbuttonUI.inject(s),s},getAutoComplete:function(){return this._autocomplete.autoComplete},preconditionCallBack:function(e){this._preconditionCalls>0?(this._searchbutton._precondition=this._searchbutton._precondition.replace(")",""),this._searchbutton._precondition+=" OR "):this._searchbutton._precondition+="( ",this._searchbutton._precondition+=e,this._searchbutton._precondition+=" )",this._preconditionCalls++},disableCallBack:function(e){this._autocompleteUI.disabled=e,this._searchbuttonUI.disabled=e},searchCallBack:function(e){if(e.length>0){this._autocomplete._items=[],this._autocomplete._addItemSearch=[];var o=e[0],n=this._autocomplete._model;if(t.is(o["ds6w:label"])){this._autocomplete._addItemSearch[this._autocomplete._options.name]=o.id;var i=new a({label:o["ds6w:label"]+" "+o["ds6wg:revision"],data:o,value:o.id,icons:[l.getIconURLFromKey(o["ds6w:type_value"])],grid:{value:o.id,label:o["ds6w:label"]+" "+o["ds6wg:revision"]}}),s=n.getChildren();if(t.is(s)&&s.length>0){var r=-1,d=0;s.forEach(e=>{e.options.data.id===o.id&&(r=d),d++}),r>-1?n.getXSO().add(n.getChildren()[r]):(n.addRoot(i),n.getXSO().add(i))}else n.addRoot(i),n.getXSO().add(i)}}}})}),define("DS/DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI",["UWA/Class","DS/UIKIT/Mask","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWWebServices_FD02/WebserviceUtils"],function(e,t,o,n,i,s,a,l){"use strict";return s.extend({init:function(e,s){var r=this;this._parent(e,s),r._addItem=[],r._removeItem=[],r._model.getXSO().onPostAdd(function(e){r._onchangeSelection||r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r._onchangeSelection||r.onRemove(e)}),o.subscribe({event:"DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI/onPostAdd"},function(e){if(void 0!==e&&0!==e.length&&e.name!==r._options.name&&!1!==r._options.listenCSOEvents&&(!(UWA.is(r._addItemSearch[r._options.name])&&r._addItemSearch[r._options.name].length>0)||r._addItemSearch[r._options.name].includes(e.options.value))&&!(UWA.is(r._addItem)&&r._addItem.length>0&&r._addItem.includes(e.options.value))){r._addItem.push(e.options.value);var o=!1,s=Array.from(r._mapScoped.keys());if(null!=s&&s.length>0)for(var d=null,c=0;c<s.length&&!o;c++)s[c]===e.options.value&&(d=new Map(r._mapScoped),o=!0);if(o){r._currentlyaddingCSO[e.name]=!0;var u=d.get(e.options.value).length;if(u>=1){d.get(e.options.value).forEach(e=>{var t=r._mapObjects.get(e);if(UWA.is(t)){var o=r._model.getChildren().length;r._items=[];for(var n=0;n<o;n++)t.physicalid===r._model.getChildren()[n].options.data.id&&r._items.push(r._model.getChildren()[n])}}),1===u&&r._items.length>0&&!r._model.getXSO().get().includes(r._items[0])&&r._model.getXSO().add(r._items[0]);for(var m=-1,p=r._model.getChildren().length,_=0;_<p&&-1===m;_++)d.get(e.options.value).includes(r._model.getChildren()[_].options.data.id)&&(m=_);m<0&&(r._items=[],r._model=new i,r._model.prepareUpdate(),d.get(e.options.value).forEach(e=>{var t=r._mapObjects.get(e);if(UWA.is(t)){t.title=t["ds6w:label"],t.id=t.physicalid;a.getIconURLFromKey("Scope");var o=new n({label:t.title+" "+t.revision,data:t,value:t.id,icons:[a.getIconURLFromKey(t.type)],grid:{value:t.id,label:t.title}});r._items.push(o),r._model.addRoot(o),r._model.pushUpdate(),r.autoComplete.elementsTree=r._model,r._model.getXSO().onPostAdd(function(e){r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r.onRemove(e)})}}))}}else{r._items=[];var h=[];if(h.push(e.options.data),UWA.is(e.options.data)&&Object.keys(e.options.data).length>0){var v=[];v.push(r.getMfgProductionPlanningCnx({member:h})),UWA.Promise.all(v).then(function(o){t.mask(r._options.divContent);var s=r._mapScoped.get(e.options.value);UWA.is(s)||(s=r._mapScopedInv.get(e.options.value));var d=l.getHeaders({isJsonOnly:!0}),c={url:l.get3DSpaceUrl()+r._options.url+"/bulkfetch",data:UWA.Json.encode(s),method:"POST",headers:d,onComplete:function(e){r._model=new i,r._model.prepareUpdate(),e.member.forEach(e=>{a.getIconURLFromKey("Scope");var t=new n({label:e.title+" "+e.revision,data:e,value:e.id,icons:[a.getIconURLFromKey(e.type)],grid:{value:e.id,label:e.title}});r._items.push(t),r._model.addRoot(t)}),r._model.pushUpdate(),r.autoComplete.elementsTree=r._model,t.unmask(r._options.divContent),r._model.getXSO().onPostAdd(function(e){r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r.onRemove(e)})}};d.Accept="application/json",l.webServiceRequest(c)})}}setTimeout(function(){r._currentlyaddingCSO[e.name]=!1,r._addItem=[];var t=r._addItem.indexOf(e.options.value);t>-1&&r._addItem.splice(t,1),r._model.getXSO().onPostAdd(function(e){r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r.onRemove(e)}),1===r._items.length&&(r._model.getXSO().get().includes(r._items[0])||r._model.getXSO().add(r._items[0]))},600)}}),o.subscribe({event:"DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI/onRemove"},function(e){if(void 0!==e&&0!==e.length&&e.name!==r._options.name&&!(UWA.is(r._removeItem)&&r._removeItem.length>0&&r._removeItem.includes(e.options.value))&&(!(UWA.is(r._addItemSearch[r._options.name])&&r._addItemSearch[r._options.name].length>0)||r._addItemSearch[r._options.name].includes(e.options.value))&&!(UWA.is(r._addItem)&&r._addItem.length>0&&r._addItem.includes(e.options.value))){var t=r._mapScoped.get(e.options.data.id);if(void 0===t&&(t=r._mapScopedInv.get(e.options.data.id)),null!=t&&t.length>0){for(var n=!1,s=r._items.length,a=0;a<s&&!n;a++)for(var l=0;l<t.length&&!n;l++)t[l]===r._items[a].options.data.id&&(n=!0);if(o.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents",data:void 0}),n){r._removeItem.push(e.options.data.id),r._model=new i,r._model.prepareUpdate();for(a=0;a<r._items.length;a++)r._model.addRoot(r._items[a]);r._model.pushUpdate(),r.autoComplete.elementsTree=r._model}else r._model=new i,r.autoComplete.elementsTree=r._model}setTimeout(function(){r._currentlyremovingCSO[e.name]=!1,r._addItem=[],r._removeItem=[];var t=r._removeItem.indexOf(e.options.value);t>-1&&r._removeItem.splice(t,1),r._model.getXSO().onPostAdd(function(e){r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r.onRemove(e)})},150)}})},onPostAdd:function(e){var t={};null!=(t=e[0])&&(t.name=this._options.name),UWA.is(t)&&UWA.is(t.options.data.id)&&(this.getBuilds(t.options.data),this._addItem.push(t.options.data.id),o.publish({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onPostAdd",data:t}))},onRemove:function(e){var t={};null!=(t=e)&&(t.name=this._options.name),UWA.is(t)&&UWA.is(t.options.data.id)&&(this._removeItem.push(t.options.data.id),o.publish({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onRemove",data:t}))},onChangeSelection:function(e){var t=this;t.autoComplete.changeSelection=!0;var o=new Promise(function(o,n){var i={onComplete:function(e){o(e)}};t._parent(e,i)});UWA.Promise.all([o]).then(function(e){if(t.autoComplete.changeSelection=!1,UWA.is(e)&&e.length>0){e=e[0],t._items=[],t._model=new i;for(var o=[],n=0;n<e.length;n++)for(var s=e[n],a=s.length,l=0;l<a;l++)o.push(s[l].options.data.id),t._model.addRoot(s[l]),t._items.push(s[l]);t.autoComplete.elementsTree=t._model,t._model.getXSO().onPostAdd(function(e){t.onPostAdd(e)}),t._model.getXSO().onRemove(function(e){t.onRemove(e)}),1===t._items.length?t._model.getXSO().add(t._items[0]):t.autoComplete._showPopup()}})}})}),define("DS/DELWKOComponentsUI/DELWKOMfgItemAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils"],function(e,t,o,n,i,s,a){"use strict";return n.extend({init:function(){},buildUI:function(e,t){return t.impl=i,this._parent(e,t)}})}),define("DS/DELWKOComponentsUI/DELWKOBuildAutoCompleteUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils"],function(e,t,o,n,i,s,a,l,r){"use strict";return s.extend({_getBuilds:!1,PREDICATES:["physicalid","ds6w:label","organization","ds6w:type","ds6w:description","ds6w:state","ds6wg:revision","ds6w:identifier","PLC_BUILD_SERIAL_NUMBER","PLC_BUILD_UNIT_NUMBER","PLC_PLANNED_DATE","PLC_SHIPPED_DATE","PLC_PRODUCT_CONFIGURATION_PID","PLC_PRODUCT_CONFIGURATION","PLC_ACTUAL_BUILD_DATE","PLC_MFG_PLAN_PID","PLC_PRODUCT_PID","PLC_MFG_PLAN_NAME","PLC_PRODUCT","PLC_PRODUCT_TITLE","PLC_PRODUCT_CONFIGURATION_TITLE","PLC_MFG_PLAN_TITLE","PLC_PRODUCT_REVISION","PLC_MFG_PLAN_REVISION"],buildsQuery:function(e){return"flattenedtaxonomies:types/Builds AND current : Build AND plc_95_model_95_pid :"+e.id},getBuilds:function(e,i){var s=this;if(!0!==s._getBuilds){var l="dsmfg/dsmfg:MfgItem/";"DELLmiWorkPlanSystemReference.MfgProcess"===i&&(l="dsprcs/dsprcs:MfgProcess/");var d=e.id,c=a.getHeaders(),u="resources/v1/modeler/"+l+d+"/dscfg:Configured",m={url:a.get3DSpaceUrl()+u,method:"GET",headers:c,onComplete:function(e){s._getBuilds=!0;for(var i=new Map,l=e.member,d=l.length,u=0;u<d;u++)if(t.is(l[u])&&Object.keys(l[u]).length>0)for(var m=l[u].configurationCtxt.member,p=m.length,_=0;_<p;_++){m[_].relativePath=m[_].relativePath.replace("/resources","resources");var h=m[_].relativePath+"?$mask=dsmvpfl:ModelRootVersionMask",v={url:a.get3DSpaceUrl()+h,method:"GET",headers:c,onComplete:function(e){for(var t=e.member,a=t.length,l=0;l<a;l++){var d=t[l];if(null!=d){var c={onComplete:function(e){if(null!=(e=e.results))for(var t=e.length,a=0;a<t;a++){for(var l,r,d,c,u=e[a].attributes,m=u.length,p=0;p<m;p++)"ds6w:identifier"===u[p].name&&(l=u[p].value),"ds6wg:revision"===u[p].name&&(r=u[p].value),"type_icon_url"===u[p].name&&(d=u[p].value),"resourceid"===u[p].name&&(c=u[p].value);var _=new n({label:l+" "+r,data:e[a],value:c,icons:[d],grid:{value:c,label:l+" "+r}});i.set(c,_)}i.size>0&&(o.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents",data:i}),s._getBuilds=!1)},onFailure:function(e){}};r.federatedSearch(s.PREDICATES,s.buildsQuery(d),c)}}}};c.Accept="application/json",a.webServiceRequest(v)}}};c.Accept="application/json",a.webServiceRequest(m)}}})}),define("DS/DELWKOComponentsUI/DELWKOBuildAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOSearchUI","DS/DELWKOComponentsUI/DELWKOBuildAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils","DS/DELPPWResourceServices_FD02/ResourceUtils"],function(e,t,o,n,i,s,a,l,r,d,c){"use strict";return s.extend({PREDICATES:["physicalid","ds6w:label","organization","ds6w:type","ds6w:description","ds6w:state","ds6wg:revision","ds6w:identifier","PLC_BUILD_SERIAL_NUMBER","PLC_BUILD_UNIT_NUMBER","PLC_PLANNED_DATE","PLC_SHIPPED_DATE","PLC_PRODUCT_CONFIGURATION_PID","PLC_PRODUCT_CONFIGURATION","PLC_ACTUAL_BUILD_DATE","PLC_MFG_PLAN_PID","PLC_PRODUCT_PID","PLC_MFG_PLAN_NAME","PLC_PRODUCT","PLC_PRODUCT_TITLE","PLC_PRODUCT_CONFIGURATION_TITLE","PLC_MFG_PLAN_TITLE","PLC_PRODUCT_REVISION","PLC_MFG_PLAN_REVISION"],init:function(){},buildUI:function(e,n){var i=this;!0===n.populateCSOEvents&&o.subscribe({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents"},function(e){i.populate(e)});var s=t.createElement("div",{class:"AutoCompleteSearchUI"});return s.setStyles({display:"flex","align-items":"baseline","flex-flow":"row",width:"100%"}),i._precondition=n.precondition,n.divContent=s,i._autocomplete=new l(e,n),i._autocompleteUI=i._autocomplete.buildAutoComplete(),i._autocompleteUI.inject(s),n.searchCallBack=i.searchCallBack.bind(i),n.type=n.dicoType,i._searchbutton=new a(n),i._searchbuttonUI=i._searchbutton.buildUI(),i._searchbuttonUI.inject(s),s},preconditionCallBack:function(e){this._preconditionCalls>0?(this._searchbutton._precondition=this._searchbutton._precondition.replace(")",""),this._searchbutton._precondition+=" OR "):this._searchbutton._precondition+="( ",this._searchbutton._precondition+=e,this._searchbutton._precondition+=" )",this._preconditionCalls++},populate:function(e){var t=this._autocomplete.autoComplete.elementsTree;t.prepareUpdate(),null!=e&&e.forEach((e,o)=>{var n=!1;t.getAllDescendants().forEach(e=>{o===e.options.value&&(n=!0)}),n||(t.addRoot(e),this.preconditionCallBack(o))}),t.pushUpdate();var o=t.getAllDescendants().length;void 0===e&&(o=0),o>0?this.disableCallBack(!1):(this._autocomplete.autoComplete.elementsTree=new i,this.disableCallBack(!0),this._searchbutton._precondition=this._precondition,this._preconditionCalls=0)}})}),define("DS/DELWKOComponentsUI/DELWKOProductionPlanAutoCompleteUI",["UWA/Class","UWA/Core","DS/UIKIT/Mask","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWModelServices_FD02/BehaviorUtil"],function(e,t,o,n,i,s,a,l,r){"use strict";return n.extend({init:function(e,t){this._items=[],this._parent(e,t)},onChangeSelection:function(e){var n=this;if(n.autoComplete.changeSelection=!0,t.is(e)&&t.is(n._options.url)&&""!=n._options.url){o.mask(n._options.divContent);var d=a.getHeaders(),c=n._options.url;c=a.get3DSpaceUrl()+c+"/search?$top=1000&$searchStr="+e,r.isCloud()&&(c=n._options.url,d={},c=a.getServiceUrl("orderdatamgmt")+c);var u={url:c,method:"GET",headers:d,onComplete:function(a){n.autoComplete.changeSelection=!1,o.unmask(n._options.divContent);var d=a.member;r.isCloud()&&(d=a.content);var c=d.length;if(c>0){n._items=[],n._model=new s,n._model.prepareUpdate();for(var u=0;u<c;u++){var m=null;r.isCloud()?d[u].title.toUpperCase().includes(e.toUpperCase())&&(m=new i({label:d[u].title,data:d[u],value:d[u].id,icons:[l.getIconURLFromKey("DELLmiProductionPlanReference")],grid:{value:d[u].id,label:d[u].title}})):m=new i({label:d[u].title,data:d[u],value:d[u].id,icons:[l.getIconURLFromKey("DELLmiProductionPlanReference")],grid:{value:d[u].id,label:d[u].title}}),t.is(m)&&(n._items.push(m),n._model.addRoot(m))}n._model.pushUpdate(),n.autoComplete.elementsTree=n._model,1===c&&n._model.getXSO().add(n._items[0]),n.autoComplete._showPopup()}},onFailure:n.onFailure.bind(n)};d.Accept="application/json",a.webServiceRequest(u)}}})}),define("DS/DELWKOComponentsUI/DELWKOProductionPlanAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOSearchUI","DS/DELWKOComponentsUI/DELWKOProductionPlanAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils","DS/DELPPWModelServices_FD02/BehaviorUtil","DS/DELPPWResourceServices_FD02/ResourceUtils","css!DS/DELWKOComponentsUI/assets/css/DELWKOAutoCompleteUI.css"],function(e,t,o,n,i,s,a,l,r,d,c){"use strict";return i.extend({buildUI:function(e,o){var n=t.createElement("div",{class:"AutoCompleteSearchUI"});return this._precondition=o.precondition,o.divContent=n,this._autocomplete=new a(e,o),this._autocompleteUI=this._autocomplete.buildAutoComplete(),this._autocompleteUI.inject(n),o.searchCallBack=this.searchCallBack.bind(this),o.type=o.dicoType,d.isCloud()||(this._searchbutton=new s(o),this._searchbuttonUI=this._searchbutton.buildUI(),this._searchbuttonUI.inject(n)),n},searchCallBack:function(e){if(e.length>0){var o=e[0],i=this._autocomplete._model;if(t.is(o["ds6w:label"])){var s=new n({label:o["ds6w:label"],data:o,value:o.id,icon:c.getIconURLFromKey(o["ds6w:type_value"]),grid:{value:o.id,label:o["ds6w:label"]}});i.addRoot(s),i.getXSO().add(s)}}}})}),define("DS/DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI",["UWA/Class","DS/UIKIT/Mask","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWWebServices_FD02/WebserviceUtils"],function(e,t,o,n,i,s,a,l){"use strict";return o.extend({init:function(e,o){var r=this;this._parent(e,o),r._addItem=[],r._removeItem=[],r._model.getXSO().onPostAdd(function(e){r._onchangeSelection||r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r._onchangeSelection||r.onRemove(e)}),n.subscribe({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onPostAdd"},function(e){if(void 0!==e&&0!==e.length&&e.name!==r._options.name&&!1!==r._options.listenCSOEvents&&!(UWA.is(r._addItem)&&r._addItem.length>0&&r._addItem.includes(e.options.value))){var o=!1;r._addItem.push(e.options.value);var n=Array.from(r._mapScoped.keys());if(null!=n&&n.length>0){var d=null;if(!o){n=Array.from(r._mapScopedInv.keys());for(var c=0;c<n.length&&!o;c++)n[c]===e.options.value&&(d=new Map(r._mapScopedInv),o=!0)}}if(o){r._currentlyaddingCSO[e.name]=!0;d.get(e.options.value).length;var u=-1,m=r._model.getXSO().get();if(m.length>0&&(u=d.get(e.options.value).indexOf(m[0].options.data.id))>-1&&m[0],u<0)for(var p=r._model.getChildren().length,_=0;_<p&&-1===u;_++){d.get(e.options.value).indexOf(r._model.getChildren()[_].options.data.id)>-1&&(u=_,r._model.getChildren()[u])}if(r._model&&u>=0){r._items=[];for(_=0;_<p;_++)r._items.push(r._model.getChildren()[_])}else 0===r._model.getXSO().get().length&&(r._items=[],r._model=new s,r._model.prepareUpdate(),d.get(e.options.value).forEach(e=>{var t=r._mapObjects.get(e);if(UWA.is(t)){t.title=t["ds6w:label"],t.id=t.physicalid;var o=a.getIconURLFromKey("Scope"),n=new i({label:t.title+" "+t.revision,data:t,value:t.id,icons:[a.getIconURLFromKey(t.type)],badges:{bottomLeft:o},grid:{badges:{bottomLeft:o},value:t.id,label:t.title}});r._items.push(n),r._model.addRoot(n),r._model.pushUpdate(),r.autoComplete.elementsTree=r._model}}))}else{r._items=[];var h=[];if(h.push(e.options.data),UWA.is(e.options.data)&&Object.keys(e.options.data).length>0){var v=[];v.push(r.getMfgProductionPlanningCnx({member:h})),UWA.Promise.all(v).then(function(o){t.mask(r._options.divContent);var n=r._mapScoped.get(e.options.value);UWA.is(n)||(n=r._mapScopedInv.get(e.options.value));var d=l.getHeaders({isJsonOnly:!0}),c={url:l.get3DSpaceUrl()+r._options.url+"/bulkfetch",data:UWA.Json.encode(n),method:"POST",headers:d,onComplete:function(e){r._model=new s,r._model.prepareUpdate(),e.member.forEach(e=>{var t=a.getIconURLFromKey("Scope"),o=new i({label:e.title+" "+e.revision,data:e,value:e.id,icons:[a.getIconURLFromKey(e.type)],badges:{bottomLeft:t},grid:{badges:{bottomLeft:t},value:e.id,label:e.title}});r._items.push(o),r._model.addRoot(o)}),r._model.pushUpdate(),r.autoComplete.elementsTree=r._model,t.unmask(r._options.divContent),r._model.getXSO().onPostAdd(function(e){r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r.onRemove(e)}),1===r._items.length&&(r._model.getXSO().get().includes(r._items[0])||r._model.getXSO().add(r._items[0]))}};d.Accept="application/json",l.webServiceRequest(c)})}}setTimeout(function(){r._currentlyaddingCSO[e.name]=!1,r._addItem=[];var t=r._addItem.indexOf(e.options.value);t>-1&&r._addItem.splice(t,1),r._model.getXSO().onPostAdd(function(e){r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r.onRemove(e)}),1===r._items.length&&(r._model.getXSO().get().includes(r._items[0])||r._model.getXSO().add(r._items[0]))},600)}}),n.subscribe({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onRemove"},function(e){if(void 0!==e&&0!==e.length&&e.name!==r._options.name&&!(UWA.is(r._addItem)&&r._addItem.length>0&&r._addItem.includes(e.options.value)||UWA.is(r._removeItem)&&r._removeItem.length>0&&r._removeItem.includes(e.options.value))){var t=r._mapScoped.get(e.options.data.id);if(void 0===t&&(t=r._mapScopedInv.get(e.options.data.id)),null!=t&&t.length>0){for(var o=!1,i=r._items.length,a=0;a<i&&!o;a++)for(var l=0;l<t.length&&!o;l++)t[l]===r._items[a].options.data.id&&(o=!0);if(n.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents",data:void 0}),o){r._removeItem.push(e.options.data.id),r._model=new s,r._model.prepareUpdate();for(a=0;a<r._items.length;a++)r._model.addRoot(r._items[a]);r._model.pushUpdate(),r.autoComplete.elementsTree=r._model,r._currentlyremovingCSO[e.name]=!0}}setTimeout(function(){r._currentlyremovingCSO[e.name]=!1,r._addItem=[],r._removeItem=[];var t=r._removeItem.indexOf(e.options.value);t>-1&&r._removeItem.splice(t,1),r._model.getXSO().onPostAdd(function(e){r.onPostAdd(e)}),r._model.getXSO().onRemove(function(e){r.onRemove(e)})},50)}})},onPostAdd:function(e){var t={};null!=(t=e[0])&&(t.name=this._options.name),UWA.is(t)&&UWA.is(t.options.data.id)&&(this.getBuilds(t.options.data),this._addItem.push(t.options.data.id),n.publish({event:"DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI/onPostAdd",data:t}))},onRemove:function(e){var t={};null!=(t=e)&&(t.name=this._options.name),UWA.is(t)&&UWA.is(t.options.data.id)&&(this._removeItem.push(t.options.data.id),n.publish({event:"DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI/onRemove",data:t}))},onChangeSelection:function(e){var t=this;t.autoComplete.changeSelection=!0;var o=new Promise(function(o,n){var i={onComplete:function(e){o(e)}};t._parent(e,i)});UWA.Promise.all([o]).then(function(e){if(t.autoComplete.changeSelection=!1,UWA.is(e)&&e.length>0){e=e[0],t._items=[],t._model=new s,t._model.prepareUpdate();for(var o=[],n=0;n<e.length;n++)for(var i=e[n],a=i.length,l=0;l<a;l++)o.push(i[l].options.data.id),t._model.addRoot(i[l]),t._items.push(i[l]);t._model.pushUpdate(),t.autoComplete.elementsTree=t._model,t._model.getXSO().onPostAdd(function(e){t.onPostAdd(e)}),t._model.getXSO().onRemove(function(e){t.onRemove(e)}),1===t._items.length?t._model.getXSO().add(t._items[0]):t.autoComplete._showPopup()}})}})}),define("DS/DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils"],function(e,t,o,n,i,s,a){"use strict";return n.extend({init:function(){},buildUI:function(e,t){return t.impl=i,this._parent(e,t)}})});