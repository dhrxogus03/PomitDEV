define(["require","exports","./Utils"],function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.findMatch=void 0;const i=(e,n,t)=>(e.push(n),e.length>t&&e.shift(),e.length!==t?null:e.join("")),s=(e,n)=>(e=t.stripAnyAttributes(e),n&&t.isWhiteSpace(e)?" ":e);n.findMatch=((e,n,t,o,l,c,r)=>{var u,f;const a=((e,n,t,o)=>{var l;const c=new Map,r=[];for(let u=n;u<t;u++){const n=s(e[u],o.ignoreWhiteSpaceDifferences),t=i(r,n,o.blockSize);null!==t&&(c.has(t)?null===(l=c.get(t))||void 0===l||l.push(u):c.set(t,[u]))}return c})(n,l,c,r);if(0===a.size)return null;let d=t,h=l,p=0,g=new Map;const v=r.blockSize,M=[];for(let n=t;n<o;n++){const t=s(e[n],r.ignoreWhiteSpaceDifferences),o=i(M,t,v);if(null===o)continue;const l=new Map;if(!a.has(o)){g=l;continue}const c=null!==(u=a.get(o))&&void 0!==u?u:[];for(const e of c){const t=(null!==(f=g.get(e-1))&&void 0!==f?f:0)+1;l.set(e,t),t>p&&(d=n-t-v+2,h=e-t-v+2,p=t)}g=l}const w=p+v-1;return 0!==p?{startInOld:d,startInNew:h,endInOld:d+w,endInNew:h+w,size:w}:null})});