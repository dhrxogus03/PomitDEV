define("DS/MPFAddressFormComponent/AddressCard",["UWA/Class/View","UWA/Core","UWA/Event","DS/UIKIT/Input/Toggle","DS/MPFAddressModel/AddressModel","DS/MPFPersonModel/PersonModel","DS/MPFCompanyModel/CompanyModel","DS/MPFServices/ObjectService","DS/MPFError/BadArgumentError","i18n!DS/MPFAddressFormComponent/assets/nls/AddressFormComponent","css!DS/MPFAddressFormComponent/MPFAddressFormComponent"],(e,t,s,n,i,r,d,a,o,l)=>{"use strict";const h=Object.freeze({ON_SELECTED:"onSelected",OPEN_DELETE_MODAL:"openDeleteModal"}),u=e.extend({className:"mpf-address-card",domEvents:{click:"_cardClicked"},setup(e={}){a.requiredAsOneOf(e.legalEntity,[d,r],"options.legalEntity must be a CompanyModel or a PersonModel"),a.requiredOfPrototype(e.address,i,"address must be an AddressModel"),this.address=e.address,this.legalEntity=e.legalEntity,this.country=e.country,this.readOnly=!0===e.readOnly,this.showPhoneNumber=!0===e.showPhoneNumber,this.showTaxId=!0===e.showTaxId,this.showDeleteLink=!0===e.showDeleteLink,this.noToggle=!0===e.noToggle,this.cardContent=this._createCardContent(),this.noToggle||(this.toggle=this._createToggle())},render(){return this.readOnly?(this.container.addClassName("mpf-read-only"),this.container.setContent(this.cardContent)):this.container.setContent({tag:"div",class:"mpf-left-column",html:[this.toggle,this.cardContent]},this.showDeleteLink?{tag:"div",class:"mpf-right-column",html:this._createDeleteLink()}:""),this},select(){this.toggle&&this.toggle.check(),this.container.addClassName("mpf-selected")},unselect(){this.toggle&&this.toggle.uncheck(),this.container.removeClassName("mpf-selected")},getLegalEntity(){return this.legalEntity},getAddress(){return this.address},destroy(){this.toggle=null,this.cardContent=null,this._parent(),this.container=null},_createCardContent(){return t.createElement("div",{class:"mpf-card-content",html:[{tag:"div",class:"mpf-address-title",text:this._getAddressTitle()},{tag:"div",class:"mpf-address-information",html:[this._getAddressInformation(),"CompanyModel"===this.legalEntity._type&&this.showTaxId?this._getTaxRegistrationId():""]}]})},_getAddressTitle(){return"CompanyModel"===this.legalEntity._type?this.legalEntity.getName():this.legalEntity.getFullName()},_getAddressInformation(){return[i.Fields.LINE1,i.Fields.LINE2,i.Fields.LINE3,i.Fields.LINE4,i.Fields.CITY,i.Fields.COUNTY,i.Fields.STATE,i.Fields.POSTAL_CODE,i.Fields.COUNTRY,this.showPhoneNumber?i.Fields.PHONE_NUMBER:""].map(e=>{if(e===i.Fields.STATE){const s=l[this.address.getCountry()+this.address.getState()];return t.is(s)?s:this.address.get(e)}return e===i.Fields.COUNTRY?this.country:e===i.Fields.CITY||e===i.Fields.POSTAL_CODE?e===i.Fields.POSTAL_CODE?this.address.get(e)+" "+this.address.get(i.Fields.CITY):"":this.address.get(e)}).filter(e=>e&&e.length>0).map(e=>t.createElement("div",{class:"mpf-address-line",text:e}))},_getTaxRegistrationId(){return t.createElement("div",{class:"mpf-tax-registration-id",html:[{tag:"span",class:"mpf-tax-registration-title",text:l.get("taxRegistrationId")+l.get(":")},{tag:"span",text:this.legalEntity.getTaxRegistrationId()||this.address.get(i.Fields.GST_ID)||l.get("notAvailable")}]})},_createToggle:()=>new n({type:"radio",name:"address-selection",label:"",className:"mpf-toggle primary"}),_createDeleteLink(){return t.createElement("a",{class:"mpf-delete-link",html:[{tag:"span",class:"fonticon fonticon-trash"},l.get("delete")],events:{click:this._openDeleteModal.bind(this)}})},_openDeleteModal(e){s.stopPropagation(e),this.dispatchEvent(h.OPEN_DELETE_MODAL)},_cardClicked(){this.dispatchEvent(h.ON_SELECTED,{addressCard:this})}});return u.Events=h,u}),define("DS/MPFAddressFormComponent/AddressFormComponentV2",["UWA/Core","UWA/Promise","UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFAddressModel/AddressModel","DS/MPFAddressConstraintsModel/AddressConstraintsCollection","DS/MPFCountryModel/CountryCollection","DS/MPFView/FieldTextInputV2","DS/MPFView/FieldSelectInputV2","DS/MPFError/ValidationError","DS/MPFError/BadArgumentError","i18n!DS/MPFAddressFormComponent/assets/nls/AddressFormComponent","css!DS/MPFUI/MPFUI"],function(e,t,s,n,i,r,d,a,o,l,h,u){"use strict";const p=Object.freeze({ON_CHANGE:"onChange"}),c=s.extend({tagName:"form",className:"mpf-form mpf-address-form-v2",domEvents:{'change select[name="country"]':"_onCountryChange"},setup:function(e){e||(e={}),this._checkRequiredParameters(e),this.addressModel=e.addressModel,this.addressConstraints=e.addressConstraints,this.countries=e.countries,this.readOnly=!0===e.readOnly,this.countryReadOnly=!0===e.countryReadOnly,this.horizontalLayout=!0===e.horizontalLayout,this.preSetCountry=e.preSetCountry,this.keepErrorMessages=!0===e.keepErrorMessages,this.showPhoneNumber=!0===e.showPhoneNumber,this.preSetCountry&&!this.addressModel.hasCountry()&&this.addressModel.set(i.Fields.COUNTRY,this.preSetCountry),this._createInputs()},render:function(){this.horizontalLayout&&this.container.addClassName("mpf-horizontal");const e=[];return this.inputs.forEach(function(t){e.push(t.render())}),this.container.setContent(e),this._applyCountryFormatAddress(),this},isValid(){const e=this.stateTextInput.container.isHidden();for(let t=0;t<this.inputs.length;t++)if(!this.inputs[t].isValid()){if("state"!==this.inputs[t].fieldName)return!1;if(e&&"text"!==this.inputs[t].type||!e&&"text"===this.inputs[t].type)return!1}return!0},validate:function(){const e=this;let t,s=!0;return this.inputs.forEach(function(n){n.fieldName!==i.Fields.STATE&&(n.container.isHidden()?""!==e.addressModel.get(n.fieldName)&&e.addressModel.set(n.fieldName,""):(t=n.validate(),s=s&&t.isValid))}),this.stateSelectInput.container.isHidden()&&this.stateTextInput.container.isHidden()?""!==e.addressModel.get(i.Fields.STATE)&&e.addressModel.set(i.Fields.STATE,""):this.stateSelectInput.container.isHidden()?(t=this.stateTextInput.validate(),s=s&&t.isValid):(t=this.stateSelectInput.validate(),s=s&&t.isValid),s},save:function(e){if(this.validate())return this.addressModel.save(null,e)},savePromise:function(e){return this.validate()?this.addressModel.savePromise(null,e).catch(function(e){let s;const n=e&&e.response;return n&&n.errorCode&&"Error.Tax"===n.errorCode&&(s=new h(u.get("invalidTaxArea"))),t.reject(s)}):t.reject(new l(u.get("invalidAddress")))},clear:function(){if(this.addressModel.isNew()){const t=e.clone(i.prototype.defaults);this.countryReadOnly&&delete t[i.Fields.COUNTRY],delete t[i.Fields.IS_BILL_TO],delete t[i.Fields.IS_SHIP_TO],this.addressModel.set(t);const s=Object.keys(t);this.inputs.forEach(function(e){-1!==s.indexOf(e.fieldName)&&e.resetValue()})}},destroy:function(){this.stopListening();for(let e=0;e<this.inputs.length;e++)this.inputs[e].destroy(),this.inputs[e]=null;this._parent(),this.container=null},_onCountryChange:function(){""===this.countrySelectComponent.getValue()&&this.addressModel.set("country","DEFAULT"),this._applyCountryFormatAddress()},_applyCountryFormatAddress:function(){const t=this,s=this.addressModel.hasCountry()?this.addressModel.getCountry():"DEFAULT",n=this.addressConstraints.get(s)?this.addressConstraints.get(s):this.addressConstraints.get("DEFAULT");this.inputs.forEach(function(r){r.fieldName===i.Fields.COUNTRY&&""===r.getValue()||t.keepErrorMessages||r._removeErrorMessage();const d=n.get(r.fieldName);e.is(d)?(t._handleRequiredSymbol(r,d.isRequired()),r.fieldName===i.Fields.STATE?t._displayTextOrSelectStateInput(s,d):r.show()):r.hide()}),this._adaptLabelInputsToAddressFormat(n)},_adaptLabelInputsToAddressFormat:function(e){const t=this,s=[];let n=0;this.addressLineInputs.forEach(function(i){if(""!==i.getValue()&&s.push(i.getValue()),i.container.isHidden())++n;else{const s=parseInt(i.fieldName[i.fieldName.length-1])-n;i.fieldLabel=u.get("labelAddressLine"+s),i.container.getElement(".mpf-label").setContent(u.get("labelAddressLine"+s)),t._handleRequiredSymbol(i,e.get(i.fieldName).isRequired())}}),this._adaptValuesToInputsDisplayed(s)},_adaptValuesToInputsDisplayed:function(e){this.addressLineInputs.forEach(function(t){t.container.isHidden()?t.resetValue({silent:!0}):t.setValue(e.length>0?e.shift():"",{silent:!0})})},_displayTextOrSelectStateInput:function(t,s){const n=this,i=s.getPattern();if(-1!==i.indexOf("|")){this.stateSelectInput.remove();const s=i.substring(1,i.length-1).split("|"),r=[];s.forEach(function(s){r.push({value:s,label:u.get(t+s),selected:!!e.is(n.addressModel.getState())&&(n.addressModel.getState()===s&&n.addressModel.getCountry()===t)})}),this.stateSelectInput.add(r),this.stateTextInput.hide(),this.stateSelectInput.show(),this.stateSelectInput._removeErrorMessage()}else this.stateSelectInput.hide(),this.stateTextInput.show()},_handleRequiredSymbol:function(t,s){if(t.fieldName!==i.Fields.PHONE_NUMBER){const n=t.container.getElement("em.mpf-required"),i=e.createElement("em",{class:"mpf-required",text:" *"});!e.is(n)&&s&&(t.required=!0,t.container.hasClassName("mpf-select-v2")?i.inject(t.container.getElement(".mpf-label label")):i.inject(t.container.getElement("span.mpf-label"))),e.is(n)&&!s&&(t.required=!1,n.remove())}},_createInputs:function(){this.countrySelectComponent=new o({model:this.addressModel,fieldName:i.Fields.COUNTRY,fieldLabel:u.get("country"),readOnly:this.countryReadOnly,placeholder:u.get("selectCountry"),selectableOptions:this._getCountriesOptions(),dynamicValidation:!0,silent:!1}),this.addressLine1Input=new a({model:this.addressModel,fieldName:i.Fields.LINE1,fieldLabel:u.get("labelAddressLine1"),readOnly:this.readOnly,dynamicValidation:!0,maxlength:55}),this.addressLine2Input=new a({model:this.addressModel,fieldName:i.Fields.LINE2,fieldLabel:u.get("labelAddressLine2"),readOnly:this.readOnly,dynamicValidation:!0,maxlength:55}),this.addressLine3Input=new a({model:this.addressModel,fieldName:i.Fields.LINE3,fieldLabel:u.get("labelAddressLine3"),readOnly:this.readOnly,dynamicValidation:!0,maxlength:55}),this.addressLine4Input=new a({model:this.addressModel,fieldName:i.Fields.LINE4,fieldLabel:u.get("labelAddressLine4"),readOnly:this.readOnly,dynamicValidation:!0,maxlength:55}),this.cityInput=new a({model:this.addressModel,fieldName:i.Fields.CITY,fieldLabel:u.get("city"),readOnly:this.readOnly,dynamicValidation:!0}),this.countyInput=new a({model:this.addressModel,fieldName:i.Fields.COUNTY,fieldLabel:u.get("county"),readOnly:this.readOnly,dynamicValidation:!0}),this.stateTextInput=new a({model:this.addressModel,fieldName:i.Fields.STATE,fieldLabel:u.get("state"),readOnly:this.readOnly,dynamicValidation:!0}),this.stateSelectInput=new o({model:this.addressModel,fieldName:i.Fields.STATE,fieldLabel:u.get("state"),readOnly:this.readOnly,placeholder:u.get("statePlaceholder"),dynamicValidation:!0}),this.postalCodeInput=new a({model:this.addressModel,fieldName:i.Fields.POSTAL_CODE,fieldLabel:u.get("postalCode"),readOnly:this.readOnly,dynamicValidation:!0}),this.addressLineInputs=[this.addressLine1Input,this.addressLine2Input,this.addressLine3Input,this.addressLine4Input],this.inputs=[this.countrySelectComponent,this.addressLine1Input,this.addressLine2Input,this.addressLine3Input,this.addressLine4Input,this.cityInput,this.countyInput,this.stateTextInput,this.stateSelectInput,this.postalCodeInput],this.showPhoneNumber&&(this.phoneNumberInput=new a({model:this.addressModel,fieldName:i.Fields.PHONE_NUMBER,fieldLabel:u.get("phoneNumber"),readOnly:this.readOnly,dynamicValidation:!0,required:!0,type:"tel"}),this.inputs.push(this.phoneNumberInput)),this.inputs.forEach(e=>{Object.prototype.isPrototypeOf.call(o,e)?this.listenTo(e,o.Events.UPDATE,this.dispatchEvent.bind(this,p.ON_CHANGE)):this.listenTo(e,a.Events.UPDATE,this.dispatchEvent.bind(this,p.ON_CHANGE))})},_getCountriesOptions:function(){const t=this,s=[];return this.countries.forEach(function(n){const i={value:n.getIso3(),label:n.getName()};i.selected=e.is(t.preSetCountry)?n.getIso3()===t.preSetCountry:n.getIso3()===t.addressModel.getCountry(),s.push(i)}),s},_checkRequiredParameters:function(e){n.requiredOfPrototype(e.addressModel,i,"options.addressModel must be an AddressModel"),n.requiredOfPrototype(e.addressConstraints,r,"options.addressConstraints must be an AddressConstraintsCollection"),n.requiredOfPrototype(e.countries,d,"options.countries must be a CountryCollection")}});return c.Events=p,c}),define("DS/MPFAddressFormComponent/AddressTextInput",["UWA/Core","UWA/Class/View","DS/UIKIT/Input/Text","DS/MPFServices/ObjectService","DS/MPFAddressModel/AddressModel","DS/MPFAddressConstraintsModel/AddressConstraintsModel","i18n!DS/MPFAddressFormComponent/assets/nls/AddressFormComponent","css!DS/MPFAddressFormComponent/MPFAddressFormComponent"],function(e,t,s,n,i,r,d){"use strict";const a=Object.freeze({ON_CHANGE:"onChange"}),o=t.extend({className:"mpf-address-text-input",setup({address:e,fieldName:t,isReadOnly:s=!1,type:r,maxlength:d,placeholder:a}={}){n.requiredOfPrototype(e,i,"options.address must be a AddressModel"),n.requiredOfType(t,"string","options.fieldName must be a string"),this.address=e,this.fieldName=t,this.isReadOnly=s,this.type=r||"text",this.maxlength=d,this.placeholder=a,this.input=null,this.errorContainer=this._createErrorContainer()},render({countryConstraints:e}){const t=e.get(this.fieldName),s=[];if(t){const n=this.address.get(this.fieldName)||"";this.fieldLabel=this._renderLabel({countryConstraints:e}),this.isRequired=t.isRequired(),this.input=this._createInput({value:n,fieldConstraints:t}),s.push(this._renderInputContainer({input:this.input,label:this.fieldLabel})),s.push(this.errorContainer),this._doValidateOnRender({value:n})&&this.validate(),this.container.show()}else this.input=null,this.address.unset(this.fieldName),this.container.hide();return this.container.setContent(s),this},getValue(){return this.input&&this.input.getValue()},setValue(e){this.input&&(this.input.setValue(e),this._onChange())},isValid(){if(this.input){const e=this.getValue();if(this.isRequired&&!e)return!1}const e=this.address.validate(this.fieldName);return!(e&&e.length>0)},validate(){if(this.input){this.removeError();const e=this.getValue();if(this.isRequired&&!e)this.showError(d.get("isRequiredError",{name:this.fieldLabel}));else{const e=this.address.validate(this.fieldName);e&&e.length>0&&this.showError(d.get("isInvalidError",{name:this.fieldLabel}))}}},showError(e){this.container.addClassName("mpf-invalid"),this.errorContainer.setText(e)},removeError(){this.container.removeClassName("mpf-invalid"),this.errorContainer.empty()},destroy(){this.input=null,this.address=null,this._parent(),this.container=null},_doValidateOnRender:({value:e})=>!!e,_onChange(){const e=this.getValue();this.address.set(this.fieldName,e),this.validate(),this.dispatchEvent(a.ON_CHANGE,{fieldName:this.fieldName})},_renderInputContainer({input:e,label:t}){return{tag:"label",class:"mpf-input-line",html:[{tag:"span",class:"mpf-label",html:[t,this.isRequired&&'&nbsp;<em class="mpf-required">*</em>']},e]}},_renderLabel({countryConstraints:e}){if(this.fieldName.startsWith("addressLine")){const t=parseInt(this.fieldName[this.fieldName.length-1]);return d.get("labelAddressLine"+(t-this._getNumberHiddenInputsBefore(t,e)))}return d.get(this.fieldName)},_getNumberHiddenInputsBefore(e,t){let s=0;for(let n=1;n<e;n++)t.get("addressLine"+n)||++s;return s},_createInput({value:e}){return new s({value:e,name:this.fieldName,disabled:this.isReadOnly,required:this.isRequired,maxlength:this.maxlength,placeholder:this.placeholder,attributes:{type:this.type},events:{onChange:this._onChange.bind(this)}})},_createErrorContainer:()=>e.createElement("div",{class:"mpf-error"})});return o.Events=a,o}),define("DS/MPFAddressFormComponent/CountryInput",["DS/UIKIT/Input/Select","DS/MPFServices/ObjectService","DS/MPFAddressModel/AddressModel","DS/MPFCountryModel/CountryCollection","DS/MPFAddressFormComponent/AddressTextInput","i18n!DS/MPFAddressFormComponent/assets/nls/AddressFormComponent"],function(e,t,s,n,i,r){"use strict";const d=i.extend({className:"mpf-address-text-input mpf-country-input",setup({countries:e,...i}){t.requiredOfPrototype(e,n,"options.countries must be a CountryCollection"),this.countries=e,this._parent({fieldName:s.Fields.COUNTRY,...i})},getValue(){return this.input.getValue()[0]},destroy(){this.input=null,this.address=null,this.countries=null,this._parent(),this.container=null},_doValidateOnRender:({value:e})=>!!e&&"DEFAULT"!==e,_renderInputContainer({input:e,label:t}){return{tag:"div",class:"mpf-input-line mpf-label",html:[{tag:"label",html:[t,this.isRequired&&'&nbsp;<em class="mpf-required">*</em>']},e,this.errorContainer]}},_createInput({value:e}){return this._createSelectInput({value:e})},_createSelectInput({value:t}){return new e({name:this.fieldName,placeholder:r.get("selectCountry"),disabled:this.isReadOnly,required:this.isRequired,options:this._getSelectOptions(),events:{onChange:this._onChange.bind(this)}})},_getSelectOptions(e){const t=this.address.getCountry();return this.countries.map(e=>{const s=e.getIso3();return{value:s,label:e.getName(),selected:s===t}})}});return d.Events=i.Events,d}),define("DS/MPFAddressFormComponent/StateInput",["DS/UIKIT/Input/Select","DS/MPFAddressModel/AddressModel","DS/MPFAddressFormComponent/AddressTextInput","i18n!DS/MPFAddressFormComponent/assets/nls/AddressFormComponent"],function(e,t,s,n){"use strict";const i=s.extend({className:"mpf-address-text-input mpf-state-input",setup(e){this._parent({fieldName:t.Fields.STATE,...e})},getValue(){return this.input instanceof e?this.input.getValue()[0]:this._parent()},destroy(){this.input=null,this.address=null,this._parent(),this.container=null},_renderInputContainer({input:t,label:s}){return t instanceof e?(this.container.removeClassName("mpf-entry-v2"),this.container.addClassName("mpf-select-v2"),{tag:"div",class:"mpf-input-line mpf-label",html:[{tag:"label",html:[s,this.isRequired&&'&nbsp;<em class="mpf-required">*</em>']},t,this.errorContainer]}):(this.container.removeClassName("mpf-select-v2"),this.container.addClassName("mpf-entry-v2"),{tag:"label",class:"mpf-input-line",html:[{tag:"span",class:"mpf-label",html:[s,this.isRequired&&'&nbsp;<em class="mpf-required">*</em>']},t,this.errorContainer]})},_createInput({value:t,fieldConstraints:s}){const n=s.getPattern(),i=-1!==n.indexOf("|"),r=i&&n.test(t);return this.input&&this.input instanceof e&&!r&&(this.address.unset(this.fieldName),t=""),i?this._createSelectInput({value:t,pattern:n}):this._parent({value:t})},_createSelectInput({value:t,pattern:s}){return new e({name:this.fieldName,placeholder:n.get("statePlaceholder"),disabled:this.isReadOnly,required:this.isRequired,options:this._getSelectOptions(s),events:{onChange:this._onChange.bind(this)}})},_getSelectOptions(e){const t=this.address.getCountry(),s=this.address.getState();return e.substring(1,e.length-1).split("|").map(e=>({value:e,label:n.get(t+e),selected:s&&s===e}))}});return i.Events=s.Events,i}),define("DS/MPFAddressFormComponent/AddressFormComponentV3",["UWA/Class/View","UWA/Core","DS/MPFServices/ObjectService","DS/MPFAddressModel/AddressModel","DS/MPFAddressConstraintsModel/AddressConstraintsCollection","DS/MPFCountryModel/CountryCollection","DS/MPFAddressFormComponent/AddressTextInput","DS/MPFAddressFormComponent/StateInput","DS/MPFAddressFormComponent/CountryInput","i18n!DS/MPFAddressFormComponent/assets/nls/AddressFormComponent","css!DS/MPFAddressFormComponent/MPFAddressFormComponent"],function(e,t,s,n,i,r,d,a,o,l){"use strict";const h=Object.freeze({ON_VALIDATION_STATE_CHANGE:"onValidationStateChange",ON_COUNTRY_CHANGE:"onCountryChange"}),u=e.extend({className:"mpf-address-form-v3",setup({address:e,addressConstraints:t,countries:d,isReadOnly:a=!1,isCountryReadOnly:o=!1,showPhoneNumber:l=!1,phoneNumberMention:h=!1,preSetCountry:u}={}){s.requiredOfPrototype(e,n,"options.address must be an AddressModel"),s.requiredOfPrototype(t,i,"options.addressConstraints must be a AddressConstraintsCollection"),s.requiredOfPrototype(d,r,"options.countries must be a CountryCollection"),this.address=e,this.addressConstraints=t,this.countries=d,this.isReadOnly=a,this.isCountryReadOnly=o,this.preSetCountry=u,this.showPhoneNumber=l,this.phoneNumberMention=h,this.preSetCountry&&!this.address.hasCountry()&&this.address.set(n.Fields.COUNTRY,this.preSetCountry),this.countryInput=this._createCountryInput(),this.otherInputs=this._createInputs(),this._isValid=this.isValid()},render(){const e=this.address.getCountry()||"DEFAULT",t=this.addressConstraints.get(e);return this.container.setContent([this.countryInput.render({countryConstraints:t}),this.otherInputs.map(e=>e.render({countryConstraints:t}))]),this.showPhoneNumber&&this.phoneNumberMention&&this._addMentionToPhoneNumber(),this},isValid(){if(this.isReadOnly)return!0;for(let e=0;e<this.otherInputs.length;e++)if(!this.otherInputs[e].isValid())return!1;return!0},destroy(){this.stopListening(),this.countryInput.destroy(),this.otherInputs.forEach(e=>e.destroy()),this.countryInput=null,this.otherInputs=null,this.address=null,this.addressConstraints=null,this.countries=null,this._parent(),this.container=null},_onCountryChange(){const e=this.address.getCountry()||"DEFAULT",t=this.addressConstraints.get(e);this.otherInputs.forEach(e=>e.render({countryConstraints:t})),this.showPhoneNumber&&this.phoneNumberMention&&this._addMentionToPhoneNumber(),this._isValid=this.isValid(),this.dispatchEvent(h.ON_COUNTRY_CHANGE)},_onChange(){const e=this.isValid();e!==this._isValid&&(this._isValid=e,this.dispatchEvent(h.ON_VALIDATION_STATE_CHANGE))},_createInputs(){const e=[this._createAddressTextInput({fieldName:n.Fields.LINE1,maxlength:55}),this._createAddressTextInput({fieldName:n.Fields.LINE2,maxlength:55}),this._createAddressTextInput({fieldName:n.Fields.LINE3,maxlength:55}),this._createAddressTextInput({fieldName:n.Fields.LINE4,maxlength:55}),this._createAddressTextInput({fieldName:n.Fields.CITY}),this._createAddressTextInput({fieldName:n.Fields.COUNTY}),this._createStateInput(),this._createAddressTextInput({fieldName:n.Fields.POSTAL_CODE})];return this.showPhoneNumber&&e.push(this._createAddressTextInput({fieldName:n.Fields.PHONE_NUMBER})),e},_createCountryInput(){const e=new o({address:this.address,countries:this.countries,fieldName:n.Fields.COUNTRY,isReadOnly:this.isCountryReadOnly});return this.listenTo(e,o.Events.ON_CHANGE,this._onCountryChange.bind(this)),e},_createStateInput(){const e=new a({address:this.address,isReadOnly:this.isReadOnly});return this.listenTo(e,a.Events.ON_CHANGE,this._onChange.bind(this)),e},_createAddressTextInput({fieldName:e,maxlength:t,placeholder:s}){const n=new d({address:this.address,isReadOnly:this.isReadOnly,fieldName:e,maxlength:t,placeholder:s});return this.listenTo(n,d.Events.ON_CHANGE,this._onChange.bind(this)),n},_addMentionToPhoneNumber(){const e=this.container.getElements("span.mpf-label").pop(),s=t.createElement("span",{text:" "+l.get("supportOnly"),class:"mpf-phone-mention"});e.addContent(s)}});return u.Events=h,u});