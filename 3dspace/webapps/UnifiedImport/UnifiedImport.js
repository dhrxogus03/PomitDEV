define("DS/UnifiedImport/views/FilesView",["DS/DataGridView/DataGridView","DS/Utilities/TouchUtils"],(e,t)=>{var i={datagrid:function(t){var n=new e({touchMode:!1,treeDocument:t,sortModel:[{dataIndex:"size",sort:"desc"}],columns:[{dataIndex:"fileCard",typeRepresentation:"detailedInfo",editableFlag:!1,autoRowHeightFlag:!0},{dataIndex:"status",allowUnsafeHTMLContent:!0,width:"50px"},{dataIndex:"size",visibleFlag:!1}],getCellTooltip:function(e){if(e&&1==e.columnID&&e.cellModel){var t=document.createElement("div");return t.innerHTML=e.cellModel,{shortHelp:t.firstChild.dataset.message}}}});return n.layout.columnHeaderHeight=35,n.layout.cellHeight=40,n.rowSelection="multiple",n.columnSelection="none",n.cellSelection="none",n.layout.collectionView.showAlternateBackgroundFlag=!1,n.layout.columnsHeader=!1,n.layout.rowsHeader=!1,n.showRowIndexFlag=!1,n.showSelectionCheckBoxesFlag=!0,n.layout.collectionView.showRowBorderFlag=!0,n.getContent().style.position="relative",widget.addEvent("onResize",i.adjust.bind(null,n)),i.adjust(n),n},adjust:function(e){console.log(t.getTouchMode()),t.getTouchMode()?e.getContent().style.height=widget.body.clientHeight-240+"px":e.getContent().style.height=widget.body.clientHeight-220+"px"}};return i}),define("DS/UnifiedImport/utils/Validator",["UWA/Class","UWA/Class/Options"],(e,t)=>e.extend(t,{init:function(e){e=e||{},this.setOptions(e)},getMaxNbOfFiles:function(){return this.options["max-nb-of-files"]},getMaxFileSize:function(){return this.options["max-file-size"]},getMaxFileNameSize:function(){return this.options["max-file-name-length"]},getValidExtensions:function(){return this.options.extensions},validateByMaxNbOfFiles:function(e){const t=this.getMaxNbOfFiles();if(t&&e.length>t)return UWA.String.format(UWA.i18n("unifiedImport.notification.error.maxNoOfFiles"),this.options["max-nb-of-files"])},validateConfig:function(e){const t=this.getMaxFileSize(),i=this.getMaxFileNameSize(),n=this.getValidExtensions(),o=e.getNameNoExt();return n&&!n.includes(e.getExtension())?UWA.i18n("unifiedImport.content.grid.tooltip.invalidExtension"):t&&e.getSize()>t?UWA.i18n("unifiedImport.content.grid.tooltip.maxFileSize"):i&&o.length>i?UWA.String.format(UWA.i18n("unifiedImport.content.grid.tooltip.maxFileNameLength"),i):void 0}})),define("DS/UnifiedImport/utils/Essentials",["UWA/Class","DS/Utilities/UUID","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/Utilities/WebUXColorEnums","text!DS/UnifiedImport/assets/config/UnifiedImport.json","i18n!DS/UnifiedImport/assets/nls/UnifiedImportNLS"],(e,t,i,n,o,s,r,a,d)=>{UWA.i18n(d);let l=require.toUrl("");return l=l.substr(0,l.lastIndexOf("?")),e.singleton({isInitialized:!1,x3dPlatformId:"undefined"!=typeof widget&&widget.environment?widget.environment.getAllData().x3dPlatformId:void 0,DEPLOYMENT:"/webapps",APP_TITLE_MAIN:"Engineering Import",APP_TITLE_CONTENT_IMPORTED:"Imported Content",SERVICE_DFS:"distributedfilestore",SERVICE_3DSPACE:"3DSpace",URL_BASE:l,URL_SECURITY_CONTEXT:"/resources/pno/person/getsecuritycontext",URL_FCS:"/fcs/servlet/fcs/checkin",SERVER:{VERB:{GET:"GET",POST:"POST",PATCH:"PATCH",DELETE:"DELETE"},DEFAULT_HEADERS:{Accept:"application/json","Accept-Language":window.widget?window.widget.lang:"en","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}},LANG:window.widget?window.widget.lang:"en",EVENT_CONTENT:"content",EVENT_CONTENT_SELECTED:"contentselected",EVENT_CONTENT_SCAN_START:"contentscanstart",EVENT_CONTENT_SCAN_END:"contentscanend",EVENT_CONTENT_ANALYZED:"contentanalyzed",EVENT_LOAD_METHOD_SUCCEEDED:"loadmethodsucceeded",EVENT_METHOD_SELECTED:"methodselected",EVENT_METHOD_FOUND:"methodfound",EVENT_METHODS_FOUND:"methodsfound",EVENT_METHODS_LISTED:"methodslisted",EVENT_NO_METHOD_FOUND:"nomethodfound",EVENT_LOAD_METHOD_SUCCESS:"loadmethodsuccess",EVENT_LOAD_METHOD_FAILED:"loadmethodfailed",EVENT_NEW_IMPORT:"newimport",EVENT_CONTENT_APPROVED:"contentapproved",EVENT_CONTENT_PARTIALLY_APPROVED:"contentpartiallyapproved",EVENT_CONTENT_DISAPPROVED:"contentdisapproved",EVENT_CHECKIN_URL_FOUND:"checkinurlfound",EVENT_START_CHECKIN:"startcheckin",EVENT_CHECKIN_SUCCEEDED:"checkinsucceeded",EVENT_CHECKIN_FAILED:"checkinfailed",EVENT_CHECKIN_TIMEOUT:"checkintimedout",EVENT_CONTENT_UPLOADED:"contentuploaded",EVENT_START_EXCHANGE:"startexchange",EVENT_EXCHANGE_REQUEST_SUCCEEDED:"exchangerequestsucceeded",EVENT_EXCHANGE_REQUEST_FAILED:"exchangerequestfailed",EVENT_EXCHANGE_NETWORK_ERROR:"networkerror",EVENT_EXCHANGE_CANCEL:"exchangecancel",EVENT_ERROR_OCCURRED:"erroroccurred",STATUS_CODES:{PRIVATE:{emphasize:"highlight",backgroundColor:r.COLORS_STATUS.COLOR_PURPLE_FOR_WHITE_LABEL,nlsKey:"importresults.grid.column.status.private"},IN_WORK:{emphasize:"primary",nlsKey:"importresults.grid.column.status.inwork"},FROZEN:{emphasize:"success",nlsKey:"importresults.grid.column.status.frozen"},RELEASED:{emphasize:"",nlsKey:"importresults.grid.column.status.released"},OBSOLETE:{emphasize:"highlight",backgroundColor:r.COLORS_STATUS.COLOR_SECTION_GRAY,nlsKey:"importresults.grid.column.status.obsolete"}},MAX_FILE_SIZE_GB:1,MAX_CONTENT_SIZE_BYTES:1073741824,setup:function(){let e=this;return new UWA.Promise.all([e.getPlatformServices().then(e.getSecurityContexts.bind(null,e)).then(e.getGrantedRoles.bind(null,e)).then(e.methods.bind(null,e))])},getPlatformServices:function(){let e=this;return new UWA.Promise(function(t,i){n.getPlatformServices({onComplete:e.postGetPlatformServices.bind(null,e,t)})})},postGetPlatformServices:function(e,t,i){let n=i.find(function(t){return t.platformId==e.x3dPlatformId});n||(n=i[0]),e.PLATFORM_SERVICES=n,t(e.PLATFORM_SERVICES)},getSecurityContexts:function(e){return new UWA.Promise(function(t,n){i.authenticatedRequest(e.PLATFORM_SERVICES["3DSpace"]+e.URL_SECURITY_CONTEXT+"?tenant="+e.x3DPLATFORMID,{method:"GET",type:"json",proxy:"passport",onComplete:e.postGetSecurityContext.bind(null,e,t)})})},postGetSecurityContext:function(e,t,i){e.SECURITY_CONTEXT=i.SecurityContext,t()},getGrantedRoles:function(e){return new UWA.Promise(function(t,i){n.getGrantedRoles(e.postGetGrantedRoles.bind(null,e,t))})},postGetGrantedRoles:function(e,t,i){e.GRANTED_ROLES=i,t()},methods:function(e){e.METHODS=JSON.parse(a),e.METHODS_PREDICTABLE=[],e.METHODS_UNPREDICTABLE=[],e.METHODS.forEach(t=>{e.GRANTED_ROLES.some(function(e){return t.roles.indexOf(e.id)>-1})&&(t.import.validate&&t.import.validate.methodIdentifier?e.METHODS_PREDICTABLE.push(t):e.METHODS_UNPREDICTABLE.push(t))})},extension:function(e){return e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase()},server:function(e){var t={url:e.url,method:e.method||this.SERVER.VERB.GET,data:e.data,dataType:e.dataType||"json",timeout:e.timeout||5e5,cache:e.cache||3600,proxy:e.proxy||void 0,onComplete:e.onComplete,onFailure:e.onFailure,headers:e.headers&&UWA.merge(e.headers,this.SERVER.DEFAULT_HEADERS)||this.SERVER.DEFAULT_HEADERS};return i.authenticatedRequest(t.url,t)},unique:function(){return t.v4().substring(0,10).replaceAll("-","")},noop:function(){},formatBytes:function(e,t=2){if(!+e)return"0 Bytes";const i=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,n)).toFixed(i))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}`},setContext:function(e){this._contextData=Object.assign({},e)}})}),define("DS/UnifiedImport/utils/NotificationUtils",["UWA/Class","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],(e,t,i)=>e.singleton({Content:{NO_METHOD:{title:"unifiedImport.notification.error.noMethod",subtitle:"unifiedImport.notification.error.noMethod.subtitle",message:"",level:"error"},INVALID_METHOD:{title:"unifiedImport.notification.error.invalidMethod",subtitle:"unifiedImport.notification.error.invalidMethod.subtitle",message:"",level:"error"},CONTENT_DISAPPROVED:{title:"unifiedImport.notification.error.contentDisapproved",subtitle:"unifiedImport.notification.error.contentDisapproved.subtitle",message:"",level:"error"},PROCESS_SUCCEEDED:{title:"",subtitle:"",message:"unifiedImport.notification.success.processSucceeded",level:"success"},PROCESS_FAILED:{title:"",subtitle:"",message:"unifiedImport.notification.error.processFailed",level:"error"},CHECKIN_TIMEOUT:{title:"unifiedImport.notification.error.timeout",subtitle:"unifiedImport.notification.error.timeout.subtitle",message:"unifiedImport.notification.error.timeout.message",level:"error"},CHECKIN_FAILED:{title:"",subtitle:"",message:"unifiedImport.notification.error.checkinFailed",level:"error"},CHECKIN_NETWORK_ERROR:{title:"unifiedImport.notification.error.networkError",subtitle:"unifiedImport.notification.error.networkError.subtitle",message:"",level:"error"},CHECKIN_MAX_FILE_SIZE_REACHED:{title:"unifiedImport.notification.error.maxFileSize",subtitle:"unifiedImport.notification.error.maxFileSize.subtitle",message:"",level:"error"},DRIVE_IMPORT_ERROR:{title:"",subtitle:"",message:"unifiedImport.notification.error.driveImportError",level:"error"},CHECKIN_FAILED_AT_IMPORTER:{fromImporter:!0,title:"",subtitle:"",message:"",level:"error"},CHECKIN_MAX_NO_OF_FILES_REACHED:{fromImporter:!0,title:"",subtitle:"",message:"",level:"error"}},init:function(arguments){this._parent(arguments),i.setNotificationManager(t),i.setFadeOutPolicy(2),i.setStackingPolicy(5)},formatAlertOpts:(e,t)=>(e.title&&(t&&t.payLoad&&t.payLoad.title&&t.payLoad.title.length?e.title=UWA.String.format(UWA.i18n(e.title),...t.payLoad.title):e.title=UWA.i18n(e.title)),e.subtitle&&(t&&t.payLoad&&t.payLoad.subtitle&&t.payLoad.subtitle.length?e.subtitle=UWA.String.format(UWA.i18n(e.subtitle),...t.payLoad.subtitle):e.subtitle=UWA.i18n(e.subtitle)),e.message&&(t&&t.payLoad&&t.payLoad.message&&t.payLoad.message.length?e.message=UWA.String.format(UWA.i18n(e.message),...t.payLoad.message):e.message=UWA.i18n(e.message)),e),alert:function(e,i){return e.fromImporter?(e={...e,title:"Failure from import method",message:[...i.payLoad.message].join(" ")},i=void 0):e=this.formatAlertOpts(e,i),t.addNotif(e)}})),define("DS/UnifiedImport/views/options/BookmarkPicker",["DS/Controls/Abstract","DS/Controls/Button","DS/Controls/LineEditor","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/FolderActive/FolderActive","DS/UnifiedImport/utils/Essentials"],(e,t,i,n,o,s,r)=>e.inherit({name:"bookmarkpicker",publishedProperties:{value:{defaultValue:void 0,type:"string"}},buildView:function(){this.setupPicker()},setupPicker:function(){var e=this,n=UWA.createElement("div",{styles:{display:"flex",gap:1}}).inject(e.elements.container);this.elements.inputField=new i({fireOnlyFromUIInteractionFlag:!0,disabled:!0,placeholder:UWA.i18n("unifiedImport.options.bookmark.placeholder")}).inject(n),this.elements.inputField.addEventListener("click",e.setupActiveBookmark.bind(null,e)),this.elements.inputField.getContent().style.width="100%",this.elements.inputField.getContent().getChildren()[0].style.borderTopRightRadius="0px",this.elements.inputField.getContent().getChildren()[0].style.borderBottomRightRadius="0px",this.elements.button=new t({label:UWA.i18n("unifiedImport.options.bookmark.browse")}).inject(n),this.elements.button.getContent().style.borderTopLeftRadius="0px",this.elements.button.getContent().style.borderBottomLeftRadius="0px",this.elements.button.addEventListener("buttonclick",e.setupActiveBookmark.bind(null,e))},setupActiveBookmark:function(e){let t;const i=new n({}),r=new s({multiSelectionComponent:{withClassify:!1,inputObjects:{authoring:!0,dialogButtons:!0,favoriteButton:!0,selectionMode:"DefaultSingle"}.objects},selectionMode:"DefaultSingle",authoring:!0,dialogButtons:!0,favoriteButton:!0});r.nestedMenuInContext.addEvent("onClassifyMultiple",function(t){e.elements.inputField.value=r.nestedMenuInContext._selectBookmarkLabel,e.value=t.chosenClasses[0],e.fire("change"),i.remove()}),r.nestedMenuInContext.addEvent("onSelectorCancel",function(e){i.remove()}),(t=new o({immersiveFrame:i,title:UWA.i18n("unifiedImport.options.bookmark.browse.title"),content:r.nestedMenuInContext.getMultiSelectorContainer(),activeFlag:!1,height:300,usePaddingFlag:!1,touchMode:!1})).addEventListener("close",()=>{t.destroy(),i.destroy()}),i.inject(widget.body)}})),define("DS/UnifiedImport/models/FileNodeModel",["UWA/Class","DS/TreeModel/TreeNodeModel","DS/Utilities/UUID","DS/UnifiedImport/utils/Essentials"],(e,t,i,n)=>(t=t.extendNode({setup:function(e){this.__private__={},this.__private__.nodeId=i.v4(),this.__private__.file=e,this.__private__.name=e.name,this.__private__.extension=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase(),this.__private__.nameNoExt=e.name.slice(0,e.name.lastIndexOf(".")),this.__private__.lastmodified=e.lastModified;var t={grid:{status:null,isIterated:!1,invalidated:!1,extension:this.__private__.extension,size:e.size,fileCard:{icon:{iconName:"doc"},label:e.name,subLabel:n.formatBytes(e.size)}}};this.options.grid=t.grid},getNameNoExt:function(){return this.__private__.nameNoExt},getName:function(){return this.__private__.name},getSize:function(){return this.__private__.file.size},getStatus:function(){return this.options.grid.status},getFile:function(){return this.__private__.file},getExtension:function(){return this.__private__.extension},isIterated:function(){return this.options.grid.isIterated},setAsValidated:function(){this.setAttribute("isIterated",!0)},setStatus:function(e){this.setAttribute("status",e)}}),e.singleton({create:function(e){var i=new t;return i.setup(e),i}}))),define("DS/UnifiedImport/views/Footer",["UWA/Class/View","DS/Controls/Toolbar","DS/Controls/Button","DS/UnifiedImport/utils/Essentials"],(e,t,i,n)=>e.extend({__private__:{}},{tagName:"div",className:"unifiedimport-footer",setup:function(e){var i=this;i.treeDocument=e.treeDocument,i.__private__.toolbar=new t({}),i.__private__.toolbar.inject(i.container),i.setupRightBarActions(),i.setupEvents()},setupRightBarActions:function(){var e=this;e.__private__.btnCancel=new i({touchMode:!1,label:UWA.i18n("unifiedImport.footer.action.cancel")}),e.__private__.btnImport=new i({touchMode:!1,label:UWA.i18n("unifiedImport.footer.action.import"),emphasize:"primary",disabled:!0}),e.__private__.toolbar.add("element",{element:e.__private__.btnImport.getContent(),position:"far"}),e.__private__.toolbar.add("element",{element:e.__private__.btnCancel.getContent(),position:"far"})},setupEvents:function(){var e=this;e.__private__.btnImport.addEventListener("buttonclick",e.startImport.bind(null,e)),e.__private__.btnCancel.addEventListener("buttonclick",e.treeDocument.cancel.bind(null,e.treeDocument)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_LOAD_METHOD_FAILED},e.invalidMethod.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_NEW_IMPORT},e.toggleFooter.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_CONTENT_DISAPPROVED},e.contentDisapproved.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_CONTENT_UPLOADED},e.toggleImport.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_EXCHANGE_REQUEST_SUCCEEDED},e.exchangeRequestSucceeded.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_EXCHANGE_REQUEST_FAILED},e.exchangeRequestFailed.bind(null,e))},toggleFooter:function(e){e.getContent().toggle()},toggleImport:function(e){e.__private__.btnImport.disabled=!e.__private__.btnImport.disabled},startImport:function(e){e.toggleImport(e),e.__private__.btnImport.label=UWA.i18n("unifiedImport.footer.action.importing"),e.treeDocument.save(e.treeDocument)},invalidMethod:function(e){e.__private__.btnImport.hide()},contentDisapproved:function(e){e.__private__.btnImport.hide()},exchangeRequestSucceeded:function(e){e.__private__.btnImport.hide(),e.__private__.btnCancel.label=UWA.i18n("unifiedImport.footer.action.done")},exchangeRequestFailed:function(e){e.__private__.btnImport.hide()}})),define("DS/UnifiedImport/views/DragZone",["UWA/Class/View","DS/Controls/Toolbar","DS/Controls/Button","DS/UnifiedImport/utils/Essentials"],(e,t,i,n)=>{var o;return e.extend({__private__:{}},{className:"unifiedimport-dragzone",setup:function(e){this.treeDocument=e.treeDocument,this.setupDragText(),this.setupToolbar(),this.setupEvents()},setupToolbar:function(){var e=this;e.__private__.toolbar=new t({}),e.__private__.toolbar.inject(e.container),e.__private__.browseFile=UWA.createElement("input",{class:"unifiedimport-dragzone-input-file",type:"file",multiple:!0}),e.__private__.btnBrowseFiles=new i({touchMode:!1,label:UWA.i18n("unifiedImport.action.filesOnDisk")}),e.__private__.browseFolder=UWA.createElement("input",{class:"unifiedimport-dragzone-input-folder",type:"file",webkitdirectory:!0}),e.__private__.btnBrowseFolder=new i({touchMode:!1,label:UWA.i18n("unifiedImport.action.folderOnDisk")}),e.__private__.toolbar.add("element",{element:e.__private__.btnBrowseFiles.getContent(),position:"center"}),e.__private__.toolbar.add("element",{element:e.__private__.btnBrowseFolder.getContent(),position:"center"})},setupDragText:function(){o=UWA.createElement("div",{class:"unifiedimport-dragzone-gridcontent"}).inject(this.container),UWA.createElement("h3",{class:"wux-ui-3ds wux-ui-3ds-drag-drop unifiedimport-dragzone-dragehereicon"}).inject(o),UWA.createElement("p",{class:"unifiedimport-dragzone-drageheretext",text:UWA.i18n("unifiedImport.action.info.browseContent")}).inject(o);var e=UWA.createElement("div",{class:"unifiedimport-dragzone-separatetextcontainer"}).inject(o);UWA.createElement("span",{class:"unifiedimport-dragzone-separatetext",text:UWA.i18n("unifiedImport.action.info.or")}).inject(e),UWA.createElement("p",{class:"unifiedimport-dragzone-browsetext",text:UWA.i18n("unifiedImport.action.info.selectFromSource")}).inject(o)},setupEvents:function(){var e=this;[{key:"dragevent",fn:e.activateZone.bind(null,e)},{key:"dragover",fn:e.activateZone.bind(null,e)},{key:"dragleave",fn:e.deActivateZone.bind(null,e)},{key:"drop",fn:e.drop.bind(null,e)}].forEach(t=>{e.container.addEventListener(t.key,t.fn)}),e.__private__.btnBrowseFiles.addEventListener("click",function(){e.__private__.browseFile.click()}),e.__private__.browseFile.addEventListener("change",e.change.bind(null,e)),e.__private__.btnBrowseFolder.addEventListener("click",function(){e.__private__.browseFolder.click()}),e.__private__.browseFolder.addEventListener("change",e.change.bind(null,e))},activateZone:function(e,t){e.container.classList.add("unifiedimport-dragzone-activated"),t.preventDefault()},deActivateZone:function(e){e.container.classList.remove("unifiedimport-dragzone-activated")},drop:function(e,t){e.deActivateZone(e),e.change(e,t)},change:function(e,t){var i,o;t.preventDefault();var s=t&&t.dataTransfer&&t.dataTransfer.items;if(s&&s.length){if(t.dataTransfer.getData("text/plain"))(o=JSON.parse(t.dataTransfer.getData("text/plain"))).data.items.length&&e.treeDocument._modelEvents.publish({event:n.EVENT_CONTENT_SELECTED,data:o});else if(s.length){var r=s.length;i=[],e.maxdepth=0;for(var a=0;a<r;a++){var d=s[a],l=d.webkitGetAsEntry(),c=[];if(l.isDirectory)c.push(new UWA.Promise(t=>{e.extractFiles(l).then(i=>{t(i.flat(e.maxdepth))})}));else{let e=d.getAsFile();e.fullPath=l.fullPath,i.push(e)}}UWA.Promise.all(c).then(function(t){t=t.flat(),i=i.concat(t),e.treeDocument._modelEvents.publish({event:n.EVENT_CONTENT_SELECTED,data:i})})}}else if(i=t&&t.currentTarget&&t.currentTarget.files){for(let e=0;e<i.length;e++)i[e].fullPath=i[e].webkitRelativePath;e.treeDocument._modelEvents.publish({event:n.EVENT_CONTENT_SELECTED,data:i})}},extractFiles:function(e){var t=this;const i=e.createReader();return new Promise((e,n)=>{const o=[];!function s(){i.readEntries(i=>{i.length?(o.push(Promise.all(i.map(e=>{var i=e.fullPath,n=i.split("/").length+1;return t.maxdepth<n&&(t.maxdepth=n),e.isFile?new Promise((t,n)=>e.file(function(e){e.fullPath=i,t(e)},n)):t.extractFiles(e)}))),s()):Promise.all(o).then(function(i){e(i.flat(t.maxdepth))})},e=>n(e))}()})}})}),define("DS/UnifiedImport/views/PotentialMethods",["UWA/Class/View","DS/Controls/Label","DS/Controls/ComboBox","DS/UnifiedExportCommand/Views/ParametersViewFactory","DS/UnifiedImport/utils/Essentials"],(e,t,i,n,o)=>{var s,r;return e.extend({__private__:{}},{className:"unifiedimport-potential-methods",setup:function(e){s=r=void 0,this.treeDocument=e.treeDocument,(s=UWA.createElement("div",{class:"form-group"})).hide(),s.inject(this.container),this.setupEvents()},setupEvents:function(){var e=this;e.treeDocument._modelEvents.subscribe({event:o.EVENT_METHODS_FOUND},e.methodsFound.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:o.EVENT_METHOD_FOUND},e.methodFound.bind(null,e))},methodsFound:function(e,t){e.potentialmethodscombo(t)},methodFound:function(e,t){(t=UWA.clone(t)).selected=!0,e.potentialmethodscombo([t]).disabled=!0},potentialmethodscombo:function(e){var n=this;if(!r){n.__private__.methods=e,s.show();var o=new t({value:UWA.i18n("unifiedImport.header.title.importmethod")}).inject(s);o.getContent().style.background="transparent",o.getContent().style.fontWeight="bold",(r=new i({placeholder:UWA.i18n("unifiedImport.content.potentialmethods.placeholder"),elementsList:n.__private__.methods})).addEventListener("change",n.methodSelected.bind(null,n)),r.value=1==n.__private__.methods.length&&n.__private__.methods[0].value,r.inject(s),r.getContent().style.width="100%"}return r},methodSelected:function(e,t){t.target.dsModel.disabled=!0;var i=t.target.dsModel.selectedIndex;e.treeDocument._modelEvents.publish({event:o.EVENT_METHOD_SELECTED,data:e.__private__.methods[i]})}})}),define("DS/UnifiedImport/models/FileTreeDocument",["DS/WAFData/WAFData","DS/TreeModel/TreeDocument","DS/Controls/ProgressBar","DS/UnifiedExchangeAnalytics/Tracker","DS/UnifiedImport/models/FileNodeModel","DS/UnifiedImport/utils/Validator","DS/UnifiedImport/utils/Essentials","DS/UnifiedImport/utils/NotificationUtils"],(e,t,i,n,o,s,r,a)=>t.extend({toNodes:function(e,t){e.setupSubscription(),e.__private__={validate:{"max-content-size":0},payload:{title:"",rootFile:"",rootFiles:[],fileIds:[],receipts:[],options:{}}},e.validNodes=[],e.invalidNodes=[],e.checkInObjectList=[],e.checkInTicketObjectList=[],e.totalCheckedInNodes=0,e.protocol=t.protocol,t=t.data&&t.data.items||t;var i=new Set,n=t.length;if(n){var s,d,l=performance.now();if(e.prepareUpdate(),e.protocol)return void e._modelEvents.publish({event:r.EVENT_ERROR_OCCURRED,data:{errorType:a.Content.DRIVE_IMPORT_ERROR}});for(let l=0;l<n;l++){if(s=t[l],e.__private__.validate["max-content-size"]+=s.size,e.__private__.validate["max-content-size"]>=r.MAX_CONTENT_SIZE_BYTES)return e._modelEvents.publish({event:r.EVENT_ERROR_OCCURRED,data:{errorType:a.Content.CHECKIN_MAX_FILE_SIZE_REACHED}}),void e.cancel(e);d=s.name,"";var c=r.extension(d);i.add(c);var u=o.create(s);e.addRoot(u)}e.pushUpdate();var p=performance.now();console.log("Build Tree Document - "+(p-l)),e.defaultMethod(Array.from(i)),e._modelEvents.publish({event:r.EVENT_CONTENT_SCAN_END})}},setupSubscription:function(){var e=this;e._modelEvents.subscribe({event:r.EVENT_METHOD_SELECTED},e.methodSelected.bind(null,e)),e._modelEvents.subscribe({event:r.EVENT_CONTENT_APPROVED},e.contentApproved.bind(null,e)),e._modelEvents.subscribe({event:r.EVENT_CHECKIN_SUCCEEDED},e.checkinSucceeded.bind(null,e)),e._modelEvents.subscribe({event:r.EVENT_CHECKIN_FAILED},e.checkinFailed.bind(null,e)),e._modelEvents.subscribe({event:r.EVENT_CHECKIN_TIMEOUT},e.checkinFailed.bind(null,e))},defaultMethod:function(e){var t=r.METHODS_PREDICTABLE.find(t=>e.some(e=>t.import.validate.methodIdentifier.some(t=>t.primary&&t.primary.includes(e))));(t=t||(r.METHODS_UNPREDICTABLE.length>0?r.METHODS_UNPREDICTABLE:void 0))?(this._modelEvents.publish({event:r.EVENT_NEW_IMPORT}),"array"==UWA.typeOf(t)?this._modelEvents.publish({event:r.EVENT_METHODS_FOUND,data:t}):this._modelEvents.publish({event:r.EVENT_METHOD_FOUND,data:t})):this._modelEvents.publish({event:r.EVENT_NO_METHOD_FOUND})},methodSelected:function(e,t){e.__private__.method=t,e.switchBaseUrl(t),require([["DS",t.import["import-ui"]["module-directory"],t.import["import-ui"]["module-name"]].join("")],t=>{e.validate=t.validate?t.validate:null,e.upload=t.upload?t.upload:null,e.fields=t.fields?t.fields:void 0,e.transform=t.transform?t.transform:null,e.validateByImporter()},t=>{e._modelEvents.publish({event:r.EVENT_LOAD_METHOD_FAILED})})},isExtensionSelected:function(e,t){return!0===t[e]},validateByImporter:function(){let e=this,t=e.validate;var i=new s(t);const n=t&&t.extensions;let o="",d="",l=e.__private__.method.import.validate&&e.__private__.method.import.validate.methodIdentifier;var c=e.__private__.method.import.validate&&e.__private__.method.import.validate["max-nb-of-priors"];let u=e.getRoots();var p=i.validateByMaxNbOfFiles(u);if(p)e._modelEvents.publish({event:r.EVENT_ERROR_OCCURRED,data:{errorType:a.Content.CHECKIN_MAX_NO_OF_FILES_REACHED,payLoad:{message:[p]}}});else{if(n||l){var _=UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-attention",styles:{background:"#EA4F37",color:"white",padding:5,borderRadius:"50%"}}),E=performance.now();if(e.prepareUpdate(),l){const t=l.reduce((e,t)=>(e.push(t.primary),e),[]);for(const n of u){const s=n.getExtension();if(c&&!n.isIterated()&&t.includes(s)){d=UWA.i18n("unifiedImport.content.grid.tooltip.groupByGeneralErrorMessage");let r=l[t.indexOf(s)];if("any"===r["matching-file"]){const t=n.getNameNoExt();let i=u.find(e=>{const i=e.getExtension(),n=e.getNameNoExt();if(r.secondary.includes(i)&&n==t)return e});i&&(i.setAsValidated(),e.validNodes.push(n,i),c=c?c-1:0),n.setAsValidated()}else if("all"===r["matching-file"]){let t=r.secondary.reduce((e,t)=>(e[t]=!1,e),{});const i=n.getNameNoExt();let o=u.filter(e=>{const n=e.getExtension(),o=e.getNameNoExt();if(r.secondary.includes(n)&&!1===t[n]&&o==i)return t[n]=!0,e});r.secondary.every(i=>e.isExtensionSelected(i,t))&&(o.forEach(e=>{e.setAsValidated()}),c=c?c-1:0,e.validNodes.push(n,...o)),n.setAsValidated()}else{d=UWA.i18n("unifiedImport.content.grid.tooltip.WithoutGroupByErrorMessage");let t=i.validateConfig(n);t?(o=t||UWA.i18n("unifiedImport.content.grid.tooltip.excluded"),e.invalidNodes.push(n),_.dataset.message=o,n.setAsValidated(),n.setStatus(_.outerHTML)):r.primary==s&&c&&(e.validNodes.push(n),this.__private__.priorNode=this.__private__.priorNode||n,n.setAsValidated(),c=c?c-1:0)}}}}else d=UWA.i18n("unifiedImport.content.grid.tooltip.excluded"),u.forEach(t=>{const n=t.getExtension();let s=i.validateConfig(t);l&&l.some(e=>e.primary==n)&&(this.__private__.priorNode?invalidNode=!0:this.__private__.priorNode=t,c=c?c-1:0),s?(o=s||UWA.i18n("unifiedImport.content.grid.tooltip.excluded"),_.dataset.message=o,t.setAsValidated(),t.setStatus(_.outerHTML)):e.validNodes.push(t)});e.invalidNodes.push(...u.filter(t=>{if(!e.validNodes.includes(t))return t.getStatus()||(_.dataset.message=d,t.setAsValidated(),t.setStatus(_.outerHTML)),t})),e.pushUpdate(),e.validNodes.forEach(t=>{e.__private__.payload.rootFiles.push(t.getName())}),e.__private__.payload.rootFile=e.__private__.priorNode&&e.__private__.priorNode.getName();var m=e.__private__.priorNode&&e.__private__.priorNode.getName()||e.validNodes.length&&e.validNodes[0].getName();e.validNodes.length>1&&(m=UWA.i18n("unifiedImport.footer.action.import")+" - "+r.unique()),e.__private__.payload.title=m?m.slice(0,m.lastIndexOf(".")):"";var f=performance.now();console.log("ValidateByImporter - "+(f-E))}else e.validNodes=u;e._modelEvents.publish({event:r.EVENT_CONTENT_ANALYZED,data:{validNodes:e.validNodes,invalidNodes:e.invalidNodes}});var v=e.validNodes.length,h=e.invalidNodes.length;v&&h||v?e._modelEvents.publish({event:r.EVENT_CONTENT_APPROVED}):h&&e._modelEvents.publish({event:r.EVENT_CONTENT_DISAPPROVED,data:e.invalidNodes})}},contentApproved:function(e){var t=new i({shape:"circular",displayStyle:"lite",height:25});t.statusFlag=!1,e.prepareUpdate(),e.validNodes.forEach(i=>{i.updateOptions({grid:{status:e.setProgressBar(t)}})}),e.pushUpdate();var n=e.validNodes.length,o=[],s=r.PLATFORM_SERVICES[e.__private__.method.service];for(let i=0;i<n;i++){var d=e.validNodes[i],l=void 0;"string"==UWA.typeOf(e.upload.checkinticket)?l=e.checkinticket(s+e.upload.checkinticket+"?maxNumberOfFiles=1"):"function"==UWA.typeOf(e.upload.checkinticket)&&(l=e.upload.checkinticket({fileNode:d,platformServices:r.PLATFORM_SERVICES,securityContext:r.SECURITY_CONTEXT})),o.push(new UWA.Promise(function(i,n){l.then(e.postcheckinticket.bind(null,e)).then(e.checkin.bind(null,e,[d],t)).then(e.postcheckin.bind(null,e,[d])).then(i).fail(n)}))}UWA.Promise.all(o).then(function(){e._modelEvents.publish({event:r.EVENT_CONTENT_UPLOADED})}).fail(function(t){switch(!0){case t.message.includes("timedout"):e._modelEvents.publish({event:r.EVENT_ERROR_OCCURRED,data:{errorType:a.Content.CHECKIN_TIMEOUT}}),e.checkinFailed(e);break;case t.message.includes("NetworkError"):e._modelEvents.publish({event:r.EVENT_ERROR_OCCURRED,data:{errorType:a.Content.CHECKIN_NETWORK_ERROR}}),e.checkinFailed(e);break;case t.hasOwnProperty("id"):e._modelEvents.publish({event:r.EVENT_ERROR_OCCURRED,data:{errorType:a.Content.CHECKIN_FAILED_AT_IMPORTER,payLoad:{message:[t.message]}}}),e.checkinFailed(e);break;default:e._modelEvents.publish({event:r.EVENT_CHECKIN_FAILED})}}).finally(()=>{e.checkInObjectList=[],e.checkInTicketObjectList=[]})},checkinticket:function(t){var i=this;return new UWA.Promise(function(n,o){let s=e.authenticatedRequest(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":window.widget?window.widget.lang:"en","X-Requested-With":"XMLHttpRequest"},onComplete:n,onFailure:o});i.checkInTicketObjectList.push(s)})},postcheckinticket:function(e,t){return t&&JSON.parse(t)||{}},setProgressBar:function(e){var t=UWA.createElement("div",{class:"progress-bar-wrapper",styles:{padding:"7px 0"}});return t.dataset.message=UWA.i18n("unifiedImport.content.grid.tooltip.uploading"),e.inject(t),t.outerHTML},checkin:function(t,i,n,o){return new UWA.Promise(function(s,r){var a=o.uploadCorrelation[0].fileId,d=o.url,l=i[0].getFile(),c=(i[0],new FormData);c.set("__fcs__jobTicket",o.ticket),c.set("__fcs__corelation_0",a),c.set("file_0",l),c.set("file-name",l.name),c.set("file-title",l.name),c.set("file-description",l.name);let u=e.authenticatedRequest(d,{method:"POST",data:c,timeout:18e5,cache:3600,onComplete:function(e){s([e,a])},onFailure:r,onUploadProgress:function(e){i[0]&&(n.value=Math.ceil(100*e.loaded/e.total),i[0].updateOptions({grid:{status:t.setProgressBar(n)}}))}});t.checkInObjectList.push(u)})},postcheckin:function(e,t,i){e.__private__.payload.fileIds.push(i[1]),e.__private__.payload.receipts.push(i[0].trim()),e.totalCheckedInNodes+=1,e._modelEvents.publish({event:r.EVENT_CHECKIN_SUCCEEDED,data:{checkedInNodes:t,totalNodes:e.validNodes.length,totalCheckedInNodes:e.totalCheckedInNodes}})},checkinSucceeded:function(e,t){var i=t.checkedInNodes,n=UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-check",styles:{background:"#57B847",color:"white",padding:5,borderRadius:"50%"}});e.prepareUpdate(),n.dataset.message=UWA.i18n("unifiedImport.content.grid.tooltip.uploaded"),i.forEach(e=>{e.setStatus(n.outerHTML)}),e.pushUpdate()},checkinFailed:function(e){e.empty()},switchBaseUrl:function(e){let t=this;try{let i=r.PLATFORM_SERVICES[t.__private__.method.service];const n=e.import["import-ui"]["module-deployment-directory"],o=e.import["import-ui"]["module-directory"];if(i){const e={[`DS${o}`]:`${`${i}${n}`}${o}`};require.config({paths:e})}}catch(e){console.log(e)}},save:function(t){t.__private__.importStartTime=(new Date).getTime(),t._modelEvents.publish({event:r.EVENT_START_EXCHANGE});var i=r.PLATFORM_SERVICES[t.__private__.method.service]+t.__private__.method.import.importurl;let n=t.getpayload(),o={Accept:"application/json","Content-Type":"application/json","Accept-Language":r.LANG,"X-Requested-With":"XMLHttpRequest",SecurityContext:r.SECURITY_CONTEXT},s={data:JSON.stringify(n),method:"POST",headers:o,onComplete:t.exchangerequestsucceeded.bind(null,t),onFailure:t.exchangerequestfailed.bind(null,t)};e.authenticatedRequest(i,s)},getpayload:function(){let e=this;if(e.transform)try{return e.transform.call(e.__private__.payload,{platformServices:r.PLATFORM_SERVICES,securityContext:r.SECURITY_CONTEXT})}catch(e){console.log("Issue is payload generation")}return e.__private__.payload},exchangerequestsucceeded:function(e){e.track(),e._modelEvents.publish({event:r.EVENT_EXCHANGE_REQUEST_SUCCEEDED,data:{payLoad:{message:[e.__private__.payload.title]}}})},exchangerequestfailed:function(e){e._modelEvents.publish({event:r.EVENT_EXCHANGE_REQUEST_FAILED,data:{payLoad:{message:[e.__private__.payload.title]}}})},track:function(){var e=this;n.setAppId("ENXUIMP_AP"),n.setTenant(r.x3dPlatformId),n.setSelectionSize(e.validNodes&&e.validNodes.length);var t=0;e.validNodes.forEach(e=>{t+=e.getSize()}),n.setContentSize(t),n.setTime(((new Date).getTime()-e.__private__.importStartTime||0)/1e3),n.setOperation(n.EVENT.CATEGORY.VALUES.IMPORT),n.setService(e.__private__.method.service);var i=e.__private__.method.value;e.__private__.priorNode&&(i=e.__private__.priorNode.getExtension()&&e.__private__.priorNode.getExtension().toUpperCase()||e.__private__.method.value),n.setFormat(i),n.sendEvent()},cancel:function(e){e.prepareUpdate(),e.removeRoots(),e.pushUpdate(),e._modelEvents.publish({event:r.EVENT_EXCHANGE_CANCEL}),e.cancelAllCheckinTicketRequests(e),e.cancelAllCheckinRequests(e),n.clear()},cancelAllCheckinTicketRequests(e){e.upload&&e.upload.checkinticketcancel&&e.upload.checkinticketcancel()||e.checkInTicketObjectList&&e.checkInTicketObjectList.forEach(e=>{e.cancel()})},cancelAllCheckinRequests(e){e.checkInObjectList&&e.checkInObjectList.forEach(e=>{e.cancel()})}})),define("DS/UnifiedImport/views/StatusBar",["UWA/Class/View","DS/Tweakers/GeneratedToolbar","DS/UnifiedImport/utils/Essentials"],(e,t,i)=>e.extend({tagName:"div",className:"unifiedimport-statusbar",setup:function(e){this.treeDocument=e.treeDocument,this.setupStatusBar(),this.setupEvents()},setupStatusBar:function(){var e=t.prototype.createTreeDocument({entries:[{id:"totalNodes",dataElements:{typeRepresentation:"string",readOnly:!0,value:"",tooltip:UWA.i18n("unifiedImport.statusBar.tooltip.totalNodes"),position:"near"}},{id:"invalidNodes",dataElements:{typeRepresentation:"string",readOnly:!0,value:"",tooltip:UWA.i18n("unifiedImport.statusBar.tooltip.invalidNodes"),position:"near"}},{id:"uploadstatus",dataElements:{visibleFlag:!0,typeRepresentation:"string",readOnly:!0,icon:"doc-upload",value:UWA.i18n("unifiedImport.statusBar.upload.contentuploading"),position:"far"}}]});this.generatedToolbar=new t({overflowManagement:"dropdown",direction:"horizontal",items:e}),this.generatedToolbar.inject(this.container)},setupEvents:function(){var e=this;e.treeDocument._modelEvents.subscribe({event:i.EVENT_CONTENT_ANALYZED},e.updateStatus.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_CONTENT_UPLOADED},function(){e.generatedToolbar.updateNodeModel("uploadstatus",{grid:{data:UWA.i18n("unifiedImport.statusBar.upload.contentuploaded")},icon:"check"})}),e.treeDocument._modelEvents.subscribe({event:i.EVENT_CONTENT_DISAPPROVED},e.updateUploadStatus.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_ERROR_OCCURRED},e.updateUploadStatus.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_CHECKIN_FAILED},e.updateUploadStatus.bind(null,e))},updateUploadStatus:function(e){e.generatedToolbar.updateNodeModel("uploadstatus",{grid:{data:UWA.i18n("unifiedImport.statusBar.upload.contentuploadcanceled")},icon:"attention"})},updateStatus:function(e,t){e.show();var i=t.validNodes.length,n=t.invalidNodes.length,o=i+n;e.generatedToolbar.updateNodeModel("totalNodes",{grid:{data:UWA.i18n("unifiedImport.status.totalFiles")+": "+o}}),n&&e.generatedToolbar.updateNodeModel("invalidNodes",{grid:{data:UWA.i18n("unifiedImport.status.excludedFiles")+": "+n}})}})),define("DS/UnifiedImport/views/ImportOptions",["UWA/Class/View","DS/UnifiedExportCommand/Views/ParametersViewFactory","DS/UnifiedImport/utils/Essentials"],(e,t,i)=>e.extend({className:"unifiedimport-options",setup:function(){var e=this;e.__private__={},e.setupDefaults(),e.setupEvents(),e.adjust(e)},setupDefaults:function(){this.__private__.noOptions=UWA.createElement("div",{class:"unifiedimport-options-empty",html:UWA.i18n("unifiedImport.options.empty")}).inject(this.container)},setupEvents:function(){var e=this;widget.addEvent("onResize",e.adjust.bind(null,e)),e.options.treeDocument._modelEvents.subscribe({event:i.EVENT_CONTENT_APPROVED},e.setupOptions.bind(null,e))},setupOptions:function(e){var t=e.options.treeDocument.fields;"array"==UWA.typeOf(t)?e.buildOptions(t):"function"==UWA.typeOf(t)&&t({platformServices:i.PLATFORM_SERVICES,securityContext:i.SECURITY_CONTEXT}).then(t=>{e.buildOptions(t)})},buildOptions:function(e){var i=this;e=i.refineOptions(e),optionsView=t.build(e),optionsView.listenTo(optionsView.model,"onChange",function(e){i.options.treeDocument.__private__.payload.options=e._attributes}),i.__private__.noOptions.hide(),optionsView.inject(i.container)},refineOptions:function(e){return e.map(e=>("bookmark"==e.key&&(e={key:"bookmark",label:UWA.i18n("unifiedImport.options.bookmark.label"),help:UWA.i18n("unifiedImport.options.bookmark.help"),type:"DS/UnifiedImport/views/options/BookmarkPicker"}),e))},adjust:function(e){e.getContent().style.maxHeight=widget.body.clientHeight-240+"px",e.getContent().style.overflow="auto"}})),define("DS/UnifiedImport/views/Header",["UWA/Class/View","DS/Controls/ProgressBar","DS/UnifiedImport/utils/Essentials"],(e,t,i)=>e.extend({tagName:"div",className:"unifiedimport-header",setup:function(e){this.treeDocument=e.treeDocument,this.setupProgress(),this.setupEvents()},setupProgress:function(){this.progressbar=new t({displayStyle:"lite"}),this.progressbar.inject(this.container)},setupEvents:function(){var e=this;e.treeDocument._modelEvents.subscribe({event:i.EVENT_CHECKIN_SUCCEEDED},e.checkinSucceeded.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_CHECKIN_FAILED},e.hideView.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_ERROR_OCCURRED},e.hideView.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_START_EXCHANGE},e.startExchange.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_EXCHANGE_REQUEST_SUCCEEDED},e.hideView.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_EXCHANGE_REQUEST_FAILED},e.hideView.bind(null,e))},checkinSucceeded:function(e,t){e.show();var i=t.totalCheckedInNodes/t.totalNodes*100;e.progressbar.value=i},hideView:function(e){e.hide()},startExchange:function(e,t){e.progressbar.infiniteFlag=!0}})),define("DS/UnifiedImport/views/Content",["UWA/Class/View","DS/Controls/Accordeon","DS/UnifiedImport/views/PotentialMethods","DS/UnifiedImport/views/DragZone","DS/UnifiedImport/views/FilesView","DS/UnifiedImport/views/ImportOptions","DS/UnifiedImport/utils/Essentials"],(e,t,i,n,o,s,r)=>{var a;return e.extend({__private__:{}},{className:"unifiedimport-content",setup:function(e){var t=this;t.treeDocument=e.treeDocument,t.setupImporters(),t.setupZone(),t.setupCategories(),t.setupEvents()},setupImporters:function(){new i({treeDocument:this.treeDocument}).inject(this.container)},setupZone:function(){(a=new n({treeDocument:this.treeDocument})).inject(this.container)},setupCategories:function(){var e=this;e.__private__.accordeon=new t({visibleFlag:!1,style:"filled-group",touchMode:!1,items:[{header:UWA.i18n("unifiedImport.content.accordion.options"),content:new s({treeDocument:e.treeDocument})},{header:UWA.i18n("unifiedImport.content.accordion.title"),content:o.datagrid(e.treeDocument)}]}),e.__private__.accordeon._expanderItems[0].expand(),e.__private__.accordeon._expanderItems[1].expand(),e.__private__.accordeon.inject(e.container)},setupEvents:function(){var e=this;e.treeDocument._modelEvents.subscribe({event:r.EVENT_NEW_IMPORT},function(){a.hide(),e.__private__.accordeon.show()}),e.treeDocument._modelEvents.subscribe({event:r.EVENT_METHOD_FOUND},function(){e.__private__.accordeon.getModel().updateItem(0,{visibleFlag:!0})})}})}),define("DS/UnifiedImport/views/UnifiedImportProcess",["UWA/Class/View","DS/UnifiedImport/views/Header","DS/UnifiedImport/views/Content","DS/UnifiedImport/views/StatusBar","DS/UnifiedImport/views/Footer","DS/UnifiedImport/utils/Essentials","DS/UnifiedImport/utils/NotificationUtils"],(e,t,i,n,o,s,r)=>e.extend({tagName:"div",className:"unifiedimport-process",setup:function(e){var t=this;t.treeDocument=e.treeDocument,t.setupHeader(),t.setupContent(),t.setupStatus(),t.setupFooter(),t.setupEvents()},setupHeader:function(){this.header=new t({treeDocument:this.treeDocument}),this.header.inject(this.container)},setupContent:function(){this.content=new i({treeDocument:this.treeDocument}),this.content.inject(this.container)},setupStatus:function(){this.status=new n({treeDocument:this.treeDocument}),this.status.inject(this.container)},setupFooter:function(){this.footer=new o({treeDocument:this.treeDocument}),this.footer.inject(this.container)},setupEvents:function(){var e=this;e.treeDocument._modelEvents.subscribe({event:s.EVENT_NO_METHOD_FOUND},function(e){r.alert({...r.Content.NO_METHOD},e)}),e.treeDocument._modelEvents.subscribe({event:s.EVENT_LOAD_METHOD_FAILED},function(e){r.alert({...r.Content.INVALID_METHOD},e)}),e.treeDocument._modelEvents.subscribe({event:s.EVENT_CONTENT_DISAPPROVED},function(e){r.alert({...r.Content.CONTENT_DISAPPROVED},e)}),e.treeDocument._modelEvents.subscribe({event:s.EVENT_EXCHANGE_REQUEST_SUCCEEDED},function(e){r.alert({...r.Content.PROCESS_SUCCEEDED},e)}),e.treeDocument._modelEvents.subscribe({event:s.EVENT_EXCHANGE_REQUEST_FAILED},function(e){r.alert({...r.Content.PROCESS_FAILED},e)}),e.treeDocument._modelEvents.subscribe({event:s.EVENT_CHECKIN_FAILED},function(e){r.alert({...r.Content.CHECKIN_FAILED},e)}),e.treeDocument._modelEvents.subscribe({event:s.EVENT_ERROR_OCCURRED},function(e){r.alert({...e.errorType},e)})}})),define("DS/UnifiedImport/UnifiedImport",["DS/UnifiedImport/models/FileTreeDocument","DS/UnifiedImport/views/UnifiedImportProcess","DS/Utilities/TouchUtils","DS/UnifiedImport/utils/Essentials","DS/UnifiedImport/utils/NotificationUtils","css!DS/UIKIT/UIKIT.css","css!DS/UnifiedImport/UnifiedImport"],(e,t,i,n,o)=>{var s={gotoHome:function(){var i=new e;widget.body.empty(),new t({treeDocument:i}).inject(widget.body),i._modelEvents.subscribe({event:n.EVENT_CONTENT_SELECTED},i.toNodes.bind(null,i)),i._modelEvents.subscribe({event:n.EVENT_EXCHANGE_CANCEL},s.gotoHome)},gotoResults:function(e){widget.body.empty(),widget.setTitle("Results"),require(["DS/UnifiedImportResults/models/JobNodeModel","DS/UnifiedImportResults/views/ImportResults"],(e,t)=>{new t({treeNodeModel:new e(n._contextData)}).inject(widget.body)})},onLoad:function(){return new UWA.Promise((e,t)=>{n.setup().then(()=>{n.isInitialized=!0;let t=widget.data.X3DContentId?JSON.parse(widget.data.X3DContentId):null;if(t&&t.data&&t.data.items&&t.data.items[0]&&t.data.items[0].jobId&&t.data.items[0].exchangetype){let e=t.data.items[0],i="transfer"===t.data.items[0].exchangetype.toLowerCase();n.setContext({type:e.exchangetype,jobId:e.jobId,status:e.status,importerId:i?"3DEXPERIENCE":void 0,serviceName:e.service}),s.gotoResults(e)}else widget.setTitle(""),widget.addEvent("onRefresh",n.noop),s.gotoHome();e("view Initialized")}).catch(e=>{t(e)})})}};return s});