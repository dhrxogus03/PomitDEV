define("DS/DELWebUXControls/DELGeneratedToolbar",["UWA/Core","DS/Tweakers/GeneratedToolbar","DS/Core/PointerEvents","DS/WebappsUtils/WebappsUtils","css!DS/DELWebUXControls/assets/css/DELGeneratedToolbar.css"],function(e,t,i,n){"use strict";let s=0,o=0,r=0,a=0,l=!1,h=function(e){let t=e&&e.getFreeZone();return t&&t.getBoundingClientRect()},d=function(e){let t,i,n=this,d=n.elements&&n.elements.container,m=!1,c=h(n.immersiveFrame);if(d&&(e.preventDefault(),e.stopPropagation(),t=e.changedTouches?e.changedTouches[0].clientX:l?e.clientX:null,i=e.changedTouches?e.changedTouches[0].clientY:l?e.clientY:null,t&&i)){if(r=Math.min(Math.max(t-s,-1),window.innerWidth-d.offsetWidth),a=Math.min(Math.max(i-o,-1),window.innerHeight-d.offsetHeight),t=r<0?0:r,i=a<0?0:a,c)!function(){let e=c.left,n=c.top,s=d.getBoundingClientRect();t<=c.x&&i<=c.y?(t=c.x,i=c.y):t+s.width>=c.right&&i<=c.y?(t=c.right-s.width,i=c.y):t<=c.left&&i+s.height>=c.bottom?(t=c.x,i=c.bottom-s.height):t+s.width>=c.right&&i+s.height>=c.bottom?(t=c.right-s.width,i=c.bottom-s.height):t<=e?(t=e,m=!0):t+s.width>=c.right?(t=c.right-s.width,m=!0):i<=n?i=n:i+s.height>=c.bottom&&(i=c.bottom-s.height)}();else{let e=window.innerWidth-d.getDimensions().width;0!==t&&t!==e||(m=!0)}n.direction=m?"vertical":"horizontal",d.setStyles({left:t+"px",top:i+"px"})}},m=function(e){e.preventDefault(),e.stopPropagation();let t=this,n=t.elements&&t.elements.dragContainer;!function(e){let t=e,i=t.elements&&t.elements.container,n=h(t.immersiveFrame),s=i.getBoundingClientRect();i&&n&&(r<n.left?(i.classList.add("left"),i.classList.remove("right","top","bottom")):r+s.width>n.right?(i.classList.add("right"),i.classList.remove("left","top","bottom")):a<n.top?(i.classList.add("top"),i.classList.remove("right","left","bottom")):a+s.height>n.bottom?(i.classList.add("bottom"),i.classList.remove("right","top","left")):i.classList.remove("right","top","left","bottom"))}(t),t._dragEvents&&(Object.entries(t._dragEvents).forEach(e=>n.removeEventListener(i[e[0]],e[1])),Object.entries(t._dragEvents).forEach(e=>document.removeEventListener(i[e[0]],e[1]))),l=!1};return t.inherit({name:"DELGeneratedToolbar",publishedProperties:{immersiveFrame:{defaultValue:null,type:"object",category:"Behavior"}},buildView:function(){this._parent(),this.elements.container.addClassName("del-controls-toolbar-maincontainer"),this.elements.dragContainer=new e.Element("div",{class:"del-controls-toolbar-dragContainer"}).inject(this.elements.container,"top"),this.elements.dragImage=new e.Element("img",{class:"del-controls-toolbar-dragimage",src:n.getWebappsAssetUrl("DELWebUXControls","icons/I_ToolbarDrag.png")}).inject(this.elements.dragContainer),this.elements.dragImageRotated=new e.Element("img",{class:"del-controls-toolbar-dragimage-rotated",src:n.getWebappsAssetUrl("DELWebUXControls","icons/I_ToolbarDragRotated.png")}).inject(this.elements.dragContainer)},handleEvents:function(){this._parent(),this.elements.dragContainer&&(this._dragEvents={POINTERMOVE:d.bind(this),POINTERUP:m.bind(this)},this._dragStart=function(e){e.stopPropagation();let t=this,n=t.elements&&t.elements.container,h=t.elements&&t.elements.dragContainer;h&&n&&(Object.entries(t._dragEvents).forEach(e=>h.addEventListener(i[e[0]],e[1])),Object.entries(t._dragEvents).forEach(e=>document.addEventListener(i[e[0]],e[1])),r=n.offsetLeft,a=n.offsetTop,e.changedTouches?(s=e.changedTouches[0].clientX-r,o=e.changedTouches[0].clientY-a):e.pageX&&e.pageY&&(s=e.clientX-r,o=e.clientY-a,l=!0))}.bind(this),this.elements.dragContainer.addEventListener(i.POINTERDOWN,this._dragStart)),this.immersiveFrame&&(this.freeZoneResize=function(){let e=this.elements&&this.elements.container,t=h(this.immersiveFrame),i=e.getBoundingClientRect();e&&!e.isHidden()&&(i.bottom>t.bottom&&(e.style.top=`${t.bottom-i.height}px`),i.right>t.right&&(e.style.left=`${t.right-i.width}px`),i.top<t.top&&(e.style.top=`${t.top}px`),i.left<t.x&&(e.style.left=`${t.x}px`),e.classList.contains("right")?e.style.left=`${t.right-i.width}px`:e.classList.contains("left")?e.style.left=`${t.x}px`:e.classList.contains("top")?e.style.top=`${t.top}px`:e.classList.contains("bottom")&&(e.style.top=`${t.bottom-i.height}px`))}.bind(this),this.immersiveFrame.addEventListener("freeZoneResize",this.freeZoneResize))},_applyDirection:function(){this._parent(),this.elements.dragImageRotated&&this.elements.dragImage&&("vertical"===this.direction?(this.elements.container.addClassName("del-toolbar-vertical"),this.elements.dragImageRotated.show(),this.elements.dragImage.hide()):(this.elements.container.removeClassName("del-toolbar-vertical"),this.elements.dragImageRotated.hide(),this.elements.dragImage.show()))},destroy:function(){this.elements.dragContainer&&this.elements.dragContainer.removeEventListener(i.POINTERDOWN,this._dragStart),this.immersiveFrame&&this.immersiveFrame.removeEventListener("freeZoneResize",this.freeZoneResize),this.elements.dragContainer.destroy(),this._parent()}})});