define("DS/VCXWebSMGComponents/VCXGroundModifiableView",["DS/VCXWebDressup/VCXDressupModifiableView"],function(e){"use strict";return e.extend({init:function(){this._parent()},getGroupPropertiesOrders:function(){var e={"Group.Environment.Ground":["Environment.Ground.Color","Environment.Ground.Diameter.Auto","Environment.Ground.Diameter"],"Group.Environment.Ground.Border":["Environment.Ground.Border.Color","Environment.Ground.FallOff"],"Group.Environment.Ground.Mirror":["Environment.Ground.Mirror.Blurry"],"Group.Environment.Ground.Grid":["Environment.Ground.Grid.Color","Environment.Ground.Grid.Falloff"],"Group.Environment.Ground.Shadows":[]},t=this._parent()||{};for(const r in e)t[r]=e[r];return t}})});var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXComponentPath",["require","exports","DS/VCXWebDressup/VCXDressup_Spec"],function(e,t,r){"use strict";r=__importDefault(r);class i extends r.default{constructor(){super(),this.IsViewPointDependent=!1,this.IsAnchorDependent=!0}static getAxesOrder(e){switch(e){case i.EAxesOrder.XYZ:return["x","y","z"];case i.EAxesOrder.XZY:return["x","z","y"];case i.EAxesOrder.YZX:return["y","z","x"];case i.EAxesOrder.YXZ:return["y","x","z"];case i.EAxesOrder.ZXY:return["z","x","y"];case i.EAxesOrder.ZYX:return["z","y","x"]}}}return function(e){let t,r;!function(e){e[e.PathClassic=0]="PathClassic",e[e.PathXYZWorld=1]="PathXYZWorld",e[e.PathXYZLocal=2]="PathXYZLocal"}(t=e.EConstructMode||(e.EConstructMode={})),function(e){e[e.XYZ=0]="XYZ",e[e.XZY=1]="XZY",e[e.YZX=2]="YZX",e[e.YXZ=3]="YXZ",e[e.ZXY=4]="ZXY",e[e.ZYX=5]="ZYX"}(r=e.EAxesOrder||(e.EAxesOrder={}))}(i||(i={})),i.prototype.getDefaultName=function(){return"Path"},Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentPath"}}),i.prototype.dressupGroupName="Paths",i}),define("DS/VCXWebSMGComponents/VCXModifiableViewOccurrenceSMG",["DS/VCXWebExperienceBase/VCXModifiableViewOccurrenceExt","DS/VCXWebProperties/VCXPropertyGroup","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables","i18n!DS/VCXWebComposer/assets/nls/VCXWebComposer"],function(e,t,r,i){"use strict";return e.extend({init:function(){this._parent()},getPropertyGroups:function(e){e||(e={});var o=this.getGroupPropertiesOrders();return this._parent(e),e["Group.Essentials"]||(e["Group.Essentials"]=new t({groupID:"Group.Essentials"}),e["Group.Essentials"].i18nGroup=r),e["Group.Essentials"].priority=0,e["Group.Essentials"].removeProperty,e["Group.Essentials"].addProperties([{propertyName:"Actor.Name",i18n:r},{propertyName:"Actor.Opacity",i18n:r}]),(this.GetObject().IsMesh()||this.GetObject()._experienceBase.getManager("VCXContextManager").isSupported("FullFeaturesOnNodes"))&&(this.GetObject()._experienceBase.getManager("VCXContextManager").getProdHighMode()&&e["Group.Essentials"].addProperties([{propertyName:"Actor.Position",i18n:r,hiddenFields:["Orientation","Pivot"]},{propertyName:"Actor.Opacity",i18n:i},{propertyName:"Actor.Opacity.Defined",i18n:i}]),"Model_VPMReference_Spec"!==this.GetObject().GetType()&&(e["Group.Appearance"]||(e["Group.Appearance"]=new t({groupID:"Group.Appearance",i18nGroup:r})),e["Group.Appearance"].i18nGroup=r,e["Group.Appearance"].priority=10,e["Group.Appearance"].setPropertiesOrder(o["Group.Appearance"]),e["Group.Appearance"].addProperties([{propertyName:"Actor.Color",i18n:r},{propertyName:"Actor.Color.Defined",i18n:r},{propertyName:"Actor.PLM.Material.Choice",i18n:i},{propertyName:"Actor.Texture.Map.Path",i18n:i},{propertyName:"Actor.Texture.Transparency",i18n:i},{propertyName:"Actor.Texture.Blending.Mode",i18n:i},{propertyName:"Actor.Texture.Projection.Type",i18n:i},{propertyName:"Actor.Texture.Border.Mode",i18n:i},{propertyName:"Actor.Texture.UV.Ratio",i18n:i},{propertyName:"Actor.Texture.UV.Scale",i18n:i}]))),this.GetObject()._experienceBase.ModifiablesAdvancedProperties&&(e["Group.Introspection"]||(e["Group.Introspection"]=new t({groupID:"Group.Introspection"}),e["Group.Introspection"].i18nGroup=r),e["Group.Introspection"].priority=200,e["Group.Introspection"].addProperty({propertyName:"Actor.3DReference",i18n:r})),e},_pushAdditionalPropertyButton:function(e,t,r){e[t]||(e[t]={}),e[t].buttons||(e[t].buttons=[]),e[t].buttons.push(r)},getGroupPropertiesOrders:function(){var e={"Group.Essentials":["Actor.Name","Actor.Position","Actor.Opacity","Actor.Opacity.Defined"],"Group.Appearance":["Actor.Color","Actor.Color.Defined","Actor.PLM.Material.Choice","Actor.Texture.Map.Path","Actor.Texture.Projection.Type","Actor.Texture.Transparency","Actor.Texture.Blending.Mode","Actor.Texture.Border.Mode","Actor.Texture.Frame.Gen","Actor.Texture.Frame.2D","Actor.Texture.UV.Ratio","Actor.Texture.UV.Scale"]},t=this._parent()||{};for(const r in e)t[r]=e[r];return t}})}),define("DS/VCXWebSMGComponents/VCXSMGDictionary",[],function(){"use strict";var e={VCXComponentOccurrenceSMG:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXModifiableOccurrenceSMG",VCXIModifiableView:"DS/VCXWebSMGComponents/VCXModifiableViewOccurrenceSMG",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeOccurrence",VCXIPulseBehavior:"DS/VCXWebPulseManager/VCXPulseBehaviorOccurrence",VCXISensible:"DS/VCXWebComposer/VCXASensible",VCXIVisibility:"DS/VCXWebVisibilityImpl/VCXVisibilityOccurrence",W3AISGNodeHolder:"DS/WebApplicationBase/W3AASGNodeHolder",VCXIModelNavigable:"DS/WebApplicationBase/VCXAModelNavigable",VCXIReadiness:"DS/WebApplicationBase/VCXAReadiness"},VCXComponentMeshPrimitive:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXModifiableMeshPrimitive",VCXIModifiableView:"DS/VCXWeb3DMaster/VCXModifiableViewOccurrenceComposer",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeOccurrence",VCXIPulseBehavior:"DS/VCXWebPulseManager/VCXPulseBehaviorOccurrence",VCXISensible:"DS/VCXWebComposer/VCXASensible",VCXIVisibility:"DS/VCXWebVisibilityImpl/VCXVisibilityOccurrence",W3AISGNodeHolder:"DS/WebApplicationBase/W3AASGNodeHolder",VCXIModelNavigable:"DS/WebApplicationBase/VCXAModelNavigable"},VCXComponentCompositePmi:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXModifiableCompositePmi",VCXIModifiableView:"DS/VCXWeb3DMaster/VCXModifiableViewOccurrenceComposer",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeOccurrence",VCXISensible:"DS/VCXWebComposer/VCXASensible",VCXIVisibility:"DS/VCXWebVisibilityImpl/VCXVisibilityOccurrence",W3AISGNodeHolder:"DS/WebApplicationBase/W3AASGNodeHolder",VCXIModelNavigable:"DS/WebApplicationBase/VCXAModelNavigable"},VCXComponentCurveWire:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXModifiableCurveWire",VCXIModifiableView:"DS/VCXWeb3DMaster/VCXModifiableViewOccurrenceComposer",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeOccurrence",VCXIPulseBehavior:"DS/VCXWebPulseManager/VCXPulseBehaviorOccurrence",VCXISensible:"DS/VCXWebComposer/VCXASensible",VCXIVisibility:"DS/VCXWebVisibilityImpl/VCXVisibilityOccurrence",W3AISGNodeHolder:"DS/WebApplicationBase/W3AASGNodeHolder",VCXIModelNavigable:"DS/WebApplicationBase/VCXAModelNavigable"},VCXComponentPoint:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXModifiablePoint",VCXIModifiableView:"DS/VCXWeb3DMaster/VCXModifiableViewOccurrenceComposer",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeOccurrence",VCXIPulseBehavior:"DS/VCXWebPulseManager/VCXPulseBehaviorOccurrence",VCXISensible:"DS/VCXWebComposer/VCXASensible",VCXIVisibility:"DS/VCXWebVisibilityImpl/VCXVisibilityOccurrence",W3AISGNodeHolder:"DS/WebApplicationBase/W3AASGNodeHolder",VCXIModelNavigable:"DS/WebApplicationBase/VCXAModelNavigable"},VCXComponentGround:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXGroundModifiable",VCXIModifiableView:"DS/VCXWebSMGComponents/VCXGroundModifiableView",VCXIVisibility:"DS/VCXWebDressup/VCXVisibilityDressup",W3AISGNodeHolder:"DS/VCXWebSMGComponents/VCXGroundSGNodeHolder",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeDressup",VCXIModelNavigable:"DS/VCXWebDressup/VCXDressupModelNavigable"},VCXComponentAssociativePath:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXAssociativePathModifiable",VCXIModifiableView:"DS/VCXWebDressup/VCXPolylineModifiableView",VCXIModifiableFormatPainter:"DS/VCXWebSMGComponents/VCXAssociativePathModifiable",VCXIVisibility:"DS/VCXWebDressup/VCXVisibilityDressup",W3AISGNodeHolder:"DS/VCXWebSMGComponents/VCXAssociativePathSGNodeHolder",VCXISensible:"DS/VCXWebComposer/VCXASensible",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeDressup",VCXIModelNavigable:"DS/VCXWebDressup/VCXDressupModelNavigable"},VCXComponentPath:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXPathModifiable",VCXIModifiableView:"DS/VCXWebDressup/VCXPolylineModifiableView",VCXIVisibility:"DS/VCXWebDressup/VCXVisibilityDressup",W3AISGNodeHolder:"DS/VCXWebSMGComponents/VCXPathSGNodeHolder",VCXISensible:"DS/VCXWebComposer/VCXASensible",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeDressup",VCXIModelNavigable:"DS/VCXWebDressup/VCXDressupModelNavigable"},VCXBOM_Spec:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXBOMModifiable",VCXIModifiableView:"DS/VCXWebDressup/VCXMarkupModifiableView",VCXIVisibility:"DS/VCXWebDressup/VCXVisibilityDressup",W3AISGNodeHolder:"DS/VCXWebSMGComponents/VCXBOMSGNodeHolder",VCXISensible:"DS/VCXWebComposer/VCXASensible",VCXITreeNode:"DS/VCXWebTreeExtensions/VCXTreeNodeDressup",VCXIModelNavigable:"DS/VCXWebDressup/VCXDressupModelNavigable"},VCXBOMInfoComponent:{VCXIModifiable:"DS/VCXWebSMGComponents/VCXBOMInfoModifiable",VCXIModifiableView:"DS/VCXWebModifiables/VCXModifiableView"},VCXComponentBomManager:{VCXIModifiable:"DS/VCXWebSMGApp/VCXBomManagerModifiable",W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXDragDropManager:{W3AIManager:"DS/WebApplicationBase/W3AAManager"}},t={},r={VCXComponentOccurrenceSMG:"DS/VCXWebSMGComponents/VCXComponentOccurrenceSMG",VCXComponentMeshPrimitive:"DS/VCXWebSMGComponents/VCXComponentMeshPrimitive",VCXComponentCompositePmi:"DS/VCXWebSMGComponents/VCXComponentCompositePmi",VCXComponentCurveWire:"DS/VCXWebSMGComponents/VCXComponentCurveWire",VCXComponentPoint:"DS/VCXWebSMGComponents/VCXComponentPoint",VCXComponentGround:"DS/VCXWebSMGComponents/VCXComponentGround",VCXComponentBomManager:"DS/VCXWebSMGApp/VCXComponentBomManager",VCXBOM_Spec:"DS/VCXWebSMGComponents/VCXBOM_Spec",VCXComponentAssociativePath:"DS/VCXWebSMGComponents/VCXComponentAssociativePath",VCXComponentPath:"DS/VCXWebSMGComponents/VCXComponentPath",VCXComponentBOM:"DS/VCXWebSMGComponents/VCXBOM_Spec",VCXBOMInfoComponent:"DS/VCXWebSMGComponents/VCXBOMInfoComponent",VCXDragDropManager:"DS/VCXWebSMGApp/VCXSmgDragDropManager",VCXExperience:"DS/VCXWebSMGApp/VCXSmgExperience",VCXMaterialManager:"DS/VCXWebSMGApp/VCXMaterialManagerSMG"},i=[];return{GetDictionary:function(){return{interfaces:t,components:r,extensions:e}},getNLSModules:function(){return i}}}),define("DS/VCXWebSMGComponents/VCXBOMInfoModifiable",["UWA/Core","DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyValueMap"],function(e,t,r,i,o,a){"use strict";return t.extend({init:function(){this._parent()},GetType:function(){return"VCXBOMInfoModifiable"},OnChangeProperty:function(e,t,r){if(r||(r={}),r.fromChildClass);else if(this.OnChangePropertyBegin(e,t))return!0;switch(e){case"GroupInfoPropSet":for(var i=t.GetValue(),o=0;o<i.length;o++){for(var a=i[o].GetValue(),n=null,s=null,l=0;l<a.length;l++){var p=a[l];switch(p.name){case"Id":n=p.GetValue();break;case"Name":s=p.GetValue()}}this.GetObject().addBomInfoRow(n,s)}break;default:return r.fromChildClass=!0,this._parent(e,t,r)}return!0},OnChangePropertiesEnd:function(){},GetProperty:function(e){var t=null;return"GroupInfoPropSet"===e||(t=this._parent(e)),t},GetProperties:function(){var e=this._parent();return e.AddOrModifyProperty(this.GetProperty("Actor.Opacity")),e}})}),define("DS/VCXWebSMGComponents/VCXBOMPaperNode",["DS/VCXWebDressup/VCXSmart3DPaperNode","DS/Visualization/ThreeJS_DS","DS/VCXWebDressup/VCXMarkup_Spec","DS/VCXWebSystem/VCXMathTools"],function(e,t,r,i){"use strict";return e.extend({init:function(e){return this._parent(e),this},_computeBOMPosition:function(){if(this.Modifiable&&this.Modifiable._bIsBOM){var e=this.Modifiable.GetPropertyValue("Collab.3D.Paper.Positioning.Type"),t=this.Modifiable.GetPropertyValue("Collab.3D.Paper.BOM.Percentage");if(e===r.EPositionType.Free2D)return;var i=this.ExperienceBase.getManager("VCXPaperManager");if(i){var o=i._PaperSize,a=i.GetMmToPxRatio();a*=.3527;var n=this.AttachedDiv.style.width,s=this.AttachedDiv.style.height,l=n.slice(0,this.AttachedDiv.style.width.indexOf("px")),p=s.slice(0,this.AttachedDiv.style.height.indexOf("px"));l*=a,p*=a;var u=i.PixelToMM(l),h=i.PixelToMM(p);if(e===r.EPositionType.Bottom||e===r.EPositionType.Top)this.Position2D.x=.5*(o.x-u),e===r.EPositionType.Bottom?this.Position2D.y=o.y-o.y*t*.01-7:this.Position2D.y=7;else if(e===r.EPositionType.Left||e===r.EPositionType.Right){this.Position2D.y=.5*(o.y-h);var d=.5*(o.x*t*.01-u);e===r.EPositionType.Left?this.Position2D.x=.5*(o.x*t*.01-u)+7:this.Position2D.x=o.x-o.x*t*.01+d-7}}}},_computeMatrix:function(e,o){var a=this.Position.clone();if(this.PositioningType<=r.EPositionType.Free2D){this._computeBOMPosition();var n=(new t.Vector3).getPositionFromMatrix(this.GetReferential(e)),s=this.ExperienceBase.getManager("VCXPaperManager").ModelToMM2(e,n),l=i.clamp(s.z,-.99,.99);(M=new t.Vector3).x=this.Position2D.x,M.y=this.Position2D.y,M.z=l,a=this.ExperienceBase.getManager("VCXPaperManager").MMToModel2(e,M)}var p=1;if(1===this.SizeControlType)p=this.ExperienceBase.getManager("VCXPaperManager").GetPaperRatio(e,a);else if(2===this.SizeControlType){var u=e.viewpoint.getEyePosition().distanceTo(a);u||(u=1);var h=.5*e.viewer.div.clientHeight*Math.abs(1/(Math.tan(Math.PI*e.viewpoint.getAngle()/360)*u));(p=0!==(h*=this.ExperienceBase.getManager("VCXPaperManager").Zoom)?1/h:1)||(p=1)}p*=this.ScalingFactor;var d=this.ExperienceBase.getManager("VCXPaperManager"),c=new t.Matrix4,C=new t.Matrix4,V=new t.Matrix4;if(V.makeScale(p,p,p),this.is2D()&&d.shouldUsePaperReferential()){var M;(M=new t.Vector3).x=this.Position2D.x,M.y=-this.Position2D.y,M.z=0,C.setPosition(M);var m=d.getPaperReferential();c.copy(m),c.multiply(C)}else{C.setPosition(a);var b=this._ComputeBillboardMatrix(e,a,this.GetReferential(e));c.multiply(C),c.multiply(b),c.multiply(V)}return o&&this.setMatrix(c),c}})});__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXComponentOccurrenceSMG",["require","exports","DS/VCXWebSystem/VCXEnums","DS/Visualization/SceneGraphUtils","DS/VCXWebExperienceBase/VCXPathElementTools","DS/SceneGraphOverrides/GenericOverride","DS/Visualization/PrimitiveIterator","DS/Visualization/OccurrenceExplorer","DS/Visualization/ThreeJS_DS","DS/VCXWebExperienceBase/VCXComponentOccurrenceExt","DS/VCXWebComponents/VCXWebComponentOccurrence"],function(e,t,r,i,o,a,n,s,l,p,u){"use strict";p=__importDefault(p),(u=__importDefault(u)).default.addDirtyFlags(["EnvID","TextureDocID","TextureProjectionType","TextureProjectionMatrix","TextureUVMatrix","TextureUVscale","TextureUVratio","TextureBlending","TextureTransparency","TextureBorderMode","Geometry"]);class h extends p.default{constructor(){super(),this._bomID="",this._isRenderable=!1,this._isMesh=!1,this._envID=r.EnvironmentalId.None,this._textureProjectionType=r.TextureMapping.Planar,this._navigable=null,this._bomID="",this._isRenderable=!1,this._isMesh=!1,this._envID=r.EnvironmentalId.None,this._textureDocID=-1,this._textureProjectionType=r.TextureMapping.Planar,this._textureUVscale=50,this._textureUVratio=50,this._textureBlending=!0,this._textureTransparency=!1,this._textureBorderMode=!0,this._area=-1,this._volume=-1}IsRenderable(){return this._isRenderable}IsMesh(){return this._isMesh}SetIsRenderable(e){this._isRenderable=e}BuildGraphicPropertiesStructure(e){for(var t,r,o,a=this._experienceBase.getManager("VCXContextManager"),n=a&&a.getMainViewer(),s=e&&(e.getColor||e.getAll),p=e&&(e.getOpacity||e.getAll),u=e&&(e.getMaterial||e.getAll||s||p),h=e&&(e.getWorldPosition||e.getAll),d=e&&(e.getVisibility||e.getAll),c=e&&(e.getRenderStyle||e.getAll),C=[],V=this,M=0;V;){M++;var m={};m.object=V;var b=null===(t=V.QueryInterface("W3AISGNodeHolder"))||void 0===t?void 0:t.getPathElement();if(b){if(m.pathElement=b,1===M){m.cad={};var y=i.getCurrentGraphicProperties({pathElement:b,getMaterial:u,getColor:s,getOpacity:p});y&&y.length>0&&(u&&(m.cad.Material=y[0].material),s&&(m.cad.Color=y[0].color),p&&(m.cad.Opacity=y[0].opacity),d&&(m.cad.Visibility=i.getCurrentVisibility(b)),h&&(m.cad.WorldPosition=b.getWorldMatrix(n)))}var _=null==V?void 0:V.getSharedSceneGraphOverride(b);if(_){var f={},P=!1;u&&null!=_.getMaterial()&&(P=!0,f.Material=_.getMaterial()),s&&null!=_.getColor()&&(P=!0,f.Color=new l.Color(_.getColor())),p&&null!=_.getOpacity()&&(P=!0,f.Opacity=_.getOpacity()),d&&null!=_.getVisibility()&&(P=!0,f.Visibility=_.getVisibility()),c&&null!=_.getRenderStyle()&&(P=!0,f.RenderStyle=_.getRenderStyle()),P&&(m.override=f)}}C.push(m),V=null===(o=null===(r=V.QueryInterface("VCXIModelNavigable"))||void 0===r?void 0:r.getParent())||void 0===o?void 0:o.GetObject()}for(var S=0;S<1;S++){C[S].visible={},C[S].cad?(u&&C[S].cad.hasOwnProperty("Material")&&(C[S].visible.Material=C[S].cad.Material),s&&C[S].cad.hasOwnProperty("Color")&&(C[S].visible.Color=C[S].cad.Color),p&&C[S].cad.hasOwnProperty("Opacity")&&(C[S].visible.Opacity=C[S].cad.Opacity),d&&C[S].cad.hasOwnProperty("Visibility")&&(C[S].visible.Visibility=C[S].cad.Visibility)):(u&&(C[S].visible.Material=null),s&&(C[S].visible.Color=new l.Color),p&&(C[S].visible.Opacity=1),d&&(C[S].visible.Visibility=!0),c&&(C[S].visible.RenderStyle=0));for(var v=S;v<C.length;v++)C[v].override&&(u&&C[v].override.hasOwnProperty("Material")&&(C[S].visible.Material=C[v].override.Material),s&&C[v].override.hasOwnProperty("Color")&&(C[S].visible.Color=C[v].override.Color),p&&C[v].override.hasOwnProperty("Opacity")&&(C[S].visible.Opacity=C[v].override.Opacity),d&&C[v].override.hasOwnProperty("Visibility")&&(C[S].visible.Visibility=C[v].override.Visibility),c&&C[v].override.hasOwnProperty("RenderStyle")&&(C[S].visible.RenderStyle=C[v].override.RenderStyle));if(p){var g=C[S].visible&&C[S].visible.Material,D=1;g&&(D=g.getOpacity()),C[S].visible.ComputedOpacity=D*(C[S].visible.hasOwnProperty("Opacity")?C[S].visible.Opacity:1)}s&&(C[S].visible.hasOwnProperty("Material")&&C[S].visible.Material&&C[S].visible.Material.color?C[S].visible.ComputedColor=C[S].visible.Material.color:C[S].visible.hasOwnProperty("Color")&&(C[S].visible.ComputedColor=C[S].visible.Color))}return C}SetIsMesh(e){this._isMesh=e,e&&(this._isRenderable=!0)}getSharedSceneGraphOverride(e=null,t=!0){var r=e;if(!e){var i=this.QueryInterface("W3AISGNodeHolder");r=null==i?void 0:i.getPathElement()}return this._experienceBase.getManager("VCXContextManager").getSharedSceneGraphOverride(r,t)}getMaterial(){var e=this.getSharedSceneGraphOverride();return e?e._values.fullMaterial&&void 0!==e._values.fullMaterial?e._values.fullMaterial:e.getMaterial():null}setMaterial(e,t){var r=this.getSharedSceneGraphOverride(null,!0);r&&r.setMaterial(e,t)}getColor(){var e=this.getSharedSceneGraphOverride();return e?e.getColor():null}setColor(e,t){var r=this.getSharedSceneGraphOverride(null,!0);r&&r.setColor(e,t)}getOpacity(){var e=this.getSharedSceneGraphOverride();return e?e.getOpacity():null}setOpacity(e,t){var r=this.getSharedSceneGraphOverride(null,!0);r&&r.setOpacity(e,t)}getVisibility(){var e=this.getSharedSceneGraphOverride();return e?e.getVisibility():null}setVisibility(e,t=""){var r=this.getSharedSceneGraphOverride(null,!0);r&&r.setVisibility(e,t),this._experienceBase.getManager("VCXContextManager").partHasMoved=!0}setPickability(e){var t=this.getSharedSceneGraphOverride(null,!0);t&&t.setPickability(e)}setPosition(e){var t=this.getSharedSceneGraphOverride(null,!0);t&&t.setPosition(e),this._experienceBase.getManager("VCXContextManager").partHasMoved=!0}getPosition(){var e=this._experienceBase.getManager("VCXContextManager"),t=this.QueryInterface("W3AISGNodeHolder");if(t)return t.getMatrix(e.getMainViewer());console.error("We shouldn't be here");var r=this.getSharedSceneGraphOverride();return r?r.getPosition():null}getRenderPriority(){return this._priority}setRenderPriority(e,t=null){this._priority=e;var r=this._experienceBase.getManager("VCXContextManager"),o=this.QueryInterface("W3AISGNodeHolder");o&&r&&i.setRenderPriority&&i.setRenderPriority(o.getPathElement(),this._priority,r.getMainViewer())}getRenderOpacity(){return this._layerOpacity}setRenderOpacity(e,t=null){this._layerOpacity=e;var r=this._experienceBase.getManager("VCXContextManager"),o=this.QueryInterface("W3AISGNodeHolder");o&&r&&i.setRenderPriorityOpacity&&i.setRenderPriorityOpacity(o.getPathElement(),this._layerOpacity,r.getMainViewer())}TraverseGraph(e,t,r,i){var a,n,s=null,l=1,p=null,d=null;if(((i&u.default.FDirty.Material||this._dirtyMask&u.default.FDirty.Material)&&(this.UpdateLocalMaterial&&this.UpdateLocalMaterial(),p=this.localMaterial,this._dirtyMask|=u.default.FDirty.Material,this._globalMaterial=p),i&u.default.FDirty.Alpha||this._dirtyMask&u.default.FDirty.Alpha?(l=1,null!==e&&(l=e),null!==this._localAlpha&&l&&(l*=this._localAlpha),this._dirtyMask|=u.default.FDirty.Alpha,this._globalAlpha=l):l=this._globalAlpha,i&u.default.FDirty.Color||this._dirtyMask&u.default.FDirty.Color?(s=t||(this._localColorIsDefined?this._localColor:null),this._dirtyMask|=u.default.FDirty.Color,this._globalColor=s):s=this._globalColor,i&u.default.FDirty.Visibility||this._dirtyMask&u.default.FDirty.Visibility?(d=(null===r||!0===r)&&(null===this._localVisibility||this._localVisibility),this._dirtyMask|=u.default.FDirty.Visibility,this._globalVisibility=d):d=this._globalVisibility,this._dirtyMask&u.default.FDirty.Position&&(this.setPosition(this._matrix),this._dirtyMask&=~u.default.FDirty.Position),this._dirtyMask&u.default.FDirty.Priority&&(this.setRenderPriority(this._priority),this._dirtyMask&=~u.default.FDirty.Priority),this._dirtyMask&u.default.FDirty.LayerOpacity&&(this.setRenderOpacity(this._layerOpacity),this._dirtyMask&=~u.default.FDirty.LayerOpacity),i&u.default.FDirty.RenderingMode||this._dirtyMask&u.default.FDirty.RenderingMode)&&(y=this._experienceBase.getManager("VCXVisuManager").getActiveViewport())){switch(S=y.QueryInterface("VCXIModifiable").GetPropertyValue("Render.Mode")){case u.default.ERenderingMode.Custom:var c=this.renderingMode;if(c===u.default.ERenderingMode.Silhouette)this._globalMaterial=null;else if(c===u.default.ERenderingMode.FlatTechnical)if(this._Material&&!0===this._Material.useLighting)this._Material.useLighting=!1,this._Material.needsUpdate=!0,this._globalMaterial=this._Material;else{var C=this._experienceBase.getManager("VCXMaterialManager");this._globalMaterial=C.getMaterialFlat()}else this._globalMaterial=this.localMaterial,this._Material&&!1===this._Material.useLighting&&(this._Material.useLighting=!0,this._Material.needsUpdate=!0);break;case u.default.ERenderingMode.FlatTechnical:if(this._Material&&!0===this._Material.useLighting)this._Material.useLighting=!1,this._Material.needsUpdate=!0,this._globalMaterial=this._Material;else{C=this._experienceBase.getManager("VCXMaterialManager");this._globalMaterial=C.getMaterialFlat()}break;case u.default.ERenderingMode.Silhouette:this._globalMaterial=null;break;default:this._Material&&!1===this._Material.useLighting&&(this._Material.useLighting=!0,this._Material.needsUpdate=!0),this._globalMaterial=this.localMaterial}this._dirtyMask|=u.default.FDirty.Material,this._dirtyMask|=u.default.FDirty.RenderingMode}this._navigable||(this._navigable=this.QueryInterface("VCXIModelNavigable"));var V=null===(a=this._navigable)||void 0===a?void 0:a.getChildren(),M=V&&V.length&&(this._isMesh||"VCXComponentCurveWire"===this.componentType||"VCXComponentPoint"===this.componentType);if(M&&(s=t,l=e,d=r),V)for(var m=0;m<V.length;++m){var b=V[m].GetObject();b.TraverseGraph&&b.TraverseGraph(l,s,d,this._dirtyMask)}if(this.IsRenderable()){if(0!=(this._dirtyMask&h.mask)){var y,_=null===(n=this.QueryInterface("W3AISGNodeHolder"))||void 0===n?void 0:n.getPathElement();if(this._dirtyMask&u.default.FDirty.Alpha)if(M){if(P=o.getMesh3dPathElements(_,["Instance3D"]))for(m=0;m<P.length;++m)this.OverrideAlpha(this._globalAlpha,P[m],!0)}else this.OverrideAlpha(this._globalAlpha,_,!0);if(this._dirtyMask&u.default.FDirty.Color)if(M){if(P=o.getMesh3dPathElements(_,["Instance3D"]))for(m=0;m<P.length;++m)this.OverrideColor(this._globalColor,P[m],!0)}else this.OverrideColor(this._globalColor,_,!0);if(this._dirtyMask&u.default.FDirty.Material||this._dirtyMask&u.default.FDirty.Color&&this._globalMaterial)if(M){if(P=o.getMesh3dPathElements(_,["Instance3D"]))for(m=0;m<P.length;++m)this.OverrideMaterial(this._globalMaterial,t,P[m],!0)}else this.OverrideMaterial(this._globalMaterial,t,_,!0);if(this._dirtyMask&u.default.FDirty.Visibility)if(M){if(P=o.getMesh3dPathElements(_,["Instance3D"]))for(m=0;m<P.length;++m){var f=this.getSharedSceneGraphOverride(P[m],!0);f&&f.setVisibility(this._globalVisibility,!0)}}else this.setVisibility(this._globalVisibility);if(this._dirtyMask&u.default.FDirty.RenderingMode&&this.IsRenderable())if(y=this._experienceBase.getManager("VCXVisuManager").getActiveViewport()){var P,S=y.QueryInterface("VCXIModifiable").GetPropertyValue("Render.Mode");if(M){if(P=o.getMesh3dPathElements(_,["Instance3D"]))for(m=0;m<P.length;++m)this.OverrideRenderingMode(S,P[m],!0,!0)}else this.OverrideRenderingMode(S,_,!0,!0)}var v=this._dirtyMask&u.default.FDirty.Visibility&&!0===this._globalVisibility;this._dirtyMask&=h.maskInv,v&&this._globalMaterial&&(this._dirtyMask|=u.default.FDirty.Material)}}else this._dirtyMask=0}HasMaterialOverrideToApply(){return!!this.GetObject()._experienceBase.getManager("VCXContextManager").isSupported("FullFeaturesOnNodes")||!!this.IsMesh()&&(this._envID||-1!==this._textureDocID||this.renderingMode>2)}HasColorOverrideToApply(){if(this.GetObject()._experienceBase.getManager("VCXContextManager").isSupported("FullFeaturesOnNodes"))return this.localColorIsDefined;if(!this.IsMesh())return!0;var e=!1;switch(this._envID){case r.EnvironmentalId.Chromic:case r.EnvironmentalId.Glass:case r.EnvironmentalId.Gold:case r.EnvironmentalId.Aluminium:case r.EnvironmentalId.Satin:e=!1;break;case r.EnvironmentalId.None:case r.EnvironmentalId.Metal:case r.EnvironmentalId.MetalBrushed:case r.EnvironmentalId.Plastic:case r.EnvironmentalId.GlassPlastic:case r.EnvironmentalId.ChromicWithColor:e=!0,-1!==this._textureDocID&&(e=!1);break;default:e=!1}return e}HasOpacityOverrideToApply(){return!0}UpdateLocalMaterial(){if(this.IsMesh()||this.GetObject()._experienceBase.getManager("VCXContextManager").isSupported("FullFeaturesOnNodes")){if(!1===this.HasMaterialOverrideToApply())this._localMaterial=null;else{var e=this._experienceBase.getManager("VCXMaterialManager");-1!==this._textureDocID&&e.isTextureVisible(this._envID)?(this._MaterialNoShared||(this._MaterialNoShared=e.createMaterial(this)),this._localMaterial=this._MaterialNoShared):(delete this._MaterialNoShared,this._localMaterial=null),this._envID!==r.EnvironmentalId.None&&(-1!==this._textureDocID&&e.isTextureVisible(this._envID)||(delete this._MaterialNoShared,this._localMaterial=e.getSharedMaterial(this))),this._MaterialNoShared&&(e.setMaterialAttributesFromOccurrence(this,this._MaterialNoShared),this._dirtyMask&h.maskForceMaterialUpdate&&(this._MaterialNoShared.needsUpdate=!0),this._MaterialNoShared.force=!0)}this._dirtyMask&=~h.maskMaterialParamsDirty}}OverrideAlpha(e,t,r){var i=this.getSharedSceneGraphOverride(t,!0);i&&i.setOpacity(this.HasOpacityOverrideToApply()?e:null,r)}OverrideVisibility(e,t,r){var i=this.getSharedSceneGraphOverride(t,!0);i&&i.setVisibility(e,r)}OverrideColor(e,t,r){if(this.HasColorOverrideToApply()){var i=this.getSharedSceneGraphOverride(t,!0);i&&(e?i.setColor(e,r):i.resetColor())}}OverrideMaterial(e,t,r,i){var o=this.getSharedSceneGraphOverride(r,!0);if(o){var n=this.HasMaterialOverrideToApply()?e:null;if(n?o.setMaterial(n,i):o.setMaterial(null,i),this.HasColorOverrideToApply()){var s=null;t?s=t:this.localColor&&(!0===this.localColorIsDefined||this.HasMaterialOverrideToApply()&&e)&&(s=this.localColor),o.setColor(s,i)}else n?o.setColor(a.NO_COLOR,i):o.setColor(null,i)}}OverrideRenderingMode(e,t,r,i){var o=this.getSharedSceneGraphOverride(t,!0);if(o){var a=this._experienceBase.getManager("VCXMaterialManager");if(a){var n=null;switch(e){case u.default.ERenderingMode.Custom:n=a.getRenderStyle(this.renderingMode,u.default.EOutlineType.Smart,i);break;case u.default.ERenderingMode.SmoothOutline:case u.default.ERenderingMode.Technical:case u.default.ERenderingMode.FlatTechnical:case u.default.ERenderingMode.Silhouette:var s=2,l=this._experienceBase.getManager("VCXVisuManager").getActiveViewport();l&&(s=l.QueryInterface("VCXIModifiable").GetPropertyValue("Render.OutlineType")),n=a.getRenderStyle(e,s,i)}o.setRenderStyle(n,r)}}}debugVisu(){function e(e,t){var r,i,o,a,s=n._authorizedTeamsOnly_getKey();for(r=e.getMesh3D(),a=t.getLastElement(!0)===r?t:r,i=new n(a,s),o=0;o<i.getNbPrimitives();o++)console.log(i.getGas(o)._alpha);return[]}var t=this._experienceBase.getManager("VCXContextManager"),r=new s(t.getMainViewer()),i=this.QueryInterface("W3AISGNodeHolder"),o=null==i?void 0:i.getPathElement();r.explore(function(t){var r,i,a=(i=t.getOccurrenceItf(o)).getRenderableDescendants();for(r=0;r<a.length;r++)(i=a[r]).getVisibility()&&e(i,o)})}get bomID(){return this._bomID}set bomID(e){this._bomID=e}}return h.mask=u.default.FDirty.Alpha|u.default.FDirty.Color|u.default.FDirty.Material|u.default.FDirty.Visibility|u.default.FDirty.RenderingMode,h.maskInv=~h.mask,h.maskForceMaterialUpdate=u.default.FDirty.TextureDocID|u.default.FDirty.TextureTransparency|u.default.FDirty.EnvID|u.default.FDirty.TextureProjectionType|u.default.FDirty.TextureBorderMode,h.maskMaterialParamsDirty=u.default.FDirty.TextureDocID|u.default.FDirty.TextureProjectionType|u.default.FDirty.TextureProjectionMatrix|u.default.FDirty.TextureUVMatrix|u.default.FDirty.TextureUVscale|u.default.FDirty.TextureUVratio|u.default.FDirty.TextureBlending|u.default.FDirty.TextureTransparency|u.default.FDirty.TextureBorderMode,Object.defineProperty(h.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentOccurrenceSMG"}}),h}),define("DS/VCXWebSMGComponents/VCXModifiableOccurrenceSMG",["DS/CoreEvents/Events","DS/VCXWebExperienceBase/VCXModifiableOccurrenceExt","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebModifiables/VCXModelChangeListener","DS/VCXWebVisibility/VCXIVisibility","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueLink","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueDocId","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueFrame","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXColor","DS/VCXWebSystem/VCXEnums","DS/VCXWebComponents/VCXWebComponentOccurrence","DS/Visualization/ThreeJS_DS","DS/VCXWebSystem/VCXMathTools","DS/VCXWebProperties/VCXPropertyValueInt","i18n!DS/VCXWebComposer/assets/nls/VCXWebComposer","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],function(e,t,r,i,o,a,n,s,l,p,u,h,d,c,C,V,M,m,b,y,_,f,P,S){"use strict";return t.extend({init:function(){this._parent(),this._requestedBOMID=null},OnChangeProperty:function(e,t,r){if(r||(r={}),r.fromChildClass);else if(this.OnChangePropertyBegin(e,t))return!0;if(r.fromChildClass=!0,!this._parent(e,t,r)){var i=null,o=null;switch(e){case"Actor.BomId":this._requestedBOMID=t.GetValue();break;case"Actor.Texture.Map.Path":i=t.GetValue(),(o=this.GetObject())._textureDocID!==i&&(o._textureDocID=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureDocID));break;case"Actor.Texture.Transparency":i=t.GetValue(),(o=this.GetObject())._textureTransparency!==i&&(o._textureTransparency=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureTransparency));break;case"Actor.Texture.Blending.Mode":i=t.GetValue(),(o=this.GetObject())._textureBlending!==i&&(o._textureBlending=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureBlending));break;case"Actor.Texture.Border.Mode":i=t.GetValue(),(o=this.GetObject())._textureBorderMode!==i&&(o._textureBorderMode=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureBorderMode));break;case"Actor.Texture.Projection.Type":i=t.GetValue(),(o=this.GetObject())._textureProjectionType!==i&&(o._textureProjectionType=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureProjectionType));break;case"Actor.Texture.Frame.Gen":i=t.GetValue(),o=this.GetObject(),_.IsMat1EqualsToMat2(i,o._textureProjectionMatrix||new y.Matrix4,0)||(_.IsMat1EqualsToMat2(i,new y.Matrix4,0)?delete o._textureProjectionMatrix:o._textureProjectionMatrix=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureProjectionMatrix));break;case"Actor.Texture.Frame.2D":i=t.GetValue(),o=this.GetObject(),_.IsMat1EqualsToMat2(i,o._textureUVMatrix||new y.Matrix4,0)||(_.IsMat1EqualsToMat2(i,new y.Matrix4,0)?delete o._textureUVMatrix:o._textureUVMatrix=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureUVMatrix));break;case"Actor.Texture.UV.Scale":i=t.GetValue(),(o=this.GetObject())._textureUVscale!==i&&(o._textureUVscale=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureUVscale));break;case"Actor.Texture.UV.Ratio":i=t.GetValue(),(o=this.GetObject())._textureUVratio!==i&&(o._textureUVratio=i,o.setDirtyFlag(b.FDirty.Material|b.FDirty.TextureUVratio));break;case"Actor.Env.Effect":this._requestedEnvEffect=t.GetValue();break;case"Actor.PLM.Material":this._requestedPLMMaterial=t.GetValue();break;case"Actor.Prop.Area":i=t.GetValue(),(o=this.GetObject())._area!==i&&(o._area=i);break;case"Actor.Prop.Volume":i=t.GetValue(),(o=this.GetObject())._volume!==i&&(o._volume=i);break;default:return!1}}return!0},OnChangePropertiesEnd:function(){this._parent();var e=this.GetObject(),t=e._experienceBase.getManager("VCXContextManager");if(null!==this._requestedBOMID){if(e.bomID!==this._requestedBOMID){var r=e._experienceBase.getManager("VCXModelChangeListener");r&&r.hasChanged(o.FChangeFlag.BomID,!0),e.bomID=this._requestedBOMID}this._requestedBOMID=null}if(void 0!==this._requestedEnvEffect&&(e._envID!==this._requestedEnvEffect&&(e._envID=this._requestedEnvEffect,e.setDirtyFlag(b.FDirty.Material|b.FDirty.EnvID)),e._envID!==m.EnvironmentalId.PLM&&(this._requestedPLMMaterial=null),delete this._requestedEnvEffect),void 0!==this._requestedPLMMaterial){e._envID!==m.EnvironmentalId.PLM&&(this._requestedPLMMaterial=null);var i=e._experienceBase.getManager("VCXCAT3DXModelManager");if(i){var a=this._requestedPLMMaterial,n=null;a&&(n=e._experienceBase.ComponentsMap.GetComponentFromID(a)),i.ApplyMaterial(this.GetObject(),n,!1)}delete this._requestedPLMMaterial}if(e.IsMesh()||this.GetObject()._experienceBase.getManager("VCXContextManager").isSupported("FullFeaturesOnNodes")){var s=!1;if(e._localColorIsDefined||(e._localColor=null),e._localColor||(e._localColor=this.GetOriginalColor()),null===e._localAlpha){var l=this.GetOriginalMaterial();l&&l.opacity&&(e._localAlpha=l.opacity)}if(e.getDirtyFlag(b.FDirty.Material)&&(e._dirtyMask|=b.FDirty.Color,e._dirtyMask|=b.FDirty.Alpha,s=!0),e.getDirtyFlag(b.FDirty.Color)&&e._textureDocID&&(e._dirtyMask|=b.FDirty.Material),e.getDirtyFlag(b.FDirty.Alpha))switch(null==e._visibilityAlpha&&null==e._alpha||(e._localAlpha=1,null!=e._visibilityAlpha&&(e._localAlpha*=e._visibilityAlpha),null!=e._alpha&&(e._localAlpha*=e._alpha)),e._envID){case m.EnvironmentalId.Glass:e._localAlpha*=.3;break;case m.EnvironmentalId.GlassPlastic:e._localAlpha*=.5}}(e._dirtyMask||s)&&(t.traverseGraphMustBePerformed=!0)},GetProperty:function(e){var t=null,o=this.GetObject();o._experienceBase.getManager("VCXContextManager");switch(e){case"Actor.BomId":(G=new s).SetValue(this.GetObject().bomID),t=new r(new i(e,0,!0,P),G);break;case"Actor.Texture.Map.Path":var a=new u;a.SetValue(o._textureDocID),(O=new i(e,1,!0,P)).Seti18nGroup(S),O.SetGroupId("Group.Appearance"),t=new r(O,a);break;case"Actor.Texture.Transparency":var n=new c;n.SetValue(o._textureTransparency),(O=new i(e,1,!0,P)).Seti18nGroup(S),O.SetGroupId("Group.Appearance"),t=new r(O,n);break;case"Actor.Texture.Blending.Mode":var V=new c;V.SetValue(o._textureBlending),(O=new i(e,1,!0,P)).Seti18nGroup(S),O.SetGroupId("Group.Appearance"),t=new r(O,V);break;case"Actor.Texture.Border.Mode":var M=new c;M.SetValue(o._textureBorderMode),(O=new i(e,1,!0,P)).Seti18nGroup(S),O.SetGroupId("Group.Appearance"),t=new r(O,M);break;case"Actor.Texture.Projection.Type":(v=new d).SetValue(o._textureProjectionType);var m={0:"material.texture.projection.uv",1:"material.texture.projection.planar",2:"material.texture.projection.spherical",3:"material.texture.projection.cubic",4:"material.texture.projection.finitecylindrical",5:"material.texture.projection.infinitecylindrical"};(g=new h(e,1,!0,P)).SetMapChoiceEnum(m),g.Seti18nGroup(S),g.SetGroupId("Group.Appearance"),t=new r(g,v);break;case"Actor.Texture.Frame.Gen":(b=new C).SetValue(o._textureProjectionMatrix||new y.Matrix4),(O=new i(e,1,!0,P)).Seti18nGroup(S),O.SetGroupId("Group.Appearance"),O.SetVisible(!1),t=new r(O,b);break;case"Actor.Texture.Frame.2D":var b;(b=new C).SetValue(o._textureUVMatrix||new y.Matrix4),(O=new i(e,1,!0,P)).Seti18nGroup(S),O.SetGroupId("Group.Appearance"),O.SetVisible(!1),t=new r(O,b);break;case"Actor.Texture.UV.Scale":(_=new f).SetValue(o._textureUVscale),(O=new i(e,0,!0,P)).SetBounds(0,100),O.Seti18nGroup(S),O.SetGroupId("Group.Appearance"),t=new r(O,_);break;case"Actor.Texture.UV.Ratio":var _;(_=new f).SetValue(o._textureUVratio),(O=new i(e,0,!0,P)).SetBounds(0,100),O.Seti18nGroup(S),O.SetGroupId("Group.Appearance"),t=new r(O,_);break;case"Actor.Env.Effect":(g=new h(e,0,!0,P)).Seti18nGroup(S),g.SetGroupId("Group.Appearance"),g.SetVisible(!1);var v=new d(o._envID);t=new r(g,v);break;case"Actor.PLM.Material.Choice":if(this.QueryInterface("CATI3DExperienceObject")){var g,D=this.GetProperty("Actor.Env.Effect")&&this.GetProperty("Actor.Env.Effect").GetPropertyValue().Value;m={0:"material.none",1:"material.chromic",2:"material.metal",3:"material.metal_brushed",4:"material.plastic",5:"material.glass",6:"material.glass_plastic",7:"material.chromicII",8:"material.gold",10:"material.aluminium",11:"material.satin"},(g=new h(e,1,!1,P)).SetMapChoiceEnum(m),g.Seti18nGroup(S),g.SetGroupId("Group.Appearance");var G=new d(o._envID);t=new r(g,G)}break;case"Actor.PLM.Material":D=o.PLMMaterialID,G=new l(D);(O=new i(e,0,!0,S)).SetGroupId("Group.Appearance"),O.Seti18nGroup(S),O.SetVisible(!1),t=new r(O,G);break;case"Actor.Prop.Area":(X=new p).SetValue(o._area),(O=new i(e,0,!0,P)).Seti18nGroup(S),O.SetGroupId("Group.Geometry"),t=new r(O,X);break;case"Actor.Prop.Volume":var X,O;(X=new p).SetValue(o._volume),(O=new i(e,0,!0,P)).Seti18nGroup(S),O.SetGroupId("Group.Geometry"),t=new r(O,X);break;default:t=this._parent(e)}return t},RequestModification:function(e,t){if(e&&"Actor.PLM.Material.Choice"===e.GetPropertyInfo().GetPropertyName()){var i=e.GetPropertyValue().Value,o=new h("Actor.Env.Effect",0,!0,P),a=new d(i);let n=new r(o,a);t.AddOrModifyProperty(this.GetHashing(),n)}return this._parent(e,t)},GetProperties:function(){var e=this._parent();return(this.GetObject().IsMesh()||this.GetObject()._experienceBase.getManager("VCXContextManager").isSupported("FullFeaturesOnNodes"))&&(e.AddOrModifyProperty(this.GetProperty("Actor.Texture.Map.Path")),e.AddOrModifyProperty(this.GetProperty("Actor.Texture.Transparency")),e.AddOrModifyProperty(this.GetProperty("Actor.Texture.Blending.Mode")),e.AddOrModifyProperty(this.GetProperty("Actor.Texture.Projection.Type")),e.AddOrModifyProperty(this.GetProperty("Actor.Texture.Frame.Gen")),e.AddOrModifyProperty(this.GetProperty("Actor.Texture.Frame.2D")),e.AddOrModifyProperty(this.GetProperty("Actor.Texture.Border.Mode")),e.AddOrModifyProperty(this.GetProperty("Actor.Texture.UV.Ratio")),e.AddOrModifyProperty(this.GetProperty("Actor.Texture.UV.Scale")),e.AddOrModifyProperty(this.GetProperty("Actor.Env.Effect")),e.AddOrModifyProperty(this.GetProperty("Actor.PLM.Material"))),e},IsLiving:function(){var e=this.QueryInterface("VCXIVisibility");return!e||e.GetVisibility()!==a.EVisState.Hidden}})});__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXBOM_Spec",["require","exports","DS/VCXWebDressup/VCXDressup_Spec"],function(e,t,r){"use strict";r=__importDefault(r);class i extends r.default{isDirty(){return!this._dirty&&this._experienceBase.getManager("VCXComponentBomManager")?this._experienceBase.getManager("VCXComponentBomManager").ListHasChanged:this._dirty}}return i.prototype.getDefaultName=function(){return"BOM"},Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:function(){return"VCXBOM_Spec"}}),i.prototype.dressupGroupName="Panels",i});__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXComponentGround",["require","exports","DS/VCXWebDressup/VCXDressup_Spec"],function(e,t,r){"use strict";r=__importDefault(r);class i extends r.default{}return i.prototype.getDefaultName=function(){return"Ground"},Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentGround"}}),i.prototype.dressupGroupName="Environment",i}),define("DS/VCXWebSMGComponents/VCXBOMModifiable",["DS/VCXWebDressup/VCXDressupModifiable","DS/VCXWebDressup/VCXMarkupModifiable","DS/VCXWebProperties/VCXColor","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebDressup/VCXMarkup_Spec","i18n!DS/VCXWebDressup/assets/nls/VCXWebDressup"],function(e,t,r,i,o,a,n,s,l){"use strict";return t.extend({init:function(){this._bIsBOM=!0,this._parent()},Build:function(){this._parent();var t=[{Name:"Collab.Text.Availability",DefaultValue:e.EAvailability.AppForceAvailable},{Name:"Collab.Attach.Availability",DefaultValue:e.EAvailability.AppForceNotAvailable},{Name:"Collab.Background.Availability",DefaultValue:e.EAvailability.AppForceNotAvailable},{Name:"Collab.Border.Availability",DefaultValue:e.EAvailability.AppForceNotAvailable},{Name:"Collab.Image.Availability",DefaultValue:e.EAvailability.AppForceNotAvailable},{Name:"Collab.Body.Shadow.Availability",DefaultValue:e.EAvailability.AppForceNotAvailable},{Name:"Collab.Body.FitToText",DefaultValue:!1},{Name:"Collab.3D.Paper.Billboard.Type",Type:o,DefaultValue:s.EBillboardType.Spherical},{Name:"Collab.3D.Paper.BOM.Percentage",Type:n,DefaultValue:10},{Name:"Collab.3D.Paper.Positioning.Type",Type:o,DefaultValue:s.EPositionType.Free2D},{Name:"Collab.BOM.FilterOnVisibleCallouts",Type:i,DefaultValue:!0,GroupId:"Group.BOM"},{Name:"Collab.BOM.Header.Text.Color",Type:a,DefaultValue:(new r).FromRGBA(0,0,0,1),GroupId:"Group.BOM",BehaviorType:1,i18n:l},{Name:"Collab.BOM.Header.Background.Color",Type:a,DefaultValue:(new r).FromRGBA(240/255,240/255,1),GroupId:"Group.BOM",BehaviorType:1,i18n:l},{Name:"Collab.BOM.OddRow.Background.Color",Type:a,DefaultValue:(new r).FromRGBA(1,1,1,1),GroupId:"Group.BOM",BehaviorType:1,i18n:l},{Name:"Collab.BOM.EvenRow.Background.Color",Type:a,DefaultValue:(new r).FromRGBA(240/255,240/255,1,1),GroupId:"Group.BOM",BehaviorType:1,i18n:l}];this._BuildPropertyValues(t)},OnChangeProperty:function(e,t,r){if(r||(r={}),r.fromChildClass);else if(this.OnChangePropertyBegin(e,t))return!0;"Collab.BOM.FilterOnVisibleCallouts"===e&&(this._resquestedFilterOnVisibleCallouts=t.Value),this._parent(e,t,r)},OnChangePropertiesEnd:function(){if(this._resquestedFilterOnVisibleCallouts!==this._filterOnVisibleCallouts){var e=this.ExperienceBase.getManager("VCXComponentBomManager");e&&(e.filterHasChanged=!0),this._filterOnVisibleCallouts=this._resquestedFilterOnVisibleCallouts}this._parent()}})}),define("DS/VCXWebSMGComponents/VCXGroundNode",["DS/VCXWebDressup/VCXDressupNode","DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D"],function(e,t,r){"use strict";return e.extend({init:function(e){return this._parent(e),this},preRender:function(e){this._parent(e)},update:function(e){if(this._parent(),this._globalOpacity!==this.GlobalOpacity){this._globalOpacity=this.GlobalOpacity;var t=this._globalOpacity>0;t&&(this._MeshNode||(this._MeshNode=new r)),this.setVisibility(t);var i=this.Modifiable.ExperienceBase.getManager("VCXContextManager"),o={displayPlane:!1,displayGrid:!1,planeMirror:!1,groundShadow:!1,planeBorder:!1};i.applyToViewers(function(e){e.setGroundOptions({displayGrid:!0}),e.setGroundOptions(o)})}this._globalOpacity<=0||((o={displayPlane:!0}).planeColor=this.GetColorPropertyValue("Environment.Ground").GetHex(),o.gridColor=this.GetColorPropertyValue("Environment.Ground.Grid").GetHex(),o.displayGrid=this.GetPropertyGroupVisibility("Group.Environment.Ground.Grid"),o.gridFalloff=this.GetPropertyValue("Environment.Ground.Grid.Falloff"),o.displayGridFromBelow=!0,o.gridNbSteps=10,o.planeMirror=this.GetPropertyGroupVisibility("Group.Environment.Ground.Mirror"),o.blurryMirror=this.GetPropertyValue("Environment.Ground.Mirror.Blurry"),o.groundShadow=this.GetPropertyGroupVisibility("Group.Environment.Ground.Shadows"),o.planeBorder=this.GetPropertyGroupVisibility("Group.Environment.Ground.Border"),o.planeBorderColor=this.GetColorPropertyValue("Environment.Ground.Border").GetHex(),o.planeBorder?o.planeFalloff=1-this.GetPropertyValue("Environment.Ground.FallOff"):o.planeFalloff=this.GetPropertyValue("Environment.Ground.FallOff"),(i=this.Modifiable.ExperienceBase.getManager("VCXContextManager")).applyToViewers(function(e){e.setGroundOptions(o)}),this.Modifiable.ExperienceBase.getManager("VCXVisuManager").updateGroundPosition({radius:this.GetPropertyValue("Environment.Ground.Diameter.Auto")?-1:this.GetPropertyValue("Environment.Ground.Diameter")/2}))}})}),define("DS/VCXWebSMGComponents/VCXGroundModifiable",["DS/VCXWebDressup/VCXDressupModifiable","DS/CoreEvents/Events","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXColor"],function(e,t,r,i,o,a,n){"use strict";return e.extend({init:function(){this._parent(),this._bIsGround=!0,this._envMapNeverLoaded=!1},Build:function(){this._parent();var e=[{Name:"Environment.Ground.Color",Type:a,DefaultValue:new n,GroupId:"Group.Environment.Ground"},{Name:"Environment.Ground.Border.Show",Type:i,DefaultValue:!0,ControlsGroupVisibility:!0,GroupId:"Group.Environment.Ground.Border"},{Name:"Environment.Ground.Border.Color",Type:a,DefaultValue:new n,GroupId:"Group.Environment.Ground.Border"},{Name:"Environment.Ground.FallOff",Type:o,DefaultValue:0,Bounds:{Min:0,Max:1,Step:.01},GroupId:"Group.Environment.Ground.Border"},{Name:"Environment.Ground.Diameter.Auto",Type:i,DefaultValue:!0,GroupId:"Group.Environment.Ground"},{Name:"Environment.Ground.Diameter",Type:o,DefaultValue:1,GroupId:"Group.Environment.Ground"},{Name:"Environment.Ground.Shadows.Show",Type:i,DefaultValue:!1,ControlsGroupVisibility:!0,GroupId:"Group.Environment.Ground.Shadows"},{Name:"Environment.Ground.Mirror.Show",Type:i,DefaultValue:!1,ControlsGroupVisibility:!0,GroupId:"Group.Environment.Ground.Mirror"},{Name:"Environment.Ground.Mirror.Blurry",Type:i,DefaultValue:!0,GroupId:"Group.Environment.Ground.Mirror"},{Name:"Environment.Ground.Grid.Show",Type:i,DefaultValue:!1,ControlsGroupVisibility:!0,GroupId:"Group.Environment.Ground.Grid"},{Name:"Environment.Ground.Grid.Color",Type:a,DefaultValue:new n,GroupId:"Group.Environment.Ground.Grid"},{Name:"Environment.Ground.Grid.Falloff",Type:o,DefaultValue:0,Bounds:{Min:0,Max:2,Step:.01},GroupId:"Group.Environment.Ground.Grid"},{Name:"Actor.Opacity",visibleInPropertyGroups:!1},{Name:"Actor.IsAlwaysOnTop",visibleInPropertyGroups:!1}];this._BuildPropertyValues(e)},SetPropertiesInfo:function(){this._parent(),this.SetPropertyInvisible("Actor.Color",!1),this.GetProperty("Actor.Color").GetPropertyInfo()._bPersistent=!1},GetProperty:function(e){return"Actor.Color"===e?this.GetNewProperty(e,this.GetPropertyValue("Environment.Ground.Color")):this._parent(e)},RequestModification:function(e){if(e&&"Actor.Color"===e.GetPropertyInfo().GetPropertyName()){var t=e.GetPropertyValue().Value.getAssociatedColors(),i=new r;return i.AddOrModifyProperty(this.GetNewProperty("Environment.Ground.Color",t.body)),i.AddOrModifyProperty(this.GetNewProperty("Environment.Ground.Border.Color",t.border)),i.AddOrModifyProperty(this.GetNewProperty("Environment.Ground.Grid.Color",t.attach)),i}return this._parent(e)},OnChangePropertiesEnd:function(){t.publish({event:"VCX_ENVIRONNEMENT_PROPERTY_CHANGED"}),this.ExperienceBase.getManager("VCXContextManager").getActiveGround()||this.ExperienceBase.getManager("VCXContextManager").setActiveGround(this.GetObject()),this._parent()}})}),define("DS/VCXWebSMGComponents/VCXBOMInfoComponent",["UWA/Class"],function(e){"use strict";var t=e.extend({init:function(){this._name="",this.treeBomInfo={}},smartCompare:function(e,t){var r=e,i=t;if(r!==i){var o=Number(r),a=Number(i);return o==r&&a==i?!0*(o-a):(r.toLowerCase&&(r=r.toLowerCase()),i.toLowerCase&&(i=i.toLowerCase()),r>i||-1)}return 0},GetType:function(){return this.componentType},SetName:function(e){this._name!==e&&(this._name=e)},GetName:function(){return this._name},getDescription:function(e){return e in this.treeBomInfo?this.treeBomInfo[e]:null},addBomInfoRow:function(e,t){this.treeBomInfo[e]=t}});return Object.defineProperty(t.prototype,"componentType",{enumerable:!0,get:function(){return"VCXBOMInfoComponent"}}),t}),define("DS/VCXWebSMGComponents/VCXModifiableCompositePmi",["DS/VCXWebComponents/VCXWebComponentOccurrence","DS/VCXWebSMGComponents/VCXModifiableOccurrenceSMG","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertyValueEnum","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables","i18n!DS/VCXWebComposer/assets/nls/VCXWebComposer"],function(e,t,r,i,o,a,n){"use strict";return t.extend({init:function(){this._parent()},OnChangeProperty:function(t,r,i){if(i||(i={}),this.OnChangePropertyBegin(t,r))return!0;var o=r.GetValue();switch(t){case"ActorCompositePmi.MirroringRepresentation":this.GetObject()._mirroringRepresentation!==o&&(this.GetObject()._mirroringRepresentation=o,this.GetObject().setDirtyFlag(e.FDirty.Geometry));break;default:i.fromChildClass=!0,this._parent(t,r,i)}return!0},OnChangePropertiesEnd:function(){this._parent()},GetProperty:function(e){var t=null,s=this.GetObject();if("ActorCompositePmi.MirroringRepresentation"===e){var l=new o;l.SetValue(s._mirroringRepresentation);var p=new i(e,1,!0,n),u={};if(s._representations)for(var h=0;h<s._representations.length;++h)u[h]=h.toString();p.SetMapChoiceEnum(u),p.Seti18nGroup(a),p.SetGroupId("Group.Appearance"),t=new r(p,l)}else t=this._parent(e);return t},GetProperties:function(){var e=this._parent();return e.AddOrModifyProperty(this.GetProperty("ActorCompositePmi.MirroringRepresentation")),e}})});__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXComponentPoint",["require","exports","DS/Visualization/ThreeJS_DS","DS/VCXWebSMGComponents/VCXComponentOccurrenceSMG"],function(e,t,r,i){"use strict";i=__importDefault(i);class o extends i.default{constructor(){super(),this._size=5,this._isRenderable=!0}HasMaterialOverrideToApply(){return!0}UpdateLocalMaterial(){super.UpdateLocalMaterial();var e=this._experienceBase.getManager("VCXMaterialManager");null!==e&&(this.localMaterial=e.getMaterialPoint((new r.Color).setRGB(1,1,1),1,this._size))}get size(){return this._size}set size(e){this._size=e}}return Object.defineProperty(o.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentPoint"}}),o});__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXComponentCompositePmi",["require","exports","DS/VCXWebSMGComponents/VCXComponentOccurrenceSMG"],function(e,t,r){"use strict";(r=__importDefault(r)).default.addDirtyFlags(["Geometry"]);class i extends r.default{constructor(){super(),this._representations=[],this._mirroringRepresentation=0,this._representations=[],this._isRenderable=!0,this._isSWPMI=!1}HasMaterialOverrideToApply(){return!1}UpdateLocalMaterial(){super.UpdateLocalMaterial()}TraverseGraph(e,t,i,o){if(super.TraverseGraph(e,t,i,o),this._isSWPMI){var a=this.QueryInterface("VCXIModelNavigable"),n=a&&a.getChildren();if(n)for(var s=0;s<n.length;s++){var l=n[s];if(l){var p=l.GetObject();if(p&&"VCXLabel_Spec"===p.GetType()){var u=p.QueryInterface("VCXIVisibility"),h=this.QueryInterface("VCXIVisibility");h&&u&&u.SetVisibility(h.GetVisibility())}}}}if(this._dirtyMask&r.default.FDirty.Geometry){for(var d=this._representations.length,c=0;c<d;++c)this._representations[c]?this._representations[c].setVisibility(c===this._mirroringRepresentation):console.warn("PMI mirroring representation should be defined");this._dirtyMask&=~r.default.FDirty.Geometry}}}return Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentCompositePmi"}}),i});__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXComponentAssociativePath",["require","exports","DS/VCXWebSMGComponents/VCXComponentPath"],function(e,t,r){"use strict";r=__importDefault(r);class i extends r.default{constructor(){super(),this._IsDressupPropertiesChangeIndependent=!0}}return Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentAssociativePath"}}),i}),define("DS/VCXWebSMGComponents/VCXModifiableMeshPrimitive",["DS/VCXWebComponents/VCXWebComponentOccurrence","DS/VCXWebSMGComponents/VCXModifiableOccurrenceSMG","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebSystem/VCXEnums","i18n!DS/VCXWebComposer/assets/nls/VCXWebComposer","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],function(e,t,r,i,o,a,n,s,l,p){"use strict";return t.extend({init:function(){this._parent()},OnChangeProperty:function(t,r,i){i||(i={});var o=r.GetValue();if(this.OnChangePropertyBegin(t,r))return!0;i.fromChildClass=!0;var a=this.GetObject();if(!this._parent(t,r,i))switch(t){case"ActorMeshPrimitive.Domain1.DomainType":a._domainType!==o&&(a._domainType=o,a.setDirtyFlag(e.FDirty.Geometry));break;case"ActorMeshPrimitive.Domain1.Height":a._height!==o&&(a._height=o,a.setDirtyFlag(e.FDirty.Geometry));break;case"ActorMeshPrimitive.Cube.Depth":a._depth!==o&&(a._depth=o,a.setDirtyFlag(e.FDirty.Geometry));break;case"ActorMeshPrimitive.Cube.Width":a._width!==o&&(a._width=o,a.setDirtyFlag(e.FDirty.Geometry));break;case"ActorMeshPrimitive.Domain1.OuterRadius":a._radius!==o&&(a._radius=o,a.setDirtyFlag(e.FDirty.Geometry));break;case"ActorMeshPrimitive.Domain1.TopRadius":a._radiusTop!==o&&(a._radiusTop=o,a.setDirtyFlag(e.FDirty.Geometry));break;default:return!1}return!0},IsPrimitivePropertyVisible:function(e){var t=this.GetObject()._domainType,r=!1;switch(e){case"ActorMeshPrimitive.Domain1.Height":r=t===s.PrimitiveType.Cube||t===s.PrimitiveType.Cylinder||t===s.PrimitiveType.Line;break;case"ActorMeshPrimitive.Cube.Depth":case"ActorMeshPrimitive.Cube.Width":r=t===s.PrimitiveType.Cube||t===s.PrimitiveType.Square;break;case"ActorMeshPrimitive.Domain1.OuterRadius":r=t===s.PrimitiveType.Cylinder||t===s.PrimitiveType.Disc||t===s.PrimitiveType.Sphere;break;case"ActorMeshPrimitive.Domain1.TopRadius":r=t===s.PrimitiveType.Cylinder}return r},GetProperty:function(e){var t=null,s=this.GetObject();switch(e){case"ActorMeshPrimitive.Domain1.DomainType":var u=new n;u.SetValue(s._domainType||0);var h=new a(e,1,!0,l);h.SetMapChoiceEnum({1:"primitive.type.line",4:"primitive.type.disc",5:"primitive.type.square",6:"primitive.type.cube",7:"primitive.type.sphere",8:"primitive.type.cylinder"}),h.Seti18nGroup(p),h.SetGroupId("Group.Appearance"),t=new r(h,u);break;case"ActorMeshPrimitive.Domain1.Height":(d=new o).SetValue(s._height||0),(c=new i(e,0,!0,l)).Seti18nGroup(p),c.SetGroupId("Group.Appearance"),t=new r(c,d);break;case"ActorMeshPrimitive.Cube.Depth":(d=new o).SetValue(s._depth||0),(c=new i(e,0,!0,l)).Seti18nGroup(p),c.SetGroupId("Group.Appearance"),t=new r(c,d);break;case"ActorMeshPrimitive.Cube.Width":(d=new o).SetValue(s._width||0),(c=new i(e,0,!0,l)).Seti18nGroup(p),c.SetGroupId("Group.Appearance"),t=new r(c,d);break;case"ActorMeshPrimitive.Domain1.OuterRadius":(d=new o).SetValue(s._radius||0),(c=new i(e,0,!0,l)).Seti18nGroup(p),c.SetGroupId("Group.Appearance"),t=new r(c,d);break;case"ActorMeshPrimitive.Domain1.TopRadius":var d,c;(d=new o).SetValue(s._radiusTop||0),(c=new i(e,0,!0,l)).Seti18nGroup(p),c.SetGroupId("Group.Appearance"),t=new r(c,d);break;default:t=this._parent(e)}return t},OnChangePropertiesEnd:function(){this._parent()},GetProperties:function(){var e=this._parent();return e.AddOrModifyProperty(this.GetProperty("ActorMeshPrimitive.Domain1.DomainType")),this.IsPrimitivePropertyVisible("ActorMeshPrimitive.Domain1.Height")&&e.AddOrModifyProperty(this.GetProperty("ActorMeshPrimitive.Domain1.Height")),this.IsPrimitivePropertyVisible("ActorMeshPrimitive.Cube.Depth")&&e.AddOrModifyProperty(this.GetProperty("ActorMeshPrimitive.Cube.Depth")),this.IsPrimitivePropertyVisible("ActorMeshPrimitive.Cube.Width")&&e.AddOrModifyProperty(this.GetProperty("ActorMeshPrimitive.Cube.Width")),this.IsPrimitivePropertyVisible("ActorMeshPrimitive.Domain1.OuterRadius")&&e.AddOrModifyProperty(this.GetProperty("ActorMeshPrimitive.Domain1.OuterRadius")),this.IsPrimitivePropertyVisible("ActorMeshPrimitive.Domain1.TopRadius")&&e.AddOrModifyProperty(this.GetProperty("ActorMeshPrimitive.Domain1.TopRadius")),e}})}),define("DS/VCXWebSMGComponents/VCXModifiableCurveWire",["DS/VCXWebSMGComponents/VCXModifiableOccurrenceSMG","DS/VCXWebComponents/VCXWebComponentOccurrence","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueInt","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables","i18n!DS/VCXWebComposer/assets/nls/VCXWebComposer"],function(e,t,r,i,o,a,n){"use strict";return e.extend({init:function(){this._parent()},OnChangeProperty:function(e,r,i){i||(i={});var o=r.GetValue();if(this.OnChangePropertyBegin(e,r))return!0;switch(e){case"Actor.IsAlwaysOnTop":break;case"ActorCurve.Width":this.GetObject().size!==o&&(this.GetObject().size=o,this.GetObject().setDirtyFlag(t.FDirty.Material));break;default:return i.fromChildClass=!0,this._parent(e,r,i)}return!0},OnChangePropertiesEnd:function(){this._parent()},GetProperty:function(e){var t=null;this.GetObject();switch(e){case"ActorCurve.Width":var s=new o;s.SetValue(this.GetObject().size);var l=new i(e,0,!0,n);l.SetBounds(0,8),l.Seti18nGroup(a),l.SetGroupId("Group.Appearance"),t=new r(l,s);break;default:t=this._parent(e)}return t},GetProperties:function(){var e=this._parent();return e.AddOrModifyProperty(this.GetProperty("ActorCurve.Width")),e}})});__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXComponentCurveWire",["require","exports","DS/Visualization/ThreeJS_DS","DS/VCXWebSMGComponents/VCXComponentOccurrenceSMG"],function(e,t,r,i){"use strict";i=__importDefault(i);class o extends i.default{constructor(){super(),this._size=1,this._isRenderable=!0}HasMaterialOverrideToApply(){return 0!==this._envID}UpdateLocalMaterial(){if(super.UpdateLocalMaterial(),!1===this.HasMaterialOverrideToApply())this.localMaterial=null;else{var e=this._experienceBase.getManager("VCXMaterialManager");null!==e&&(this.localMaterial=e.getMaterialLine((new r.Color).setRGB(1,1,1),1,this._size))}}get size(){return this._size}set size(e){this._size=e}}return Object.defineProperty(o.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentCurveWire"}}),o}),define("DS/VCXWebSMGComponents/VCXModifiablePoint",["DS/VCXWebSMGComponents/VCXModifiableOccurrenceSMG","DS/VCXWebComponents/VCXWebComponentOccurrence","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueInt","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables","i18n!DS/VCXWebComposer/assets/nls/VCXWebComposer"],function(e,t,r,i,o,a,n){"use strict";return e.extend({init:function(){this._parent()},OnChangeProperty:function(e,r,i){i||(i={});var o=r.GetValue();if(this.OnChangePropertyBegin(e,r))return!0;switch(e){case"ActorPoint.Width":this.GetObject().size!==o&&(this.GetObject().size=o,this.GetObject().setDirtyFlag(t.FDirty.Material));break;default:return i.fromChildClass=!0,this._parent(e,r,i)}return!0},OnChangePropertiesEnd:function(){this._parent()},GetProperty:function(e){var t=null;if("ActorPoint.Width"===e){var s=new o;s.SetValue(this.GetObject().size);var l=new i(e,0,!0,n);l.SetBounds(0,30),l.Seti18nGroup(a),l.SetGroupId("Group.Appearance"),t=new r(l,s)}else t=this._parent(e);return t},GetProperties:function(){var e=this._parent();return e.AddOrModifyProperty(this.GetProperty("ActorPoint.Width")),e}})});__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSMGComponents/VCXComponentMeshPrimitive",["require","exports","DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D","DS/VCXWebSystem/VCXEnums","DS/VCXWebSystem/VCXMeshServices","DS/Visualization/SceneGraphFactory","DS/VCXWebSMGComponents/VCXComponentOccurrenceSMG","DS/VCXWebComponents/VCXWebComponentOccurrence"],function(e,t,r,i,o,a,n,s,l){"use strict";s=__importDefault(s),(l=__importDefault(l)).default.addDirtyFlags(["Geometry"]);class p extends s.default{constructor(){super(),this._isRenderable=!0,this._isMesh=!0}TraverseGraph(e,t,s,p){if(this._dirtyMask&l.default.FDirty.Geometry){if(!this._scalesNode){this._scalesNode=new i;var u=this.QueryInterface("W3AISGNodeHolder");if(u){var h=u.getSGNode();h&&h.add(this._scalesNode)}}var d=this._experienceBase.getManager("VCXSelectionManager"),c=d&&d.isIn(this);c&&d.removeComponentsFromSelection([this],!1);var C=null;if(this._domainType)switch(this._domainType){case o.PrimitiveType.Line:case o.PrimitiveType.Disc:case o.PrimitiveType.Square:case o.PrimitiveType.Cube:case o.PrimitiveType.Sphere:C=a.getPrimitiveMeshNode(this._domainType);break;case o.PrimitiveType.Cylinder:(this._radius||this._radiusTop)&&(C=this._radius===this._radiusTop?a.getPrimitiveMeshNode(this._domainType):this._radius&&!this._radiusTop||!this._radius&&this._radiusTop?a.getPrimitiveMeshNode(o.PrimitiveType.Cone):n.createConeNode({bottomCenterPoint:new r.Vector3(0,0,0),topCenterPoint:new r.Vector3(0,0,this._height),bottomRadius:this._radius,topRadius:this._radiusTop}))}var V=this._scalesNode.children.length?this._scalesNode.children[0]:null;if(V!==C&&(V&&this._scalesNode.removeChild(V),C&&this._scalesNode.addChild(C)),!this._scalesNode)return;var M=null,m=null,b=null,y=null,_=null;switch(this._domainType){case o.PrimitiveType.Line:this._height&&(M=new r.Vector3(1,0,0),m=new r.Vector3(0,1,0),b=new r.Vector3(0,0,this._height),this._scalesNode.setMatrix((new r.Matrix4).makeBasis(M,m,b)));break;case o.PrimitiveType.Disc:this._radius&&(M=new r.Vector3(this._radius,0,0),m=new r.Vector3(0,this._radius,0),b=new r.Vector3(0,0,1),this._scalesNode.setMatrix((new r.Matrix4).makeBasis(M,m,b)));break;case o.PrimitiveType.Square:this._width&&this._depth&&(M=new r.Vector3(this._width,0,0),m=new r.Vector3(0,this._depth,0),b=new r.Vector3(0,0,1),this._scalesNode.setMatrix((new r.Matrix4).makeBasis(M,m,b)));break;case o.PrimitiveType.Cube:this._width&&this._depth&&this._height&&(M=new r.Vector3(this._width,0,0),m=new r.Vector3(0,this._depth,0),b=new r.Vector3(0,0,this._height),y=(new r.Matrix4).makeBasis(M,m,b),_=(new r.Matrix4).makeTranslation(0,0,.5*this._height),this._scalesNode.setMatrix((new r.Matrix4).multiplyMatrices(_,y)));break;case o.PrimitiveType.Sphere:this._radius&&(M=new r.Vector3(this._radius,0,0),m=new r.Vector3(0,this._radius,0),b=new r.Vector3(0,0,this._radius),y=(new r.Matrix4).makeBasis(M,m,b),_=(new r.Matrix4).makeTranslation(0,0,this._radius),this._scalesNode.setMatrix((new r.Matrix4).multiplyMatrices(_,y)));break;case o.PrimitiveType.Cylinder:(this._radius||this._radiusTop)&&(this._radius===this._radiusTop?(M=new r.Vector3(this._radius,0,0),m=new r.Vector3(0,this._radius,0),b=new r.Vector3(0,0,.5*this._height),y=(new r.Matrix4).makeBasis(M,m,b),_=(new r.Matrix4).makeTranslation(0,0,.5*this._height),this._scalesNode.setMatrix((new r.Matrix4).multiplyMatrices(_,y))):this._radius&&!this._radiusTop?(M=new r.Vector3(this._radius,0,0),m=new r.Vector3(0,this._radius,0),b=new r.Vector3(0,0,.5*this._height),y=(new r.Matrix4).makeBasis(M,m,b),_=(new r.Matrix4).makeTranslation(0,0,.5*this._height),this._scalesNode.setMatrix((new r.Matrix4).multiplyMatrices(_,y))):!this._radius&&this._radiusTop?(M=new r.Vector3(this._radiusTop,0,0),m=new r.Vector3(0,this._radiusTop,0),b=new r.Vector3(0,0,-.5*this._height),y=(new r.Matrix4).makeBasis(M,m,b),_=(new r.Matrix4).makeTranslation(0,0,.5*this._height),this._scalesNode.setMatrix((new r.Matrix4).multiplyMatrices(_,y))):this._scalesNode.setMatrix(new r.Matrix4))}c&&d.addComponentsToSelection([this]),this._dirtyMask&=~l.default.FDirty.Geometry}super.TraverseGraph(e,t,s,p)}}return Object.defineProperty(p.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentMeshPrimitive"}}),p}),define("DS/VCXWebSMGComponents/VCXGroundSGNodeHolder",["DS/VCXWebDressup/VCXDressupSGNodeHolder","DS/VCXWebSMGComponents/VCXGroundNode"],function(e,t){"use strict";return e.extend({init:function(){},getWorldMatrix:function(e){var t=this.QueryInterface("VCXIModifiable");if(t)return t.GetFramePropertyValue("Actor.Position")},buildSGNode:function(){if(!this._sgNode){var e={name:"Ground",modifiable:this.GetObject().QueryInterface("VCXIModifiable")};this._sgNode=new t(e),this._sgNode.setIcon("../VCXWebDressup/assets/icons/32/I_VCX_Panel_Tree_GroundLeaf.png")}return this._parent()}})}),define("DS/VCXWebSMGComponents/VCXPathNode",["DS/CoreEvents/Events","DS/VCXWebComponents/VCXWebComponentOccurrence","DS/VCXWebSMGComponents/VCXComponentPath","DS/VCXWebDressup/VCXDressup_Spec","DS/VCXWebDressup/VCXPolylineNode","DS/VCXWebModifiablesServices/VCXModifiablesServices","DS/Visualization/ThreeJS_DS","DS/Mesh/MeshUtils","DS/Visualization/SceneGraphFactory"],function(e,t,r,i,o,a,n,s,l){"use strict";return o.extend({init:function(e){return this._parent(e),this},_getPathFirstVertexPos:function(){return this.Modifiable.getPositionOfFirstAnchor()},_getPathLastVertexPos:function(){return this.Modifiable.getPositionOfLastAnchor()},_getAssyCurrentFrameInWCS:function(){return this.GetFramePropertyValue("Actor.Position")},_getPathAxisPositions:function(){var e=[],t=this._getPathFirstVertexPos(),i=this._getPathLastVertexPos(),o=(new n.Vector3).subVectors(i,t),a=this.GetPropertyValue("Collab.Path.AxesOrder"),s=r.getAxesOrder(a),l=!1,p=new n.Vector3;switch(this.GetPropertyValue("Collab.Path.ConstructMode")){case r.EConstructMode.PathXYZWorld:var u=(new n.Vector3).copy(t);e.push(u);for(var h=0,d="";h<3;++h)u=(new n.Vector3).copy(u),d=s[h],Math.abs(o[d])>1e-5&&(l?u[d]=i[d]:(u[d]+=.5*o[d],l=!0)),e.push(u);l?e.push(i):(u=(new n.Vector3).copy(u),e.push(u));break;case r.EConstructMode.PathXYZLocal:var c={x:new n.Vector3,y:new n.Vector3,z:new n.Vector3};this._getAssyCurrentFrameInWCS().extractBasis(c.x,c.y,c.z);var C={x:o.dot(c.x),y:o.dot(c.y),z:o.dot(c.z)};u=(new n.Vector3).copy(t);e.push(u);for(h=0,d="";h<3;++h)u=(new n.Vector3).copy(u),d=s[h],Math.abs(C[d])>1e-5&&(p.copy(c[d]).multiplyScalar(C[d]),l||(p.multiplyScalar(.5),l=!0),u.add(p)),e.push(u);l?e.push(i):(u=(new n.Vector3).copy(u),e.push(u))}return e},_getPosVectArray:function(){var e=[],t=0,i=this;if(this.Modifiable._Anchors&&Object.keys(this.Modifiable._Anchors).length>=2)return this.GetPropertyValue("Collab.Path.ConstructMode")===r.EConstructMode.PathClassic?this.Modifiable.processAnchorsIDs(function(r){var o=i.GetAnchorWorldMatrix(r);if(o){var a=new n.Vector3(0,0,0);a.getPositionFromMatrix(o),e[t++]=a}}):e=this._getPathAxisPositions(this._linkedModifiable),e;console.log("Not enough anchors")},_getCurrentPointsNumber:function(){return this.GetPropertyValue("Collab.Path.ConstructMode")===r.EConstructMode.PathClassic?this._getPtsNbForPathClassicFromAnimation():5},_getPtsNbForPathClassicFromAnimation:function(){return this.Modifiable.getAnchorsCount()}})}),define("DS/VCXWebSMGComponents/VCXPathSGNodeHolder",["DS/VCXWebDressup/VCXDressupSGNodeHolder","DS/VCXWebSMGComponents/VCXPathNode"],function(e,t){"use strict";return e.extend({init:function(){},getWorldMatrix:function(e){var t=this.GetObject()._experienceBase.getManager("VCXContextManager"),r=this.GetObject().getWorkingRootPathElement().getWorldMatrix(t.getMainViewer()),i=this.QueryInterface("VCXIModifiable");if(i)return this._actorPosition=i.GetFramePropertyValue("Actor.Position"),this._actorPosition&&r.multiply(this._actorPosition),r},buildSGNode:function(){if(!this._sgNode){var e={name:"Path",modifiable:this.GetObject().QueryInterface("VCXIModifiable")};this._sgNode=new t(e),this._sgNode.setIcon("../VCXWebDressup/assets/icons/32/I_VCX_Panel_Tree_AnimationPathLeaf.png")}return this._parent()}})}),define("DS/VCXWebSMGComponents/VCXAssociativePathNode",["DS/CoreEvents/Events","DS/VCXWebComponents/VCXWebComponentOccurrence","DS/VCXWebSMGComponents/VCXComponentPath","DS/VCXWebDressup/VCXDressup_Spec","DS/VCXWebSMGComponents/VCXPathNode","DS/VCXWebModifiablesServices/VCXModifiablesServices","DS/Visualization/ThreeJS_DS","DS/Mesh/MeshUtils","DS/Visualization/SceneGraphFactory"],function(e,t,r,i,o,a,n,s,l){"use strict";return o.extend({init:function(t){this._parent(t),this._bReprocessPosInfos=!0,this._linkedModifiable=null,this._pathParams=null,this._positionsArray=null,this._propValuePosition=null,this._neutralPosition=null,this._trackPositionsNb=1024;var r=this;return this._keyChangedEvtToken=e.subscribe({event:"VCX_KEYS_CHANGED"},function(e){if(e&&r._linkedModifiable){var t=r._linkedModifiable.GetHashing();t&&(e.setModifiablesTrackModified[t]||e.setModifiablesTrackRemoved[t])&&(r._bReprocessPosInfos=!0,r.Modifiable&&r.Modifiable.GetObject().setDirty())}}),this._propChangedEvtToken=e.subscribe({event:"VCX_PROPERTIES_CHANGED"},function(e){if(e&&(this._linkedModifiable&&e.GetProperty(this._linkedModifiable.GetHashing(),"Actor.Position"))){var t=this.ExperienceBase.getManager("VCXScenarioManager"),i=t&&t.GetScenarios(),o=t&&t.GetCurrentScenario(),a=i&&i[o];a&&!a.HasAnimation()&&(r._bReprocessPosInfos=!0,r.Modifiable&&r.Modifiable.GetObject().setDirty())}}),this._tokenScenarioChanged=e.subscribe({event:"VCX_CURRENT_SCENARIO_CHANGED"},function(e){r._bReprocessPosInfos=!0,r.Modifiable&&r.Modifiable.GetObject().setDirty()}),this},dispose:function(){null!==this._keyChangedEvtToken&&(e.unsubscribe(this._keyChangedEvtToken),this._keyChangedEvtToken=null),null!==this._propChangedEvtToken&&(e.unsubscribe(this._propChangedEvtToken),this._propChangedEvtToken=null),null!==this._tokenScenarioChanged&&(e.unsubscribe(this._tokenScenarioChanged),this._tokenScenarioChanged=null)},_getPosVectArray:function(){if(!this._linkedModifiable){var e=Object.keys(this.Modifiable._Anchors)[0],t=(this.Modifiable._Anchors[e].GetValueLink(),this.ExperienceBase.ComponentsMap.GetComponentFromLink(this.Modifiable._Anchors[e].GetValueLink()));this._linkedModifiable=t.QueryInterface("VCXIModifiable")}this._pathParams=this._getAssoPathParameters();var i=this._getPosInfosInWCS();if(i){var o=[];if(this.GetPropertyValue("Collab.Path.ConstructMode")===r.EConstructMode.PathClassic)if(this.GetPropertyValue("Collab.Path.IsFromNeutral"))o.push(this._getPathFirstVertexPos()),o.push(this._getPathLastVertexPos());else if(this._pathParams.track){var a=0,n=this._pathParams.currentScenario.GetCurrentFrame(),s=this._pathParams.currentScenario.GetMaxFrame(),l=-1;for(l=this.GetPropertyValue("Collab.Path.IsFull")?this._trackPositionsNb-1:Math.floor((this._trackPositionsNb-1)*n/s),a=0;a<=l;++a)o.push(i.tracks[a]);for(a=l+1;a<=this._trackPositionsNb-1;++a)o.push(i.tracks[l])}else for(a=0;a<=this._trackPositionsNb-1;++a)o.push(i.tracks[0]);else o=this._getPathAxisPositions();return this._pathParams=null,this._lnkModBSphereFrame=null,this._assyMatrixInWCS=null,o}},_getAssoPathParameters:function(){var e=this.ExperienceBase.getManager("VCXScenarioManager"),t=e.GetScenarios()[e.GetCurrentScenario()],r=this._linkedModifiable.QueryInterface("VCXIModelNavigable").getParent(),i=r&&r.GetObject(),o=null;if(t.HasAnimation()){var a=t.GetObjectAnimation(this._linkedModifiable.GetHashing());o=a&&a.GetTrack("Actor.Position")}return{currentScenario:t,parentComponent:i,track:o}},_getPosInfosInWCS:function(){return this._bReprocessPosInfos&&(this._pathParams.track&&(this._positionsArray=this._getFullPathPosFromTrack()),this._propValuePosition=this._getPathPositionForPropValue(),this._neutralPosition=this._getPathPositionForNeutral(),this._bReprocessPosInfos=!1),{tracks:this._positionsArray,propValue:this._propValuePosition,neutral:this._neutralPosition}},_getFullPathPosFromTrack:function(){for(var e=[],t=this._pathParams.currentScenario.GetMaxFrame(),r=(this._pathParams.currentScenario.GetCurrentFrame(),this._trackPositionsNb),i=0;i<r;++i){var o=i*t/r,a=this._getBSphereCenterPosInWCSFromFrameNb(o);e.push(a)}return e},_getPathPositionForPropValue:function(){var e=this._linkedModifiable.GetProperty("Actor.Position"),t=e&&e.GetPropertyValue().GetFrame().GetValue(),r=this.ExperienceBase.getManager("VCXContextManager").getMainViewer(),i=this._pathParams.parentComponent?this._pathParams.parentComponent.QueryInterface("W3AISGNodeHolder").getMatrixInWCS(r,t):t;return this._getBSphereCenterPosInWCSFromMatrix(i)},_getPathPositionForNeutral:function(){var e=null;this._pathParams.track&&1!==this._pathParams.track._treekeys.size&&this._pathParams.track.GetKey(0)?e=this._pathParams.track.GetKey(0).GetValue():e=this.ExperienceBase.getManager("VCXScenarioManager").GetNeutrals(this._linkedModifiable.GetHashing()).GetProperty("Actor.Position").GetPropertyValue();var t=e.GetFrame().GetValue(),r=this.ExperienceBase.getManager("VCXContextManager").getMainViewer(),i=this._pathParams.parentComponent?this._pathParams.parentComponent.QueryInterface("W3AISGNodeHolder").getMatrixInWCS(r,t):t;return this._getBSphereCenterPosInWCSFromMatrix(i)},_getPathFirstVertexPos:function(){return!this.GetPropertyValue("Collab.Path.IsFromNeutral")&&this._pathParams.track&&1!==this._pathParams.track._treekeys.size&&this._pathParams.track.GetKey(0)?this._getPosInfosInWCS().tracks[0]:this._getPosInfosInWCS().neutral},_getPathLastVertexPos:function(){var e=this._getPosInfosInWCS();if(this._pathParams.track){var t=this._pathParams.currentScenario.GetCurrentFrame(),r=this._pathParams.currentScenario.GetMaxFrame(),i=Math.floor((e.tracks.length-1)*t/r);return e.tracks[i]}return e.propValue},_getCurrentPointsNumber:function(){return this.GetPropertyValue("Collab.Path.IsFromNeutral")&&this.GetPropertyValue("Collab.Path.ConstructMode")===r.EConstructMode.PathClassic?2:this._parent()},_getPtsNbForPathClassicFromAnimation:function(){return this._trackPositionsNb},_getBSphereCenterLocalMat:function(e){if(!this._lnkModBSphereFrame){var t=e.QueryInterface("W3AISGNodeHolder").getPathElement().getLastElement(!0).getBoundingSphere().center,r=(new n.Matrix4).setPosition(t);this._lnkModBSphereFrame=r}return this._lnkModBSphereFrame},_getBSphereCenterPosInWCSFromFrameNb:function(e){if(this._pathParams){var t=a.GetFrameInWCSAtTime(this.ExperienceBase.getManager("VCXScenarioManager"),this._pathParams.currentScenario,this._linkedModifiable,e,this._pathParams.track);return this._getBSphereCenterPosInWCSFromMatrix(t)}},_getBSphereCenterPosInWCSFromMatrix:function(e){var t=this._getBSphereCenterLocalMat(this._linkedModifiable),r=(new n.Matrix4).copy(e).multiply(t);return(new n.Vector3).getPositionFromMatrix(r)},_getAssyCurrentFrameInWCS:function(){if(!this._assyMatrixInWCS)if(this._pathParams.track){var e=this._pathParams.currentScenario.GetCurrentFrame();this._assyMatrixInWCS=a.GetFrameInWCSAtTime(this.ExperienceBase.getManager("VCXScenarioManager"),this._pathParams.currentScenario,this._linkedModifiable,e,this._pathParams.track)}else{var t=this.GetFramePropertyValue("Actor.Position"),r=this.ExperienceBase.getManager("VCXContextManager").getMainViewer();this._assyMatrixInWCS=this._pathParams.parentComponent?this._pathParams.parentComponent.QueryInterface("W3AISGNodeHolder").getMatrixInWCS(r,t):t}return this._assyMatrixInWCS}})}),define("DS/VCXWebSMGComponents/VCXAssociativePathSGNodeHolder",["DS/VCXWebDressup/VCXDressupSGNodeHolder","DS/VCXWebSMGComponents/VCXAssociativePathNode"],function(e,t){"use strict";return e.extend({init:function(){},getWorldMatrix:function(e){var t=this.GetObject()._experienceBase.getManager("VCXContextManager"),r=this.GetObject().getWorkingRootPathElement().getWorldMatrix(t.getMainViewer()),i=this.QueryInterface("VCXIModifiable");if(i)return this._actorPosition=i.GetFramePropertyValue("Actor.Position"),this._actorPosition&&r.multiply(this._actorPosition),r},buildSGNode:function(){if(!this._sgNode){var e=this.GetObject().QueryInterface("VCXIModifiable"),r={name:"Associative Path"+(e.GetPropertyValue("Collab.Path.IsFromNeutral")?"From Neutral":""),modifiable:e};this._sgNode=new t(r),this._sgNode.setIcon("../VCXWebDressup/assets/icons/32/I_VCX_Panel_Tree_AnimationPathLeaf.png")}return this._parent()},unreferenceSGNode:function(){this._sgNode&&(this._sgNode.dispose(),delete this._sgNode)}})}),define("DS/VCXWebSMGComponents/VCXBOMCSSNode",["DS/Core/Core","DS/Core/PointerEvents","UWA/Core","DS/VCXWebDressup/VCXDressupNode","DS/Visualization/ThreeJS_DS","DS/VCXWebSMGComponents/VCXBOMPaperNode","DS/VCXWebVisu/VCXModifiablesAccess","DS/VCXWebKernel/VCXCmdChangeSelection","DS/VCXWebDressup/VCXPropertyValueHTMLFormater","DS/VCXWebDressup/VCXPropertiesObserver","DS/VCXWebDressup/VCXMarkup_Spec"],function(e,t,r,i,o,a,n,s,l,p,u){"use strict";var h=i.extend({init:function(e){return this._parent(e),this._BOMPaperNode=null,this._previousBodyWidth=0,this._previousBodyHeight=0,this._textLineHeight=13,this._externalMargin=2,this._lineWidth=.5,this._currentShape=1,this._BomContent=null,this._totalBOMColmnsWidthMM=0,this._BOMAlignment=u.EPositionType.Free2D,this._BOMPercentage=0,this},_UpdateDIV:function(e){var t=this.Modifiable.ExperienceBase;e&&(this._bomContentObserver=new p),this.data={columns:[],data:[]};for(var r=t.getManager("VCXComponentBomManager").GetColumnNumber(),i=0;i<r;i++){var o=t.getManager("VCXComponentBomManager").GetColumnName(i).Value;(d=t.getManager("VCXComponentBomManager").GetColumnLabel(i).Value)||(d=(d=o).slice(d.indexOf(".")+1)),"Quantity"===d?d="Qty":"BomId"===d&&(d="Id"),this.data.columns.push({text:d,dataIndex:o,width:"auto"})}for(var a in this._BomContent)if(""!==a&&this._BomContent.hasOwnProperty(a)){var s={},u=this._BomContent[a];if(u){var h=u.itemComponents[0].QueryInterface("VCXIModifiable");for(i=0;i<r;i++){var d,c,C="";if("Bom.Description"===(d=t.getManager("VCXComponentBomManager").GetColumnName(i).Value)){var V=t.ComponentsMap.GetComponentFromType("VCXBOMInfoComponent");V&&1===V.length&&((C=V[0].getDescription(a))||(d="Actor.Name"))}switch(d){case"Bom.Description":c=C;break;case"Bom.Quantity":c=u.itemComponents.length;break;default:if(c="",h){e&&this._bomContentObserver.add(h,d);var M=h.GetProperty(d);M&&(c="VCXPropertyValueString"===M.GetPropertyValue().GetType()?n.ValuateLinkedProperties(M.GetPropertyValue().Value,t,h.GetObject().GetID(),null,l.format):l.format(M))}}s[this.data.columns[i].dataIndex]=c,0}}s["Actor.BomId"]||(s["Actor.BomId"]=a),this.data.data.push(s)}var m=t.getManager("VCXComponentBomManager").GetSortOption();this.data.data.sort(function(e,t){var r=m.ascendant?1:-1,i=e[m.propertyName],o=t[m.propertyName];if(i!==o){var a=Number(i),n=Number(o);return a==i&&n==o?(a-n)*r:(i.toLowerCase&&(i=i.toLowerCase()),o.toLowerCase&&(o=o.toLowerCase()),i>o?r:-r)}return 0});var b=document.getElementById("divBom");b&&(this._removeRowsEvents(b),this._myDiv.removeChild(b)),b=this._buildBOM(m),this._myDiv.innerHTML="",this._myDiv.appendChild(b)},_getTextLength:function(e,t,i){if(this._span);else{this._span=new r.Element("span",{}),this._span.style.visibility="hidden",this._span.style.pointerEvents="none",this._span.style.whiteSpace="nowrap",this._span.style.position="absolute",this._span.style.left="-500px";var o=this.Modifiable.ExperienceBase.getManager("VCXContextManager").getUIFrame();this._span.inject(o)}this._span.style.fontFamily=t.text.font.fontFamily,this._span.style.fontSize=Math.floor(t.text.font.fontSize)+"pt";var a=0;return e.length&&(a+=6),this._span.style.fontWeight=i?"600":"normal",this._span.innerHTML=e,a+=this._span.offsetWidth},_buildBOM:function(e){this._myDiv.style.visibility="hidden";var t=null,r=!0,i=!0,o=!0,a={text:{font:{fontFamily:"Arial",fontSize:12},headerColor:"white",rowColor:0},background:{visible:!0,headerColor:"gray",oddRowColor:0,evenRowColor:0},border:{visible:!0,thickness:1,color:0}};void 0!==this.GetPropertyValue("Collab.Text.Color")&&(a.text.rowColor=this.GetPropertyValue("Collab.Text.Color").GetStyle()),void 0!==this.GetPropertyValue("Collab.BOM.Header.Text.Color")&&(a.text.headerColor=this.GetPropertyValue("Collab.BOM.Header.Text.Color").GetStyle()),void 0!==this.GetPropertyValue("Collab.BOM.Header.Background.Color")&&(a.background.headerColor=this.GetPropertyValue("Collab.BOM.Header.Background.Color").GetStyle()),void 0!==this.GetPropertyValue("Collab.BOM.OddRow.Background.Color")&&(a.background.oddRowColor=this.GetPropertyValue("Collab.BOM.OddRow.Background.Color").GetStyle()),void 0!==this.GetPropertyValue("Collab.BOM.EvenRow.Background.Color")&&(a.background.evenRowColor=this.GetPropertyValue("Collab.BOM.EvenRow.Background.Color").GetStyle()),this.GetFontPropertyValue("Collab.Text.Font")&&(a.text.font.fontFamily=this.GetFontPropertyValue("Collab.Text.Font").Family,a.text.font.fontSize=this.GetFontPropertyValue("Collab.Text.Font").Height);for(var n=null;(r||i||o)&&a.text.font.fontSize>2;){t&&this._removeRowsEvents(t),t=this._buildFlexBOM(a),this._myDiv.innerHTML="",this._myDiv.appendChild(t);n=this._analyzeBOM(t);var s=this._addBorderTop(n);n=this._analyzeBOM(t),this._addHeader(n,t,a,e),n=this._analyzeBOM(t),this._removeBorderTop(s),this._addBorderTop(n);var l=this._calcColumnProportion(n,a);this._applyColumnProportion(n,l),this._calcSizeInPixel(),this._myDiv.style.width=this.Size.x+"px",this._myDiv.style.height=this.Size.y+"px";var p=t.children;for(r=!1,u=0;u<p.length;u++){if((c=p[u]).offsetLeft+c.clientWidth>t.clientWidth){r=!0,a.text.font.fontSize--;break}}if(i=!0,!1===r){i=!1;p=t.children;for(var u=0;u<p.length;u++){for(var h=p[u].children,d=0;d<h.length;d++){var c=h[d],C=this._getTextLength(c.textContent,a,!1);if(c.clientWidth<C){i=!0,a.text.font.fontSize--;break}}if(i)break}}o=!1,this._myDiv.removeChild(t)}return n&&1===n.length?t.style.justifyContent="center":t.style.justifyContent="flex-start",this._myDiv.style.visibility="visible",t},_analyzeBOM:function(e){var t,r=[],i=[],o=e.children,a=0,n=null,s=0;for(t=0;t<o.length;t++){var l=o[t],p=l.offsetLeft;n?p===s?(i.push(l),0):(r[a]=i,1,(i=[]).push(l),a++):(0,i.push(l)),n=l,s=p}return r[a]=i,r},_removeBorderTop:function(e){for(var t=0;t<e.length;t++){e[t].style.borderTop=""}},_addBorderTop:function(e){for(var t=[],r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++){var a=i[o];0===o&&(a.style.borderTop="1px solid #000000",t.push(a))}return t},_addHeader:function(e,t,r,i){if(e.length>1)for(var o=0,a=1;a<e.length;a++){for(var n=e[a][0],s=0;s<o;s++)n=n.previousSibling;var l=this.createHeader(r,i);t.insertBefore(l,n),o++}},_calcColumnProportion:function(e,t){var r=[];this._totalBOMColmnsWidthMM=0;for(var i=0;i<e.length;i++){for(var o=[],a=e[i],n=a.length,s=0;s<n;s++)for(var l=a[s].children,p=0;p<l.length;p++){var u=l[p],h=this._getTextLength(u.textContent,t,0===s);o[p]?o[p]=Math.max(o[p],h):o[p]=h}var d=o.length,c=0;for(p=0;p<d;p++)c+=o[p];for(p=0;p<d;p++){var C=100*o[p]/c;o[p]=C.toFixed(2)}if(c>0&&t){var V=.3527*c,M=V*(t.text.font.fontSize/100);this._totalBOMColmnsWidthMM+=V+M}r[i]=o}return r},_applyColumnProportion:function(e,t){for(var r=0;r<e.length;r++)for(var i=t[r],o=e[r],a=o.length,n=0;n<a;n++)for(var s=o[n].children,l=0;l<s.length;l++){s[l].style.flexBasis=i[l]+"%"}},_createHeaderCell:function(e){var t=this._createCell(e);return t.style.fontWeight="bold",t.style.color=e.text.headerColor,t.style.backgroundColor=e.background.headerColor,t},_fillHeaderCell:function(e,t){var r=this.data.columns[t].text;this._setContent(e,r)},_createCell:function(e){var t=new r.Element("div",{id:"divBomCell",class:"BOM_Cell"});return t.style.fontFamily=e.text.font.fontFamily,t.style.fontSize=Math.floor(e.text.font.fontSize)+"pt",t},_fillCell:function(e,t,r){var i;i=this.data.data[t][this.data.columns[r].dataIndex],this._setContent(e,i)},_setContent:function(e,t){e.innerHTML=t},_getDescriptionColId:function(){for(var e=1,t=0;t<this.data.columns.length;t++){if("Bom.Description"===this.data.columns[t].dataIndex){e=t;break}}return e},createHeader:function(e){for(var t=new r.Element("div",{id:"divBomRow",class:"BOM_Row"}),i=0;i<this.data.columns.length;i++){var o=this._createHeaderCell(e);this._fillHeaderCell(o,i),o.inject(t)}return t},_buildFlexBOM:function(t,i){var o=new r.Element("div",{id:"divBom",class:"BOM"});this.createHeader(t,i).inject(o);for(var a=0;a<this.data.data.length;a++){var n=this._BomContent[this.data.data[a]["Actor.BomId"]];n||(n=this._BomContent[a+1]);var s,l=new r.Element("div",{id:"divBomRow",class:"BOM_Row"});l.inject(o),l._bomLine=n,n._tr=l,e.Selection.CSOManager.isIn({pathElement:n.itemComponents[0].QueryInterface("W3AISGNodeHolder").getPathElement()})&&l.classList.add("selected"),s=a%2==0?t.background.oddRowColor:t.background.evenRowColor,l.style.backgroundColor=s;for(var p=0;p<this.data.columns.length;p++){var u=this._createCell(t);u.style.color=t.text.rowColor,this._fillCell(u,a,p),u.inject(l)}this._addRowEvents(l)}return o},_addRowEvents:function(e){e.addEventListener("mouseenter",h.rowMouseEnter,!1),e.addEventListener("mouseleave",h.rowMouseLeave,!1),e._experienceBase=this.Modifiable.ExperienceBase,e.addEventListener(t.POINTERUP,h.rowPointerEventUp,!1)},_removeRowEvents:function(e){e.removeEventListener("mouseenter",h.rowMouseEnter),e.removeEventListener("mouseleave",h.rowMouseLeave),e.removeEventListener(t.POINTERUP,h.rowPointerEventUp),e._experienceBase=null},_removeRowsEvents:function(e){var t,r=e.children;for(t=1;t<r.length;t++){var i=r[t];this._removeRowEvents(i)}},_calcSizeInPixel:function(){this.Size=new o.Vector2,this.GetPropertyValue("Collab.Body.Width")>this._totalBOMColmnsWidthMM?this.Size.x=this._totalBOMColmnsWidthMM:this.Size.x=this.GetPropertyValue("Collab.Body.Width"),this.Size.y=this.GetPropertyValue("Collab.Body.Height");this.Size.x/=.3527,this.Size.y/=.3527},dispose:function(){this._BOMPaperNode&&(this._BOMPaperNode.dispose(),this._BOMPaperNode=null),this._bomContentObserver=null,this._parent()},_Build:function(){var e={name:"BOMSmartNode",modifiable:this.Modifiable,type:this._type};if(this._BOMPaperNode=new a(e),this._BOMPaperNode.setVisibilityInTree(!1),this.add(this._BOMPaperNode),!this._myDiv){this._myDiv=new r.Element("div",{class:"CSSTableGenerator"}),this._myDiv.style.position="absolute";var t=this.Modifiable.ExperienceBase.getManager("VCXContextManager").getUIFrame();this._myDiv.inject(t)}this._BOMPaperNode.AttachedDiv=this._myDiv},removeDiv:function(){if(this._myDiv){var e=document.getElementById("divBom");e&&(this._removeRowsEvents(e),this._myDiv.removeChild(e)),this.Modifiable.ExperienceBase.getManager("VCXContextManager").getUIFrame().removeChild(this._myDiv)}},preRender:function(e){this._BOMPaperNode&&this._BOMPaperNode.preRender(e)},addOrRemoveObjectToFromPSO:function(t,r){if(this._BomContent){var i,o=n.GetModifiableFromPathElement(t,this.ExperienceBase);if(o)if(o._bIsCallout&&o.GetComputedStringProperty&&(i=o.GetComputedStringProperty("Collab.Text")),i){var a=this._BomContent[i];if(a&&a.itemComponents){var s=0;for(s=0;s<a.itemComponents.length;s++){var l={pathElement:a.itemComponents[s].QueryInterface("W3AISGNodeHolder").getPathElement()},p=e.Selection.PSOManager;r?p.add(l):p.remove(l)}a._tr&&(r?a._tr.classList.add("hover"):a._tr.classList.remove("hover"))}}}},addOrRemoveObjectToFromCSO:function(t,r){if(this._BomContent&&t){var i=n.GetModifiableFromPathElement(t,this.ExperienceBase);if(i){var o,a=i.GetProperty("Actor.BomId");if(a&&(o=a.GetPropertyValue().Value),o){var s=this._BomContent[o];if(s)if(r){if(s.itemComponents){var l=0;for(l=0;l<s.itemComponents.length;l++){var p={pathElement:s.itemComponents[l].QueryInterface("W3AISGNodeHolder").getPathElement()};e.Selection.CSOManager.add(p)}s._tr&&s._tr.classList.add("selected")}}else s._tr&&s._tr.classList.remove("selected")}}}},addToPSO:function(e){this.addOrRemoveObjectToFromPSO(e,!0)},removeFromPSO:function(e){this.addOrRemoveObjectToFromPSO(e,!1)},emptyPSO:function(){for(var e in this._BomContent)""!==e&&this._BomContent.hasOwnProperty(e)&&this._BomContent[e]._tr&&this._BomContent[e]._tr.classList.contains("hover")&&this._BomContent[e]._tr.classList.remove("hover")},addToCSO:function(e){this.addOrRemoveObjectToFromCSO(e,!0)},removeFromCSO:function(e){this.addOrRemoveObjectToFromCSO(e,!1)},emptyCSO:function(){for(var e in this._BomContent)""!==e&&this._BomContent.hasOwnProperty(e)&&this._BomContent[e]._tr&&this._BomContent[e]._tr.classList.contains("selected")&&this._BomContent[e]._tr.classList.remove("selected")},postUpdate:function(){this._parent(),this._bomContentObserver&&this._bomContentObserver.postUpdate()},update:function(e){if(this._parent(),(this.needToRebuildDiv||this.ExperienceBase.getManager("VCXComponentBomManager"))&&(this.needToRebuildDiv=this.ExperienceBase.getManager("VCXComponentBomManager").ListHasChanged),this.Modifiable&&this.Modifiable._bIsBOM){var t=this.Modifiable.GetPropertyValue("Collab.3D.Paper.Positioning.Type"),r=this.Modifiable.GetPropertyValue("Collab.3D.Paper.BOM.Percentage");t===this._BOMAlignment&&r===this._BOMPercentage||(this.needToRebuildDiv=!0,this._BOMAlignment=t,this._BOMPercentage=r)}var i=!1,o=this.GlobalOpacity;o&&(this.needToRebuildDiv?this.Modifiable.ExperienceBase.getManager("VCXComponentBomManager")&&this.Modifiable.ExperienceBase.getManager("VCXComponentBomManager").GetBOMContent&&(this._BomContent=this.Modifiable.ExperienceBase.getManager("VCXComponentBomManager").GetBOMContent(this.Modifiable.GetPropertyValue("Collab.BOM.FilterOnVisibleCallouts"))):this._bomContentObserver&&(this._bomContentObserver.update(),i=this._bomContentObserver.isDirty()));var a=!1;for(var n in this._BomContent)a=!0;if(a||(o=0),this._globalOpacity!==o){if(this._globalOpacity=o,this._globalOpacity<=0)return this._myDiv&&(this._myDiv.parentNode.removeChild(this._myDiv),this._myDiv=null),this._BOMPaperNode&&(this.remove(this._BOMPaperNode),this._BOMPaperNode=null),void(this._currentText=null);this._BOMPaperNode||(this._Build(),this.needToRebuildDiv=!0),this._myDiv&&this._myDiv.style.opacity!==this._globalOpacity&&(this._myDiv.style.opacity=this._globalOpacity)}this._BOMPaperNode&&(this._BOMPaperNode.update(e),(this.needToRebuildDiv||i)&&this._UpdateDIV(this.needToRebuildDiv),this.needToRebuildDiv&&(this._calcSizeInPixel(),this._myDiv.style.width=this.Size.x+"px",this._myDiv.style.height=this.Size.y+"px",this._UpdateDIV(),this.needToRebuildDiv=!1),this.handleLayers())}});return h.rowMouseEnter=function(t){t.stopPropagation(),t.stopImmediatePropagation();var r=t.currentTarget,i=e.Selection.PSOManager;if(r._bomLine.itemComponents)for(var o=0;o<r._bomLine.itemComponents.length;o++){var a={pathElement:r._bomLine.itemComponents[o].QueryInterface("W3AISGNodeHolder").getPathElement()};i.add(a)}if(r._bomLine.calloutComponents)for(o=0;o<r._bomLine.calloutComponents.length;o++){a={pathElement:r._bomLine.calloutComponents[o].QueryInterface("W3AISGNodeHolder").getPathElement()};i.add(a)}},h.rowMouseLeave=function(t){t.stopPropagation(),t.stopImmediatePropagation(),e.Selection.PSOManager.empty()},h.rowPointerEventUp=function(t){t.stopPropagation(),t.stopImmediatePropagation();var r=t.currentTarget;if(r._bomLine.itemComponents){for(var i=!1,o=0;o<r._bomLine.itemComponents.length&&!i;o++)e.Selection.CSOManager.isIn({pathElement:r._bomLine.itemComponents[o].QueryInterface("W3AISGNodeHolder").getPathElement()})&&(i=!0);var a=r._experienceBase,n=new s(a.getManager("VCXSelectionManager"));for(o=0;o<r._bomLine.itemComponents.length;o++)i?n.RemoveFromSelection(r._bomLine.itemComponents[o]):n.AddToSelection(r._bomLine.itemComponents[o]);a.getManager("VCXCommandManager").Do(n)}},h}),define("DS/VCXWebSMGComponents/VCXBOMSGNodeHolder",["DS/CoreEvents/Events","DS/VCXWebDressup/VCXDressupSGNodeHolder","DS/VCXWebSMGComponents/VCXBOMCSSNode"],function(e,t,r){"use strict";return t.extend({init:function(){},buildSGNode:function(){if(void 0===this._sgNode){var t={name:"BOM",modifiable:this.GetObject().QueryInterface("VCXIModifiable")};this._sgNode=new r(t)}var i=this._sgNode;return this.event_VCX_PREHIGHLIGHT_EMPTY=e.subscribe({event:"VCX_PREHIGHLIGHT_EMPTY"},function(e){i.emptyPSO()}),this.event_VCX_PREHIGHLIGHT_REMOVE=e.subscribe({event:"VCX_PREHIGHLIGHT_REMOVE"},function(e){if(Array.isArray(e))for(var t=0;t<e.length;++t)i.removeFromPSO(e[t].pathElement);else e.pathElement?i.removeFromPSO(e.pathElement):console.warn("Data given by SelectionManager for removes have changed..")}),this.event_VCX_PREHIGHLIGHT_ADD=e.subscribe({event:"VCX_PREHIGHLIGHT_ADD"},function(e){if(Array.isArray(e))for(var t=0;t<e.length;++t)i.addToPSO(e[t].pathElement);else console.warn("Data given by SelectionManager for adds have changed..")}),this.event_VCX_SELECTION_EMPTY=e.subscribe({event:"VCX_SELECTION_EMPTY"},function(e){i.emptyCSO()}),this.event_VCX_SELECTION_COMPONENTSLIST_REMOVE=e.subscribe({event:"VCX_SELECTION_COMPONENTSLIST_REMOVE"},function(e){if(Array.isArray(e))for(var t=0;t<e.length;++t){var r=e[t];if(r){var o=r.QueryInterface("W3AISGNodeHolder");o&&i.removeFromCSO(o.getPathElement())}}else console.log("Problem: Something changed with the VCX_SELECTION_COMPONENTSLIST_REMOVE event...")}),this.event_VCX_SELECTION_COMPONENTSLIST_ADD=e.subscribe({event:"VCX_SELECTION_COMPONENTSLIST_ADD"},function(e){if(Array.isArray(e))for(var t=0;t<e.length;++t){var r=e[t];if(r){var o=r.QueryInterface("W3AISGNodeHolder");if(o){var a=o.getPathElement();a&&i.addToCSO(a)}}}else console.log("Problem: Something changed with the VCX_SELECTION_COMPONENTSLIST_ADD event...")}),this._parent()},Dispose:function(){this.event_VCX_PREHIGHLIGHT_EMPTY&&(e.unsubscribe(this.event_VCX_PREHIGHLIGHT_EMPTY),delete this.event_VCX_PREHIGHLIGHT_EMPTY),this.event_VCX_PREHIGHLIGHT_REMOVE&&(e.unsubscribe(this.event_VCX_PREHIGHLIGHT_REMOVE),delete this.event_VCX_PREHIGHLIGHT_REMOVE),this.event_VCX_PREHIGHLIGHT_ADD&&(e.unsubscribe(this.event_VCX_PREHIGHLIGHT_ADD),delete this.event_VCX_PREHIGHLIGHT_ADD),this.event_VCX_SELECTION_EMPTY&&(e.unsubscribe(this.event_VCX_SELECTION_EMPTY),delete this.event_VCX_SELECTION_EMPTY),this.event_VCX_SELECTION_REMOVE&&(e.unsubscribe(this.event_VCX_SELECTION_REMOVE),delete this.event_VCX_SELECTION_REMOVE),this.event_VCX_SELECTION_COMPONENTSLIST_REMOVE&&(e.unsubscribe(this.event_VCX_SELECTION_COMPONENTSLIST_REMOVE),delete this.event_VCX_SELECTION_COMPONENTSLIST_REMOVE),this.event_VCX_SELECTION_COMPONENTSLIST_ADD&&(e.unsubscribe(this.event_VCX_SELECTION_COMPONENTSLIST_ADD),delete this.event_VCX_SELECTION_COMPONENTSLIST_ADD),this._sgNode&&(this._sgNode.removeDiv(),delete this._sgNode),this._parent()}})}),define("DS/VCXWebSMGComponents/VCXPathModifiable",["DS/VCXWebSMGComponents/VCXComponentPath","DS/VCXWebDressup/VCXDressup_Spec","DS/VCXWebDressup/VCXPolylineModifiable","DS/VCXWebProperties/VCXColor","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueVector"],function(e,t,r,i,o,a,n,s,l,p,u){"use strict";return r.extend({init:function(){this._bIsPolyline=!0,this._parent()},Build:function(){this._parent();var t=[{Name:"Collab.Path.AxesOrder",Type:l,DefaultValue:e.EAxesOrder.XYZ,GroupId:"Group.Path",MapChoice:this._generateMapChoiceFromEnumAndId(e.EAxesOrder,"Collab.Path.AxesOrder")},{Name:"Collab.Path.IsFromNeutral",Type:o,DefaultValue:!1,GroupId:"Group.Path"},{Name:"Collab.Path.ConstructMode",Type:l,DefaultValue:e.EConstructMode.PathClassic,GroupId:"Group.Path",MapChoice:this._generateMapChoiceFromEnumAndId(e.EConstructMode,"Collab.Path.ConstructMode")},{Name:"Collab.Body.Line.Width",DefaultValue:1}];this._BuildPropertyValues(t)},SetPropertiesInfo:function(){this._parent(),this.SetPropertyInvisible("Collab.Path.AxesOrder",this.GetPropertyValue("Collab.Path.ConstructMode")===e.EConstructMode.PathClassic),this.SetPropertyInvisible("Collab.Path.IsFromNeutral",!0),this.SetPropertyInvisible("Collab.ListAnchorsIDs",!0),this.SetPropertyInvisible("Polyline.Is.Closed",!0)}})}),define("DS/VCXWebSMGComponents/VCXAssociativePathModifiable",["DS/VCXWebSMGComponents/VCXComponentPath","DS/VCXWebDressup/VCXDressup_Spec","DS/VCXWebSMGComponents/VCXPathModifiable","DS/VCXWebProperties/VCXColor","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueVector"],function(e,t,r,i,o,a,n,s,l,p,u){"use strict";return r.extend({init:function(){this._bIsPolyline=!0,this._parent()},Build:function(){this._parent();var e=[{Name:"Collab.Path.IsFull",Type:o,DefaultValue:!1,GroupId:"Group.Path"}];this._BuildPropertyValues(e)},SetPropertiesInfo:function(){this._parent(),this.SetPropertyInvisible("Collab.Path.IsFull",this.GetPropertyValue("Collab.Path.ConstructMode")!==e.EConstructMode.PathClassic),this.SetPropertyInvisible("Collab.Path.IsFromNeutral",!0)}})});