define("DS/ENO3DCommands/ENO3DReframeOnCmd",["DS/ENOPAD3DViewer/commands/PAD3DViewerReframeOnCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext,this._viewer=this.ec.getComponent("Viewer")}return t.prototype.beginExecute=function(){new e({context:this._viewer}).execute(),this.endExecute()},t.prototype.endExecute=function(){this.done()},t}),define("DS/ENO3DCommands/ENO3DVolumeQueryCmd",["DS/ENOWebNavVolumeQuery/ENOWebNavVolumeQueryCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext,this.args=e.args,this.cmd=null,this._cbToken=null}return t.prototype.pauseExecute=function(){this.done()},t.prototype.resumeExecute=function(){},t.prototype.beginExecute=function(){return new Promise((t,n)=>{try{this.cmd=new e({context:this.ec.getComponent("Viewer"),args:this.args}),this.cmd.beginExecute(),this.cmd._isRunning=!0,this._cbToken=this.ec.getComponent("Viewer").subscribe({event:"onVolumeEndExecute"},this.done),t()}catch(e){n(e)}})},t.prototype.endExecute=function(){this.cmd._isRunning=!1,this.destroy()},t.prototype.destroy=function(){this.ec.getComponent("Viewer").unsubscribe(this._cbToken),this.cmd.endExecute(),this.cmd.destroy()},t}),define("DS/ENO3DCommands/ENO3DOpenAppCmd",["DS/PADUtils/PADSettingsMgt","DS/Selection/CSOManager","DS/ENOPAD3DViewer/utils/PAD3DViewerModelServices"],function(e,t,n){function o(e){this._appID=e.args.appId,this._context=e.args.ctx,this._ec=e.args.ec}return o.prototype.beginExecute=function(){require(["DS/PADServices/utils/PADTrackerManager","DS/PADUtils/PADUtilsServices"],function(e,t){var n=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});n.setEventData({eventLabel:"PAD3DViewerOpenAppCmd-"+this._appID}),n.trackPageEvent()}.bind(this)),require(["DS/PADUtils/PADUtilsServices","DS/Selection/CSOManager","DS/ENOPAD3DViewer/utils/PAD3DViewerModelServices","DS/ENOPAD3DViewer/utils/PAD3DViewerVisuServices","DS/Visualization/SceneGraphUtils","DS/i3DXCompassServices/i3DXCompassPubSub"],function(t,n,o,i,r,s){var a=this._context,c=[],d={},u=[],l=[],h=[],g=n.get(),p=a.getController()._model.getRootBag(),m=[],D={},f={version:"1.1",paths:c,attributes:d};if(a.getRoots().forEach(function(e){m.push(o.getNodeID(e))}),e.getSetting("authorizeChangeControl")){var C=require("DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext");D.changeControl=C.get()}for(var v={},E=0;E<g.length;E++){var x={},S=g[E];if(o.isAModelPath(S.pathElement)){var y=S.pathElement,P=y.getLastElement(!0),w=o.getNodeID(P);if(o.isTileSetNode(P))a.streamPathWithType(S.pathElement,c,d);else if(-1!==m.indexOf(w)&&c.push([w]),!o.is3DLeaf(P)&&w){if(!0===e.getSetting("enopad3dviewer_lightNodeModel")){var _=a.getController().createReferenceIterator(w);this._traverseOOCGraphToGetReps(_,v,x);var O=Object.keys(x);a.getController().lockNodes({ids:O})}if(o.isPLMNode(P)){var N={};P.traverse(function(e){if(o.is3DLeaf(e)){var t=o.getNodeID(e);if(t&&!N[t])N[t]=!0,r.buildPathesLeadingToNode(e,p).forEach(function(e){y.isAParentOf(e)&&u.push(e)})}})}else{for(;!o.is3DLeaf(P);)P=(y=y.getParentPath()).getLastElement(!0);u.push(y)}u.forEach(function(e){a._hideShowController.isVisible(e)||h.push(o.getNodeID(e.getLastElement(!0))),a.streamPathWithType(e,c,d)})}else a.streamPathWithType(S.pathElement,c,d)}}!0===e.getSetting("enopad3dviewer_lightNodeModel")&&a.getController().unlockNodes({ids:Object.keys(v)}),c&&c.forEach(function(e){l.push(e[e.length-1])}),a.setTypesForOFW({nodes2Open:l,hiddenNodes:h,selectedPaths:f},function(e){var n=a.getViewpoint(),o=i.buildViewPoint(n);null!==o&&e.viewpoint.push(o),D.changeControl&&(e.workUnder=D.changeControl),e.appId=this._appID;var r=JSON.stringify(e),c={appId:this._appID,widgetId:t.getWidgetId(),fileName:"-file",fileContent:r};s.publish("launchApp",c),this.done()}.bind(this))}.bind(this))},o.prototype._traverseOOCGraphToGetReps=function(e,t,n){if(e)if(e.isRepRef())t[e.getReferenceId()]||(t[e.getReferenceId()]=!0,n[e.getReferenceId()]=!0);else for(var o=e.getChildren(),i=0;i<o.length;i++)this._traverseOOCGraphToGetReps(o[i].getReferenceIterator(),t,n)},o.prototype._isLargeDataSelected=function(){for(var e=t.get(),o=!1,i=!1,r=this._context.getController(),s=0;s<e.length;s++){var a=e[s].pathElement;if(n.isAModelPath(a))for(var c=0;c<a.externalPath.length;c++)if("RootBag"===a.externalPath[c].name&&c+1<a.externalPath.length){var d=a.externalPath[c+1];r.isLargeDataStructure(n.getNodeID(d))&&(o=!0),n.isTileSetNode(d)&&(i=!0);break}if(o||i)break}return o||i},o}),define("DS/ENO3DCommands/ENO3DRightSidePanelCmd",["DS/ENOPAD3DViewer/commands/PAD3DViewerRightSidePanel","DS/PADUtils/PADSettingsMgt"],function(e,t){"use strict";function n(n){this.ec=n.executionContext;const o=[{ID:"PropertiesReadOnly",Value:t.getSetting("enopad_webapis")?"false":"true"}];this.cmd=new e({context:"ENO3DViewerInfra",ID:"ENO3DRightSidePanelCmd",arguments:o,isEnabled:!0});const i=this.ec.getComponent("Viewer");i.getTriptych()._modelEvents.subscribe({event:"triptych-show-panel"},e=>{"right"===e&&this.cmd.setState(!0)}),i.getTriptych()._modelEvents.subscribe({event:"triptych-hide-panel"},e=>{"right"===e&&this.cmd.setState(!1)})}return n.prototype.destroy=function(){delete this.ec,delete this.cmd},n}),define("DS/ENO3DCommands/ENO3DToggleAccurateCmd",["DS/ENOPAD3DViewer/commands/PAD3DViewerToggleGeometry"],function(e){"use strict";function t(e){}return t.prototype.beginExecute=function(t){return new Promise((n,o)=>{const i=t.executionContext.getComponent("Viewer");new e({context:i.getCommandContext(),arguments:t.arguments}).execute(),n(),this.endExecute()})},t.prototype.endExecute=function(){this.destroy(),this.done()},t.prototype.destroy=function(){delete this._ec},t}),define("DS/ENO3DCommands/ENO3DViewerScreenshotCmd",["DS/ViewerCommandsExt/ViewerScreenshotUtils"],function(e){"use strict";function t(e){this._ec=e.executionContext,this._context=this._ec.getComponent("Viewer"),this._widget=this._ec.getComponent("Widget"),this._appPrefix="3D Navigate","undefined"!=typeof widget&&void 0!==widget.getValue("appTitle")?this._appPrefix=widget.getValue("appTitle"):e.args&&e.args.appPrefix&&(this._appPrefix=e.args.appPrefix),this._noBlink=!1,e.args&&e.args.noBlink&&(this._noBlink=!0===e.args.noBlink)}return t.prototype.beginExecute=function(){return require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DViewerScreenshotCmd"}),t.trackPageEvent()}),new Promise(t=>{this._context.getContentName().then(n=>{e.saveScreenshot({viewer:this._context.getViewer(),filenamePrefix:this._appPrefix+"-"+n.contentName,noBlink:this._noBlink}),this.endExecute(),t()})})},t.prototype.endExecute=function(){this.done()},t.prototype.destroy=function(){delete this._ec},t}),define("DS/ENO3DCommands/ENO3DRelationalNavigatorCmd",["DS/ENOPAD3DViewer/commands/PAD3DViewerRelationalNavigatorCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext}return t.prototype.beginExecute=function(){const t=this.ec.getComponent("Viewer");new e({context:t.getCommandContext()}).execute(),this.endExecute()},t.prototype.endExecute=function(){this.done(),this.destroy()},t.prototype.destroy=function(){delete this.ec},t}),define("DS/ENO3DCommands/ENO3DFocusOnCmd",[],function(){"use strict";function e(e){this._executionContext=e.executionContext}return e.prototype.beginExecute=function(){require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DFocusOnCmd"}),t.trackPageEvent()}),require(["DS/Selection/CSOManager","DS/PADUtils/PADCommandProxy"],function(e,t){try{var n=this._executionContext.getComponent("Viewer"),o=t.create();if(o){var i=e.get(),r=[];i.length&&(i.forEach(function(e){var t=e.pathElement,o=n.streamPath(t);r.push(o)}),require(["DS/PADUtils/PADUtilsServices"],function(e){o.focus({intent:"focus",paths:r,widget:"3D",sharedID:e.getSharedId(),appID:e.getAppId()}),o.destroy()}))}}finally{this.done()}}.bind(this),function(){this.done()}.bind(this))},e.prototype.destroy=function(){delete this._executionContext},e}),define("DS/ENO3DCommands/ENO3DRevealDocumentsCmd",["DS/ENOPAD3DViewer/commands/PAD3DViewerRevealCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext}return t.prototype.beginExecute=function(){return new Promise((t,n)=>{this.ec.getComponent("Viewer");new e({context:this.ec.getComponent("Viewer")}).execute(),this.endExecute(),t()})},t.prototype.endExecute=function(){this.destroy(),this.done()},t.prototype.destroy=function(){delete this.ec},t}),define("DS/ENO3DCommands/ENO3DEditPropertiesCmd",["DS/Selection/CSOManager","DS/PADUtils/PADSettingsMgt","DS/ENOPAD3DViewer/utils/PAD3DViewerModelServices","DS/ENOCollabSharingCmds/commands/EditPropCmd/EditPropCmdBase"],function(e,t,n,o){"use strict";function i(e){this._ec=e.executionContext,this._csoTokens=[]}return i.prototype.beginExecute=function(){require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DEditPropertiesCmd"}),t.trackPageEvent()});for(var i=this._ec.getComponent("Viewer"),r=e.get(),s=[],a=0;a<r.length;a++){for(var c=r[a].pathElement;c&&!n.isPLMNode(c.getLastElement(!0));)c=c.getParentPath();if(!c&&i.isSelectiveLoadingActivated()){var d=i.getController().getOOCSelectedReferenceID();d&&s.push({refID:d,instID:null})}else s.push({refID:n.getNodeID(c.getLastElement(!0)),instID:n.getNodeID(c.getParentPath().getLastElement(!0))})}var u=function(){return this.refID},l=function(){return this.instID},h={getSelectedNodes:function(){var e=[];for(a=0;a<s.length;++a)e.push({id:s[a].refID,tenant:t.getSetting("x3dPlatformId"),source:"3DSpace",getID:u.bind(s[a]),getRelationID:l.bind(s[a])});return e},getSecurityContext:function(){return{SecurityContext:t.getSetting("pad_security_ctx"),tenant:t.getSetting("x3dPlatformId")}}};(new o).launchProperties(h),this.endExecute()},i.prototype.endExecute=function(){this.done()},i.prototype.destroy=function(){delete this._csoTokens,delete this._ec},i}),define("DS/ENO3DCommands/OpenLandingPageCmd",["DS/PADServices/commands/HomeCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext}return t.prototype.beginExecute=function(){const t=this.ec.getComponent("Viewer");new e({context:t.getCommandContext()}).execute(),this.endExecute()},t.prototype.endExecute=function(){this.destroy(),this.done()},t.prototype.destroy=function(){delete this._ec},t}),define("DS/ENO3DCommands/actions/ENO3DStandardActions",["i18n!DS/ENO3DCommands/assets/nls/ENO3DCommands.json"],function(e){"use strict";const t=Object.create(null);return t.toggleStatusBar=function(e,t){require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DToggleStatusBarCmd"}),t.trackPageEvent()});const n=t.executionContext.getComponent("Viewer");if(n){let e=!0;void 0===t.args.state&&null===t.args.state||(e=t.args.state),n.displayStatusBar("true"===e)}e()},t.toggleSidePanel=function(e,t){if(t&&"object"!=typeof t.args&&"object"!=typeof t.executionContext)return void console.error("ENO3DStandardActions.toggleSidePanel\n\tInvalid parameters");const n=t.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents);n&&n.publish?"left"!==t.args.side&&"right"!==t.args.side?n.publish({event:"toggleSidePanel",data:"ENO3DStandardActions.toggleSidePanel\n\tInvalid side value, must be left or right"}):"open"!==t.args.action&&"close"!==t.args.action?n.publish({event:"toggleSidePanel",data:"ENO3DStandardActions.toggleSidePanel\n\tInvalid action value, must be open or close"}):"left"===t.args.side?"open"===t.args.action&&!1===t.executionContext.getComponent("Viewer")._rootListPanel.visibleFlag?t.executionContext.getComponent("Viewer")._showRootListPanel():"close"===t.args.action&&!0===t.executionContext.getComponent("Viewer")._rootListPanel.visibleFlag&&t.executionContext.getComponent("Viewer")._hideRootListPanel():"right"===t.args.side&&n.publish({event:"toggleSidePanel",data:t.args}):console.error("ENO3DStandardActions.toggleSidePanel\n\tUnable to get model event component from Wafr"),e()},t.toggleTimelineView=function(e,t){t.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"toggleTimelineView",data:t.args}),e()},t.togglePhoto360Mode=function(e,t){t.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"togglePhoto360Mode",data:t.args}),e()},t.togglePointCloudMinimap=function(e,t){t.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"togglePointCloudMinimap",data:t.args}),e()},t.openAppCmd=function(t,n){"ENOR3D_AP"===n.args.appId&&n.executionContext.getComponent("Viewer").displayNotification({msg:e.transitionRejectedInV2,eventID:"error"}),n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:"ENO3DOpenAppCmd",args:{appId:n.args.appId,ctx:n.executionContext.getComponent("Viewer"),ec:n.executionContext}}),t()},t}),define("DS/ENO3DCommands/ENO3DCleanViewCmd",[],function(){"use strict";function e(e){this.ec=e.executionContext}return e.prototype.beginExecute=function(){return require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DCleanViewCmd"}),t.trackPageEvent()}),new Promise(e=>{const t=this.ec.getComponent("Viewer");t&&t.empty&&t.empty(),this.endExecute(),e()})},e.prototype.endExecute=function(){this.destroy(),this.done()},e.prototype.destroy=function(){delete this.ec},e}),define("DS/ENO3DCommands/ENO3DHideShowCmd",["DS/Selection/CSOManager"],function(e){"use strict";function t(e){this._ec=e.executionContext}return t.prototype.beginExecute=function(){require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DHideShowCmd"}),t.trackPageEvent()});const t=this._ec.getComponent("Viewer"),n=e.get(),o=[];for(let e=0;e<n.length;++e)o.push(n[e].pathElement.clone());t.getHideShowController().toggleHideShow({paths:o,dispatch:!0}),this.endExecute()},t.prototype.endExecute=function(){this.destroy(),this.done()},t.prototype.destroy=function(){delete this._ec},t}),define("DS/ENO3DCommands/ENO3DDefineFilterCmd",["DS/ENOPAD3DViewer/commands/PAD3DViewerDefineFilterCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext,this._objectId=e.args&&e.args.objectId||null}return t.prototype.beginExecute=function(t){return new Promise((t,n)=>{const o=this.ec.getComponent("Viewer");try{const i=new e({context:o.getCommandContext()});null!==this._objectId&&i.setAppParams(this._objectId),i.execute(),this.endExecute(),t()}catch(e){this.endExecute(),n(e)}})},t.prototype.endExecute=function(){this.destroy(),this.done()},t.prototype.destroy=function(){delete this.ec},t}),define("DS/ENO3DCommands/ENO3DRemoveRootCmd",["DS/ENOPAD3DViewer/utils/PAD3DViewerModelServices"],function(e){"use strict";function t(e){this.ec=e.executionContext,this._viewer=this.ec.getComponent("Viewer")}return t.prototype.beginExecute=function(){return require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DRemoveRootCmd"}),t.trackPageEvent()}),new Promise(t=>{require(["DS/Selection/CSOManager","DS/Selection/HSOManager"],(n,o)=>{let i=n.get(),r=[];for(let t=0;t<i.length;++t){let n=i[t].pathElement.getLastElement(!0);(e.isPLMNode(n)||e.isTileSetNode(n))&&r.push(e.getNodeID(e.getRootReferences(n)[0]))}n.empty(),o.empty(),r.length&&(this._viewer.removeRoots({pids:r},!0),this._viewer.render({updateInfinitePlane:!0}),this._viewer.reframe()),this.endExecute(),t()})})},t.prototype.endExecute=function(){this.done()},t}),define("DS/ENO3DCommands/ENO3DPointCloudElevationCmd",["DS/PADServices/utils/PADTrackerManager"],function(e){"use strict";function t(e){this._ec=e.executionContext,this._viewer=this._ec.getComponent("Viewer")}return t.prototype.beginExecute=function(){if(!this._viewer.getController().get3DLayerController().hasLayer("pointCloudElevationLayer")){console.log("Launch PointCloudElevation cmd"),this._viewer.getController().launchPointCloudStyling("elevation");var t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3d",appId:widget.getValue("appId")});t.setEventData({eventLabel:"ENO3DPointCloudElevation",eventValue:"ENO3DPointCloudElevation"}),t.trackPageEvent()}this.endExecute()},t.prototype.endExecute=function(){this.done()},t.prototype.destroy=function(){delete this._ec,delete this._viewer},t}),define("DS/ENO3DCommands/ENO3DTransparencyCmd",["DS/ENOPAD3DViewer/commands/PAD3DViewerTransparencyCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext}return t.prototype.beginExecute=function(){return new Promise(t=>{const n=this.ec.getComponent("Viewer");new e({context:n.getCommandContext()}).execute(),this.endExecute(),t()})},t.prototype.endExecute=function(e){this.destroy(),this.done()},t.prototype.destroy=function(){delete this.ec},t}),define("DS/ENO3DCommands/ENO3DNavigateOnSelectionCmd",["DS/ENO3DView/controller/ENO3DPagerNavigationController"],function(e){"use strict";function t(e){this.options=e}return t.prototype.beginExecute=function(){new e(this.options),this._focusTooltip=this.options.args.focusTooltip,this._viewer||this.options&&this.options.executionContext&&(this._viewer=this.options.executionContext.getComponent("Viewer")),this._viewer&&(this._viewer._focusTooltip=this.options.args.focusTooltip),this.endExecute()},t.prototype.endExecute=function(){this.done()},t}),define("DS/ENO3DCommands/ENO3DCapturePOICmd",["DS/ENOPAD3DViewer/commands/PAD3DViewerCapturePOICmd"],function(e){"use strict";function t(e){this.ec=e.executionContext,this._data=e.args.data}return t.prototype.beginExecute=function(){return new Promise((t,n)=>{const o=this.ec.getComponent("Viewer");try{new e({context:o.getCommandContext()}).execute(this._data),this.endExecute(),t()}catch(e){this.endExecute(),n(e)}})},t.prototype.endExecute=function(){this.destroy(),this.done()},t.prototype.destroy=function(){delete this.ec},t}),define("DS/ENO3DCommands/ENO3DPrintCmd",["DS/WAfrHandlers/mod_HandlerComponent"],function(e){"use strict";function t(e){this._ec=e.executionContext,navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i)&&this._ec.getComponent(WAfrStandardComponentKey.HandlerComponent).disableHandler("ENO3DPrintCmd")}return t.prototype.beginExecute=function(){require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DPrintCmd"}),t.trackPageEvent()}),this._ec.getComponent(WAfrStandardComponentKey.HandlerComponent).disableHandler("ENO3DPrintCmd");const e=this._ec.getComponent("Viewer");var t=e.getViewer(),n=t.SCREEN_WIDTH/t.SCREEN_HEIGHT,o=n>1?1920:Math.floor(1920*n),i=n>1?Math.floor(1920/n):1920,r=document.createElement("canvas");r.width=o,r.height=i;var s={data:null,width:o,height:i,bufferWidth:0,bufferHeight:0,x:0,y:0};e.getViewer().renderToTarget(s,e.getViewpoint());var a=r.getContext("2d"),c=a.getImageData(0,0,r.width,r.height);if(c.width==r.width)if(c.height==r.height){var d,u,l,h,g=(s.width-1)/(c.width-1),p=(s.height-1)/(c.height-1),m=s.data,D=c.data;if(1==g&&1==p){var f=c.height,C=c.width,v=4*C;for(u=0;u<f;u++)for(l=u*C*4,h=(f-u)*C*4,d=v;d--;)D[l+d]=m[h+d]}else{var E=function(e,t,n,o,i){return i&&(t=o-t),n*t+e},x=c.height,S=c.width,y=s.height,P=s.width;for(u=0;u<x;u++){var w=Math.floor(p*u);for(d=0;d<S;d++)l=4*E(d,u,S,x),h=4*E(Math.floor(g*d),w,P,y,!0),D[l]=m[h],D[l+1]=m[h+1],D[l+2]=m[h+2],D[l+3]=m[h+3]}}a.putImageData(c,0,0,0,0,r.width,r.height);var _=function(e){var t='style="max-width: 100%"';n<1&&(t='style="max-height: 95%; margin: 0px"');var o="<!DOCTYPE html>";o+='<html style="height: 100vh; width: 100vw; margin: 0px">',o+="<head><title>"+e.contentName+"</title></head>",o+='<body style="height: 100vh; width: 100vw; margin: 0px">',o+='<img src="'+r.toDataURL("image/png")+'" '+t+">",o+="</body>",o+="</html>";var i=window.open("","","width=800,height=600");i.document.open(),i.document.addEventListener("load",function(){i.focus(),i.print(),i.document.close(),i.close(),this.endExecute(),this._ec.getComponent(WAfrStandardComponentKey.HandlerComponent).enableHandler("ENO3DPrintCmd")}.bind(this),!0),i.document.write(o)}.bind(this);e.getContentName().then(_).catch(_)}else console.error("error");else console.error("error")},t.prototype.endExecute=function(){this.done()},t.prototype.destroy=function(){delete this._ec},t}),define("DS/ENO3DCommands/ENO3DLevelSelectorCmd",["DS/ENOPAD3DViewer/utils/PAD3DViewerModelServices","DS/LevelSelector/LevelSelector","DS/Selection/CSOManager","DS/Selection/HSOManager","DS/Selection/PSOManager"],function(e,t,n,o,i){"use strict";function r(e){this._viewer=e.executionContext.getComponent("Viewer"),this._context=e.executionContext.getComponent("Context"),this._labelsVisibility=e.args.labelVisibility||!1,this._emptyCSOToken="",this._levelSelectorContext=null,this._path=null,this._levels=[],this._event=null}return r.prototype.beginExecute=function(){require(["DS/PADServices/utils/PADTrackerManager"],e=>{const t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3D"});t.setEventData({eventLabel:"ENO3DLevelSelectorCmd"}),t.trackPageEvent()}),this._emptyCSOToken=n.onEmpty(()=>{this.endExecute()});const e=n.get();if(1===e.length){this._event=e[0].event,this._path=e[0].pathElement,this._levelSelectorContext=e[0].pathElement.clone();var o=this._viewer.getDOMElement("container");t.createView({positionX:this._event?this._event.event.pageX+75:o.offsetWidth/2,positionY:this._event?this._event.event.pageY-75:o.offsetHeight/2,uiFrame:o,getLevels:this._getLevels.bind(this),onHover:this._onHover.bind(this),onLeave:this._onLeave.bind(this),onSelect:this._onSelect.bind(this)})}else this.endExecute()},r.prototype.endExecute=function(){n.unsubscribe(this._emptyCSOToken),t.destroyView(),delete this._labelsVisibility,delete this._viewer,delete this._emptyCSOToken,delete this._levelSelectorContext,delete this._levels,delete this._path,delete this._event,this.done()},r.prototype._getLevels=function(t){for(var i=this._path,r=[];i;){var s=i.externalPath[i.externalPath.length-1];if(e.isPLMNode(s)&&(e.isReference(s)||e.is3DLeaf(s))){const t=i.getLastElement(!0),n=e.getBIColor(t);null!==n?this._levels.push({pathElement:i,canvasColor:n,event:this._event}):this._levels.push({pathElement:i,event:this._event}),r.push(e.getNodeID(i.getLastElement(!0)))}i=i.getParentPath()}if(this._labelsVisibility&&r.length){var a=["ds6w:label","type_icon_url"],c="";if(this._viewer.getController().is3DLeafColorizeActivated()){c=this._viewer.getController().getBIColorMap().predicate;a.push(c)}this._viewer.getController().getAttributes({ids:r,attributes:a,callbacks:{onComplete:n=>{for(var o=0;o<this._levels.length;++o){var i=e.getNodeID(this._levels[o].pathElement.getLastElement(!0));if(n[i]&&(this._levels[o].name=n[i][a[0]],this._levels[o].icon=n[i][a[1]],this._viewer.getController().is3DLeafColorizeActivated()&&""!==c)){var r=n[i][c];this._levels[o].canvasColor=this._viewer.getController().getColorValueForPredicate(r,this._viewer.getController().getBIColorMap().predicateKind)}}t(this._levels),this._context.setContextBarVisibility(!1),this.done()},onFailure:e=>{console.error("Levele selector command: The getAttributes call failed.",e),t(this._levels),this._context.setContextBarVisibility(!1),this.done()}}})}else o.empty(),n.empty(),this.done();return this._levels},r.prototype._onHover=function(e){o.empty(),i.empty(),e.event=this._event,o.add(e)},r.prototype._onLeave=function(e){o.empty(),i.empty(),o.add({pathElement:this._levelSelectorContext,event:this._event})},r.prototype._onSelect=function(e){o.empty(),n.empty(),e.event=this._event,o.add(e),n.add(e),this.endExecute()},r}),define("DS/ENO3DCommands/ENO3DPointCloudClassificationCmd",["DS/PADServices/utils/PADTrackerManager"],function(e){"use strict";function t(e){this._ec=e.executionContext,this._viewer=this._ec.getComponent("Viewer")}return t.prototype.beginExecute=function(){if(!this._viewer.getController().get3DLayerController().hasLayer("pointCloudClassificationLayer")){console.log("Launch PointCloudClassification cmd"),this._viewer.getController().launchPointCloudStyling("classification");var t=e.getPADTracker({eventCategory:"usage",eventAction:"command-3d",appId:widget.getValue("appId")});t.setEventData({eventLabel:"ENO3DPointCloudClassification",eventValue:"ENO3DPointCloudClassification"}),t.trackPageEvent()}this.endExecute()},t.prototype.endExecute=function(){this.done()},t.prototype.destroy=function(){delete this._ec,delete this._viewer},t}),define("DS/ENO3DCommands/HighQualityCmd",["DS/ENO3DCommands/ENO3DToggleAccurateCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext}return t.prototype.beginExecute=function(t){return new Promise((t,n)=>{const o=this.ec.getComponent("Viewer");(new e).beginExecute({executionContext:this.ec,context:o.getCommandContext(),arguments:[{ID:"mode",Value:"high"}]}),t(),this.endExecute()})},t.prototype.endExecute=function(){this.destroy(),this.done()},t.prototype.destroy=function(){delete this.ec},t}),define("DS/ENO3DCommands/OptimizedQualityCmd",["DS/ENO3DCommands/ENO3DToggleAccurateCmd"],function(e){"use strict";function t(e){this.ec=e.executionContext}return t.prototype.beginExecute=function(t){return new Promise((t,n)=>{const o=this.ec.getComponent("Viewer");(new e).beginExecute({executionContext:this.ec,context:o.getCommandContext(),arguments:[{ID:"mode",Value:"optimized"}]}),t(),this.endExecute()})},t.prototype.endExecute=function(){this.destroy(),this.done()},t.prototype.destroy=function(){delete this.ec},t});