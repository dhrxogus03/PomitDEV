define("DS/MPFCurrencySelectComponent/CurrencySelectComponent",["UWA/Core","DS/MPFView/FieldSelectInputV2","DS/MPFServices/ObjectService","DS/MPFShopModel/ShopModel","DS/MPFView/ValidationResultBuilder","i18n!DS/MPFCurrencySelectComponent/assets/nls/MPFCurrencySelectComponent"],function(e,t,i,r,s,l){"use strict";return t.extend({setup:function(e={}){i.requiredOfPrototype(this.model,r,"this.model must be a ShopModel"),e.placeholder=l.get("selectCurrency"),e.fieldName=r.Fields.CURRENCIES,e.fieldLabel=l.get("currency"),e.required=!0,e.dynamicValidation=!0,e.readOnly=!0===e.readOnly||this.model.getState()===r.States.SUBMITTED,e.selectableOptions=this._getCurrencies(),this._parent(e)},validate:function(t={}){const i=new s;let r;if(this._removeErrorMessage(),this.required&&""===this.getValue().trim()&&i.addError(this.fieldName,l.get("currencyRequired")),i.isValid){const t=Array.isArray(this.model.getSupportedCurrencies())&&this.model.getSupportedCurrencies().length>0,s=t&&this.model.getSupportedCurrencies()[0]!==this.getValue();t&&!s||this.model.set({[this.fieldName]:[this.getValue()]},{silent:this.silent}),r=this.model.validate(this.model.pick(this.fieldName)),e.is(r)&&r.filter(e=>e.fieldName===this.fieldName).forEach(e=>i.addError(this.fieldName,e.message))}const d=i.build();return d.isValid||this._displayErrorMessage(d),d},_getCurrencies:function(){let t;const i=e.is(this.model.getSupportedCurrencies())&&this.model.getSupportedCurrencies().length>0;i&&(t=this.model.getSupportedCurrencies()[0]);const r=[{value:"EUR",selected:!!i&&"EUR"===t},{value:"USD",selected:!!i&&"USD"===t},{value:"GBP",selected:!!i&&"GBP"===t}];return this.model.isInternal()&&(r.push({value:"AED",selected:!!i&&"AED"===t}),r.push({value:"SGD",selected:!!i&&"SGD"===t})),r}})});