define("DS/DELWKOAuxiliaryModule/DELWKOFindWOToastMessageCloud",["UWA/Class","DS/Controls/Button","DS/DELPPWWebServices_FD02/WebserviceUtils"],function(e,t,n){"use strict";return e.extend({contentToastView:null,contentView:null,init:function(e){this.contentToastView=UWA.createElement("div",{id:"toastMessage"}).inject(e)},onClose:function(){this.contentToastView&&(this.contentToastView.className=this.contentToastView.className.replace("show",""))},buildToastMessage:function(e,i){var o=this;o.contentToastView.getChildren().length&&o.contentToastView.removeChild(o.contentToastView.getChildren()[0]),o.contentView=UWA.createElement("div");var a=document.createElement("img"),l="",s="";0===e?(l="I_Info",s="#f1f3f4"):1===e?(l="I_Warning",s="#ffe893"):2===e?(l="I_Error",s="#fff0ee"):3===e&&(l="I_Success",s="#edf6eb"),a.setAttribute("src",n.get3DSpaceUrl()+"/webapps/ParameterizationSkeleton/assets/icons/"+l+".png"),o.contentView.setStyles({"background-color":s}),o.contentView.setHTML(i),o.contentView.prepend(a);var r=new t({displayStyle:"icon",icon:{iconName:"close",fontIconFamily:WUXManagedFontIcons.Font3DS},iconSize:"0.5",onClick:function(){o.onClose.call(o)}});return r.elements.container.setStyles({"border-style":"none"}),o.contentView.appendChild(r.elements.container),o.contentView.inject(o.contentToastView),o.contentToastView},showToastMessage:function(e,t){var n=this;n.buildToastMessage(e,t),""===n.contentToastView.className&&(n.contentToastView.className="show",setTimeout(function(){n.contentToastView.className=n.contentToastView.className.replace("show","")},4e3))}})}),define("DS/DELWKOAuxiliaryModule/DELWKOFindWODialogCloud",["UWA/Class","UWA/Core","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/Label","DS/Controls/ComboBox","DS/Controls/DatePicker","DS/Controls/LineEditor","DS/DELWKOIRPCModels/DELWKOWorkOrderReferenceModel","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/DELWKOAuxiliaryModule/DELWKOFindWOToastMessageCloud","i18n!DS/DELWKOAuxiliaryModule/assets/nls/DELWKOFindWODialogCloud","i18n!DS/DELWKOIRPCModels/assets/nls/DELWKOWorkOrderReferenceState","css!DS/DELWKOAuxiliaryModule/assets/css/DELWKOFindWODialogCloud.css"],function(e,t,n,i,o,a,l,s,r,c,d,u,g,f){"use strict";return e.extend({_dialog:null,_allowedStates:[{label:f.FIRM,value:"FIRM"},{label:f.RELEASED_FOR_EXECUTION,value:"RELEASED_FOR_EXECUTION"},{label:f.READY_FOR_EXECUTION,value:"READY_FOR_EXECUTION"},{label:f.WORK_IN_PROGRESS,value:"WORK_IN_PROGRESS"},{label:f.COMPLETED,value:"COMPLETED"},{label:f.CLOSED,value:"CLOSED"},{label:f.CANCELLED,value:"CANCELLED"},{label:f.ABORTED,value:"ABORTED"}],init:function(e){var t=this,o=new n({});this._dialog=new i({immersiveFrame:o,title:g.findDialog,content:this.buildView(e),activeFlag:!1}),this._dialog.close=(()=>{t.setVisibleFlag(!1)}),o.inject(e.container)},buildView:function(e){var n=t.createElement("div",{class:"contentModalFindWOView"}),i=t.createElement("div",{class:"productionPlanDivView"}),c=new a({value:g.ProductionPlan});c.elements.container.setStyles({"text-align":"left",width:"40%"}),c.inject(i);var f=[],v=new l({requiredFlag:!0});v.elements.container.setStyles({width:"55%"});var h=d.getProductionPlan();t.Promise.all([h]).then(function(e){e.forEach(e=>{e.forEach(e=>{e.content.forEach(e=>{f.push({label:e.title,value:e.id})}),v.elementsList=f})})}),v.inject(i),i.inject(n);var m=t.createElement("div",{class:"woStateDivView"}),w=new a({value:g.WOMaturityState});w.elements.container.setStyles({"text-align":"left",width:"40%"}),w.inject(m);var D=new l({elementsList:this._allowedStates,requiredFlag:!0});D.elements.container.setStyles({width:"55%"}),D.inject(m),m.inject(n);var S=t.createElement("div",{class:"woNoDivView"}),y=new a({value:g.WONumber});y.elements.container.setStyles({"text-align":"left",width:"40%"}),y.inject(S);var p=new r({});p.elements.container.setStyles({width:"55%"}),p.inject(S),S.inject(n);var E=t.createElement("div",{class:"scheduledDateDivView"}),A=new a({value:g.ScheduledStartDateRange});A.elements.container.setStyles({"text-align":"left",width:"40%"}),A.inject(E);var C=new s({value:void 0}).inject(E);C.elements.container.setStyles({width:"25%"}),new a({value:g.ScheduledStartToDateRange}).elements.container.setStyles({"text-align":"left",width:"7%"}).inject(E);var L=new s({value:void 0}).inject(E);L.elements.container.setStyles({width:"25%"}),E.inject(n);var T=new u(n);T.contentToastView.setStyles({border:"1px solid black",position:"absolute","z-index":"1",bottom:"50px",width:"80%","margin-left":"10%"});var V=t.createElement("div",{class:"footerWOModalDivView"}).inject(n);return new o({label:g.Search,emphasize:"primary",displayStyle:"icon",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},iconSize:"0.5",onClick:function(){t.is(e)&&t.is(e.callback)&&e.callback.onHideAll();var n=new Map,i=new Map,o=void 0;t.is(D.selectedIndex)&&D.selectedIndex>-1&&(o=D.elementsList[D.selectedIndex].value),t.is(o)&&i.set("state",!0);var a=void 0;t.is(v.selectedIndex)&&v.selectedIndex>-1&&(a=[v.elementsList[v.selectedIndex].value]),t.is(a)?i.set("productionplan",!0):n.set("productionplan",!1);var l=p.value;t.is(l)&&""!=l&&i.set("woname",!0);var s=C.value;t.is(s)&&(s=new Date(s.toDateString()),i.set("scheduledStartFromDate",!0));var r=L.value;t.is(r)&&(r=new Date(r.toDateString()),i.set("scheduledStartToDate",!0));var c=!0;if(n.forEach((e,t)=>{e||(c=!1)}),t.is(c)&&!0===c){var u=d.getWorkOrderFromProductionPlan(a,o);t.Promise.all([u]).then(function(n){n.forEach(n=>{n.forEach(n=>{n.forEach(n=>{n.content.forEach(n=>{var o=!0,a=n.name,c=n.scheduledStartDate;if(!0===i.get("woname")&&(t.is(a)?t.is(l)&&!a.toUpperCase().includes(l.toUpperCase())&&(o=!1):o=!1),!0===i.get("scheduledStartFromDate")&&new Date(c)<s&&(o=!1),!0===i.get("scheduledStartToDate")&&new Date(c)>r&&(o=!1),o){n.type="DELLmiWorkOrderReference";var u=d.fetchRefOnCloud(n);t.Promise.all([u]).then(function(n){t.is(e)&&t.is(e.callback)&&e.callback.onAddReference(n)})}})})})}),d.fetchRefList([],{withLinksResolved:!1,onComplete:function(n){t.is(e)&&t.is(e.callback)&&e.callback.onAddReference(n.instancesAndReferences)}})})}else T.showToastMessage(2,g.ProductionPlanErrorMsg)}}).inject(V),new o({label:g.Clear,emphasize:"primary",displayStyle:"icon",icon:{iconName:"search-delete",fontIconFamily:WUXManagedFontIcons.Font3DS},iconSize:"0.5",onClick:function(){D.selectedIndex=-1,v.selectedIndex=-1,C.value=void 0,L.value=void 0,p.value=""}}).inject(V),n},setVisibleFlag:function(e){this._dialog.visibleFlag=e}})}),define("DS/DELWKOAuxiliaryModule/DELWKOAuxiliaryModuleCloud",["UWA/Core","DS/DELWKOAuxiliaryModule/DELWKOFindWODialogCloud","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/DELPPWResourceServices_FD02/ResourceUtils","i18n!DS/DELWKOAuxiliaryModule/assets/nls/DELWKOFindWODialogCloud"],function(e,t,n,i,o){"use strict";return{behaviors:["WUXNodeModelBehavior","UXFactoryBehavior","TreeListViewBehavior","ModelBehavior","LinkBehavior","ResourceBehavior","SearchBehavior","RefreshBehavior","ViewBehavior","TaggerBehavior","DuplicateAdvBehavior","LoadObjectBehavior","MfgProcessBehavior","RootsBehavior"],creator:function(n,a,l,s,r,c,d,u,g,f,v,h,m,w,D){var S,y,p,E,A=[],C=[],L=function(t){var n,i=function(t){var i=!1;return e.is(t)&&e.is(t.get,"function")&&(t.isConnection()?i=C.indexOf(t.get("type"))>-1:(n=r.getPPRType(t),i=A.indexOf(n)>-1)),i};return Array.isArray(t,"array")?t.every(function(e){return i(e)}):i(t)},T=function(){return A.indexOf("PROCESS")>-1||A.indexOf("SERVICE")>-1},V=function(t){var i,o,l,s={forceDBMode:!0,silent:!0,onComplete:function(t){e.is(t)?r.createRefOrInst({isInstanceOf:t.get("PID")},l.get("PID")):n.debug("Child reference fetch failed")}};i=a.getSelectedNodes(),e.is(i,"array")&&e.is(t)&&(o=i[0].getID(),l=r.getReferenceModel(o),t.forEach(function(e){r.fetchRoot(e.id,s)}))},O=function(){var t=n.getId(),i=!1,o=n.getPreferenceValue("widgetLayoutValues");return e.is(o)&&(i=""!==e.Json.decode(o)[t]),i};return{listenTo:function(){return{addToAuxiliaryView:this.addToAuxiliaryView,toggleAuxPanel:this.onToggleAuxPanel,widgetLayoutChanged:this.onWidgetLayoutChanged}},onStart:function(r){var c,u=this,g=n.getElement(),v=g.getElementsByClassName("tree-list-container")[0],h=l.getComponent("WUXFrameWindowsManager").getFrameWindow(n.getAppContext()),m=e.is(widget.getValue("isMFNToggleAuxiliaryViewVisible"))?"MFN":"MGA",w=widget.getValue("isViewPersistanceOn");if(p=l.getComponent("WUXDockAreaEnum"),!e.is(r.pprTypes)||!e.is(r.linkTypes))throw new Error(n.getId()+": TreeListAuthoringModule initialization failed");A=r.pprTypes,C=r.linkTypes,S=e.is(r.displayBadge)?r.displayBadge:null,y=e.is(r.displayBadgePS)?r.displayBadgePS:null,E=l.create("Panel",{title:d.getNLSValue("View.AUXILIARY.Title"),identifier:"AuxiliaryPanel",minWidth:300,minHeight:250,height:250,width:300,immersiveFrame:h.getImmersiveFrame(),content:g,visibleFlag:!1,resizableFlag:!0,closeButtonFlag:!1,useBordersFlag:!0,collapsibleFlag:!1,verticallyStretchableFlag:!0}),f.registerViewforWidgetLayout({viewID:n.getId(),viewType:"treeListView",dockArea:p.LeftDockArea}),c=w?widget.getValue("is"+m+"ToggleAuxiliaryViewVisible"):O();var D=document.createElement("div");D.className="divToolbar",D.style.position="absolute",v.appendChild(D);var L=document.createElement("div");L.className="divGridView",v.appendChild(L),s.loadDocument(a.getWUXNodeModel()),s.getContent().inject(L),s.getContent().style.top="30px",s.getDataGridView().setToolbar({entries:[{id:"findDialogId",dataElements:{typeRepresentation:"functionIcon",icon:i.getIconURLFromKey("SearchWorkOrder"),value:function(){u._findDialog.setVisibleFlag(!u._findDialog._dialog.visibleFlag)},tooltip:o.findDialog}}]}).inject(D),u._findDialog=new t({container:g,callback:u}),u._findDialog.setVisibleFlag(!1),n.notify("toggleCmdCheckHeaderState",{cmdName:"ToggleAuxiliaryView",cmdState:c})},onStop:function(){e.is(E)&&(E.remove(),E=void 0),f.unregisterViewforWidgetLayout(n.getId(),"treeListView")},onAddReference:function(t){t=e.is(t,"array")?t:[t],a.withTransactionUpdate(function(){t.forEach(function(t){!function(t){L(t)&&e.is(t.get("PID"))&&a.addNode(t,{silentMode:!0,withLinksResolved:!1,auxiliaryView:!0})}(t)})})},onAddInstance:function(t){var n={silentMode:!0,withLinksResolved:!1},i=function(e){a.addNode(e,n)};e.is(t,"array")?a.withTransactionUpdate(function(){t.forEach(function(e){i(e)})}):i(t)},onAddConnection:function(t){var n=function(t){var n,i;L(t)&&(i=t.get("from"),n=t.get("type"),e.is(S)&&S.linkType===n?a.updateBadge(i,S.badgeIcon):e.is(y)&&y.linkType===n&&a.updateBadge(i,y.badgeIcon))};e.is(t,"array")?a.withTransactionUpdate(function(){t.forEach(function(e){n(e)})}):n(t)},onChangeIRPC:function(t){var n=function(e){L(e)&&a.updateAttributes(e)};e.is(t,"array")?a.withTransactionUpdate(function(){t.forEach(function(e){n(e)})}):n(t)},onRemoveRefOrInst:function(e){var t=[];e=Array.isArray(e)?e:[e],a.withTransactionUpdate(function(){e.forEach(function(e){t.push(e.get("PID"))}),t.length>0&&a.removeNodes(t)})},onRemoveConnection:function(t){var i=[],o=function(t){var o,a;L(t)&&(o=t.get("type"),e.is(o,"string")?(a=t.get("from"),(e.is(S)&&S.linkType===o||e.is(y)&&y.linkType===o)&&i.push(a)):n.debug("Could not get connection type"))};a.withTransactionUpdate(function(){e.is(t,"array")?t.forEach(function(e){o(e)}):o(t),i.length>0&&a.updateBadge(i,null)})},onHideAll:function(){a.onHideAll()},onToggleAuxPanel:function(e){var t,n,i;n=function(){E.visibleFlag||(E._getPositionFromPreferences()||(E.currentDockArea=p.LeftDockArea),E.show()),(t=E.immersiveFrame.getDockingElement(E.currentDockArea))&&(t.collapseDockingZoneFlag=!1)},i=function(){E.visibleFlag&&(E.hide(),a.unSelectAll())},!0===e.state?n():i()},onExpandAll:function(){var t=a.getSelectedNodes();e.is(t,"array")&&t.length>0&&a.expandNode(t)},onCollapseAll:function(){var t=a.getSelectedNodes();e.is(t,"array")&&t.length>0&&a.collapseNode(t)},onWidgetLayoutChanged:function(){var e,t,i=O();E.currentDockArea=p.LeftDockArea,E._saveDockAreaInPreferences(),e=E.currentDockArea,(t=E.immersiveFrame.getDockingElement(e)).getContainedVisibleWindows().length<=0&&(t.visibleDockingZoneFlag=!1),n.notify("toggleCmdCheckHeaderState",{cmdName:"ToggleAuxiliaryView",cmdState:i}),n.notify("AuxLayoutCommandsToggled")},onReparentInstances:function(e){a.reparent(e)},onReparentBegin:function(e){a.isNodeAdded(e)&&(a.showOverlay(),a.unSelectAll())},onReparentEnd:function(e){a.isNodeAdded(e)&&a.removeOverlay()},addToAuxiliaryView:function(t,i){var o,s,r,c,u,g,f=i||{},v={},h=d.getNLSValue(n.getId()),m=0,w=!!e.is(f.forceDBMode)&&f.forceDBMode,D=!!e.is(f.askAddToAuxConfirmation)&&f.askAddToAuxConfirmation,S={withLinksResolved:!1,forceDBMode:w,onAddToTreeListComplete:function(e){m++,n.log(d.getNLSValue("AuxiliaryModule.AddRoot.Title",{objectName:e.get("V_Name"),view:h}),u),m===t.length&&(E.visibleFlag||n.notify("toggleCmdCheckHeaderState",{cmdName:"ToggleAuxiliaryView",cmdState:!0}),0===m&&n.info(d.getNLSValue("AuxiliaryModule.AddRootSuccess.Title",{view:h}),u))}};t=e.is(t,"array")?t:[t],o=function(){u=n.log(d.getNLSValue("AuxiliaryModule.AddRoot.LogMessage",{view:h})),t.forEach(function(t){g=a.validate(t),e.is(g)?(v[g.param]=g.paramValue,c=d.getNLSValue(g.key,v,"ValidationError"),n.warn(c,u),m++):a.addNode(t,S)})},e.is(t)&&(D?(s=d.getNLSValue("Confirmation.AddAsNewRoot"),r=d.getNLSValue("Confirmation.AreYouSure"),l.showConfirmation(r,s,{attributes:["V_Name"],models:t},function(t){e.is(t)&&t&&o()})):o())},onSearchAndAddInstance:function(){var e,t,n=a.getSelectedNodesInfo();1===n.length&&T()&&(t="RESOURCE"!==(e=r.getReferenceModel(n[0].id,!0)).get("PPRTYPE")?r.getValidChildTypes(e):["VPMReference"],u.showSearchDialoguAndActivate(V,{types:t}))},onInsertAsCopy:function(){var e,t=a.getSelectedNodesInfo();1===t.length&&T()&&(e=r.getReferenceModel(t[0].id,!0),u.showSearchDialoguAndActivate(V,{types:r.getValidChildTypes(e),command:"duplicate"}))}}}}});